<form [formGroup]="form">
<h2>Employee Profiles</h2>
<div formArrayName="employees">
  <div *ngFor="let employee of employees.controls; let i = index" [formGroupName]="i" class="employee-card">
    <div class="form-group">
      <label for="employeeName-{{i}}">Employee Name</label>
      <input id="employeeName-{{i}}" formControlName="name" class="form-control"
        placeholder="Enter employee name">
    </div>

    <div class="form-group">
      <label for="employeeRole-{{i}}">Role</label>
      <input id="employeeRole-{{i}}" formControlName="role" class="form-control"
        placeholder="Enter employee role">
    </div>

    <div class="form-group">
      <label for="employeeBio-{{i}}">Bio</label>
      <textarea id="employeeBio-{{i}}" formControlName="bio" class="form-control" rows="3"
        placeholder="Enter employee bio"></textarea>
    </div>

    <div class="form-group">
      <label for="employeePhoto-{{i}}">Photo</label>
      <input type="file" id="employeePhoto-{{i}}" (change)="onEmployeeFileChange($event, i)"
        class="form-control">
      <ng-container *ngIf="uploadProgress['employee_' + i] | async as progress">
        <div class="progress">
          <div class="progress-bar" [style.width]="progress + '%'">{{ progress }}%</div>
        </div>
      </ng-container>
    </div>

    <div *ngIf="employee.get('photoURL')?.value">
      <img [src]="employee.get('photoURL')?.value" alt="Employee Photo" class="employee-photo">
    </div>

    <button type="button" (click)="removeEmployee(i)" class="remove-button">Remove Employee</button>
  </div>

</div>
<button type="button" (click)="addEmployee()">Add Employee</button>
</form>
