<form [formGroup]="form">
<h2>Services Page</h2>


<button (click)="addService()" class="afhBtn">Add Service</button>

<div formArrayName="services">
  <div *ngFor="let service of services.controls; let i = index" [formGroupName]="i" class="sectionForm-container">
    <div class="sectionForm-header">
      <div class="sectionForm-header-item">
        <h3>Service {{ i + 1 }}</h3>
      </div>
      <div class="sectionForm-header-item">
        <label for="serviceName">Service Name</label>
        <input formControlName="name" id="serviceName" class="form-control" placeholder="Enter service name" />
      </div>
      <div class="sectionForm-header-item">

        <label for="serviceIcon">Font Awesome Icon</label>
        <input formControlName="icon" id="serviceIcon" class="form-control" placeholder="Enter Icon Class" />
      </div>
      <div class="sectionForm-header-item">
        <button (click)="toggleService(i)" class="toggle-btn">
          {{ collapsedServices[i] ? 'Expand' : 'Collapse' }}
        </button>
      </div>
    </div>
    <div [ngClass]="{'collapsed': collapsedServices[i]}">
      <label for="serviceDescription">Description</label>
      <textarea formControlName="description" id="serviceDescription" class="form-control" rows="3"></textarea>
    </div>

    <button (click)="removeService(i)" class="afhBtn">Remove Service</button>
  </div>
</div>


<button (click)="addBenefit()" class="afhBtn">Add Benefit</button>

<div formArrayName="benefits">
  <div *ngFor="let service of benefits.controls; let i = index" [formGroupName]="i" class="benefit-container">

    <!-- Single Row Display (Collapsed) -->
    <div class="benefit-header">
      <i [class]="service.get('icon')?.value || 'fa fa-star'"></i>
      <span class="benefit-name">{{'Benefit ' + (i + 1)}}: {{ service.get('name')?.value  }}</span>

      <button (click)="toggleService(i)" class="toggle-btn">
        {{ collapsedServices[i] ? 'Expand' : 'Collapse' }}
      </button>
    </div>

    <!-- Expanded View -->
    <div *ngIf="!collapsedServices[i]" class="benefit-details">
      <label for="benefitName">Benefit Name</label>
      <input formControlName="name" id="benefitName" class="form-control" placeholder="Enter benefit name" />

      <label for="benefitIcon">Font Awesome Icon</label>
      <input formControlName="icon" id="benefitIcon" class="form-control" placeholder="Enter Icon Class" />

      <label for="benefitDescription">Description</label>
      <textarea formControlName="description" id="benefitDescription" class="form-control" rows="3"></textarea>
    </div>



    <button (click)="removeBenefit(i)" class="afhBtn">Remove Benefit</button>
  </div>
</div>



<div class="form-group">
  <label for="specialPrograms">Special Programs</label>
  <textarea id="specialPrograms" formControlName="specialPrograms" class="form-control"></textarea>
</div>
<div class="form-group">
  <label for="tours">Tours</label>
  <textarea id="tours" formControlName="tours" class="form-control"></textarea>
</div>
<div class="form-group">
  <label for="freeConsulting">Free Consulting</label>
  <textarea id="freeConsulting" formControlName="freeConsulting" class="form-control"></textarea>
</div>
</form>
