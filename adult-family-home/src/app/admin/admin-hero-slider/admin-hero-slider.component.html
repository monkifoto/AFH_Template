<div class="admin-hero-slider">
  <h2>Manage Hero Slider</h2>
  <form [formGroup]="sliderForm" (ngSubmit)="saveSliderData()">
    <div formArrayName="slides">
      <div *ngFor="let slide of slides.controls; let i = index" [formGroupName]="i" class="slide">
        <h3>Slide {{ i + 1 }}</h3>
        <label>Title</label>
        <input formControlName="title" type="text" />
        <label>Subtitle</label>
        <textarea formControlName="subtitle"></textarea>
        <label>Background Image</label>
        <input type="text" formControlName="backgroundImage" placeholder="Image URL" readonly />
        <input type="file" (change)="uploadImage($event, i)" />
        <div *ngIf="uploadProgress[i] !== undefined">
          <progress [value]="uploadProgress[i]" max="100"></progress>
        </div>
        <!-- Thumbnail Preview -->
        <img *ngIf="slides.at(i).get('backgroundImage')?.value"
             [src]="slides.at(i).get('backgroundImage')?.value"
             alt="Slide Background"
             class="thumbnail" />
        <div formArrayName="buttons">
          <div *ngFor="let button of getButtons(slide).controls; let j = index" [formGroupName]="j" class="button">
            <label>Button Text</label>
            <input formControlName="text" type="text" />
            <label>Button Link</label>
            <input formControlName="link" type="text" />
            <label>Outline</label>
            <input formControlName="outline" type="checkbox" />
            <button type="button" (click)="removeButton(i, j)">Remove Button</button>
          </div>
          <button type="button" (click)="addButton(i)">Add Button</button>
        </div>
        <button type="button" (click)="removeSlide(i)">Remove Slide</button>
      </div>
    </div>
    <button type="button" (click)="addSlide()">Add Slide</button>
    <button type="submit" [disabled]="isSaving">Save Slider Data</button>
  </form>
  <!-- Confirmation Message -->
  <div *ngIf="message" class="message">{{ message }}</div>
</div>
