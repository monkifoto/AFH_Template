<div class="admin-hero-slider">
  <h2>Manage Hero Slider</h2>

  <form [formGroup]="sliderForm" (ngSubmit)="saveSliderData()">
    <div formArrayName="slides">
      <div *ngFor="let slide of slides.controls; let i = index" [formGroupName]="i" class="slide">
        <h3>Slide {{ i + 1 }}</h3>

        <div class="slide-grid">
          <div class="form-group">
            <label>Title</label>
            <input formControlName="title" type="text" class="short-input"/>
            <label>Subtitle</label>
            <textarea formControlName="subtitle" class="short-textarea"></textarea>
          </div>

          <div class="form-group">
            <img *ngIf="slides.at(i).get('backgroundImage')?.value"
            [src]="slides.at(i).get('backgroundImage')?.value"
            alt="Slide Background"
            class="thumbnail" />
            <label>Background Image</label>
            <input type="text" formControlName="backgroundImage" placeholder="Image URL" readonly class="short-input"/>
            <input type="file" (change)="uploadImage($event, i)" />
            <progress *ngIf="uploadProgress[i] !== undefined" [value]="uploadProgress[i]" max="100"></progress>
          </div>
        </div>

        <!-- Collapsible Button Section -->
        <details>
          <summary>Buttons</summary>
          <div formArrayName="buttons">
            <div *ngFor="let button of getButtons(slide).controls; let j = index" [formGroupName]="j" class="button-grid">
              <input formControlName="text" type="text" placeholder="Text" class="tiny-input"/>
              <input formControlName="link" type="text" placeholder="Link" class="tiny-input"/>
              <label><input formControlName="outline" type="checkbox" /> Outline</label>
              <button type="button" (click)="removeButton(i, j)">âœ–</button>
            </div>
            <button type="button" (click)="addButton(i)">+ Add Button</button>
          </div>
        </details>

        <button type="button" (click)="removeSlide(i)">Remove Slide</button>
      </div>
    </div>

    <button type="button" (click)="addSlide()">Add Slide</button>


    <!-- Slider Configuration -->
    <div class="config-settings" formGroupName="sliderConfig">
      <h3>Slider Configuration</h3>

      <label>Navigation</label>
      <select formControlName="navigation">
        <option value="side">Side</option>
        <option value="bottom">Bottom</option>
      </select>

      <label>Show Side Buttons</label>
      <input type="checkbox" formControlName="sideButtons" />

      <label>Slider Height</label>
      <select formControlName="sliderHeight">
        <option *ngFor="let height of sliderHeights" [value]="height">{{ height }}</option>
      </select>

      <label>Button Border Radius</label>
      <input type="text" formControlName="buttonBorderRadius" />

      <label>Subtitle Size</label>
      <input type="text" formControlName="subtitleSize" />

      <label>Subtitle Weight</label>
      <input type="text" formControlName="subtitleWeight" />
    </div>

    <button type="submit" [disabled]="isSaving">Save Slider Data</button>
  </form>

  <!-- Confirmation Message -->
  <div *ngIf="message" class="message">{{ message }}</div>
</div>
