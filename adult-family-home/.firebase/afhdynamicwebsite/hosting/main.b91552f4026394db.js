"use strict";(self.webpackChunkadult_family_home=self.webpackChunkadult_family_home||[]).push([[179],{35:(rs,qn,We)=>{We.d(qn,{$:()=>Qg,A:()=>Ie,G:()=>Nt,K:()=>uh,L:()=>Do,N:()=>qi,P:()=>Tm,R:()=>Em,U:()=>Xe,V:()=>pa,W:()=>Fc,X:()=>yh,Y:()=>vh,Z:()=>Ct,_:()=>wu,a:()=>Ea,a0:()=>Yg,a1:()=>Hc,a2:()=>xi,a3:()=>em,a4:()=>tm,a5:()=>nm,a6:()=>qc,a7:()=>MI,a8:()=>Me,a9:()=>dn,aA:()=>Dc,aB:()=>Ut,aC:()=>fe,aD:()=>ls,aE:()=>Ae,aF:()=>Dt,aG:()=>il,aH:()=>Rm,aI:()=>KI,aJ:()=>cn,aN:()=>wa,aQ:()=>zr,aa:()=>Cu,ab:()=>ma,ac:()=>Fn,ad:()=>_a,ae:()=>it,af:()=>Vn,ag:()=>ya,ah:()=>Tu,ak:()=>bu,al:()=>_t,am:()=>lA,ap:()=>PI,aq:()=>Nr,as:()=>gA,at:()=>um,au:()=>Zt,av:()=>To,aw:()=>Ze,ax:()=>mt,ay:()=>ll,az:()=>Om,b:()=>OI,c:()=>bm,d:()=>Je,e:()=>Dm,f:()=>St,g:()=>us,h:()=>hr,i:()=>FI,j:()=>YI,k:()=>jm,l:()=>os,m:()=>bA,p:()=>en,r:()=>Cm,s:()=>$h,u:()=>Gr});var S=We(861),Te=We(534),P=We(58),Ue=We(879),xt=We(582),gn=We(537);const en={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ie={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Nt=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Gn=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},It=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new Ue.Yd("@firebase/auth");function mn(p,...c){tt.logLevel<=Ue.in.ERROR&&tt.error(`Auth (${Te.SDK_VERSION}): ${p}`,...c)}function mt(p,...c){throw bn(p,...c)}function Ut(p,...c){return bn(p,...c)}function $r(p,c,d){const g=Object.assign(Object.assign({},Gn()),{[c]:d});return new P.LL("auth","Firebase",g).create(c,{appName:p.name})}function Ft(p){return $r(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function at(p,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&mt(p,"argument-error"),$r(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bn(p,...c){if("string"!=typeof p){const d=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return It.create(p,...c)}function fe(p,c,...d){if(!p)throw bn(c,...d)}function sn(p){const c="INTERNAL ASSERTION FAILED: "+p;throw mn(c),new Error(c)}function Zt(p,c){p||sn(c)}function _n(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ai(){return"http:"===ui()||"https:"===ui()}function ui(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ai{constructor(c,d){this.shortDelay=c,this.longDelay=d,Zt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function ct(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ai()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function X(p,c){Zt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class te{static initialize(c,d,g){this.fetchImpl=c,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oe=new Ai(3e4,6e4);function de(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function ne(p,c,d,g){return Re.apply(this,arguments)}function Re(){return(Re=(0,S.Z)(function*(p,c,d,g,v={}){return Et(p,v,(0,S.Z)(function*(){let T={},U={};g&&("GET"===c?U=g:T={body:JSON.stringify(g)});const Y=(0,P.xO)(Object.assign({key:p.config.apiKey},U)).slice(1),pe=yield p._getAdditionalHeaders();return pe["Content-Type"]="application/json",p.languageCode&&(pe["X-Firebase-Locale"]=p.languageCode),te.fetch()(on(p,p.config.apiHost,d,Y),Object.assign({method:c,headers:pe,referrerPolicy:"no-referrer"},T))}))})).apply(this,arguments)}function Et(p,c,d){return xe.apply(this,arguments)}function xe(){return(xe=(0,S.Z)(function*(p,c,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},se),c);try{const v=new Ot(p),T=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const U=yield T.json();if("needConfirmation"in U)throw Kt(p,"account-exists-with-different-credential",U);if(T.ok&&!("errorMessage"in U))return U;{const Y=T.ok?U.errorMessage:U.error.message,[pe,Ne]=Y.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pe)throw Kt(p,"credential-already-in-use",U);if("EMAIL_EXISTS"===pe)throw Kt(p,"email-already-in-use",U);if("USER_DISABLED"===pe)throw Kt(p,"user-disabled",U);const ze=g[pe]||pe.toLowerCase().replace(/[_\s]+/g,"-");if(Ne)throw $r(p,ze,Ne);mt(p,ze)}}catch(v){if(v instanceof P.ZR)throw v;mt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Ve(p,c,d,g){return bt.apply(this,arguments)}function bt(){return(bt=(0,S.Z)(function*(p,c,d,g,v={}){const T=yield ne(p,c,d,g,v);return"mfaPendingCredential"in T&&mt(p,"multi-factor-auth-required",{_serverResponse:T}),T})).apply(this,arguments)}function on(p,c,d,g){const v=`${c}${d}?${g}`;return p.config.emulator?X(p.config,v):`${p.config.apiScheme}://${v}`}function ci(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ot{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Ut(this.auth,"network-request-failed")),oe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kt(p,c,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Ut(p,c,g);return v.customData._tokenResponse=d,v}function Dn(p){return void 0!==p&&void 0!==p.getResponse}function Wn(p){return void 0!==p&&void 0!==p.enterprise}class lr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return ci(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Hi(){return(Hi=(0,S.Z)(function*(p){return(yield ne(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kt(p,c){return Si.apply(this,arguments)}function Si(){return(Si=(0,S.Z)(function*(p,c){return ne(p,"GET","/v2/recaptchaConfig",de(p,c))})).apply(this,arguments)}function ws(){return(ws=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function zi(){return(zi=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Sr(p,c){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function yn(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function wr(){return(wr=(0,S.Z)(function*(p,c=!1){const d=(0,P.m9)(p),g=yield d.getIdToken(c),v=$s(g);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const T="object"==typeof v.firebase?v.firebase:void 0,U=T?.sign_in_provider;return{claims:v,token:g,authTime:yn(On(v.auth_time)),issuedAtTime:yn(On(v.iat)),expirationTime:yn(On(v.exp)),signInProvider:U||null,signInSecondFactor:T?.sign_in_second_factor||null}})).apply(this,arguments)}function On(p){return 1e3*Number(p)}function $s(p){const[c,d,g]=p.split(".");if(void 0===c||void 0===d||void 0===g)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,P.tV)(d);return v?JSON.parse(v):(mn("Failed to decode base64 JWT payload"),null)}catch(v){return mn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Cs(p){const c=$s(p);return fe(c,"internal-error"),fe(typeof c.exp<"u","internal-error"),fe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Qt(p,c){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,S.Z)(function*(p,c,d=!1){if(d)return c;try{return yield c}catch(g){throw g instanceof P.ZR&&function Ts({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class kn{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,S.Z)(function*(){yield d.iteration()}),g)}iteration(){var c=this;return(0,S.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class rr{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=yn(this.lastLoginAt),this.creationTime=yn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vn(p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,S.Z)(function*(p){var c;const d=p.auth,g=yield p.getIdToken(),v=yield Qt(p,Sr(d,{idToken:g}));fe(v?.users.length,d,"internal-error");const T=v.users[0];p._notifyReloadListener(T);const U=null!==(c=T.providerUserInfo)&&void 0!==c&&c.length?qs(T.providerUserInfo):[],Y=function zs(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,U),ze=!!p.isAnonymous&&!(p.email&&T.passwordHash||Y?.length),yt={uid:T.localId,displayName:T.displayName||null,photoURL:T.photoUrl||null,email:T.email||null,emailVerified:T.emailVerified||!1,phoneNumber:T.phoneNumber||null,tenantId:T.tenantId||null,providerData:Y,metadata:new rr(T.createdAt,T.lastLoginAt),isAnonymous:ze};Object.assign(p,yt)})).apply(this,arguments)}function Hs(){return(Hs=(0,S.Z)(function*(p){const c=(0,P.m9)(p);yield vn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function qs(p){return p.map(c=>{var{providerId:d}=c,g=(0,xt._T)(c,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function F(){return(F=(0,S.Z)(function*(p,c){const d=yield Et(p,{},(0,S.Z)(function*(){const g=(0,P.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:T}=p.config,U=on(p,v,"/v1/token",`key=${T}`),Y=yield p._getAdditionalHeaders();return Y["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(U,{method:"POST",headers:Y,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,S.Z)(function*(p,c){return ne(p,"POST","/v2/accounts:revokeToken",de(p,c))})).apply(this,arguments)}class D{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){fe(c.idToken,"internal-error"),fe(typeof c.idToken<"u","internal-error"),fe(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Cs(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){fe(0!==c.length,"internal-error");const d=Cs(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var g=this;return(0,S.Z)(function*(){return d||!g.accessToken||g.isExpired?(fe(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var g=this;return(0,S.Z)(function*(){const{accessToken:v,refreshToken:T,expiresIn:U}=yield function Ds(p,c){return F.apply(this,arguments)}(c,d);g.updateTokensAndExpiration(v,T,Number(U))})()}updateTokensAndExpiration(c,d,g){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,d){const{refreshToken:g,accessToken:v,expirationTime:T}=d,U=new D;return g&&(fe("string"==typeof g,"internal-error",{appName:c}),U.refreshToken=g),v&&(fe("string"==typeof v,"internal-error",{appName:c}),U.accessToken=v),T&&(fe("number"==typeof T,"internal-error",{appName:c}),U.expirationTime=T),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new D,this.toJSON())}_performRefresh(){return sn("not implemented")}}function w(p,c){fe("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class O{constructor(c){var{uid:d,auth:g,stsTokenManager:v}=c,T=(0,xt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=T.displayName||null,this.email=T.email||null,this.emailVerified=T.emailVerified||!1,this.phoneNumber=T.phoneNumber||null,this.photoURL=T.photoURL||null,this.isAnonymous=T.isAnonymous||!1,this.tenantId=T.tenantId||null,this.providerData=T.providerData?[...T.providerData]:[],this.metadata=new rr(T.createdAt||void 0,T.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,S.Z)(function*(){const g=yield Qt(d,d.stsTokenManager.getToken(d.auth,c));return fe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(c){return function tn(p){return wr.apply(this,arguments)}(this,c)}reload(){return function bs(p){return Hs.apply(this,arguments)}(this)}_assign(c){this!==c&&(fe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new O(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var g=this;return(0,S.Z)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),d&&(yield vn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,S.Z)(function*(){if((0,Te._isFirebaseServerApp)(c.auth.app))return Promise.reject(Ft(c.auth));const d=yield c.getIdToken();return yield Qt(c,function js(p,c){return ws.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var g,v,T,U,Y,pe,Ne,ze;const yt=null!==(g=d.displayName)&&void 0!==g?g:void 0,pr=null!==(v=d.email)&&void 0!==v?v:void 0,Wr=null!==(T=d.phoneNumber)&&void 0!==T?T:void 0,pl=null!==(U=d.photoURL)&&void 0!==U?U:void 0,hf=null!==(Y=d.tenantId)&&void 0!==Y?Y:void 0,gl=null!==(pe=d._redirectEventId)&&void 0!==pe?pe:void 0,Sa=null!==(Ne=d.createdAt)&&void 0!==Ne?Ne:void 0,Hm=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:gr,emailVerified:zm,isAnonymous:ar,providerData:ku,stsTokenManager:qm}=d;fe(gr&&qm,c,"internal-error");const Gm=D.fromJSON(this.name,qm);fe("string"==typeof gr,c,"internal-error"),w(yt,c.name),w(pr,c.name),fe("boolean"==typeof zm,c,"internal-error"),fe("boolean"==typeof ar,c,"internal-error"),w(Wr,c.name),w(pl,c.name),w(hf,c.name),w(gl,c.name),w(Sa,c.name),w(Hm,c.name);const Ra=new O({uid:gr,auth:c,email:pr,emailVerified:zm,displayName:yt,isAnonymous:ar,photoURL:pl,phoneNumber:Wr,tenantId:hf,stsTokenManager:Gm,createdAt:Sa,lastLoginAt:Hm});return ku&&Array.isArray(ku)&&(Ra.providerData=ku.map(Pa=>Object.assign({},Pa))),gl&&(Ra._redirectEventId=gl),Ra}static _fromIdTokenResponse(c,d,g=!1){return(0,S.Z)(function*(){const v=new D;v.updateFromServerResponse(d);const T=new O({uid:d.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield vn(T),T})()}static _fromGetAccountInfoResponse(c,d,g){return(0,S.Z)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const T=void 0!==v.providerUserInfo?qs(v.providerUserInfo):[],U=!(v.email&&v.passwordHash||T?.length),Y=new D;Y.updateFromIdToken(g);const pe=new O({uid:v.localId,auth:c,stsTokenManager:Y,isAnonymous:U}),Ne={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:T,metadata:new rr(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||T?.length)};return Object.assign(pe,Ne),pe})()}}const le=new Map;function Ae(p){Zt(p instanceof Function,"Expected a class definition");let c=le.get(p);return c?(Zt(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,le.set(p,c),c)}const Xe=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,S.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,S.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,S.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Dt(p,c,d){return`firebase:${p}:${c}:${d}`}class Se{constructor(c,d,g){this.persistence=c,this.auth=d,this.userKey=g;const{config:v,name:T}=this.auth;this.fullUserKey=Dt(this.userKey,v.apiKey,T),this.fullPersistenceKey=Dt("persistence",v.apiKey,T),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,S.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?O._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,S.Z)(function*(){if(d.persistence===c)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,g="authUser"){return(0,S.Z)(function*(){if(!d.length)return new Se(Ae(Xe),c,g);const v=(yield Promise.all(d.map(function(){var Ne=(0,S.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Ne.apply(this,arguments)}}()))).filter(Ne=>Ne);let T=v[0]||Ae(Xe);const U=Dt(g,c.config.apiKey,c.name);let Y=null;for(const Ne of d)try{const ze=yield Ne._get(U);if(ze){const yt=O._fromJSON(c,ze);Ne!==T&&(Y=yt),T=Ne;break}}catch{}const pe=v.filter(Ne=>Ne._shouldAllowMigration);return T._shouldAllowMigration&&pe.length?(T=pe[0],Y&&(yield T._set(U,Y.toJSON())),yield Promise.all(d.map(function(){var Ne=(0,S.Z)(function*(ze){if(ze!==T)try{yield ze._remove(U)}catch{}});return function(ze){return Ne.apply(this,arguments)}}())),new Se(T,c,g)):new Se(T,c,g)})()}}function Bt(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($t(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(je(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(da(c))return"Blackberry";if(ha(c))return"Webos";if(ir(c))return"Safari";if((c.includes("chrome/")||Co(c))&&!c.includes("edge/"))return"Chrome";if(Ze(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function je(p=(0,P.z$)()){return/firefox\//i.test(p)}function ir(p=(0,P.z$)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Co(p=(0,P.z$)()){return/crios\//i.test(p)}function $t(p=(0,P.z$)()){return/iemobile/i.test(p)}function Ze(p=(0,P.z$)()){return/android/i.test(p)}function da(p=(0,P.z$)()){return/blackberry/i.test(p)}function ha(p=(0,P.z$)()){return/webos/i.test(p)}function To(p=(0,P.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Dc(p=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function W(p=(0,P.z$)()){return To(p)||Ze(p)||ha(p)||da(p)||/windows phone/i.test(p)||$t(p)}function nt(p,c=[]){let d;switch(p){case"Browser":d=Bt((0,P.z$)());break;case"Worker":d=`${Bt((0,P.z$)())}-${p}`;break;default:d=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${Te.SDK_VERSION}/${g}`}class ut{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const g=T=>new Promise((U,Y)=>{try{U(c(T))}catch(pe){Y(pe)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,S.Z)(function*(){if(d.auth.currentUser===c)return;const g=[];try{for(const v of d.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const T of g)try{T()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function qt(){return(qt=(0,S.Z)(function*(p,c={}){return ne(p,"GET","/v2/passwordPolicy",de(p,c))})).apply(this,arguments)}class Pi{constructor(c){var d,g,v,T;const U=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=U.minPasswordLength)&&void 0!==d?d:6,U.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=U.maxPasswordLength),void 0!==U.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=U.containsLowercaseCharacter),void 0!==U.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=U.containsUppercaseCharacter),void 0!==U.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=U.containsNumericCharacter),void 0!==U.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=U.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(T=c.forceUpgradeOnSignin)&&void 0!==T&&T,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,g,v,T,U,Y;const pe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,pe),this.validatePasswordCharacterOptions(c,pe),pe.isValid&&(pe.isValid=null===(d=pe.meetsMinPasswordLength)||void 0===d||d),pe.isValid&&(pe.isValid=null===(g=pe.meetsMaxPasswordLength)||void 0===g||g),pe.isValid&&(pe.isValid=null===(v=pe.containsLowercaseLetter)||void 0===v||v),pe.isValid&&(pe.isValid=null===(T=pe.containsUppercaseLetter)||void 0===T||T),pe.isValid&&(pe.isValid=null===(U=pe.containsNumericCharacter)||void 0===U||U),pe.isValid&&(pe.isValid=null===(Y=pe.containsNonAlphanumericCharacter)||void 0===Y||Y),pe}validatePasswordLengthOptions(c,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=c.length>=g),v&&(d.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,d,g,v,T){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=T))}}class bo{constructor(c,d,g,v){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gs(this),this.idTokenSubscription=new Gs(this),this.beforeStateQueue=new ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=It,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,d){var g=this;return d&&(this._popupRedirectResolver=Ae(d)),this._initializationPromise=this.queue((0,S.Z)(function*(){var v,T;if(!g._deleted&&(g.persistenceManager=yield Se.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(T=g.currentUser)||void 0===T?void 0:T.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,S.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,S.Z)(function*(){try{const g=yield Sr(d,{idToken:c}),v=yield O._fromGetAccountInfoResponse(d,g,c);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,S.Z)(function*(){var g;if((0,Te._isFirebaseServerApp)(d.app)){const Y=d.app.settings.authIdToken;return Y?new Promise(pe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(Y).then(pe,pe))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let T=v,U=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const Y=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,pe=T?._redirectEventId,Ne=yield d.tryRedirectSignIn(c);(!Y||Y===pe)&&Ne?.user&&(T=Ne.user,U=!0)}if(!T)return d.directlySetCurrentUser(null);if(!T._redirectEventId){if(U)try{yield d.beforeStateQueue.runMiddleware(T)}catch(Y){T=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(Y))}return T?d.reloadAndSetCurrentUserOrClear(T):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===T._redirectEventId?d.directlySetCurrentUser(T):d.reloadAndSetCurrentUserOrClear(T)})()}tryRedirectSignIn(c){var d=this;return(0,S.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,S.Z)(function*(){try{yield vn(c)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Is(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,S.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,S.Z)(function*(){if((0,Te._isFirebaseServerApp)(d.app))return Promise.reject(Ft(d));const g=c?(0,P.m9)(c):null;return g&&fe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(c,d=!1){var g=this;return(0,S.Z)(function*(){if(!g._deleted)return c&&fe(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,S.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,S.Z)(function*(){return(0,Te._isFirebaseServerApp)(c.app)?Promise.reject(Ft(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,Te._isFirebaseServerApp)(this.app)?Promise.reject(Ft(this)):this.queue((0,S.Z)(function*(){yield d.assertedPersistence.setPersistence(Ae(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,S.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,S.Z)(function*(){const d=yield function pt(p){return qt.apply(this,arguments)}(c),g=new Pi(d);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new P.LL("auth","Firebase",c())}onAuthStateChanged(c,d,g){return this.registerStateListener(this.authStateSubscription,c,d,g)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,g){return this.registerStateListener(this.idTokenSubscription,c,d,g)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,S.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function N(p,c){return C.apply(this,arguments)}(d,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var g=this;return(0,S.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,S.Z)(function*(){if(!d.redirectPersistenceManager){const g=c&&Ae(c)||d._popupRedirectResolver;fe(g,d,"argument-error"),d.redirectPersistenceManager=yield Se.create(d,[Ae(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,S.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,S.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===c?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,S.Z)(function*(){if(c===d.currentUser)return d.queue((0,S.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,g,v){if(this._deleted)return()=>{};const T="function"==typeof d?d:d.next.bind(d);let U=!1;const Y=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(Y,this,"internal-error"),Y.then(()=>{U||T(this.currentUser)}),"function"==typeof d){const pe=c.addObserver(d,g,v);return()=>{U=!0,pe()}}{const pe=c.addObserver(d);return()=>{U=!0,pe()}}}directlySetCurrentUser(c){var d=this;return(0,S.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=nt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,S.Z)(function*(){var d;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const T=yield c._getAppCheckToken();return T&&(g["X-Firebase-AppCheck"]=T),g})()}_getAppCheckToken(){var c=this;return(0,S.Z)(function*(){var d;const g=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function nr(p,...c){tt.logLevel<=Ue.in.WARN&&tt.warn(`Auth (${Te.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function cn(p){return(0,P.m9)(p)}class Gs{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,P.ne)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ac={loadJS:()=>(0,S.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bg(p){return Ac.loadJS(p)}function jg(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Qe{constructor(c){this.type="recaptcha-enterprise",this.auth=cn(c)}verify(c="verify",d=!1){var g=this;return(0,S.Z)(function*(){function T(){return T=(0,S.Z)(function*(Y){if(!d){if(null==Y.tenantId&&null!=Y._agentRecaptchaConfig)return Y._agentRecaptchaConfig.siteKey;if(null!=Y.tenantId&&void 0!==Y._tenantRecaptchaConfigs[Y.tenantId])return Y._tenantRecaptchaConfigs[Y.tenantId].siteKey}return new Promise(function(){var pe=(0,S.Z)(function*(Ne,ze){kt(Y,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(yt=>{if(void 0!==yt.recaptchaKey){const pr=new lr(yt);return null==Y.tenantId?Y._agentRecaptchaConfig=pr:Y._tenantRecaptchaConfigs[Y.tenantId]=pr,Ne(pr.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(yt=>{ze(yt)})});return function(Ne,ze){return pe.apply(this,arguments)}}())}),T.apply(this,arguments)}function U(Y,pe,Ne){const ze=window.grecaptcha;Wn(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(Y,{action:c}).then(yt=>{pe(yt)}).catch(()=>{pe("NO_RECAPTCHA")})}):Ne(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Y,pe)=>{(function v(Y){return T.apply(this,arguments)})(g.auth).then(Ne=>{if(!d&&Wn(window.grecaptcha))U(Ne,Y,pe);else{if(typeof window>"u")return void pe(new Error("RecaptchaVerifier is only supported in browser"));let ze=function TI(){return Ac.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Ne),Bg(ze).then(()=>{U(Ne,Y,pe)}).catch(yt=>{pe(yt)})}}).catch(Ne=>{pe(Ne)})})})()}}function bI(p,c,d){return $g.apply(this,arguments)}function $g(){return($g=(0,S.Z)(function*(p,c,d,g=!1){const v=new Qe(p);let T;try{T=yield v.verify(d)}catch{T=yield v.verify(d,!0)}const U=Object.assign({},c);return Object.assign(U,g?{captchaResp:T}:{captchaResponse:T}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}function Sc(p,c,d,g){return $e.apply(this,arguments)}function $e(){return $e=(0,S.Z)(function*(p,c,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const T=yield bI(p,c,d,"getOobCode"===d);return g(p,T)}return g(p,c).catch(function(){var T=(0,S.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Y=yield bI(p,c,d,"getOobCode"===d);return g(p,Y)}return Promise.reject(U)});return function(U){return T.apply(this,arguments)}}())}),$e.apply(this,arguments)}function uh(p,c,d){const g=cn(p);fe(g._canInitEmulator,g,"emulator-config-failed"),fe(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,T=Hg(c),{host:U,port:Y}=function Pc(p){const c=Hg(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const T=v[1];return{host:T,port:gu(g.substr(T.length+1))}}{const[T,U]=g.split(":");return{host:T,port:gu(U)}}}(c);g.config.emulator={url:`${T}//${U}${null===Y?"":`:${Y}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:U,port:Y,protocol:T.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function ch(){function p(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Hg(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function gu(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class Do{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return sn("not implemented")}_getIdTokenResponse(c){return sn("not implemented")}_linkToIdToken(c,d){return sn("not implemented")}_getReauthenticationResolver(c){return sn("not implemented")}}function zg(p,c){return gt.apply(this,arguments)}function gt(){return(gt=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:resetPassword",de(p,c))})).apply(this,arguments)}function Mc(){return(Mc=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Hr(p,c){return xc.apply(this,arguments)}function xc(){return(xc=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Gt(){return(Gt=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:update",de(p,c))})).apply(this,arguments)}function aA(p,c){return qg.apply(this,arguments)}function qg(){return(qg=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithPassword",de(p,c))})).apply(this,arguments)}function Ce(p,c){return mu.apply(this,arguments)}function mu(){return(mu=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:sendOobCode",de(p,c))})).apply(this,arguments)}function Nc(){return(Nc=(0,S.Z)(function*(p,c){return Ce(p,c)})).apply(this,arguments)}function hh(p,c){return fh.apply(this,arguments)}function fh(){return(fh=(0,S.Z)(function*(p,c){return Ce(p,c)})).apply(this,arguments)}function ph(p,c){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,S.Z)(function*(p,c){return Ce(p,c)})).apply(this,arguments)}function Wg(){return(Wg=(0,S.Z)(function*(p,c){return Ce(p,c)})).apply(this,arguments)}function Zg(){return(Zg=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithEmailLink",de(p,c))})).apply(this,arguments)}function yu(){return(yu=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithEmailLink",de(p,c))})).apply(this,arguments)}class Ws extends Do{constructor(c,d,g,v=null){super("password",g),this._email=c,this._password=d,this._tenantId=v}static _fromEmailAndPassword(c,d){return new Ws(c,d,"password")}static _fromEmailAndCode(c,d,g=null){return new Ws(c,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,S.Z)(function*(){switch(d.signInMethod){case"password":return Sc(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",aA);case"emailLink":return function cA(p,c){return Zg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:mt(c,"internal-error")}})()}_linkToIdToken(c,d){var g=this;return(0,S.Z)(function*(){switch(g.signInMethod){case"password":return Sc(c,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hr);case"emailLink":return function _u(p,c){return yu.apply(this,arguments)}(c,{idToken:d,email:g._email,oobCode:g._password});default:mt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function As(p,c){return gh.apply(this,arguments)}function gh(){return(gh=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithIdp",de(p,c))})).apply(this,arguments)}class qi extends Do{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new qi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):mt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=d,T=(0,xt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const U=new qi(g,v);return U.idToken=T.idToken||void 0,U.accessToken=T.accessToken||void 0,U.secret=T.secret,U.nonce=T.nonce,U.pendingToken=T.pendingToken||null,U}_getIdTokenResponse(c){return As(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,As(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,As(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,P.xO)(d)}return c}}function mh(){return(mh=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:sendVerificationCode",de(p,c))})).apply(this,arguments)}function _h(){return(_h=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,c))})).apply(this,arguments)}function Oc(){return(Oc=(0,S.Z)(function*(p,c){const d=yield Ve(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,c));if(d.temporaryProof)throw Kt(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Fe={USER_NOT_FOUND:"user-not-found"};function vu(){return(vu=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Fe)})).apply(this,arguments)}class Gi extends Do{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Gi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Gi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Zs(p,c){return _h.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function Ee(p,c){return Oc.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function kc(p,c){return vu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:T}=c;return g||d||v||T?new Gi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:T}):null}}class Iu{constructor(c){var d,g,v,T,U,Y;const pe=(0,P.zd)((0,P.pd)(c)),Ne=null!==(d=pe.apiKey)&&void 0!==d?d:null,ze=null!==(g=pe.oobCode)&&void 0!==g?g:null,yt=function SI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=pe.mode)&&void 0!==v?v:null);fe(Ne&&ze&&yt,"argument-error"),this.apiKey=Ne,this.operation=yt,this.code=ze,this.continueUrl=null!==(T=pe.continueUrl)&&void 0!==T?T:null,this.languageCode=null!==(U=pe.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Y=pe.tenantId)&&void 0!==Y?Y:null}static parseLink(c){const d=function RI(p){const c=(0,P.zd)((0,P.pd)(p)).link,d=c?(0,P.zd)((0,P.pd)(c)).deep_link_id:null,g=(0,P.zd)((0,P.pd)(p)).deep_link_id;return(g?(0,P.zd)((0,P.pd)(g)).link:null)||g||d||c||p}(c);try{return new Iu(d)}catch{return null}}}let pa=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Ws._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Iu.parseLink(g);return fe(v,"argument-error"),Ws._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Zn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Mr extends Zn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ct extends Mr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),qi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return fe(c.idToken||c.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ct.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ct.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:T,nonce:U,providerId:Y}=c;if(!g&&!v&&!d&&!T||!Y)return null;try{return new Ct(Y)._credential({idToken:d,accessToken:g,nonce:U,pendingToken:T})}catch{return null}}}let Fc=(()=>{class p extends Mr{constructor(){super("facebook.com")}static credential(d){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),yh=(()=>{class p extends Mr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),vh=(()=>{class p extends Mr{constructor(){super("github.com")}static credential(d){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class zr extends Do{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return As(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,As(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,As(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:T}=d;return g&&v&&T&&g===v?new zr(g,T):null}static _create(c,d){return new zr(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wu extends Zn{constructor(c){fe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return wu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return wu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=zr.fromJSON(c);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:g}=c;if(!d||!g)return null;try{return zr._create(g,d)}catch{return null}}}let Qg=(()=>{class p extends Mr{constructor(){super("twitter.com")}static credential(d,g){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Vc(p,c){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signUp",de(p,c))})).apply(this,arguments)}class di{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,g,v=!1){return(0,S.Z)(function*(){const T=yield O._fromIdTokenResponse(c,g,v),U=ga(g);return new di({user:T,providerId:U,_tokenResponse:g,operationType:d})})()}static _forOperation(c,d,g){return(0,S.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=ga(g);return new di({user:c,providerId:v,_tokenResponse:g,operationType:d})})()}}function ga(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Yg(p){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,S.Z)(function*(p){var c;if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=cn(p);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new di({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Vc(d,{returnSecureToken:!0}),v=yield di._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Bc extends P.ZR{constructor(c,d,g,v){var T;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:c.name,tenantId:null!==(T=c.tenantId)&&void 0!==T?T:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,d,g,v){return new Bc(c,d,g,v)}}function Ih(p,c,d,g){return("reauthenticate"===c?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(T=>{throw"auth/multi-factor-auth-required"===T.code?Bc._fromErrorAndOperation(p,T,c,g):T})}function Jg(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function PI(p,c){return hi.apply(this,arguments)}function hi(){return hi=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);yield $c(!0,d,c);const{providerUserInfo:g}=yield function li(p,c){return zi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),v=Jg(g||[]);return d.providerData=d.providerData.filter(T=>v.has(T.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),hi.apply(this,arguments)}function Eh(p,c){return jc.apply(this,arguments)}function jc(){return(jc=(0,S.Z)(function*(p,c,d=!1){const g=yield Qt(p,c._linkToIdToken(p.auth,yield p.getIdToken()),d);return di._forOperation(p,"link",g)})).apply(this,arguments)}function $c(p,c,d){return wh.apply(this,arguments)}function wh(){return(wh=(0,S.Z)(function*(p,c,d){yield vn(c);const v=!1===p?"provider-already-linked":"no-such-provider";fe(Jg(c.providerData).has(d)===p,c.auth,v)})).apply(this,arguments)}function Xg(p,c){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,S.Z)(function*(p,c,d=!1){const{auth:g}=p;if((0,Te._isFirebaseServerApp)(g.app))return Promise.reject(Ft(g));const v="reauthenticate";try{const T=yield Qt(p,Ih(g,v,c,p),d);fe(T.idToken,g,"internal-error");const U=$s(T.idToken);fe(U,g,"internal-error");const{sub:Y}=U;return fe(p.uid===Y,g,"user-mismatch"),di._forOperation(p,v,T)}catch(T){throw"auth/user-not-found"===T?.code&&mt(g,"user-mismatch"),T}})).apply(this,arguments)}function Th(p,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,S.Z)(function*(p,c,d=!1){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g="signIn",v=yield Ih(p,g,c),T=yield di._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(T.user)),T})).apply(this,arguments)}function Hc(p,c){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,S.Z)(function*(p,c){return Th(cn(p),c)})).apply(this,arguments)}function xi(p,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);return yield $c(!1,d,c.providerId),Eh(d,c)})).apply(this,arguments)}function em(p,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,S.Z)(function*(p,c){return Xg((0,P.m9)(p),c)})).apply(this,arguments)}function Rh(){return(Rh=(0,S.Z)(function*(p,c){return Ve(p,"POST","/v1/accounts:signInWithCustomToken",de(p,c))})).apply(this,arguments)}function tm(p,c){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,S.Z)(function*(p,c){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=cn(p),g=yield function Kn(p,c){return Rh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),v=yield di._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Ye.apply(this,arguments)}class Qn{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Tt._fromServerResponse(c,d):"totpInfo"in d?Yn._fromServerResponse(c,d):mt(c,"internal-error")}}class Tt extends Qn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Tt(d)}}class Yn extends Qn{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Yn(d)}}function sr(p,c,d){var g;fe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function Qs(p){return xr.apply(this,arguments)}function xr(){return(xr=(0,S.Z)(function*(p){const c=cn(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function nm(p,c,d){return zc.apply(this,arguments)}function zc(){return(zc=(0,S.Z)(function*(p,c,d){const g=cn(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&sr(g,v,d),yield Sc(g,v,"getOobCode",hh)})).apply(this,arguments)}function qc(p,c,d){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,S.Z)(function*(p,c,d){yield zg((0,P.m9)(p),{oobCode:c,newPassword:d}).catch(function(){var g=(0,S.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Qs(p),v});return function(v){return g.apply(this,arguments)}}())}),Ph.apply(this,arguments)}function MI(p,c){return ln.apply(this,arguments)}function ln(){return ln=(0,S.Z)(function*(p,c){yield function oA(p,c){return Gt.apply(this,arguments)}((0,P.m9)(p),{oobCode:c})}),ln.apply(this,arguments)}function Me(p,c){return rt.apply(this,arguments)}function rt(){return(rt=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p),g=yield zg(d,{oobCode:c}),v=g.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(g.mfaInfo,d,"internal-error");default:fe(g.email,d,"internal-error")}let T=null;return g.mfaInfo&&(T=Qn._fromServerResponse(cn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:T},operation:v}})).apply(this,arguments)}function dn(p,c){return fi.apply(this,arguments)}function fi(){return(fi=(0,S.Z)(function*(p,c){const{data:d}=yield Me((0,P.m9)(p),c);return d.email})).apply(this,arguments)}function Cu(p,c,d){return or.apply(this,arguments)}function or(){return(or=(0,S.Z)(function*(p,c,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),U=yield Sc(g,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vc).catch(pe=>{throw"auth/password-does-not-meet-requirements"===pe.code&&Qs(p),pe}),Y=yield di._fromIdTokenResponse(g,"signIn",U);return yield g._updateCurrentUser(Y.user),Y})).apply(this,arguments)}function ma(p,c,d){return(0,Te._isFirebaseServerApp)(p.app)?Promise.reject(Ft(p)):Hc((0,P.m9)(p),pa.credential(c,d)).catch(function(){var g=(0,S.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Qs(p),v});return function(v){return g.apply(this,arguments)}}())}function Fn(p,c,d){return is.apply(this,arguments)}function is(){return(is=(0,S.Z)(function*(p,c,d){const g=cn(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function T(U,Y){fe(Y.handleCodeInApp,g,"argument-error"),Y&&sr(g,U,Y)})(v,d),yield Sc(g,v,"getOobCode",ph)})).apply(this,arguments)}function _a(p,c){const d=Iu.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function it(p,c,d){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,S.Z)(function*(p,c,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=(0,P.m9)(p),v=pa.credentialWithLink(c,d||_n());return fe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Hc(g,v)})).apply(this,arguments)}function Ys(){return(Ys=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:createAuthUri",de(p,c))})).apply(this,arguments)}function Vn(p,c){return So.apply(this,arguments)}function So(){return So=(0,S.Z)(function*(p,c){const g={identifier:c,continueUri:ai()?_n():"http://localhost"},{signinMethods:v}=yield function rm(p,c){return Ys.apply(this,arguments)}((0,P.m9)(p),g);return v||[]}),So.apply(this,arguments)}function ya(p,c){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&sr(d.auth,v,c);const{email:T}=yield function dh(p,c){return Nc.apply(this,arguments)}(d.auth,v);T!==p.email&&(yield p.reload())}),Ni.apply(this,arguments)}function Tu(p,c,d){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p),T={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};d&&sr(g.auth,T,d);const{email:U}=yield function uA(p,c){return Wg.apply(this,arguments)}(g.auth,T);U!==p.email&&(yield p.reload())}),Gc.apply(this,arguments)}function Wi(){return(Wi=(0,S.Z)(function*(p,c){return ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function bu(p,c){return Ro.apply(this,arguments)}function Ro(){return Ro=(0,S.Z)(function*(p,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const g=(0,P.m9)(p),T={idToken:yield g.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},U=yield Qt(g,function Js(p,c){return Wi.apply(this,arguments)}(g.auth,T));g.displayName=U.displayName||null,g.photoURL=U.photoUrl||null;const Y=g.providerData.find(({providerId:pe})=>"password"===pe);Y&&(Y.displayName=g.displayName,Y.photoURL=g.photoURL),yield g._updateTokensIfNecessary(U)}),Ro.apply(this,arguments)}function _t(p,c){const d=(0,P.m9)(p);return(0,Te._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ft(d.auth)):Wc(d,c,null)}function lA(p,c){return Wc((0,P.m9)(p),null,c)}function Wc(p,c,d){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,S.Z)(function*(p,c,d){const{auth:g}=p,T={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(T.email=c),d&&(T.password=d);const U=yield Qt(p,function lh(p,c){return Mc.apply(this,arguments)}(g,T));yield p._updateTokensIfNecessary(U,!0)}),Zc.apply(this,arguments)}class Ss{constructor(c,d,g={}){this.isNewUser=c,this.providerId=d,this.profile=g}}class Po extends Ss{constructor(c,d,g,v){super(c,d,g),this.username=v}}class Du extends Ss{constructor(c,d){super(c,"facebook.com",d)}}class dr extends Po{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class dA extends Ss{constructor(c,d){super(c,"google.com",d)}}class qr extends Po{constructor(c,d,g){super(c,"twitter.com",d,g)}}function Nr(p){const{user:c,_tokenResponse:d}=p;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function ss(p){var c,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},T=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const U=null===(d=null===(c=$s(p.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(U)return new Ss(T,"anonymous"!==U&&"custom"!==U?U:null)}if(!g)return null;switch(g){case"facebook.com":return new Du(T,v);case"github.com":return new dr(T,v);case"google.com":return new dA(T,v);case"twitter.com":return new qr(T,v,p.screenName||null);case"custom":case"anonymous":return new Ss(T,null);default:return new Ss(T,g,v)}}(d)}class Ia{constructor(c,d,g){this.type=c,this.credential=d,this.user=g}static _fromIdtoken(c,d){return new Ia("enroll",c,d)}static _fromMfaPendingCredential(c){return new Ia("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,g;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ia._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Ia._fromIdtoken(c.multiFactorSession.idToken)}return null}}class om{constructor(c,d,g){this.session=c,this.hints=d,this.signInResolver=g}static _fromError(c,d){const g=cn(c),v=d.customData._serverResponse,T=(v.mfaInfo||[]).map(Y=>Qn._fromServerResponse(g,Y));fe(v.mfaPendingCredential,g,"internal-error");const U=Ia._fromMfaPendingCredential(v.mfaPendingCredential);return new om(U,T,function(){var Y=(0,S.Z)(function*(pe){const Ne=yield pe._process(g,U);delete v.mfaInfo,delete v.mfaPendingCredential;const ze=Object.assign(Object.assign({},v),{idToken:Ne.idToken,refreshToken:Ne.refreshToken});switch(d.operationType){case"signIn":const yt=yield di._fromIdTokenResponse(g,d.operationType,ze);return yield g._updateCurrentUser(yt.user),yt;case"reauthenticate":return fe(d.user,g,"internal-error"),di._forOperation(d.user,d.operationType,ze);default:mt(g,"internal-error")}});return function(pe){return Y.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,S.Z)(function*(){return d.signInResolver(c)})()}}function gA(p,c){var d;const g=(0,P.m9)(p),v=c;return fe(c.customData.operationType,g,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),om._fromError(g,v)}class am{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>Qn._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new am(c)}getSession(){var c=this;return(0,S.Z)(function*(){return Ia._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var g=this;return(0,S.Z)(function*(){const v=c,T=yield g.getSession(),U=yield Qt(g.user,v._process(g.user.auth,T,d));return yield g.user._updateTokensIfNecessary(U),g.user.reload()})()}unenroll(c){var d=this;return(0,S.Z)(function*(){const g="string"==typeof c?c:c.uid,v=yield d.user.getIdToken();try{const T=yield Qt(d.user,function vA(p,c){return ne(p,"POST","/v2/accounts/mfaEnrollment:withdraw",de(p,c))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:U})=>U!==g),yield d.user._updateTokensIfNecessary(T),yield d.user.reload()}catch(T){throw T}})()}}const Kc=new WeakMap;function um(p){const c=(0,P.m9)(p);return Kc.has(c)||Kc.set(c,am._fromUser(c)),Kc.get(c)}const Nh="__sak";class NI{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const OI=(()=>{class p extends NI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function IA(){const p=(0,P.z$)();return ir(p)||To(p)}()&&function ye(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=W(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),T=this.localCache[g];v!==T&&d(g,T,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((Y,pe,Ne)=>{this.notifyListeners(Y,Ne)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Y=this.storage.getItem(v);if(d.newValue!==Y)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const T=()=>{const Y=this.storage.getItem(v);!g&&this.localCache[v]===Y||this.notifyListeners(v,Y)},U=this.storage.getItem(v);!function z(){return(0,P.w1)()&&10===document.documentMode}()||U===d.newValue||d.newValue===d.oldValue?T():setTimeout(T,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const T of Array.from(v))T(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,T=this;return(0,S.Z)(function*(){yield v().call(T,d,g),T.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,S.Z)(function*(){const T=yield g().call(v,d);return v.localCache[d]=JSON.stringify(T),T})()}_remove(d){var g=()=>super._remove,v=this;return(0,S.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Ea=(()=>{class p extends NI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let cm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(T=>T.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,S.Z)(function*(){const v=d,{eventId:T,eventType:U,data:Y}=v.data,pe=g.handlersMap[U];if(!pe?.size)return;v.ports[0].postMessage({status:"ack",eventId:T,eventType:U});const Ne=Array.from(pe).map(function(){var yt=(0,S.Z)(function*(pr){return pr(v.origin,Y)});return function(pr){return yt.apply(this,arguments)}}()),ze=yield function Oi(p){return Promise.all(p.map(function(){var c=(0,S.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return c.apply(this,arguments)}}()))}(Ne);v.ports[0].postMessage({status:"done",eventId:T,eventType:U,response:ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function wa(p="",c=10){let d="";for(let g=0;g<c;g++)d+=Math.floor(10*Math.random());return p+d}class lm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,g=50){var v=this;return(0,S.Z)(function*(){const T=typeof MessageChannel<"u"?new MessageChannel:null;if(!T)throw new Error("connection_unavailable");let U,Y;return new Promise((pe,Ne)=>{const ze=wa("",20);T.port1.start();const yt=setTimeout(()=>{Ne(new Error("unsupported_event"))},g);Y={messageChannel:T,onMessage(pr){const Wr=pr;if(Wr.data.eventId===ze)switch(Wr.data.status){case"ack":clearTimeout(yt),U=setTimeout(()=>{Ne(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),pe(Wr.data.response);break;default:clearTimeout(yt),clearTimeout(U),Ne(new Error("invalid_response"))}}},v.handlers.add(Y),T.port1.addEventListener("message",Y.onMessage),v.target.postMessage({eventType:c,eventId:ze,data:d},[T.port2])}).finally(()=>{Y&&v.removeMessageHandler(Y)})})()}}function Ln(){return window}function Qc(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function Au(){return(Au=(0,S.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fh="firebaseLocalStorageDb",eo="firebaseLocalStorage",xo="fbase_key";class Ca{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Vh(p,c){return p.transaction([eo],c?"readwrite":"readonly").objectStore(eo)}function fm(){const p=indexedDB.open(Fh,1);return new Promise((c,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(eo,{keyPath:xo})}catch(v){d(v)}}),p.addEventListener("success",(0,S.Z)(function*(){const g=p.result;g.objectStoreNames.contains(eo)?c(g):(g.close(),yield function EA(){const p=indexedDB.deleteDatabase(Fh);return new Ca(p).toPromise()}(),c(yield fm()))}))})}function pm(p,c,d){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,S.Z)(function*(p,c,d){const g=Vh(p,!0).put({[xo]:c,value:d});return new Ca(g).toPromise()})).apply(this,arguments)}function Jc(){return(Jc=(0,S.Z)(function*(p,c){const d=Vh(p,!1).get(c),g=yield new Ca(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function Xc(p,c){const d=Vh(p,!0).delete(c);return new Ca(d).toPromise()}const FI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,S.Z)(function*(){return d.db||(d.db=yield fm()),d.db})()}_withRetries(d){var g=this;return(0,S.Z)(function*(){let v=0;for(;;)try{const T=yield g._openDb();return yield d(T)}catch(T){if(v++>3)throw T;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,S.Z)(function*(){return Qc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,S.Z)(function*(){d.receiver=cm._getInstance(function hm(){return Qc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,S.Z)(function*(v,T){return{keyProcessed:(yield d._poll()).includes(T.key)}});return function(v,T){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,S.Z)(function*(v,T){return["keyChanged"]});return function(v,T){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,S.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function kh(){return Au.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new lm(d.activeServiceWorker);const T=yield d.sender._send("ping",{},800);T&&null!==(g=T[0])&&void 0!==g&&g.fulfilled&&null!==(v=T[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,S.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function dm(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const d=yield fm();return yield pm(d,Nh,"1"),yield Xc(d,Nh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,S.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,S.Z)(function*(){return v._withPendingWrite((0,S.Z)(function*(){return yield v._withRetries(T=>pm(T,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,S.Z)(function*(){const v=yield g._withRetries(T=>function wA(p,c){return Jc.apply(this,arguments)}(T,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,S.Z)(function*(){return g._withPendingWrite((0,S.Z)(function*(){return yield g._withRetries(v=>Xc(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,S.Z)(function*(){const g=yield d._withRetries(U=>{const Y=Vh(U,!1).getAll();return new Ca(Y).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],T=new Set;if(0!==g.length)for(const{fbase_key:U,value:Y}of g)T.add(U),JSON.stringify(d.localCache[U])!==JSON.stringify(Y)&&(d.notifyListeners(U,Y),v.push(U));for(const U of Object.keys(d.localCache))d.localCache[U]&&!T.has(U)&&(d.notifyListeners(U,null),v.push(U));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const T of Array.from(v))T(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),el=1e12;class _m{constructor(c){this.auth=c,this.counter=el,this._widgets=new Map}render(c,d){const g=this.counter;return this._widgets.set(g,new BI(c,this.auth.name,d||{})),this.counter++,g}reset(c){var d;const g=c||el;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(c){var d;return(null===(d=this._widgets.get(c||el))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,S.Z)(function*(){var g;return null===(g=d._widgets.get(c||el))||void 0===g||g.execute(),""})()}}class BI{constructor(c,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ym(p){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bh=jg("rcb"),CA=new Ai(3e4,6e4);class jI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Ln().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return fe(function ki(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Dn(Ln().grecaptcha)?Promise.resolve(Ln().grecaptcha):new Promise((g,v)=>{const T=Ln().setTimeout(()=>{v(Ut(c,"network-request-failed"))},CA.get());Ln()[Bh]=()=>{Ln().clearTimeout(T),delete Ln()[Bh];const Y=Ln().grecaptcha;if(!Y||!Dn(Y))return void v(Ut(c,"internal-error"));const pe=Y.render;Y.render=(Ne,ze)=>{const yt=pe(Ne,ze);return this.counter++,yt},this.hostLanguage=d,g(Y)},Bg(`${function nA(){return Ac.recaptchaV2Script}()}?${(0,P.xO)({onload:Bh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(T),v(Ut(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Ln().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vm{load(c){return(0,S.Z)(function*(){return new _m(c)})()}clearedOneInstance(){}}const Im="recaptcha",$I={theme:"light",type:"image"};class Em{constructor(c,d,g=Object.assign({},$I)){this.parameters=g,this.type=Im,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(c),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vm:new jI,this.validateStartingState()}verify(){var c=this;return(0,S.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(d)||new Promise(T=>{const U=Y=>{Y&&(c.tokenChangeListeners.delete(U),T(Y))};c.tokenChangeListeners.add(U),c.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof c)c(d);else if("string"==typeof c){const g=Ln()[c];"function"==typeof g&&g(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,S.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,S.Z)(function*(){fe(ai()&&!Qc(),c.auth,"internal-error"),yield function wm(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Es(p){return Hi.apply(this,arguments)}(c.auth);fe(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Gi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function $h(p,c,d){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,S.Z)(function*(p,c,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),v=yield Ta(g,c,(0,P.m9)(d));return new jh(v,T=>Hc(g,T))})).apply(this,arguments)}function os(p,c,d){return tl.apply(this,arguments)}function tl(){return(tl=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);yield $c(!1,g,"phone");const v=yield Ta(g.auth,c,(0,P.m9)(d));return new jh(v,T=>xi(g,T))})).apply(this,arguments)}function Cm(p,c,d){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));const v=yield Ta(g.auth,c,(0,P.m9)(d));return new jh(v,T=>em(g,T))})).apply(this,arguments)}function Ta(p,c,d){return ba.apply(this,arguments)}function ba(){return ba=(0,S.Z)(function*(p,c,d){var g;const v=yield d.verify();try{let T;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===Im,p,"argument-error"),T="string"==typeof c?{phoneNumber:c}:c,"session"in T){const U=T.session;if("phoneNumber"in T)return fe("enroll"===U.type,p,"internal-error"),(yield function mA(p,c){return ne(p,"POST","/v2/accounts/mfaEnrollment:start",de(p,c))}(p,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:T.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===U.type,p,"internal-error");const Y=(null===(g=T.multiFactorHint)||void 0===g?void 0:g.uid)||T.multiFactorUid;return fe(Y,p,"missing-multi-factor-info"),(yield function VI(p,c){return ne(p,"POST","/v2/accounts/mfaSignIn:start",de(p,c))}(p,{mfaPendingCredential:U.credential,mfaEnrollmentId:Y,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function fa(p,c){return mh.apply(this,arguments)}(p,{phoneNumber:T.phoneNumber,recaptchaToken:v});return U}}finally{d._reset()}}),ba.apply(this,arguments)}function Gr(p,c){return zh.apply(this,arguments)}function zh(){return(zh=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);if((0,Te._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ft(d.auth));yield Eh(d,c)})).apply(this,arguments)}let Tm=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=cn(d)}verifyPhoneNumber(d,g){return Ta(this.auth,d,(0,P.m9)(g))}static credential(d,g){return Gi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Gi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Fi(p,c){return c?Ae(c):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Or extends Do{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return As(c,this._buildIdpRequest())}_linkToIdToken(c,d){return As(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return As(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function HI(p){return Th(p.auth,new Or(p),p.bypassAuthState)}function zI(p){const{auth:c,user:d}=p;return fe(d,c,"internal-error"),Xg(d,new Or(p),p.bypassAuthState)}function qI(p){return as.apply(this,arguments)}function as(){return(as=(0,S.Z)(function*(p){const{auth:c,user:d}=p;return fe(d,c,"internal-error"),Eh(d,new Or(p),p.bypassAuthState)})).apply(this,arguments)}class qh{constructor(c,d,g,v,T=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=T,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,S.Z)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(T){c.reject(T)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,S.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:T,tenantId:U,error:Y,type:pe}=c;if(Y)return void d.reject(Y);const Ne={auth:d.auth,requestUri:g,sessionId:v,tenantId:U||void 0,postBody:T||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(pe)(Ne))}catch(ze){d.reject(ze)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return HI;case"linkViaPopup":case"linkViaRedirect":return qI;case"reauthViaPopup":case"reauthViaRedirect":return zI;default:mt(this.auth,"internal-error")}}resolve(c){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const GI=new Ai(2e3,1e4);function bm(p,c,d){return nl.apply(this,arguments)}function nl(){return(nl=(0,S.Z)(function*(p,c,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ut(p,"operation-not-supported-in-this-environment"));const g=cn(p);at(p,c,Zn);const v=Fi(g,d);return new Am(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function Dm(p,c,d){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if((0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ut(g.auth,"operation-not-supported-in-this-environment"));at(g.auth,c,Zn);const v=Fi(g.auth,d);return new Am(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function Je(p,c,d){return rl.apply(this,arguments)}function rl(){return(rl=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);at(g.auth,c,Zn);const v=Fi(g.auth,d);return new Am(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let Am=(()=>{class p extends qh{constructor(d,g,v,T,U){super(d,g,T,U),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,S.Z)(function*(){const g=yield d.execute();return fe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,S.Z)(function*(){Zt(1===d.filter.length,"Popup operations only handle one event");const g=wa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Ut(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,GI.get())};d()}}return p.currentPopupAction=null,p})();const WI="pendingRedirect",Su=new Map;class ZI extends qh{constructor(c,d,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,S.Z)(function*(){let g=Su.get(d.auth._key());if(!g){try{const T=(yield function Sm(p,c){return to.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;g=()=>Promise.resolve(T)}catch(v){g=()=>Promise.reject(v)}Su.set(d.auth._key(),g)}return d.bypassAuthState||Su.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,g=this;return(0,S.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,d().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function to(){return(to=(0,S.Z)(function*(p,c){const d=ge(c),g=Pm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function Wh(p,c){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,S.Z)(function*(p,c){return Pm(p)._set(ge(c),"true")})).apply(this,arguments)}function KI(){Su.clear()}function Rm(p,c){Su.set(p._key(),c)}function Pm(p){return Ae(p._redirectPersistence)}function ge(p){return Dt(WI,p.config.apiKey,p.name)}function St(p,c,d){return function QI(p,c,d){return Kh.apply(this,arguments)}(p,c,d)}function Kh(){return(Kh=(0,S.Z)(function*(p,c,d){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p);at(p,c,Zn),yield g._initializationPromise;const v=Fi(g,d);return yield Wh(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function hr(p,c,d){return function Mm(p,c,d){return No.apply(this,arguments)}(p,c,d)}function No(){return(No=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if(at(g.auth,c,Zn),(0,Te._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));yield g.auth._initializationPromise;const v=Fi(g.auth,d);yield Wh(v,g.auth);const T=yield cs(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",T)})).apply(this,arguments)}function us(p,c,d){return function Qh(p,c,d){return Ru.apply(this,arguments)}(p,c,d)}function Ru(){return(Ru=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);at(g.auth,c,Zn),yield g.auth._initializationPromise;const v=Fi(g.auth,d);yield $c(!1,g,c.providerId),yield Wh(v,g.auth);const T=yield cs(g);return v._openRedirect(g.auth,c,"linkViaRedirect",T)})).apply(this,arguments)}function YI(p,c){return xm.apply(this,arguments)}function xm(){return(xm=(0,S.Z)(function*(p,c){return yield cn(p)._initializationPromise,il(p,c,!1)})).apply(this,arguments)}function il(p,c){return fr.apply(this,arguments)}function fr(){return(fr=(0,S.Z)(function*(p,c,d=!1){if((0,Te._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=cn(p),v=Fi(g,c),U=yield new ZI(g,v,d).execute();return U&&!d&&(delete U.user._redirectEventId,yield g._persistUserIfCurrent(U.user),yield g._setRedirectUser(null,c)),U})).apply(this,arguments)}function cs(p){return sl.apply(this,arguments)}function sl(){return(sl=(0,S.Z)(function*(p){const c=wa(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class ls{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(d=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function JI(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yh(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var g;if(c.error&&!Yh(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Ut(this.auth,v))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const g=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nm(c))}saveEventToCache(c){this.cachedEventUids.add(Nm(c)),this.lastProcessedEventTime=Date.now()}}function Nm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function Yh({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function Om(p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,S.Z)(function*(p,c={}){return ne(p,"GET","/v1/projects",c)})).apply(this,arguments)}const Jh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,km=/^https?/;function ef(){return(ef=(0,S.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield Om(p);for(const d of c)try{if(Fm(d))return}catch{}mt(p,"unauthorized-domain")})).apply(this,arguments)}function Fm(p){const c=_n(),{protocol:d,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const U=new URL(p);return""===U.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&U.hostname===g}if(!km.test(d))return!1;if(Jh.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const tf=new Ai(3e4,6e4);function nf(){const p=Ln().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Mu=null;const rf=new Ai(5e3,15e3),XI="__/auth/iframe",eE="emulator/auth/iframe",kr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function In(p){const c=p.config;fe(c.authDomain,p,"auth-domain-config-required");const d=c.emulator?X(c,eE):`https://${p.config.authDomain}/${XI}`,g={apiKey:c.apiKey,appName:p.name,v:Te.SDK_VERSION},v=Oo.get(p.config.apiHost);v&&(g.eid=v);const T=p._getFrameworks();return T.length&&(g.fw=T.join(",")),`${d}?${(0,P.xO)(g).slice(1)}`}function sf(){return sf=(0,S.Z)(function*(p){const c=yield function Lm(p){return Mu=Mu||function Vm(p){return new Promise((c,d)=>{var g,v,T;function U(){nf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{nf(),d(Ut(p,"network-request-failed"))},timeout:tf.get()})}if(null!==(v=null===(g=Ln().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(T=Ln().gapi)||void 0===T||!T.load){const Y=jg("iframefcb");return Ln()[Y]=()=>{gapi.load?U():d(Ut(p,"network-request-failed"))},Bg(`${function rA(){return Ac.gapiScript}()}?onload=${Y}`).catch(pe=>d(pe))}U()}}).catch(c=>{throw Mu=null,c})}(p),Mu}(p),d=Ln().gapi;return fe(d,p,"internal-error"),c.open({where:document.body,url:In(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kr,dontclear:!0},g=>new Promise(function(){var v=(0,S.Z)(function*(T,U){yield g.restyle({setHideOnLeave:!1});const Y=Ut(p,"network-request-failed"),pe=Ln().setTimeout(()=>{U(Y)},rf.get());function Ne(){Ln().clearTimeout(pe),T(g)}g.ping(Ne).then(Ne,()=>{U(Y)})});return function(T,U){return v.apply(this,arguments)}}()))}),sf.apply(this,arguments)}const nE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rs{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ul="__/auth/handler",cl="emulator/auth/handler",af=encodeURIComponent("fac");function ll(p,c,d,g,v,T){return dl.apply(this,arguments)}function dl(){return(dl=(0,S.Z)(function*(p,c,d,g,v,T){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const U={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Te.SDK_VERSION,eventId:v};if(c instanceof Zn){c.setDefaultLanguage(p.languageCode),U.providerId=c.providerId||"",(0,P.xb)(c.getCustomParameters())||(U.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ze,yt]of Object.entries(T||{}))U[ze]=yt}if(c instanceof Mr){const ze=c.getScopes().filter(yt=>""!==yt);ze.length>0&&(U.scopes=ze.join(","))}p.tenantId&&(U.tid=p.tenantId);const Y=U;for(const ze of Object.keys(Y))void 0===Y[ze]&&delete Y[ze];const pe=yield p._getAppCheckToken(),Ne=pe?`#${af}=${encodeURIComponent(pe)}`:"";return`${function sE({config:p}){return p.emulator?X(p,cl):`https://${p.authDomain}/${ul}`}(p)}?${(0,P.xO)(Y).slice(1)}${Ne}`})).apply(this,arguments)}const no="webStorageSupport",jm=class xu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ea,this._completeRedirectFn=il,this._overrideRedirectResult=Rm}_openPopup(c,d,g,v){var T=this;return(0,S.Z)(function*(){var U;Zt(null===(U=T.eventManagers[c._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Y=yield ll(c,d,g,_n(),v);return function iE(p,c,d,g=500,v=600){const T=Math.max((window.screen.availHeight-v)/2,0).toString(),U=Math.max((window.screen.availWidth-g)/2,0).toString();let Y="";const pe=Object.assign(Object.assign({},nE),{width:g.toString(),height:v.toString(),top:T,left:U}),Ne=(0,P.z$)().toLowerCase();d&&(Y=Co(Ne)?"_blank":d),je(Ne)&&(c=c||"http://localhost",pe.scrollbars="yes");const ze=Object.entries(pe).reduce((pr,[Wr,pl])=>`${pr}${Wr}=${pl},`,"");if(function M(p=(0,P.z$)()){var c;return To(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ne)&&"_self"!==Y)return function al(p,c){const d=document.createElement("a");d.href=p,d.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(c||"",Y),new Rs(null);const yt=window.open(c||"",Y,ze);fe(yt,p,"popup-blocked");try{yt.focus()}catch{}return new Rs(yt)}(c,Y,wa())})()}_openRedirect(c,d,g,v){var T=this;return(0,S.Z)(function*(){return yield T._originValidation(c),function Oh(p){Ln().location.href=p}(yield ll(c,d,g,_n(),v)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:v,promise:T}=this.eventManagers[d];return v?Promise.resolve(v):(Zt(T,"If manager is not set, promise should be"),T)}const g=this.initAndGetManager(c);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(c){var d=this;return(0,S.Z)(function*(){const g=yield function tE(p){return sf.apply(this,arguments)}(c),v=new ls(c);return g.register("authEvent",T=>(fe(T?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(T.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:v},d.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(no,{type:no},v=>{var T;const U=null===(T=v?.[0])||void 0===T?void 0:T[no];void 0!==U&&d(!!U),mt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Xh(p){return ef.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return W()||ir()||To()}};class TA{constructor(c){this.factorId=c}_process(c,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,g);case"signin":return this._finalizeSignIn(c,d.credential);default:return sn("unexpected MultiFactorSessionType")}}}class Nu extends TA{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Nu(c)}_finalizeEnroll(c,d,g){return function _A(p,c){return ne(p,"POST","/v2/accounts/mfaEnrollment:finalize",de(p,c))}(c,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function gm(p,c){return ne(p,"POST","/v2/accounts/mfaSignIn:finalize",de(p,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let bA=(()=>{class p{constructor(){}static assertion(d){return Nu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var hl="@firebase/auth";class aE{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,S.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,P.Pz)("authIdTokenMaxAge"),function tA(p){Ac=p}({loadJS:p=>new Promise((c,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const T=Ut("internal-error");T.customData=v,d(T)},g.type="text/javascript",g.charset="UTF-8",function ds(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function lf(p){(0,Te._registerComponent)(new gn.wA("auth",(c,{options:d})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),T=c.getProvider("app-check-internal"),{apiKey:U,authDomain:Y}=g.options;fe(U&&!U.includes(":"),"invalid-api-key",{appName:g.name});const pe={apiKey:U,authDomain:Y,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nt(p)},Ne=new bo(g,v,T,pe);return function DI(p,c){const d=c?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Ae);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(Ne,d),Ne},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,g)=>{c.getProvider("auth-internal").initialize()})),(0,Te._registerComponent)(new gn.wA("auth-internal",c=>{const d=cn(c.getProvider("auth").getImmediate());return new aE(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)(hl,"1.7.4",function Ou(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Te.registerVersion)(hl,"1.7.4","esm2017")}("Browser")},58:(rs,qn,We)=>{We.d(qn,{BH:()=>$r,G6:()=>Ai,L:()=>At,LL:()=>ne,P0:()=>mn,Pz:()=>Ut,Sg:()=>Ft,UG:()=>fe,ZB:()=>Be,ZR:()=>de,aH:()=>mt,b$:()=>_n,eu:()=>te,hl:()=>X,jU:()=>sn,m9:()=>Ds,ne:()=>Sr,pd:()=>li,r3:()=>Dn,ru:()=>Zt,tV:()=>he,uI:()=>bn,vZ:()=>Hi,w1:()=>ui,xO:()=>js,xb:()=>lr,z$:()=>at,zd:()=>ws});const Ue=function(F){const N=[];let C=0;for(let D=0;D<F.length;D++){let w=F.charCodeAt(D);w<128?N[C++]=w:w<2048?(N[C++]=w>>6|192,N[C++]=63&w|128):55296==(64512&w)&&D+1<F.length&&56320==(64512&F.charCodeAt(D+1))?(w=65536+((1023&w)<<10)+(1023&F.charCodeAt(++D)),N[C++]=w>>18|240,N[C++]=w>>12&63|128,N[C++]=w>>6&63|128,N[C++]=63&w|128):(N[C++]=w>>12|224,N[C++]=w>>6&63|128,N[C++]=63&w|128)}return N},gn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,N){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const C=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,D=[];for(let w=0;w<F.length;w+=3){const O=F[w],le=w+1<F.length,Ae=le?F[w+1]:0,ke=w+2<F.length,Xe=ke?F[w+2]:0;let Bt=(15&Ae)<<2|Xe>>6,je=63&Xe;ke||(je=64,le||(Bt=64)),D.push(C[O>>2],C[(3&O)<<4|Ae>>4],C[Bt],C[je])}return D.join("")},encodeString(F,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(F):this.encodeByteArray(Ue(F),N)},decodeString(F,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(F):function(F){const N=[];let C=0,D=0;for(;C<F.length;){const w=F[C++];if(w<128)N[D++]=String.fromCharCode(w);else if(w>191&&w<224){const O=F[C++];N[D++]=String.fromCharCode((31&w)<<6|63&O)}else if(w>239&&w<365){const ke=((7&w)<<18|(63&F[C++])<<12|(63&F[C++])<<6|63&F[C++])-65536;N[D++]=String.fromCharCode(55296+(ke>>10)),N[D++]=String.fromCharCode(56320+(1023&ke))}else{const O=F[C++],le=F[C++];N[D++]=String.fromCharCode((15&w)<<12|(63&O)<<6|63&le)}}return N.join("")}(this.decodeStringToByteArray(F,N))},decodeStringToByteArray(F,N){this.init_();const C=N?this.charToByteMapWebSafe_:this.charToByteMap_,D=[];for(let w=0;w<F.length;){const O=C[F.charAt(w++)],Ae=w<F.length?C[F.charAt(w)]:0;++w;const Xe=w<F.length?C[F.charAt(w)]:64;++w;const Se=w<F.length?C[F.charAt(w)]:64;if(++w,null==O||null==Ae||null==Xe||null==Se)throw new Nn;D.push(O<<2|Ae>>4),64!==Xe&&(D.push(Ae<<4&240|Xe>>2),64!==Se&&D.push(Xe<<6&192|Se))}return D},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}};class Nn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const At=function(F){return function(F){const N=Ue(F);return gn.encodeByteArray(N,!0)}(F).replace(/\./g,"")},he=function(F){try{return gn.decodeString(F,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function Be(F,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:return new Date(N.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return N}for(const C in N)!N.hasOwnProperty(C)||!ot(C)||(F[C]=Be(F[C],N[C]));return F}function ot(F){return"__proto__"!==F}const tt=()=>{try{return function Nt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const F=process.env.__FIREBASE_DEFAULTS__;return F?JSON.parse(F):void 0})()||(()=>{if(typeof document>"u")return;let F;try{F=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const N=F&&he(F[1]);return N&&JSON.parse(N)})()}catch(F){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${F}`)}},mn=F=>{const N=(F=>{var N,C;return null===(C=null===(N=tt())||void 0===N?void 0:N.emulatorHosts)||void 0===C?void 0:C[F]})(F);if(!N)return;const C=N.lastIndexOf(":");if(C<=0||C+1===N.length)throw new Error(`Invalid host ${N} with no separate hostname and port!`);const D=parseInt(N.substring(C+1),10);return"["===N[0]?[N.substring(1,C-1),D]:[N.substring(0,C),D]},mt=()=>{var F;return null===(F=tt())||void 0===F?void 0:F.config},Ut=F=>{var N;return null===(N=tt())||void 0===N?void 0:N[`_${F}`]};class $r{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((N,C)=>{this.resolve=N,this.reject=C})}wrapCallback(N){return(C,D)=>{C?this.reject(C):this.resolve(D),"function"==typeof N&&(this.promise.catch(()=>{}),1===N.length?N(C):N(C,D))}}}function Ft(F,N){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const D=N||"demo-project",w=F.iat||0,O=F.sub||F.user_id;if(!O)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const le=Object.assign({iss:`https://securetoken.google.com/${D}`,aud:D,iat:w,exp:w+3600,auth_time:w,sub:O,user_id:O,firebase:{sign_in_provider:"custom",identities:{}}},F);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(le)),""].join(".")}function at(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function fe(){var F;const N=null===(F=tt())||void 0===F?void 0:F.forceEnvironment;if("node"===N)return!0;if("browser"===N)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function sn(){return"object"==typeof self&&self.self===self}function Zt(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function _n(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ui(){const F=at();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function Ai(){return!fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((F,N)=>{try{let C=!0;const D="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(D);w.onsuccess=()=>{w.result.close(),C||self.indexedDB.deleteDatabase(D),F(!0)},w.onupgradeneeded=()=>{C=!1},w.onerror=()=>{var O;N((null===(O=w.error)||void 0===O?void 0:O.message)||"")}}catch(C){N(C)}})}class de extends Error{constructor(N,C,D){super(C),this.code=N,this.customData=D,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ne.prototype.create)}}class ne{constructor(N,C,D){this.service=N,this.serviceName=C,this.errors=D}create(N,...C){const D=C[0]||{},w=`${this.service}/${N}`,O=this.errors[N],le=O?function Re(F,N){return F.replace(Et,(C,D)=>{const w=N[D];return null!=w?String(w):`<${D}?>`})}(O,D):"Error";return new de(w,`${this.serviceName}: ${le} (${w}).`,D)}}const Et=/\{\$([^}]+)}/g;function Dn(F,N){return Object.prototype.hasOwnProperty.call(F,N)}function lr(F){for(const N in F)if(Object.prototype.hasOwnProperty.call(F,N))return!1;return!0}function Hi(F,N){if(F===N)return!0;const C=Object.keys(F),D=Object.keys(N);for(const w of C){if(!D.includes(w))return!1;const O=F[w],le=N[w];if(kt(O)&&kt(le)){if(!Hi(O,le))return!1}else if(O!==le)return!1}for(const w of D)if(!C.includes(w))return!1;return!0}function kt(F){return null!==F&&"object"==typeof F}function js(F){const N=[];for(const[C,D]of Object.entries(F))Array.isArray(D)?D.forEach(w=>{N.push(encodeURIComponent(C)+"="+encodeURIComponent(w))}):N.push(encodeURIComponent(C)+"="+encodeURIComponent(D));return N.length?"&"+N.join("&"):""}function ws(F){const N={};return F.replace(/^\?/,"").split("&").forEach(D=>{if(D){const[w,O]=D.split("=");N[decodeURIComponent(w)]=decodeURIComponent(O)}}),N}function li(F){const N=F.indexOf("?");if(!N)return"";const C=F.indexOf("#",N);return F.substring(N,C>0?C:void 0)}function Sr(F,N){const C=new Rr(F,N);return C.subscribe.bind(C)}class Rr{constructor(N,C){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=C,this.task.then(()=>{N(this)}).catch(D=>{this.error(D)})}next(N){this.forEachObserver(C=>{C.next(N)})}error(N){this.forEachObserver(C=>{C.error(N)}),this.close(N)}complete(){this.forEachObserver(N=>{N.complete()}),this.close()}subscribe(N,C,D){let w;if(void 0===N&&void 0===C&&void 0===D)throw new Error("Missing Observer.");w=function Pr(F,N){if("object"!=typeof F||null===F)return!1;for(const C of N)if(C in F&&"function"==typeof F[C])return!0;return!1}(N,["next","error","complete"])?N:{next:N,error:C,complete:D},void 0===w.next&&(w.next=tn),void 0===w.error&&(w.error=tn),void 0===w.complete&&(w.complete=tn);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),O}unsubscribeOne(N){void 0===this.observers||void 0===this.observers[N]||(delete this.observers[N],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(N){if(!this.finalized)for(let C=0;C<this.observers.length;C++)this.sendOne(C,N)}sendOne(N,C){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[N])try{C(this.observers[N])}catch(D){typeof console<"u"&&console.error&&console.error(D)}})}close(N){this.finalized||(this.finalized=!0,void 0!==N&&(this.finalError=N),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Ds(F){return F&&F._delegate?F._delegate:F}},541:(rs,qn,We)=>{function S(n){return"function"==typeof n}function Te(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const P=Te(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class xt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(S(r))try{r()}catch(s){e=s instanceof P?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{en(s)}catch(o){e=e??[],o instanceof P?e=[...e,...o.errors]:e.push(o)}}if(e)throw new P(e)}}add(e){var t;if(e&&e!==this)if(this.closed)en(e);else{if(e instanceof xt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof xt&&e._removeParent(this)}}xt.EMPTY=(()=>{const n=new xt;return n.closed=!0,n})();const gn=xt.EMPTY;function Nn(n){return n instanceof xt||n&&"closed"in n&&S(n.remove)&&S(n.add)&&S(n.unsubscribe)}function en(n){S(n)?n():n.unsubscribe()}const At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},he={setTimeout(n,e,...t){const{delegate:r}=he;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=he;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ie(n){he.setTimeout(()=>{const{onUnhandledError:e}=At;if(!e)throw n;e(n)})}function Be(){}const ot=It("C",void 0,void 0);function It(n,e,t){return{kind:n,value:e,error:t}}let et=null;function tt(n){if(At.useDeprecatedSynchronousErrorHandling){const e=!et;if(e&&(et={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=et;if(et=null,t)throw r}}else n()}class mn extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nn(e)&&e.add(this)):this.destination=sn}static create(e,t,r){return new Ft(e,t,r)}next(e){this.isStopped?fe(function Gn(n){return It("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fe(function Nt(n){return It("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fe(ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Ut(n,e){return mt.call(n,e)}class $r{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){at(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){at(r)}else at(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){at(t)}}}class Ft extends mn{constructor(e,t,r){let i;if(super(),S(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ut(e.next,s),error:e.error&&Ut(e.error,s),complete:e.complete&&Ut(e.complete,s)}):i=e}this.destination=new $r(i)}}function at(n){At.useDeprecatedSynchronousErrorHandling?function nr(n){At.useDeprecatedSynchronousErrorHandling&&et&&(et.errorThrown=!0,et.error=n)}(n):Ie(n)}function fe(n,e){const{onStoppedNotification:t}=At;t&&he.setTimeout(()=>t(n,e))}const sn={closed:!0,next:Be,error:function bn(n){throw n},complete:Be},Zt="function"==typeof Symbol&&Symbol.observable||"@@observable";function _n(n){return n}function ui(n){return 0===n.length?_n:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function X(n){return n&&n instanceof mn||function Ai(n){return n&&S(n.next)&&S(n.error)&&S(n.complete)}(n)&&Nn(n)}(t)?t:new Ft(t,r,i);return tt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Is(r))((i,s)=>{const o=new Ft({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Zt](){return this}pipe(...t){return ui(t)(this)}toPromise(t){return new(t=Is(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Is(n){var e;return null!==(e=n??At.Promise)&&void 0!==e?e:Promise}const te=Te(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class n extends ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new oe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new te}next(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){tt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?gn:(this.currentObservers=null,s.push(t),new xt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ct;return t.source=this,t}}return n.create=(e,t)=>new oe(e,t),n})();class oe extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:gn}}function de(n){return S(n?.lift)}function ne(n){return e=>{if(de(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(n,e,t,r,i){return new Et(n,e,t,r,i)}class Et extends mn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xe(n,e){return ne((t,r)=>{let i=0;t.subscribe(Re(r,s=>{r.next(n.call(e,s,i++))}))})}var Ve=We(582);const bt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function on(n){return S(n?.then)}function ci(n){return S(n[Zt])}function Ot(n){return Symbol.asyncIterator&&S(n?.[Symbol.asyncIterator])}function Kt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wn=function Dn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function lr(n){return S(n?.[Wn])}function Es(n){return(0,Ve.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ve.qq)(t.read());if(i)return yield(0,Ve.qq)(void 0);yield yield(0,Ve.qq)(r)}}finally{t.releaseLock()}})}function Hi(n){return S(n?.getReader)}function kt(n){if(n instanceof ct)return n;if(null!=n){if(ci(n))return function Si(n){return new ct(e=>{const t=n[Zt]();if(S(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bt(n))return function js(n){return new ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(on(n))return function ws(n){return new ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ie)})}(n);if(Ot(n))return zi(n);if(lr(n))return function li(n){return new ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Hi(n))return function Sr(n){return zi(Es(n))}(n)}throw Kt(n)}function zi(n){return new ct(e=>{(function Rr(n,e){var t,r,i,s;return(0,Ve.mG)(this,void 0,void 0,function*(){try{for(t=(0,Ve.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function yn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function tn(n,e,t=1/0){return S(e)?tn((r,i)=>xe((s,o)=>e(r,s,i,o))(kt(n(r,i))),t):("number"==typeof e&&(t=e),ne((r,i)=>function Pr(n,e,t,r,i,s,o,a){const u=[];let l=0,f=0,m=!1;const y=()=>{m&&!u.length&&!l&&e.complete()},E=x=>l<r?A(x):u.push(x),A=x=>{s&&e.next(x),l++;let k=!1;kt(t(x,f++)).subscribe(Re(e,Z=>{i?.(Z),s?E(Z):e.next(Z)},()=>{k=!0},void 0,()=>{if(k)try{for(l--;u.length&&l<r;){const Z=u.shift();o?yn(e,o,()=>A(Z)):A(Z)}y()}catch(Z){e.error(Z)}}))};return n.subscribe(Re(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function wr(n=1/0){return tn(_n,n)}const On=new ct(n=>n.complete());function Ri(n){return n[n.length-1]}function Ts(n){return S(Ri(n))?n.pop():void 0}function kn(n){return function Qt(n){return n&&S(n.schedule)}(Ri(n))?n.pop():void 0}function vn(n,e=0){return ne((t,r)=>{t.subscribe(Re(r,i=>yn(r,n,()=>r.next(i),e),()=>yn(r,n,()=>r.complete(),e),i=>yn(r,n,()=>r.error(i),e)))})}function Cr(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ds(n,e){if(!n)throw new Error("Iterable cannot be null");return new ct(t=>{yn(t,e,()=>{const r=n[Symbol.asyncIterator]();yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function C(n,e){return e?function N(n,e){if(null!=n){if(ci(n))return function bs(n,e){return kt(n).pipe(Cr(e),vn(e))}(n,e);if(bt(n))return function zs(n,e){return new ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(on(n))return function Hs(n,e){return kt(n).pipe(Cr(e),vn(e))}(n,e);if(Ot(n))return Ds(n,e);if(lr(n))return function qs(n,e){return new ct(t=>{let r;return yn(t,e,()=>{r=n[Wn](),yn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>S(r?.return)&&r.return()})}(n,e);if(Hi(n))return function F(n,e){return Ds(Es(n),e)}(n,e)}throw Kt(n)}(n,e):kt(n)}function D(...n){const e=kn(n),t=function rr(n,e){return"number"==typeof Ri(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?kt(r[0]):wr(t)(C(r,e)):On}class w extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function O(...n){return C(n,kn(n))}function le(n={}){const{connector:e=(()=>new se),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),o=u=void 0,f=m=!1},A=()=>{const x=o;E(),x?.unsubscribe()};return ne((x,k)=>{l++,!m&&!f&&y();const Z=u=u??e();k.add(()=>{l--,0===l&&!m&&!f&&(a=Ae(A,i))}),Z.subscribe(k),!o&&l>0&&(o=new Ft({next:B=>Z.next(B),error:B=>{m=!0,y(),a=Ae(E,t,B),Z.error(B)},complete:()=>{f=!0,y(),a=Ae(E,r),Z.complete()}}),kt(x).subscribe(o))})(s)}}function Ae(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ft({next:()=>{r.unsubscribe(),n()}});return kt(e(...t)).subscribe(r)}function ke(n,e){return ne((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Re(r,u=>{i?.unsubscribe();let l=0;const f=s++;kt(n(u,f)).subscribe(i=Re(r,m=>r.next(e?e(u,m,f,l++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xe(n,e=_n){return n=n??Dt,ne((t,r)=>{let i,s=!0;t.subscribe(Re(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Dt(n,e){return n===e}function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Bt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function je(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(je).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ir(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Co=Se({__forward_ref__:Se});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return je(this())},n}function Ze(n){return da(n)?n():n}function da(n){return"function"==typeof n&&n.hasOwnProperty(Co)&&n.__forward_ref__===$t}function ha(n){return n&&!!n.\u0275providers}const Dc="https://g.co/ng/security#xss";class M extends Error{constructor(e,t){super(function z(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function W(n){return"string"==typeof n?n:null==n?"":String(n)}function qt(n,e){throw new M(-201,!1)}function Mi(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function $e(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rc(n){return uh(n,gu)||uh(n,Do)}function uh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Pc(n){return n&&(n.hasOwnProperty(ch)||n.hasOwnProperty(zg))?n[ch]:null}const gu=Se({\u0275prov:Se}),ch=Se({\u0275inj:Se}),Do=Se({ngInjectableDef:Se}),zg=Se({ngInjectorDef:Se});var gt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(gt||{});let lh;function Hr(n){const e=lh;return lh=n,e}function xc(n,e,t){const r=Rc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&gt.Optional?null:void 0!==e?e:void qt(je(n))}const Gt=globalThis;class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=$e({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const _u={},yu="__NG_DI_FLAG__",Ws="ngTempTokenPath",gh=/\n/gm,qi="__source";let fa;function Zs(n){const e=fa;return fa=n,e}function _h(n,e=gt.Default){if(void 0===fa)throw new M(-203,!1);return null===fa?xc(n,void 0,e):fa.get(n,e&gt.Optional?null:void 0,e)}function Ee(n,e=gt.Default){return(function Mc(){return lh}()||_h)(Ze(n),e)}function Fe(n,e=gt.Default){return Ee(n,kc(e))}function kc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vu(n){const e=[];for(let t=0;t<n.length;t++){const r=Ze(n[t]);if(Array.isArray(r)){if(0===r.length)throw new M(900,!1);let i,s=gt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=SI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Ee(i,s))}else e.push(Ee(r))}return e}function Gi(n,e){return n[yu]=e,n.prototype[yu]=e,n}function SI(n){return n[yu]}function Ks(n){return{toString:n}.toString()}var pa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(pa||{}),Zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zn||{});const Mr={},Ct=[],Fc=Se({\u0275cmp:Se}),yh=Se({\u0275dir:Se}),vh=Se({\u0275pipe:Se}),Kg=Se({\u0275mod:Se}),zr=Se({\u0275fac:Se}),Eu=Se({__NG_ELEMENT_ID__:Se}),wu=Se({__NG_ENV_ID__:Se});function Qg(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Vc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];di(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Lc(n){return 3===n||4===n||6===n}function di(n){return 64===n.charCodeAt(0)}function ga(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Yg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Yg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Uc="ng-template";function Bc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Qg(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ih(n){return 4===n.type&&n.value!==Uc}function Jg(n,e,t){return e===(4!==n.type||t?n.value:Uc)}function PI(n,e,t){let r=4;const i=n.attrs||[],s=function wh(n){for(let e=0;e<n.length;e++)if(Lc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Jg(n,u,t)||""===u&&1===e.length){if(hi(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Bc(n.attrs,l,t)){if(hi(r))return!1;o=!0}continue}const m=Eh(8&r?"class":u,i,Ih(n),t);if(-1===m){if(hi(r))return!1;o=!0;continue}if(""!==l){let y;y=m>s?"":i[m+1].toLowerCase();const E=8&r?y:null;if(E&&-1!==Qg(E,l,0)||2&r&&l!==y){if(hi(r))return!1;o=!0}}}}else{if(!o&&!hi(r)&&!hi(u))return!1;if(o&&hi(u))continue;o=!1,r=u|1&r}}return hi(r)||o}function hi(n){return 0==(1&n)}function Eh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Xg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function jc(n,e,t=!1){for(let r=0;r<e.length;r++)if(PI(n,e[r],t))return!0;return!1}function Th(n,e){return n?":not("+e.trim()+")":e}function bh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!hi(o)&&(e+=Th(s,i),i=""),r=o,s=s||!hi(r);t++}return""!==i&&(e+=Th(s,i)),e}function xi(n){return Ks(()=>{const e=nm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zn.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""};zc(t);const r=n.dependencies;return t.directiveDefs=qc(r,!1),t.pipeDefs=qc(r,!0),t.id=function MI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function em(n){return Tt(n)||Yn(n)}function Sh(n){return null!==n}function Kn(n){return Ks(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tm(n,e){if(null==n)return Mr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return Ks(()=>{const e=nm(n);return zc(e),e})}function Qn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Tt(n){return n[Fc]||null}function Yn(n){return n[yh]||null}function sr(n){return n[vh]||null}function xr(n,e){const t=n[Kg]||null;if(!t&&!0===e)throw new Error(`Type ${je(n)} does not have '\u0275mod' property.`);return t}function nm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Mr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tm(n.inputs,e),outputs:tm(n.outputs)}}function zc(n){n.features?.forEach(e=>e(n))}function qc(n,e){if(!n)return null;const t=e?sr:em;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Sh)}const ln=0,Me=1,rt=2,dn=3,fi=4,Cu=5,or=6,ma=7,Fn=8,is=9,_a=10,it=11,Ao=12,rm=13,Ys=14,Vn=15,So=16,ya=17,Ni=18,Tu=19,Gc=20,Js=21,Wi=22,bu=23,Ro=24,_t=25,Wc=1,Zc=2,ss=7,Po=9,dr=11;function qr(n){return Array.isArray(n)&&"object"==typeof n[Wc]}function Nr(n){return Array.isArray(n)&&!0===n[Wc]}function im(n){return 0!=(4&n.flags)}function va(n){return n.componentOffset>-1}function Mh(n){return 1==(1&n.flags)}function pi(n){return!!n.template}function xh(n){return 0!=(512&n[rt])}function Mo(n,e){return n.hasOwnProperty(zr)?n[zr]:null}let Tr=null,Ea=!1;function Oi(n){const e=Tr;return Tr=n,e}const cm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function lm(n){if(!eo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!dm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Qc(n){n.dirty=!0,function Ln(n){if(void 0===n.liveConsumerNode)return;const e=Ea;Ea=!0;try{for(const t of n.liveConsumerNode)t.dirty||Qc(t)}finally{Ea=e}}(n),n.consumerMarkedDirty?.(n)}function kh(n){return n&&(n.nextProducerIndex=0),Oi(n)}function Au(n,e){if(Oi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(eo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Yc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dm(n){xo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(lm(t),r!==t.version))return!0}return!1}function hm(n){if(xo(n),eo(n))for(let e=0;e<n.producerNode.length;e++)Yc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Yc(n,e){if(function Ca(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),xo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Yc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];xo(i),i.producerIndexOfThis[r]=e}}function eo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function xo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Jc=null;function _m(n){const e=Oi(null);try{return n()}finally{Oi(e)}}const ym=()=>{},Bh=(()=>({...cm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ym}))();class jI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ki(){return vm}function vm(n){return n.type.prototype.ngOnChanges&&(n.setInput=$I),Im}function Im(){const n=wm(this),e=n?.current;if(e){const t=n.previous;if(t===Mr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function $I(n,e,t,r){const i=this.declaredInputs[t],s=wm(n)||function jh(n,e){return n[Em]=e}(n,{previous:Mr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new jI(u&&u.currentValue,e,a===Mr),n[r]=e}ki.ngInherit=!0;const Em="__ngSimpleChanges__";function wm(n){return n[Em]||null}const os=function(n,e,t){};function Wt(n){for(;Array.isArray(n);)n=n[ln];return n}function ba(n,e){return Wt(e[n])}function Gr(n,e){return Wt(e[n.index])}function Tm(n,e){return n.data[e]}function Or(n,e){const t=e[n];return qr(t)?t:t[ln]}function as(n,e){return null==e?null:n[e]}function qh(n){n[ya]=0}function GI(n){1024&n[rt]||(n[rt]|=1024,nl(n,1))}function bm(n){1024&n[rt]&&(n[rt]&=-1025,nl(n,-1))}function nl(n,e){let t=n[dn];if(null===t)return;t[Cu]+=e;let r=t;for(t=t[dn];null!==t&&(1===e&&1===r[Cu]||-1===e&&0===r[Cu]);)t[Cu]+=e,r=t,t=t[dn]}const Je={lFrame:Vm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Sm(){return Je.bindingsEnabled}function ge(){return Je.lFrame.lView}function St(){return Je.lFrame.tView}function hr(){let n=Mm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Mm(){return Je.lFrame.currentTNode}function us(n,e){const t=Je.lFrame;t.currentTNode=n,t.isParent=e}function Qh(){return Je.lFrame.isParent}function Ru(){Je.lFrame.isParent=!1}function fr(){const n=Je.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Da(){return Je.lFrame.bindingIndex++}function JI(n,e){const t=Je.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pu(e)}function Pu(n){Je.lFrame.currentDirectiveIndex=n}function Xh(n){Je.lFrame.currentQueryIndex=n}function ef(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[or]:null}function Fm(n,e,t){if(t&gt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&gt.Host||(i=ef(s),null===i||(s=s[Ys],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Je.lFrame=nf();return r.currentTNode=e,r.lView=n,!0}function tf(n){const e=nf(),t=n[Me];Je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nf(){const n=Je.lFrame,e=null===n?null:n.child;return null===e?Vm(n):e}function Vm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Mu(){const n=Je.lFrame;return Je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Lm=Mu;function rf(){const n=Mu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kr(){return Je.lFrame.selectedIndex}function Oo(n){Je.lFrame.selectedIndex=n}function In(){const n=Je.lFrame;return Tm(n.tView,n.selectedIndex)}let Bm=!0;function ol(){return Bm}function Rs(n){Bm=n}function al(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function ul(n,e,t){ll(n,e,3,t)}function cl(n,e,t,r){(3&n[rt])===t&&ll(n,e,t,r)}function af(n,e){let t=n[rt];(3&t)===e&&(t&=8191,t+=1,n[rt]=t)}function ll(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[ya]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[ya]+=65536),(a<s||-1==s)&&(sE(n,t,e,u),n[ya]=(4294901760&n[ya])+u+2),u++}function dl(n,e){os(4,n,e);const t=Oi(null);try{e.call(n)}finally{Oi(t),os(5,n,e)}}function sE(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[rt]>>13<n[ya]>>16&&(3&n[rt])===e&&(n[rt]+=8192,dl(a,s)):dl(a,s)}const no=-1;class xu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function hl(n){return n!==no}function Aa(n){return 32767&n}function Ou(n,e){let t=function aE(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ys],t--;return r}let lf=!0;function fl(n){const e=lf;return lf=n,e}const df=255,$m=5;let SA=0;const ds={};function c(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(hl(i)){const o=Aa(i),a=Ou(i,e),u=a[Me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Gm(i),null===r)return no;if(t++,i=i[Ys],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return no}function T(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Eu)&&(r=t[Eu]),null==r&&(r=t[Eu]=SA++);const i=r&df;e.data[n+(i>>$m)]|=1<<i}(n,e,t)}function Y(n,e,t){if(t&gt.Optional||void 0!==n)return n;qt()}function pe(n,e,t,r){if(t&gt.Optional&&void 0===r&&(r=null),!(t&(gt.Self|gt.Host))){const i=n[is],s=Hr(void 0);try{return i?i.get(e,r,t&gt.Optional):xc(e,r,t&gt.Optional)}finally{Hr(s)}}return Y(r,0,t)}function Ne(n,e,t,r=gt.Default,i){if(null!==n){if(2048&e[rt]&&!(r&gt.Self)){const o=function qm(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[rt]&&!(512&o[rt]);){const a=ze(s,o,t,r|gt.Self,ds);if(a!==ds)return a;let u=s.parent;if(!u){const l=o[Gc];if(l){const f=l.get(t,ds,r);if(f!==ds)return f}u=Gm(o),o=o[Ys]}s=u}return i}(n,e,t,r,ds);if(o!==ds)return o}const s=ze(n,e,t,r,ds);if(s!==ds)return s}return pe(e,t,r,i)}function ze(n,e,t,r,i){const s=function pl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Eu)?n[Eu]:void 0;return"number"==typeof e?e>=0?e&df:zm:e}(t);if("function"==typeof s){if(!Fm(e,n,r))return r&gt.Host?Y(i,0,r):pe(e,t,r,i);try{let o;if(o=s(r),null!=o||r&gt.Optional)return o;qt()}finally{Lm()}}else if("number"==typeof s){let o=null,a=g(n,e),u=no,l=r&gt.Host?e[Vn][or]:null;for((-1===a||r&gt.SkipSelf)&&(u=-1===a?v(n,e):e[a+8],u!==no&&gl(r,!1)?(o=e[Me],a=Aa(u),e=Ou(u,e)):a=-1);-1!==a;){const f=e[Me];if(hf(s,a,f.data)){const m=yt(a,e,t,o,r,l);if(m!==ds)return m}u=e[a+8],u!==no&&gl(r,e[Me].data[a+8]===l)&&hf(s,a,e)?(o=f,a=Aa(u),e=Ou(u,e)):a=-1}}return i}function yt(n,e,t,r,i,s){const o=e[Me],a=o.data[n+8],f=function pr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let E=r?a:a+f;E<y;E++){const A=o[E];if(E<u&&t===A||E>=u&&A.type===t)return E}if(i){const E=o[u];if(E&&pi(E)&&E.type===t)return u}return null}(a,o,t,null==r?va(a)&&lf:r!=o&&0!=(3&a.type),i&gt.Host&&s===a);return null!==f?Wr(e,o,f,a):ds}function Wr(n,e,t,r){let i=n[t];const s=e.data;if(function jm(n){return n instanceof xu}(i)){const o=i;o.resolving&&function nt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new M(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ye(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():W(n)}(s[t]));const a=fl(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Hr(o.injectImpl):null;Fm(n,r,gt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function iE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=vm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Hr(l),fl(a),o.resolving=!1,Lm()}}return i}function hf(n,e,t){return!!(t[e+(n>>$m)]&1<<n)}function gl(n,e){return!(n&gt.Self||n&gt.Host&&e)}class gr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ne(this._tNode,this._lView,e,kc(r),t)}}function zm(){return new gr(hr(),ge())}function ar(n){return Ks(()=>{const e=n.prototype.constructor,t=e[zr]||ku(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[zr]||ku(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ku(n){return da(n)?()=>{const e=ku(Ze(n));return e&&e()}:Mo(n)}function Gm(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[or]:null}const ml="__parameters__";function yl(n,e,t){return Ks(()=>{const r=function uE(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,f){const m=u.hasOwnProperty(ml)?u[ml]:Object.defineProperty(u,ml,{value:[]})[ml];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Il(n,e){n.forEach(t=>Array.isArray(t)?Il(t,e):e(t))}function PA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Zi(n,e,t){let r=El(n,e);return r>=0?n[1|r]=t:(r=~r,function wB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function cE(n,e){const t=El(n,e);if(t>=0)return n[1|t]}function El(n,e){return function MA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Fr=Gi(yl("Optional"),8),Km=Gi(yl("SkipSelf"),4);function e_(n){return 128==(128&n.flags)}var Ma=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ma||{});const HB=/^>|^->|<!--|-->|--!>|<!-$/g,zB=/(<|>)/g,qB="\u200b$1\u200b";const pE=new Map;let GB=0;const mE="__ngContext__";function Zr(n,e){qr(e)?(n[mE]=e[Tu],function ZB(n){pE.set(n[Tu],n)}(e)):n[mE]=e}let _E;function yE(n,e){return _E(n,e)}function _f(n){const e=n[dn];return Nr(e)?e[dn]:e}function YA(n){return XA(n[Ao])}function JA(n){return XA(n[fi])}function XA(n){for(;null!==n&&!Nr(n);)n=n[fi];return n}function Tl(n,e,t,r,i){if(null!=r){let s,o=!1;Nr(r)?s=r:qr(r)&&(o=!0,r=r[ln]);const a=Wt(r);0===n&&null!==t?null==i?rS(e,t,a):Fu(e,t,a,i||null,!0):1===n&&null!==t?Fu(e,t,a,i||null,!0):2===n?function a_(n,e,t){const r=s_(n,e);r&&function fj(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function mj(n,e,t,r,i){const s=t[ss];s!==Wt(t)&&Tl(e,n,r,s,i);for(let a=dr;a<t.length;a++){const u=t[a];vf(u[Me],u,n,e,r,s)}}(e,n,s,t,i)}}function vE(n,e){return n.createComment(function HA(n){return n.replace(HB,e=>e.replace(zB,qB))}(e))}function r_(n,e,t){return n.createElement(e,t)}function tS(n,e){const t=n[Po],r=t.indexOf(e);bm(e),t.splice(r,1)}function i_(n,e){if(n.length<=dr)return;const t=dr+e,r=n[t];if(r){const i=r[So];null!==i&&i!==n&&tS(i,r),e>0&&(n[t-1][fi]=r[fi]);const s=Wm(n,dr+e);!function sj(n,e){vf(n,e,e[it],2,null,null),e[ln]=null,e[or]=null}(r[Me],r);const o=s[Ni];null!==o&&o.detachView(s[Me]),r[dn]=null,r[fi]=null,r[rt]&=-129}return r}function IE(n,e){if(!(256&e[rt])){const t=e[it];e[bu]&&hm(e[bu]),e[Ro]&&hm(e[Ro]),t.destroyNode&&vf(n,e,t,3,null,null),function uj(n){let e=n[Ao];if(!e)return EE(n[Me],n);for(;e;){let t=null;if(qr(e))t=e[Ao];else{const r=e[dr];r&&(t=r)}if(!t){for(;e&&!e[fi]&&e!==n;)qr(e)&&EE(e[Me],e),e=e[dn];null===e&&(e=n),qr(e)&&EE(e[Me],e),t=e&&e[fi]}e=t}}(e)}}function EE(n,e){if(!(256&e[rt])){e[rt]&=-129,e[rt]|=256,function hj(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof xu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];os(4,a,u);try{u.call(a)}finally{os(5,a,u)}}else{os(4,i,s);try{s.call(i)}finally{os(5,i,s)}}}}}(n,e),function dj(n,e){const t=n.cleanup,r=e[ma];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ma]=null);const i=e[Js];if(null!==i){e[Js]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Me].type&&e[it].destroy();const t=e[So];if(null!==t&&Nr(e[dn])){t!==e[dn]&&tS(t,e);const r=e[Ni];null!==r&&r.detachView(n)}!function KB(n){pE.delete(n[Tu])}(e)}}function wE(n,e,t){return function nS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[ln];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Zn.None||s===Zn.Emulated)return null}return Gr(r,t)}}(n,e.parent,t)}function Fu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function rS(n,e,t){n.appendChild(e,t)}function iS(n,e,t,r,i){null!==r?Fu(n,e,t,r,i):rS(n,e,t)}function s_(n,e){return n.parentNode(e)}let CE,u_,AE,c_,aS=function oS(n,e,t){return 40&n.type?Gr(n,t):null};function o_(n,e,t,r){const i=wE(n,r,e),s=e[it],a=function sS(n,e,t){return aS(n,e,t)}(r.parent||e[or],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)iS(s,i,t[u],a,!1);else iS(s,i,t,a,!1);void 0!==CE&&CE(s,r,e,t,i)}function yf(n,e){if(null!==e){const t=e.type;if(3&t)return Gr(e,n);if(4&t)return TE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return yf(n,r);{const i=n[e.index];return Nr(i)?TE(-1,i):Wt(i)}}if(32&t)return yE(e,n)()||Wt(n[e.index]);{const r=cS(n,e);return null!==r?Array.isArray(r)?r[0]:yf(_f(n[Vn]),r):yf(n,e.next)}}return null}function cS(n,e){return null!==e?n[Vn][or].projection[e.projection]:null}function TE(n,e){const t=dr+n+1;if(t<e.length){const r=e[t],i=r[Me].firstChild;if(null!==i)return yf(r,i)}return e[ss]}function bE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Zr(Wt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)bE(n,e,t.child,r,i,s,!1),Tl(e,n,i,a,s);else if(32&u){const l=yE(t,r);let f;for(;f=l();)Tl(e,n,i,f,s);Tl(e,n,i,a,s)}else 16&u?dS(n,e,r,t,i,s):Tl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function vf(n,e,t,r,i,s){bE(t,r,n.firstChild,e,i,s,!1)}function dS(n,e,t,r,i,s){const o=t[Vn],u=o[or].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Tl(e,n,i,u[l],s);else{let l=u;const f=o[dn];e_(r)&&(l.flags|=128),bE(n,e,l,f,i,s,!0)}}function hS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fS(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Vc(n,e,r),null!==i&&hS(n,e,i),null!==s&&function yj(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function bl(n){return function DE(){if(void 0===u_&&(u_=null,Gt.trustedTypes))try{u_=Gt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return u_}()?.createHTML(n)||n}function Dl(){if(void 0!==AE)return AE;if(typeof document<"u")return document;throw new M(210,!1)}function pS(n){return function SE(){if(void 0===c_&&(c_=null,Gt.trustedTypes))try{c_=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return c_}()?.createHTML(n)||n}class _S{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dc})`}}function xa(n){return n instanceof _S?n.changingThisBreaksApplicationSecurity:n}function If(n,e){const t=function Sj(n){return n instanceof _S&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Dc})`)}return t===e}class Rj{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(bl(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Pj{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=bl(e),t}}const xj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RE(n){return(n=String(n)).match(xj)?n:"unsafe:"+n}function ko(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ef(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const vS=ko("area,br,col,hr,img,wbr"),IS=ko("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ES=ko("rp,rt"),PE=Ef(vS,Ef(IS,ko("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ef(ES,ko("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ef(ES,IS)),ME=ko("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wS=Ef(ME,ko("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ko("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Nj=ko("script,style,template");class Oj{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!PE.hasOwnProperty(t))return this.sanitizedSomething=!0,!Nj.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!wS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;ME[a]&&(u=RE(u)),this.buf.push(" ",o,'="',CS(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();PE.hasOwnProperty(t)&&!vS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(CS(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const kj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fj=/([^\#-~ |!])/g;function CS(n){return n.replace(/&/g,"&amp;").replace(kj,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Fj,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let l_;function xE(n){return"content"in n&&function Lj(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Al=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Al||{});function Na(n){const e=wf();return e?pS(e.sanitize(Al.HTML,n)||""):If(n,"HTML")?pS(xa(n)):function Vj(n,e){let t=null;try{l_=l_||function yS(n){const e=new Pj(n);return function Mj(){try{return!!(new window.DOMParser).parseFromString(bl(""),"text/html")}catch{return!1}}()?new Rj(e):e}(n);let r=e?String(e):"";t=l_.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=l_.getInertBodyElement(r)}while(r!==s);return bl((new Oj).sanitizeChildren(xE(t)||t))}finally{if(t){const r=xE(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(Dl(),W(n))}function Oa(n){const e=wf();return e?e.sanitize(Al.URL,n)||"":If(n,"URL")?xa(n):RE(W(n))}function wf(){const n=ge();return n&&n[_a].sanitizer}const Cf=new Ce("ENVIRONMENT_INITIALIZER"),DS=new Ce("INJECTOR",-1),AS=new Ce("INJECTOR_DEF_TYPES");class NE{get(e,t=_u){if(t===_u){const r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return t}}function zj(...n){return{\u0275providers:RS(0,n),\u0275fromNgModule:!0}}function RS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Il(e,o=>{const a=o;d_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&PS(i,s),t}function PS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];OE(i,s=>{e(s,r)})}}function d_(n,e,t,r){if(!(n=Ze(n)))return!1;let i=null,s=Pc(n);const o=!s&&Tt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Pc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)d_(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{Il(s.imports,f=>{d_(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&PS(l,e)}if(!a){const l=Mo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:AS,useValue:i,multi:!0},i),e({provide:Cf,useValue:()=>Ee(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;OE(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function OE(n,e){for(let t of n)ha(t)&&(t=t.\u0275providers),Array.isArray(t)?OE(t,e):e(t)}const qj=Se({provide:String,useValue:Se});function kE(n){return null!==n&&"object"==typeof n&&qj in n}function Vu(n){return"function"==typeof n}const FE=new Ce("Set Injector scope."),h_={},Wj={};let VE;function f_(){return void 0===VE&&(VE=new NE),VE}class fs{}class Sl extends fs{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,UE(e,o=>this.processProvider(o)),this.records.set(DS,Rl(void 0,this)),i.has("environment")&&this.records.set(fs,Rl(void 0,this));const s=this.records.get(FE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(AS.multi,Ct,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Zs(this),r=Hr(void 0);try{return e()}finally{Zs(t),Hr(r)}}get(e,t=_u,r=gt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wu))return e[wu](this);r=kc(r);const s=Zs(this),o=Hr(void 0);try{if(!(r&gt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function Jj(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(e)&&Rc(e);u=l&&this.injectableDefInScope(l)?Rl(LE(e),h_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&gt.Self?f_():this.parent).get(e,t=r&gt.Optional&&t===_u?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ws]=a[Ws]||[]).unshift(je(e)),s)throw a;return function RI(n,e,t,r){const i=n[Ws];throw e[qi]&&i.unshift(e[qi]),n.message=function Iu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):je(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(gh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ws]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Hr(o),Zs(s)}}resolveInjectorInitializers(){const e=Zs(this),t=Hr(void 0);try{const i=this.get(Cf.multi,Ct,gt.Self);for(const s of i)s()}finally{Zs(e),Hr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){let t=Vu(e=Ze(e))?e:Ze(e&&e.provide);const r=function Kj(n){return kE(n)?Rl(void 0,n.useValue):Rl(NS(n),h_)}(e);if(Vu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Rl(void 0,h_,!0),i.factory=()=>vu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===h_&&(t.value=Wj,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Yj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function LE(n){const e=Rc(n),t=null!==e?e.factory:Mo(n);if(null!==t)return t;if(n instanceof Ce)throw new M(204,!1);if(n instanceof Function)return function Zj(n){const e=n.length;if(e>0)throw function pf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new M(204,!1);const t=function Hg(n){return n&&(n[gu]||n[Do])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new M(204,!1)}function NS(n,e,t){let r;if(Vu(n)){const i=Ze(n);return Mo(i)||LE(i)}if(kE(n))r=()=>Ze(n.useValue);else if(function xS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...vu(n.deps||[]));else if(function MS(n){return!(!n||!n.useExisting)}(n))r=()=>Ee(Ze(n.useExisting));else{const i=Ze(n&&(n.useClass||n.provide));if(!function Qj(n){return!!n.deps}(n))return Mo(i)||LE(i);r=()=>new i(...vu(n.deps))}return r}function Rl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function UE(n,e){for(const t of n)Array.isArray(t)?UE(t,e):t&&ha(t)?UE(t.\u0275providers,e):e(t)}const p_=new Ce("AppId",{providedIn:"root",factory:()=>Xj}),Xj="ng",OS=new Ce("Platform Initializer"),Ps=new Ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kS=new Ce("CSP nonce",{providedIn:"root",factory:()=>Dl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let FS=(n,e,t)=>null;function WE(n,e,t=!1){return FS(n,e,t)}class c${}class US{}class d${resolveComponentFactory(e){throw function l$(n){const e=Error(`No component factory found for ${je(n)}.`);return e.ngComponent=n,e}(e)}}let I_=(()=>{class n{static#e=this.NULL=new d$}return n})();function h$(){return xl(hr(),ge())}function xl(n,e){return new Ki(Gr(n,e))}let Ki=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=h$}return n})();class jS{}let Fo=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function p$(){const n=ge(),t=Or(hr().index,n);return(qr(t)?t:n)[it]}()}return n})(),g$=(()=>{class n{static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:()=>null})}return n})();class Nl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const QE=new Nl("16.2.12"),YE={};function qS(n,e=null,t=null,r){const i=GS(n,e,t,r);return i.resolveInjectorInitializers(),i}function GS(n,e=null,t=null,r,i=new Set){const s=[t||Ct,zj(n)];return r=r||("object"==typeof n?void 0:je(n)),new Sl(s,e||f_(),r||null,i)}let Kr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=_u;static#t=this.NULL=new NE;static create(t,r){if(Array.isArray(t))return qS({name:""},r,t,"");{const i=t.name??"";return qS({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=$e({token:n,providedIn:"any",factory:()=>Ee(DS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function XE(n){return n.ngOriginalError}class Vo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&XE(e);for(;t&&XE(t);)t=XE(t);return t||null}}function tw(n){return e=>{setTimeout(n,void 0,e)}}const Bn=class w$ extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=tw(s),i&&(i=tw(i)),o&&(o=tw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof xt&&e.add(a),a}};function ZS(...n){}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bn(!1),this.onMicrotaskEmpty=new Bn(!1),this.onStable=new Bn(!1),this.onError=new Bn(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function C$(){const n="function"==typeof Gt.requestAnimationFrame;let e=Gt[n?"requestAnimationFrame":"setTimeout"],t=Gt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function D$(n){const e=()=>{!function b$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,rw(n),n.isCheckStableRunning=!0,nw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),rw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function S$(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return KS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),QS(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return KS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),QS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,rw(n),nw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new M(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,T$,ZS,ZS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const T$={};function nw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function KS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QS(n){n._nesting--,nw(n)}class A${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bn,this.onMicrotaskEmpty=new Bn,this.onStable=new Bn,this.onError=new Bn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const YS=new Ce("",{providedIn:"root",factory:JS});function JS(){const n=Fe(Vt);let e=!0;return D(new ct(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ct(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(le()))}function Lo(n){return n instanceof Function?n():n}let iw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})();function Df(n){for(;n;){n[rt]|=64;const e=_f(n);if(xh(n)&&!e)return n;n=e}return null}const rR=new Ce("",{providedIn:"root",factory:()=>!1});let w_=null;function aR(n,e){return n[e]??lR()}function uR(n,e){const t=lR();t.producerNode?.length&&(n[e]=w_,t.lView=n,w_=cR())}const L$={...cm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Df(n.lView)},lView:null};function cR(){return Object.create(L$)}function lR(){return w_??=cR(),w_}const lt={};function Ke(n){dR(St(),ge(),kr()+n,!1)}function dR(n,e,t,r){if(!r)if(3==(3&e[rt])){const s=n.preOrderCheckHooks;null!==s&&ul(e,s,t)}else{const s=n.preOrderHooks;null!==s&&cl(e,s,0,t)}Oo(t)}function me(n,e=gt.Default){const t=ge();return null===t?Ee(n,e):Ne(hr(),t,Ze(n),e)}function C_(n,e,t,r,i,s,o,a,u,l,f){const m=e.blueprint.slice();return m[ln]=i,m[rt]=140|r,(null!==l||n&&2048&n[rt])&&(m[rt]|=2048),qh(m),m[dn]=m[Ys]=n,m[Fn]=t,m[_a]=o||n&&n[_a],m[it]=a||n&&n[it],m[is]=u||n&&n[is]||null,m[or]=s,m[Tu]=function WB(){return GB++}(),m[Wi]=f,m[Gc]=l,m[Vn]=2==e.type?n[Vn]:m,m}function Fl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function sw(n,e,t,r,i){const s=Mm(),o=Qh(),u=n.data[e]=function G$(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function to(){return null!==Je.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Nm(){return Je.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function No(){const n=Je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return us(s,!0),s}function Af(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function fR(n,e,t,r,i){const s=aR(e,bu),o=kr(),a=2&r;try{Oo(-1),a&&e.length>_t&&dR(n,e,_t,!1),os(a?2:0,i);const l=a?s:null,f=kh(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Au(l,f)}}finally{a&&null===e[bu]&&uR(e,bu),Oo(o),os(a?3:1,i)}}function ow(n,e,t){if(im(e)){const r=Oi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Oi(r)}}}function aw(n,e,t){Sm()&&(function X$(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;va(t)&&function o4(n,e,t){const r=Gr(e,n),i=pR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=T_(n,C_(n,i,null,o,r,e,null,n[_a].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||c(t,e),Zr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=Wr(e,n,a,t);Zr(l,e),null!==o&&a4(0,a-i,l,u,0,o),pi(u)&&(Or(t.index,e)[Fn]=Wr(e,n,a,t))}}(n,e,t,Gr(t,e)),64==(64&t.flags)&&vR(n,e,t))}function uw(n,e,t=Gr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function pR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=cw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cw(n,e,t,r,i,s,o,a,u,l,f){const m=_t+r,y=m+i,E=function B$(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:lt);return t}(m,y),A="function"==typeof l?l():l;return E[Me]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}let gR=n=>null;function mR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?_R(t,e,i,s):r.hasOwnProperty(i)&&_R(t,e,r[i],s)}return t}function _R(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Qi(n,e,t,r,i,s,o,a){const u=Gr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(pw(n,t,f,r,i),va(e)&&function K$(n,e){const t=Or(e,n);16&t[rt]||(t[rt]|=64)}(t,e.index)):3&e.type&&(r=function Z$(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function lw(n,e,t,r){if(Sm()){const i=null===r?null:{"":-1},s=function t4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(jc(e,o.selectors,!1))if(r||(r=[]),pi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),dw(n,e,a.length)}else r.unshift(o),dw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&yR(n,e,t,o,i,a),i&&function n4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new M(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ga(t.mergedAttrs,t.attrs)}function yR(n,e,t,r,i,s){for(let l=0;l<r.length;l++)T(c(t,e),n,r[l].type);!function i4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=Af(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=ga(t.mergedAttrs,f.hostAttrs),s4(n,t,e,u,f),r4(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function W$(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,A=y?y.outputs:null;u=mR(m.inputs,f,u,y?y.inputs:null),l=mR(m.outputs,f,l,A);const x=null===u||null===o||Ih(e)?null:u4(u,f,o);a.push(x)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function vR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Om(){return Je.lFrame.currentDirectiveIndex}();try{Oo(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Pu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&e4(u,l)}}finally{Oo(-1),Pu(o)}}function e4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function dw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function r4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pi(e)&&(t[""]=n)}}function s4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Mo(i.type)),o=new xu(s,pi(i),me);n.blueprint[r]=o,t[r]=o,function Y$(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function J$(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Af(n,t,i.hostVars,lt),i)}function ro(n,e,t,r,i,s){const o=Gr(n,e);!function hw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?W(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[it],o,s,n.value,t,r,i)}function a4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)IR(r,t,o[a++],o[a++],o[a++])}function IR(n,e,t,r,i){const s=Oi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Oi(s)}}function u4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function ER(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function wR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Xh(t[r]),o.contentQueries(2,e[s],s)}}}function T_(n,e){return n[Ao]?n[rm][fi]=e:n[Ao]=e,n[rm]=e,e}function fw(n,e,t){Xh(0);const r=Oi(null);try{e(n,t)}finally{Oi(r)}}function DR(n,e){const t=n[is],r=t?t.get(Vo,null):null;r&&r.handleError(e)}function pw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];IR(n.data[o],e[o],r,a,i)}}function c4(n,e){const t=Or(e,n),r=t[Me];!function l4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[ln];null!==i&&null===t[Wi]&&(t[Wi]=WE(i,t[is])),gw(r,t,t[Fn])}function gw(n,e,t){tf(e);try{const r=n.viewQuery;null!==r&&fw(1,r,t);const i=n.template;null!==i&&fR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wR(n,e),n.staticViewQueries&&fw(2,n.viewQuery,t);const s=n.components;null!==s&&function d4(n,e){for(let t=0;t<e.length;t++)c4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[rt]&=-5,rf()}}let AR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function BI(n,e,t){const r=Object.create(Bh);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Qc(r),run:()=>{if(r.dirty=!1,r.hasRun&&!dm(r))return;r.hasRun=!0;const o=kh(r);try{r.cleanupFn(),r.cleanupFn=ym,r.fn(i)}finally{Au(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:()=>new n})}return n})();function b_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=ir(i,a):2==s&&(r=ir(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Sf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Wt(s)),Nr(s)&&SR(s,r);const o=t.type;if(8&o)Sf(n,e,t.child,r);else if(32&o){const a=yE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=cS(e,t);if(Array.isArray(a))r.push(...a);else{const u=_f(e[Vn]);Sf(u[Me],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function SR(n,e){for(let t=dr;t<n.length;t++){const r=n[t],i=r[Me].firstChild;null!==i&&Sf(r[Me],r,i,e)}n[ss]!==n[ln]&&e.push(n[ss])}function D_(n,e,t,r=!0){const i=e[_a],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{RR(n,e,n.template,t)}catch(u){throw r&&DR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function RR(n,e,t,r){const i=e[rt];if(256!=(256&i)){e[_a].effectManager?.flush(),tf(e);try{qh(e),function sl(n){return Je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&fR(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&ul(e,l,null)}else{const l=n.preOrderHooks;null!==l&&cl(e,l,0,null),af(e,0)}if(function p4(n){for(let e=YA(n);null!==e;e=JA(e)){if(!e[Zc])continue;const t=e[Po];for(let r=0;r<t.length;r++){GI(t[r])}}}(e),PR(e,2),null!==n.contentQueries&&wR(n,e),o){const l=n.contentCheckHooks;null!==l&&ul(e,l)}else{const l=n.contentHooks;null!==l&&cl(e,l,1),af(e,1)}!function U$(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=aR(e,Ro);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Oo(~s);else{const o=s,a=t[++i],u=t[++i];JI(a,o),r.dirty=!1;const l=kh(r);try{u(2,e[o])}finally{Au(r,l)}}}}finally{null===e[Ro]&&uR(e,Ro),Oo(-1)}}(n,e);const a=n.components;null!==a&&xR(e,a,0);const u=n.viewQuery;if(null!==u&&fw(2,u,r),o){const l=n.viewCheckHooks;null!==l&&ul(e,l)}else{const l=n.viewHooks;null!==l&&cl(e,l,2),af(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[rt]&=-73,bm(e)}finally{rf()}}}function PR(n,e){for(let t=YA(n);null!==t;t=JA(t))for(let r=dr;r<t.length;r++)MR(t[r],e)}function g4(n,e,t){MR(Or(e,n),t)}function MR(n,e){if(!function zI(n){return 128==(128&n[rt])}(n))return;const t=n[Me],r=n[rt];if(80&r&&0===e||1024&r||2===e)RR(t,n,t.template,n[Fn]);else if(n[Cu]>0){PR(n,1);const i=t.components;null!==i&&xR(n,i,1)}}function xR(n,e,t){for(let r=0;r<e.length;r++)g4(n,e[r],t)}class Rf{get rootNodes(){const e=this._lView,t=e[Me];return Sf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return 256==(256&this._lView[rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[dn];if(Nr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(i_(e,r),Wm(t,r))}this._attachedToViewContainer=!1}IE(this._lView[Me],this._lView)}onDestroy(e){!function Dm(n,e){if(256==(256&n[rt]))throw new M(911,!1);null===n[Js]&&(n[Js]=[]),n[Js].push(e)}(this._lView,e)}markForCheck(){Df(this._cdRefInjectingView||this._lView)}detach(){this._lView[rt]&=-129}reattach(){this._lView[rt]|=128}detectChanges(){D_(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aj(n,e){vf(n,e,e[it],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e}}class m4 extends Rf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;D_(e[Me],e,e[Fn],!1)}checkNoChanges(){}get context(){return null}}class NR extends I_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new Pf(t,this.ngModule)}}function OR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class y4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kc(r);const i=this.injector.get(e,YE,r);return i!==YE||t===YE?i:this.parentInjector.get(e,t,r)}}class Pf extends US{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=OR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return OR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Hc(n){return n.map(bh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof fs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new y4(e,s):e,a=o.get(jS,null);if(null===a)throw new M(407,!1);const m={rendererFactory:a,sanitizer:o.get(g$,null),effectManager:o.get(AR,null),afterRenderEventManager:o.get(iw,null)},y=a.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",A=r?function j$(n,e,t,r){const s=r.get(rR,!1)||t===Zn.ShadowDom,o=n.selectRootElement(e,s);return function $$(n){gR(n)}(o),o}(y,r,this.componentDef.encapsulation,o):r_(y,E,function _4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E)),Z=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let B=null;null!==A&&(B=WE(A,o,!0));const Q=cw(0,null,null,1,0,null,null,null,null,null,null),ue=C_(null,Q,null,Z,null,null,m,y,o,null,B);let we,Le;tf(ue);try{const j=this.componentDef;let R,V=null;j.findHostDirectiveDefs?(R=[],V=new Map,j.findHostDirectiveDefs(j,R,V),R.push(j)):R=[j];const $=function I4(n,e){const t=n[Me],r=_t;return n[r]=e,Fl(t,r,2,"#host",null)}(ue,A),q=function E4(n,e,t,r,i,s,o){const a=i[Me];!function w4(n,e,t,r){for(const i of n)e.mergedAttrs=ga(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(b_(e,e.mergedAttrs,!0),null!==t&&fS(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=WE(e,i[is]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=C_(i,pR(t),null,f,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&dw(a,n,r.length-1),T_(i,m),i[n.index]=m}($,A,j,R,ue,m,y);Le=Tm(Q,_t),A&&function T4(n,e,t,r){if(r)Vc(n,t,["ng-version",QE.full]);else{const{attrs:i,classes:s}=function Dh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!hi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Vc(n,t,i),s&&s.length>0&&hS(n,t,s.join(" "))}}(y,j,A,r),void 0!==t&&function b4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Le,this.ngContentSelectors,t),we=function C4(n,e,t,r,i,s){const o=hr(),a=i[Me],u=Gr(o,i);yR(a,i,o,t,null,r);for(let f=0;f<t.length;f++)Zr(Wr(i,a,o.directiveStart+f,o),i);vR(a,i,o),u&&Zr(u,i);const l=Wr(i,a,o.directiveStart+o.componentOffset,o);if(n[Fn]=i[Fn]=l,null!==s)for(const f of s)f(l,e);return ow(a,o,n),l}(q,j,R,V,ue,[D4]),gw(Q,ue,null)}finally{rf()}return new v4(this.componentType,we,xl(Le,ue),ue,Le)}}class v4 extends c${constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new m4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;pw(s[Me],s,i,e,t),this.previousInputValues.set(e,t),Df(Or(this._tNode.index,s))}}get injector(){return new gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function D4(){const n=hr();al(ge()[Me],n)}function Yt(n){let e=function kR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(pi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=A_(n.inputs),o.inputTransforms=A_(n.inputTransforms),o.declaredInputs=A_(n.declaredInputs),o.outputs=A_(n.outputs);const a=i.hostBindings;a&&P4(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&S4(n,u),l&&R4(n,l),Bt(n.inputs,i.inputs),Bt(n.declaredInputs,i.declaredInputs),Bt(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Bt(o.inputTransforms,i.inputTransforms)),pi(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Yt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function A4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ga(i.hostAttrs,t=ga(t,i.hostAttrs))}}(r)}function A_(n){return n===Mr?{}:n===Ct?[]:n}function S4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function R4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function P4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function S_(n){return!!mw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function mw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Qr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function so(n,e,t,r){const i=ge();return Qr(i,Da(),e)&&(St(),ro(In(),i,n,e,t,r)),so}function Ll(n,e,t,r){return Qr(n,Da(),t)?e+W(t)+r:lt}function _r(n,e,t,r,i,s,o,a){const u=ge(),l=St(),f=n+_t,m=l.firstCreatePass?function tH(n,e,t,r,i,s,o,a,u){const l=e.consts,f=Fl(e,n,4,o||null,as(l,a));lw(e,t,f,as(l,u)),al(e,f);const m=f.tView=cw(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,s,o):l.data[f];us(m,!1);const y=JR(l,u,m,n);ol()&&o_(l,u,y,m),Zr(y,u),T_(u,u[f]=ER(y,u,y,m)),Mh(m)&&aw(l,u,m),null!=o&&uw(u,m,a)}let JR=function XR(n,e,t,r){return Rs(!0),e[it].createComment("")};function Rt(n,e,t){const r=ge();return Qr(r,Da(),e)&&Qi(St(),In(),r,n,e,r[it],t,!1),Rt}function ww(n,e,t,r,i){const o=i?"class":"style";pw(n,t,e.inputs[o],o,r)}function ie(n,e,t,r){const i=ge(),s=St(),o=_t+n,a=i[it],u=s.firstCreatePass?function oH(n,e,t,r,i,s){const o=e.consts,u=Fl(e,n,2,r,as(o,i));return lw(e,t,u,as(o,s)),null!==u.attrs&&b_(u,u.attrs,!1),null!==u.mergedAttrs&&b_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=eP(s,i,u,a,e,n);i[o]=l;const f=Mh(u);return us(u,!0),fS(a,l,u),32!=(32&u.flags)&&ol()&&o_(s,i,l,u),0===function WI(){return Je.lFrame.elementDepthCount}()&&Zr(l,i),function Su(){Je.lFrame.elementDepthCount++}(),f&&(aw(s,i,u),ow(s,u,i)),null!==r&&uw(i,u),ie}function H(){let n=hr();Qh()?Ru():(n=n.parent,us(n,!1));const e=n;(function Wh(n){return Je.skipHydrationRootTNode===n})(e)&&function Pm(){Je.skipHydrationRootTNode=null}(),function ZI(){Je.lFrame.elementDepthCount--}();const t=St();return t.firstCreatePass&&(al(t,n),im(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function DA(n){return 0!=(8&n.flags)}(e)&&ww(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function uf(n){return 0!=(16&n.flags)}(e)&&ww(t,e,ge(),e.stylesWithoutHost,!1),H}function Ge(n,e,t,r){return ie(n,e,t,r),H(),Ge}let eP=(n,e,t,r,i,s)=>(Rs(!0),r_(r,i,function Um(){return Je.lFrame.currentNamespace}()));function Gl(n,e,t){const r=ge(),i=St(),s=n+_t,o=i.firstCreatePass?function cH(n,e,t,r,i){const s=e.consts,o=as(s,r),a=Fl(e,n,8,"ng-container",o);return null!==o&&b_(a,o,!0),lw(e,t,a,as(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];us(o,!0);const a=nP(i,r,o,n);return r[s]=a,ol()&&o_(i,r,a,o),Zr(a,r),Mh(o)&&(aw(i,r,o),ow(i,o,r)),null!=t&&uw(r,o),Gl}function Wl(){let n=hr();const e=St();return Qh()?Ru():(n=n.parent,us(n,!1)),e.firstCreatePass&&(al(e,n),im(n)&&e.queries.elementEnd(n)),Wl}let nP=(n,e,t,r)=>(Rs(!0),vE(e[it],""));function kf(n){return!!n&&"function"==typeof n.then}function rP(n){return!!n&&"function"==typeof n.subscribe}function Jn(n,e,t,r){const i=ge(),s=St(),o=hr();return function sP(n,e,t,r,i,s,o){const a=Mh(r),l=n.firstCreatePass&&function TR(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Fn],m=function CR(n){return n[ma]||(n[ma]=[])}(e);let y=!0;if(3&r.type||o){const x=Gr(r,e),k=o?o(x):x,Z=m.length,B=o?ue=>o(Wt(ue[r.index])):r.index;let Q=null;if(!o&&a&&(Q=function fH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ma],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Q)(Q.__ngLastListenerFn__||Q).__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,y=!1;else{s=aP(r,e,f,s,!1);const ue=t.listen(k,i,s);m.push(s,ue),l&&l.push(i,B,Z,Z+1)}}else s=aP(r,e,f,s,!1);const E=r.outputs;let A;if(y&&null!==E&&(A=E[i])){const x=A.length;if(x)for(let k=0;k<x;k+=2){const we=e[A[k]][A[k+1]].subscribe(s),Le=m.length;m.push(s,we),l&&l.push(i,r.index,Le,-(Le+1))}}}(s,i,i[it],o,n,e,r),Jn}function oP(n,e,t,r){try{return os(6,e,t),!1!==t(r)}catch(i){return DR(n,i),!1}finally{os(7,e,t)}}function aP(n,e,t,r,i){return function s(o){if(o===Function)return r;Df(n.componentOffset>-1?Or(n.index,e):e);let u=oP(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=oP(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Bo(n=1){return function XI(n){return(Je.lFrame.contextLView=function eE(n,e){for(;n>0;)e=e[Ys],n--;return e}(n,Je.lFrame.contextLView))[Fn]}(n)}function N_(n,e,t){return O_(n,"",e,"",t),N_}function O_(n,e,t,r,i){const s=ge(),o=Ll(s,e,t,r);return o!==lt&&Qi(St(),In(),s,n,o,s[it],i,!1),O_}function k_(n,e){return n<<17|e<<2}function ka(n){return n>>17&32767}function Cw(n){return 2|n}function Uu(n){return(131068&n)>>2}function Tw(n,e){return-131069&n|e<<2}function bw(n){return 1|n}function mP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?ka(s):Uu(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];wH(n[a],e)&&(u=!0,n[a+1]=r?bw(f):Cw(f)),a=r?ka(f):Uu(f)}u&&(n[t+1]=r?Cw(s):bw(s))}function wH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&El(n,e)>=0}function Ff(n,e,t){return Ms(n,e,t,!1),Ff}function F_(n,e){return Ms(n,e,null,!0),F_}function Ms(n,e,t,r){const i=ge(),s=St(),o=function ls(n){const e=Je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function TP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[kr()],o=function CP(n,e){return e>=n.expandoStartIndex}(n,t);(function SP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function MH(n,e,t,r){const i=function Jh(n){const e=Je.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Vf(t=Dw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Dw(i,n,e,t,r),null===s){let u=function xH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Uu(r))return n[ka(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Dw(null,n,e,u[1],r),u=Vf(u,e.attrs,r),function NH(n,e,t,r){n[ka(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function OH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Vf(r,n[s].hostAttrs,t);return Vf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function IH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ka(o),u=Uu(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||El(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const y=ka(n[a+1]);n[r+1]=k_(y,a),0!==y&&(n[y+1]=Tw(n[y+1],r)),n[a+1]=function yH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=k_(a,0),0!==a&&(n[a+1]=Tw(n[a+1],r)),a=r;else n[r+1]=k_(u,0),0===a?a=r:n[u+1]=Tw(n[u+1],r),u=r;l&&(n[r+1]=Cw(n[r+1])),mP(n,f,r,!0),mP(n,f,r,!1),function EH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&El(s,e)>=0&&(t[r+1]=bw(t[r+1]))}(e,f,n,r,s),o=k_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==lt&&Qr(i,o,e)&&function DP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function vH(n){return 1==(1&n)}(l)?AP(u,e,t,i,Uu(l),o):void 0;V_(f)||(V_(s)||function _H(n){return 2==(2&n)}(l)&&(s=AP(u,null,t,i,a,o)),function _j(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ma.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ma.Important),n.setStyle(t,r,i,s))}}(r,o,ba(kr(),t),i,s))}(s,s.data[kr()],i,i[it],n,i[o+1]=function LH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=je(xa(n)))),n}(e,t),r,o)}function Dw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Vf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Vf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Zi(n,o,!!t||e[++s]))}return void 0===n?null:n}function AP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,m=null===f;let y=t[i+1];y===lt&&(y=m?Ct:void 0);let E=m?cE(y,r):f===r?y:void 0;if(l&&!V_(E)&&(E=cE(u,r)),V_(E)&&(a=E,o))return a;const A=n[i+1];i=o?ka(A):Uu(A)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=cE(u,r))}return a}function V_(n){return void 0!==n}function ce(n,e=""){const t=ge(),r=St(),i=n+_t,s=r.firstCreatePass?Fl(r,i,1,e,null):r.data[i],o=RP(r,t,s,e,n);t[i]=o,ol()&&o_(r,t,o,s),us(s,!1)}let RP=(n,e,t,r,i)=>(Rs(!0),function n_(n,e){return n.createText(e)}(e[it],r));function gi(n){return jo("",n,""),gi}function jo(n,e,t){const r=ge(),i=Ll(r,n,e,t);return i!==lt&&function Uo(n,e,t){const r=ba(e,n);!function eS(n,e,t){n.setValue(e,t)}(n[it],r,t)}(r,kr(),i),jo}const Ql="en-US";let YP=Ql;function Rw(n,e,t,r,i){if(n=Ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)Rw(n[s],e,t,r,i);else{const s=St(),o=ge(),a=hr();let u=Vu(n)?n:Ze(n.provide);const l=NS(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Vu(n)||!n.multi){const E=new xu(l,i,me),A=Mw(u,e,i?f:f+y,m);-1===A?(T(c(a,o),s,u),Pw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[A]=E,o[A]=E)}else{const E=Mw(u,e,f+y,m),A=Mw(u,e,f,f+y),k=A>=0&&t[A];if(i&&!k||!i&&!(E>=0&&t[E])){T(c(a,o),s,u);const Z=function s3(n,e,t,r,i){const s=new xu(n,t,me);return s.multi=[],s.index=e,s.componentProviders=0,wM(s,i,r&&!t),s}(i?i3:r3,t.length,i,r,l);!i&&k&&(t[A].providerFactory=Z),Pw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(Z),o.push(Z)}else Pw(s,n,E>-1?E:A,wM(t[i?A:E],l,!i&&r));!i&&r&&k&&t[A].componentProviders++}}}function Pw(n,e,t,r){const i=Vu(e),s=function Gj(n){return!!n.useClass}(e);if(i||s){const u=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function wM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Mw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function r3(n,e,t,r){return xw(this.multi,[])}function i3(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Wr(t,t[Me],this.providerFactory.index,r);s=a.slice(0,o),xw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],xw(i,s);return s}function xw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Sn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function n3(n,e,t){const r=St();if(r.firstCreatePass){const i=pi(n);Rw(t,r.data,r.blueprint,i,!0),Rw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class ju{}class CM{}class Nw extends ju{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NR(this);const i=xr(e);this._bootstrapComponents=Lo(i.bootstrap),this._r3Injector=GS(e,t,[{provide:ju,useValue:this},{provide:I_,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ow extends CM{constructor(e){super(),this.moduleType=e}create(e){return new Nw(this.moduleType,e,[])}}class TM extends ju{constructor(e){super(),this.componentFactoryResolver=new NR(this),this.instance=null;const t=new Sl([...e.providers,{provide:ju,useValue:this},{provide:I_,useValue:this.componentFactoryResolver}],e.parent||f_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function kw(n,e,t=null){return new TM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let u3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=RS(0,t.type),i=r.length>0?kw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=$e({token:n,providedIn:"environment",factory:()=>new n(Ee(fs))})}return n})();function bM(n){n.getStandaloneInjector=e=>e.get(u3).getOrCreateStandaloneInjector(n)}function Hf(n,e,t,r){return xM(ge(),fr(),n,e,t,r)}function xM(n,e,t,r,i,s){const o=e+t;return Qr(n,o,i)?function io(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function zf(n,e){const t=n[e];return t===lt?void 0:t}(n,o+1)}function $u(n,e){const t=St();let r;const i=n+_t;t.firstCreatePass?(r=function D3(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Mo(r.type)),a=Hr(me);try{const u=fl(!1),l=s();return fl(u),function iH(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,ge(),i,l),l}finally{Hr(a)}}function Hu(n,e,t){const r=n+_t,i=ge(),s=function Fi(n,e){return n[e]}(i,r);return function qf(n,e){return n[Me].data[e].pure}(i,r)?xM(i,fr(),e,s.transform,t,s):s.transform(t)}function N3(n,e,t,r=!0){const i=e[Me];if(function cj(n,e,t,r){const i=dr+r,s=t.length;r>0&&(t[i-1][fi]=e),r<s-dr?(e[fi]=t[i],PA(t,dr+r,e)):(t.push(e),e[fi]=null),e[dn]=t;const o=e[So];null!==o&&t!==o&&function lj(n,e){const t=n[Po];e[Vn]!==e[dn][dn][Vn]&&(n[Zc]=!0),null===t?n[Po]=[e]:t.push(e)}(o,e);const a=e[Ni];null!==a&&a.insertView(n),e[rt]|=128}(i,e,n,t),r){const s=TE(t,n),o=e[it],a=s_(o,n[ss]);null!==a&&function oj(n,e,t,r,i,s){r[ln]=i,r[or]=e,vf(n,r,t,1,i,s)}(i,n[or],o,e,a,s)}}Symbol;let $o=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=F3}return n})();const O3=$o,k3=class extends O3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function x3(n,e,t,r){const i=e.tView,a=C_(n,i,t,4096&n[rt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[So]=n[e.index];const l=n[Ni];return null!==l&&(a[Ni]=l.createEmbeddedView(i)),gw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Rf(i)}};function F3(){return function $_(n,e){return 4&n.type?new k3(e,n,xl(n,e)):null}(hr(),ge())}let Ns=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=$3}return n})();function $3(){return function HM(n,e){let t;const r=e[n.index];return Nr(r)?t=r:(t=ER(r,e,null,n),e[n.index]=t,T_(e,t)),zM(t,e,n,r),new jM(t,n,e)}(hr(),ge())}const H3=Ns,jM=class extends H3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return xl(this._hostTNode,this._hostLView)}get injector(){return new gr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(hl(e)){const t=Ou(e,this._hostLView),r=Aa(e);return new gr(t[Me].data[r+8],t)}return new gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=$M(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function ff(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const x=t||{};a=x.index,r=x.injector,i=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const u=o?e:new Pf(Tt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const k=(o?l:this.parentInjector).get(fs,null);k&&(s=k)}Tt(u.componentType??{});const E=u.create(l,i,null,s);return this.insertImpl(E.hostView,a,false),E}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function qI(n){return Nr(n[dn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[dn],f=new jM(l,l[or],l[dn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return N3(a,i,o,!r),e.attachToViewContainerRef(),PA(Lw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=$M(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=i_(this._lContainer,t);r&&(Wm(Lw(this._lContainer),t),IE(r[Me],r))}detach(e){const t=this._adjustIndex(e,-1),r=i_(this._lContainer,t);return r&&null!=Wm(Lw(this._lContainer),t)?new Rf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function $M(n){return n[8]}function Lw(n){return n[8]||(n[8]=[])}let zM=function qM(n,e,t,r){if(n[ss])return;let i;i=8&t.type?Wt(r):function z3(n,e){const t=n[it],r=t.createComment(""),i=Gr(e,n);return Fu(t,s_(t,i),r,function pj(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ss]=i};const Kw=new Ce("Application Initializer");let Qw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(Kw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(kf(s))t.push(s);else if(rP(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Ho=new Ce("LocaleId",{providedIn:"root",factory:()=>Fe(Ho,gt.Optional|gt.SkipSelf)||function Eq(){return typeof $localize<"u"&&$localize.locale||Ql}()});let _x=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Tq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let yx=(()=>{class n{compileModuleSync(t){return new Ow(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Lo(xr(t).declarations).reduce((o,a)=>{const u=Tt(a);return u&&o.push(new Pf(u)),o},[]);return new Tq(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wx=new Ce(""),G_=new Ce("");let tC,Xw=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tC||(function Gq(n){tC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(Vt),Ee(eC),Ee(G_))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),eC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return tC?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Fa=null;const Cx=new Ce("AllowMultipleToken"),nC=new Ce("PlatformDestroyListeners"),rC=new Ce("appBootstrapListener");class bx{constructor(e,t){this.name=e,this.token=t}}function Ax(n,e,t=[]){const r=`Platform: ${e}`,i=new Ce(r);return(s=[])=>{let o=iC();if(!o||o.injector.get(Cx,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Kq(n){if(Fa&&!Fa.get(Cx,!1))throw new M(400,!1);(function Tx(){!function kI(n){Jc=n}(()=>{throw new M(600,!1)})})(),Fa=n;const e=n.get(Rx);(function Dx(n){n.get(OS,null)?.forEach(t=>t())})(n)}(function Sx(n=[],e){return Kr.create({name:e,providers:[{provide:FE,useValue:"platform"},{provide:nC,useValue:new Set([()=>Fa=null])},...n]})}(a,r))}return function Yq(n){const e=iC();if(!e)throw new M(401,!1);return e}()}}function iC(){return Fa?.get(Rx)??null}let Rx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Jq(n="zone.js",e){return"noop"===n?new A$:"zone.js"===n?new Vt(e):n}(r?.ngZone,function Px(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function a3(n,e,t){return new Nw(n,e,t)}(t.moduleType,this.injector,function kx(n){return[{provide:Vt,useFactory:n},{provide:Cf,multi:!0,useFactory:()=>{const e=Fe(eG,{optional:!0});return()=>e.initialize()}},{provide:Ox,useFactory:Xq},{provide:YS,useFactory:JS}]}(()=>i)),o=s.injector.get(Vo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{W_(this._modules,s),a.unsubscribe()})}),function Mx(n,e,t){try{const r=t();return kf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Qw);return a.runInitializers(),a.donePromise.then(()=>(function JP(n){Mi(n,"Expected localeId to be defined"),"string"==typeof n&&(YP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Ho,Ql)||Ql),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=xx({},r);return function Wq(n,e,t){const r=new Ow(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Xl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new M(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new M(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(nC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(Kr))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function xx(n,e){return Array.isArray(e)?e.reduce(xx,n):{...n,...e}}let Xl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(Ox),this.zoneIsStable=Fe(YS),this.componentTypes=[],this.components=[],this.isStable=Fe(_x).hasPendingTasks.pipe(ke(t=>t?O(!1):this.zoneIsStable),Xe(),le()),this._injector=Fe(fs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof US;if(!this._injector.get(Qw).done)throw!i&&function Qs(n){const e=Tt(n)||Yn(n)||sr(n);return null!==e&&e.standalone}(t),new M(405,!1);let o;o=i?t:this._injector.get(I_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Zq(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ju),l=o.create(Kr.NULL,[],r||o.selector,a),f=l.location.nativeElement,m=l.injector.get(wx,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),W_(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;W_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(rC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>W_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new M(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function W_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ox=new Ce("",{providedIn:"root",factory:()=>Fe(Vo).handleError.bind(void 0)});function Xq(){const n=Fe(Vt),e=Fe(Vo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let eG=(()=>{class n{constructor(){this.zone=Fe(Vt),this.applicationRef=Fe(Xl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Z_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=nG}return n})();function nG(n){return function rG(n,e,t){if(va(n)&&!t){const r=Or(n.index,e);return new Rf(r,r)}return 47&n.type?new Rf(e[Vn],e):null}(hr(),ge(),16==(16&n))}class Bx{constructor(){}supports(e){return S_(e)}create(e){return new cG(e)}}const uG=(n,e)=>e;class cG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||uG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<$x(r,i,s)?t:r,a=$x(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){const E=y<s.length?s[y]:s[y]=0,A=E+y;f<=A&&A<l&&(s[y]=E+1)}s[o.previousIndex]=f-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!S_(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function V4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new lG(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new jx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class lG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class jx{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new dG,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $x(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Hx{constructor(){}supports(e){return e instanceof Map||mw(e)}create(){return new hG}}class hG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||mw(e)))throw new M(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new fG(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class fG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zx(){return new Y_([new Bx])}let Y_=(()=>{class n{static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:zx});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||zx()),deps:[[n,new Km,new Fr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new M(901,!1)}}return n})();function qx(){return new Zf([new Hx])}let Zf=(()=>{class n{static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:qx});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||qx()),deps:[[n,new Km,new Fr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new M(901,!1)}}return n})();const mG=Ax(null,"core",[]);let _G=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(Xl))};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({})}return n})();function ed(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let lC=null;function Va(){return lC}class MG{}const gs=new Ce("DocumentToken");let dC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return Fe(NG)},providedIn:"platform"})}return n})();const xG=new Ce("Location Initialized");let NG=(()=>{class n extends dC{constructor(){super(),this._doc=Fe(gs),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Va().getBaseHref(this._doc)}onPopState(t){const r=Va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Va().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function hC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function e1(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function zo(n){return n&&"?"!==n[0]?"?"+n:n}let qu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return Fe(n1)},providedIn:"root"})}return n})();const t1=new Ce("appBaseHref");let n1=(()=>{class n extends qu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(gs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return hC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+zo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+zo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+zo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(dC),Ee(t1,8))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OG=(()=>{class n extends qu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=hC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+zo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+zo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(dC),Ee(t1,8))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})(),fC=(()=>{class n{constructor(t){this._subject=new Bn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function VG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(e1(r1(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+zo(r))}normalize(t){return n.stripTrailingSlash(function FG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,r1(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+zo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=zo;static#t=this.joinWithSlash=hC;static#n=this.stripTrailingSlash=e1;static#r=this.\u0275fac=function(r){return new(r||n)(Ee(qu))};static#i=this.\u0275prov=$e({token:n,factory:function(){return function kG(){return new fC(Ee(qu))}()},providedIn:"root"})}return n})();function r1(n){return n.replace(/\/index.html$/,"")}const CC=/\s+/,h1=[];let f1=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=h1,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(CC):h1}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(CC):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(CC).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(me(Y_),me(Zf),me(Ki),me(Fo))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class C9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yf=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new C9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),g1(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{g1(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(me(Ns),me($o),me(Y_))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function g1(n,e){n.context.$implicit=e.item}let La=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new T9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(me(Ns),me($o))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class T9{constructor(){this.$implicit=null,this.ngIf=null}}function m1(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${je(e)}'.`)}class A9{createSubscription(e,t){return _m(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){_m(()=>e.unsubscribe())}}class S9{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const R9=new S9,P9=new A9;let cy=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(kf(t))return R9;if(rP(t))return P9;throw function ks(n,e){return new M(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(me(Z_,16))};static#t=this.\u0275pipe=Qn({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Z9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({})}return n})();function ly(n){return"server"===n}let J9=(()=>{class n{static#e=this.\u0275prov=$e({token:n,providedIn:"root",factory:()=>new X9(Ee(gs),window)})}return n})();class X9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function e6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class T6 extends MG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class PC extends T6{static makeCurrent(){!function PG(n){lC||(lC=n)}(new PC)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function b6(){return Xf=Xf||document.querySelector("base"),Xf?Xf.getAttribute("href"):null}();return null==t?null:function D6(n){fy=fy||document.createElement("a"),fy.setAttribute("href",n);const e=fy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function E9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let fy,Xf=null,S6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();const MC=new Ce("EventManagerPlugins");let T1=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(MC),Ee(Vt))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();class b1{constructor(e){this._doc=e}}const xC="ng-app-id";let D1=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ly(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${xC}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(xC),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(xC,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(gs),Ee(p_),Ee(kS,8),Ee(Ps))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();const NC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},OC=/%COMP%/g,x6=new Ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function S1(n,e){return e.map(t=>t.replace(OC,n))}let R1=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ly(a),this.defaultRenderer=new kC(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zn.ShadowDom&&(r={...r,encapsulation:Zn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof M1?i.applyToHost(t):i instanceof FC&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Zn.Emulated:s=new M1(u,l,r,this.appId,f,o,a,m);break;case Zn.ShadowDom:return new F6(u,l,t,r,o,a,this.nonce,m);default:s=new FC(u,l,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(T1),Ee(D1),Ee(p_),Ee(x6),Ee(gs),Ee(Ps),Ee(Vt),Ee(kS))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();class kC{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(NC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(P1(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(P1(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=NC[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=NC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ma.DashCase|Ma.Important)?e.style.setProperty(t,r,i&Ma.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ma.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Va().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function P1(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class F6 extends kC{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=S1(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FC extends kC{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?S1(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class M1 extends FC{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function N6(n){return"_ngcontent-%COMP%".replace(OC,n)}(l),this.hostAttr=function O6(n){return"_nghost-%COMP%".replace(OC,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let V6=(()=>{class n extends b1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(gs))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();const x1=["alt","control","meta","shift"],L6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},U6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let B6=(()=>{class n extends b1{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Va().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),x1.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=L6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),x1.forEach(o=>{o!==i&&(0,U6[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(gs))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();const z6=Ax(mG,"browser",[{provide:Ps,useValue:"browser"},{provide:OS,useValue:function j6(){PC.makeCurrent()},multi:!0},{provide:gs,useFactory:function H6(){return function wj(n){AE=n}(document),document},deps:[]}]),q6=new Ce(""),k1=[{provide:G_,useClass:class A6{addToWindow(e){Gt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new M(5103,!1);return s},Gt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gt.getAllAngularRootElements=()=>e.getAllRootElements(),Gt.frameworkStabilizers||(Gt.frameworkStabilizers=[]),Gt.frameworkStabilizers.push(r=>{const i=Gt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Va().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:wx,useClass:Xw,deps:[Vt,eC,G_]},{provide:Xw,useClass:Xw,deps:[Vt,eC,G_]}],F1=[{provide:FE,useValue:"root"},{provide:Vo,useFactory:function $6(){return new Vo},deps:[]},{provide:MC,useClass:V6,multi:!0,deps:[gs,Vt,Ps]},{provide:MC,useClass:B6,multi:!0,deps:[gs]},R1,D1,T1,{provide:jS,useExisting:R1},{provide:class t6{},useClass:S6,deps:[]},[]];let G6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(q6,12))};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({providers:[...F1,...k1],imports:[Z9,_G]})}return n})(),V1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(gs))};static#t=this.\u0275prov=$e({token:n,factory:function(r){let i=null;return i=r?new r:function Z6(){return new V1(Ee(gs))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:e5}=Array,{getPrototypeOf:t5,prototype:n5,keys:r5}=Object;function j1(n){if(1===n.length){const e=n[0];if(e5(e))return{args:e,keys:null};if(function i5(n){return n&&"object"==typeof n&&t5(n)===n5}(e)){const t=r5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:s5}=Array;function $1(n){return xe(e=>function o5(n,e){return s5(e)?n(...e):n(e)}(n,e))}function H1(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function LC(...n){const e=kn(n),t=Ts(n),{args:r,keys:i}=j1(n);if(0===r.length)return C([],e);const s=new ct(function a5(n,e,t=_n){return r=>{z1(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)z1(e,()=>{const l=C(n[u],e);let f=!1;l.subscribe(Re(r,m=>{s[u]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>H1(i,o):_n));return t?s.pipe($1(t)):s}function z1(n,e,t){n?yn(t,n,e):e()}const py=Te(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function UC(...n){return function u5(){return wr(1)}()(C(n,kn(n)))}function q1(n){return new ct(e=>{kt(n()).subscribe(e)})}function ep(n,e){const t=S(n)?n:()=>n,r=i=>i.error(t());return new ct(e?i=>e.schedule(r,0,i):r)}function BC(){return ne((n,e)=>{let t=null;n._refCount++;const r=Re(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class G1 extends ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,de(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;const t=this.getSubject();e.add(this.source.subscribe(Re(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return BC()(this)}}function nd(n){return n<=0?()=>On:ne((e,t)=>{let r=0;e.subscribe(Re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function gy(...n){const e=kn(n);return ne((t,r)=>{(e?UC(n,t,e):UC(n,t)).subscribe(r)})}function Fs(n,e){return ne((t,r)=>{let i=0;t.subscribe(Re(r,s=>n.call(e,s,i++)&&r.next(s)))})}function my(n){return ne((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function W1(n=c5){return ne((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function c5(){return new py}function Ba(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fs((i,s)=>n(i,s,r)):_n,nd(1),t?my(e):W1(()=>new py))}function tp(n,e){return S(e)?tn(n,e,1):tn(n,1)}function Vr(n,e,t){const r=S(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Re(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):_n}function Gu(n){return ne((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Re(t,void 0,void 0,o=>{s=kt(n(o,Gu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function _y(n,e){return ne(function l5(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Re(o,f=>{const m=l++;u=a?n(u,f,m):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function jC(n){return n<=0?()=>On:ne((e,t)=>{let r=[];e.subscribe(Re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yy(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ht="primary",np=Symbol("RouteTitle");class p5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function rd(n){return new p5(n)}function g5(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function uo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Z1(n[i],e[i]))return!1;return!0}function Z1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function K1(n){return n.length>0?n[n.length-1]:null}function ja(n){return function X6(n){return!!n&&(n instanceof ct||S(n.lift)&&S(n.subscribe))}(n)?n:kf(n)?C(Promise.resolve(n)):O(n)}const _5={exact:function J1(n,e,t){if(!Wu(n.segments,e.segments)||!vy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!J1(n.children[r],e.children[r],t))return!1;return!0},subset:X1},Q1={exact:function y5(n,e){return uo(n,e)},subset:function v5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Z1(n[t],e[t]))},ignored:()=>!0};function Y1(n,e,t){return _5[t.paths](n.root,e.root,t.matrixParams)&&Q1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function X1(n,e,t){return eN(n,e,e.segments,t)}function eN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Wu(i,t)||e.hasChildren()||!vy(i,t,r))}if(n.segments.length===t.length){if(!Wu(n.segments,t)||!vy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!X1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Wu(n.segments,i)&&vy(n.segments,i,r)&&n.children[ht])&&eN(n.children[ht],e,s,r)}}function vy(n,e,t){return e.every((r,i)=>Q1[t](n[i].parameters,r.parameters))}class id{constructor(e=new Jt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rd(this.queryParams)),this._queryParamMap}toString(){return w5.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iy(this)}}class rp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=rd(this.parameters)),this._parameterMap}toString(){return rN(this)}}function Wu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ip=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return new $C},providedIn:"root"})}return n})();class $C{parse(e){const t=new N5(e);return new id(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sp(e.root,!0)}`,r=function b5(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ey(t)}=${Ey(i)}`).join("&"):`${Ey(t)}=${Ey(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function C5(n){return encodeURI(n)}(e.fragment)}`:""}`}}const w5=new $C;function Iy(n){return n.segments.map(e=>rN(e)).join("/")}function sp(n,e){if(!n.hasChildren())return Iy(n);if(e){const t=n.children[ht]?sp(n.children[ht],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ht&&r.push(`${i}:${sp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function E5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ht&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ht&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ht?[sp(n.children[ht],!1)]:[`${i}:${sp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ht]?`${Iy(n)}/${t[0]}`:`${Iy(n)}/(${t.join("//")})`}}function tN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ey(n){return tN(n).replace(/%3B/gi,";")}function HC(n){return tN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wy(n){return decodeURIComponent(n)}function nN(n){return wy(n.replace(/\+/g,"%20"))}function rN(n){return`${HC(n.path)}${function T5(n){return Object.keys(n).map(e=>`;${HC(e)}=${HC(n[e])}`).join("")}(n.parameters)}`}const D5=/^[^\/()?;#]+/;function zC(n){const e=n.match(D5);return e?e[0]:""}const A5=/^[^\/()?;=#]+/,R5=/^[^=?&#]+/,M5=/^[^&#]+/;class N5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ht]=new Jt(e,t)),r}parseSegment(){const e=zC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new rp(wy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function S5(n){const e=n.match(A5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=zC(this.remaining);i&&(r=i,this.capture(r))}e[wy(t)]=wy(r)}parseQueryParam(e){const t=function P5(n){const e=n.match(R5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function x5(n){const e=n.match(M5);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=nN(t),s=nN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=zC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ht);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ht]:new Jt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}}function iN(n){return n.segments.length>0?new Jt([],{[ht]:n}):n}function sN(n){const e={};for(const r of Object.keys(n.children)){const s=sN(n.children[r]);if(r===ht&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function O5(n){if(1===n.numberOfChildren&&n.children[ht]){const e=n.children[ht];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}function Zu(n){return n instanceof id}function oN(n){let e;const i=iN(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new Jt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function aN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return qC(i,i,i,t,r);const s=function F5(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new cN(t,e,r)}(e);if(s.toRoot())return qC(i,i,new Jt([],{}),t,r);const o=function V5(n,e,t){if(n.isAbsolute)return new Ty(e,!0,0);if(!t)return new Ty(e,!1,NaN);if(null===t.parent)return new Ty(t,!0,0);const r=Cy(n.commands[0])?0:1;return function L5(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Ty(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?ap(o.segmentGroup,o.index,s.commands):lN(o.segmentGroup,o.index,s.commands);return qC(i,o.segmentGroup,a,t,r)}function Cy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function op(n){return"object"==typeof n&&null!=n&&n.outlets}function qC(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:uN(n,e,t);const a=iN(sN(o));return new id(a,s,i)}function uN(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:uN(s,e,t)}),new Jt(n.segments,r)}class cN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cy(r[0]))throw new M(4003,!1);const i=r.find(op);if(i&&i!==K1(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ty{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lN(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return ap(n,e,t);const r=function B5(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(op(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!hN(u,l,o))return s;r+=2}else{if(!hN(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Jt(n.segments.slice(0,r.pathIndex),{});return s.children[ht]=new Jt(n.segments.slice(r.pathIndex),n.children),ap(s,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?GC(n,e,t):r.match?ap(n,0,i):GC(n,e,t)}function ap(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function U5(n){return op(n[0])?n[0].outlets:{[ht]:n}}(t),i={};if(Object.keys(r).some(s=>s!==ht)&&n.children[ht]&&1===n.numberOfChildren&&0===n.children[ht].segments.length){const s=ap(n.children[ht],e,t);return new Jt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=lN(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Jt(n.segments,i)}}function GC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(op(s)){const u=j5(s.outlets);return new Jt(r,u)}if(0===i&&Cy(t[0])){r.push(new rp(n.segments[e].path,dN(t[0]))),i++;continue}const o=op(s)?s.outlets[ht]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Cy(a)?(r.push(new rp(o,dN(a))),i+=2):(r.push(new rp(o,{})),i++)}return new Jt(r,{})}function j5(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=GC(new Jt([],{}),0,r))}),e}function dN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hN(n,e,t){return n==t.path&&uo(e,t.parameters)}const up="imperative";class co{constructor(e,t){this.id=e,this.url=t}}class by extends co{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $a extends co{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cp extends co{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sd extends co{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Dy extends co{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fN extends co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $5 extends co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H5 extends co{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class z5 extends co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q5 extends co{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G5{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class W5{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Z5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WC{}class ZC{constructor(e){this.url=e}}class J5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lp,this.attachRef=null}}let lp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new J5,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class gN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=KC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=KC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=QC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return QC(e,this._root).map(t=>t.value)}}function KC(n,e){if(n===e.value)return e;for(const t of e.children){const r=KC(n,t);if(r)return r}return null}function QC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=QC(n,t);if(r.length)return r.unshift(e),r}return[]}class Wo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function od(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class mN extends gN{constructor(e,t){super(e),this.snapshot=t,YC(this,e)}toString(){return this.snapshot.toString()}}function _N(n,e){const t=function X5(n,e){const o=new Ay([],{},{},"",{},ht,e,null,{});return new vN("",new Wo(o,[]))}(0,e),r=new w([new rp("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),u=new ys(r,i,o,a,s,ht,e,t.root);return u.snapshot=t.root,new mN(new Wo(u,[]),t)}class ys{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(xe(l=>l[np]))??O(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(e=>rd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(e=>rd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function eW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ay{get title(){return this.data?.[np]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vN extends gN{constructor(e,t){super(t),this.url=e,YC(this,t)}toString(){return IN(this._root)}}function YC(n,e){e.value._routerState=n,e.children.forEach(t=>YC(n,t))}function IN(n){const e=n.children.length>0?` { ${n.children.map(IN).join(", ")} } `:"";return`${n.value}${e}`}function JC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,uo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),uo(e.params,t.params)||n.paramsSubject.next(t.params),function m5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!uo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),uo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function XC(n,e){const t=uo(n.params,e.params)&&function I5(n,e){return Wu(n,e)&&n.every((t,r)=>uo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||XC(n.parent,e.parent))}let eT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ht,this.activateEvents=new Bn,this.deactivateEvents=new Bn,this.attachEvents=new Bn,this.detachEvents=new Bn,this.parentContexts=Fe(lp),this.location=Fe(Ns),this.changeDetector=Fe(Z_),this.environmentInjector=Fe(fs),this.inputBinder=Fe(Sy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new tW(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ki]})}return n})();class tW{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===lp?this.childContexts:this.parent.get(e,t)}}const Sy=new Ce("");let EN=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=LC([r.queryParams,r.params,r.data]).pipe(ke(([s,o,a],u)=>(a={...s,...o,...a},0===u?O(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function RG(n){const e=Tt(n);if(!e)return null;const t=new Pf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function dp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dp(n,r,i);return dp(n,r)})}(n,e,t);return new Wo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dp(n,a)),o}}const r=function iW(n){return new ys(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>dp(n,s));return new Wo(r,i)}}const tT="ngNavigationCancelingError";function wN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function CN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[tT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function TN(n){return n&&n[tT]}let bN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=xi({type:n,selectors:[["ng-component"]],standalone:!0,features:[bM],decls:1,vars:0,template:function(r,i){1&r&&Ge(0,"router-outlet")},dependencies:[eT],encapsulation:2})}return n})();function nT(n){const e=n.children&&n.children.map(nT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ht&&(t.component=bN),t}function Vs(n){return n.outlet||ht}function hp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class hW{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),JC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=od(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=od(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=od(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=od(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Y5(s.value.snapshot))}),e.children.length&&this.forwardEvent(new K5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(JC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),JC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=hp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class DN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ry{constructor(e,t){this.component=e,this.route=t}}function fW(n,e,t){const r=n._root;return fp(r,e?e._root:null,t,[r.value])}function ad(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function DI(n){return null!==Rc(n)}(n)?e.get(n):n:r}function fp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=od(e);return n.children.forEach(o=>{(function gW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function mW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wu(n.url,e.url)||!uo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!XC(n,e)||!uo(n.queryParams,e.queryParams);default:return!XC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new DN(r)):(s.data=o.data,s._resolvedData=o._resolvedData),fp(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ry(a.outlet.component,o))}else o&&pp(e,a,i),i.canActivateChecks.push(new DN(r)),fp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>pp(a,t.getContext(o),i)),i}function pp(n,e,t){const r=od(n),i=n.value;Object.entries(r).forEach(([s,o])=>{pp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ry(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gp(n){return"function"==typeof n}function AN(n){return n instanceof py||"EmptyError"===n?.name}const Py=Symbol("INITIAL_VALUE");function ud(){return ke(n=>LC(n.map(e=>e.pipe(nd(1),gy(Py)))).pipe(xe(e=>{for(const t of e)if(!0!==t){if(t===Py)return Py;if(!1===t||t instanceof id)return t}return!0}),Fs(e=>e!==Py),nd(1)))}function SN(n){return function ai(...n){return ui(n)}(Vr(e=>{if(Zu(e))throw wN(0,e)}),xe(e=>!0===e))}class My{constructor(e){this.segmentGroup=e||null}}class RN{constructor(e){this.urlTree=e}}function cd(n){return ep(new My(n))}function PN(n){return ep(new RN(n))}class FW{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new M(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return O(r);if(i.numberOfChildren>1||!i.children[ht])return ep(new M(4e3,!1));i=i.children[ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new id(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Jt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const rT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VW(n,e,t,r,i){const s=iT(n,e,t);return s.matched?(r=function oW(n,e){return n.providers&&!n._injector&&(n._injector=kw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function NW(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?O(i.map(o=>{const a=ad(o,n);return ja(function wW(n){return n&&gp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ud(),SN()):O(!0)}(r,e,t).pipe(xe(o=>!0===o?s:{...rT}))):O(s)}function iT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...rT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||g5)(t,n,e);if(!i)return{...rT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function MN(n,e,t,r){return t.length>0&&function BW(n,e,t){return t.some(r=>xy(n,e,r)&&Vs(r)!==ht)}(n,t,r)?{segmentGroup:new Jt(e,UW(r,new Jt(t,n.children))),slicedSegments:[]}:0===t.length&&function jW(n,e,t){return t.some(r=>xy(n,e,r))}(n,t,r)?{segmentGroup:new Jt(n.segments,LW(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Jt(n.segments,n.children),slicedSegments:t}}function LW(n,e,t,r,i){const s={};for(const o of r)if(xy(n,t,o)&&!i[Vs(o)]){const a=new Jt([],{});s[Vs(o)]=a}return{...i,...s}}function UW(n,e){const t={};t[ht]=e;for(const r of n)if(""===r.path&&Vs(r)!==ht){const i=new Jt([],{});t[Vs(r)]=i}return t}function xy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class qW{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new FW(this.urlSerializer,this.urlTree)}noMatchError(e){return new M(4002,!1)}recognize(){const e=MN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ht).pipe(Gu(t=>{if(t instanceof RN)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof My?this.noMatchError(t):t}),xe(t=>{const r=new Ay([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ht,this.rootComponentType,null,{}),i=new Wo(r,t),s=new vN("",i),o=function k5(n,e,t=null,r=null){return aN(oN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ht).pipe(Gu(r=>{throw r instanceof My?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=yN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return C(i).pipe(tp(s=>{const o=r.children[s],a=function lW(n,e){const t=n.filter(r=>Vs(r)===e);return t.push(...n.filter(r=>Vs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),_y((s,o)=>(s.push(...o),s)),my(null),function d5(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fs((i,s)=>n(i,s,r)):_n,jC(1),t?my(e):W1(()=>new py))}(),tn(s=>{if(null===s)return cd(r);const o=xN(s);return function GW(n){n.sort((e,t)=>e.value.outlet===ht?-1:t.value.outlet===ht?1:e.value.outlet.localeCompare(t.value.outlet))}(o),O(o)}))}processSegment(e,t,r,i,s,o){return C(t).pipe(tp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Gu(u=>{if(u instanceof My)return O(null);throw u}))),Ba(a=>!!a),Gu(a=>{if(AN(a))return function HW(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?O([]):cd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function $W(n,e,t,r){return!!(Vs(n)===r||r!==ht&&xy(e,t,n))&&("**"===n.path||iT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):cd(i):cd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PN(s):this.applyRedirects.lineralizeSegments(r,s).pipe(tn(o=>{const a=new Jt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=iT(t,i,s);if(!a)return cd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?PN(m):this.applyRedirects.lineralizeSegments(i,m).pipe(tn(y=>this.processSegment(e,r,t,y.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?K1(i).parameters:{};a=O({snapshot:new Ay(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NN(r),Vs(r),r.component??r._loadedComponent??null,r,ON(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=VW(t,r,i,e).pipe(xe(({matched:u,consumedSegments:l,remainingSegments:f,parameters:m})=>u?{snapshot:new Ay(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NN(r),Vs(r),r.component??r._loadedComponent??null,r,ON(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(ke(u=>null===u?cd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ke(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:E}=u,{segmentGroup:A,slicedSegments:x}=MN(t,y,E,l);if(0===x.length&&A.hasChildren())return this.processChildren(f,l,A).pipe(xe(Z=>null===Z?null:[new Wo(m,Z)]));if(0===l.length&&0===x.length)return O([new Wo(m,[])]);const k=Vs(r)===s;return this.processSegment(f,l,A,x,k?ht:s,!0).pipe(xe(Z=>[new Wo(m,Z)]))}))))}getChildConfig(e,t,r){return t.children?O({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?O({routes:t._loadedRoutes,injector:t._loadedInjector}):function xW(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?O(!0):O(i.map(o=>{const a=ad(o,n);return ja(function yW(n){return n&&gp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ud(),SN())}(e,t,r).pipe(tn(i=>i?this.configLoader.loadChildren(e,t).pipe(Vr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function kW(n){return ep(CN(!1,3))}())):O({routes:[],injector:e})}}function WW(n){const e=n.value.routeConfig;return e&&""===e.path}function xN(n){const e=[],t=new Set;for(const r of n){if(!WW(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xN(r.children);e.push(new Wo(r.value,i))}return e.filter(r=>!t.has(r))}function NN(n){return n.data||{}}function ON(n){return n.resolve||{}}function kN(n){return"string"==typeof n.title||null===n.title}function sT(n){return ke(e=>{const t=n(e);return t?C(t).pipe(xe(()=>e)):O(e)})}const ld=new Ce("ROUTES");let oT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Fe(yx)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return O(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ja(t.loadComponent()).pipe(xe(FN),Vr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),yy(()=>{this.componentLoaders.delete(t)})),i=new G1(r,()=>new se).pipe(BC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return O({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function e8(n,e,t,r){return ja(n.loadChildren()).pipe(xe(FN),tn(i=>i instanceof CM||Array.isArray(i)?O(i):C(e.compileModuleAsync(i))),xe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(ld,[],{optional:!0,self:!0}).flat()),{routes:o.map(nT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(yy(()=>{this.childrenLoaders.delete(r)})),o=new G1(s,()=>new se).pipe(BC());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FN(n){return function t8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ny=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new se,this.transitionAbortSubject=new se,this.configLoader=Fe(oT),this.environmentInjector=Fe(fs),this.urlSerializer=Fe(ip),this.rootContexts=Fe(lp),this.inputBindingEnabled=null!==Fe(Sy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new W5(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new G5(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:up,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fs(s=>0!==s.id),xe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ke(s=>{this.currentTransition=s;let o=!1,a=!1;return O(s).pipe(Vr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ke(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new sd(u.id,this.urlSerializer.serialize(u.rawUrl),y,0)),u.resolve(null),On}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return O(u).pipe(ke(y=>{const E=this.transitions?.getValue();return this.events.next(new by(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?On:Promise.resolve(y)}),function ZW(n,e,t,r,i,s){return tn(o=>function zW(n,e,t,r,i,s,o="emptyOnly"){return new qW(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(xe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Vr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const E=new fN(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:y,extractedUrl:E,source:A,restoredState:x,extras:k}=u,Z=new by(y,this.urlSerializer.serialize(E),A,x);this.events.next(Z);const B=_N(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:B,urlAfterRedirects:E,extras:{...k,skipLocationChange:!1,replaceUrl:!1}},O(s)}{const y="";return this.events.next(new sd(u.id,this.urlSerializer.serialize(u.extractedUrl),y,1)),u.resolve(null),On}}),Vr(u=>{const l=new $5(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),xe(u=>(this.currentTransition=s={...u,guards:fW(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function TW(n,e){return tn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?O({...t,guardsResult:!0}):function bW(n,e,t,r){return C(n).pipe(tn(i=>function MW(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?O(s.map(a=>{const u=hp(e)??i,l=ad(a,u);return ja(function EW(n){return n&&gp(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(Ba())})).pipe(ud()):O(!0)}(i.component,i.route,t,e,r)),Ba(i=>!0!==i,!0))}(o,r,i,n).pipe(tn(a=>a&&function _W(n){return"boolean"==typeof n}(a)?function DW(n,e,t,r){return C(e).pipe(tp(i=>UC(function SW(n,e){return null!==n&&e&&e(new Z5(n)),O(!0)}(i.route.parent,r),function AW(n,e){return null!==n&&e&&e(new Q5(n)),O(!0)}(i.route,r),function PW(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function pW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>q1(()=>O(o.guards.map(u=>{const l=hp(o.node)??t,f=ad(u,l);return ja(function IW(n){return n&&gp(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Ba())})).pipe(ud())));return O(s).pipe(ud())}(n,i.path,t),function RW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return O(!0);const i=r.map(s=>q1(()=>{const o=hp(e)??t,a=ad(s,o);return ja(function vW(n){return n&&gp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ba())}));return O(i).pipe(ud())}(n,i.route,t))),Ba(i=>!0!==i,!0))}(r,s,n,e):O(a)),xe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Vr(u=>{if(s.guardsResult=u.guardsResult,Zu(u.guardsResult))throw wN(0,u.guardsResult);const l=new H5(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Fs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),sT(u=>{if(u.guards.canActivateChecks.length)return O(u).pipe(Vr(l=>{const f=new z5(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ke(l=>{let f=!1;return O(l).pipe(function KW(n,e){return tn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return O(t);let s=0;return C(i).pipe(tp(o=>function QW(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!kN(i)&&(s[np]=i.title),function YW(n,e,t,r){const i=function JW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return O({});const s={};return C(i).pipe(tn(o=>function XW(n,e,t,r){const i=hp(e)??r,s=ad(n,i);return ja(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ba(),Vr(a=>{s[o]=a}))),jC(1),function h5(n){return xe(()=>n)}(s),Gu(o=>AN(o)?On:ep(o)))}(s,n,e,r).pipe(xe(o=>(n._resolvedData=o,n.data=yN(n,t).resolve,i&&kN(i)&&(n.data[np]=i.title),null)))}(o.route,r,n,e)),Vr(()=>s++),jC(1),tn(o=>s===i.length?O(t):On))})}(t.paramsInheritanceStrategy,this.environmentInjector),Vr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Vr(l=>{const f=new q5(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),sT(u=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Vr(y=>{f.component=y}),xe(()=>{})));for(const y of f.children)m.push(...l(y));return m};return LC(l(u.targetSnapshot.root)).pipe(my(),nd(1))}),sT(()=>this.afterPreactivation()),xe(u=>{const l=function nW(n,e,t){const r=dp(n,e._root,t?t._root:void 0);return new mN(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),Vr(()=>{this.events.next(new WC)}),((n,e,t,r)=>xe(i=>(new hW(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nd(1),Vr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $a(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function f5(n){return ne((e,t)=>{kt(n).subscribe(Re(t,()=>t.complete(),Be)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Vr(u=>{throw u}))),yy(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Gu(u=>{if(a=!0,TN(u))this.events.next(new cp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function sW(n){return TN(n)&&Zu(n.url)}(u)?this.events.next(new ZC(u.url)):s.resolve(!1);else{this.events.next(new Dy(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){s.reject(l)}}return On}))}))}cancelNavigationTransition(t,r,i){const s=new cp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function VN(n){return n!==up}let LN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ht);return r}getResolvedTitleForRoute(t){return t.data[np]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return Fe(n8)},providedIn:"root"})}return n})(),n8=(()=>{class n extends LN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(V1))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),r8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return Fe(s8)},providedIn:"root"})}return n})();class i8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let s8=(()=>{class n extends i8{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=ar(n)))(i||n)}}();static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Oy=new Ce("",{providedIn:"root",factory:()=>({})});let o8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:function(){return Fe(a8)},providedIn:"root"})}return n})(),a8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(mp||{});function UN(n,e){n.events.pipe(Fs(t=>t instanceof $a||t instanceof cp||t instanceof Dy||t instanceof sd),xe(t=>t instanceof $a||t instanceof sd?mp.COMPLETE:t instanceof cp&&(0===t.code||1===t.code)?mp.REDIRECTING:mp.FAILED),Fs(t=>t!==mp.REDIRECTING),nd(1)).subscribe(()=>{e()})}function u8(n){throw n}function c8(n,e,t){return e.parse("/")}const l8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ji=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Fe(mx),this.isNgZoneEnabled=!1,this._events=new se,this.options=Fe(Oy,{optional:!0})||{},this.pendingTasks=Fe(_x),this.errorHandler=this.options.errorHandler||u8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||c8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Fe(o8),this.routeReuseStrategy=Fe(r8),this.titleStrategy=Fe(LN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Fe(ld,{optional:!0})?.flat()??[],this.navigationTransitions=Fe(Ny),this.urlSerializer=Fe(ip),this.location=Fe(fC),this.componentInputBindingEnabled=!!Fe(Sy,{optional:!0}),this.eventsSubscription=new xt,this.isNgZoneEnabled=Fe(Vt)instanceof Vt&&Vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new id,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_N(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(BN(r)&&this._events.next(r));if(r instanceof by)VN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof sd)this.rawUrlTree=i.rawUrl;else if(r instanceof fN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof WC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof cp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof ZC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VN(i.source)};this.scheduleNavigation(s,up,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Dy&&this.restoreHistory(i,!0),r instanceof $a&&(this.navigated=!0),BN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),up,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=oN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return aN(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,up,null,r)}navigate(t,r={skipLocationChange:!1}){return function h8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new M(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...l8}:!1===r?{...d8}:r,Zu(t))return Y1(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Y1(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return UN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BN(n){return!(n instanceof WC||n instanceof ZC)}class jN{}let g8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Fs(t=>t instanceof $a),tp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=kw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return C(i).pipe(wr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):O(null);const s=i.pipe(tn(o=>null===o?O(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?C([s,this.loader.loadComponent(r)]).pipe(wr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(Ji),Ee(yx),Ee(fs),Ee(jN),Ee(oT))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const uT=new Ce("");let $N=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof by?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $a?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof sd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function hR(){throw new Error("invalid")}()};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac})}return n})();function Zo(n,e){return{\u0275kind:n,\u0275providers:e}}function zN(){const n=Fe(Kr);return e=>{const t=n.get(Xl);if(e!==t.components[0])return;const r=n.get(Ji),i=n.get(qN);1===n.get(cT)&&r.initialNavigation(),n.get(GN,null,gt.Optional)?.setUpPreloading(),n.get(uT,null,gt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const qN=new Ce("",{factory:()=>new se}),cT=new Ce("",{providedIn:"root",factory:()=>1}),GN=new Ce("");function v8(n){return Zo(0,[{provide:GN,useExisting:g8},{provide:jN,useExisting:n}])}const WN=new Ce("ROUTER_FORROOT_GUARD"),E8=[fC,{provide:ip,useClass:$C},Ji,lp,{provide:ys,useFactory:function HN(n){return n.routerState.root},deps:[Ji]},oT,[]];function w8(){return new bx("Router",Ji)}let ZN=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[E8,[],{provide:ld,multi:!0,useValue:t},{provide:WN,useFactory:D8,deps:[[Ji,new Fr,new Km]]},{provide:Oy,useValue:r||{}},r?.useHash?{provide:qu,useClass:OG}:{provide:qu,useClass:n1},{provide:uT,useFactory:()=>{const n=Fe(J9),e=Fe(Vt),t=Fe(Oy),r=Fe(Ny),i=Fe(ip);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $N(i,r,n,e,t)}},r?.preloadingStrategy?v8(r.preloadingStrategy).\u0275providers:[],{provide:bx,multi:!0,useFactory:w8},r?.initialNavigation?A8(r):[],r?.bindToComponentInputs?Zo(8,[EN,{provide:Sy,useExisting:EN}]).\u0275providers:[],[{provide:KN,useFactory:zN},{provide:rC,multi:!0,useExisting:KN}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ld,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Ee(WN,8))};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({})}return n})();function D8(n){return"guarded"}function A8(n){return["disabled"===n.initialNavigation?Zo(3,[{provide:Kw,multi:!0,useFactory:()=>{const e=Fe(Ji);return()=>{e.setUpLocationChangeListener()}}},{provide:cT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zo(2,[{provide:cT,useValue:0},{provide:Kw,multi:!0,deps:[Kr],useFactory:e=>{const t=e.get(xG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ji),s=e.get(qN);UN(i,()=>{r(!0)}),e.get(Ny).afterPreactivation=()=>(r(!0),s.closed?O(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const KN=new Ce("");var $n=We(534);(0,$n.registerVersion)("firebase","10.12.2","app");class M8 extends xt{constructor(e,t){super()}schedule(e,t=0){return this}}const ky={setInterval(n,e,...t){const{delegate:r}=ky;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=ky;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class QN extends M8{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ky.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&ky.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const lT={now:()=>(lT.delegate||Date).now(),delegate:void 0};class _p{constructor(e,t=_p.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}_p.now=lT.now;class YN extends _p{constructor(e,t=_p.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const O8=new class N8 extends YN{}(class x8 extends QN{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),dT=new YN(QN),Ko=new Nl("ANGULARFIRE2_VERSION");function hT(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Fy=(n,e)=>{const t=e?[e]:(0,$n.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class yp{constructor(){return Fy(k8)}}const k8="app-check";function dd(){}class JN{zone;delegate;constructor(e,t=O8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class F8{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dd,{},dd,dd)),t.pipe(Vr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new JN(Zone.current)),this.insideAngular=t.run(()=>new JN(Zone.current,dT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Ee(Vt))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Ku(n){return fd().ngZone.run(()=>n())}function XN(n){return n.pipe(vn(fd().outsideAngular))}function vi(n){return function L8(n){return function(t){return(t=t.lift(new F8(n.ngZone))).pipe(Cr(n.outsideAngular),vn(n.insideAngular))}}(fd())(n)}const U8=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Ku(()=>n.apply(void 0,r))},fT=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Ku(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dd,{},dd,dd))),r[s]=U8(r[s],t));const i=function V8(n){return fd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ct){const s=fd();return i.pipe(Cr(s.outsideAngular),vn(s.insideAngular))}return Ku(()=>i)}return i instanceof ct?i.pipe(vi):i instanceof Promise?Ku(()=>new Promise((s,o)=>i.then(a=>Ku(()=>s(a)),a=>Ku(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Ku(()=>i)};var Ls=We(106);Ls.Z.registerVersion("firebase","10.12.2","app-compat");const $8=["ngOnDestroy"];class eO{constructor(e){return e}}const vp=new Ce("angularfire2.app.options"),Ip=new Ce("angularfire2.app.name");function Vy(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ls.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ls.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;q8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new eO(o)}const q8=(n,...e)=>{},G8={provide:eO,useFactory:Vy,deps:[vp,Vt,[new Fr,Ip]]};let W8=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:vp,useValue:t},{provide:Ip,useValue:r}]}}constructor(t){Ls.Z.registerVersion("angularfire",Ko.full,"core"),Ls.Z.registerVersion("angularfire",Ko.full,"app-compat"),Ls.Z.registerVersion("angular",QE.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ee(Ps))};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[G8]})}return n})();function pT(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Z8(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(tO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${K8?" You may need to reload as Firebase is not HMR aware.":""}`),tO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const K8=typeof module<"u"&&!!module.hot,tO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],We(365);class Q8 extends se{constructor(e=1/0,t=1/0,r=lT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function nO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,le({connector:()=>new Q8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function rO(n,e){return S(e)?ke(()=>n,e):ke(()=>n)}const iO=new Ce("angularfire2.auth.use-emulator"),sO=new Ce("angularfire2.auth.settings"),oO=new Ce("angularfire2.auth.tenant-id"),aO=new Ce("angularfire2.auth.langugage-code"),uO=new Ce("angularfire2.auth.use-device-language"),cO=new Ce("angularfire.auth.persistence"),lO=(n,e,t,r,i,s,o,a)=>pT(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let gT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,f,m,y,E){const A=new se,x=O(void 0).pipe(vn(o.outsideAngular),ke(()=>s.runOutsideAngular(()=>Promise.resolve().then(We.bind(We,365)))),xe(()=>Vy(t,s,r)),xe(k=>lO(k,s,a,l,f,m,u,y)),nO({bufferSize:1,refCount:!1}));if(ly(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=O(null);else{x.pipe(Ba()).subscribe();const k=x.pipe(ke(Q=>Q.getRedirectResult().then(ue=>ue,()=>null)),vi,nO({bufferSize:1,refCount:!1})),Z=x.pipe(ke(Q=>new ct(ue=>({unsubscribe:s.runOutsideAngular(()=>Q.onAuthStateChanged(we=>ue.next(we),we=>ue.error(we),()=>ue.complete()))})))),B=x.pipe(ke(Q=>new ct(ue=>({unsubscribe:s.runOutsideAngular(()=>Q.onIdTokenChanged(we=>ue.next(we),we=>ue.error(we),()=>ue.complete()))}))));this.authState=k.pipe(rO(Z),Cr(o.outsideAngular),vn(o.insideAngular)),this.user=k.pipe(rO(B),Cr(o.outsideAngular),vn(o.insideAngular)),this.idToken=this.user.pipe(ke(Q=>Q?C(Q.getIdToken()):O(null))),this.idTokenResult=this.user.pipe(ke(Q=>Q?C(Q.getIdTokenResult()):O(null))),this.credential=D(k,A,this.authState.pipe(Fs(Q=>!Q))).pipe(xe(Q=>Q?.user?Q:null),Cr(o.outsideAngular),vn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if($8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,m),m})})})}))(this,x,s,{spy:{apply:(k,Z,B)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&B.then(Q=>A.next(Q))}}})}static \u0275fac=function(r){return new(r||n)(Ee(vp),Ee(Ip,8),Ee(Ps),Ee(Vt),Ee(hd),Ee(iO,8),Ee(sO,8),Ee(oO,8),Ee(aO,8),Ee(uO,8),Ee(cO,8),Ee(yp,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),J8=(()=>{class n{constructor(){Ls.Z.registerVersion("angularfire",Ko.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[gT]})}return n})();function mT(){return ne((n,e)=>{let t,r=!1;n.subscribe(Re(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Qu,fO,ae=We(861),Ly=We(537),lo=We(879),dt=We(58),dO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hO={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(j,R,V){V||(V=0);var $=Array(16);if("string"==typeof R)for(var q=0;16>q;++q)$[q]=R.charCodeAt(V++)|R.charCodeAt(V++)<<8|R.charCodeAt(V++)<<16|R.charCodeAt(V++)<<24;else for(q=0;16>q;++q)$[q]=R[V++]|R[V++]<<8|R[V++]<<16|R[V++]<<24;var J=j.g[3],L=(R=j.g[0])+(J^(V=j.g[1])&((q=j.g[2])^J))+$[0]+3614090360&4294967295;L=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=(V=(q=(J=(R=V+(L<<7&4294967295|L>>>25))+((L=J+(q^R&(V^q))+$[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=q+(V^J&(R^V))+$[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=V+(R^q&(J^R))+$[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=R+(J^V&(q^J))+$[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=J+(q^R&(V^q))+$[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=q+(V^J&(R^V))+$[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=V+(R^q&(J^R))+$[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=R+(J^V&(q^J))+$[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=J+(q^R&(V^q))+$[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=q+(V^J&(R^V))+$[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=V+(R^q&(J^R))+$[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=R+(J^V&(q^J))+$[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=J+(q^R&(V^q))+$[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=q+(V^J&(R^V))+$[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=V+(R^q&(J^R))+$[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=R+(q^J&(V^q))+$[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=J+(V^q&(R^V))+$[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=q+(R^V&(J^R))+$[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=V+(J^R&(q^J))+$[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=R+(q^J&(V^q))+$[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=J+(V^q&(R^V))+$[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=q+(R^V&(J^R))+$[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=V+(J^R&(q^J))+$[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=R+(q^J&(V^q))+$[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=J+(V^q&(R^V))+$[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=q+(R^V&(J^R))+$[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=V+(J^R&(q^J))+$[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=R+(q^J&(V^q))+$[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=J+(V^q&(R^V))+$[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=q+(R^V&(J^R))+$[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=V+(J^R&(q^J))+$[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=R+(V^q^J)+$[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=J+(R^V^q)+$[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=q+(J^R^V)+$[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=V+(q^J^R)+$[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=R+(V^q^J)+$[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=J+(R^V^q)+$[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=q+(J^R^V)+$[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=V+(q^J^R)+$[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=R+(V^q^J)+$[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=J+(R^V^q)+$[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=q+(J^R^V)+$[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=V+(q^J^R)+$[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=R+(V^q^J)+$[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=J+(R^V^q)+$[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=q+(J^R^V)+$[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=V+(q^J^R)+$[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=R+(q^(V|~J))+$[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=J+(V^(R|~q))+$[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=q+(R^(J|~V))+$[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=V+(J^(q|~R))+$[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=R+(q^(V|~J))+$[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=J+(V^(R|~q))+$[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=q+(R^(J|~V))+$[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=V+(J^(q|~R))+$[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=R+(q^(V|~J))+$[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=J+(V^(R|~q))+$[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=q+(R^(J|~V))+$[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=V+(J^(q|~R))+$[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((J=(R=V+((L=R+(q^(V|~J))+$[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=J+(V^(R|~q))+$[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((q=J+((L=q+(R^(J|~V))+$[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~R))+$[9]+3951481745&4294967295,j.g[0]=j.g[0]+R&4294967295,j.g[1]=j.g[1]+(q+(L<<21&4294967295|L>>>11))&4294967295,j.g[2]=j.g[2]+q&4294967295,j.g[3]=j.g[3]+J&4294967295}function o(j,R){this.h=R;for(var V=[],$=!0,q=j.length-1;0<=q;q--){var J=0|j[q];$&&J==R||(V[q]=J,$=!1)}this.g=V}(function e(j,R){function V(){}V.prototype=R.prototype,j.D=R.prototype,j.prototype=new V,j.prototype.constructor=j,j.C=function($,q,J){for(var L=Array(arguments.length-2),ua=2;ua<arguments.length;ua++)L[ua-2]=arguments[ua];return R.prototype[q].apply($,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(j,R){void 0===R&&(R=j.length);for(var V=R-this.blockSize,$=this.B,q=this.h,J=0;J<R;){if(0==q)for(;J<=V;)i(this,j,J),J+=this.blockSize;if("string"==typeof j){for(;J<R;)if($[q++]=j.charCodeAt(J++),q==this.blockSize){i(this,$),q=0;break}}else for(;J<R;)if($[q++]=j[J++],q==this.blockSize){i(this,$),q=0;break}}this.h=q,this.o+=R},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var R=1;R<j.length-8;++R)j[R]=0;var V=8*this.o;for(R=j.length-8;R<j.length;++R)j[R]=255&V,V/=256;for(this.u(j),j=Array(16),R=V=0;4>R;++R)for(var $=0;32>$;$+=8)j[V++]=this.g[R]>>>$&255;return j};var a={};function u(j){return-128<=j&&128>j?function s(j,R){var V=a;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=R(j)}(j,function(R){return new o([0|R],0>R?-1:0)}):new o([0|j],0>j?-1:0)}function l(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return k(l(-j));for(var R=[],V=1,$=0;j>=V;$++)R[$]=j/V|0,V*=4294967296;return new o(R,0)}var m=u(0),y=u(1),E=u(16777216);function A(j){if(0!=j.h)return!1;for(var R=0;R<j.g.length;R++)if(0!=j.g[R])return!1;return!0}function x(j){return-1==j.h}function k(j){for(var R=j.g.length,V=[],$=0;$<R;$++)V[$]=~j.g[$];return new o(V,~j.h).add(y)}function Z(j,R){return j.add(k(R))}function B(j,R){for(;(65535&j[R])!=j[R];)j[R+1]+=j[R]>>>16,j[R]&=65535,R++}function Q(j,R){this.g=j,this.h=R}function ue(j,R){if(A(R))throw Error("division by zero");if(A(j))return new Q(m,m);if(x(j))return R=ue(k(j),R),new Q(k(R.g),k(R.h));if(x(R))return R=ue(j,k(R)),new Q(k(R.g),R.h);if(30<j.g.length){if(x(j)||x(R))throw Error("slowDivide_ only works with positive integers.");for(var V=y,$=R;0>=$.l(j);)V=we(V),$=we($);var q=Le(V,1),J=Le($,1);for($=Le($,2),V=Le(V,2);!A($);){var L=J.add($);0>=L.l(j)&&(q=q.add(V),J=L),$=Le($,1),V=Le(V,1)}return R=Z(j,q.j(R)),new Q(q,R)}for(q=m;0<=j.l(R);){for(V=Math.max(1,Math.floor(j.m()/R.m())),$=48>=($=Math.ceil(Math.log(V)/Math.LN2))?1:Math.pow(2,$-48),L=(J=l(V)).j(R);x(L)||0<L.l(j);)L=(J=l(V-=$)).j(R);A(J)&&(J=y),q=q.add(J),j=Z(j,L)}return new Q(q,j)}function we(j){for(var R=j.g.length+1,V=[],$=0;$<R;$++)V[$]=j.i($)<<1|j.i($-1)>>>31;return new o(V,j.h)}function Le(j,R){var V=R>>5;R%=32;for(var $=j.g.length-V,q=[],J=0;J<$;J++)q[J]=0<R?j.i(J+V)>>>R|j.i(J+V+1)<<32-R:j.i(J+V);return new o(q,j.h)}(n=o.prototype).m=function(){if(x(this))return-k(this).m();for(var j=0,R=1,V=0;V<this.g.length;V++){var $=this.i(V);j+=(0<=$?$:4294967296+$)*R,R*=4294967296}return j},n.toString=function(j){if(2>(j=j||10)||36<j)throw Error("radix out of range: "+j);if(A(this))return"0";if(x(this))return"-"+k(this).toString(j);for(var R=l(Math.pow(j,6)),V=this,$="";;){var q=ue(V,R).g,J=((0<(V=Z(V,q.j(R))).g.length?V.g[0]:V.h)>>>0).toString(j);if(A(V=q))return J+$;for(;6>J.length;)J="0"+J;$=J+$}},n.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h},n.l=function(j){return x(j=Z(this,j))?-1:A(j)?0:1},n.abs=function(){return x(this)?k(this):this},n.add=function(j){for(var R=Math.max(this.g.length,j.g.length),V=[],$=0,q=0;q<=R;q++){var J=$+(65535&this.i(q))+(65535&j.i(q)),L=(J>>>16)+(this.i(q)>>>16)+(j.i(q)>>>16);$=L>>>16,V[q]=(L&=65535)<<16|(J&=65535)}return new o(V,-2147483648&V[V.length-1]?-1:0)},n.j=function(j){if(A(this)||A(j))return m;if(x(this))return x(j)?k(this).j(k(j)):k(k(this).j(j));if(x(j))return k(this.j(k(j)));if(0>this.l(E)&&0>j.l(E))return l(this.m()*j.m());for(var R=this.g.length+j.g.length,V=[],$=0;$<2*R;$++)V[$]=0;for($=0;$<this.g.length;$++)for(var q=0;q<j.g.length;q++){var J=this.i($)>>>16,L=65535&this.i($),ua=j.i(q)>>>16,Eg=65535&j.i(q);V[2*$+2*q]+=L*Eg,B(V,2*$+2*q),V[2*$+2*q+1]+=J*Eg,B(V,2*$+2*q+1),V[2*$+2*q+1]+=L*ua,B(V,2*$+2*q+1),V[2*$+2*q+2]+=J*ua,B(V,2*$+2*q+2)}for($=0;$<R;$++)V[$]=V[2*$+1]<<16|V[2*$];for($=R;$<2*R;$++)V[$]=0;return new o(V,0)},n.A=function(j){return ue(this,j).h},n.and=function(j){for(var R=Math.max(this.g.length,j.g.length),V=[],$=0;$<R;$++)V[$]=this.i($)&j.i($);return new o(V,this.h&j.h)},n.or=function(j){for(var R=Math.max(this.g.length,j.g.length),V=[],$=0;$<R;$++)V[$]=this.i($)|j.i($);return new o(V,this.h|j.h)},n.xor=function(j){for(var R=Math.max(this.g.length,j.g.length),V=[],$=0;$<R;$++)V[$]=this.i($)^j.i($);return new o(V,this.h^j.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fO=hO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function f(j,R){if(0==j.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==j.charAt(0))return k(f(j.substring(1),R));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=l(Math.pow(R,8)),$=m,q=0;q<j.length;q+=8){var J=Math.min(8,j.length-q),L=parseInt(j.substring(q,q+J),R);8>J?(J=l(Math.pow(R,J)),$=$.j(J).add(l(L))):$=($=$.j(V)).add(l(L))}return $},Qu=hO.Integer=o}).apply(typeof dO<"u"?dO:typeof self<"u"?self:typeof window<"u"?window:{});var pO,gO,Ep,mO,By,_T,_O,yO,vO,Uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Uy&&Uy];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var G=h[b];if(!(G in I))break e;I=I[G]}(_=_(b=I[h=h[h.length-1]]))!=b&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,b=!1,G={next:function(){if(!b&&I<h.length){var re=I++;return{value:_(re,h[re]),done:!1}}return b=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,b),h.apply(_,G)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function A(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(b,G,re){for(var De=Array(arguments.length-2),un=2;un<arguments.length;un++)De[un-2]=arguments[un];return _.prototype[G].apply(b,De)}}function x(h){const _=h.length;if(0<_){const I=Array(_);for(let b=0;b<_;b++)I[b]=h[b];return I}return[]}function k(h,_){for(let I=1;I<arguments.length;I++){const b=arguments[I];if(u(b)){const G=h.length||0,re=b.length||0;h.length=G+re;for(let De=0;De<re;De++)h[G+De]=b[De]}else h.push(b)}}function B(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ue(h){return ue[" "](h),h}ue[" "]=function(){};var we=!(-1==Q().indexOf("Gecko")||-1!=Q().toLowerCase().indexOf("webkit")&&-1==Q().indexOf("Edge")||-1!=Q().indexOf("Trident")||-1!=Q().indexOf("MSIE")||-1!=Q().indexOf("Edge"));function Le(h,_,I){for(const b in h)_.call(I,h[b],b,h)}function R(h){const _={};for(const I in h)_[I]=h[I];return _}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(h,_){let I,b;for(let G=1;G<arguments.length;G++){for(I in b=arguments[G],b)h[I]=b[I];for(let re=0;re<V.length;re++)I=V[re],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function q(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function J(h){a.setTimeout(()=>{throw h},0)}function L(){var h=PD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Eg=new class Z{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new _te,h=>h.reset());class _te{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let wg,Cg=!1,PD=new class ua{constructor(){this.h=this.g=null}add(_,I){const b=Eg.get();b.set(_,I),this.h?this.h.next=b:this.g=b,this.h=b}},cU=()=>{const h=a.Promise.resolve(void 0);wg=()=>{h.then(yte)}};var yte=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(I){J(I)}var _=Eg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Cg=!1};function du(){this.s=this.s,this.C=this.C}function ri(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}du.prototype.s=!1,du.prototype.ma=function(){this.s||(this.s=!0,this.N())},du.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ri.prototype.h=function(){this.defaultPrevented=!0};var vte=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function Tg(h,_){if(ri.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(we){e:{try{ue(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Ite[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Tg.aa.h.call(this)}}A(Tg,ri);var Ite={2:"touch",3:"pen",4:"mouse"};Tg.prototype.h=function(){Tg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bg="closure_listenable_"+(1e6*Math.random()|0),Ete=0;function wte(h,_,I,b,G){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!b,this.ha=G,this.key=++Ete,this.da=this.fa=!1}function aI(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function uI(h){this.src=h,this.g={},this.h=0}function MD(h,_){var I=_.type;if(I in h.g){var re,b=h.g[I],G=Array.prototype.indexOf.call(b,_,void 0);(re=0<=G)&&Array.prototype.splice.call(b,G,1),re&&(aI(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function xD(h,_,I,b){for(var G=0;G<h.length;++G){var re=h[G];if(!re.da&&re.listener==_&&re.capture==!!I&&re.ha==b)return G}return-1}uI.prototype.add=function(h,_,I,b,G){var re=h.toString();(h=this.g[re])||(h=this.g[re]=[],this.h++);var De=xD(h,_,b,G);return-1<De?(_=h[De],I||(_.fa=!1)):((_=new wte(_,this.src,re,!!b,G)).fa=I,h.push(_)),_};var ND="closure_lm_"+(1e6*Math.random()|0),OD={};function lU(h,_,I,b,G){if(b&&b.once)return hU(h,_,I,b,G);if(Array.isArray(_)){for(var re=0;re<_.length;re++)lU(h,_[re],I,b,G);return null}return I=LD(I),h&&h[bg]?h.K(_,I,l(b)?!!b.capture:!!b,G):dU(h,_,I,!1,b,G)}function dU(h,_,I,b,G,re){if(!_)throw Error("Invalid event type");var De=l(G)?!!G.capture:!!G,un=FD(h);if(un||(h[ND]=un=new uI(h)),(I=un.add(_,I,b,De,re)).proxy)return I;if(b=function Cte(){const _=Tte;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)vte||(G=De),void 0===G&&(G=!1),h.addEventListener(_.toString(),b,G);else if(h.attachEvent)h.attachEvent(pU(_.toString()),b);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(b)}return I}function hU(h,_,I,b,G){if(Array.isArray(_)){for(var re=0;re<_.length;re++)hU(h,_[re],I,b,G);return null}return I=LD(I),h&&h[bg]?h.L(_,I,l(b)?!!b.capture:!!b,G):dU(h,_,I,!0,b,G)}function fU(h,_,I,b,G){if(Array.isArray(_))for(var re=0;re<_.length;re++)fU(h,_[re],I,b,G);else b=l(b)?!!b.capture:!!b,I=LD(I),h&&h[bg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=xD(re=h.g[_],I,b,G))&&(aI(re[I]),Array.prototype.splice.call(re,I,1),0==re.length&&(delete h.g[_],h.h--))):h&&(h=FD(h))&&(_=h.g[_.toString()],h=-1,_&&(h=xD(_,I,b,G)),(I=-1<h?_[h]:null)&&kD(I))}function kD(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[bg])MD(_.i,h);else{var I=h.type,b=h.proxy;_.removeEventListener?_.removeEventListener(I,b,h.capture):_.detachEvent?_.detachEvent(pU(I),b):_.addListener&&_.removeListener&&_.removeListener(b),(I=FD(_))?(MD(I,h),0==I.h&&(I.src=null,_[ND]=null)):aI(h)}}}function pU(h){return h in OD?OD[h]:OD[h]="on"+h}function Tte(h,_){if(h.da)h=!0;else{_=new Tg(_,this);var I=h.listener,b=h.ha||h.src;h.fa&&kD(h),h=I.call(b,_)}return h}function FD(h){return(h=h[ND])instanceof uI?h:null}var VD="__closure_events_fn_"+(1e9*Math.random()>>>0);function LD(h){return"function"==typeof h?h:(h[VD]||(h[VD]=function(_){return h.handleEvent(_)}),h[VD])}function ii(){du.call(this),this.i=new uI(this),this.M=this,this.F=null}function bi(h,_){var I,b=h.F;if(b)for(I=[];b;b=b.F)I.push(b);if(h=h.M,b=_.type||_,"string"==typeof _)_=new ri(_,h);else if(_ instanceof ri)_.target=_.target||h;else{var G=_;$(_=new ri(b,h),G)}if(G=!0,I)for(var re=I.length-1;0<=re;re--){var De=_.g=I[re];G=cI(De,b,!0,_)&&G}if(G=cI(De=_.g=h,b,!0,_)&&G,G=cI(De,b,!1,_)&&G,I)for(re=0;re<I.length;re++)G=cI(De=_.g=I[re],b,!1,_)&&G}function cI(h,_,I,b){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var G=!0,re=0;re<_.length;++re){var De=_[re];if(De&&!De.da&&De.capture==I){var un=De.listener,jr=De.ha||De.src;De.fa&&MD(h.i,De),G=!1!==un.call(jr,b)&&G}}return G&&!b.defaultPrevented}function gU(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function mU(h){h.g=gU(()=>{h.g=null,h.i&&(h.i=!1,mU(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}A(ii,du),ii.prototype[bg]=!0,ii.prototype.removeEventListener=function(h,_,I,b){fU(this,h,_,I,b)},ii.prototype.N=function(){if(ii.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],b=0;b<I.length;b++)aI(I[b]);delete h.g[_],h.h--}}this.F=null},ii.prototype.K=function(h,_,I,b){return this.i.add(String(h),_,!1,I,b)},ii.prototype.L=function(h,_,I,b){return this.i.add(String(h),_,!0,I,b)};class bte extends du{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:mU(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dg(h){du.call(this),this.h=h,this.g={}}A(Dg,du);var _U=[];function yU(h){Le(h.g,function(_,I){this.g.hasOwnProperty(I)&&kD(_)},h),h.g={}}Dg.prototype.N=function(){Dg.aa.N.call(this),yU(this)},Dg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var UD=a.JSON.stringify,Dte=a.JSON.parse,Ate=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function BD(){}function IU(){}BD.prototype.h=null;var Ag={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jD(){ri.call(this,"d")}function $D(){ri.call(this,"c")}A(jD,ri),A($D,ri);var wc={},EU=null;function lI(){return EU=EU||new ii}function wU(h){ri.call(this,wc.La,h)}function Sg(h){const _=lI();bi(_,new wU(_))}function CU(h,_){ri.call(this,wc.STAT_EVENT,h),this.stat=_}function Di(h){const _=lI();bi(_,new CU(_,h))}function TU(h,_){ri.call(this,wc.Ma,h),this.size=_}function Rg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Pg(){this.g=!0}function ih(h,_,I,b){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function Mte(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var b=I[h];if(!(2>b.length)){var G=b[1];if(Array.isArray(G)&&!(1>G.length)){var re=G[0];if("noop"!=re&&"stop"!=re&&"close"!=re)for(var De=1;De<G.length;De++)G[De]=""}}}return UD(I)}catch{return _}}(h,I)+(b?" "+b:"")})}wc.La="serverreachability",A(wU,ri),wc.STAT_EVENT="statevent",A(CU,ri),wc.Ma="timingevent",A(TU,ri),Pg.prototype.xa=function(){this.g=!1},Pg.prototype.info=function(){};var HD,dI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function hI(){}function hu(h,_,I,b){this.j=h,this.i=_,this.l=I,this.R=b||1,this.U=new Dg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new DU}function DU(){this.i=null,this.g="",this.h=!1}A(hI,BD),hI.prototype.g=function(){return new XMLHttpRequest},hI.prototype.i=function(){return{}},HD=new hI;var AU={},zD={};function qD(h,_,I){h.L=1,h.v=mI(ca(_)),h.m=I,h.P=!0,SU(h,null)}function SU(h,_){h.F=Date.now(),fI(h),h.A=ca(h.v);var I=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),$U(I.i,"t",b),h.C=0,I=h.j.J,h.h=new DU,h.g=oB(h.j,I?_:null,!h.m),0<h.O&&(h.M=new bte(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,b=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(_U[0]=G.toString()),G=_U);for(var re=0;re<G.length;re++){var De=lU(I,G[re],b||_.handleEvent,!1,_.h||_);if(!De)break;_.g[De.key]=De}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Sg(),function Ste(h,_,I,b,G,re){h.info(function(){if(h.g)if(re)for(var De="",un=re.split("&"),jr=0;jr<un.length;jr++){var jt=un[jr].split("=");if(1<jt.length){var si=jt[0];jt=jt[1];var oi=si.split("_");De=2<=oi.length&&"type"==oi[1]?De+(si+"=")+jt+"&":De+(si+"=redacted&")}}else De=null;else De=re;return"XMLHTTP REQ ("+b+") [attempt "+G+"]: "+_+"\n"+I+"\n"+De})}(h.i,h.u,h.A,h.l,h.R,h.m)}function RU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function xte(h,_){var I=h.C,b=_.indexOf("\n",I);return-1==b?zD:(I=Number(_.substring(I,b)),isNaN(I)?AU:(b+=1)+I>_.length?zD:(_=_.slice(b,b+I),h.C=b+I,_))}function fI(h){h.S=Date.now()+h.I,PU(h,h.I)}function PU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Rg(y(h.ba,h),_)}function GD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Mg(h){0==h.j.G||h.J||nB(h.j,h)}function Cc(h){GD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,yU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function WD(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||ZD(I.h,h)))if(!h.K&&ZD(I.h,h)&&3==I.G){try{var b=I.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&3==b.length){var G=b;if(0==G[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;EI(I),vI(I)}JD(I),Di(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&0==I.v&&!I.C&&(I.C=Rg(y(I.Za,I),6e3));if(1>=NU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else bc(I,11)}else if((h.K||I.g==h)&&EI(I),!B(_))for(G=I.Da.g.parse(_),_=0;_<G.length;_++){let jt=G[_];if(I.T=jt[0],jt=jt[1],2==I.G)if("c"==jt[0]){I.K=jt[1],I.ia=jt[2];const si=jt[3];null!=si&&(I.la=si,I.j.info("VER="+I.la));const oi=jt[4];null!=oi&&(I.Aa=oi,I.j.info("SVER="+I.Aa));const ah=jt[5];null!=ah&&"number"==typeof ah&&0<ah&&(I.L=b=1.5*ah,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const Bs=h.g;if(Bs){const CI=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(CI){var re=b.h;re.g||-1==CI.indexOf("spdy")&&-1==CI.indexOf("quic")&&-1==CI.indexOf("h2")||(re.j=re.l,re.g=new Set,re.h&&(KD(re,re.h),re.h=null))}if(b.D){const eA=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;eA&&(b.ya=eA,Tn(b.I,b.D,eA))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var De=h;if((b=I).qa=sB(b,b.J?b.ia:null,b.W),De.K){OU(b.h,De);var un=De,jr=b.L;jr&&(un.I=jr),un.B&&(GD(un),fI(un)),b.g=De}else eB(b);0<I.i.length&&II(I)}else"stop"!=jt[0]&&"close"!=jt[0]||bc(I,7);else 3==I.G&&("stop"==jt[0]||"close"==jt[0]?"stop"==jt[0]?bc(I,7):YD(I):"noop"!=jt[0]&&I.l&&I.l.ta(jt),I.v=0)}Sg()}catch{}}function MU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function NU(h){return h.h?1:h.g?h.g.size:0}function ZD(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function KD(h,_){h.g?h.g.add(_):h.h=_}function OU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function kU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return x(h.i)}function FU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function kte(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const b in h)_[I++]=b;return _}}}(h),b=function Ote(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,b=0;b<I;b++)_.push(h[b]);return _}for(b in _=[],I=0,h)_[I++]=h[b];return _}(h),G=b.length,re=0;re<G;re++)_.call(void 0,b[re],I&&I[re],h)}hu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==la(h)?_.j():this.Y(h)},hu.prototype.Y=function(h){try{if(h==this.g)e:{const oi=la(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>oi)&&(3!=oi||this.g&&(this.h.h||this.g.oa()||KU(this.g)))){this.J||4!=oi||7==_||Sg(),GD(this);var I=this.g.Z();this.X=I;t:if(RU(this)){var b=KU(this.g);h="";var G=b.length,re=4==la(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cc(this),Mg(this);var De="";break t}this.h.i=new a.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,h+=this.h.i.decode(b[_],{stream:!(re&&_==G-1)});b.length=0,this.h.g+=h,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==I,function Rte(h,_,I,b,G,re,De){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+G+"]: "+_+"\n"+I+"\n"+re+" "+De})}(this.i,this.u,this.A,this.l,this.R,oi,I),this.o){if(this.T&&!this.K){t:{if(this.g){var un,jr=this.g;if((un=jr.g?jr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(un)){var jt=un;break t}}jt=null}if(!(I=jt)){this.o=!1,this.s=3,Di(12),Cc(this),Mg(this);break e}ih(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,WD(this,I)}if(this.P){let Bs;for(I=!0;!this.J&&this.C<De.length;){if(Bs=xte(this,De),Bs==zD){4==oi&&(this.s=4,Di(14),I=!1),ih(this.i,this.l,null,"[Incomplete Response]");break}if(Bs==AU){this.s=4,Di(15),ih(this.i,this.l,De,"[Invalid Chunk]"),I=!1;break}ih(this.i,this.l,Bs,null),WD(this,Bs)}if(RU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=oi||0!=De.length||this.h.h||(this.s=1,Di(16),I=!1),this.o=this.o&&I,I){if(0<De.length&&!this.W){this.W=!0;var si=this.j;si.g==this&&si.ba&&!si.M&&(si.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),XD(si),si.M=!0,Di(11))}}else ih(this.i,this.l,De,"[Invalid Chunked Response]"),Cc(this),Mg(this)}else ih(this.i,this.l,De,null),WD(this,De);4==oi&&Cc(this),this.o&&!this.J&&(4==oi?nB(this.j,this):(this.o=!1,fI(this)))}else(function Kte(h){const _={};h=(h.g&&2<=la(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let b=0;b<h.length;b++){if(B(h[b]))continue;var I=q(h[b]);const G=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const re=_[G]||[];_[G]=re,re.push(I)}!function j(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(b){return b.join(", ")})})(this.g),400==I&&0<De.indexOf("Unknown SID")?(this.s=3,Di(12)):(this.s=0,Di(13)),Cc(this),Mg(this)}}}catch{}},hu.prototype.cancel=function(){this.J=!0,Cc(this)},hu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Pte(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Sg(),Di(17)),Cc(this),this.s=2,Mg(this)):PU(this,this.S-h)},MU.prototype.cancel=function(){if(this.i=kU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var VU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Tc){this.h=h.h,pI(this,h.j),this.o=h.o,this.g=h.g,gI(this,h.s),this.l=h.l;var _=h.i,I=new Og;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),LU(this,I),this.m=h.m}else h&&(_=String(h).match(VU))?(this.h=!1,pI(this,_[1]||"",!0),this.o=xg(_[2]||""),this.g=xg(_[3]||"",!0),gI(this,_[4]),this.l=xg(_[5]||"",!0),LU(this,_[6]||"",!0),this.m=xg(_[7]||"")):(this.h=!1,this.i=new Og(null,this.h))}function ca(h){return new Tc(h)}function pI(h,_,I){h.j=I?xg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function gI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function LU(h,_,I){_ instanceof Og?(h.i=_,function $te(h,_){_&&!h.j&&(fu(h),h.i=null,h.g.forEach(function(I,b){var G=b.toLowerCase();b!=G&&(BU(this,b),$U(this,G,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Ng(_,Bte)),h.i=new Og(_,h.h))}function Tn(h,_,I){h.i.set(_,I)}function mI(h){return Tn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function xg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ng(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,Vte),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Vte(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Tc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Ng(_,UU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Ng(_,UU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Ng(I,"/"==I.charAt(0)?Ute:Lte,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Ng(I,jte)),h.join("")};var h,UU=/[#\/\?@]/g,Lte=/[#\?:]/g,Ute=/[#\?]/g,Bte=/[#\?@]/g,jte=/#/g;function Og(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function fu(h){h.g||(h.g=new Map,h.h=0,h.i&&function Fte(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var b=h[I].indexOf("="),G=null;if(0<=b){var re=h[I].substring(0,b);G=h[I].substring(b+1)}else re=h[I];_(re,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function BU(h,_){fu(h),_=sh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function jU(h,_){return fu(h),_=sh(h,_),h.g.has(_)}function $U(h,_,I){BU(h,_),0<I.length&&(h.i=null,h.g.set(sh(h,_),x(I)),h.h+=I.length)}function sh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function pu(h,_,I,b,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),b(I)}catch{}}function qte(){this.g=new Ate}function Gte(h,_,I){const b=I||"";try{FU(h,function(G,re){let De=G;l(G)&&(De=UD(G)),_.push(b+re+"="+encodeURIComponent(De))})}catch(G){throw _.push(b+"type="+encodeURIComponent("_badmap")),G}}function kg(h){this.l=h.Ub||null,this.j=h.eb||!1}function _I(h,_){ii.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function HU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Fg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Vg(h)}function Vg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function zU(h){let _="";return Le(h,function(I,b){_+=b,_+=":",_+=I,_+="\r\n"}),_}function QD(h,_,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=zU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):Tn(h,_,I))}function zn(h){ii.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Og.prototype).add=function(h,_){fu(this),this.i=null,h=sh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){fu(this),this.g.forEach(function(I,b){I.forEach(function(G){h.call(_,G,b,this)},this)},this)},n.na=function(){fu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let b=0;b<_.length;b++){const G=h[b];for(let re=0;re<G.length;re++)I.push(_[b])}return I},n.V=function(h){fu(this);let _=[];if("string"==typeof h)jU(this,h)&&(_=_.concat(this.g.get(sh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return fu(this),this.i=null,jU(this,h=sh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var b=_[I];const re=encodeURIComponent(String(b)),De=this.V(b);for(b=0;b<De.length;b++){var G=re;""!==De[b]&&(G+="="+encodeURIComponent(String(De[b]))),h.push(G)}}return this.i=h.join("&")},A(kg,BD),kg.prototype.g=function(){return new _I(this.l,this.j)},kg.prototype.i=(h={},function(){return h}),A(_I,ii),(n=_I.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Vg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Vg(this)),this.g&&(this.readyState=3,Vg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;HU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fg(this):Vg(this),3==this.readyState&&HU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Fg(this))},n.Qa=function(h){this.g&&(this.response=h,Fg(this))},n.ga=function(){this.g&&Fg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(_I.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),A(zn,ii);var Wte=/^https?$/i,Zte=["POST","PUT"];function qU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,GU(h),yI(h)}function GU(h){h.A||(h.A=!0,bi(h,"complete"),bi(h,"error"))}function WU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=la(h)||2!=h.Z()))if(h.u&&4==la(h))gU(h.Ea,0,h);else if(bi(h,"readystatechange"),4==la(h)){h.h=!1;try{const De=h.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var b;if(b=0===De){var G=String(h.D).match(VU)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),b=!Wte.test(G?G.toLowerCase():"")}I=b}if(I)bi(h,"complete"),bi(h,"success");else{h.m=6;try{var re=2<la(h)?h.g.statusText:""}catch{re=""}h.l=re+" ["+h.Z()+"]",GU(h)}}finally{yI(h)}}}function yI(h,_){if(h.g){ZU(h);const I=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||bi(h,"ready");try{I.onreadystatechange=b}catch{}}}function ZU(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function la(h){return h.g?h.g.readyState:0}function KU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Lg(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function QU(h){this.Aa=0,this.i=[],this.j=new Pg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lg("baseRetryDelayMs",5e3,h),this.cb=Lg("retryDelaySeedMs",1e4,h),this.Wa=Lg("forwardChannelMaxRetries",2,h),this.wa=Lg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new MU(h&&h.concurrentRequestLimit),this.Da=new qte,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function YD(h){if(YU(h),3==h.G){var _=h.U++,I=ca(h.I);if(Tn(I,"SID",h.K),Tn(I,"RID",_),Tn(I,"TYPE","terminate"),Ug(h,I),(_=new hu(h,h.j,_)).L=2,_.v=mI(ca(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=oB(_.j,null),_.g.ea(_.v)),_.F=Date.now(),fI(_)}iB(h)}function vI(h){h.g&&(XD(h),h.g.cancel(),h.g=null)}function YU(h){vI(h),h.u&&(a.clearTimeout(h.u),h.u=null),EI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function II(h){if(!xU(h.h)&&!h.s){h.s=!0;var _=h.Ga;wg||cU(),Cg||(wg(),Cg=!0),PD.add(_,h),h.B=0}}function JU(h,_){var I;I=_?_.l:h.U++;const b=ca(h.I);Tn(b,"SID",h.K),Tn(b,"RID",I),Tn(b,"AID",h.T),Ug(h,b),h.m&&h.o&&QD(b,h.m,h.o),I=new hu(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=XU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),KD(h.h,I),qD(I,b,_)}function Ug(h,_){h.H&&Le(h.H,function(I,b){Tn(_,b,I)}),h.l&&FU({},function(I,b){Tn(_,b,I)})}function XU(h,_,I){I=Math.min(h.i.length,I);var b=h.l?y(h.l.Na,h.l,h):null;e:{var G=h.i;let re=-1;for(;;){const De=["count="+I];-1==re?0<I?(re=G[0].g,De.push("ofs="+re)):re=0:De.push("ofs="+re);let un=!0;for(let jr=0;jr<I;jr++){let jt=G[jr].g;const si=G[jr].map;if(jt-=re,0>jt)re=Math.max(0,G[jr].g-100),un=!1;else try{Gte(si,De,"req"+jt+"_")}catch{b&&b(si)}}if(un){b=De.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,b}function eB(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;wg||cU(),Cg||(wg(),Cg=!0),PD.add(_,h),h.v=0}}function JD(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Rg(y(h.Fa,h),rB(h,h.v)),h.v++,0))}function XD(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function tB(h){h.g=new hu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=ca(h.qa);Tn(_,"RID","rpc"),Tn(_,"SID",h.K),Tn(_,"AID",h.T),Tn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Tn(_,"TO",h.ja),Tn(_,"TYPE","xmlhttp"),Ug(h,_),h.m&&h.o&&QD(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=mI(ca(_)),I.m=null,I.P=!0,SU(I,h)}function EI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function nB(h,_){var I=null;if(h.g==_){EI(h),XD(h),h.g=null;var b=2}else{if(!ZD(h.h,_))return;I=_.D,OU(h.h,_),b=1}if(0!=h.G)if(_.o)if(1==b){I=_.m?_.m.length:0,_=Date.now()-_.F;var G=h.B;bi(b=lI(),new TU(b,I)),II(h)}else eB(h);else if(3==(G=_.s)||0==G&&0<_.X||!(1==b&&function Qte(h,_){return!(NU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Rg(y(h.Ga,h,_),rB(h,h.B)),h.B++,0)))}(h,_)||2==b&&JD(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),G){case 1:bc(h,5);break;case 4:bc(h,10);break;case 3:bc(h,6);break;default:bc(h,2)}}function rB(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function bc(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),b=h.Xa;const G=!b;b=new Tc(b||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||pI(b,"https"),mI(b),G?function Hte(h,_){const I=new Pg;if(a.Image){const b=new Image;b.onload=E(pu,I,"TestLoadImage: loaded",!0,_,b),b.onerror=E(pu,I,"TestLoadImage: error",!1,_,b),b.onabort=E(pu,I,"TestLoadImage: abort",!1,_,b),b.ontimeout=E(pu,I,"TestLoadImage: timeout",!1,_,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else _(!1)}(b.toString(),I):function zte(h,_){new Pg;const b=new AbortController,G=setTimeout(()=>{b.abort(),pu(0,0,!1,_)},1e4);fetch(h,{signal:b.signal}).then(re=>{clearTimeout(G),pu(0,0,!!re.ok,_)}).catch(()=>{clearTimeout(G),pu(0,0,!1,_)})}(b.toString(),I)}else Di(2);h.G=0,h.l&&h.l.sa(_),iB(h),YU(h)}function iB(h){if(h.G=0,h.ka=[],h.l){const _=kU(h.h);(0!=_.length||0!=h.i.length)&&(k(h.ka,_),k(h.ka,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.ra()}}function sB(h,_,I){var b=I instanceof Tc?ca(I):new Tc(I);if(""!=b.g)_&&(b.g=_+"."+b.g),gI(b,b.s);else{var G=a.location;b=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var re=new Tc(null);b&&pI(re,b),_&&(re.g=_),G&&gI(re,G),I&&(re.l=I),b=re}return _=h.ya,(I=h.D)&&_&&Tn(b,I,_),Tn(b,"VER",h.la),Ug(h,b),b}function oB(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new zn(h.Ca&&!h.pa?new kg({eb:I}):h.pa)).Ha(h.J),_}function aB(){}function wI(){}function ns(h,_){ii.call(this),this.g=new QU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!B(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new oh(this)}function uB(h){jD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function cB(){$D.call(this),this.status=1}function oh(h){this.g=h}(n=zn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():HD.g(),this.v=function vU(h){return h.h||(h.h=h.i())}(this.o?this.o:HD),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){return void qU(this,re)}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var G in b)I.set(G,b[G]);else{if("function"!=typeof b.keys||"function"!=typeof b.get)throw Error("Unknown input type for opt_headers: "+String(b));for(const re of b.keys())I.set(re,b.get(re))}b=Array.from(I.keys()).find(re=>"content-type"==re.toLowerCase()),G=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Zte,_,void 0))||b||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,De]of I)this.g.setRequestHeader(re,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ZU(this),this.u=!0,this.g.send(h),this.u=!1}catch(re){qU(this,re)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,bi(this,"complete"),bi(this,"abort"),yI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yI(this,!0)),zn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?WU(this):this.bb())},n.bb=function(){WU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<la(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Dte(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=QU.prototype).la=8,n.G=1,n.connect=function(h,_,I,b){Di(0),this.W=h,this.H=_||{},I&&void 0!==b&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.I=sB(this,null,this.W),II(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new hu(this,this.j,h);let re=this.o;if(this.S&&(re?(re=R(re),$(re,this.S)):re=this.S),null!==this.m||this.O||(G.H=re,re=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var b=this.i[I];if(void 0===(b="__data__"in b.map&&"string"==typeof(b=b.map.__data__)?b.length:void 0))break;if(4096<(_+=b)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=XU(this,G,_),Tn(I=ca(this.I),"RID",h),Tn(I,"CVER",22),this.D&&Tn(I,"X-HTTP-Session-Id",this.D),Ug(this,I),re&&(this.O?_="headers="+encodeURIComponent(String(zU(re)))+"&"+_:this.m&&QD(I,this.m,re)),KD(this.h,G),this.Ua&&Tn(I,"TYPE","init"),this.P?(Tn(I,"$req",_),Tn(I,"SID","null"),G.T=!0,qD(G,I,null)):qD(G,I,_),this.G=2}}else 3==this.G&&(h?JU(this,h):0==this.i.length||xU(this.h)||JU(this))},n.Fa=function(){if(this.u=null,tB(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Di(10),vI(this),tB(this))},n.Za=function(){null!=this.C&&(this.C=null,vI(this),JD(this),Di(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Di(2)):(this.j.info("Failed to ping google.com"),Di(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=aB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},wI.prototype.g=function(h,_){return new ns(h,_)},A(ns,ii),ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ns.prototype.close=function(){YD(this.g)},ns.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=UD(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&II(_)},ns.prototype.N=function(){this.g.l=null,delete this.j,YD(this.g),delete this.g,ns.aa.N.call(this)},A(uB,jD),A(cB,$D),A(oh,aB),oh.prototype.ua=function(){bi(this.g,"a")},oh.prototype.ta=function(h){bi(this.g,new uB(h))},oh.prototype.sa=function(h){bi(this.g,new cB)},oh.prototype.ra=function(){bi(this.g,"b")},wI.prototype.createWebChannel=wI.prototype.g,ns.prototype.send=ns.prototype.o,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,vO=Qo.createWebChannelTransport=function(){return new wI},yO=Qo.getStatEventTarget=function(){return lI()},_O=Qo.Event=wc,_T=Qo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dI.NO_ERROR=0,dI.TIMEOUT=8,dI.HTTP_ERROR=6,By=Qo.ErrorCode=dI,bU.COMPLETE="complete",mO=Qo.EventType=bU,IU.EventType=Ag,Ag.OPEN="a",Ag.CLOSE="b",Ag.ERROR="c",Ag.MESSAGE="d",ii.prototype.listen=ii.prototype.K,Ep=Qo.WebChannel=IU,gO=Qo.FetchXmlHttpFactory=kg,zn.prototype.listenOnce=zn.prototype.L,zn.prototype.getLastError=zn.prototype.Ka,zn.prototype.getLastErrorCode=zn.prototype.Ba,zn.prototype.getStatus=zn.prototype.Z,zn.prototype.getResponseJson=zn.prototype.Oa,zn.prototype.getResponseText=zn.prototype.oa,zn.prototype.send=zn.prototype.ea,zn.prototype.setWithCredentials=zn.prototype.Ha,pO=Qo.XhrIo=zn}).apply(typeof Uy<"u"?Uy:typeof self<"u"?self:typeof window<"u"?window:{});const IO="@firebase/firestore";class br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let pd="10.12.1";const Ha=new lo.Yd("@firebase/firestore");function gd(){return Ha.logLevel}function ve(n,...e){if(Ha.logLevel<=lo.in.DEBUG){const t=e.map(yT);Ha.debug(`Firestore (${pd}): ${n}`,...t)}}function er(n,...e){if(Ha.logLevel<=lo.in.ERROR){const t=e.map(yT);Ha.error(`Firestore (${pd}): ${n}`,...t)}}function Bi(n,...e){if(Ha.logLevel<=lo.in.WARN){const t=e.map(yT);Ha.warn(`Firestore (${pd}): ${n}`,...t)}}function yT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Oe(n="Unexpected state"){const e=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function He(n,e){n||Oe()}function be(n,e){return n}const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends dt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class EO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class n7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class r7{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,ae.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He("string"==typeof r.accessToken),new EO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(null===e||"string"==typeof e),new br(e)}}class i7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class s7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new i7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He("string"==typeof t.token),this.R=t.token,new wO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function a7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class CO{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=a7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function md(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function TO(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Rn(0,0))}static max(){return new qe(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Oe(),void 0===r?r=e.length-t:r>e.length-t&&Oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pt extends wp{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const u7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends wp{construct(e,t,r){return new En(e,t,r)}static isValidIdentifier(e){return u7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new En(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new _e(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new _e(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new _e(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _e(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Pt.fromString(e))}static fromName(e){return new Pe(Pt.fromString(e).popFirst(5))}static empty(){return new Pe(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Pt(e.slice()))}}class _d{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vT(n){return n.fields.find(e=>2===e.kind)}function Yu(n){return n.fields.filter(e=>2!==e.kind)}_d.UNKNOWN_ID=-1;class Ju{constructor(e,t){this.fieldPath=e,this.kind=t}}class yd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yd(0,Xi.min())}}function bO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Xi(i,Pe.empty(),e)}function DO(n){return new Xi(n.readTime,n.key,-1)}class Xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xi(qe.min(),Pe.empty(),-1)}static max(){return new Xi(qe.max(),Pe.empty(),-1)}}function IT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:st(n.largestBatchId,e.largestBatchId))}const AO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function za(n){return ET.apply(this,arguments)}function ET(){return(ET=(0,ae.Z)(function*(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==AO)throw n;ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,r)=>{t(e)})}static reject(e){return new K((t,r)=>{r(e)})}static waitFor(e){return new K((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next(i=>i?K.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new K((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class jy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new vr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Cp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=wT(r.target.error);this.V.reject(new Cp(e,i))}}static open(e,t,r,i){try{return new jy(t,e.transaction(i,r))}catch(s){throw new Cp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new h7(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ho.S((0,dt.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ve("SimpleDb","Removing database:",e),Xu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,dt.hl)())return!1;if(ho.C())return!0;const e=(0,dt.z$)(),t=ho.S(e),r=0<t&&t<10,i=RO(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.Z)(function*(){return t.db||(ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Cp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new _e(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Cp(e,a))},s.onupgradeneeded=o=>{ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ae.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=jy.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),K.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(ve("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function RO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class d7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Xu(this.B.delete())}}class Cp extends _e{constructor(e,t){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qa(n){return"IndexedDbTransactionError"===n.name}class h7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xu(r)}add(e){return ve("SimpleDb","ADD",this.store.name,e,e),Xu(this.store.add(e))}get(e){return Xu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ve("SimpleDb","DELETE",this.store.name,e),Xu(this.store.delete(e))}count(){return ve("SimpleDb","COUNT",this.store.name),Xu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new K((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new K((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new K((r,i)=>{t.onerror=s=>{const o=wT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new K((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new d7(a),l=t(a.primaryKey,a.value,u);if(l instanceof K){const f=l.catch(m=>(u.done(),K.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>K.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xu(n){return new K((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wT(r.target.error);t(i)}})}let PO=!1;function wT(n){const e=ho.S((0,dt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return PO||(PO=!0,setTimeout(()=>{throw r},0)),r}}return n}class f7{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{ve("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){qa(r)?ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield za(r)}yield t.X(6e4)}))}}class p7{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return K.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ve("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ve("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=DO(s);IT(o,r)>0&&(r=o)}),new Xi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let es=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Tp(n){return null==n}function bp(n){return 0===n&&1/n==-1/0}function MO(n){return"number"==typeof n&&Number.isInteger(n)&&!bp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xO(e)),e=g7(n.get(t),e);return xO(e)}function g7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function xO(n){return n+"\x01\x01"}function fo(n){const e=n.length;if(He(e>=2),2===e)return He("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Oe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Oe()}s=o+2}return new Pt(r)}const NO=["userId","batchId"];function $y(n,e){return[n,Yr(e)]}function OO(n,e,t){return[n,Yr(e),t]}const m7={},_7=["prefixPath","collectionGroup","readTime","documentId"],y7=["prefixPath","collectionGroup","documentId"],v7=["collectionGroup","readTime","prefixPath","documentId"],I7=["canonicalId","targetId"],E7=["targetId","path"],w7=["path","targetId"],C7=["collectionId","parent"],T7=["indexId","uid"],b7=["uid","sequenceNumber"],D7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A7=["indexId","uid","orderedDocumentKey"],S7=["userId","collectionPath","documentId"],R7=["userId","collectionPath","largestBatchId"],P7=["userId","collectionGroup","largestBatchId"],kO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M7=[...kO,"documentOverlays"],FO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VO=FO,LO=[...VO,"indexConfiguration","indexState","indexEntries"],x7=LO;class CT extends SO{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Dr(n,e){const t=be(n);return ho.F(t._e,e)}function UO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pn{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new pn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hy(this.root,e,this.comparator,!0)}}class Hy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Lr.RED,this.left=i??Lr.EMPTY,this.right=s??Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Lr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Lr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1,Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Lr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new pn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $O(this.data.getIterator())}getIteratorFrom(e){return new $O(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class $O{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vd(n){return n.hasNext()?n.getNext():void 0}class ji{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new ji([])}unionWith(e){let t=new nn(En.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class HO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HO("Invalid base64 string: "+s):s}}(e);return new Ir(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const O7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(n){if(He(!!n),"string"==typeof n){let e=0;const t=O7.exec(n);if(He(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Jo(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function zy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function qy(n){const e=n.mapValue.fields.__previous_value__;return zy(e)?qy(e):e}function Dp(n){const e=Yo(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class k7{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}const Za={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gy={nullValue:"NULL_VALUE"};function Ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zy(n)?4:WO(n)?9007199254740991:10:Oe()}function po(n,e){if(n===e)return!0;const t=Ka(n);if(t!==Ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dp(n).isEqual(Dp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yo(i.timestampValue),a=Yo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Jo(n.bytesValue).isEqual(Jo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Hn(i.geoPointValue.latitude)===Hn(s.geoPointValue.latitude)&&Hn(i.geoPointValue.longitude)===Hn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Hn(i.integerValue)===Hn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Hn(i.doubleValue),a=Hn(s.doubleValue);return o===a?bp(o)===bp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return md(n.arrayValue.values||[],e.arrayValue.values||[],po);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UO(o)!==UO(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!po(o[u],a[u])))return!1;return!0}(n,e);default:return Oe()}var s}function Ap(n,e){return void 0!==(n.values||[]).find(t=>po(t,e))}function Qa(n,e){if(n===e)return 0;const t=Ka(n),r=Ka(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Hn(s.integerValue||s.doubleValue),u=Hn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return zO(n.timestampValue,e.timestampValue);case 4:return zO(Dp(n),Dp(e));case 5:return st(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Jo(s),u=Jo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=st(a[l],u[l]);if(0!==f)return f}return st(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=st(Hn(s.latitude),Hn(o.latitude));return 0!==a?a:st(Hn(s.longitude),Hn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const f=Qa(a[l],u[l]);if(f)return f}return st(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Za.mapValue&&o===Za.mapValue)return 0;if(s===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=st(u[m],f[m]);if(0!==y)return y;const E=Qa(a[u[m]],l[f[m]]);if(0!==E)return E}return st(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Oe()}}function zO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return st(n,e);const t=Yo(n),r=Yo(e),i=st(t.seconds,r.seconds);return 0!==i?i:st(t.nanos,r.nanos)}function Id(n){return TT(n)}function TT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Jo(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=TT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${TT(t.fields[o])}`;return i+"}"}(n.mapValue):Oe()}function ec(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bT(n){return!!n&&"integerValue"in n}function Sp(n){return!!n&&"arrayValue"in n}function qO(n){return!!n&&"nullValue"in n}function GO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zy(n){return!!n&&"mapValue"in n}function Rp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ga(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function F7(n){return"nullValue"in n?Gy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ec(Wa.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Oe()}function V7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ec(Wa.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Za:Oe()}function ZO(n,e){const t=Qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function KO(n,e){const t=Qa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rp(t)}setAll(e){let t=En.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Rp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Zy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Zy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ga(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ur(Rp(this.value))}}function QO(n){const e=[];return Ga(n.fields,(t,r)=>{const i=new En([t]);if(Zy(r)){const s=QO(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ji(e)}class wn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,qe.min(),qe.min(),qe.min(),Ur.empty(),0)}static newFoundDocument(e,t,r,i){return new wn(e,1,t,qe.min(),r,i,0)}static newNoDocument(e,t){return new wn(e,2,t,qe.min(),qe.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,qe.min(),qe.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ya{constructor(e,t){this.position=e,this.inclusive=t}}function YO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Pe.comparator(Pe.fromName(o.referenceValue),t.key):Qa(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function JO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!po(n.position[t],e.position[t]))return!1;return!0}class Pp{constructor(e,t="asc"){this.field=e,this.dir=t}}function L7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class XO{}class Mt extends XO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new U7(e,t,r):"array-contains"===t?new $7(e,r):"in"===t?new sk(e,r):"not-in"===t?new H7(e,r):"array-contains-any"===t?new z7(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new B7(e,r):new j7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qa(t,this.value)):null!==t&&Ka(this.value)===Ka(t)&&this.matchesComparison(Qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends XO{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xt(e,t)}matches(e){return Ed(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ed(n){return"and"===n.op}function DT(n){return"or"===n.op}function AT(n){return ek(n)&&Ed(n)}function ek(n){for(const e of n.filters)if(e instanceof Xt)return!1;return!0}function ST(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Id(n.value);if(AT(n))return n.filters.map(e=>ST(e)).join(",");{const e=n.filters.map(t=>ST(t)).join(",");return`${n.op}(${e})`}}function tk(n,e){return n instanceof Mt?(r=n,(i=e)instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&po(r.value,i.value)):n instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&tk(o,i.filters[a]),!0)}(n,e):void Oe();var r,i}function nk(n,e){const t=n.filters.concat(e);return Xt.create(t,n.op)}function rk(n){return n instanceof Mt?`${(t=n).field.canonicalString()} ${t.op} ${Id(t.value)}`:n instanceof Xt?function(t){return t.op.toString()+" {"+t.getFilters().map(rk).join(" ,")+"}"}(n):"Filter";var t}class U7 extends Mt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class B7 extends Mt{constructor(e,t){super(e,"in",t),this.keys=ik(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class j7 extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=ik(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ik(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class $7 extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sp(t)&&Ap(t.arrayValue,this.value)}}class sk extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ap(this.value.arrayValue,t)}}class H7 extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ap(this.value.arrayValue,t)}}class z7 extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ap(this.value.arrayValue,r))}}class q7{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function RT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new q7(n,e,t,r,i,s,o)}function tc(n){const e=be(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ST(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Id(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Id(r)).join(",")),e.ue=t}return e.ue}function Mp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!JO(n.startAt,e.startAt)&&JO(n.endAt,e.endAt)}function Ky(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Qy(n,e){return n.filters.filter(t=>t instanceof Mt&&t.field.isEqual(e))}function ok(n,e,t){let r=Gy,i=!0;for(const s of Qy(n,e)){let o=Gy,a=!0;switch(s.op){case"<":case"<=":o=F7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Gy}ZO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];ZO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function ak(n,e,t){let r=Za,i=!0;for(const s of Qy(n,e)){let o=Za,a=!0;switch(s.op){case">=":case">":o=V7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Za}KO({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];KO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Xo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function uk(n,e,t,r,i,s,o,a){return new Xo(n,e,t,r,i,s,o,a)}function wd(n){return new Xo(n)}function ck(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function PT(n){return null!==n.collectionGroup}function Cd(n){const e=be(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nn(En.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pp(s,r))}),t.has(En.keyField().canonicalString())||e.ce.push(new Pp(En.keyField(),r))}return e.ce}function Jr(n){const e=be(n);return e.le||(e.le=function dk(n,e){if("F"===n.limitType)return RT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Pp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return RT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Cd(n))),e.le}function MT(n,e){const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Yy(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xp(n,e){return Mp(Jr(n),Jr(e))&&n.limitType===e.limitType}function hk(n){return`${tc(Jr(n))}|lt:${n.limitType}`}function Td(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rk(i)).join(", ")}]`),Tp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Id(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Id(i)).join(",")),`Target(${r})`}(Jr(n))}; limitType=${n.limitType})`}function Np(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Cd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=YO(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Cd(r),i)||r.endAt&&!function(o,a,u){const l=YO(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Cd(r),i)));var r,i}function fk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pk(n){return(e,t)=>{let r=!1;for(const i of Cd(n)){const s=G7(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function G7(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Qa(u,l):Oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}class ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jO(this.inner)}size(){return this.innerSize}}const W7=new pn(Pe.comparator);function $i(){return W7}const gk=new pn(Pe.comparator);function Op(...n){let e=gk;for(const t of n)e=e.insert(t.key,t);return e}function mk(n){let e=gk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function go(){return kp()}function _k(){return kp()}function kp(){return new ea(n=>n.toString(),(n,e)=>n.isEqual(e))}const Z7=new pn(Pe.comparator),K7=new nn(Pe.comparator);function ft(...n){let e=K7;for(const t of n)e=e.add(t);return e}const Q7=new nn(st);function xT(){return Q7}function yk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bp(e)?"-0":e}}function vk(n){return{integerValue:""+n}}function Ik(n,e){return MO(e)?vk(e):yk(n,e)}class Jy{constructor(){this._=void 0}}function Y7(n,e,t){return n instanceof bd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zy(s)&&(s=qy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof nc?wk(n,e):n instanceof rc?Ck(n,e):function(i,s){const o=Ek(i,s),a=Tk(o)+Tk(i.Pe);return bT(o)&&bT(i.Pe)?vk(a):yk(i.serializer,a)}(n,e)}function J7(n,e,t){return n instanceof nc?wk(n,e):n instanceof rc?Ck(n,e):t}function Ek(n,e){return n instanceof Dd?bT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class bd extends Jy{}class nc extends Jy{constructor(e){super(),this.elements=e}}function wk(n,e){const t=bk(e);for(const r of n.elements)t.some(i=>po(i,r))||t.push(r);return{arrayValue:{values:t}}}class rc extends Jy{constructor(e){super(),this.elements=e}}function Ck(n,e){let t=bk(e);for(const r of n.elements)t=t.filter(i=>!po(i,r));return{arrayValue:{values:t}}}class Dd extends Jy{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Tk(n){return Hn(n.integerValue||n.doubleValue)}function bk(n){return Sp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fp{constructor(e,t){this.field=e,this.transform=t}}class eZ{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ev{}function Dk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Sd(n.key,Pn.none()):new Ad(n.key,n.data,Pn.none());{const t=n.data,r=Ur.empty();let i=new nn(En.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new ta(n.key,r,new ji(i.toArray()),Pn.none())}}function tZ(n,e,t){n instanceof Ad?function(i,s,o){const a=i.value.clone(),u=Rk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ta?function(i,s,o){if(!Xy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Rk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Sk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Vp(n,e,t,r){return n instanceof Ad?function(s,o,a,u){if(!Xy(s.precondition,o))return a;const l=s.value.clone(),f=Pk(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof ta?function(s,o,a,u){if(!Xy(s.precondition,o))return a;const l=Pk(s.fieldTransforms,u,o),f=o.data;return f.setAll(Sk(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Xy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function nZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Ek(r.transform,i||null);null!=s&&(null===t&&(t=Ur.empty()),t.set(r.field,s))}return t||null}function Ak(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&md(r,i,(s,o)=>function X7(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof nc&&i instanceof nc||r instanceof rc&&i instanceof rc?md(r.elements,i.elements,po):r instanceof Dd&&i instanceof Dd?po(r.Pe,i.Pe):r instanceof bd&&i instanceof bd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ad extends ev{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ta extends ev{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Sk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Rk(n,e,t){const r=new Map;He(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,J7(o,a,t[i]))}return r}function Pk(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Y7(s,o,e))}return r}class Sd extends ev{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NT extends ev{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Vp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_k();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=Dk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ft())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(t,r)=>Ak(t,r))&&md(this.baseMutations,e.baseMutations,(t,r)=>Ak(t,r))}}class kT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){He(e.mutations.length===r.length);let i=Z7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kT(e,t,r,i)}}class FT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var cr,Lt;function xk(n){switch(n){default:return Oe();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function Nk(n){if(void 0===n)return er("GRPC error has no .code"),ee.UNKNOWN;switch(n){case cr.OK:return ee.OK;case cr.CANCELLED:return ee.CANCELLED;case cr.UNKNOWN:return ee.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ee.INTERNAL;case cr.UNAVAILABLE:return ee.UNAVAILABLE;case cr.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case cr.NOT_FOUND:return ee.NOT_FOUND;case cr.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case cr.ABORTED:return ee.ABORTED;case cr.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case cr.DATA_LOSS:return ee.DATA_LOSS;default:return Oe()}}(Lt=cr||(cr={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";function Ok(){return new TextEncoder}const iZ=new Qu([4294967295,4294967295],0);function kk(n){const e=Ok().encode(n),t=new fO;return t.update(e),new Uint8Array(t.digest())}function Fk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qu([t,r],0),new Qu([i,s],0)]}class VT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lp(`Invalid padding: ${t}`);if(r<0)throw new Lp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Lp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Lp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Qu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Qu.fromNumber(r)));return 1===i.compare(iZ)&&(i=new Qu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=kk(e),[r,i]=Fk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new VT(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=kk(e),[r,i]=Fk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Lp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Up{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Up(qe.min(),i,new pn(st),$i(),ft())}}class Bp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bp(r,t,ft(),ft(),ft())}}class nv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Vk{constructor(e,t){this.targetId=e,this.me=t}}class Lk{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Uk{constructor(){this.fe=0,this.ge=jk(),this.pe=Ir.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ft(),t=ft(),r=ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Oe()}}),new Bp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=jk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=Bk(),this.Qe=new pn(st)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Ky(s))if(0===r){const o=new Pe(s.path);this.Ue(t,o,wn.newNoDocument(o,qe.min()))}else He(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Jo(r).toUint8Array()}catch(u){if(u instanceof HO)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new VT(o,i,s)}catch(u){return Bi(u instanceof Lp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ky(a.target)){const u=new Pe(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,wn.newNoDocument(u,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Up(e,t,this.Qe,this.ke,r);return this.ke=$i(),this.qe=Bk(),this.Qe=new pn(st),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Uk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new nn(st),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Uk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Bk(){return new pn(Pe.comparator)}function jk(){return new pn(Pe.comparator)}const oZ={asc:"ASCENDING",desc:"DESCENDING"},aZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uZ={and:"AND",or:"OR"};class cZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function LT(n,e){return n.useProto3Json||Tp(e)?e:{value:e}}function Rd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lZ(n,e){return Rd(n,e.toTimestamp())}function tr(n){return He(!!n),qe.fromTimestamp(function(t){const r=Yo(t);return new Rn(r.seconds,r.nanos)}(n))}function UT(n,e){return BT(n,e).canonicalString()}function BT(n,e){const t=(i=n,new Pt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Hk(n){const e=Pt.fromString(n);return He(eF(e)),e}function jp(n,e){return UT(n.databaseId,e.path)}function mo(n,e){const t=Hk(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(Gk(t))}function zk(n,e){return UT(n.databaseId,e)}function qk(n){const e=Hk(n);return 4===e.length?Pt.emptyPath():Gk(e)}function jT(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gk(n){return He(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Wk(n,e,t){return{name:jp(n,e),fields:t.value.mapValue.fields}}function Zk(n,e,t){const r=mo(n,e.name),i=tr(e.updateTime),s=e.createTime?tr(e.createTime):qe.min(),o=new Ur({mapValue:{fields:e.fields}}),a=wn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function $p(n,e){let t;if(e instanceof Ad)t={update:Wk(n,e.key,e.value)};else if(e instanceof Sd)t={delete:jp(n,e.key)};else if(e instanceof ta)t={update:Wk(n,e.key,e.data),updateMask:yZ(e.fieldMask)};else{if(!(e instanceof NT))return Oe();t={verify:jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Dd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Oe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:lZ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Oe()),t;var s}function $T(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Pn.updateTime(tr(s.updateTime)):void 0!==s.exists?Pn.exists(s.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(He("REQUEST_TIME"===a.setToServerValue),u=new bd):"appendMissingElements"in a?u=new nc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new rc(a.removeAllFromArray.values||[]):"increment"in a?u=new Dd(o,a.increment):Oe();const l=En.fromServerFormat(a.fieldPath);return new Fp(l,u)}(n,i)):[];var s;if(e.update){const i=mo(n,e.update.name),s=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ji((e.updateMask.fieldPaths||[]).map(f=>En.fromServerFormat(f)));return new ta(i,s,o,t,r)}return new Ad(i,s,t,r)}if(e.delete){const i=mo(n,e.delete);return new Sd(i,t)}if(e.verify){const i=mo(n,e.verify);return new NT(i,t)}return Oe()}function Kk(n,e){return{documents:[zk(n,e.path)]}}function rv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zk(n,i);const s=function(l){if(0!==l.length)return Xk(Xt.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:Ja((y=f).field),direction:gZ(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=LT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function Yk(n){let e=qk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){He(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=Jk(m);return y instanceof Xt&&AT(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Pp(Pd((A=y).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Tp(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new Ya((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new Ya(m.values||[],!m.before)}(t.endAt)),uk(e,i,o,s,a,"F",u,l)}function Jk(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pd(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pd(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pd(t.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pd(t.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(n):void 0!==n.fieldFilter?Mt.create(Pd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Xt.create(t.compositeFilter.filters.map(r=>Jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}}(t.compositeFilter.op))}(n):Oe();var t}function gZ(n){return oZ[n]}function mZ(n){return aZ[n]}function _Z(n){return uZ[n]}function Ja(n){return{fieldPath:n.canonicalString()}}function Pd(n){return En.fromServerFormat(n.fieldPath)}function Xk(n){return n instanceof Mt?function(t){if("=="===t.op){if(GO(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NAN"}};if(qO(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(GO(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NAN"}};if(qO(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(t.field),op:mZ(t.op),value:t.value}}}(n):n instanceof Xt?function(t){const r=t.getFilters().map(i=>Xk(i));return 1===r.length?r[0]:{compositeFilter:{op:_Z(t.op),filters:r}}}(n):Oe()}function yZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class na{constructor(e,t,r,i,s=qe.min(),o=qe.min(),a=Ir.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tF{constructor(e){this.ct=e}}function nF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:iv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jp(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Rd(s,o.version.toTimestamp()),createTime:Rd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ic(e.version)};else{if(!e.isUnknownDocument())return Oe();r.unknownDocument={path:t.path.toArray(),version:ic(e.version)}}var s,o;return r}function iv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ic(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sc(n){const e=new Rn(n.seconds,n.nanoseconds);return qe.fromTimestamp(e)}function oc(n,e){const t=(e.baseMutations||[]).map(s=>$T(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>$T(n.ct,s)),i=Rn.fromMillis(e.localWriteTimeMs);return new OT(e.batchId,i,t,r)}function Hp(n){const e=sc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sc(n.lastLimboFreeSnapshotVersion):qe.min();let r;return r=void 0!==n.query.documents?(He(1===(s=n.query).documents.length),Jr(wd(qk(s.documents[0])))):function(s){return Jr(Yk(s))}(n.query),new na(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken));var s}function rF(n,e){const t=ic(e.snapshotVersion),r=ic(e.lastLimboFreeSnapshotVersion);let i;i=Ky(e.target)?Kk(n.ct,e.target):rv(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function HT(n){const e=Yk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Yy(e,e.limit,"L"):e}function zT(n,e){return new FT(e.largestBatchId,$T(n.ct,e.overlayMutation))}function iF(n,e){const t=e.path.lastSegment();return[n,Yr(e.path.popLast()),t]}function sF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ic(r.readTime),documentKey:Yr(r.documentKey.path),largestBatchId:r.largestBatchId}}class IZ{getBundleMetadata(e,t){return oF(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:sc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return oF(e).put({bundleId:(i=t).id,createTime:ic(tr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return aF(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:HT(s.bundledQuery),readTime:sc(s.readTime)};var s})}saveNamedQuery(e,t){return aF(e).put({name:(i=t).name,readTime:ic(tr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function oF(n){return Dr(n,"bundles")}function aF(n){return Dr(n,"namedQueries")}class sv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new sv(e,t.uid||"")}getOverlay(e,t){return zp(e).get(iF(this.userId,t)).next(r=>r?zT(this.serializer,r):null)}getOverlays(e,t){const r=go();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new FT(t,o);i.push(this.ht(e,a))}),K.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Yr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(zp(e).j("collectionPathOverlayIndex",a))}),K.waitFor(s)}getOverlaysForCollection(e,t,r){const i=go(),s=Yr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zp(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=zT(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=go();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const m=zT(this.serializer,l);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return zp(e).put(function(i,s,o){const[a,u,l]=iF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:$p(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function zp(n){return Dr(n,"documentOverlays")}class ac{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),bp(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Yo(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Jo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?WO(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Oe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Pe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function EZ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uF(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=EZ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}ac.bt=new ac;class wZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=uF(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=uF(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CZ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class TZ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class qp{constructor(){this.Gt=new wZ,this.zt=new CZ(this.Gt),this.jt=new TZ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class uc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new uc(this.indexId,this.documentKey,this.arrayValue,r)}}function Xa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cF(n.arrayValue,e.arrayValue),0!==t?t:(t=cF(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function cF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class lF{constructor(e){this.Yt=new nn((t,r)=>En.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(He(e.collectionGroup===this.collectionId),this.en)return!1;const t=vT(e);if(void 0!==t&&!this.nn(t))return!1;const r=Yu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new nn(En.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Ju(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ju(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ju(r.field,"asc"===r.dir?0:1)));return new _d(_d.UNKNOWN_ID,this.collectionId,t,yd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function dF(n){var e,t;if(He(n instanceof Mt||n instanceof Xt),n instanceof Mt){if(n instanceof sk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Mt.create(n.field,"==",s)))||[];return Xt.create(i,"or")}return n}const r=n.filters.map(i=>dF(i));return Xt.create(r,n.op)}function bZ(n){if(0===n.getFilters().length)return[];const e=WT(dF(n));return He(hF(e)),qT(e)||GT(e)?[e]:e.getFilters()}function qT(n){return n instanceof Mt}function GT(n){return n instanceof Xt&&AT(n)}function hF(n){return qT(n)||GT(n)||function(t){if(t instanceof Xt&&DT(t)){for(const r of t.getFilters())if(!qT(r)&&!GT(r))return!1;return!0}return!1}(n)}function WT(n){if(He(n instanceof Mt||n instanceof Xt),n instanceof Mt)return n;if(1===n.filters.length)return WT(n.filters[0]);const e=n.filters.map(r=>WT(r));let t=Xt.create(e,n.op);return t=ov(t),hF(t)?t:(He(t instanceof Xt),He(Ed(t)),He(t.filters.length>1),t.filters.reduce((r,i)=>ZT(r,i)))}function ZT(n,e){let t;return He(n instanceof Mt||n instanceof Xt),He(e instanceof Mt||e instanceof Xt),t=n instanceof Mt?e instanceof Mt?Xt.create([n,e],"and"):fF(n,e):e instanceof Mt?fF(e,n):function(i,s){if(He(i.filters.length>0&&s.filters.length>0),Ed(i)&&Ed(s))return nk(i,s.getFilters());const o=DT(i)?i:s,a=DT(i)?s:i,u=o.filters.map(l=>ZT(l,a));return Xt.create(u,"or")}(n,e),ov(t)}function fF(n,e){if(Ed(e))return nk(e,n.getFilters());{const t=e.filters.map(r=>ZT(n,r));return Xt.create(t,"or")}}function ov(n){if(He(n instanceof Mt||n instanceof Xt),n instanceof Mt)return n;const e=n.getFilters();if(1===e.length)return ov(e[0]);if(ek(n))return n;const t=e.map(i=>ov(i)),r=[];return t.forEach(i=>{i instanceof Mt?r.push(i):i instanceof Xt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Xt.create(r,n.op)}class DZ{constructor(){this._n=new KT}addToCollectionParentIndex(e,t){return this._n.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Xi.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class KT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new nn(Pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nn(Pt.comparator)).toArray()}}const av=new Uint8Array(0);class AZ{constructor(e,t){this.databaseId=t,this.an=new KT,this.un=new ea(r=>tc(r),(r,i)=>Mp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Yr(i)};return pF(e).put(s)}return K.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[TO(t),""],!1,!0);return pF(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(fo(o.parent))}return r})}addFieldIndex(e,t){const r=Gp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=xd(e);return s.next(a=>{o.put(sF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Gp(e),i=xd(e),s=Md(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Gp(e),r=Md(e),i=xd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return K.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new lF(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Md(e);let i=!0;const s=new Map;return K.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ft();const a=[];return K.forEach(s,(u,l)=>{var Q;ve("IndexedDbIndexManager",`Using index ${Q=u,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`} to execute ${tc(t)}`);const f=function(Q,ue){const we=vT(ue);if(void 0===we)return null;for(const Le of Qy(Q,we.fieldPath))switch(Le.op){case"array-contains-any":return Le.value.arrayValue.values||[];case"array-contains":return[Le.value]}return null}(l,u),m=function(Q,ue){const we=new Map;for(const Le of Yu(ue))for(const j of Qy(Q,Le.fieldPath))switch(j.op){case"==":case"in":we.set(Le.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return we.set(Le.fieldPath.canonicalString(),j.value),Array.from(we.values())}return null}(l,u),y=function(Q,ue){const we=[];let Le=!0;for(const j of Yu(ue)){const R=0===j.kind?ok(Q,j.fieldPath,Q.startAt):ak(Q,j.fieldPath,Q.startAt);we.push(R.value),Le&&(Le=R.inclusive)}return new Ya(we,Le)}(l,u),E=function(Q,ue){const we=[];let Le=!0;for(const j of Yu(ue)){const R=0===j.kind?ak(Q,j.fieldPath,Q.endAt):ok(Q,j.fieldPath,Q.endAt);we.push(R.value),Le&&(Le=R.inclusive)}return new Ya(we,Le)}(l,u),A=this.hn(u,l,y),x=this.hn(u,l,E),k=this.Pn(u,l,m),Z=this.In(u.indexId,f,A,y.inclusive,x,E.inclusive,k);return K.forEach(Z,B=>r.G(B,t.limit).next(Q=>{Q.forEach(ue=>{const we=Pe.fromSegments(ue.documentKey);o.has(we)||(o=o.add(we),a.push(we))})}))}).next(()=>a)}return K.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:bZ(Xt.create(e.filters,"and")).map(r=>RT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const y=t?this.Tn(t[m/l]):av,E=this.En(e,y,r[m%l],i),A=this.dn(e,y,s[m%l],o),x=a.map(k=>this.En(e,y,k,!0));f.push(...this.createRange(E,A,x))}return f}En(e,t,r,i){const s=new uc(e,Pe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new uc(e,Pe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new lF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return K.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new nn(En.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new qp;for(const i of Yu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);ac.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new qp;return ac.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new qp;return ac.bt.Pt(ec(this.databaseId,t),r.Ht(function(s){const o=Yu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new qp);let s=0;for(const o of Yu(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&Sp(a))i=this.mn(i,o,a);else{const l=u.Ht(o.kind);ac.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new qp;u.seed(a.Wt()),ac.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Gp(e),i=xd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return K.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,m){const y=m?new yd(m.sequenceNumber,new Xi(sc(m.readTime),new Pe(fo(m.documentKey)),m.largestBatchId)):yd.empty(),E=f.fields.map(([A,x])=>new Ju(En.fromServerFormat(A),x));return new _d(f.indexId,f.collectionGroup,E,y)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:st(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Gp(e),s=xd(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>K.forEach(a,u=>s.put(sF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?K.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),K.forEach(a,u=>this.pn(e,i,u).next(l=>{const f=this.yn(s,u);return l.isEqual(f)?K.resolve():this.wn(e,s,u,l,f)}))))})}Sn(e,t,r,i){return Md(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Md(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Md(e);let s=new nn(Xa);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new uc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new nn(Xa);const i=this.An(t,e);if(null==i)return r;const s=vT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Sp(o))for(const a of o.arrayValue.values||[])r=r.add(new uc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new uc(t.indexId,e.key,av,i));return r}wn(e,t,r,i,s){ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,f,m,y){const E=u.getIterator(),A=l.getIterator();let x=vd(E),k=vd(A);for(;x||k;){let Z=!1,B=!1;if(x&&k){const Q=f(x,k);Q<0?B=!0:Q>0&&(Z=!0)}else null!=x?B=!0:Z=!0;Z?(m(k),k=vd(A)):B?(y(x),x=vd(E)):(x=vd(E),k=vd(A))}}(i,s,Xa,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),K.waitFor(o)}gn(e){let t=1;return xd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Xa(o,a)).filter((o,a,u)=>!a||0!==Xa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Xa(o,e),u=Xa(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,av,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,av,[]]))}return s}Dn(e,t){return Xa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gF)}getMinOffset(e,t){return K.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Oe())).next(gF)}}function pF(n){return Dr(n,"collectionParents")}function Md(n){return Dr(n,"indexEntries")}function Gp(n){return Dr(n,"indexConfiguration")}function xd(n){return Dr(n,"indexState")}function gF(n){He(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;IT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xi(e.readTime,e.documentKey,t)}const mF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xr(e,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _F(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(u.next(()=>{He(1===a)}));const l=[];for(const f of t.mutations){const m=OO(e,f.key.path,t.batchId);s.push(i.delete(m)),l.push(f.key)}return K.waitFor(s).next(()=>l)}function uv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Oe();e=n.noDocument}return JSON.stringify(e).length}Xr.DEFAULT_COLLECTION_PERCENTILE=10,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xr.DEFAULT=new Xr(41943040,Xr.DEFAULT_COLLECTION_PERCENTILE,Xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xr.DISABLED=new Xr(-1,0,0);class cv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){He(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new cv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Nd(e),o=eu(e);return o.add({}).next(a=>{He("number"==typeof a);const u=new OT(a,t,r,i),l=function(E,A,x){const k=x.baseMutations.map(B=>$p(E.ct,B)),Z=x.mutations.map(B=>$p(E.ct,B));return{userId:A,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:k,mutations:Z}}(this.serializer,this.userId,u),f=[];let m=new nn((y,E)=>st(y.canonicalString(),E.canonicalString()));for(const y of i){const E=OO(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(l)),f.push(s.put(E,m7))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),K.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return eu(e).get(t).next(r=>r?(He(r.userId===this.userId),oc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?K.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return eu(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(He(a.batchId>=r),s=oc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return eu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eu(e).U("userMutationsIndex",t).next(r=>r.map(i=>oc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$y(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Nd(e).J({range:i},(o,a,u)=>{const[l,f,m]=o,y=fo(f);if(l===this.userId&&t.path.isEqual(y))return eu(e).get(m).next(E=>{if(!E)throw Oe();He(E.userId===this.userId),s.push(oc(this.serializer,E))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(st);const i=[];return t.forEach(s=>{const o=$y(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Nd(e).J({range:a},(l,f,m)=>{const[y,E,A]=l,x=fo(E);y===this.userId&&s.path.isEqual(x)?r=r.add(A):m.done()});i.push(u)}),K.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=$y(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new nn(st);return Nd(e).J({range:o},(u,l,f)=>{const[m,y,E]=u,A=fo(y);m===this.userId&&r.isPrefixOf(A)?A.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(eu(e).get(s).next(o=>{if(null===o)throw Oe();He(o.userId===this.userId),r.push(oc(this.serializer,o))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _F(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Nd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=fo(s[1]);i.push(u)}else a.done()}).next(()=>{He(0===i.length)})})}containsKey(e,t){return yF(e,this.userId,t)}xn(e){return vF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function yF(n,e,t){const r=$y(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Nd(n).J({range:s,H:!0},(a,u,l)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),l.done()}).next(()=>o)}function eu(n){return Dr(n,"mutations")}function Nd(n){return Dr(n,"documentMutations")}function vF(n){return Dr(n,"mutationQueues")}class cc{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new cc(0)}static Ln(){return new cc(-1)}}class SZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new cc(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>qe.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Od(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(He(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Od(e).J((o,a)=>{const u=Hp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Od(e).J((r,i)=>{const s=Hp(i);t(s)})}Bn(e){return IF(e).get("targetGlobalKey").next(t=>(He(null!==t),t))}kn(e,t){return IF(e).put("targetGlobalKey",t)}qn(e,t){return Od(e).put(rF(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Od(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=Hp(a);Mp(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=tu(e);return t.forEach(o=>{const a=Yr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),K.waitFor(i)}removeMatchingKeys(e,t,r){const i=tu(e);return K.forEach(t,s=>{const o=Yr(s.path);return K.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=tu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tu(e);let s=ft();return i.J({range:r,H:!0},(o,a,u)=>{const l=fo(o[1]),f=new Pe(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=Yr(t.path),i=IDBKeyRange.bound([r],[TO(r)],!1,!0);let s=0;return tu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Od(e).get(t).next(r=>r?Hp(r):null)}}function Od(n){return Dr(n,"targets")}function IF(n){return Dr(n,"targetGlobal")}function tu(n){return Dr(n,"targetDocuments")}function EF([n,e],[t,r]){const i=st(n,t);return 0===i?st(e,r):i}class RZ{constructor(e){this.Kn=e,this.buffer=new nn(EF),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){qa(r)?ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield za(r)}yield t.zn(3e5)}))}}class PZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return K.resolve(es.oe);const r=new RZ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(mF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mF):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),gd()<=lo.in.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class MZ{constructor(e,t){this.db=e,this.garbageCollector=function CF(n,e){return new PZ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return lv(e,r)}removeReference(e,t,r){return lv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lv(e,t)}er(e,t){return function(i,s){let o=!1;return vF(i).Y(a=>yF(i,a,s).next(u=>(u&&(o=!0),K.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,qe.min()),tu(e).delete([0,Yr(o.path)])))});i.push(u)}}).next(()=>K.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lv(e,t)}Xn(e,t){const r=tu(e);let i,s=es.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==es.oe&&t(new Pe(fo(i)),s),s=l,i=u):s=es.oe}).next(()=>{s!==es.oe&&t(new Pe(fo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lv(n,e){return tu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Yr(e.path),sequenceNumber:i}));var i}class TF{constructor(){this.changes=new ea(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lc(e).put(r)}removeEntry(e,t,r){return lc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],iv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=wn.newInvalidDocument(t);return lc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wp(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:wn.newInvalidDocument(t)};return lc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wp(t))},(i,s)=>{r={document:this.nr(t,s),size:uv(s)}}).next(()=>r)}getEntries(e,t){let r=$i();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=$i(),i=new pn(Pe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,uv(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return K.resolve();let i=new nn(SF);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Wp(i.first()),Wp(i.last())),o=i.getIterator();let a=o.getNext();return lc(e).J({index:"documentKeyIndex",range:s},(u,l,f)=>{const m=Pe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&SF(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.$(Wp(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),iv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lc(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=$i();for(const m of l){const y=this.nr(Pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Np(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=$i();const o=AF(t,r),a=AF(t,Xi.max());return lc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,f)=>{const m=this.nr(Pe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new NZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return DF(e).get("remoteDocumentGlobalKey").next(t=>(He(!!t),t))}tr(e,t){return DF(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function vZ(n,e){let t;if(e.document)t=Zk(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=sc(e.noDocument.readTime);t=wn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const r=Pe.fromSegments(e.unknownDocument.path),i=sc(e.unknownDocument.version);t=wn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Rn(i[0],i[1]);return qe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(qe.min()))return r}return wn.newInvalidDocument(e)}}function bF(n){return new xZ(n)}class NZ extends TF{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ea(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new nn((s,o)=>st(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=nF(this.ar.serializer,o);i=i.add(s.path.popLast());const l=uv(u);r+=l-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=nF(this.ar.serializer,o.convertToNoDocument(qe.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function DF(n){return Dr(n,"remoteDocumentGlobal")}function lc(n){return Dr(n,"remoteDocumentsV14")}function Wp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AF(n,e){const t=e.documentKey.path.toArray();return[n,iv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=st(t[s],r[s]),i)return i;return i=st(t.length,r.length),i||(i=st(t[t.length-2],r[r.length-2]),i||st(t[t.length-1],r[r.length-1]))}class OZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class RF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Vp(r.mutation,i,ji.empty(),Rn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ft()){const i=go();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Op();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ft()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=$i();const o=kp(),a=kp();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof ta)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),Vp(f.mutation,l,f.mutation.getFieldMask(),Rn.now())):o.set(l.key,ji.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new OZ(f,null!==(m=o.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=kp();let i=new pn((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||ji.empty();f=a.applyToLocalView(l,f),r.set(u,f);const m=(i.get(a.batchId)||ft()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,m=_k();f.forEach(y=>{if(!s.has(y)){const E=Dk(t.get(y),r.get(y));null!==E&&m.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,m))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):PT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):K.resolve(go());let a=-1,u=s;return o.next(l=>K.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?K.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ft())).next(f=>({batchId:a,changes:mk(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let i=Op();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Op();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,u=>{const l=(m=t,y=u.child(s),new Xo(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,wn.newInvalidDocument(f)))});let a=Op();return o.forEach((u,l)=>{const f=s.get(u);void 0!==f&&Vp(f.mutation,l,ji.empty(),Rn.now()),Np(t,l)&&(a=a.insert(u,l))}),a})}}class kZ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return K.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:tr(i.createTime)}),K.resolve();var i}getNamedQuery(e,t){return K.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:HT(i.bundledQuery),readTime:tr(i.readTime)}),K.resolve();var i}}class FZ{constructor(){this.overlays=new pn(Pe.comparator),this.hr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return K.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),K.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const i=go(),s=t.length+1,o=new Pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pn((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=go(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=go(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return K.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FT(t,r));let s=this.hr.get(t);void 0===s&&(s=ft(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class QT{constructor(){this.Pr=new nn(Ar.Ir),this.Tr=new nn(Ar.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Ar(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ar(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Pe(new Pt([])),r=new Ar(t,e),i=new Ar(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Pe(new Pt([])),r=new Ar(t,e),i=new Ar(t,e+1);let s=ft();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Ar(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ar{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Pe.comparator(e.key,t.key)||st(e.pr,t.pr)}static Er(e,t){return st(e.pr,t.pr)||Pe.comparator(e.key,t.key)}}class VZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new nn(Ar.Ir)}checkEmpty(e){return K.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new OT(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ar(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,t){return K.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ar(t,0),i=new Ar(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nn(st);return t.forEach(i=>{const s=new Ar(i,0),o=new Ar(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),K.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const o=new Ar(new Pe(s),0);let a=new nn(st);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),K.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){He(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return K.forEach(t.mutations,i=>{const s=new Ar(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Ar(t,0),i=this.wr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return K.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LZ{constructor(e){this.vr=e,this.docs=new pn(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let r=$i();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wn.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=$i();const o=t.path,a=new Pe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||IT(DO(f),r)<=0||(i.has(f.key)||Np(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Oe()}Fr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UZ(this)}getSize(e){return K.resolve(this.size)}}class UZ extends TF{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class BZ{constructor(e){this.persistence=e,this.Mr=new ea(t=>tc(t),Mp),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new QT,this.targetCount=0,this.Lr=cc.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),K.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new cc(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.qn(t),K.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.Nr.containsKey(t))}}class YT{constructor(e,t){this.Br={},this.overlays={},this.kr=new es(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new BZ(this),this.indexManager=new DZ,this.remoteDocumentCache=new LZ(r=>this.referenceDelegate.Kr(r)),this.serializer=new tF(t),this.$r=new kZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FZ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new VZ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const i=new jZ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return K.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class jZ extends SO{constructor(e){super(),this.currentSequenceNumber=e}}class dv{constructor(e){this.persistence=e,this.zr=new QT,this.jr=null}static Hr(e){return new dv(e)}get Jr(){if(this.jr)return this.jr;throw Oe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),K.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Jr,r=>{const i=Pe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,qe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return K.or([()=>K.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class $Z{constructor(e){this.serializer=e}O(e,t,r,i){const s=new jy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NO,{unique:!0}),u.createObjectStore("documentMutations"),PF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=K.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),PF(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NO,{unique:!0});const m=l.store("mutations"),y=f.map(E=>m.put(E));return K.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:S7});l.createIndex("collectionPathOverlayIndex",R7,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",P7,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:_7});l.createIndex("documentKeyIndex",y7),l.createIndex("collectionGroupIndex",v7)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:T7}).createIndex("sequenceNumberIndex",b7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:D7}).createIndex("documentKeyIndex",A7,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=uv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>K.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>K.forEach(a,u=>{He(u.userId===s.userId);const l=oc(this.serializer,u);return _F(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Pt(o),l=[0,Yr(u)];s.push(t.get(l).next(f=>f?K.resolve():t.put({targetId:0,path:Yr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>K.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:C7});const r=t.store("collectionParents"),i=new KT,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Yr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Pt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{const f=fo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=Hp(i),o=rF(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Pe(Pt.fromString(m.document.name).popFirst(5)):m.noDocument?Pe.fromSegments(m.noDocument.path):m.unknownDocument?Pe.fromSegments(m.unknownDocument.path):Oe()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>K.waitFor(i))}si(e,t){const r=t.store("mutations"),i=bF(this.serializer),s=new YT(dv.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:ft();oc(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),K.forEach(a,(u,l)=>{const f=new br(l),m=sv.lt(this.serializer,f),y=s.getIndexManager(f),E=cv.lt(f,this.serializer,y,s.referenceDelegate);return new RF(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new CT(t,es.oe),u).next()})})}}function PF(n){n.createObjectStore("targetDocuments",{keyPath:E7}).createIndex("documentTargetsIndex",w7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I7,{unique:!0}),n.createObjectStore("targetGlobal")}const JT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class XT{constructor(e,t,r,i,s,o,a,u,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!XT.D())throw new _e(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MZ(this,i),this.Ti=t+"main",this.serializer=new tF(u),this.Ei=new ho(this.Ti,this.ui,new $Z(this.serializer)),this.Qr=new SZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bF(this.serializer),this.$r=new IZ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(ee.FAILED_PRECONDITION,JT);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new es(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(qa(e))return ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Zp(e).get("owner").next(t=>K.resolve(this.Si(t)))}bi(e){return fv(e).delete(this.clientId)}Di(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Dr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return K.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?K.resolve(!0):Zp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new _e(ee.FAILED_PRECONDITION,JT);return!1}}return!(!this.networkEnabled||!this.inForeground)||fv(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CT(t,es.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>fv(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return cv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AZ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(u=this.ui)?x7:15===u?LO:14===u?VO:13===u?FO:12===u?M7:11===u?kO:void Oe();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new CT(a,this.kr?this.kr.next():es.oe),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new _e(ee.FAILED_PRECONDITION,AO);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Zp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(ee.FAILED_PRECONDITION,JT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zp(e).put("owner",t)}static D(){return ho.D()}yi(e){const t=Zp(e);return t.get("owner").next(r=>this.Si(r)?(ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):K.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,dt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zp(n){return Dr(n,"owner")}function fv(n){return Dr(n,"clientMetadata")}function e0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class t0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ft(),i=ft();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t0(e,t.fromCache,r,i)}}class HZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,dt.G6)()?8:RO((0,dt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new HZ;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(gd()<=lo.in.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),K.resolve()):(gd()<=lo.in.DEBUG&&ve("QueryEngine","Query:",Td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(gd()<=lo.in.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(t))):K.resolve())}ji(e,t){if(ck(t))return K.resolve(null);let r=Jr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Yy(t,null,"F"),r=Jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(t,a);return this.Xi(t,l,o,u.readTime)?this.ji(e,Yy(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return ck(t)||i.isEqual(qe.min())?K.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?K.resolve(null):(gd()<=lo.in.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Td(t)),this.es(e,o,t,bO(i,-1)).next(a=>a))})}Zi(e,t){let r=new nn(pk(e));return t.forEach((i,s)=>{Np(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return gd()<=lo.in.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Td(t)),this.zi.getDocumentsMatchingQuery(e,t,Xi.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class zZ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new pn(st),this.rs=new ea(s=>tc(s),Mp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function xF(n,e,t,r){return new zZ(n,e,t,r)}function NF(n,e){return n0.apply(this,arguments)}function n0(){return(n0=(0,ae.Z)(function*(n,e){const t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ft();for(const l of i){o.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function OF(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function kF(n,e,t){let r=ft(),i=ft();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=$i();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(qe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function WZ(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kd(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new na(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Fd(n,e,t){return r0.apply(this,arguments)}function r0(){return(r0=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!qa(o))throw o;ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function pv(n,e,t){const r=be(n);let i=qe.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){const m=be(u),y=m.rs.get(f);return void 0!==y?K.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,o,Jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:qe.min(),t?s:ft())).next(a=>(LF(r,fk(e),a),{documents:a,hs:s})))}function FF(n,e){const t=be(n),r=be(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function VF(n,e){const t=be(n),r=t.ss.get(e)||qe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,bO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(LF(t,e,i),i))}function LF(n,e,t){let r=n.ss.get(e)||qe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function s0(){return(s0=(0,ae.Z)(function*(n,e,t,r){const i=be(n);let s=ft(),o=$i();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(s=s.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield kd(i,(f=r,Jr(wd(Pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>kF(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function KZ(n,e){return o0.apply(this,arguments)}function o0(){return(o0=(0,ae.Z)(function*(n,e,t=ft()){const r=yield kd(n,Jr(HT(e.bundledQuery))),i=be(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=tr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Ir.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function UF(n,e){return`firestore_clients_${n}_${e}`}function BF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function a0(n,e){return`firestore_targets_${n}_${e}`}class gv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new _e(i.error.code,i.error.message))),o?new gv(e,t,i.state,s):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new _e(r.error.code,r.error.message))),s?new Kp(e,r.state,i):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=xT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=MO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new mv(e,s):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class u0{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new u0(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class c0{constructor(){this.activeTargetIds=xT()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l0{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new pn(st),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=UF(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new c0),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(UF(e.persistenceKey,i));if(s){const o=mv.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(a0(this.persistenceKey,e));if(r){const i=Kp.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(a0(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ve("SharedClientState","READ",e,t),t}setItem(e,t){ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=es.oe;if(null!=o)try{const u=JSON.parse(o);He("number"==typeof u),a=u}catch(u){er("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==es.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new gv(this.currentUser,e,t,r),s=BF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=BF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=a0(this.persistenceKey,e),s=new Kp(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return mv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return gv.Es(new br(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Kp.Es(i,t)}xs(e){return u0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=xT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class jF{constructor(){this.no=new c0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new c0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QZ{io(e){}shutdown(){}}class $F{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _v=null;function d0(){return null===_v?_v=268435456+Math.round(2147483648*Math.random()):_v++,"0x"+_v.toString(16)}const YZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JZ{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ei="WebChannelConnection";class XZ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=d0(),u=this.vo(t,r.toUriEncodedString());ve("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,u,l,i).then(f=>(ve("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Bi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+pd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${YZ[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=d0();return new Promise((o,a)=>{const u=new pO;u.setWithCredentials(!0),u.listenOnce(mO.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case By.NO_ERROR:const f=u.getResponseJson();ve(ei,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case By.TIMEOUT:ve(ei,`RPC '${e}' ${s} timed out`),a(new _e(ee.DEADLINE_EXCEEDED,"Request time out"));break;case By.HTTP_ERROR:const m=u.getStatus();if(ve(ei,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const A=function(k){const Z=k.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Z)>=0?Z:ee.UNKNOWN}(E.status);a(new _e(A,E.message))}else a(new _e(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _e(ee.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{ve(ei,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);ve(ei,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=d0(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vO(),a=yO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new gO({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ve(ei,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let y=!1,E=!1;const A=new JZ({lo:k=>{E?ve(ei,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(y||(ve(ei,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ve(ei,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},ho:()=>m.close()}),x=(k,Z,B)=>{k.listen(Z,Q=>{try{B(Q)}catch(ue){setTimeout(()=>{throw ue},0)}})};return x(m,Ep.EventType.OPEN,()=>{E||(ve(ei,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),x(m,Ep.EventType.CLOSE,()=>{E||(E=!0,ve(ei,`RPC '${e}' stream ${i} transport closed`),A.po())}),x(m,Ep.EventType.ERROR,k=>{E||(E=!0,Bi(ei,`RPC '${e}' stream ${i} transport errored:`,k),A.po(new _e(ee.UNAVAILABLE,"The operation could not be completed")))}),x(m,Ep.EventType.MESSAGE,k=>{var Z;if(!E){const B=k.data[0];He(!!B);const ue=B.error||(null===(Z=B[0])||void 0===Z?void 0:Z.error);if(ue){ve(ei,`RPC '${e}' stream ${i} received error:`,ue);const we=ue.status;let Le=function(V){const $=cr[V];if(void 0!==$)return Nk($)}(we),j=ue.message;void 0===Le&&(Le=ee.INTERNAL,j="Unknown error status: "+we+" with message "+ue.message),E=!0,A.po(new _e(Le,j)),m.close()}else ve(ei,`RPC '${e}' stream ${i} received:`,B),A.yo(B)}}),x(a,_O.STAT_EVENT,k=>{k.stat===_T.PROXY?ve(ei,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===_T.NOPROXY&&ve(ei,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}}function HF(){return typeof window<"u"?window:null}function yv(){return typeof document<"u"?document:null}function Qp(n){return new cZ(n,!0)}class h0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class zF{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new h0(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ae.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ae.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new _e(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ae.Z)(function*(){e.state=0,e.start()}))}c_(e){return ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eK extends zF{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function hZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Oe(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(He(void 0===f||"string"==typeof f),Ir.fromBase64String(f||"")):(He(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Ir.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?ee.UNKNOWN:Nk(l.code);return new _e(f,l.message||"")}(o);t=new Lk(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=mo(n,r.document.name),s=tr(r.document.updateTime),o=r.document.createTime?tr(r.document.createTime):qe.min(),a=new Ur({mapValue:{fields:r.document.fields}}),u=wn.newFoundDocument(i,s,o,a);t=new nv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=mo(n,r.document),s=r.readTime?tr(r.readTime):qe.min(),o=wn.newNoDocument(i,s);t=new nv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=mo(n,r.document);t=new nv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Oe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new rZ(i,s);t=new Vk(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?qe.min():o.readTime?tr(o.readTime):qe.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=jT(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Ky(u)?{documents:Kk(s,u)}:{query:rv(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$k(s,o.resumeToken);const l=LT(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(qe.min())>0){a.readTime=Rd(s,o.snapshotVersion.toTimestamp());const l=LT(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function pZ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=jT(this.serializer),t.removeTarget=e,this.i_(t)}}class tK extends zF{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function fZ(n,e){return n&&n.length>0?(He(void 0!==e),n.map(t=>function(i,s){let o=tr(i.updateTime?i.updateTime:s);return o.isEqual(qe.min())&&(o=tr(s)),new eZ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.A_(r,t)}return He(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=jT(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$p(this.serializer,r))};this.i_(t)}}class nK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _e(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,BT(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(ee.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,BT(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ee.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class rK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(er(t),this.y_=!1):ve("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class iK{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,ae.Z)(function*(){var u;nu(o)&&(ve("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ae.Z)(function*(f){const m=be(f);m.M_.add(4),yield Vd(m),m.N_.set("Unknown"),m.M_.delete(4),yield Yp(m)}),function l(f){return u.apply(this,arguments)})(o))}))}),this.N_=new rK(r,i)}}function Yp(n){return f0.apply(this,arguments)}function f0(){return(f0=(0,ae.Z)(function*(n){if(nu(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Vd(n){return p0.apply(this,arguments)}function p0(){return(p0=(0,ae.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function vv(n,e){const t=be(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),_0(t)?m0(t):Bd(t).Xo()&&g0(t,e))}function Ld(n,e){const t=be(n),r=Bd(t);t.F_.delete(e),r.Xo()&&qF(t,e),0===t.F_.size&&(r.Xo()?r.n_():nu(t)&&t.N_.set("Unknown"))}function g0(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bd(n).P_(e)}function qF(n,e){n.L_.xe(e),Bd(n).I_(e)}function m0(n){n.L_=new sZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Bd(n).start(),n.N_.w_()}function _0(n){return nu(n)&&!Bd(n).Zo()&&n.F_.size>0}function nu(n){return 0===be(n).M_.size}function GF(n){n.L_=void 0}function sK(n){return y0.apply(this,arguments)}function y0(){return(y0=(0,ae.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function oK(n){return v0.apply(this,arguments)}function v0(){return(v0=(0,ae.Z)(function*(n){n.F_.forEach((e,t)=>{g0(n,e)})})).apply(this,arguments)}function aK(n,e){return I0.apply(this,arguments)}function I0(){return(I0=(0,ae.Z)(function*(n,e){GF(n),_0(n)?(n.N_.D_(e),m0(n)):n.N_.set("Unknown")})).apply(this,arguments)}function uK(n,e,t){return E0.apply(this,arguments)}function E0(){return E0=(0,ae.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof Lk&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.F_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.F_.delete(u),s.L_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Iv(n,r)}else if(e instanceof nv?n.L_.Ke(e):e instanceof Vk?n.L_.He(e):n.L_.We(e),!t.isEqual(qe.min()))try{const r=yield OF(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(l);f&&s.F_.set(l,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(Ir.EMPTY_BYTE_STRING,f.snapshotVersion)),qF(s,u);const m=new na(f.target,u,l,f.sequenceNumber);g0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ve("RemoteStore","Failed to raise snapshot:",r),yield Iv(n,r)}var r}),E0.apply(this,arguments)}function Iv(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,ae.Z)(function*(n,e,t){if(!qa(e))throw e;n.M_.add(1),yield Vd(n),n.N_.set("Offline"),t||(t=()=>OF(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Yp(n)}))})).apply(this,arguments)}function WF(n,e){return e().catch(t=>Iv(n,t,e))}function Ud(n){return C0.apply(this,arguments)}function C0(){return(C0=(0,ae.Z)(function*(n){const e=be(n),t=ru(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;cK(e);)try{const i=yield WZ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,lK(e,i)}catch(i){yield Iv(e,i)}ZF(e)&&KF(e)})).apply(this,arguments)}function cK(n){return nu(n)&&n.v_.length<10}function lK(n,e){n.v_.push(e);const t=ru(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function ZF(n){return nu(n)&&!ru(n).Zo()&&n.v_.length>0}function KF(n){ru(n).start()}function dK(n){return T0.apply(this,arguments)}function T0(){return(T0=(0,ae.Z)(function*(n){ru(n).V_()})).apply(this,arguments)}function hK(n){return b0.apply(this,arguments)}function b0(){return(b0=(0,ae.Z)(function*(n){const e=ru(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function fK(n,e,t){return D0.apply(this,arguments)}function D0(){return(D0=(0,ae.Z)(function*(n,e,t){const r=n.v_.shift(),i=kT.from(r,e,t);yield WF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ud(n)})).apply(this,arguments)}function pK(n,e){return A0.apply(this,arguments)}function A0(){return A0=(0,ae.Z)(function*(n,e){var t;e&&ru(n).E_&&(yield(t=(0,ae.Z)(function*(i,s){if(xk(a=s.code)&&a!==ee.ABORTED){const o=i.v_.shift();ru(i).t_(),yield WF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Ud(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),ZF(n)&&KF(n)}),A0.apply(this,arguments)}function QF(n,e){return S0.apply(this,arguments)}function S0(){return(S0=(0,ae.Z)(function*(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ve("RemoteStore","RemoteStore received new credentials");const r=nu(t);t.M_.add(3),yield Vd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Yp(t)})).apply(this,arguments)}function R0(n,e){return P0.apply(this,arguments)}function P0(){return(P0=(0,ae.Z)(function*(n,e){const t=be(n);e?(t.M_.delete(2),yield Yp(t)):e||(t.M_.add(2),yield Vd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Bd(n){return n.B_||(n.B_=function(t,r,i){const s=be(t);return s.f_(),new eK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:sK.bind(null,n),To:oK.bind(null,n),Ao:aK.bind(null,n),h_:uK.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.B_.t_(),_0(n)?m0(n):n.N_.set("Unknown")):(yield n.B_.stop(),GF(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function ru(n){return n.k_||(n.k_=function(t,r,i){const s=be(t);return s.f_(),new tK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:dK.bind(null,n),Ao:pK.bind(null,n),R_:hK.bind(null,n),A_:fK.bind(null,n)}),n.x_.push(function(){var e=(0,ae.Z)(function*(t){t?(n.k_.t_(),yield Ud(n)):(yield n.k_.stop(),n.v_.length>0&&(ve("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class M0{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new M0(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jd(n,e){if(er("AsyncQueue",`${e}: ${n}`),qa(n))return new _e(ee.UNAVAILABLE,`${e}: ${n}`);throw n}class $d{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Op(),this.sortedSet=new pn(this.comparator)}static emptySet(e){return new $d(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $d)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $d;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YF{constructor(){this.q_=new pn(Pe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Oe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hd{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Hd(e,t,$d.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class gK{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class mK{constructor(){this.queries=new ea(e=>hk(e),xp),this.onlineState="Unknown",this.z_=new Set}}function x0(n,e){return N0.apply(this,arguments)}function N0(){return(N0=(0,ae.Z)(function*(n,e){const t=be(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new gK,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=jd(o,`Initialization of query '${Td(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&F0(t)})).apply(this,arguments)}function O0(n,e){return k0.apply(this,arguments)}function k0(){return(k0=(0,ae.Z)(function*(n,e){const t=be(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function _K(n,e){const t=be(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&F0(t)}function yK(n,e,t){const r=be(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function F0(n){n.z_.forEach(e=>{e.next()})}var V0,JF;(JF=V0||(V0={})).J_="default",JF.Cache="cache";class L0{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Hd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==V0.Cache}}class vK{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class XF{constructor(e){this.serializer=e}Ps(e){return mo(this.serializer,e)}Is(e){return e.metadata.exists?Zk(this.serializer,e.document,!1):wn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return tr(e)}}class IK{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Pt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new XF(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ft()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function ZZ(n,e,t,r){return s0.apply(this,arguments)}(e.localStore,new XF(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield KZ(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function eV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tV{constructor(e){this.key=e}}class nV{constructor(e){this.key=e}}class rV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ft(),this.mutatedKeys=ft(),this.Ia=pk(e),this.Ta=new $d(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new YF,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),E=Np(this.query,m)?m:null,A=!!y&&this.mutatedKeys.has(y.key),x=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;y&&E?y.data.isEqual(E.data)?A!==x&&(r.track({type:3,doc:E}),k=!0):this.Ra(y,E)||(r.track({type:2,doc:E}),k=!0,(u&&this.Ia(E,u)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),k=!0):y&&!E&&(r.track({type:1,doc:y}),k=!0,(u||l)&&(a=!0)),k&&(E?(o=o.add(E),s=x?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(E,A){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return x(E)-x(A)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,0!==o.length||l?{snapshot:new Hd(this.query,e.Ta,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new YF,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ft(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new nV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new tV(r))}),t}pa(e){this.la=e.hs,this.Pa=ft();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Hd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class EK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wK{constructor(e){this.key=e,this.wa=!1}}class CK{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ea(a=>hk(a),xp),this.Da=new Map,this.Ca=new Set,this.va=new pn(Pe.comparator),this.Fa=new Map,this.Ma=new QT,this.xa={},this.Oa=new Map,this.Na=cc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function TK(n,e){return U0.apply(this,arguments)}function U0(){return(U0=(0,ae.Z)(function*(n,e,t=!0){const r=Ev(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield iV(r,e,t,!0),i})).apply(this,arguments)}function bK(n,e){return B0.apply(this,arguments)}function B0(){return(B0=(0,ae.Z)(function*(n,e){const t=Ev(n);yield iV(t,e,!0,!1)})).apply(this,arguments)}function iV(n,e,t,r){return j0.apply(this,arguments)}function j0(){return(j0=(0,ae.Z)(function*(n,e,t,r){const i=yield kd(n.localStore,Jr(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield $0(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&vv(n.remoteStore,i),a})).apply(this,arguments)}function $0(n,e,t,r,i){return H0.apply(this,arguments)}function H0(){return H0=(0,ae.Z)(function*(n,e,t,r,i){n.Ba=(m,y,E)=>{return(A=(0,ae.Z)(function*(k,Z,B,Q){let ue=Z.view.da(B);ue.Xi&&(ue=yield pv(k.localStore,Z.query,!1).then(({documents:R})=>Z.view.da(R,ue)));const we=Q&&Q.targetChanges.get(Z.targetId),Le=Q&&null!=Q.targetMismatches.get(Z.targetId),j=Z.view.applyChanges(ue,k.isPrimaryClient,we,Le);return eb(k,Z.targetId,j.fa),j.snapshot}),function x(k,Z,B,Q){return A.apply(this,arguments)})(n,m,y,E);var A};const s=yield pv(n.localStore,e,!0),o=new rV(e,s.hs),a=o.da(s.documents),u=Bp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);eb(n,t,l.fa);const f=new EK(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),H0.apply(this,arguments)}function DK(n,e,t){return z0.apply(this,arguments)}function z0(){return(z0=(0,ae.Z)(function*(n,e,t){const r=be(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!xp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Fd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ld(r.remoteStore,i.targetId),zd(r,i.targetId)}).catch(za))):(zd(r,i.targetId),yield Fd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function AK(n,e){return q0.apply(this,arguments)}function q0(){return(q0=(0,ae.Z)(function*(n,e){const t=be(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ld(t.remoteStore,r.targetId))})).apply(this,arguments)}function G0(){return(G0=(0,ae.Z)(function*(n,e,t){const r=db(n);try{const i=yield function(o,a){const u=be(o),l=Rn.now(),f=a.reduce((E,A)=>E.add(A.key),ft());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=$i(),x=ft();return u.os.getEntries(E,f).next(k=>{A=k,A.forEach((Z,B)=>{B.isValidDocument()||(x=x.add(Z))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,A)).next(k=>{m=k;const Z=[];for(const B of a){const Q=nZ(B,m.get(B.key).overlayedDocument);null!=Q&&Z.push(new ta(B.key,Q,QO(Q.value.mapValue),Pn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,Z,a)}).next(k=>{y=k;const Z=k.applyToLocalDocumentSet(m,x);return u.documentOverlayCache.saveOverlays(E,k.batchId,Z)})}).then(()=>({batchId:y.batchId,changes:mk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new pn(st)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield ra(r,i.changes),yield Ud(r.remoteStore)}catch(i){const s=jd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function sV(n,e){return W0.apply(this,arguments)}function W0(){return(W0=(0,ae.Z)(function*(n,e){const t=be(n);try{const r=yield function GZ(n,e){const t=be(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let E=y.withSequenceNumber(s.currentSequenceNumber);var x,k,Z;null!==e.targetMismatches.get(m)?E=E.withResumeToken(Ir.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),k=E,Z=f,(0===(x=y).resumeToken.approximateByteSize()||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,E))});let u=$i(),l=ft();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(kF(s,o,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(qe.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?He(o.wa):i.removedDocuments.size>0&&(He(o.wa),o.wa=!1))}),yield ra(t,r,e)}catch(r){yield za(r)}})).apply(this,arguments)}function oV(n,e,t){const r=be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=be(o);u.onlineState=a;let l=!1;u.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&F0(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RK(n,e,t){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,ae.Z)(function*(n,e,t){const r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new pn(Pe.comparator);o=o.insert(s,wn.newNoDocument(s,qe.min()));const a=ft().add(s),u=new Up(qe.min(),new Map,new pn(st),o,a);yield sV(r,u),r.va=r.va.remove(s),r.Fa.delete(e),tb(r)}else yield Fd(r.localStore,e,!1).then(()=>zd(r,e,t)).catch(za)})).apply(this,arguments)}function PK(n,e){return K0.apply(this,arguments)}function K0(){return(K0=(0,ae.Z)(function*(n,e){const t=be(n),r=e.batch.batchId;try{const i=yield function qZ(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const m=l.batch,y=m.keys();let E=K.resolve();return y.forEach(A=>{E=E.next(()=>f.getEntry(u,A)).next(x=>{const k=l.docVersions.get(A);He(null!==k),x.version.compareTo(k)<0&&(m.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),f.addEntry(x)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ft();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);X0(t,r,null),J0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ra(t,i)}catch(i){yield za(i)}})).apply(this,arguments)}function MK(n,e,t){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,ae.Z)(function*(n,e,t){const r=be(n);try{const i=yield function(o,a){const u=be(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(m=>(He(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(l,m))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);X0(r,e,t),J0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ra(r,i)}catch(i){yield za(i)}})).apply(this,arguments)}function Y0(){return(Y0=(0,ae.Z)(function*(n,e){const t=be(n);nu(t.remoteStore)||ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=be(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=jd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function J0(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function X0(n,e,t){const r=be(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function zd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||aV(n,r)})}function aV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Ld(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),tb(n))}function eb(n,e,t){for(const r of t)r instanceof tV?(n.Ma.addReference(r.key,e),NK(n,r)):r instanceof nV?(ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||aV(n,r.key)):Oe()}function NK(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(ve("SyncEngine","New document in limbo: "+t),n.Ca.add(r),tb(n))}function tb(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Pe(Pt.fromString(e)),r=n.Na.next();n.Fa.set(r,new wK(t)),n.va=n.va.insert(t,r),vv(n.remoteStore,new na(Jr(wd(t.path)),r,"TargetPurposeLimboResolution",es.oe))}}function ra(n,e,t){return nb.apply(this,arguments)}function nb(){return nb=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=t0.Ki(u.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,ae.Z)(function*(l,f){const m=be(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>K.forEach(f,E=>K.forEach(E.qi,A=>m.persistence.referenceDelegate.addReference(y,E.targetId,A)).next(()=>K.forEach(E.Qi,A=>m.persistence.referenceDelegate.removeReference(y,E.targetId,A)))))}catch(y){if(!qa(y))throw y;ve("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const A=m.ns.get(E),k=A.withLastLimboFreeSnapshotVersion(A.snapshotVersion);m.ns=m.ns.insert(E,k)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,s))}),nb.apply(this,arguments)}function OK(n,e){return rb.apply(this,arguments)}function rb(){return(rb=(0,ae.Z)(function*(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ve("SyncEngine","User change. New user:",e.toKey());const r=yield NF(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new _e(ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ra(t,r.us)}var s})).apply(this,arguments)}function kK(n,e){const t=be(n),r=t.Fa.get(e);if(r&&r.wa)return ft().add(r.key);{let i=ft();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function FK(n,e){return ib.apply(this,arguments)}function ib(){return(ib=(0,ae.Z)(function*(n,e){const t=be(n),r=yield pv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&eb(t,e.targetId,i.fa),i})).apply(this,arguments)}function VK(n,e){return sb.apply(this,arguments)}function sb(){return(sb=(0,ae.Z)(function*(n,e){const t=be(n);return VF(t.localStore,e).then(r=>ra(t,r))})).apply(this,arguments)}function LK(n,e,t,r){return ob.apply(this,arguments)}function ob(){return(ob=(0,ae.Z)(function*(n,e,t,r){const i=be(n),s=yield function(a,u){const l=be(a),f=be(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(y=>y?l.localDocuments.getDocuments(m,y):K.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Ud(i.remoteStore):"acknowledged"===t||"rejected"===t?(X0(i,e,r||null),J0(i,e),u=e,be(be(i.localStore).mutationQueue).Mn(u)):Oe(),yield ra(i,s)):ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function ab(){return(ab=(0,ae.Z)(function*(n,e){const t=be(n);if(Ev(t),db(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uV(t,r.toArray());t.La=!0,yield R0(t.remoteStore,!0);for(const s of i)vv(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(zd(t,o),Fd(t.localStore,o,!0))),Ld(t.remoteStore,o)}),yield i,yield uV(t,r),function(o){const a=be(o);a.Fa.forEach((u,l)=>{Ld(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new pn(Pe.comparator)}(t),t.La=!1,yield R0(t.remoteStore,!1)}})).apply(this,arguments)}function uV(n,e,t){return ub.apply(this,arguments)}function ub(){return(ub=(0,ae.Z)(function*(n,e,t){const r=be(n),i=[],s=[];for(const o of e){let a;const u=r.Da.get(o);if(u&&0!==u.length){a=yield kd(r.localStore,Jr(u[0]));for(const l of u){const f=r.ba.get(l),m=yield FK(r,f);m.snapshot&&s.push(m.snapshot)}}else{const l=yield FF(r.localStore,o);a=yield kd(r.localStore,l),yield $0(r,cV(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function cV(n){return uk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function BK(n){return t=be(n).localStore,be(be(t).persistence).Bi();var t}function jK(n,e,t,r){return cb.apply(this,arguments)}function cb(){return(cb=(0,ae.Z)(function*(n,e,t,r){const i=be(n);if(i.La)return void ve("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield VF(i.localStore,fk(s[0])),a=Up.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ir.EMPTY_BYTE_STRING);yield ra(i,o,a);break}case"rejected":yield Fd(i.localStore,e,!0),zd(i,e,r);break;default:Oe()}})).apply(this,arguments)}function $K(n,e,t){return lb.apply(this,arguments)}function lb(){return(lb=(0,ae.Z)(function*(n,e,t){const r=Ev(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ve("SyncEngine","Adding an already active target "+i);continue}const s=yield FF(r.localStore,i),o=yield kd(r.localStore,s);yield $0(r,cV(s),o.targetId,!1,o.resumeToken),vv(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Fd(r.localStore,i,!1).then(()=>{Ld(r.remoteStore,i),zd(r,i)}).catch(za))}})).apply(this,arguments)}function Ev(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RK.bind(null,e),e.Sa.h_=_K.bind(null,e.eventManager),e.Sa.ka=yK.bind(null,e.eventManager),e}function db(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MK.bind(null,e),e}class Jp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=Qp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createPersistence(e){return new YT(dv.Hr,this.serializer)}createSharedClientState(e){return new jF}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hb extends Jp{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield db(r.Qa.syncEngine),yield Ud(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return xF(this.persistence,new MF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new wF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new p7(t,this.persistence);return new f7(e.asyncQueue,r)}createPersistence(e){const t=e0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xr.withCacheSize(this.cacheSizeBytes):Xr.DEFAULT;return new XT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HF(),yv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jF}}class lV extends hb{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof l0&&(r.sharedClientState.syncEngine={Zs:LK.bind(null,i),Xs:jK.bind(null,i),eo:$K.bind(null,i),Bi:BK.bind(null,i),Ys:VK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,ae.Z)(function*(o){yield function UK(n,e){return ab.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=HF();if(!l0.D(t))throw new _e(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=e0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new l0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qd{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>oV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=OK.bind(null,r.syncEngine),yield R0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mK}createDatastore(e){const t=Qp(e.databaseInfo.databaseId),r=new XZ(e.databaseInfo);return new nK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>oV(this.syncEngine,t,0),a=$F.D()?new $F:new QZ,new iK(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,l,f){const m=new CK(i,s,o,a,u,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.Z)(function*(){var t,r;yield(r=(0,ae.Z)(function*(s){const o=be(s);ve("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Vd(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function dV(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class wv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qK{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new vr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ae.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new vK(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ae.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new _e(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.Z)(function*(o,a){const u=be(o),l={documents:a.map(E=>jp(u.serializer,E))},f=yield u.xo("BatchGetDocuments",u.serializer.databaseId,Pt.emptyPath(),l,a.length),m=new Map;f.forEach(E=>{const A=function dZ(n,e){return"found"in e?function(r,i){He(!!i.found);const s=mo(r,i.found.name),o=tr(i.found.updateTime),a=i.found.createTime?tr(i.found.createTime):qe.min(),u=new Ur({mapValue:{fields:i.found.fields}});return wn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){He(!!i.missing),He(!!i.readTime);const s=mo(r,i.missing),o=tr(i.readTime);return wn.newNoDocument(s,o)}(n,e):Oe()}(u.serializer,E);m.set(A.key.toString(),A)});const y=[];return a.forEach(E=>{const A=m.get(E.toString());He(!!A),y.push(A)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pe.fromPath(i);e.mutations.push(new NT(s,e.precondition(s)))}),yield(r=(0,ae.Z)(function*(s,o){const a=be(s),u={writes:o.map(l=>$p(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,Pt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Oe();t=qe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qe.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qe.min()))throw new _e(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WK{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new h0(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ae.Z)(function*(){const t=new GK(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Tp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xk(t)}return!1}}class ZK{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=CO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,ae.Z)(function*(a){ve("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ve("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=jd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Cv(n,e){return fb.apply(this,arguments)}function fb(){return fb=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(s){r.isEqual(s)||(yield NF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),fb.apply(this,arguments)}function pb(n,e){return gb.apply(this,arguments)}function gb(){return(gb=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mb(n);ve("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QF(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function hV(n){return"FirebaseError"===n.name?n.code===ee.FAILED_PRECONDITION||n.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function mb(n){return _b.apply(this,arguments)}function _b(){return(_b=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!hV(t))throw t;Bi("Error using user provided cache. Falling back to memory cache: "+t),yield Cv(n,new Jp)}}else ve("FirestoreClient","Using default OfflineComponentProvider"),yield Cv(n,new Jp);return n._offlineComponents})).apply(this,arguments)}function Tv(n){return yb.apply(this,arguments)}function yb(){return(yb=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield pb(n,n._uninitializedComponentsProvider._online)):(ve("FirestoreClient","Using default OnlineComponentProvider"),yield pb(n,new qd))),n._onlineComponents})).apply(this,arguments)}function fV(n){return mb(n).then(e=>e.persistence)}function Gd(n){return mb(n).then(e=>e.localStore)}function pV(n){return Tv(n).then(e=>e.remoteStore)}function vb(n){return Tv(n).then(e=>e.syncEngine)}function Wd(n){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,ae.Z)(function*(n){const e=yield Tv(n),t=e.eventManager;return t.onListen=TK.bind(null,e.syncEngine),t.onUnlisten=DK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AK.bind(null,e.syncEngine),t})).apply(this,arguments)}function mV(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,u,l){const f=new wv({next:y=>{o.enqueueAndForget(()=>O0(s,m));const E=y.docs.has(a);!E&&y.fromCache?l.reject(new _e(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?l.reject(new _e(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new L0(wd(a.path),f,{includeMetadataChanges:!0,ra:!0});return x0(s,m)}(yield Wd(n),n.asyncQueue,e,t,r)})),r.promise}function _V(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(s,o,a,u,l){const f=new wv({next:y=>{o.enqueueAndForget(()=>O0(s,m)),y.fromCache&&"server"===u.source?l.reject(new _e(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new L0(a,f,{includeMetadataChanges:!0,ra:!0});return x0(s,m)}(yield Wd(n),n.asyncQueue,e,t,r)})),r.promise}function yV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const vV=new Map;function Eb(n,e,t){if(!t)throw new _e(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IV(n,e,t,r){if(!0===e&&!0===r)throw new _e(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EV(n){if(!Pe.isDocumentKey(n))throw new _e(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wV(n){if(Pe.isDocumentKey(n))throw new _e(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Oe()}function vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bv(n);throw new _e(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CV(n,e){if(e<=0)throw new _e(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class TV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new t7;switch(r.type){case"firstParty":return new s7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=vV.get(t);r&&(ve("ComponentProvider","Removing Datastore"),vV.delete(t),r.terminate())}(this),Promise.resolve()}}function bV(n,e,t,r={}){var i;const s=(n=vt(n,Xp))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=br.MOCK_USER;else{a=(0,dt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new _e(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new br(l)}n._authCredentials=new n7(new EO(a,u))}}class Br{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Br(this.firestore,e,this._query)}}class Cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}}class _o extends Br{constructor(e,t,r){super(e,t,wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Pe(e))}withConverter(e){return new _o(this.firestore,e,this._path)}}function DV(n,e,...t){if(n=(0,dt.m9)(n),Eb("collection","path",e),n instanceof Xp){const r=Pt.fromString(e,...t);return wV(r),new _o(n,null,r)}{if(!(n instanceof Cn||n instanceof _o))throw new _e(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return wV(r),new _o(n.firestore,null,r)}}function Dv(n,e,...t){if(n=(0,dt.m9)(n),1===arguments.length&&(e=CO.newId()),Eb("doc","path",e),n instanceof Xp){const r=Pt.fromString(e,...t);return EV(r),new Cn(n,null,new Pe(r))}{if(!(n instanceof Cn||n instanceof _o))throw new _e(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return EV(r),new Cn(n.firestore,n instanceof _o?n.converter:null,new Pe(r))}}function AV(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),(n instanceof Cn||n instanceof _o)&&(e instanceof Cn||e instanceof _o)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wb(n,e){return n=(0,dt.m9)(n),e=(0,dt.m9)(e),n instanceof Br&&e instanceof Br&&n.firestore===e.firestore&&xp(n._query,e._query)&&n.converter===e.converter}class aQ{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new h0(this,"async_queue_retry"),this.hu=()=>{const t=yv();t&&ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=yv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=yv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new vr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ae.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!qa(t))throw t;ve("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,er("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=M0.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Oe()}verifyOperationInProgress(){}du(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function Cb(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class uQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rn extends Xp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new aQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SV(this),this._firestoreClient.terminate()}}function lQ(n,e){const t="object"==typeof n?n:(0,$n.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,$n._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,dt.P0)("firestore");s&&bV(i,...s)}return i}function Mn(n){return n._firestoreClient||SV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function SV(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new k7(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new ZK(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function RV(n,e,t){const r=new vr;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield Cv(n,t),yield pb(n,e),r.resolve()}catch(i){const s=i;if(!hV(s))throw s;Bi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function PV(n){if(n._initialized||n._terminated)throw new _e(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yo(Ir.fromBase64String(e))}catch(t){throw new _e(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yo(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ia{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _e(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dc{constructor(e){this._methodName=e}}class Av{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}const IQ=/^__.*__$/;class EQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ta(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ad(e,this.data,t,this.fieldTransforms)}}class MV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ta(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Sv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Sv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Mv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(xV(this.fu)&&IQ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class wQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Qp(e)}Fu(e,t,r,i=!1){return new Sv({fu:e,methodName:t,vu:r,path:En.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hc(n){const e=n._freezeSettings(),t=Qp(n._databaseId);return new wQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Rv(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);Pb("Data must be an object, but it was:",o,r);const a=kV(r,o);let u,l;if(s.merge)u=new ji(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=ng(e,m,t);if(!o.contains(y))throw new _e(ee.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);VV(f,y)||f.push(y)}u=new ji(f),l=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,l=o.fieldTransforms;return new EQ(new Ur(a),u,l)}class tg extends dc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tg}}function NV(n,e,t){return new Sv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tb extends dc{_toFieldTransform(e){return new Fp(e.path,new bd)}isEqual(e){return e instanceof Tb}}class bb extends dc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NV(this,e,!0),r=this.Mu.map(s=>fc(s,t)),i=new nc(r);return new Fp(e.path,i)}isEqual(e){return e instanceof bb&&(0,dt.vZ)(this.Mu,e.Mu)}}class Db extends dc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=NV(this,e,!0),r=this.Mu.map(s=>fc(s,t)),i=new rc(r);return new Fp(e.path,i)}isEqual(e){return e instanceof Db&&(0,dt.vZ)(this.Mu,e.Mu)}}class Ab extends dc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Dd(e.serializer,Ik(e.serializer,this.xu));return new Fp(e.path,t)}isEqual(e){return e instanceof Ab&&this.xu===e.xu}}function Sb(n,e,t,r){const i=n.Fu(1,e,t);Pb("Data must be an object, but it was:",i,r);const s=[],o=Ur.empty();Ga(r,(u,l)=>{const f=Pv(e,u,t);l=(0,dt.m9)(l);const m=i.Su(f);if(l instanceof tg)s.push(f);else{const y=fc(l,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new ji(s);return new MV(o,a,i.fieldTransforms)}function Rb(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[ng(e,r,t)],u=[i];if(s.length%2!=0)throw new _e(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(ng(e,s[y])),u.push(s[y+1]);const l=[],f=Ur.empty();for(let y=a.length-1;y>=0;--y)if(!VV(l,a[y])){const E=a[y];let A=u[y];A=(0,dt.m9)(A);const x=o.Su(E);if(A instanceof tg)l.push(E);else{const k=fc(A,x);null!=k&&(l.push(E),f.set(E,k))}}const m=new ji(l);return new MV(f,m,o.fieldTransforms)}function OV(n,e,t,r=!1){return fc(t,n.Fu(r?4:3,e))}function fc(n,e){if(FV(n=(0,dt.m9)(n)))return Pb("Unsupported field value:",e,n),kV(n,e);if(n instanceof dc)return function(r,i){if(!xV(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=fc(a,i.bu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,dt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ik(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Rn.fromDate(r);return{timestampValue:Rd(i.serializer,s)}}if(r instanceof Rn){const s=new Rn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rd(i.serializer,s)}}if(r instanceof Av)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:$k(i.serializer,r._byteString)};if(r instanceof Cn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:UT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${bv(r)}`)}(n,e)}function kV(n,e){const t={};return jO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(n,(r,i)=>{const s=fc(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function FV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof Av||n instanceof yo||n instanceof Cn||n instanceof dc)}function Pb(n,e,t){if(!FV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=bv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function ng(n,e,t){if((e=(0,dt.m9)(e))instanceof ia)return e._internalPath;if("string"==typeof e)return Pv(n,e);throw Mv("Field path arguments must be of type string or ",n,!1,void 0,t)}const CQ=new RegExp("[~\\*/\\[\\]]");function Pv(n,e,t){if(e.search(CQ)>=0)throw Mv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ia(...e.split("."))._internalPath}catch{throw Mv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _e(ee.INVALID_ARGUMENT,a+n+u)}function VV(n,e){return n.some(t=>t.isEqual(e))}class rg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TQ extends rg{data(){return super.data()}}function xv(n,e){return"string"==typeof e?Pv(n,e):e instanceof ia?e._internalPath:e._delegate._internalPath}function LV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mb{}class ig extends Mb{}function iu(n,e,...t){let r=[];e instanceof Mb&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Zd).length,a=s.filter(u=>u instanceof sg).length;if(o>1||o>0&&a>0)throw new _e(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class sg extends ig{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sg(e,t,r)}_apply(e){const t=this._parse(e);return $V(e._query,t),new Br(e.firestore,e.converter,MT(e._query,t))}_parse(e){const t=hc(e.firestore);return function(s,o,a,u,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new _e(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){jV(m,f);const E=[];for(const A of m)E.push(BV(u,s,A));y={arrayValue:{values:E}}}else y=BV(u,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||jV(m,f),y=OV(a,"where",m,"in"===f||"not-in"===f);return Mt.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Zd extends Mb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Xt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)$V(o,u),o=MT(o,u)}(e._query,t),new Br(e.firestore,e.converter,MT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xb extends ig{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xb(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new _e(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new _e(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pp(s,o)}(e._query,this._field,this._direction);return new Br(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Xo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Nv extends ig{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Nv(e,t,r)}_apply(e){return new Br(e.firestore,e.converter,Yy(e._query,this._limit,this._limitType))}}class Ov extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ov(e,t,r)}_apply(e){const t=UV(e,this.type,this._docOrFields,this._inclusive);return new Br(e.firestore,e.converter,(s=t,new Xo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class kv extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kv(e,t,r)}_apply(e){const t=UV(e,this.type,this._docOrFields,this._inclusive);return new Br(e.firestore,e.converter,(s=t,new Xo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function UV(n,e,t,r){if(t[0]=(0,dt.m9)(t[0]),t[0]instanceof rg)return function(s,o,a,u,l){if(!u)throw new _e(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Cd(s))if(m.field.isKeyField())f.push(ec(o,u.key));else{const y=u.data.field(m.field);if(zy(y))throw new _e(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new _e(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(y)}return new Ya(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=hc(n.firestore);return function(o,a,u,l,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new _e(ee.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let A=0;A<f.length;A++){const x=f[A];if(y[A].field.isKeyField()){if("string"!=typeof x)throw new _e(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof x}`);if(!PT(o)&&-1!==x.indexOf("/"))throw new _e(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${x}' contains a slash.`);const k=o.path.child(Pt.fromString(x));if(!Pe.isDocumentKey(k))throw new _e(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const Z=new Pe(k);E.push(ec(a,Z))}else{const k=OV(u,l,x);E.push(k)}}return new Ya(E,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BV(n,e,t){if("string"==typeof(t=(0,dt.m9)(t))){if(""===t)throw new _e(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PT(e)&&-1!==t.indexOf("/"))throw new _e(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!Pe.isDocumentKey(r))throw new _e(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ec(n,new Pe(r))}if(t instanceof Cn)return ec(n,t._key);throw new _e(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bv(t)}.`)}function jV(n,e){if(!Array.isArray(n)||0===n.length)throw new _e(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $V(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new _e(ee.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Nb{convertValue(e,t="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ga(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Av(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dp(e));default:return null}}convertTimestamp(e){const t=Yo(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);He(eF(r));const i=new Wa(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(t)||er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Fv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class NQ extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends rg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class og extends sa{data(e={}){return super.data(e)}}class su{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new og(this._firestore,this._userDataWriter,r.key,r,new pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:kQ(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function zV(n,e){return n instanceof sa&&e instanceof sa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof su&&e instanceof su&&n._firestore===e._firestore&&wb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ou extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}}function qV(n,e,t){n=vt(n,Cn);const r=vt(n.firestore,rn),i=Fv(n.converter,e,t);return Kd(r,[Rv(hc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pn.none())])}function GV(n,e,t,...r){n=vt(n,Cn);const i=vt(n.firestore,rn),s=hc(i);let o;return o="string"==typeof(e=(0,dt.m9)(e))||e instanceof ia?Rb(s,"updateDoc",n._key,e,t,r):Sb(s,"updateDoc",n._key,e),Kd(i,[o.toMutation(n._key,Pn.exists(!0))])}function WV(n,...e){var t,r,i;n=(0,dt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||Cb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Cb(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,l,f;if(n instanceof Cn)l=vt(n.firestore,rn),f=wd(n._key.path),u={next:m=>{e[o]&&e[o](Ob(l,n,m))},error:e[o+1],complete:e[o+2]};else{const m=vt(n,Br);l=vt(m.firestore,rn),f=m._query;const y=new ou(l);u={next:E=>{e[o]&&e[o](new su(l,y,m,E))},error:e[o+1],complete:e[o+2]},LV(n._query)}return function(y,E,A,x){const k=new wv(x),Z=new L0(E,k,A);return y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return x0(yield Wd(y),Z)})),()=>{k.$a(),y.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return O0(yield Wd(y),Z)}))}}(Mn(l),f,a,u)}function Kd(n,e){return function(r,i){const s=new vr;return r.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function SK(n,e,t){return G0.apply(this,arguments)}(yield vb(r),i,s)})),s.promise}(Mn(n),e)}function Ob(n,e,t){const r=t.docs.get(e._key),i=new ou(n);return new sa(n,i,e._key,r,new pc(t.hasPendingWrites,t.fromCache),e.converter)}const XQ={maxAttempts:5};class ZV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hc(e)}set(e,t,r){this._verifyNotCommitted();const i=au(e,this._firestore),s=Fv(i.converter,t,r),o=Rv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Pn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=au(e,this._firestore);let o;return o="string"==typeof(t=(0,dt.m9)(t))||t instanceof ia?Rb(this._dataReader,"WriteBatch.update",s._key,t,r,i):Sb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=au(e,this._firestore);return this._mutations=this._mutations.concat(new Sd(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function au(n,e){if((n=(0,dt.m9)(n)).firestore!==e)throw new _e(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class eY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=hc(t)}get(t){const r=au(t,this._firestore),i=new NQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Oe();const o=s[0];if(o.isFoundDocument())return new rg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new rg(this._firestore,i,r._key,null,r.converter);throw Oe()})}set(t,r,i){const s=au(t,this._firestore),o=Fv(s.converter,r,i),a=Rv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=au(t,this._firestore);let a;return a="string"==typeof(r=(0,dt.m9)(r))||r instanceof ia?Rb(this._dataReader,"Transaction.update",o._key,r,i,s):Sb(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=au(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=au(e,this._firestore),r=new ou(this._firestore);return super.get(e).then(i=>new sa(this._firestore,r,t._key,i._document,new pc(!1,!1),t.converter))}}function Fb(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JV(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function XV(){if(!function N7(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){pd=$n.SDK_VERSION,(0,$n._registerComponent)(new Ly.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rn(new r7(r.getProvider("auth-internal")),new o7(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _e(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(IO,"4.6.3",e),(0,$n.registerVersion)(IO,"4.6.3","esm2017")}();class ag{constructor(e){this._delegate=e}static fromBase64String(e){return XV(),new ag(yo.fromBase64String(e))}static fromUint8Array(e){return JV(),new ag(yo.fromUint8Array(e))}toBase64(){return XV(),this._delegate.toBase64()}toUint8Array(){return JV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vb(n){return function lY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class dY{enableIndexedDbPersistence(e,t){return function dQ(n,e){PV(n=vt(n,rn));const t=Mn(n);if(t._uninitializedComponentsProvider)throw new _e(ee.FAILED_PRECONDITION,"SDK cache is already specified.");Bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new qd;return RV(t,i,new hb(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hQ(n){PV(n=vt(n,rn));const e=Mn(n);if(e._uninitializedComponentsProvider)throw new _e(ee.FAILED_PRECONDITION,"SDK cache is already specified.");Bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new qd;return RV(e,r,new lV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fQ(n){if(n._initialized&&!n._terminated)throw new _e(ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(i){if(!ho.D())return Promise.resolve();const s=i+"main";yield ho.delete(s)}),function r(i){return t.apply(this,arguments)})(e0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){bV(this._delegate,e,t,r)}enableNetwork(){return function gQ(n){return function KK(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield fV(n),t=yield pV(n);return e.setNetworkEnabled(!0),function(i){const s=be(i);return s.M_.delete(0),Yp(s)}(t)}))}(Mn(n=vt(n,rn)))}(this._delegate)}disableNetwork(){return function mQ(n){return function QK(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield fV(n),t=yield pV(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(s){const o=be(s);o.M_.add(0),yield Vd(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Mn(n=vt(n,rn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pQ(n){return function(t){const r=new vr;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function xK(n,e){return Y0.apply(this,arguments)}(yield vb(t),r)})),r.promise}(Mn(n=vt(n,rn)))}(this._delegate)}onSnapshotsInSync(e){return function zQ(n,e){return function eQ(n,e){const t=new wv(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Wd(n),s=t,be(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return i=yield Wd(n),s=t,void be(i).z_.delete(s);var i,s}))}}(Mn(n=vt(n,rn)),Cb(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qd(this,DV(this._delegate,e))}catch(t){throw Ii(t,"collection()","Firestore.collection()")}}doc(e){try{return new vs(this,Dv(this._delegate,e))}catch(t){throw Ii(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ei(this,function oQ(n,e){if(n=vt(n,Xp),Eb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Br(n,null,(r=e,new Xo(Pt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ii(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tY(n,e,t){n=vt(n,rn);const r=Object.assign(Object.assign({},XQ),t);return function(s){if(s.maxAttempts<1)throw new _e(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new vr;return s.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const l=yield function gV(n){return Tv(n).then(e=>e.datastore)}(s);new WK(s.asyncQueue,l,a,o,u).Xa()})),u.promise}(Mn(n),i=>e(new eY(n,i)),r)}(this._delegate,t=>e(new tL(this,t)))}batch(){return Mn(this._delegate),new nL(new ZV(this._delegate,e=>Kd(this._delegate,e)))}loadBundle(e){return function _Q(n,e){const t=Mn(n=vt(n,rn)),r=new uQ;return function tQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?Ok().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return dV(f,m);if(f instanceof ArrayBuffer)return dV(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new qK(f,a);var f}(t,Qp(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function HK(n,e,t){const r=be(n);var i;(i=(0,ae.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(A,x){const k=be(A),Z=tr(x.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",B=>k.$r.getBundleMetadata(B,x.id)).then(B=>!!B&&B.createTime.compareTo(Z)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(A=l).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);u._updateProgress(eV(l));const f=new IK(l,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const E=yield f._a(m);E&&u._updateProgress(E),m=yield a.qa()}const y=yield f.complete();return yield ra(o,y.ca,void 0),yield function(A,x){const k=be(A);return k.persistence.runTransaction("Save bundle","readwrite",Z=>k.$r.saveBundleMetadata(Z,x))}(o.localStore,l),u._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return Bi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var A}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vb(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yQ(n,e){return function nQ(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(r,i){const s=be(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Gd(n),e)}))}(Mn(n=vt(n,rn)),e).then(t=>t?new Br(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ei(this,t):null)}}class Lv extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(new yo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vs.forKey(t,this.firestore,null)}}class tL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}get(e){const t=mc(e);return this._delegate.get(t).then(r=>new ug(this._firestore,new sa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=mc(e);return r?(Fb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=mc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=mc(e);return this._delegate.delete(t),this}}class nL{constructor(e){this._delegate=e}set(e,t,r){const i=mc(e);return r?(Fb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=mc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=mc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new gc(e,new Lv(e),t),i.set(t,s)),s}}gc.INSTANCES=new WeakMap;class vs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vs(t,new Cn(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new vs(t,new Cn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qd(this.firestore,DV(this._delegate,e))}catch(t){throw Ii(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,dt.m9)(e))instanceof Cn&&AV(this._delegate,e)}set(e,t){t=Fb("DocumentReference.set",t);try{return t?qV(this._delegate,e,t):qV(this._delegate,e)}catch(r){throw Ii(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GV(this._delegate,e):GV(this._delegate,e,t,...r)}catch(i){throw Ii(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $Q(n){return Kd(vt(n.firestore,rn),[new Sd(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=rL(e),r=iL(e,i=>new ug(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function VQ(n){n=vt(n,Cn);const e=vt(n.firestore,rn),t=Mn(e),r=new ou(e);return function YK(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const u=yield function(f,m){const y=be(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new _e(ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=jd(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Gd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sa(e,r,n._key,i,new pc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function LQ(n){n=vt(n,Cn);const e=vt(n.firestore,rn);return mV(Mn(e),n._key,{source:"server"}).then(t=>Ob(e,n,t))}(this._delegate):function FQ(n){n=vt(n,Cn);const e=vt(n.firestore,rn);return mV(Mn(e),n._key).then(t=>Ob(e,n,t))}(this._delegate),t.then(r=>new ug(this.firestore,new sa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new vs(this.firestore,this._delegate.withConverter(e?gc.getInstance(this.firestore,e):null))}}function Ii(n,e,t){return n.message=n.message.replace(e,t),n}function rL(n){for(const e of n)if("object"==typeof e&&!Vb(e))return e;return{}}function iL(n,e){var t,r;let i;return i=Vb(n[0])?n[0]:Vb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zV(this._delegate,e._delegate)}}class cg extends ug{data(e){const t=this._delegate.data(e);return this._delegate._converter||function e7(n,e){n||Oe()}(void 0!==t),t}}class Ei{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Lv(e)}where(e,t,r){try{return new Ei(this.firestore,iu(this._delegate,function bQ(n,e,t){const r=e,i=xv("where",n);return sg._create(i,r,t)}(e,t,r)))}catch(i){throw Ii(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ei(this.firestore,iu(this._delegate,function DQ(n,e="asc"){const t=e,r=xv("orderBy",n);return xb._create(r,t)}(e,t)))}catch(r){throw Ii(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ei(this.firestore,iu(this._delegate,function AQ(n){return CV("limit",n),Nv._create("limit",n,"F")}(e)))}catch(t){throw Ii(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ei(this.firestore,iu(this._delegate,function SQ(n){return CV("limitToLast",n),Nv._create("limitToLast",n,"L")}(e)))}catch(t){throw Ii(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ei(this.firestore,iu(this._delegate,function RQ(...n){return Ov._create("startAt",n,!0)}(...e)))}catch(t){throw Ii(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ei(this.firestore,iu(this._delegate,function PQ(...n){return Ov._create("startAfter",n,!1)}(...e)))}catch(t){throw Ii(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ei(this.firestore,iu(this._delegate,function MQ(...n){return kv._create("endBefore",n,!1)}(...e)))}catch(t){throw Ii(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ei(this.firestore,iu(this._delegate,function xQ(...n){return kv._create("endAt",n,!0)}(...e)))}catch(t){throw Ii(t,"endAt()","Query.endAt()")}}isEqual(e){return wb(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BQ(n){n=vt(n,Br);const e=vt(n.firestore,rn),t=Mn(e),r=new ou(e);return function JK(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(s,o,a){try{const u=yield pv(s,o,!0),l=new rV(o,u.hs),f=l.da(u.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const l=jd(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Gd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new su(e,r,n,i))}(this._delegate):"server"===e?.source?function jQ(n){n=vt(n,Br);const e=vt(n.firestore,rn),t=Mn(e),r=new ou(e);return _V(t,n._query,{source:"server"}).then(i=>new su(e,r,n,i))}(this._delegate):function UQ(n){n=vt(n,Br);const e=vt(n.firestore,rn),t=Mn(e),r=new ou(e);return LV(n._query),_V(t,n._query).then(i=>new su(e,r,n,i))}(this._delegate),t.then(r=>new Lb(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rL(e),r=iL(e,i=>new Lb(this.firestore,new su(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WV(this._delegate,t,r)}withConverter(e){return new Ei(this.firestore,this._delegate.withConverter(e?gc.getInstance(this.firestore,e):null))}}class fY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Lb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cg(this._firestore,r))})}isEqual(e){return zV(this._delegate,e._delegate)}}class Qd extends Ei{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vs(this.firestore,e):null}doc(e){try{return new vs(this.firestore,void 0===e?Dv(this._delegate):Dv(this._delegate,e))}catch(t){throw Ii(t,"doc()","CollectionReference.doc()")}}add(e){return function HQ(n,e){const t=vt(n.firestore,rn),r=Dv(n),i=Fv(n.converter,e);return Kd(t,[Rv(hc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new vs(this.firestore,t))}isEqual(e){return AV(this._delegate,e._delegate)}withConverter(e){return new Qd(this.firestore,this._delegate.withConverter(e?gc.getInstance(this.firestore,e):null))}}function mc(n){return vt(n,Cn)}class Ub{constructor(...e){this._delegate=new ia(...e)}static documentId(){return new Ub(En.keyField().canonicalString())}isEqual(e){return(e=(0,dt.m9)(e))instanceof ia&&this._delegate._internalPath.isEqual(e._internalPath)}}class _c{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rY(){return new Tb("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _c(e)}static delete(){const e=function nY(){return new tg("deleteField")}();return e._methodName="FieldValue.delete",new _c(e)}static arrayUnion(...e){const t=function iY(...n){return new bb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _c(t)}static arrayRemove(...e){const t=function sY(...n){return new Db("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _c(t)}static increment(e){const t=function oY(n){return new Ab("increment",n)}(e);return t._methodName="FieldValue.increment",new _c(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pY={Firestore:eL,GeoPoint:Av,Timestamp:Rn,Blob:ag,Transaction:tL,WriteBatch:nL,DocumentReference:vs,DocumentSnapshot:ug,Query:Ei,QueryDocumentSnapshot:cg,QuerySnapshot:Lb,CollectionReference:Qd,FieldPath:Ub,FieldValue:_c,setLogLevel:function hY(n){!function X8(n){Ha.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sL(n,e){return function _Y(n,e=dT){return new ct(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Bb(n,e){return sL(n,e).pipe(xe(t=>({payload:t,type:"query"})))}!function mY(n){(function gY(n,e){n.INTERNAL.registerComponent(new Ly.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},pY)))})(n,(e,t)=>new eL(e,t,new dY)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Ls.Z);class oL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=hL(r,t);return new cL(i,s,this.afs)}snapshotChanges(){return function yY(n,e){return sL(n,e).pipe(gy(void 0),mT(),xe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return this.snapshotChanges().pipe(xe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return C(this.ref.get(e)).pipe(vi)}}function Uv(n,e){return Bb(n,e).pipe(gy(void 0),mT(),xe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function aL(n,e,t){return Uv(n,t).pipe(_y((r,i)=>function vY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function IY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Xe(),xe(r=>r.map(i=>({type:i.type,payload:i}))))}function jb(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Uv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(xe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(gy(void 0),mT(),Fs(([r,i])=>i.length>0||!r),xe(([,r])=>r),vi)}auditTrail(e){return this.stateChanges(e).pipe(_y((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uL(e);return aL(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return Bb(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),vi)}get(e){return C(this.query.get(e)).pipe(vi)}add(e){return this.ref.add(e)}doc(e){return new oL(this.ref.doc(e),this.afs)}}class EY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Uv(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Fs(t=>t.length>0),vi):Uv(this.query,this.afs.schedulers.outsideAngular).pipe(vi)}auditTrail(e){return this.stateChanges(e).pipe(_y((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uL(e);return aL(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi)}valueChanges(e={}){return Bb(this.query,this.afs.schedulers.outsideAngular).pipe(xe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),vi)}get(e){return C(this.query.get(e)).pipe(vi)}}const lL=new Ce("angularfire2.enableFirestorePersistence"),dL=new Ce("angularfire2.firestore.persistenceSettings"),wY=new Ce("angularfire2.firestore.settings"),CY=new Ce("angularfire2.firestore.use-emulator");function hL(n,e=(t=>t)){return{query:e(n),ref:n}}let $b=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,f,m,y,E,A,x,k,Z,B){this.schedulers=u;const Q=Vy(t,a,r),ue=f;m&&lO(Q,a,y,A,x,k,E,Z),[this.firestore,this.persistenceEnabled$]=pT(`${Q.name}.firestore`,"AngularFirestore",Q.name,()=>{const we=a.runOutsideAngular(()=>Q.firestore());if(s&&we.settings(s),ue&&we.useEmulator(...ue),i&&!ly(o)){const Le=()=>{try{return C(we.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),O(!1)}};return[we,a.runOutsideAngular(Le)]}return[we,O(!1)]},[s,ue,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=hL(i,r),a=this.schedulers.ngZone.run(()=>s);return new cL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new EY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Ee(vp),Ee(Ip,8),Ee(lL,8),Ee(wY,8),Ee(Ps),Ee(Vt),Ee(hd),Ee(dL,8),Ee(CY,8),Ee(gT,8),Ee(iO,8),Ee(sO,8),Ee(oO,8),Ee(aO,8),Ee(uO,8),Ee(cO,8),Ee(yp,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),TY=(()=>{class n{constructor(){Ls.Z.registerVersion("angularfire",Ko.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lL,useValue:!0},{provide:dL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[$b]})}return n})();const fL="firebasestorage.googleapis.com",pL="storageBucket";class Un extends dt.ZR{constructor(e,t,r=0){super(Hb(e),`Firebase Storage: ${t} (${Hb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var xn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(xn||{});function Hb(n){return"storage/"+n}function zb(){return new Un(xn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function gL(){return new Un(xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mL(){return new Un(xn.CANCELED,"User canceled the upload/download.")}function _L(){return new Un(xn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yd(n){return new Un(xn.INVALID_ARGUMENT,n)}function yL(){return new Un(xn.APP_DELETED,"The Firebase app was deleted.")}function vL(n){return new Un(xn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lg(n,e){return new Un(xn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function dg(n){throw new Un(xn.INTERNAL_ERROR,"Internal error: "+n)}class ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ti.makeFromUrl(e,t)}catch{return new ti(e,"")}if(""===r.path)return r;throw function kY(n){return new Un(xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(ue){ue.path_=decodeURIComponent(ue.path)}const m=t.replace(/[.]/g,"\\."),Q=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ue){"/"===ue.path.charAt(ue.path.length-1)&&(ue.path_=ue.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===fL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let ue=0;ue<Q.length;ue++){const we=Q[ue],Le=we.regex.exec(e);if(Le){let R=Le[we.indices.path];R||(R=""),r=new ti(Le[we.indices.bucket],R),we.postModify(r);break}}if(null==r)throw function OY(n){return new Un(xn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class BY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Bv(n){return"string"==typeof n||n instanceof String}function IL(n){return qb()&&n instanceof Blob}function qb(){return typeof Blob<"u"}function Gb(n,e,t,r){if(r<e)throw Yd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Yd(`Invalid value for '${n}'. Expected ${t} or less.`)}function oa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function EL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Jd||{});function wL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class GY{constructor(e,t,r,i,s,o,a,u,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,A)=>{this.resolve_=E,this.reject_=A,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function HY(n){return void 0!==n}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=zb();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?yL():mL():gL())};this.canceled_?t(0,new jv(!1,null,!0)):this.backoffId_=function jY(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let l=!1;function f(...k){l||(l=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,n(E,u())},k)}function y(){s&&clearTimeout(s)}function E(k,...Z){if(l)return void y();if(k)return y(),void f.call(null,k,...Z);if(u()||o)return y(),void f.call(null,k,...Z);let Q;r<64&&(r*=2),1===a?(a=2,Q=0):Q=1e3*(r+Math.random()),m(Q)}let A=!1;function x(k){A||(A=!0,y(),!l&&(null!==i?(k||(a=2),clearTimeout(i),m(0)):k||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,x(!0)},t),x}((r,i)=>{if(i)return void r(!1,new jv(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Jd.NO_ERROR,u=s.getStatus();if(!a||wL(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Jd.ABORT;return void r(!1,new jv(!1,null,f))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new jv(l,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function $Y(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class jv{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function XY(...n){const e=function JY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(qb())return new Blob(n);throw new Un(xn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wb{constructor(e,t){this.data=e,this.contentType=t||null}}function Zb(n,e){switch(n){case ts.RAW:return new Wb(CL(e));case ts.BASE64:case ts.BASE64URL:return new Wb(TL(n,e));case ts.DATA_URL:return new Wb(function rJ(n){const e=new bL(n);return e.base64?TL(ts.BASE64,e.rest):function nJ(n){let e;try{e=decodeURIComponent(n)}catch{throw lg(ts.DATA_URL,"Malformed data URL.")}return CL(e)}(e.rest)}(e),function iJ(n){return new bL(n).contentType}(e))}throw zb()}function CL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function TL(n,e){switch(n){case ts.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw lg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw lg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function tJ(n){if(typeof atob>"u")throw function UY(n){return new Un(xn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:lg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class bL{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw lg(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function sJ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class vo{constructor(e,t){let r=0,i="";IL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(IL(this.data_)){const i=function eJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new vo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new vo(r,!0)}}static getBlob(...e){if(qb()){const t=e.map(r=>r instanceof vo?r.data_:r);return new vo(XY.apply(null,t))}{const t=e.map(o=>Bv(o)?Zb(ts.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new vo(i,!0)}}uploadData(){return this.data_}}function Kb(n){let e;try{e=JSON.parse(n)}catch{return null}return function qY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function DL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function uJ(n,e){return e}class wi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||uJ}}let $v=null;function hg(){if($v)return $v;const n=[];n.push(new wi("bucket")),n.push(new wi("generation")),n.push(new wi("metageneration")),n.push(new wi("name","fullPath",!0));const t=new wi("name");t.xform=function e(s,o){return function cJ(n){return!Bv(n)||n.length<2?n:DL(n)}(o)},n.push(t);const i=new wi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new wi("timeCreated")),n.push(new wi("updated")),n.push(new wi("md5Hash",null,!0)),n.push(new wi("cacheControl",null,!0)),n.push(new wi("contentDisposition",null,!0)),n.push(new wi("contentEncoding",null,!0)),n.push(new wi("contentLanguage",null,!0)),n.push(new wi("contentType",null,!0)),n.push(new wi("metadata","customMetadata",!0)),$v=n,$v}function AL(n,e,t){const r=Kb(e);return null===r?null:function dJ(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function lJ(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ti(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function Qb(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const SL="prefixes",RL="items";class Io{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Eo(n){if(!n)throw zb()}function Hv(n,e){return function t(r,i){const s=AL(n,i,e);return Eo(null!==s),s}}function Xd(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function xY(){return new Un(xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function MY(){return new Un(xn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function PY(n){return new Un(xn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function NY(n){return new Un(xn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function fg(n){const e=Xd(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function RY(n){return new Un(xn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function PL(n,e,t){const i=oa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Io(i,"GET",Hv(n,t),o);return a.errorHandler=fg(e),a}function _J(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=oa(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Io(a,"GET",function gJ(n,e){return function t(r,i){const s=function pJ(n,e,t){const r=Kb(t);return null===r?null:function fJ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[SL])for(const i of t[SL]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new ti(e,s));r.prefixes.push(o)}if(t[RL])for(const i of t[RL]){const s=n._makeStorageReference(new ti(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Eo(null!==s),s}}(n,e.bucket),l);return f.urlParams=s,f.errorHandler=Xd(e),f}function xL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function EJ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class zv{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Yb(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Eo(!1)}return Eo(!!t&&-1!==(e||["active"]).indexOf(t)),t}const bJ={STATE_CHANGED:"state_changed"},Ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jb(n){switch(n){case"running":case"pausing":case"canceling":return Ci.RUNNING;case"paused":return Ci.PAUSED;case"success":return Ci.SUCCESS;case"canceled":return Ci.CANCELED;default:return Ci.ERROR}}class DJ{constructor(e,t,r){if(function zY(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function eh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let kL=null;class AJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw dg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class SJ extends AJ{initXhr(){this.xhr_.responseType="text"}}function Us(){return kL?kL():new SJ}class FL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=hg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(xn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(wL(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=gL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(xn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function wJ(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=xL(e,r,i),a={name:o.fullPath},u=oa(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=Qb(o,t),A=new Io(u,"POST",function E(x){let k;Yb(x);try{k=x.getResponseHeader("X-Goog-Upload-URL")}catch{Eo(!1)}return Eo(Bv(k)),k},n.maxUploadRetryTime);return A.urlParams=a,A.headers=f,A.body=m,A.errorHandler=Xd(e),A}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function CJ(n,e,t,r){const u=new Io(t,"POST",function s(l){const f=Yb(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Eo(!1)}m||Eo(!1);const y=Number(m);return Eo(!isNaN(y)),new zv(y,r.size(),"final"===f)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=Xd(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Us,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new zv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function TJ(n,e,t,r,i,s,o,a){const u=new zv(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function VY(){return new Un(xn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=u.total-u.current;let f=l;i>0&&(f=Math.min(f,i));const m=u.current;let E="";E=0===f?"finalize":l===f?"upload, finalize":"upload";const A={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${u.current}`},x=r.slice(m,m+f);if(null===x)throw _L();const Q=new Io(t,"POST",function k(ue,we){const Le=Yb(ue,["active","final"]),j=u.current+f,R=r.size();let V;return V="final"===Le?Hv(e,s)(ue,we):null,new zv(j,R,"final"===Le,V)},e.maxUploadRetryTime);return Q.headers=A,Q.body=x.uploadData(),Q.progressCallback=a||null,Q.errorHandler=Xd(n),Q}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Us,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=PL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function NL(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let Q="";for(let ue=0;ue<2;ue++)Q+=Math.random().toString().slice(2);return Q}();o["Content-Type"]="multipart/related; boundary="+u;const l=xL(e,r,i),f=Qb(l,t),E=vo.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===E)throw _L();const A={name:l.fullPath},x=oa(s,n.host,n._protocol),Z=n.maxUploadRetryTime,B=new Io(x,"POST",Hv(n,t),Z);return B.urlParams=A,B.headers=o,B.body=E.uploadData(),B.errorHandler=Xd(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Us,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Jb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new DJ(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Jb(this._state)){case Ci.SUCCESS:eh(this._resolve.bind(null,this.snapshot))();break;case Ci.CANCELED:case Ci.ERROR:eh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jb(this._state)){case Ci.RUNNING:case Ci.PAUSED:e.next&&eh(e.next.bind(e,this.snapshot))();break;case Ci.SUCCESS:e.complete&&eh(e.complete.bind(e))();break;default:e.error&&eh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class yc{constructor(e,t){this._service=e,this._location=t instanceof ti?t:ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new yc(e,t)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DL(this._location.path)}get storage(){return this._service}get parent(){const e=function oJ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ti(this._location.bucket,e);return new yc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vL(e)}}function LL(n,e,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=(0,ae.Z)(function*(n,e,t){const i=yield UL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield LL(n,e,i.nextPageToken))})).apply(this,arguments)}function UL(n,e){null!=e&&"number"==typeof e.maxResults&&Gb("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=_J(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Us)}function BJ(n){n._throwIfRoot("getDownloadURL");const e=function yJ(n,e,t){const i=oa(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new Io(i,"GET",function mJ(n,e){return function t(r,i){const s=AL(n,i,e);return Eo(null!==s),function hJ(n,e,t,r){const i=Kb(e);if(null===i||!Bv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const m=n.fullPath;return oa("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+EL({alt:"media",token:l})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=fg(e),a}(n.storage,n._location,hg());return n.storage.makeRequestWithTokens(e,Us).then(t=>{if(null===t)throw function LY(){return new Un(xn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function BL(n,e){const t=function aJ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ti(n._location.bucket,t);return new yc(n.storage,r)}function jL(n,e){if(n instanceof eD){const t=n;if(null==t._bucket)throw function FY(){return new Un(xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pL+"' property when initializing the app?")}();const r=new yc(t,t._bucket);return null!=e?jL(r,e):r}return void 0!==e?BL(n,e):n}function zJ(n,e){if(e&&function $J(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof eD)return function HJ(n,e){return new yc(n,e)}(n,e);throw Yd("To use ref(service, url), the first argument must be a Storage instance.")}return jL(n,e)}function $L(n,e){const t=e?.[pL];return null==t?null:ti.makeFromBucketSpec(t,n)}class eD{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=fL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ti.makeFromBucketSpec(i,this._host):$L(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ti.makeFromBucketSpec(this._url,e):$L(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Gb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Gb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new BY(yL());{const o=function YY(n,e,t,r,i,s,o=!0){const a=EL(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return function KY(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function WY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function ZY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function QY(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new GY(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const HL="@firebase/storage",qL="storage";function GL(n,e){return zJ(n=(0,dt.m9)(n),e)}function eX(n=(0,$n.getApp)(),e){n=(0,dt.m9)(n);const r=(0,$n._getProvider)(n,qL).getImmediate({identifier:e}),i=(0,dt.P0)("storage");return i&&WL(r,...i),r}function WL(n,e,t,r={}){!function qJ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,dt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function tX(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new eD(t,r,i,e,$n.SDK_VERSION)}!function nX(){(0,$n._registerComponent)(new Ly.wA(qL,tX,"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(HL,"0.12.5",""),(0,$n.registerVersion)(HL,"0.12.5","esm2017")}();class qv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ZL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new qv(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new qv(o,this,this._ref)):{next:t.next?o=>t.next(new qv(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class KL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new aa(e,this._service))}get items(){return this._delegate.items.map(e=>new aa(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class aa{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function XJ(n,e){return BL(n,e)}(this._delegate,e);return new aa(t,this.storage)}get root(){return new aa(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new aa(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ZL(function GJ(n,e,t){return function kJ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new FL(n,new vo(e),t)}(n=(0,dt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ts.RAW,r){this._throwIfRoot("putString");const i=Zb(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new ZL(new FL(this._delegate,new vo(i.data,!0),s),this)}listAll(){return function QJ(n){return function VJ(n){const e={prefixes:[],items:[]};return LL(n,e).then(()=>e)}(n=(0,dt.m9)(n))}(this._delegate).then(e=>new KL(e,this.storage))}list(e){return function KJ(n,e){return UL(n=(0,dt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new KL(t,this.storage))}getMetadata(){return function WJ(n){return function LJ(n){n._throwIfRoot("getMetadata");const e=PL(n.storage,n._location,hg());return n.storage.makeRequestWithTokens(e,Us)}(n=(0,dt.m9)(n))}(this._delegate)}updateMetadata(e){return function ZJ(n,e){return function UJ(n,e){n._throwIfRoot("updateMetadata");const t=function vJ(n,e,t,r){const s=oa(e.fullServerUrl(),n.host,n._protocol),a=Qb(t,r),l=n.maxOperationRetryTime,f=new Io(s,"PATCH",Hv(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=fg(e),f}(n.storage,n._location,e,hg());return n.storage.makeRequestWithTokens(t,Us)}(n=(0,dt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function YJ(n){return BJ(n=(0,dt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function JJ(n){return function jJ(n){n._throwIfRoot("deleteObject");const e=function IJ(n,e){const r=oa(e.fullServerUrl(),n.host,n._protocol),a=new Io(r,"DELETE",function o(u,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=fg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Us)}(n=(0,dt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vL(e)}}class QL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(YL(e))throw Yd("ref() expected a child path but got a URL, use refFromURL instead.");return new aa(GL(this._delegate,e),this)}refFromURL(e){if(!YL(e))throw Yd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ti.makeFromUrl(e,this._delegate.host)}catch{throw Yd("refFromUrl() expected a valid full URL but got an invalid one.")}return new aa(GL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){WL(this._delegate,e,t,r)}}function YL(n){return/^[A-Za-z]+:\/\//.test(n)}function oX(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new QL(t,r)}function JL(n){const e=function uX(n){return new ct(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function bY(n,e=dT){return ne((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=s;s=null,r.next(l)}};function u(){const l=o+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(Re(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(xe(t=>t.bytesTransferred/t.totalBytes*100))}}function Gv(n){return{getDownloadURL:()=>O(void 0).pipe(XN,ke(()=>n.getDownloadURL()),vi),getMetadata:()=>O(void 0).pipe(XN,ke(()=>n.getMetadata()),vi),delete:()=>C(n.delete()),child:e=>Gv(n.child(e)),updateMetadata:e=>C(n.updateMetadata(e)),put:(e,t)=>JL(n.put(e,t)),putString:(e,t,r)=>JL(n.putString(e,t,r)),list:e=>C(n.list(e)),listAll:()=>C(n.listAll())}}!function aX(n){const e={TaskState:Ci,TaskEvent:bJ,StringFormat:ts,Storage:QL,Reference:aa};n.INTERNAL.registerComponent(new Ly.wA("storage-compat",oX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Ls.Z);const cX=new Ce("angularfire2.storageBucket"),lX=new Ce("angularfire2.storage.maxUploadRetryTime"),dX=new Ce("angularfire2.storage.maxOperationRetryTime"),hX=new Ce("angularfire2.storage.use-emulator");let tD=(()=>{class n{storage;constructor(t,r,i,s,o,a,u,l,f,m){const y=Vy(t,o,r);this.storage=pT(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const E=o.runOutsideAngular(()=>y.storage(i||void 0)),A=f;return A&&E.useEmulator(...A),u&&E.setMaxUploadRetryTime(u),l&&E.setMaxOperationRetryTime(l),E},[u,l])}ref(t){return Gv(this.storage.ref(t))}refFromURL(t){return Gv(this.storage.refFromURL(t))}upload(t,r,i){return Gv(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(Ee(vp),Ee(Ip,8),Ee(cX,8),Ee(Ps),Ee(Vt),Ee(hd),Ee(lX,8),Ee(dX,8),Ee(hX,8),Ee(yp,8))};static \u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),fX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({})}return n})(),pX=(()=>{class n{constructor(){Ls.Z.registerVersion("angularfire",Ko.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[tD],imports:[fX]})}return n})(),th=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r,this.defaultBusinessId="vfCMoPjAu2ROVBbKvk0D"}getBusinessData(t){return t||(t=this.defaultBusinessId),this.firestore.collection("businesses").doc(t).snapshotChanges().pipe(xe(r=>{const i=r.payload.data();return i?{id:r.payload.id,...i}:void 0}))}getDefaultBusinessData(){return this.getBusinessData(this.defaultBusinessId)}getEmployees(){return this.firestore.collection("employees").valueChanges({idField:"id"})}getEmployeePhoto(t){return this.storage.ref(t).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||n)(Ee($b),Ee(tD))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gX(n,e){if(1&n&&(ie(0,"div",5)(1,"div",6)(2,"h1"),ce(3),H(),ie(4,"p"),ce(5),H()()()),2&n){const t=Bo();Ke(3),jo("Welcome to ",t.business.businessName,""),Ke(2),gi(t.business.tagline)}}function mX(n,e){if(1&n&&(ie(0,"div",7),Ge(1,"div",8),H()),2&n){const t=e.$implicit;Ke(1),Rt("innerHTML",t,Na)}}function _X(n,e){if(1&n&&(ie(0,"div",7),Ge(1,"div",8),H()),2&n){const t=e.$implicit;Ke(1),Rt("innerHTML",t,Na)}}let XL=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(me(th),me(ys))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-home"]],decls:12,vars:3,consts:[["class","hero",4,"ngIf"],[1,"features-container"],[1,"features-section"],[1,"feature-list"],["class","feature-item",4,"ngFor","ngForOf"],[1,"hero"],[1,"hero-overlay"],[1,"feature-item"],[1,"container",3,"innerHTML"]],template:function(r,i){1&r&&(_r(0,gX,6,2,"div",0),ie(1,"div",1)(2,"div",2)(3,"h2"),ce(4,"Our Unique Features"),H(),ie(5,"div",3),_r(6,mX,2,1,"div",4),H()(),ie(7,"div",2)(8,"h2"),ce(9,"Why Choose Us"),H(),ie(10,"div",3),_r(11,_X,2,1,"div",4),H()()()),2&r&&(Rt("ngIf",i.business),Ke(6),Rt("ngForOf",i.business.uniqueService.split("|")),Ke(5),Rt("ngForOf",i.business.whyChoose.split("|")))},dependencies:[Yf,La],styles:[".hero[_ngcontent-%COMP%]{position:relative;width:100%;height:50vh;background:url(istockphoto-804432288-2048x2048.e8a4d3ed3e336568.jpg) no-repeat center center/cover}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#00000080;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin:0}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin:10px 0 0}.container[_ngcontent-%COMP%]{padding:40px 20px}.features-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px;margin:auto;max-width:1024px}.features-section[_ngcontent-%COMP%]{flex:1;min-width:45%;padding:50px 20px;background:#f9f9f9;text-align:center}.features-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:30px;color:#333}.feature-list[_ngcontent-%COMP%]{max-width:400px;display:flex;flex-wrap:wrap;justify-content:center}.feature-item[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;margin:10px;padding:20px;flex:1 1 calc(33.333% - 20px);box-sizing:border-box;max-width:calc(33.333% - 20px);transition:transform .3s;min-width:350px}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#007bff;margin:0}@media (max-width: 768px){.feature-item[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}.features-container[_ngcontent-%COMP%]{flex-direction:column}.features-section[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 480px){.feature-item[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}.features-container[_ngcontent-%COMP%]{flex-direction:column}.features-section[_ngcontent-%COMP%]{min-width:100%}}"]})}return n})(),yX=(()=>{class n{transform(t){return console.log(t),t?JSON.parse(t):[]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275pipe=Qn({name:"splitComma",type:n,pure:!0})}return n})();function vX(n,e){if(1&n&&(ie(0,"div",13),Ge(1,"img",14),ie(2,"div",15)(3,"h3"),ce(4),H(),ie(5,"p"),ce(6),H()()()),2&n){const t=e.$implicit;Ke(1),N_("alt",t.name),Rt("src",t.image,Oa),Ke(3),gi(t.name),Ke(2),gi(t.bio)}}function IX(n,e){if(1&n&&(ie(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),ce(4,"About Us"),H()()(),ie(5,"div",3)(6,"section",4)(7,"h2"),ce(8,"Our Story"),H(),Ge(9,"div",5),H(),ie(10,"section",6)(11,"div",7),Ge(12,"img",8),ie(13,"h3"),ce(14,"Our Mission"),H(),Ge(15,"div",5),H(),ie(16,"div",9),Ge(17,"img",8),ie(18,"h3"),ce(19,"Our Vision"),H(),Ge(20,"div",5),H()(),ie(21,"section",10)(22,"h2"),ce(23,"Meet Our Team"),H(),ie(24,"div",11),_r(25,vX,7,4,"div",12),$u(26,"splitComma"),H()()()()),2&n){const t=Bo();Ke(9),Rt("innerHTML",t.business.businessStory,Na),Ke(3),Rt("src",t.business.lifestyleImages,Oa),Ke(3),Rt("innerHTML",t.business.mission,Na),Ke(2),Rt("src",t.business.facilityImages,Oa),Ke(3),Rt("innerHTML",t.business.vision,Na),Ke(5),Rt("ngForOf",Hu(26,6,t.business.staffImagesBios))}}let EX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(me(th),me(ys))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-about-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-about"],[1,"hero-overlay"],[1,"container"],[1,"business-story"],[3,"innerHTML"],[1,"mission-vision"],[1,"mission"],[3,"src"],[1,"vision"],[1,"team"],[1,"team-list"],["class","team-item",4,"ngFor","ngForOf"],[1,"team-item"],[3,"src","alt"],[1,"team-info"]],template:function(r,i){1&r&&_r(0,IX,27,8,"div",0),2&r&&Rt("ngIf",i.business)},dependencies:[Yf,La,yX],styles:[".hero-about[_ngcontent-%COMP%]{background:url(istockphoto-1207318385-2048x2048.d8e6c744c314dbde.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}section[_ngcontent-%COMP%]{margin-bottom:40px}.business-story[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px}.mission-vision[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:50px}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px;margin:10px;padding:20px;box-shadow:0 2px 5px #0000001a;flex:1 1 calc(50% - 20px);box-sizing:border-box}.mission[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em;margin:0 0 10px}.mission[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666}.team[_ngcontent-%COMP%]{text-align:center}.team-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.team-item[_ngcontent-%COMP%]{width:250px;margin:10px;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000001a;text-align:center}.team-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.team-info[_ngcontent-%COMP%]{margin-top:10px}.team-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 0 5px;font-size:1.2em}.team-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666}@media (max-width: 768px){.mission-vision[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.team-member[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px)}}@media (max-width: 480px){.team-member[_ngcontent-%COMP%]{flex:1 1 100%}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}}"]})}return n})();function wX(n,e){if(1&n&&(ie(0,"ul")(1,"li")(2,"h3"),ce(3),H()()()),2&n){const t=e.$implicit;Ke(3),gi(t)}}function CX(n,e){if(1&n&&(ie(0,"ul")(1,"li")(2,"h3"),ce(3),H()()()),2&n){const t=e.$implicit;Ke(3),gi(t)}}function TX(n,e){if(1&n&&(ie(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),ce(4,"Our Services"),H(),ie(5,"p"),ce(6,"Providing exceptional care tailored to your needs"),H()()(),ie(7,"div",3)(8,"section",4),Ge(9,"img",5),ie(10,"h2"),ce(11,"Our Comprehensive Services"),H(),_r(12,wX,4,1,"ul",6),H(),ie(13,"section",4),Ge(14,"img",5),ie(15,"h2"),ce(16,"Our Benefits"),H(),_r(17,CX,4,1,"ul",6),H(),ie(18,"section",7)(19,"h2"),ce(20,"Special Programs"),H(),ie(21,"p"),ce(22),H()(),ie(23,"section",8)(24,"div",9)(25,"h2"),ce(26,"Tours"),H(),Ge(27,"div",10),H(),ie(28,"div",11)(29,"h2"),ce(30,"Free Consulting"),H(),Ge(31,"div",10),H()()()()),2&n){const t=Bo();Ke(12),Rt("ngForOf",t.business.services.split(",")),Ke(5),Rt("ngForOf",t.business.serviceBenefits.split(",")),Ke(5),gi(t.business.specialPrograms),Ke(5),Rt("innerHTML",t.business.tours,Na),Ke(4),Rt("innerHTML",t.business.freeConsulting,Na)}}let bX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(me(th),me(ys))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-services"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-services"],[1,"hero-overlay"],[1,"container"],[1,"services-list"],["src","/assets/care.svg","alt","Service Icon"],[4,"ngFor","ngForOf"],[1,"special-programs"],[1,"tours-consulting"],[1,"tours"],[3,"innerHTML"],[1,"consulting"]],template:function(r,i){1&r&&_r(0,TX,32,5,"div",0),2&r&&Rt("ngIf",i.business)},dependencies:[Yf,La],styles:[".hero-services[_ngcontent-%COMP%]{background:url(istockphoto-1335866199-2048x2048.e588b8992a5787c5.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.services-list[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.service-item[_ngcontent-%COMP%]{background:white;padding:20px;margin-bottom:20px;border-radius:8px;box-shadow:0 2px 5px #0000001a}.service-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.special-programs[_ngcontent-%COMP%], .tours-consulting[_ngcontent-%COMP%]{background:#f9f9f9;padding:50px;border-radius:8px;margin-bottom:40px}.tours-consulting[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{flex:1;margin-right:40px}.tours[_ngcontent-%COMP%]:last-child, .consulting[_ngcontent-%COMP%]:last-child{margin-right:0}.service-item[_ngcontent-%COMP%]{display:flex;align-items:center}.service-icon[_ngcontent-%COMP%]{flex:0 0 50px;margin-right:20px}.service-content[_ngcontent-%COMP%]{flex:1}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}.services-page[_ngcontent-%COMP%]{text-align:center}@media (max-width: 768px){.service-item[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px)}.tours-consulting[_ngcontent-%COMP%]{flex-direction:column}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{min-width:100%}}@media (max-width: 480px){.service-item[_ngcontent-%COMP%]{flex:1 1 100%}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}.tours-consulting[_ngcontent-%COMP%]{flex-direction:column}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{min-width:100%}}"]})}return n})(),e2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(me(Fo),me(Ki))};static#t=this.\u0275dir=Ye({type:n})}return n})(),vc=(()=>{class n extends e2{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=ar(n)))(i||n)}}();static#t=this.\u0275dir=Ye({type:n,features:[Yt]})}return n})();const wo=new Ce("NgValueAccessor"),SX={provide:wo,useExisting:$t(()=>Wv),multi:!0},PX=new Ce("CompositionEventMode");let Wv=(()=>{class n extends e2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function RX(){const n=Va()?Va().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(me(Fo),me(Ki),me(PX,8))};static#t=this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Jn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Sn([SX]),Yt]})}return n})();function uu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function n2(n){return null!=n&&"number"==typeof n.length}const ni=new Ce("NgValidators"),cu=new Ce("NgAsyncValidators"),MX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Er{static min(e){return function r2(n){return e=>{if(uu(e.value)||uu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function i2(n){return e=>{if(uu(e.value)||uu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return s2(e)}static requiredTrue(e){return function o2(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function a2(n){return uu(n.value)||MX.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function u2(n){return e=>uu(e.value)||!n2(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function c2(n){return e=>n2(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function l2(n){if(!n)return Zv;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(uu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return m2(e)}static composeAsync(e){return _2(e)}}function s2(n){return uu(n.value)?{required:!0}:null}function Zv(n){return null}function d2(n){return null!=n}function h2(n){return kf(n)?C(n):n}function f2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function p2(n,e){return e.map(t=>t(n))}function g2(n){return n.map(e=>function xX(n){return!n.validate}(e)?e:t=>e.validate(t))}function m2(n){if(!n)return null;const e=n.filter(d2);return 0==e.length?null:function(t){return f2(p2(t,e))}}function nD(n){return null!=n?m2(g2(n)):null}function _2(n){if(!n)return null;const e=n.filter(d2);return 0==e.length?null:function(t){return function DX(...n){const e=Ts(n),{args:t,keys:r}=j1(n),i=new ct(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let f=0;f<o;f++){let m=!1;kt(t[f]).subscribe(Re(s,y=>{m||(m=!0,l--),a[f]=y},()=>u--,void 0,()=>{(!u||!m)&&(l||s.next(r?H1(r,a):a),s.complete())}))}});return e?i.pipe($1(e)):i}(p2(t,e).map(h2)).pipe(xe(f2))}}function rD(n){return null!=n?_2(g2(n)):null}function y2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function v2(n){return n._rawValidators}function I2(n){return n._rawAsyncValidators}function iD(n){return n?Array.isArray(n)?n:[n]:[]}function Kv(n,e){return Array.isArray(n)?n.includes(e):n===e}function E2(n,e){const t=iD(e);return iD(n).forEach(i=>{Kv(t,i)||t.push(i)}),t}function w2(n,e){return iD(e).filter(t=>!Kv(n,t))}class C2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=nD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ti extends C2{get formDirective(){return null}get path(){return null}}class lu extends C2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class T2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let b2=(()=>{class n extends T2{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(me(lu,2))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&F_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Yt]})}return n})(),sD=(()=>{class n extends T2{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(me(Ti,10))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&F_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Yt]})}return n})();const pg="VALID",Yv="INVALID",nh="PENDING",gg="DISABLED";function uD(n){return(Jv(n)?n.validators:n)||null}function cD(n,e){return(Jv(e)?e.asyncValidators:n)||null}function Jv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function A2(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new M(1e3,"");if(!r[t])throw new M(1001,"")}function S2(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new M(1002,"")})}class Xv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===pg}get invalid(){return this.status===Yv}get pending(){return this.status==nh}get disabled(){return this.status===gg}get enabled(){return this.status!==gg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(E2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(E2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(w2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(w2(e,this._rawAsyncValidators))}hasValidator(e){return Kv(this._rawValidators,e)}hasAsyncValidator(e){return Kv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=nh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=pg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pg||this.status===nh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gg:pg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=nh,this._hasOwnPendingAsyncValidator=!0;const t=h2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Bn,this.statusChanges=new Bn}_calculateStatus(){return this._allControlsDisabled()?gg:this.errors?Yv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nh)?nh:this._anyControlsHaveStatus(Yv)?Yv:pg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Jv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function FX(n){return Array.isArray(n)?nD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function VX(n){return Array.isArray(n)?rD(n):n||null}(this._rawAsyncValidators)}}class mg extends Xv{constructor(e,t,r){super(uD(t),cD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){S2(this,0,e),Object.keys(e).forEach(r=>{A2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class R2 extends mg{}const Ic=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>_g}),_g="always";function yg(n,e,t=_g){lD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function UX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&P2(n,e)})}(n,e),function jX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function BX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&P2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function LX(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function tI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),rI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function nI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lD(n,e){const t=v2(n);null!==e.validator?n.setValidators(y2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=I2(n);null!==e.asyncValidator?n.setAsyncValidators(y2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();nI(e._rawValidators,i),nI(e._rawAsyncValidators,i)}function rI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=v2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=I2(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return nI(e._rawValidators,r),nI(e._rawAsyncValidators,r),t}function P2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function M2(n,e){lD(n,e)}function x2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const GX={provide:Ti,useExisting:$t(()=>iI)},vg=(()=>Promise.resolve())();let iI=(()=>{class n extends Ti{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Bn,this.form=new mg({},nD(t),rD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),yg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vg.then(()=>{const r=this._findContainer(t.path),i=new mg({});M2(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){vg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,x2(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(me(ni,10),me(cu,10),me(Ic,8))};static#t=this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Jn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sn([GX]),Yt]})}return n})();function N2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function O2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ig=class extends Xv{constructor(e=null,t,r){super(uD(t),cD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Jv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=O2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){N2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){N2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){O2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let pD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),B2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({})}return n})();const gD=new Ce("NgModelWithFormControlWarning"),tee={provide:Ti,useExisting:$t(()=>sI)};let sI=(()=>{class n extends Ti{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Bn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return yg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){tI(t.control||null,t,!1),function qX(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,x2(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(tI(r||null,t),(n=>n instanceof Ig)(i)&&(yg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);M2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $X(n,e){return rI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lD(this.form,this),this._oldForm&&rI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(me(ni,10),me(cu,10),me(Ic,8))};static#t=this.\u0275dir=Ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Jn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sn([tee]),Yt,ki]})}return n})();const iee={provide:lu,useExisting:$t(()=>yD)};let yD=(()=>{class n extends lu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Bn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function fD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Wv?t=s:function zX(n){return Object.getPrototypeOf(n.constructor)===vc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function hD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function eI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(me(Ti,13),me(ni,10),me(cu,10),me(wo,10),me(gD,8))};static#n=this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Sn([iee]),Yt,ki]})}return n})(),Ec=(()=>{class n{constructor(){this._validator=Zv}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Zv,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ye({type:n,features:[ki]})}return n})();const fee={provide:ni,useExisting:$t(()=>oI),multi:!0};let oI=(()=>{class n extends Ec{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ed,this.createValidator=t=>s2}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=ar(n)))(i||n)}}();static#t=this.\u0275dir=Ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&so("required",i._enabled?"":null)},inputs:{required:"required"},features:[Sn([fee]),Yt]})}return n})(),nU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({imports:[B2]})}return n})();class rU extends Xv{constructor(e,t,r){super(uD(t),cD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){S2(this,0,e),e.forEach((r,i)=>{A2(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function iU(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let vee=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return iU(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new mg(i,s)}record(t,r=null){const i=this._reduceControls(t);return new R2(i,r)}control(t,r,i){let s={};return this.useNonNullable?(iU(r)?s=r:(s.validators=r,s.asyncValidators=i),new Ig(t,{...s,nonNullable:!0})):new Ig(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new rU(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Ig||t instanceof Xv?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ic,useValue:t.callSetDisabledState??_g}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({imports:[nU]})}return n})(),Eee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ic,useValue:t.callSetDisabledState??_g}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({imports:[nU]})}return n})();function wee(n,e){if(1&n&&(ie(0,"div",6)(1,"h3"),ce(2,"Email"),H(),ie(3,"p")(4,"a",20),ce(5),H()()()),2&n){const t=Bo(2);Ke(4),O_("href","mailto:",t.business.email,"",Oa),Ke(1),gi(t.business.email)}}function Cee(n,e){if(1&n&&(ie(0,"div",6)(1,"h3"),ce(2,"Fax"),H(),ie(3,"p"),ce(4),H()()),2&n){const t=Bo(2);Ke(4),gi(t.business.fax)}}function Tee(n,e){if(1&n&&(ie(0,"div",6)(1,"h3"),ce(2,"Social Media"),H(),ie(3,"p")(4,"a",20),ce(5),H()()()),2&n){const t=Bo(2);Ke(4),N_("href",t.business.socialMedia,Oa),Ke(1),gi(t.business.socialMedia)}}function bee(n,e){if(1&n&&(ie(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),ce(4,"Contact Us"),H(),ie(5,"p"),ce(6,"We're here to answer any questions you have"),H()()(),ie(7,"div",3)(8,"section",4)(9,"h2"),ce(10,"Get in Touch"),H(),ie(11,"div",5)(12,"div",6)(13,"h3"),ce(14,"Address"),H(),ie(15,"p"),ce(16),H()(),ie(17,"div",6)(18,"h3"),ce(19,"Phone"),H(),ie(20,"p"),ce(21),H()(),_r(22,wee,6,2,"div",7),_r(23,Cee,5,1,"div",7),_r(24,Tee,6,2,"div",7),ie(25,"div")(26,"h3"),ce(27,"Visitation Hours"),H(),ie(28,"ul")(29,"li")(30,"strong"),ce(31,"Monday:"),H(),ce(32," 7.30am\u20135pm"),H(),ie(33,"li")(34,"strong"),ce(35,"Tuesday:"),H(),ce(36," 7.30am\u20135pm"),H(),ie(37,"li")(38,"strong"),ce(39,"Wednesday:"),H(),ce(40," 7.30am\u20135pm"),H(),ie(41,"li")(42,"strong"),ce(43,"Thursday:"),H(),ce(44," 7.30am\u20135pm"),H(),ie(45,"li")(46,"strong"),ce(47,"Friday:"),H(),ce(48," 7.30am\u20135pm"),H(),ie(49,"li")(50,"strong"),ce(51,"Saturday:"),H(),ce(52,"Closed"),H(),ie(53,"li")(54,"strong"),ce(55,"Sunday:"),H(),ce(56,"Closed"),H()()()()(),ie(57,"section",8)(58,"h2"),ce(59,"Send Us a Message"),H(),ie(60,"form")(61,"div",9)(62,"label",10),ce(63,"Name"),H(),Ge(64,"input",11),H(),ie(65,"div",9)(66,"label",12),ce(67,"Email"),H(),Ge(68,"input",13),H(),ie(69,"div",9)(70,"label",14),ce(71,"Message"),H(),Ge(72,"textarea",15),H(),ie(73,"button",16),ce(74,"Submit"),H()()(),ie(75,"section",17)(76,"h2"),ce(77,"Find Us Here"),H(),ie(78,"div",18),Ge(79,"iframe",19),H()()()()),2&n){const t=Bo();Ke(16),gi(t.business.address),Ke(5),gi(t.business.phone),Ke(1),Rt("ngIf",t.business.email),Ke(1),Rt("ngIf",t.business.fax),Ke(1),Rt("ngIf",t.business.socialMedia)}}let Dee=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(me(th),me(ys))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-contact-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-contact"],[1,"hero-overlay"],[1,"container"],[1,"contact-info"],[1,"contact-details"],[1,"contact-item"],["class","contact-item",4,"ngIf"],[1,"contact-form"],[1,"form-group"],["for","name"],["type","text","id","name","required",""],["for","email"],["type","email","id","email","required",""],["for","message"],["id","message","rows","5","required",""],["type","submit"],[1,"map-section"],[1,"map-container"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7460.530516506536!2d-122.18471088983462!3d47.54600478154801!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x549069117965856f%3A0xa36b023f16c07440!2s11805%20SE%2064th%20St%2C%20Bellevue%2C%20WA%2098006!5e0!3m2!1sen!2sus!4v1719851446084!5m2!1sen!2sus","width","600","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[3,"href"]],template:function(r,i){1&r&&_r(0,bee,80,5,"div",0),2&r&&Rt("ngIf",i.business)},dependencies:[La,pD,sD,iI],styles:[".hero-contact[_ngcontent-%COMP%]{background-image:url(/assets/splash2.jpg);background-size:cover;background-position:center;position:relative;height:300px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.contact-info[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.contact-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.contact-item[_ngcontent-%COMP%]{flex:1 1 45%;margin-bottom:20px}.contact-form[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:1em}.button[_ngcontent-%COMP%]:hover{background-color:#45a049}.map-section[_ngcontent-%COMP%]{margin-bottom:50px}.map-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#f9f9f9;border-radius:8px;box-shadow:0 2px 5px #0000001a}.map-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:0}@media (max-width: 768px){.contact-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.info-item[_ngcontent-%COMP%]{flex:1 1 100%}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}}@media (max-width: 480px){.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em}}"]})}return n})(),Aee=(()=>{class n{constructor(t,r){this.afs=t,this.storage=r,this.basePath="businesses"}createBusiness(t){console.log("Business Created");const r=this.afs.createId();return this.afs.doc(`${this.basePath}/${r}`).set({...t,id:r})}getBusinesses(){return this.afs.collection(this.basePath).snapshotChanges().pipe(xe(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).valueChanges()}updateBusiness(t,r){return this.afs.doc(`${this.basePath}/${t}`).update(r)}deleteBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).delete()}uploadFile(t,r){return this.storage.upload(t,r)}getDownloadURL(t){return this.storage.ref(t).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||n)(Ee($b),Ee(tD))};static#t=this.\u0275prov=$e({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function See(n,e){if(1&n&&(Gl(0),ie(1,"div",79)(2,"div",80),ce(3),H()(),Wl()),2&n){const t=e.ngIf;Ke(2),Ff("width",t+"%"),Ke(1),jo("",t,"%")}}function Ree(n,e){if(1&n&&(Gl(0),ie(1,"div",79)(2,"div",80),ce(3),H()(),Wl()),2&n){const t=e.ngIf;Ke(2),Ff("width",t+"%"),Ke(1),jo("",t,"%")}}function Pee(n,e){if(1&n&&(Gl(0),ie(1,"div",79)(2,"div",80),ce(3),H()(),Wl()),2&n){const t=e.ngIf;Ke(2),Ff("width",t+"%"),Ke(1),jo("",t,"%")}}function xee(n,e){if(1&n&&(ie(0,"div")(1,"h2"),ce(2),H(),ie(3,"p"),ce(4),H()()),2&n){const t=e.$implicit;Ke(2),gi(t.businessName),Ke(2),gi(t.tagline)}}const Nee=[{path:"",component:XL},{path:"home",component:XL},{path:"about-us",component:EX},{path:"services",component:bX},{path:"contact-us",component:Dee},{path:"bqs",component:(()=>{class n{constructor(t,r){this.fb=t,this.businessService=r,this.uploadProgress={}}ngOnInit(){this.businessForm=this.fb.group({businessName:["Careful Living AFH",Er.required],tagline:["Caring with compassion"],uniqueService:["Personalized 24/7 care"],whyChoose:["We provide personalized care tailored to each resident's needs."],businessStory:["Careful Living AFH was founded in 2005 by a group of healthcare professionals who wanted to provide a loving and caring environment for seniors.",Er.required],motivation:["The motivation behind starting this business was to create a home where seniors can live comfortably and with dignity."],mission:["Our mission is to work hard each day to meet and exceed the expectations of our residents and their families. We provide personalized extensive care plans based on the residents needs, preferences and interests while giving their families peace of mind knowing that all their needs are being met.",Er.required],vision:["Elderly Home Care is a perfect alternative for seniors who can no longer live on their own, but want to maintain their independence in a warm, friendly home-like atmosphere with 24-hour tender compassionate care. We are conveniently located 10 minutes away from Evergreen Hospital in Bellevue, bordering Kirkland",Er.required],certifications:["Licensed by the state, Certified Nursing Assistants (CNA) on staff.",Er.required],targetAudience:["Seniors in need of assisted living services, families looking for quality care for their loved ones."],services:["24-hour supervision and assistancer , Medication management , Vital signs monitoring , Assistance with daily living activities such as dressing, bathing, grooming , Partial or full incontinence care support , Assistance with walking, transferring and eating , Three nutritious home-cooked meals and snacks daily , Special diets , Laundry and housekeeping , Personalized activities programs , Entertainment provided by outside vendors",Er.required],specialPrograms:["Holiday Celebrations \xb7 Birthday Parties \xb7 Outdoor activities \xb7 Exercise Program \xb7 Musical Program \xb7 Arts and Crafts \xb7 Games \xb7 Movie and Popcorn Nights \xb7 Newspaper \xb7 Gardening"],tours:["Yes, we provide tours of our facility."],freeConsulting:["Yes, we offer free consulting services."],websiteGoals:["To provide information, encourage visits, and offer consultation requests.",Er.required],logoImage:[""],ownerImagesBios:["John Doe, RN, Founder.",Er.required],staffImagesBios:["Jane Smith, CNA, Head Nurse; Bob Johnson, Physical Therapist.",Er.required],facilityImages:[""],lifestyleImages:[""],mediaFeatures:["Featured in Local News, Healthcare Magazine."],ratings:["Google: 4.8 stars, Yelp: 5 stars"],testimonials:['John Doe\'s family: "Amazing care!"'],address:["1234 Care St, Compassion City, ST 12345",Er.required],phone:["(123) 456-7890",Er.required],fax:["(123) 456-7891"],email:["info@carefullivingafh.com",Er.email],businessHours:["Mon-Fri: 9am-5pm, Sat-Sun: 10am-4pm",Er.required],socialMedia:["Facebook: facebook.com/carefullivingafh"],welcomeMessage:["Welcome to Careful Living AFH, where we care with compassion.",Er.required],keyServicesHighlights:["24/7 care, nutritious meals, engaging activities.",Er.required],teamValues:["Our team is trained and specialized in providing care for seniors in need of, or who are diagnosed with a wide range of illnesses such as: Dementia, Alzheimer\u2019s, Strokes, Diabetic Management, Cardiac Problems, Multiple Sclerosis, Rehabilitation and Hospice/Palliative Care",Er.required],serviceBenefits:["Private rooms with private or shared bathrooms , Each room is equipped with calling system, phone, cable TV, internet , Handicap accessible , Spacious open floor plan with high ceiling , Harwood floors , Smoke alarm system , Security system , Covered deck , Emergency call buttons , Generator",Er.required],pricingStructure:["Contact us for pricing details.",Er.required],contactFormDetails:["Name, Email, Phone, Message",Er.required],mapDirections:["Included map and directions to our facility."],photoGallery:["Gallery of our facility and events."]})}onFileChange(t,r){const i=t.target.files[0];if(i){const s=`uploads/${i.name}`,o=this.businessService.uploadFile(s,i);this.uploadProgress[r]=o.percentageChanges(),o.snapshotChanges().pipe(yy(()=>{this.businessService.getDownloadURL(s).subscribe(a=>{const u=this.businessForm.get("controlName")?.value;Array.isArray(u)?this.businessForm.patchValue({[r]:[...u,a]}):this.businessForm.patchValue({[r]:a})})})).subscribe()}}onSubmit(){if(console.log("Submit Click",this.businessForm.valid),this.businessForm.valid){const t=this.businessForm.value;console.log(t),this.businessService.createBusiness(t).then(()=>alert("Business details saved successfully!")).catch(r=>console.error("Error saving business details",r))}}static#e=this.\u0275fac=function(r){return new(r||n)(me(vee),me(Aee))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-business-question-form"]],decls:186,vars:10,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required","",1,"form-control"],["for","tagline"],["id","tagline","formControlName","tagline",1,"form-control"],["for","uniqueService"],["id","uniqueService","formControlName","uniqueService",1,"form-control"],["for","whyChoose"],["id","whyChoose","formControlName","whyChoose",1,"form-control"],["for","businessStory",1,"required"],["id","businessStory","formControlName","businessStory","required","",1,"form-control"],["for","motivation"],["id","motivation","formControlName","motivation",1,"form-control"],["for","mission",1,"required"],["id","mission","formControlName","mission","required","",1,"form-control"],["for","vision",1,"required"],["id","vision","formControlName","vision","required","",1,"form-control"],["for","certifications",1,"required"],["id","certifications","formControlName","certifications","required","",1,"form-control"],["for","targetAudience"],["id","targetAudience","formControlName","targetAudience",1,"form-control"],["for","services",1,"required"],["id","services","formControlName","services","required","",1,"form-control"],["for","specialPrograms"],["id","specialPrograms","formControlName","specialPrograms",1,"form-control"],["for","tours"],["id","tours","formControlName","tours",1,"form-control"],["for","freeConsulting"],["id","freeConsulting","formControlName","freeConsulting",1,"form-control"],["for","websiteGoals",1,"required"],["id","websiteGoals","formControlName","websiteGoals","required","",1,"form-control"],["for","logoImage",1,"required"],["type","file","id","logoImage",1,"form-control",3,"change"],[4,"ngIf"],["for","ownerImagesBios",1,"required"],["id","ownerImagesBios","formControlName","ownerImagesBios","required","",1,"form-control"],["for","staffImagesBios",1,"required"],["id","staffImagesBios","formControlName","staffImagesBios","required","",1,"form-control"],["for","facilityImages",1,"required"],["type","file","id","facilityImages",1,"form-control",3,"change"],["for","lifestyleImages",1,"required"],["type","file","id","lifestyleImages",1,"form-control",3,"change"],["for","mediaFeatures"],["id","mediaFeatures","formControlName","mediaFeatures",1,"form-control"],["for","ratings"],["id","ratings","formControlName","ratings",1,"form-control"],["for","testimonials"],["id","testimonials","formControlName","testimonials",1,"form-control"],["for","address",1,"required"],["id","address","formControlName","address","required","",1,"form-control"],["for","phone",1,"required"],["id","phone","formControlName","phone","required","",1,"form-control"],["for","fax"],["id","fax","formControlName","fax",1,"form-control"],["for","email",1,"required"],["id","email","formControlName","email","required","",1,"form-control"],["for","businessHours",1,"required"],["id","businessHours","formControlName","businessHours","required","",1,"form-control"],["for","socialMedia"],["id","socialMedia","formControlName","socialMedia",1,"form-control"],["for","welcomeMessage"],["id","welcomeMessage","formControlName","welcomeMessage","required","",1,"form-control"],["for","keyServicesHighlights",1,"required"],["id","keyServicesHighlights","formControlName","keyServicesHighlights","required","",1,"form-control"],["for","teamValues",1,"required"],["id","teamValues","formControlName","teamValues","required","",1,"form-control"],["for","serviceBenefits",1,"required"],["id","serviceBenefits","formControlName","serviceBenefits","required","",1,"form-control"],["for","pricingStructure",1,"required"],["id","pricingStructure","formControlName","pricingStructure","required","",1,"form-control"],["for","contactFormDetails",1,"required"],["id","contactFormDetails","formControlName","contactFormDetails","required","",1,"form-control"],["for","mapDirections"],["id","mapDirections","formControlName","mapDirections",1,"form-control"],["for","photoGallery"],["formControlName","photoGallery",1,"form-control"],["type","submit"],[1,"progress"],[1,"progress-bar"]],template:function(r,i){1&r&&(ie(0,"div",0)(1,"form",1),Jn("ngSubmit",function(){return i.onSubmit()}),ie(2,"h2"),ce(3,"Basic Information"),H(),ie(4,"div",2)(5,"label",3),ce(6,"Business Name"),H(),Ge(7,"input",4),H(),ie(8,"div",2)(9,"label",5),ce(10,"Tagline"),H(),Ge(11,"input",6),H(),ie(12,"div",2)(13,"label",7),ce(14,"Unique Service"),H(),Ge(15,"input",8),H(),ie(16,"div",2)(17,"label",9),ce(18,"Why Choose Us"),H(),Ge(19,"input",10),H(),ie(20,"h2"),ce(21,"Business Story and Mission"),H(),ie(22,"div",2)(23,"label",11),ce(24,"Business Story"),H(),Ge(25,"textarea",12),H(),ie(26,"div",2)(27,"label",13),ce(28,"Motivation"),H(),Ge(29,"textarea",14),H(),ie(30,"div",2)(31,"label",15),ce(32,"Mission"),H(),Ge(33,"textarea",16),H(),ie(34,"div",2)(35,"label",17),ce(36,"Vision"),H(),Ge(37,"textarea",18),H(),ie(38,"h2"),ce(39,"Certifications and Target Audience"),H(),ie(40,"div",2)(41,"label",19),ce(42,"Certifications"),H(),Ge(43,"textarea",20),H(),ie(44,"div",2)(45,"label",21),ce(46,"Target Audience"),H(),Ge(47,"textarea",22),H(),ie(48,"h2"),ce(49,"Services and Offerings"),H(),ie(50,"div",2)(51,"label",23),ce(52,"Services"),H(),Ge(53,"textarea",24),H(),ie(54,"div",2)(55,"label",25),ce(56,"Special Programs"),H(),Ge(57,"textarea",26),H(),ie(58,"div",2)(59,"label",27),ce(60,"Tours"),H(),Ge(61,"textarea",28),H(),ie(62,"div",2)(63,"label",29),ce(64,"Free Consulting"),H(),Ge(65,"textarea",30),H(),ie(66,"h2"),ce(67,"Website Goals"),H(),ie(68,"div",2)(69,"label",31),ce(70,"Website Goals"),H(),Ge(71,"textarea",32),H(),ie(72,"h2"),ce(73,"Content and Photos"),H(),ie(74,"div",2)(75,"label",33),ce(76,"Logo Image"),H(),ie(77,"input",34),Jn("change",function(o){return i.onFileChange(o,"logoImage")}),H(),_r(78,See,4,3,"ng-container",35),$u(79,"async"),H(),ie(80,"div",2)(81,"label",36),ce(82,"Owner Images and Bios"),H(),Ge(83,"textarea",37),H(),ie(84,"div",2)(85,"label",38),ce(86,"Staff Images and Bios"),H(),Ge(87,"textarea",39),H(),ie(88,"h2"),ce(89,"Facility and Lifestyle Images"),H(),ie(90,"div",2)(91,"label",40),ce(92,"Facility Images"),H(),ie(93,"input",41),Jn("change",function(o){return i.onFileChange(o,"facilityImages")}),H(),_r(94,Ree,4,3,"ng-container",35),$u(95,"async"),H(),ie(96,"div",2)(97,"label",42),ce(98,"Lifestyle Images"),H(),ie(99,"input",43),Jn("change",function(o){return i.onFileChange(o,"lifestyleImages")}),H(),_r(100,Pee,4,3,"ng-container",35),$u(101,"async"),H(),ie(102,"h2"),ce(103,"Media and Reviews"),H(),ie(104,"div",2)(105,"label",44),ce(106,"Media Features"),H(),Ge(107,"textarea",45),H(),ie(108,"div",2)(109,"label",46),ce(110,"Ratings"),H(),Ge(111,"textarea",47),H(),ie(112,"div",2)(113,"label",48),ce(114,"Testimonials"),H(),Ge(115,"textarea",49),H(),ie(116,"h2"),ce(117,"Contact Information"),H(),ie(118,"div",2)(119,"label",50),ce(120,"Address"),H(),Ge(121,"textarea",51),H(),ie(122,"div",2)(123,"label",52),ce(124,"Phone"),H(),Ge(125,"input",53),H(),ie(126,"div",2)(127,"label",54),ce(128,"Fax"),H(),Ge(129,"input",55),H(),ie(130,"div",2)(131,"label",56),ce(132,"Email"),H(),Ge(133,"input",57),H(),ie(134,"div",2)(135,"label",58),ce(136,"Business Hours"),H(),Ge(137,"textarea",59),H(),ie(138,"div",2)(139,"label",60),ce(140,"Social Media"),H(),Ge(141,"textarea",61),H(),ie(142,"h2"),ce(143,"Home Page"),H(),ie(144,"div",2)(145,"label",62),ce(146,"Welcome Message"),H(),Ge(147,"textarea",63),H(),ie(148,"div",2)(149,"label",64),ce(150,"Key Services and Highlights"),H(),Ge(151,"textarea",65),H(),ie(152,"h2"),ce(153,"About Us Page"),H(),ie(154,"div",2)(155,"label",66),ce(156,"Team and Values"),H(),Ge(157,"textarea",67),H(),ie(158,"h2"),ce(159,"Services Page"),H(),ie(160,"div",2)(161,"label",68),ce(162,"Service Benefits"),H(),Ge(163,"textarea",69),H(),ie(164,"div",2)(165,"label",70),ce(166,"Pricing Structure"),H(),Ge(167,"textarea",71),H(),ie(168,"h2"),ce(169,"Contact Us Page"),H(),ie(170,"div",2)(171,"label",72),ce(172,"Contact Form Details"),H(),Ge(173,"textarea",73),H(),ie(174,"div",2)(175,"label",74),ce(176,"Map and Directions"),H(),Ge(177,"textarea",75),H(),ie(178,"h2"),ce(179,"Additional Content"),H(),ie(180,"div",2)(181,"label",76),ce(182,"Photo Gallery:"),H(),Ge(183,"textarea",77),H(),ie(184,"button",78),ce(185,"Submit"),H()()()),2&r&&(Ke(1),Rt("formGroup",i.businessForm),Ke(77),Rt("ngIf",Hu(79,4,i.uploadProgress.logoImage)),Ke(16),Rt("ngIf",Hu(95,6,i.uploadProgress.facilityImages)),Ke(6),Rt("ngIf",Hu(101,8,i.uploadProgress.lifestyleImages)))},dependencies:[La,pD,Wv,b2,sD,oI,sI,yD,cy],styles:['.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:3px}.form-group[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:10px}.progress-bar[_ngcontent-%COMP%]{height:20px;background-color:#4caf50;text-align:center;color:#fff;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}']})}return n})()},{path:"bls",component:(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-business-list"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(_r(0,xee,5,2,"div",0),$u(1,"async")),2&r&&Rt("ngForOf",Hu(1,1,i.businesses$))},dependencies:[Yf,cy]})}return n})()}];let Oee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n});static#n=this.\u0275inj=An({imports:[ZN.forRoot(Nee),ZN]})}return n})();function kee(n,e){if(1&n&&Ge(0,"img",14),2&n){const t=Bo();Rt("src",null==t.business?null:t.business.logoImage,Oa)}}const Fee=function(n){return{"open-bar1":n}},Vee=function(n){return{"open-bar2":n}},Lee=function(n){return{"open-bar3":n}},Uee=function(n){return{active:n}};let Bee=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.content=i,this.businessId="",this.menuActive=!1,this.menuOpen=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id,this.content.getBusinessData(this.businessId).subscribe(r=>{this.business=r})})}navigateTo(t){const r=this.businessId?{id:this.businessId}:{};this.closeMenu(),this.router.navigate([`/${t}`],{queryParams:r})}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)(me(ys),me(Ji),me(th))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-navigation"]],decls:24,vars:13,consts:[[1,"navbar"],[1,"navbar-container"],[1,"logo"],["class","logoImage","alt","Business Logo",3,"src",4,"ngIf"],[1,"number"],[1,"text"],[1,"top"],[1,"bottom"],[1,"menu-icon",3,"click"],[1,"bar1",3,"ngClass"],[1,"bar2",3,"ngClass"],[1,"bar3",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item",3,"click"],["alt","Business Logo",1,"logoImage",3,"src"]],template:function(r,i){1&r&&(ie(0,"nav",0)(1,"div",1)(2,"div",2),_r(3,kee,1,1,"img",3),ie(4,"span",4),ce(5,"#1"),H(),ie(6,"div",5)(7,"div",6),ce(8,"HELPING HAND"),H(),ie(9,"div",7),ce(10,"ADULT FAMILY HOME"),H()()(),ie(11,"div",8),Jn("click",function(){return i.toggleMenu()}),Ge(12,"div",9)(13,"div",10)(14,"div",11),H(),ie(15,"ul",12)(16,"li",13),Jn("click",function(){return i.navigateTo("home")}),ce(17,"Home"),H(),ie(18,"li",13),Jn("click",function(){return i.navigateTo("services")}),ce(19,"Services"),H(),ie(20,"li",13),Jn("click",function(){return i.navigateTo("about-us")}),ce(21,"About Us"),H(),ie(22,"li",13),Jn("click",function(){return i.navigateTo("contact-us")}),ce(23,"Contact"),H()()()()),2&r&&(Ke(3),Rt("ngIf",null==i.business?null:i.business.logoImage),Ke(9),Rt("ngClass",Hf(5,Fee,i.menuOpen)),Ke(1),Rt("ngClass",Hf(7,Vee,i.menuOpen)),Ke(1),Rt("ngClass",Hf(9,Lee,i.menuOpen)),Ke(1),Rt("ngClass",Hf(11,Uee,i.menuOpen)))},dependencies:[f1,La],styles:[".logo[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:700;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:700}.top[_ngcontent-%COMP%]{font-size:2rem}.bottom[_ngcontent-%COMP%]{font-size:1rem;letter-spacing:.3rem;color:var(--accent-color)}.navbar[_ngcontent-%COMP%]{background-color:var(--nav-background-color);width:100%;top:0;left:0;box-shadow:0 2px 4px #0000001a;z-index:1000}.navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:70px;max-width:1200px;margin:0 auto}.logoText[_ngcontent-%COMP%]{display:inline-block;position:absolute;color:#0f0f0e;margin-top:10px;height:70px;vertical-align:middle}.logo[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:70px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:34px;font-weight:700;color:var(--button-color);text-decoration:none}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;align-items:center}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:18px;font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:500;font-style:bold}.menu-icon[_ngcontent-%COMP%]{position:absolute;display:none;cursor:pointer;flex-direction:column;justify-content:space-around;width:30px;height:30px;z-index:1}.menu-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:4px;background-color:var(--nav-text-color);transition:all .3s}.menu-icon.open[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{background-color:var(--nav-active-text)}.menu-icon[_ngcontent-%COMP%]   .open-bar1[_ngcontent-%COMP%]{transform:rotate(-45deg) translate(-5px,5px);background-color:#fff}.menu-icon[_ngcontent-%COMP%]   .open-bar2[_ngcontent-%COMP%]{opacity:0}.menu-icon[_ngcontent-%COMP%]   .open-bar3[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-5px,-5px);background-color:#fff}.nav-menu.active[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:var(--nav-active-background);opacity:.9;flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu.active[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px;margin:20px 0}@media (max-width: 768px){.navbar-container[_ngcontent-%COMP%]{justify-content:flex-start}.nav-item[_ngcontent-%COMP%]{font-size:2rem;color:#fff}.logo[_ngcontent-%COMP%]{order:2;margin-left:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:auto;height:40px}.menu-icon[_ngcontent-%COMP%]{display:flex;order:1}.nav-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:var(--nav-active-background);flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);text-decoration:none;text-transform:uppercase;font-family:Montserrat,sans-serif;font-optical-sizing:auto;font-weight:200;font-style:normal;color:var(--nav-active-text);font-size:24px}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:500;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:400}.top[_ngcontent-%COMP%]{font-size:1.5rem}.bottom[_ngcontent-%COMP%]{font-size:.75rem;letter-spacing:.2rem;color:var(--accent-color)}}"]})}return n})();function jee(n,e){if(1&n&&(ie(0,"p")(1,"span"),ce(2),H(),ce(3," | "),ie(4,"span"),ce(5),H()()),2&n){const t=e.ngIf;Ke(2),jo("Phone: ",t.phone,""),Ke(3),jo("Email: ",t.email,"")}}let $ee=(()=>{class n{constructor(t,r){this.route=t,this.webContentService=r}ngOnInit(){this.route.queryParams.subscribe(t=>{const r=t.id||this.webContentService.getDefaultBusinessData();console.log("footer param",r),this.business$=this.webContentService.getDefaultBusinessData(),console.log(this.business$)})}static#e=this.\u0275fac=function(r){return new(r||n)(me(ys),me(th))};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-footer"]],decls:8,vars:3,consts:[[1,"footer"],[1,"footer-content"],["href","www.monkifoto.com"],[4,"ngIf"]],template:function(r,i){1&r&&(ie(0,"footer",0)(1,"div",1)(2,"p"),ce(3,"\xa9 2024 #1 Helping Hand AFH. All Rights Reserved. Design by "),ie(4,"a",2),ce(5,"Monkifoto"),H()(),_r(6,jee,6,2,"p",3),$u(7,"async"),H()()),2&r&&(Ke(6),Rt("ngIf",Hu(7,1,i.business$)))},dependencies:[La,cy],styles:[".footer[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:0;background-color:#333;color:#fff;text-align:center;padding:10px 0}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.footer-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}"]})}return n})(),Hee=(()=>{class n{constructor(){this.title="adult-family-home"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=xi({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&Ge(0,"app-navigation")(1,"router-outlet")(2,"app-footer")},dependencies:[eT,Bee,$ee]})}return n})();const sU_firebase={apiKey:"AIzaSyDABajs8rbYwBKsW74SRQbGQKyJ_GdU1tY",authDomain:"afhdynamicwebsite.firebaseapp.com",projectId:"afhdynamicwebsite",storageBucket:"afhdynamicwebsite.appspot.com",messagingSenderId:"692885221546",appId:"1:692885221546:web:23317a318f6e277a0520d3",measurementId:"G-JREGNTXHB6"};class rh{constructor(e){return e}}class ED{constructor(){return(0,$n.getApps)()}}const wD=new Ce("angularfire2._apps"),qee={provide:rh,useFactory:function zee(n){return n&&1===n.length?n[0]:new rh((0,$n.getApp)())},deps:[[new Fr,wD]]},Gee={provide:ED,deps:[[new Fr,wD]]};function Wee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new rh(r)}}let Zee=(()=>{class n{constructor(t){(0,$n.registerVersion)("angularfire",Ko.full,"core"),(0,$n.registerVersion)("angularfire",Ko.full,"app"),(0,$n.registerVersion)("angular",QE.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Ee(Ps))};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[qee,Gee]})}return n})();function Kee(n,...e){return{ngModule:Zee,providers:[{provide:wD,useFactory:Wee(n),multi:!0,deps:[Vt,Kr,hd,...e]}]}}const Qee=fT($n.initializeApp,!0);We(35);class TD{constructor(){return Fy("auth")}}class DD{constructor(e){return e}}const aU="firestore",AD=new Ce("angularfire2.firestore-instances");function nte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new DD(r)}}const rte={provide:class ete{constructor(){return Fy(aU)}},deps:[[new Fr,AD]]},ite={provide:DD,useFactory:function tte(n,e){const t=hT(aU,n,e);return t&&new DD(t)},deps:[[new Fr,AD],rh]};let ste=(()=>{class n{constructor(){(0,$n.registerVersion)("angularfire",Ko.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[ite,rte]})}return n})();function ote(n,...e){return{ngModule:ste,providers:[{provide:AD,useFactory:nte(n),multi:!0,deps:[Vt,Kr,hd,ED,[new Fr,TD],[new Fr,yp],...e]}]}}const ate=fT(lQ,!0);class SD{constructor(e){return e}}const uU="storage",RD=new Ce("angularfire2.storage-instances");function lte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new SD(r)}}const dte={provide:class ute{constructor(){return Fy(uU)}},deps:[[new Fr,RD]]},hte={provide:SD,useFactory:function cte(n,e){const t=hT(uU,n,e);return t&&new SD(t)},deps:[[new Fr,RD],rh]};let fte=(()=>{class n{constructor(){(0,$n.registerVersion)("angularfire",Ko.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kn({type:n});static \u0275inj=An({providers:[hte,dte]})}return n})();function pte(n,...e){return{ngModule:fte,providers:[{provide:RD,useFactory:lte(n),multi:!0,deps:[Vt,Kr,hd,ED,[new Fr,TD],[new Fr,yp],...e]}]}}const gte=fT(eX,!0);let mte=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Kn({type:n,bootstrap:[Hee]});static#n=this.\u0275inj=An({imports:[G6,Oee,TY,pX,J8,W8.initializeApp(sU_firebase),Kee(()=>Qee(sU_firebase)),ote(()=>ate()),pte(()=>gte()),Eee,Iee]})}return n})();z6().bootstrapModule(mte).catch(n=>console.error(n))},106:(rs,qn,We)=>{We.d(qn,{Z:()=>Gn});var S=We(58),Te=We(537),P=We(534),Ue=We(879);class xt{constructor(et,tt){this._delegate=et,this.firebase=tt,(0,P._addComponent)(et,new Te.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(et,tt=P._DEFAULT_ENTRY_NAME){var nr;this._delegate.checkDestroyed();const mn=this._delegate.container.getProvider(et);return!mn.isInitialized()&&"EXPLICIT"===(null===(nr=mn.getComponent())||void 0===nr?void 0:nr.instantiationMode)&&mn.initialize(),mn.getImmediate({identifier:tt})}_removeServiceInstance(et,tt=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(tt)}_addComponent(et){(0,P._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,P._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Nn=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function At(){const It=function en(It){const et={},tt={__esModule:!0,initializeApp:function mt(at,bn={}){const fe=P.initializeApp(at,bn);if((0,S.r3)(et,fe.name))return et[fe.name];const sn=new It(fe,tt);return et[fe.name]=sn,sn},app:mn,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function $r(at){const bn=at.name,fe=bn.replace("-compat","");if(P._registerComponent(at)&&"PUBLIC"===at.type){const sn=(Zt=mn())=>{if("function"!=typeof Zt[fe])throw Nn.create("invalid-app-argument",{appName:bn});return Zt[fe]()};void 0!==at.serviceProps&&(0,S.ZB)(sn,at.serviceProps),tt[fe]=sn,It.prototype[fe]=function(...Zt){return this._getService.bind(this,bn).apply(this,at.multipleInstances?Zt:[])}}return"PUBLIC"===at.type?tt[fe]:null},removeApp:function nr(at){delete et[at]},useAsService:function Ft(at,bn){return"serverAuth"===bn?null:bn},modularAPIs:P}};function mn(at){if(!(0,S.r3)(et,at=at||P._DEFAULT_ENTRY_NAME))throw Nn.create("no-app",{appName:at});return et[at]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function Ut(){return Object.keys(et).map(at=>et[at])}}),mn.App=It,tt}(xt);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:At,extendNamespace:function et(tt){(0,S.ZB)(It,tt)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),It}(),Ie=new Ue.Yd("@firebase/app-compat");if((0,S.jU)()&&void 0!==self.firebase){Ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&Ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Gn=he;!function Nt(It){(0,P.registerVersion)("@firebase/app-compat","0.2.35",It)}()},534:(rs,qn,We)=>{We.r(qn),We.d(qn,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>Cr,_DEFAULT_ENTRY_NAME:()=>li,_addComponent:()=>Pr,_addOrOverwriteComponent:()=>tn,_apps:()=>Sr,_clearComponents:()=>Ri,_components:()=>yn,_getProvider:()=>On,_isFirebaseApp:()=>Cs,_isFirebaseServerApp:()=>Qt,_registerComponent:()=>wr,_removeServiceInstance:()=>$s,_serverApps:()=>Rr,deleteApp:()=>Ds,getApp:()=>zs,getApps:()=>qs,initializeApp:()=>bs,initializeServerApp:()=>Hs,onLog:()=>C,registerVersion:()=>N,setLogLevel:()=>D});var S=We(861),Te=We(537),P=We(879),Ue=We(58);const xt=(M,z)=>z.some(W=>M instanceof W);let gn,Nn;const he=new WeakMap,Ie=new WeakMap,Be=new WeakMap,ot=new WeakMap,Nt=new WeakMap;let et={get(M,z,W){if(M instanceof IDBTransaction){if("done"===z)return Ie.get(M);if("objectStoreNames"===z)return M.objectStoreNames||Be.get(M);if("store"===z)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return mt(M[z])},set:(M,z,W)=>(M[z]=W,!0),has:(M,z)=>M instanceof IDBTransaction&&("done"===z||"store"===z)||z in M};function mn(M){return"function"==typeof M?function nr(M){return M!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function At(){return Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(M)?function(...z){return M.apply(Ut(this),z),mt(he.get(this))}:function(...z){return mt(M.apply(Ut(this),z))}:function(z,...W){const ye=M.call(Ut(this),z,...W);return Be.set(ye,z.sort?z.sort():[z]),mt(ye)}}(M):(M instanceof IDBTransaction&&function It(M){if(Ie.has(M))return;const z=new Promise((W,ye)=>{const nt=()=>{M.removeEventListener("complete",ut),M.removeEventListener("error",pt),M.removeEventListener("abort",pt)},ut=()=>{W(),nt()},pt=()=>{ye(M.error||new DOMException("AbortError","AbortError")),nt()};M.addEventListener("complete",ut),M.addEventListener("error",pt),M.addEventListener("abort",pt)});Ie.set(M,z)}(M),xt(M,function en(){return gn||(gn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(M,et):M)}function mt(M){if(M instanceof IDBRequest)return function Gn(M){const z=new Promise((W,ye)=>{const nt=()=>{M.removeEventListener("success",ut),M.removeEventListener("error",pt)},ut=()=>{W(mt(M.result)),nt()},pt=()=>{ye(M.error),nt()};M.addEventListener("success",ut),M.addEventListener("error",pt)});return z.then(W=>{W instanceof IDBCursor&&he.set(W,M)}).catch(()=>{}),Nt.set(z,M),z}(M);if(ot.has(M))return ot.get(M);const z=mn(M);return z!==M&&(ot.set(M,z),Nt.set(z,M)),z}const Ut=M=>Nt.get(M),at=["get","getKey","getAll","getAllKeys","count"],bn=["put","add","delete","clear"],fe=new Map;function sn(M,z){if(!(M instanceof IDBDatabase)||z in M||"string"!=typeof z)return;if(fe.get(z))return fe.get(z);const W=z.replace(/FromIndex$/,""),ye=z!==W,nt=bn.includes(W);if(!(W in(ye?IDBIndex:IDBObjectStore).prototype)||!nt&&!at.includes(W))return;const ut=function(){var pt=(0,S.Z)(function*(qt,...wt){const Pi=this.transaction(qt,nt?"readwrite":"readonly");let bo=Pi.store;return ye&&(bo=bo.index(wt.shift())),(yield Promise.all([bo[W](...wt),nt&&Pi.done]))[0]});return function(wt){return pt.apply(this,arguments)}}();return fe.set(z,ut),ut}!function tt(M){et=M(et)}(M=>({...M,get:(z,W,ye)=>sn(z,W)||M.get(z,W,ye),has:(z,W)=>!!sn(z,W)||M.has(z,W)}));class Zt{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(W=>{if(function _n(M){const z=M.getComponent();return"VERSION"===z?.type}(W)){const ye=W.getImmediate();return`${ye.library}/${ye.version}`}return null}).filter(W=>W).join(" ")}}const ai="@firebase/app",ui="0.10.5",ct=new P.Yd("@firebase/app"),li="[DEFAULT]",zi={[ai]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Sr=new Map,Rr=new Map,yn=new Map;function Pr(M,z){try{M.container.addComponent(z)}catch(W){ct.debug(`Component ${z.name} failed to register with FirebaseApp ${M.name}`,W)}}function tn(M,z){M.container.addOrOverwriteComponent(z)}function wr(M){const z=M.name;if(yn.has(z))return ct.debug(`There were multiple attempts to register component ${z}.`),!1;yn.set(z,M);for(const W of Sr.values())Pr(W,M);for(const W of Rr.values())Pr(W,M);return!0}function On(M,z){const W=M.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),M.container.getProvider(z)}function $s(M,z,W=li){On(M,z).clearInstance(W)}function Cs(M){return void 0!==M.options}function Qt(M){return void 0!==M.settings}function Ri(){yn.clear()}const kn=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rr{constructor(z,W,ye){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},W),this._name=W.name,this._automaticDataCollectionEnabled=W.automaticDataCollectionEnabled,this._container=ye,this.container.addComponent(new Te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}class vn extends rr{constructor(z,W,ye,nt){const ut=void 0!==W.automaticDataCollectionEnabled&&W.automaticDataCollectionEnabled,pt={name:ye,automaticDataCollectionEnabled:ut};super(void 0!==z.apiKey?z:z.options,pt,nt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ut},W),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,W.releaseOnDeref=void 0,N(ai,ui,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(z){this.isDeleted||(this._refCount++,void 0!==z&&this._finalizationRegistry.register(z,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ds(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw kn.create("server-app-deleted")}}const Cr="10.12.2";function bs(M,z={}){let W=M;"object"!=typeof z&&(z={name:z});const ye=Object.assign({name:li,automaticDataCollectionEnabled:!1},z),nt=ye.name;if("string"!=typeof nt||!nt)throw kn.create("bad-app-name",{appName:String(nt)});if(W||(W=(0,Ue.aH)()),!W)throw kn.create("no-options");const ut=Sr.get(nt);if(ut){if((0,Ue.vZ)(W,ut.options)&&(0,Ue.vZ)(ye,ut.config))return ut;throw kn.create("duplicate-app",{appName:nt})}const pt=new Te.H0(nt);for(const wt of yn.values())pt.addComponent(wt);const qt=new rr(W,ye,pt);return Sr.set(nt,qt),qt}function Hs(M,z){if((0,Ue.jU)())throw kn.create("invalid-server-app-environment");let W;void 0===z.automaticDataCollectionEnabled&&(z.automaticDataCollectionEnabled=!1),W=Cs(M)?M.options:M;const ye=Object.assign(Object.assign({},z),W);if(void 0!==ye.releaseOnDeref&&delete ye.releaseOnDeref,void 0!==z.releaseOnDeref&&typeof FinalizationRegistry>"u")throw kn.create("finalization-registry-not-supported",{});const ut=""+(Pi=JSON.stringify(ye),[...Pi].reduce((bo,cn)=>Math.imul(31,bo)+cn.charCodeAt(0)|0,0)),pt=Rr.get(ut);var Pi;if(pt)return pt.incRefCount(z.releaseOnDeref),pt;const qt=new Te.H0(ut);for(const Pi of yn.values())qt.addComponent(Pi);const wt=new vn(W,z,ut,qt);return Rr.set(ut,wt),wt}function zs(M=li){const z=Sr.get(M);if(!z&&M===li&&(0,Ue.aH)())return bs();if(!z)throw kn.create("no-app",{appName:M});return z}function qs(){return Array.from(Sr.values())}function Ds(M){return F.apply(this,arguments)}function F(){return(F=(0,S.Z)(function*(M){let z=!1;const W=M.name;Sr.has(W)?(z=!0,Sr.delete(W)):Rr.has(W)&&M.decRefCount()<=0&&(Rr.delete(W),z=!0),z&&(yield Promise.all(M.container.getProviders().map(ye=>ye.delete())),M.isDeleted=!0)})).apply(this,arguments)}function N(M,z,W){var ye;let nt=null!==(ye=zi[M])&&void 0!==ye?ye:M;W&&(nt+=`-${W}`);const ut=nt.match(/\s|\//),pt=z.match(/\s|\//);if(ut||pt){const qt=[`Unable to register library "${nt}" with version "${z}":`];return ut&&qt.push(`library name "${nt}" contains illegal characters (whitespace or "/")`),ut&&pt&&qt.push("and"),pt&&qt.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void ct.warn(qt.join(" "))}wr(new Te.wA(`${nt}-version`,()=>({library:nt,version:z}),"VERSION"))}function C(M,z){if(null!==M&&"function"!=typeof M)throw kn.create("invalid-log-argument");(0,P.Am)(M,z)}function D(M){(0,P.Ub)(M)}const w="firebase-heartbeat-database",O=1,le="firebase-heartbeat-store";let Ae=null;function ke(){return Ae||(Ae=function $r(M,z,{blocked:W,upgrade:ye,blocking:nt,terminated:ut}={}){const pt=indexedDB.open(M,z),qt=mt(pt);return ye&&pt.addEventListener("upgradeneeded",wt=>{ye(mt(pt.result),wt.oldVersion,wt.newVersion,mt(pt.transaction),wt)}),W&&pt.addEventListener("blocked",wt=>W(wt.oldVersion,wt.newVersion,wt)),qt.then(wt=>{ut&&wt.addEventListener("close",()=>ut()),nt&&wt.addEventListener("versionchange",Pi=>nt(Pi.oldVersion,Pi.newVersion,Pi))}).catch(()=>{}),qt}(w,O,{upgrade:(M,z)=>{if(0===z)try{M.createObjectStore(le)}catch(W){console.warn(W)}}}).catch(M=>{throw kn.create("idb-open",{originalErrorMessage:M.message})})),Ae}function Dt(){return(Dt=(0,S.Z)(function*(M){try{const W=(yield ke()).transaction(le),ye=yield W.objectStore(le).get(je(M));return yield W.done,ye}catch(z){if(z instanceof Ue.ZR)ct.warn(z.message);else{const W=kn.create("idb-get",{originalErrorMessage:z?.message});ct.warn(W.message)}}})).apply(this,arguments)}function Se(M,z){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,S.Z)(function*(M,z){try{const ye=(yield ke()).transaction(le,"readwrite");yield ye.objectStore(le).put(z,je(M)),yield ye.done}catch(W){if(W instanceof Ue.ZR)ct.warn(W.message);else{const ye=kn.create("idb-set",{originalErrorMessage:W?.message});ct.warn(ye.message)}}})).apply(this,arguments)}function je(M){return`${M.name}!${M.options.appId}`}class $t{constructor(z){this.container=z,this._heartbeatsCache=null;const W=this.container.getProvider("app").getImmediate();this._storage=new ha(W),this._heartbeatsCachePromise=this._storage.read().then(ye=>(this._heartbeatsCache=ye,ye))}triggerHeartbeat(){var z=this;return(0,S.Z)(function*(){var W,ye;const ut=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pt=Ze();if((null!=(null===(W=z._heartbeatsCache)||void 0===W?void 0:W.heartbeats)||(z._heartbeatsCache=yield z._heartbeatsCachePromise,null!=(null===(ye=z._heartbeatsCache)||void 0===ye?void 0:ye.heartbeats)))&&z._heartbeatsCache.lastSentHeartbeatDate!==pt&&!z._heartbeatsCache.heartbeats.some(qt=>qt.date===pt))return z._heartbeatsCache.heartbeats.push({date:pt,agent:ut}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(qt=>{const wt=new Date(qt.date).valueOf();return Date.now()-wt<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,S.Z)(function*(){var W;if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null==(null===(W=z._heartbeatsCache)||void 0===W?void 0:W.heartbeats)||0===z._heartbeatsCache.heartbeats.length)return"";const ye=Ze(),{heartbeatsToSend:nt,unsentEntries:ut}=function da(M,z=1024){const W=[];let ye=M.slice();for(const nt of M){const ut=W.find(pt=>pt.agent===nt.agent);if(ut){if(ut.dates.push(nt.date),To(W)>z){ut.dates.pop();break}}else if(W.push({agent:nt.agent,dates:[nt.date]}),To(W)>z){W.pop();break}ye=ye.slice(1)}return{heartbeatsToSend:W,unsentEntries:ye}}(z._heartbeatsCache.heartbeats),pt=(0,Ue.L)(JSON.stringify({version:2,heartbeats:nt}));return z._heartbeatsCache.lastSentHeartbeatDate=ye,ut.length>0?(z._heartbeatsCache.heartbeats=ut,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),pt})()}}function Ze(){return(new Date).toISOString().substring(0,10)}class ha{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,S.Z)(function*(){if(yield z._canUseIndexedDBPromise){const ye=yield function Xe(M){return Dt.apply(this,arguments)}(z.app);return ye?.heartbeats?ye:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(z){var W=this;return(0,S.Z)(function*(){var ye;if(yield W._canUseIndexedDBPromise){const ut=yield W.read();return Se(W.app,{lastSentHeartbeatDate:null!==(ye=z.lastSentHeartbeatDate)&&void 0!==ye?ye:ut.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var W=this;return(0,S.Z)(function*(){var ye;if(yield W._canUseIndexedDBPromise){const ut=yield W.read();return Se(W.app,{lastSentHeartbeatDate:null!==(ye=z.lastSentHeartbeatDate)&&void 0!==ye?ye:ut.lastSentHeartbeatDate,heartbeats:[...ut.heartbeats,...z.heartbeats]})}})()}}function To(M){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:M})).length}!function Dc(M){wr(new Te.wA("platform-logger",z=>new Zt(z),"PRIVATE")),wr(new Te.wA("heartbeat",z=>new $t(z),"PRIVATE")),N(ai,ui,M),N(ai,ui,"esm2017"),N("fire-js","")}("")},537:(rs,qn,We)=>{We.d(qn,{H0:()=>en,wA:()=>P});var S=We(861),Te=We(58);class P{constructor(he,Ie,Be){this.name=he,this.instanceFactory=Ie,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const Ue="[DEFAULT]";class xt{constructor(he,Ie){this.name=he,this.container=Ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const Ie=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(Ie)){const Be=new Te.BH;if(this.instancesDeferred.set(Ie,Be),this.isInitialized(Ie)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:Ie});ot&&Be.resolve(ot)}catch{}}return this.instancesDeferred.get(Ie).promise}getImmediate(he){var Ie;const Be=this.normalizeInstanceIdentifier(he?.identifier),ot=null!==(Ie=he?.optional)&&void 0!==Ie&&Ie;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Nt){if(ot)return null;throw Nt}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Nn(At){return"EAGER"===At.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[Ie,Be]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(Ie);try{const Nt=this.getOrInitializeService({instanceIdentifier:ot});Be.resolve(Nt)}catch{}}}}clearInstance(he=Ue){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,S.Z)(function*(){const Ie=Array.from(he.instances.values());yield Promise.all([...Ie.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...Ie.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=Ue){return this.instances.has(he)}getOptions(he=Ue){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:Ie={}}=he,Be=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:Be,options:Ie});for(const[Nt,Gn]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Nt)&&Gn.resolve(ot);return ot}onInit(he,Ie){var Be;const ot=this.normalizeInstanceIdentifier(Ie),Nt=null!==(Be=this.onInitCallbacks.get(ot))&&void 0!==Be?Be:new Set;Nt.add(he),this.onInitCallbacks.set(ot,Nt);const Gn=this.instances.get(ot);return Gn&&he(Gn,ot),()=>{Nt.delete(he)}}invokeOnInitCallbacks(he,Ie){const Be=this.onInitCallbacks.get(Ie);if(Be)for(const ot of Be)try{ot(he,Ie)}catch{}}getOrInitializeService({instanceIdentifier:he,options:Ie={}}){let Be=this.instances.get(he);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(At=he,At===Ue?void 0:At),options:Ie}),this.instances.set(he,Be),this.instancesOptions.set(he,Ie),this.invokeOnInitCallbacks(Be,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Be)}catch{}var At;return Be||null}normalizeInstanceIdentifier(he=Ue){return this.component?this.component.multipleInstances?he:Ue:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const Ie=this.getProvider(he.name);if(Ie.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);Ie.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const Ie=new xt(he,this);return this.providers.set(he,Ie),Ie}getProviders(){return Array.from(this.providers.values())}}},879:(rs,qn,We)=>{We.d(qn,{Am:()=>At,Ub:()=>en,Yd:()=>Nn,in:()=>Te});const S=[];var Te=function(he){return he[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",he}(Te||{});const P={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Ue=Te.INFO,xt={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},gn=(he,Ie,...Be)=>{if(Ie<he.logLevel)return;const ot=(new Date).toISOString(),Nt=xt[Ie];if(!Nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ie})`);console[Nt](`[${ot}]  ${he.name}:`,...Be)};class Nn{constructor(Ie){this.name=Ie,this._logLevel=Ue,this._logHandler=gn,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(Ie){if(!(Ie in Te))throw new TypeError(`Invalid value "${Ie}" assigned to \`logLevel\``);this._logLevel=Ie}setLogLevel(Ie){this._logLevel="string"==typeof Ie?P[Ie]:Ie}get logHandler(){return this._logHandler}set logHandler(Ie){if("function"!=typeof Ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ie){this._userLogHandler=Ie}debug(...Ie){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...Ie),this._logHandler(this,Te.DEBUG,...Ie)}log(...Ie){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...Ie),this._logHandler(this,Te.VERBOSE,...Ie)}info(...Ie){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...Ie),this._logHandler(this,Te.INFO,...Ie)}warn(...Ie){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...Ie),this._logHandler(this,Te.WARN,...Ie)}error(...Ie){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...Ie),this._logHandler(this,Te.ERROR,...Ie)}}function en(he){S.forEach(Ie=>{Ie.setLogLevel(he)})}function At(he,Ie){for(const Be of S){let ot=null;Ie&&Ie.level&&(ot=P[Ie.level]),Be.userLogHandler=null===he?null:(Nt,Gn,...It)=>{const et=It.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch{return null}}).filter(tt=>tt).join(" ");Gn>=(ot??Nt.logLevel)&&he({level:Te[Gn].toLowerCase(),message:et,args:It,type:Nt.name})}}}},365:(rs,qn,We)=>{We.r(qn);var S=We(861),Te=We(106),P=We(35),Ue=We(58),Nn=(We(534),We(879),We(537));function en(){return window}function Ie(){return Ie=(0,S.Z)(function*(C,D,w){var O;const{BuildInfo:le}=en();(0,P.au)(D.sessionId,"AuthEvent did not contain a session ID");const Ae=yield function tt(C){return nr.apply(this,arguments)}(D.sessionId),ke={};return(0,P.av)()?ke.ibi=le.packageName:(0,P.aw)()?ke.apn=le.packageName:(0,P.ax)(C,"operation-not-supported-in-this-environment"),le.displayName&&(ke.appDisplayName=le.displayName),ke.sessionId=Ae,(0,P.ay)(C,w,D.type,void 0,null!==(O=D.eventId)&&void 0!==O?O:void 0,ke)}),Ie.apply(this,arguments)}function ot(){return(ot=(0,S.Z)(function*(C){const{BuildInfo:D}=en(),w={};(0,P.av)()?w.iosBundleId=D.packageName:(0,P.aw)()?w.androidPackageName=D.packageName:(0,P.ax)(C,"operation-not-supported-in-this-environment"),yield(0,P.az)(C,w)})).apply(this,arguments)}function It(){return(It=(0,S.Z)(function*(C,D,w){const{cordova:O}=en();let le=()=>{};try{yield new Promise((Ae,ke)=>{let Xe=null;function Dt(){var je;Ae();const ir=null===(je=O.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof ir&&ir(),"function"==typeof w?.close&&w.close()}function Se(){Xe||(Xe=window.setTimeout(()=>{ke((0,P.aB)(C,"redirect-cancelled-by-user"))},2e3))}function Bt(){"visible"===document?.visibilityState&&Se()}D.addPassiveListener(Dt),document.addEventListener("resume",Se,!1),(0,P.aw)()&&document.addEventListener("visibilitychange",Bt,!1),le=()=>{D.removePassiveListener(Dt),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",Bt,!1),Xe&&window.clearTimeout(Xe)}})}finally{le()}})).apply(this,arguments)}function nr(){return(nr=(0,S.Z)(function*(C){const D=function mn(C){if((0,P.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const D=new ArrayBuffer(C.length),w=new Uint8Array(D);for(let O=0;O<C.length;O++)w[O]=C.charCodeAt(O);return w}(C),w=yield crypto.subtle.digest("SHA-256",D);return Array.from(new Uint8Array(w)).map(le=>le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ut extends P.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(D=>{this.resolveInialized=D})}addPassiveListener(D){this.passiveListeners.add(D)}removePassiveListener(D){this.passiveListeners.delete(D)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(D){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(D)),super.onEvent(D)}initialized(){var D=this;return(0,S.Z)(function*(){yield D.initPromise})()}}function at(C){return bn.apply(this,arguments)}function bn(){return(bn=(0,S.Z)(function*(C){const D=yield Zt()._get(_n(C));return D&&(yield Zt()._remove(_n(C))),D})).apply(this,arguments)}function sn(){const C=[];for(let w=0;w<20;w++){const O=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(O))}return C.join("")}function Zt(){return(0,P.aE)(P.b)}function _n(C){return(0,P.aF)("authEvent",C.config.apiKey,C.name)}function ct(C){if(!C?.includes("?"))return{};const[D,...w]=C.split("?");return(0,Ue.zd)(w.join("?"))}const X=class Ai{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(D){var w=this;return(0,S.Z)(function*(){const O=D._key();let le=w.eventManagers.get(O);return le||(le=new Ut(D),w.eventManagers.set(O,le),w.attachCallbackListeners(D,le)),le})()}_openPopup(D){(0,P.ax)(D,"operation-not-supported-in-this-environment")}_openRedirect(D,w,O,le){var Ae=this;return(0,S.Z)(function*(){!function et(C){var D,w,O,le,Ae,ke,Xe,Dt,Se,Bt;const je=en();(0,P.aC)("function"==typeof(null===(D=je?.universalLinks)||void 0===D?void 0:D.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aC)(typeof(null===(w=je?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aC)("function"==typeof(null===(Ae=null===(le=null===(O=je?.cordova)||void 0===O?void 0:O.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ae?void 0:Ae.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Dt=null===(Xe=null===(ke=je?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===Dt?void 0:Dt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Bt=null===(Se=je?.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===Bt?void 0:Bt.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(D);const ke=yield Ae._initialize(D);yield ke.initialized(),ke.resetRedirect(),(0,P.aI)(),yield Ae._originValidation(D);const Xe=function $r(C,D,w=null){return{type:D,eventId:w,urlResponse:null,sessionId:sn(),postBody:null,tenantId:C.tenantId,error:(0,P.aB)(C,"no-auth-event")}}(D,O,le);yield function Ft(C,D){return Zt()._set(_n(C),D)}(D,Xe);const Dt=yield function he(C,D,w){return Ie.apply(this,arguments)}(D,Xe,w),Se=yield function Nt(C){const{cordova:D}=en();return new Promise(w=>{D.plugins.browsertab.isAvailable(O=>{let le=null;O?D.plugins.browsertab.openUrl(C):le=D.InAppBrowser.open(C,(0,P.aA)()?"_blank":"_system","location=yes"),w(le)})})}(Dt);return function Gn(C,D,w){return It.apply(this,arguments)}(D,ke,Se)})()}_isIframeWebStorageSupported(D,w){throw new Error("Method not implemented.")}_originValidation(D){const w=D._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Be(C){return ot.apply(this,arguments)}(D)),this.originValidationPromises[w]}attachCallbackListeners(D,w){const{universalLinks:O,handleOpenURL:le,BuildInfo:Ae}=en(),ke=setTimeout((0,S.Z)(function*(){yield at(D),w.onEvent(te())}),500),Xe=function(){var Bt=(0,S.Z)(function*(je){clearTimeout(ke);const ir=yield at(D);let Co=null;ir&&je?.url&&(Co=function fe(C,D){var w,O;const le=function ui(C){const D=ct(C),w=D.link?decodeURIComponent(D.link):void 0,O=ct(w).link,le=D.deep_link_id?decodeURIComponent(D.deep_link_id):void 0;return ct(le).link||le||O||w||C}(D);if(le.includes("/__/auth/callback")){const Ae=ct(le),ke=Ae.firebaseError?function ai(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(Ae.firebaseError)):null,Xe=null===(O=null===(w=ke?.code)||void 0===w?void 0:w.split("auth/"))||void 0===O?void 0:O[1],Dt=Xe?(0,P.aB)(Xe):null;return Dt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:le,postBody:null}}return null}(ir,je.url)),w.onEvent(Co||te())});return function(ir){return Bt.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,Xe);const Dt=le,Se=`${Ae.packageName.toLowerCase()}://`;en().handleOpenURL=function(){var Bt=(0,S.Z)(function*(je){if(je.toLowerCase().startsWith(Se)&&Xe({url:je}),"function"==typeof Dt)try{Dt(je)}catch(ir){console.error(ir)}});return function(je){return Bt.apply(this,arguments)}}()}};function te(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aB)("no-auth-event")}}function Re(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function xe(C=(0,Ue.z$)()){return!("file:"!==Re()&&"ionic:"!==Re()&&"capacitor:"!==Re()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ot(){try{const C=self.localStorage,D=P.aN();if(C)return C.setItem(D,"1"),C.removeItem(D),!function ci(C=(0,Ue.z$)()){return function bt(){return(0,Ue.w1)()&&11===document?.documentMode}()||function on(C=(0,Ue.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,Ue.hl)()}catch{return Kt()&&(0,Ue.hl)()}return!1}function Kt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dn(){return(function Et(){return"http:"===Re()||"https:"===Re()}()||(0,Ue.ru)()||xe())&&!function Ve(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&Ot()&&!Kt()}function Wn(){return xe()&&typeof document<"u"}function Es(){return(Es=(0,S.Z)(function*(){return!!Wn()&&new Promise(C=>{const D=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(D),C(!0)})})})).apply(this,arguments)}const kt={LOCAL:"local",NONE:"none",SESSION:"session"},Si=P.aC,js="persistence";function li(C){return zi.apply(this,arguments)}function zi(){return(zi=(0,S.Z)(function*(C){yield C._initializationPromise;const D=Rr(),w=P.aF(js,C.config.apiKey,C.name);D&&D.setItem(w,C._getPersistence())})).apply(this,arguments)}function Rr(){var C;try{return(null===(C=function Hi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const yn=P.aC;class Pr{constructor(){this.browserResolver=P.aE(P.k),this.cordovaResolver=P.aE(X),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(D){var w=this;return(0,S.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(D)})()}_openPopup(D,w,O,le){var Ae=this;return(0,S.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openPopup(D,w,O,le)})()}_openRedirect(D,w,O,le){var Ae=this;return(0,S.Z)(function*(){return yield Ae.selectUnderlyingResolver(),Ae.assertedUnderlyingResolver._openRedirect(D,w,O,le)})()}_isIframeWebStorageSupported(D,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(D,w)}_originValidation(D){return this.assertedUnderlyingResolver._originValidation(D)}get _shouldInitProactively(){return Wn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var D=this;return(0,S.Z)(function*(){if(D.underlyingResolver)return;const w=yield function lr(){return Es.apply(this,arguments)}();D.underlyingResolver=w?D.cordovaResolver:D.browserResolver})()}}function tn(C){return C.unwrap()}function On(C){return Cs(C)}function Cs(C){const{_tokenResponse:D}=C instanceof Ue.ZR?C.customData:C;if(!D)return null;if(!(C instanceof Ue.ZR)&&"temporaryProof"in D&&"phoneNumber"in D)return P.P.credentialFromResult(C);const w=D.providerId;if(!w||w===P.p.PASSWORD)return null;let O;switch(w){case P.p.GOOGLE:O=P.X;break;case P.p.FACEBOOK:O=P.W;break;case P.p.GITHUB:O=P.Y;break;case P.p.TWITTER:O=P.$;break;default:const{oauthIdToken:le,oauthAccessToken:Ae,oauthTokenSecret:ke,pendingToken:Xe,nonce:Dt}=D;return Ae||ke||le||Xe?Xe?w.startsWith("saml.")?P.aQ._create(w,Xe):P.N._fromParams({providerId:w,signInMethod:w,pendingToken:Xe,idToken:le,accessToken:Ae}):new P.Z(w).credential({idToken:le,accessToken:Ae,rawNonce:Dt}):null}return C instanceof Ue.ZR?O.credentialFromError(C):O.credentialFromResult(C)}function Qt(C,D){return D.catch(w=>{throw w instanceof Ue.ZR&&function $s(C,D){var w;const O=null===(w=D.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===D?.code)D.resolver=new kn(C,P.as(C,D));else if(O){const le=Cs(D),Ae=D;le&&(Ae.credential=le,Ae.tenantId=O.tenantId||void 0,Ae.email=O.email||void 0,Ae.phoneNumber=O.phoneNumber||void 0)}}(C,w),w}).then(w=>{const le=w.user;return{operationType:w.operationType,credential:On(w),additionalUserInfo:P.aq(w),user:rr.getOrCreate(le)}})}function Ri(C,D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,S.Z)(function*(C,D){const w=yield D;return{verificationId:w.verificationId,confirm:O=>Qt(C,w.confirm(O))}})).apply(this,arguments)}class kn{constructor(D,w){this.resolver=w,this.auth=function wr(C){return C.wrapped()}(D)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(D){return Qt(tn(this.auth),this.resolver.resolveSignIn(D))}}class rr{constructor(D){this._delegate=D,this.multiFactor=P.at(D)}static getOrCreate(D){return rr.USER_MAP.has(D)||rr.USER_MAP.set(D,new rr(D)),rr.USER_MAP.get(D)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(D){return this._delegate.getIdTokenResult(D)}getIdToken(D){return this._delegate.getIdToken(D)}linkAndRetrieveDataWithCredential(D){return this.linkWithCredential(D)}linkWithCredential(D){var w=this;return(0,S.Z)(function*(){return Qt(w.auth,P.a2(w._delegate,D))})()}linkWithPhoneNumber(D,w){var O=this;return(0,S.Z)(function*(){return Ri(O.auth,P.l(O._delegate,D,w))})()}linkWithPopup(D){var w=this;return(0,S.Z)(function*(){return Qt(w.auth,P.d(w._delegate,D,Pr))})()}linkWithRedirect(D){var w=this;return(0,S.Z)(function*(){return yield li(P.aJ(w.auth)),P.g(w._delegate,D,Pr)})()}reauthenticateAndRetrieveDataWithCredential(D){return this.reauthenticateWithCredential(D)}reauthenticateWithCredential(D){var w=this;return(0,S.Z)(function*(){return Qt(w.auth,P.a3(w._delegate,D))})()}reauthenticateWithPhoneNumber(D,w){return Ri(this.auth,P.r(this._delegate,D,w))}reauthenticateWithPopup(D){return Qt(this.auth,P.e(this._delegate,D,Pr))}reauthenticateWithRedirect(D){var w=this;return(0,S.Z)(function*(){return yield li(P.aJ(w.auth)),P.h(w._delegate,D,Pr)})()}sendEmailVerification(D){return P.ag(this._delegate,D)}unlink(D){var w=this;return(0,S.Z)(function*(){return yield P.ap(w._delegate,D),w})()}updateEmail(D){return P.al(this._delegate,D)}updatePassword(D){return P.am(this._delegate,D)}updatePhoneNumber(D){return P.u(this._delegate,D)}updateProfile(D){return P.ak(this._delegate,D)}verifyBeforeUpdateEmail(D,w){return P.ah(this._delegate,D,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rr.USER_MAP=new WeakMap;const vn=P.aC;let Cr=(()=>{class C{constructor(w,O){if(this.app=w,O.isInitialized())return this._delegate=O.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:le}=w.options;vn(le,"invalid-api-key",{appName:w.name}),vn(le,"invalid-api-key",{appName:w.name});const Ae=typeof window<"u"?Pr:void 0;this._delegate=O.initialize({options:{persistence:Hs(le,w.name),popupRedirectResolver:Ae}}),this._delegate._updateErrorMap(P.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,O){P.K(this._delegate,w,O)}applyActionCode(w){return P.a7(this._delegate,w)}checkActionCode(w){return P.a8(this._delegate,w)}confirmPasswordReset(w,O){return P.a6(this._delegate,w,O)}createUserWithEmailAndPassword(w,O){var le=this;return(0,S.Z)(function*(){return Qt(le._delegate,P.aa(le._delegate,w,O))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return P.af(this._delegate,w)}isSignInWithEmailLink(w){return P.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,S.Z)(function*(){vn(Dn(),w._delegate,"operation-not-supported-in-this-environment");const O=yield P.j(w._delegate,Pr);return O?Qt(w._delegate,Promise.resolve(O)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function se(C,D){(0,P.aJ)(C)._logFramework(D)}(this._delegate,w)}onAuthStateChanged(w,O,le){const{next:Ae,error:ke,complete:Xe}=bs(w,O,le);return this._delegate.onAuthStateChanged(Ae,ke,Xe)}onIdTokenChanged(w,O,le){const{next:Ae,error:ke,complete:Xe}=bs(w,O,le);return this._delegate.onIdTokenChanged(Ae,ke,Xe)}sendSignInLinkToEmail(w,O){return P.ac(this._delegate,w,O)}sendPasswordResetEmail(w,O){return P.a5(this._delegate,w,O||void 0)}setPersistence(w){var O=this;return(0,S.Z)(function*(){let le;switch(function ws(C,D){Si(Object.values(kt).includes(D),C,"invalid-persistence-type"),(0,Ue.b$)()?Si(D!==kt.SESSION,C,"unsupported-persistence-type"):(0,Ue.UG)()?Si(D===kt.NONE,C,"unsupported-persistence-type"):Kt()?Si(D===kt.NONE||D===kt.LOCAL&&(0,Ue.hl)(),C,"unsupported-persistence-type"):Si(D===kt.NONE||Ot(),C,"unsupported-persistence-type")}(O._delegate,w),w){case kt.SESSION:le=P.a;break;case kt.LOCAL:le=(yield P.aE(P.i)._isAvailable())?P.i:P.b;break;case kt.NONE:le=P.U;break;default:return P.ax("argument-error",{appName:O._delegate.name})}return O._delegate.setPersistence(le)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Qt(this._delegate,P.a0(this._delegate))}signInWithCredential(w){return Qt(this._delegate,P.a1(this._delegate,w))}signInWithCustomToken(w){return Qt(this._delegate,P.a4(this._delegate,w))}signInWithEmailAndPassword(w,O){return Qt(this._delegate,P.ab(this._delegate,w,O))}signInWithEmailLink(w,O){return Qt(this._delegate,P.ae(this._delegate,w,O))}signInWithPhoneNumber(w,O){return Ri(this._delegate,P.s(this._delegate,w,O))}signInWithPopup(w){var O=this;return(0,S.Z)(function*(){return vn(Dn(),O._delegate,"operation-not-supported-in-this-environment"),Qt(O._delegate,P.c(O._delegate,w,Pr))})()}signInWithRedirect(w){var O=this;return(0,S.Z)(function*(){return vn(Dn(),O._delegate,"operation-not-supported-in-this-environment"),yield li(O._delegate),P.f(O._delegate,w,Pr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return P.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=kt,C})();function bs(C,D,w){let O=C;"function"!=typeof C&&({next:O,error:D,complete:w}=C);const le=O;return{next:ke=>le(ke&&rr.getOrCreate(ke)),error:D,complete:w}}function Hs(C,D){const w=function Sr(C,D){const w=Rr();if(!w)return[];const O=P.aF(js,C,D);switch(w.getItem(O)){case kt.NONE:return[P.U];case kt.LOCAL:return[P.i,P.a];case kt.SESSION:return[P.a];default:return[]}}(C,D);if(typeof self<"u"&&!w.includes(P.i)&&w.push(P.i),typeof window<"u")for(const O of[P.b,P.a])w.includes(O)||w.push(O);return w.includes(P.U)||w.push(P.U),w}class zs{constructor(){this.providerId="phone",this._delegate=new P.P(tn(Te.Z.auth()))}static credential(D,w){return P.P.credential(D,w)}verifyPhoneNumber(D,w){return this._delegate.verifyPhoneNumber(D,w)}unwrap(){return this._delegate}}zs.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,zs.PROVIDER_ID=P.P.PROVIDER_ID;const qs=P.aC;class Ds{constructor(D,w,O=Te.Z.app()){var le;qs(null===(le=O.options)||void 0===le?void 0:le.apiKey,"invalid-api-key",{appName:O.name}),this._delegate=new P.R(O.auth(),D,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function N(C){C.INTERNAL.registerComponent(new Nn.wA("auth-compat",D=>{const w=D.getProvider("app-compat").getImmediate(),O=D.getProvider("auth");return new Cr(w,O)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.V,FacebookAuthProvider:P.W,GithubAuthProvider:P.Y,GoogleAuthProvider:P.X,OAuthProvider:P.Z,SAMLAuthProvider:P._,PhoneAuthProvider:zs,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Ds,TwitterAuthProvider:P.$,Auth:Cr,AuthCredential:P.L,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.9")}(Te.Z)},861:(rs,qn,We)=>{function S(P,Ue,xt,gn,Nn,en,At){try{var he=P[en](At),Ie=he.value}catch(Be){return void xt(Be)}he.done?Ue(Ie):Promise.resolve(Ie).then(gn,Nn)}function Te(P){return function(){var Ue=this,xt=arguments;return new Promise(function(gn,Nn){var en=P.apply(Ue,xt);function At(Ie){S(en,gn,Nn,At,he,"next",Ie)}function he(Ie){S(en,gn,Nn,At,he,"throw",Ie)}At(void 0)})}}We.d(qn,{Z:()=>Te})},582:(rs,qn,We)=>{function Ue(X,te){var se={};for(var oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&te.indexOf(oe)<0&&(se[oe]=X[oe]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(oe=Object.getOwnPropertySymbols(X);de<oe.length;de++)te.indexOf(oe[de])<0&&Object.prototype.propertyIsEnumerable.call(X,oe[de])&&(se[oe[de]]=X[oe[de]])}return se}function Be(X,te,se,oe){return new(se||(se=Promise))(function(ne,Re){function Et(bt){try{Ve(oe.next(bt))}catch(on){Re(on)}}function xe(bt){try{Ve(oe.throw(bt))}catch(on){Re(on)}}function Ve(bt){bt.done?ne(bt.value):function de(ne){return ne instanceof se?ne:new se(function(Re){Re(ne)})}(bt.value).then(Et,xe)}Ve((oe=oe.apply(X,te||[])).next())})}function mt(X){return this instanceof mt?(this.v=X,this):new mt(X)}function Ut(X,te,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,oe=se.apply(X,te||[]),ne=[];return de={},Et("next"),Et("throw"),Et("return",function Re(Ot){return function(Kt){return Promise.resolve(Kt).then(Ot,on)}}),de[Symbol.asyncIterator]=function(){return this},de;function Et(Ot,Kt){oe[Ot]&&(de[Ot]=function(Dn){return new Promise(function(Wn,lr){ne.push([Ot,Dn,Wn,lr])>1||xe(Ot,Dn)})},Kt&&(de[Ot]=Kt(de[Ot])))}function xe(Ot,Kt){try{!function Ve(Ot){Ot.value instanceof mt?Promise.resolve(Ot.value.v).then(bt,on):ci(ne[0][2],Ot)}(oe[Ot](Kt))}catch(Dn){ci(ne[0][3],Dn)}}function bt(Ot){xe("next",Ot)}function on(Ot){xe("throw",Ot)}function ci(Ot,Kt){Ot(Kt),ne.shift(),ne.length&&xe(ne[0][0],ne[0][1])}}function Ft(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,te=X[Symbol.asyncIterator];return te?te.call(X):(X=function It(X){var te="function"==typeof Symbol&&Symbol.iterator,se=te&&X[te],oe=0;if(se)return se.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&oe>=X.length&&(X=void 0),{value:X&&X[oe++],done:!X}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),se={},oe("next"),oe("throw"),oe("return"),se[Symbol.asyncIterator]=function(){return this},se);function oe(ne){se[ne]=X[ne]&&function(Re){return new Promise(function(Et,xe){!function de(ne,Re,Et,xe){Promise.resolve(xe).then(function(Ve){ne({value:Ve,done:Et})},Re)}(Et,xe,(Re=X[ne](Re)).done,Re.value)})}}}We.d(qn,{FC:()=>Ut,KL:()=>Ft,_T:()=>Ue,mG:()=>Be,qq:()=>mt}),"function"==typeof SuppressedError&&SuppressedError}},rs=>{rs(rs.s=541)}]);