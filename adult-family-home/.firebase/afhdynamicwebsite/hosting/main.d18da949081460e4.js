"use strict";(self.webpackChunkadult_family_home=self.webpackChunkadult_family_home||[]).push([[179],{35:(Ji,zn,Ge)=>{Ge.d(zn,{$:()=>xg,A:()=>_e,G:()=>Mt,K:()=>Zd,L:()=>Eo,N:()=>Bi,P:()=>am,R:()=>im,U:()=>Ye,V:()=>aa,W:()=>Cc,X:()=>ih,Y:()=>sh,Z:()=>wt,_:()=>hu,a:()=>pa,a0:()=>Og,a1:()=>Mc,a2:()=>ji,a3:()=>Fg,a4:()=>Lg,a5:()=>Ug,a6:()=>xc,a7:()=>pI,a8:()=>Me,a9:()=>ln,aA:()=>pc,aB:()=>Lt,aC:()=>de,aD:()=>ss,aE:()=>be,aF:()=>Dt,aG:()=>Gc,aH:()=>hm,aI:()=>NI,aJ:()=>un,aN:()=>ga,aQ:()=>Br,aa:()=>fu,ab:()=>ca,ac:()=>kn,ad:()=>la,ae:()=>nt,af:()=>Vn,ag:()=>da,ah:()=>pu,ak:()=>gu,al:()=>mt,am:()=>Zb,ap:()=>fI,aq:()=>Rr,as:()=>Xb,at:()=>qg,au:()=>Wt,av:()=>vo,aw:()=>We,ax:()=>gt,ay:()=>Jc,az:()=>_m,b:()=>_I,c:()=>um,d:()=>Qe,e:()=>cm,f:()=>bt,g:()=>rs,h:()=>lr,i:()=>vI,j:()=>OI,k:()=>Cm,l:()=>ts,m:()=>l0,p:()=>Xt,r:()=>om,s:()=>Sh,u:()=>jr});var S=Ge(861),Ce=Ge(534),P=Ge(58),Ue=Ge(879),Pt=Ge(582),pn=Ge(537);const Xt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_e={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Mt=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},qn=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},vt=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new Ue.Yd("@firebase/auth");function gn(p,...c){Xe.logLevel<=Ue.in.ERROR&&Xe.error(`Auth (${Ce.SDK_VERSION}): ${p}`,...c)}function gt(p,...c){throw Cn(p,...c)}function Lt(p,...c){return Cn(p,...c)}function Lr(p,c,d){const g=Object.assign(Object.assign({},qn()),{[c]:d});return new P.LL("auth","Firebase",g).create(c,{appName:p.name})}function Ot(p){return Lr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function st(p,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&gt(p,"argument-error"),Lr(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cn(p,...c){if("string"!=typeof p){const d=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return vt.create(p,...c)}function de(p,c,...d){if(!p)throw Cn(c,...d)}function rn(p){const c="INTERNAL ASSERTION FAILED: "+p;throw gn(c),new Error(c)}function Wt(p,c){p||rn(c)}function mn(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ii(){return"http:"===si()||"https:"===si()}function si(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ti{constructor(c,d){this.shortDelay=c,this.longDelay=d,Wt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function at(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ii()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function J(p,c){Wt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class ee{static initialize(c,d,g){this.fetchImpl=c,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const re={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},se=new Ti(3e4,6e4);function ce(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function te(p,c,d,g){return Re.apply(this,arguments)}function Re(){return(Re=(0,S.Z)(function*(p,c,d,g,v={}){return It(p,v,(0,S.Z)(function*(){let C={},U={};g&&("GET"===c?U=g:C={body:JSON.stringify(g)});const Q=(0,P.xO)(Object.assign({key:p.config.apiKey},U)).slice(1),he=yield p._getAdditionalHeaders();return he["Content-Type"]="application/json",p.languageCode&&(he["X-Firebase-Locale"]=p.languageCode),ee.fetch()(sn(p,p.config.apiHost,d,Q),Object.assign({method:c,headers:he,referrerPolicy:"no-referrer"},C))}))})).apply(this,arguments)}function It(p,c,d){return xe.apply(this,arguments)}function xe(){return(xe=(0,S.Z)(function*(p,c,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},re),c);try{const v=new Nt(p),C=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const U=yield C.json();if("needConfirmation"in U)throw Zt(p,"account-exists-with-different-credential",U);if(C.ok&&!("errorMessage"in U))return U;{const Q=C.ok?U.errorMessage:U.error.message,[he,Ne]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===he)throw Zt(p,"credential-already-in-use",U);if("EMAIL_EXISTS"===he)throw Zt(p,"email-already-in-use",U);if("USER_DISABLED"===he)throw Zt(p,"user-disabled",U);const ze=g[he]||he.toLowerCase().replace(/[_\s]+/g,"-");if(Ne)throw Lr(p,ze,Ne);gt(p,ze)}}catch(v){if(v instanceof P.ZR)throw v;gt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Fe(p,c,d,g){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,S.Z)(function*(p,c,d,g,v={}){const C=yield te(p,c,d,g,v);return"mfaPendingCredential"in C&&gt(p,"multi-factor-auth-required",{_serverResponse:C}),C})).apply(this,arguments)}function sn(p,c,d,g){const v=`${c}${d}?${g}`;return p.config.emulator?J(p.config,v):`${p.config.apiScheme}://${v}`}function oi(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Nt{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Lt(this.auth,"network-request-failed")),se.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zt(p,c,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Lt(p,c,g);return v.customData._tokenResponse=d,v}function Dn(p){return void 0!==p&&void 0!==p.getResponse}function Gn(p){return void 0!==p&&void 0!==p.enterprise}class ur{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return oi(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Li(){return(Li=(0,S.Z)(function*(p){return(yield te(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function xt(p,c){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,S.Z)(function*(p,c){return te(p,"GET","/v2/recaptchaConfig",ce(p,c))})).apply(this,arguments)}function _s(){return(_s=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Ui(){return(Ui=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Cr(p,c){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function _n(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function yr(){return(yr=(0,S.Z)(function*(p,c=!1){const d=(0,P.m9)(p),g=yield d.getIdToken(c),v=Fs(g);de(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const C="object"==typeof v.firebase?v.firebase:void 0,U=C?.sign_in_provider;return{claims:v,token:g,authTime:_n(xn(v.auth_time)),issuedAtTime:_n(xn(v.iat)),expirationTime:_n(xn(v.exp)),signInProvider:U||null,signInSecondFactor:C?.sign_in_second_factor||null}})).apply(this,arguments)}function xn(p){return 1e3*Number(p)}function Fs(p){const[c,d,g]=p.split(".");if(void 0===c||void 0===d||void 0===g)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,P.tV)(d);return v?JSON.parse(v):(gn("Failed to decode base64 JWT payload"),null)}catch(v){return gn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function ys(p){const c=Fs(p);return de(c,"internal-error"),de(typeof c.exp<"u","internal-error"),de(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Kt(p,c){return Di.apply(this,arguments)}function Di(){return(Di=(0,S.Z)(function*(p,c,d=!1){if(d)return c;try{return yield c}catch(g){throw g instanceof P.ZR&&function vs({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class On{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,S.Z)(function*(){yield d.iteration()}),g)}iteration(){var c=this;return(0,S.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class er{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=_n(this.lastLoginAt),this.creationTime=_n(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(p){return vr.apply(this,arguments)}function vr(){return(vr=(0,S.Z)(function*(p){var c;const d=p.auth,g=yield p.getIdToken(),v=yield Kt(p,Cr(d,{idToken:g}));de(v?.users.length,d,"internal-error");const C=v.users[0];p._notifyReloadListener(C);const U=null!==(c=C.providerUserInfo)&&void 0!==c&&c.length?Bs(C.providerUserInfo):[],Q=function Us(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,U),ze=!!p.isAnonymous&&!(p.email&&C.passwordHash||Q?.length),_t={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:Q,metadata:new er(C.createdAt,C.lastLoginAt),isAnonymous:ze};Object.assign(p,_t)})).apply(this,arguments)}function Ls(){return(Ls=(0,S.Z)(function*(p){const c=(0,P.m9)(p);yield yn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Bs(p){return p.map(c=>{var{providerId:d}=c,g=(0,Pt._T)(c,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function V(){return(V=(0,S.Z)(function*(p,c){const d=yield It(p,{},(0,S.Z)(function*(){const g=(0,P.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:C}=p.config,U=sn(p,v,"/v1/token",`key=${C}`),Q=yield p._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",ee.fetch()(U,{method:"POST",headers:Q,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,S.Z)(function*(p,c){return te(p,"POST","/v2/accounts:revokeToken",ce(p,c))})).apply(this,arguments)}class A{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){de(c.idToken,"internal-error"),de(typeof c.idToken<"u","internal-error"),de(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):ys(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){de(0!==c.length,"internal-error");const d=ys(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var g=this;return(0,S.Z)(function*(){return d||!g.accessToken||g.isExpired?(de(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var g=this;return(0,S.Z)(function*(){const{accessToken:v,refreshToken:C,expiresIn:U}=yield function Es(p,c){return V.apply(this,arguments)}(c,d);g.updateTokensAndExpiration(v,C,Number(U))})()}updateTokensAndExpiration(c,d,g){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,d){const{refreshToken:g,accessToken:v,expirationTime:C}=d,U=new A;return g&&(de("string"==typeof g,"internal-error",{appName:c}),U.refreshToken=g),v&&(de("string"==typeof v,"internal-error",{appName:c}),U.accessToken=v),C&&(de("number"==typeof C,"internal-error",{appName:c}),U.expirationTime=C),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new A,this.toJSON())}_performRefresh(){return rn("not implemented")}}function w(p,c){de("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class O{constructor(c){var{uid:d,auth:g,stsTokenManager:v}=c,C=(0,Pt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new On(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new er(C.createdAt||void 0,C.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,S.Z)(function*(){const g=yield Kt(d,d.stsTokenManager.getToken(d.auth,c));return de(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(c){return function en(p){return yr.apply(this,arguments)}(this,c)}reload(){return function Is(p){return Ls.apply(this,arguments)}(this)}_assign(c){this!==c&&(de(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new O(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var g=this;return(0,S.Z)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),d&&(yield yn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,S.Z)(function*(){if((0,Ce._isFirebaseServerApp)(c.auth.app))return Promise.reject(Ot(c.auth));const d=yield c.getIdToken();return yield Kt(c,function Vs(p,c){return _s.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var g,v,C,U,Q,he,Ne,ze;const _t=null!==(g=d.displayName)&&void 0!==g?g:void 0,hr=null!==(v=d.email)&&void 0!==v?v:void 0,Hr=null!==(C=d.phoneNumber)&&void 0!==C?C:void 0,nl=null!==(U=d.photoURL)&&void 0!==U?U:void 0,Qh=null!==(Q=d.tenantId)&&void 0!==Q?Q:void 0,rl=null!==(he=d._redirectEventId)&&void 0!==he?he:void 0,Ea=null!==(Ne=d.createdAt)&&void 0!==Ne?Ne:void 0,Am=null!==(ze=d.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:fr,emailVerified:bm,isAnonymous:sr,providerData:Du,stsTokenManager:Sm}=d;de(fr&&Sm,c,"internal-error");const Rm=A.fromJSON(this.name,Sm);de("string"==typeof fr,c,"internal-error"),w(_t,c.name),w(hr,c.name),de("boolean"==typeof bm,c,"internal-error"),de("boolean"==typeof sr,c,"internal-error"),w(Hr,c.name),w(nl,c.name),w(Qh,c.name),w(rl,c.name),w(Ea,c.name),w(Am,c.name);const wa=new O({uid:fr,auth:c,email:hr,emailVerified:bm,displayName:_t,isAnonymous:sr,photoURL:nl,phoneNumber:Hr,tenantId:Qh,stsTokenManager:Rm,createdAt:Ea,lastLoginAt:Am});return Du&&Array.isArray(Du)&&(wa.providerData=Du.map(Ta=>Object.assign({},Ta))),rl&&(wa._redirectEventId=rl),wa}static _fromIdTokenResponse(c,d,g=!1){return(0,S.Z)(function*(){const v=new A;v.updateFromServerResponse(d);const C=new O({uid:d.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield yn(C),C})()}static _fromGetAccountInfoResponse(c,d,g){return(0,S.Z)(function*(){const v=d.users[0];de(void 0!==v.localId,"internal-error");const C=void 0!==v.providerUserInfo?Bs(v.providerUserInfo):[],U=!(v.email&&v.passwordHash||C?.length),Q=new A;Q.updateFromIdToken(g);const he=new O({uid:v.localId,auth:c,stsTokenManager:Q,isAnonymous:U}),Ne={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:C,metadata:new er(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||C?.length)};return Object.assign(he,Ne),he})()}}const ue=new Map;function be(p){Wt(p instanceof Function,"Expected a class definition");let c=ue.get(p);return c?(Wt(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,ue.set(p,c),c)}const Ye=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,S.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,S.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,S.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,S.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Dt(p,c,d){return`firebase:${p}:${c}:${d}`}class Se{constructor(c,d,g){this.persistence=c,this.auth=d,this.userKey=g;const{config:v,name:C}=this.auth;this.fullUserKey=Dt(this.userKey,v.apiKey,C),this.fullPersistenceKey=Dt("persistence",v.apiKey,C),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,S.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?O._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,S.Z)(function*(){if(d.persistence===c)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,g="authUser"){return(0,S.Z)(function*(){if(!d.length)return new Se(be(Ye),c,g);const v=(yield Promise.all(d.map(function(){var Ne=(0,S.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Ne.apply(this,arguments)}}()))).filter(Ne=>Ne);let C=v[0]||be(Ye);const U=Dt(g,c.config.apiKey,c.name);let Q=null;for(const Ne of d)try{const ze=yield Ne._get(U);if(ze){const _t=O._fromJSON(c,ze);Ne!==C&&(Q=_t),C=Ne;break}}catch{}const he=v.filter(Ne=>Ne._shouldAllowMigration);return C._shouldAllowMigration&&he.length?(C=he[0],Q&&(yield C._set(U,Q.toJSON())),yield Promise.all(d.map(function(){var Ne=(0,S.Z)(function*(ze){if(ze!==C)try{yield ze._remove(U)}catch{}});return function(ze){return Ne.apply(this,arguments)}}())),new Se(C,c,g)):new Se(C,c,g)})()}}function Ut(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($t(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if($e(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ia(c))return"Blackberry";if(sa(c))return"Webos";if(tr(c))return"Safari";if((c.includes("chrome/")||yo(c))&&!c.includes("edge/"))return"Chrome";if(We(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function $e(p=(0,P.z$)()){return/firefox\//i.test(p)}function tr(p=(0,P.z$)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function yo(p=(0,P.z$)()){return/crios\//i.test(p)}function $t(p=(0,P.z$)()){return/iemobile/i.test(p)}function We(p=(0,P.z$)()){return/android/i.test(p)}function ia(p=(0,P.z$)()){return/blackberry/i.test(p)}function sa(p=(0,P.z$)()){return/webos/i.test(p)}function vo(p=(0,P.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function pc(p=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function G(p=(0,P.z$)()){return vo(p)||We(p)||sa(p)||ia(p)||/windows phone/i.test(p)||$t(p)}function et(p,c=[]){let d;switch(p){case"Browser":d=Ut((0,P.z$)());break;case"Worker":d=`${Ut((0,P.z$)())}-${p}`;break;default:d=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ce.SDK_VERSION}/${g}`}class ot{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const g=C=>new Promise((U,Q)=>{try{U(c(C))}catch(he){Q(he)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,S.Z)(function*(){if(d.auth.currentUser===c)return;const g=[];try{for(const v of d.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const C of g)try{C()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function zt(){return(zt=(0,S.Z)(function*(p,c={}){return te(p,"GET","/v2/passwordPolicy",ce(p,c))})).apply(this,arguments)}class Ai{constructor(c){var d,g,v,C;const U=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=U.minPasswordLength)&&void 0!==d?d:6,U.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=U.maxPasswordLength),void 0!==U.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=U.containsLowercaseCharacter),void 0!==U.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=U.containsUppercaseCharacter),void 0!==U.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=U.containsNumericCharacter),void 0!==U.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=U.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(C=c.forceUpgradeOnSignin)&&void 0!==C&&C,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,g,v,C,U,Q;const he={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,he),this.validatePasswordCharacterOptions(c,he),he.isValid&&(he.isValid=null===(d=he.meetsMinPasswordLength)||void 0===d||d),he.isValid&&(he.isValid=null===(g=he.meetsMaxPasswordLength)||void 0===g||g),he.isValid&&(he.isValid=null===(v=he.containsLowercaseLetter)||void 0===v||v),he.isValid&&(he.isValid=null===(C=he.containsUppercaseLetter)||void 0===C||C),he.isValid&&(he.isValid=null===(U=he.containsNumericCharacter)||void 0===U||U),he.isValid&&(he.isValid=null===(Q=he.containsNonAlphanumericCharacter)||void 0===Q||Q),he}validatePasswordLengthOptions(c,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=c.length>=g),v&&(d.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,d,g,v,C){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=C))}}class Io{constructor(c,d,g,v){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $s(this),this.idTokenSubscription=new $s(this),this.beforeStateQueue=new ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,d){var g=this;return d&&(this._popupRedirectResolver=be(d)),this._initializationPromise=this.queue((0,S.Z)(function*(){var v,C;if(!g._deleted&&(g.persistenceManager=yield Se.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(C=g.currentUser)||void 0===C?void 0:C.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,S.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,S.Z)(function*(){try{const g=yield Cr(d,{idToken:c}),v=yield O._fromGetAccountInfoResponse(d,g,c);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,S.Z)(function*(){var g;if((0,Ce._isFirebaseServerApp)(d.app)){const Q=d.app.settings.authIdToken;return Q?new Promise(he=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(Q).then(he,he))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let C=v,U=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const Q=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,he=C?._redirectEventId,Ne=yield d.tryRedirectSignIn(c);(!Q||Q===he)&&Ne?.user&&(C=Ne.user,U=!0)}if(!C)return d.directlySetCurrentUser(null);if(!C._redirectEventId){if(U)try{yield d.beforeStateQueue.runMiddleware(C)}catch(Q){C=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(Q))}return C?d.reloadAndSetCurrentUserOrClear(C):d.directlySetCurrentUser(null)}return de(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===C._redirectEventId?d.directlySetCurrentUser(C):d.reloadAndSetCurrentUserOrClear(C)})()}tryRedirectSignIn(c){var d=this;return(0,S.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,S.Z)(function*(){try{yield yn(c)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function gs(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,S.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,S.Z)(function*(){if((0,Ce._isFirebaseServerApp)(d.app))return Promise.reject(Ot(d));const g=c?(0,P.m9)(c):null;return g&&de(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(c,d=!1){var g=this;return(0,S.Z)(function*(){if(!g._deleted)return c&&de(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,S.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,S.Z)(function*(){return(0,Ce._isFirebaseServerApp)(c.app)?Promise.reject(Ot(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,Ce._isFirebaseServerApp)(this.app)?Promise.reject(Ot(this)):this.queue((0,S.Z)(function*(){yield d.assertedPersistence.setPersistence(be(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,S.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,S.Z)(function*(){const d=yield function ft(p){return zt.apply(this,arguments)}(c),g=new Ai(d);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new P.LL("auth","Firebase",c())}onAuthStateChanged(c,d,g){return this.registerStateListener(this.authStateSubscription,c,d,g)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,g){return this.registerStateListener(this.idTokenSubscription,c,d,g)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,S.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function x(p,c){return T.apply(this,arguments)}(d,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var g=this;return(0,S.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,S.Z)(function*(){if(!d.redirectPersistenceManager){const g=c&&be(c)||d._popupRedirectResolver;de(g,d,"argument-error"),d.redirectPersistenceManager=yield Se.create(d,[be(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,S.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,S.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===c?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,S.Z)(function*(){if(c===d.currentUser)return d.queue((0,S.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,g,v){if(this._deleted)return()=>{};const C="function"==typeof d?d:d.next.bind(d);let U=!1;const Q=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(Q,this,"internal-error"),Q.then(()=>{U||C(this.currentUser)}),"function"==typeof d){const he=c.addObserver(d,g,v);return()=>{U=!0,he()}}{const he=c.addObserver(d);return()=>{U=!0,he()}}}directlySetCurrentUser(c){var d=this;return(0,S.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=et(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,S.Z)(function*(){var d;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const C=yield c._getAppCheckToken();return C&&(g["X-Firebase-AppCheck"]=C),g})()}_getAppCheckToken(){var c=this;return(0,S.Z)(function*(){var d;const g=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Xn(p,...c){Xe.logLevel<=Ue.in.WARN&&Xe.warn(`Auth (${Ce.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function un(p){return(0,P.m9)(p)}class $s{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,P.ne)(d=>this.observer=d)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let gc={loadJS:()=>(0,S.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tg(p){return gc.loadJS(p)}function Cg(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Ze{constructor(c){this.type="recaptcha-enterprise",this.auth=un(c)}verify(c="verify",d=!1){var g=this;return(0,S.Z)(function*(){function C(){return C=(0,S.Z)(function*(Q){if(!d){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var he=(0,S.Z)(function*(Ne,ze){xt(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_t=>{if(void 0!==_t.recaptchaKey){const hr=new ur(_t);return null==Q.tenantId?Q._agentRecaptchaConfig=hr:Q._tenantRecaptchaConfigs[Q.tenantId]=hr,Ne(hr.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(_t=>{ze(_t)})});return function(Ne,ze){return he.apply(this,arguments)}}())}),C.apply(this,arguments)}function U(Q,he,Ne){const ze=window.grecaptcha;Gn(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(Q,{action:c}).then(_t=>{he(_t)}).catch(()=>{he("NO_RECAPTCHA")})}):Ne(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,he)=>{(function v(Q){return C.apply(this,arguments)})(g.auth).then(Ne=>{if(!d&&Gn(window.grecaptcha))U(Ne,Q,he);else{if(typeof window>"u")return void he(new Error("RecaptchaVerifier is only supported in browser"));let ze=function aI(){return gc.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Ne),Tg(ze).then(()=>{U(Ne,Q,he)}).catch(_t=>{he(_t)})}}).catch(Ne=>{he(Ne)})})})()}}function uI(p,c,d){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,S.Z)(function*(p,c,d,g=!1){const v=new Ze(p);let C;try{C=yield v.verify(d)}catch{C=yield v.verify(d,!0)}const U=Object.assign({},c);return Object.assign(U,g?{captchaResp:C}:{captchaResponse:C}),Object.assign(U,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(U,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),U})).apply(this,arguments)}function mc(p,c,d,g){return He.apply(this,arguments)}function He(){return He=(0,S.Z)(function*(p,c,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const C=yield uI(p,c,d,"getOobCode"===d);return g(p,C)}return g(p,c).catch(function(){var C=(0,S.Z)(function*(U){if("auth/missing-recaptcha-token"===U.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Q=yield uI(p,c,d,"getOobCode"===d);return g(p,Q)}return Promise.reject(U)});return function(U){return C.apply(this,arguments)}}())}),He.apply(this,arguments)}function Zd(p,c,d){const g=un(p);de(g._canInitEmulator,g,"emulator-config-failed"),de(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,C=Ag(c),{host:U,port:Q}=function yc(p){const c=Ag(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const C=v[1];return{host:C,port:su(g.substr(C.length+1))}}{const[C,U]=g.split(":");return{host:C,port:su(U)}}}(c);g.config.emulator={url:`${C}//${U}${null===Q?"":`:${Q}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:U,port:Q,protocol:C.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Kd(){function p(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Ag(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function su(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class Eo{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return rn("not implemented")}_getIdTokenResponse(c){return rn("not implemented")}_linkToIdToken(c,d){return rn("not implemented")}_getReauthenticationResolver(c){return rn("not implemented")}}function bg(p,c){return pt.apply(this,arguments)}function pt(){return(pt=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:resetPassword",ce(p,c))})).apply(this,arguments)}function vc(){return(vc=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ur(p,c){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function qt(){return(qt=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:update",ce(p,c))})).apply(this,arguments)}function qb(p,c){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithPassword",ce(p,c))})).apply(this,arguments)}function Te(p,c){return ou.apply(this,arguments)}function ou(){return(ou=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:sendOobCode",ce(p,c))})).apply(this,arguments)}function Ec(){return(Ec=(0,S.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function Jd(p,c){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,S.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function eh(p,c){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,S.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function Pg(){return(Pg=(0,S.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function Mg(){return(Mg=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,c))})).apply(this,arguments)}function uu(){return(uu=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,c))})).apply(this,arguments)}class js extends Eo{constructor(c,d,g,v=null){super("password",g),this._email=c,this._password=d,this._tenantId=v}static _fromEmailAndPassword(c,d){return new js(c,d,"password")}static _fromEmailAndCode(c,d,g=null){return new js(c,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,S.Z)(function*(){switch(d.signInMethod){case"password":return mc(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qb);case"emailLink":return function Wb(p,c){return Mg.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:gt(c,"internal-error")}})()}_linkToIdToken(c,d){var g=this;return(0,S.Z)(function*(){switch(g.signInMethod){case"password":return mc(c,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ur);case"emailLink":return function au(p,c){return uu.apply(this,arguments)}(c,{idToken:d,email:g._email,oobCode:g._password});default:gt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ws(p,c){return th.apply(this,arguments)}function th(){return(th=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithIdp",ce(p,c))})).apply(this,arguments)}class Bi extends Eo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Bi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):gt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=d,C=(0,Pt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const U=new Bi(g,v);return U.idToken=C.idToken||void 0,U.accessToken=C.accessToken||void 0,U.secret=C.secret,U.nonce=C.nonce,U.pendingToken=C.pendingToken||null,U}_getIdTokenResponse(c){return ws(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,ws(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ws(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,P.xO)(d)}return c}}function nh(){return(nh=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:sendVerificationCode",ce(p,c))})).apply(this,arguments)}function rh(){return(rh=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,c))})).apply(this,arguments)}function wc(){return(wc=(0,S.Z)(function*(p,c){const d=yield Fe(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,c));if(d.temporaryProof)throw Zt(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ve={USER_NOT_FOUND:"user-not-found"};function cu(){return(cu=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ve)})).apply(this,arguments)}class $i extends Eo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new $i({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new $i({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Hs(p,c){return rh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function ve(p,c){return wc.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Tc(p,c){return cu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}=c;return g||d||v||C?new $i({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:C}):null}}class lu{constructor(c){var d,g,v,C,U,Q;const he=(0,P.zd)((0,P.pd)(c)),Ne=null!==(d=he.apiKey)&&void 0!==d?d:null,ze=null!==(g=he.oobCode)&&void 0!==g?g:null,_t=function dI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=he.mode)&&void 0!==v?v:null);de(Ne&&ze&&_t,"argument-error"),this.apiKey=Ne,this.operation=_t,this.code=ze,this.continueUrl=null!==(C=he.continueUrl)&&void 0!==C?C:null,this.languageCode=null!==(U=he.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(Q=he.tenantId)&&void 0!==Q?Q:null}static parseLink(c){const d=function hI(p){const c=(0,P.zd)((0,P.pd)(p)).link,d=c?(0,P.zd)((0,P.pd)(c)).deep_link_id:null,g=(0,P.zd)((0,P.pd)(p)).deep_link_id;return(g?(0,P.zd)((0,P.pd)(g)).link:null)||g||d||c||p}(c);try{return new lu(d)}catch{return null}}}let aa=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return js._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=lu.parseLink(g);return de(v,"argument-error"),js._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Wn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class br extends Wn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class wt extends br{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return de("providerId"in d&&"signInMethod"in d,"argument-error"),Bi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return de(c.idToken||c.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return wt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return wt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:C,nonce:U,providerId:Q}=c;if(!g&&!v&&!d&&!C||!Q)return null;try{return new wt(Q)._credential({idToken:d,accessToken:g,nonce:U,pendingToken:C})}catch{return null}}}let Cc=(()=>{class p extends br{constructor(){super("facebook.com")}static credential(d){return Bi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),ih=(()=>{class p extends br{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Bi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),sh=(()=>{class p extends br{constructor(){super("github.com")}static credential(d){return Bi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Br extends Eo{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return ws(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,ws(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ws(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:C}=d;return g&&v&&C&&g===v?new Br(g,C):null}static _create(c,d){return new Br(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hu extends Wn{constructor(c){de(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return hu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return hu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Br.fromJSON(c);return de(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:g}=c;if(!d||!g)return null;try{return Br._create(g,d)}catch{return null}}}let xg=(()=>{class p extends br{constructor(){super("twitter.com")}static credential(d,g){return Bi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Dc(p,c){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signUp",ce(p,c))})).apply(this,arguments)}class ui{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,g,v=!1){return(0,S.Z)(function*(){const C=yield O._fromIdTokenResponse(c,g,v),U=ua(g);return new ui({user:C,providerId:U,_tokenResponse:g,operationType:d})})()}static _forOperation(c,d,g){return(0,S.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=ua(g);return new ui({user:c,providerId:v,_tokenResponse:g,operationType:d})})()}}function ua(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Og(p){return bc.apply(this,arguments)}function bc(){return(bc=(0,S.Z)(function*(p){var c;if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const d=un(p);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new ui({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Dc(d,{returnSecureToken:!0}),v=yield ui._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Sc extends P.ZR{constructor(c,d,g,v){var C;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:c.name,tenantId:null!==(C=c.tenantId)&&void 0!==C?C:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,d,g,v){return new Sc(c,d,g,v)}}function oh(p,c,d,g){return("reauthenticate"===c?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(C=>{throw"auth/multi-factor-auth-required"===C.code?Sc._fromErrorAndOperation(p,C,c,g):C})}function kg(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function fI(p,c){return ci.apply(this,arguments)}function ci(){return ci=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);yield Pc(!0,d,c);const{providerUserInfo:g}=yield function ai(p,c){return Ui.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),v=kg(g||[]);return d.providerData=d.providerData.filter(C=>v.has(C.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),ci.apply(this,arguments)}function ah(p,c){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,S.Z)(function*(p,c,d=!1){const g=yield Kt(p,c._linkToIdToken(p.auth,yield p.getIdToken()),d);return ui._forOperation(p,"link",g)})).apply(this,arguments)}function Pc(p,c,d){return uh.apply(this,arguments)}function uh(){return(uh=(0,S.Z)(function*(p,c,d){yield yn(c);const v=!1===p?"provider-already-linked":"no-such-provider";de(kg(c.providerData).has(d)===p,c.auth,v)})).apply(this,arguments)}function Vg(p,c){return ch.apply(this,arguments)}function ch(){return(ch=(0,S.Z)(function*(p,c,d=!1){const{auth:g}=p;if((0,Ce._isFirebaseServerApp)(g.app))return Promise.reject(Ot(g));const v="reauthenticate";try{const C=yield Kt(p,oh(g,v,c,p),d);de(C.idToken,g,"internal-error");const U=Fs(C.idToken);de(U,g,"internal-error");const{sub:Q}=U;return de(p.uid===Q,g,"user-mismatch"),ui._forOperation(p,v,C)}catch(C){throw"auth/user-not-found"===C?.code&&gt(g,"user-mismatch"),C}})).apply(this,arguments)}function lh(p,c){return dh.apply(this,arguments)}function dh(){return(dh=(0,S.Z)(function*(p,c,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g="signIn",v=yield oh(p,g,c),C=yield ui._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(C.user)),C})).apply(this,arguments)}function Mc(p,c){return hh.apply(this,arguments)}function hh(){return(hh=(0,S.Z)(function*(p,c){return lh(un(p),c)})).apply(this,arguments)}function ji(p,c){return fh.apply(this,arguments)}function fh(){return(fh=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);return yield Pc(!1,d,c.providerId),ah(d,c)})).apply(this,arguments)}function Fg(p,c){return ph.apply(this,arguments)}function ph(){return(ph=(0,S.Z)(function*(p,c){return Vg((0,P.m9)(p),c)})).apply(this,arguments)}function gh(){return(gh=(0,S.Z)(function*(p,c){return Fe(p,"POST","/v1/accounts:signInWithCustomToken",ce(p,c))})).apply(this,arguments)}function Lg(p,c){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,S.Z)(function*(p,c){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const d=un(p),g=yield function Zn(p,c){return gh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),v=yield ui._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Ke.apply(this,arguments)}class nr{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Tt._fromServerResponse(c,d):"totpInfo"in d?Kn._fromServerResponse(c,d):gt(c,"internal-error")}}class Tt extends nr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Tt(d)}}class Kn extends nr{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Kn(d)}}function rr(p,c,d){var g;de((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),de(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(de(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(de(d.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function qs(p){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,S.Z)(function*(p){const c=un(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Ug(p,c,d){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,S.Z)(function*(p,c,d){const g=un(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&rr(g,v,d),yield mc(g,v,"getOobCode",Jd)})).apply(this,arguments)}function xc(p,c,d){return mh.apply(this,arguments)}function mh(){return mh=(0,S.Z)(function*(p,c,d){yield bg((0,P.m9)(p),{oobCode:c,newPassword:d}).catch(function(){var g=(0,S.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&qs(p),v});return function(v){return g.apply(this,arguments)}}())}),mh.apply(this,arguments)}function pI(p,c){return cn.apply(this,arguments)}function cn(){return cn=(0,S.Z)(function*(p,c){yield function zb(p,c){return qt.apply(this,arguments)}((0,P.m9)(p),{oobCode:c})}),cn.apply(this,arguments)}function Me(p,c){return tt.apply(this,arguments)}function tt(){return(tt=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p),g=yield bg(d,{oobCode:c}),v=g.requestType;switch(de(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(g.mfaInfo,d,"internal-error");default:de(g.email,d,"internal-error")}let C=null;return g.mfaInfo&&(C=nr._fromServerResponse(un(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:C},operation:v}})).apply(this,arguments)}function ln(p,c){return li.apply(this,arguments)}function li(){return(li=(0,S.Z)(function*(p,c){const{data:d}=yield Me((0,P.m9)(p),c);return d.email})).apply(this,arguments)}function fu(p,c,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,S.Z)(function*(p,c,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=un(p),U=yield mc(g,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dc).catch(he=>{throw"auth/password-does-not-meet-requirements"===he.code&&qs(p),he}),Q=yield ui._fromIdTokenResponse(g,"signIn",U);return yield g._updateCurrentUser(Q.user),Q})).apply(this,arguments)}function ca(p,c,d){return(0,Ce._isFirebaseServerApp)(p.app)?Promise.reject(Ot(p)):Mc((0,P.m9)(p),aa.credential(c,d)).catch(function(){var g=(0,S.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&qs(p),v});return function(v){return g.apply(this,arguments)}}())}function kn(p,c,d){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,S.Z)(function*(p,c,d){const g=un(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function C(U,Q){de(Q.handleCodeInApp,g,"argument-error"),Q&&rr(g,U,Q)})(v,d),yield mc(g,v,"getOobCode",eh)})).apply(this,arguments)}function la(p,c){const d=lu.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function nt(p,c,d){return wo.apply(this,arguments)}function wo(){return(wo=(0,S.Z)(function*(p,c,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=(0,P.m9)(p),v=aa.credentialWithLink(c,d||mn());return de(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Mc(g,v)})).apply(this,arguments)}function Gs(){return(Gs=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:createAuthUri",ce(p,c))})).apply(this,arguments)}function Vn(p,c){return To.apply(this,arguments)}function To(){return To=(0,S.Z)(function*(p,c){const g={identifier:c,continueUri:ii()?mn():"http://localhost"},{signinMethods:v}=yield function Bg(p,c){return Gs.apply(this,arguments)}((0,P.m9)(p),g);return v||[]}),To.apply(this,arguments)}function da(p,c){return Si.apply(this,arguments)}function Si(){return Si=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&rr(d.auth,v,c);const{email:C}=yield function Yd(p,c){return Ec.apply(this,arguments)}(d.auth,v);C!==p.email&&(yield p.reload())}),Si.apply(this,arguments)}function pu(p,c,d){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p),C={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};d&&rr(g.auth,C,d);const{email:U}=yield function Gb(p,c){return Pg.apply(this,arguments)}(g.auth,C);U!==p.email&&(yield p.reload())}),Oc.apply(this,arguments)}function Hi(){return(Hi=(0,S.Z)(function*(p,c){return te(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function gu(p,c){return Co.apply(this,arguments)}function Co(){return Co=(0,S.Z)(function*(p,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const g=(0,P.m9)(p),C={idToken:yield g.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},U=yield Kt(g,function Ws(p,c){return Hi.apply(this,arguments)}(g.auth,C));g.displayName=U.displayName||null,g.photoURL=U.photoUrl||null;const Q=g.providerData.find(({providerId:he})=>"password"===he);Q&&(Q.displayName=g.displayName,Q.photoURL=g.photoURL),yield g._updateTokensIfNecessary(U)}),Co.apply(this,arguments)}function mt(p,c){const d=(0,P.m9)(p);return(0,Ce._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ot(d.auth)):kc(d,c,null)}function Zb(p,c){return kc((0,P.m9)(p),null,c)}function kc(p,c,d){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,S.Z)(function*(p,c,d){const{auth:g}=p,C={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(C.email=c),d&&(C.password=d);const U=yield Kt(p,function Qd(p,c){return vc.apply(this,arguments)}(g,C));yield p._updateTokensIfNecessary(U,!0)}),Vc.apply(this,arguments)}class Ts{constructor(c,d,g={}){this.isNewUser=c,this.providerId=d,this.profile=g}}class Do extends Ts{constructor(c,d,g,v){super(c,d,g),this.username=v}}class mu extends Ts{constructor(c,d){super(c,"facebook.com",d)}}class cr extends Do{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Kb extends Ts{constructor(c,d){super(c,"google.com",d)}}class $r extends Do{constructor(c,d,g){super(c,"twitter.com",d,g)}}function Rr(p){const{user:c,_tokenResponse:d}=p;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function es(p){var c,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},C=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const U=null===(d=null===(c=Fs(p.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(U)return new Ts(C,"anonymous"!==U&&"custom"!==U?U:null)}if(!g)return null;switch(g){case"facebook.com":return new mu(C,v);case"github.com":return new cr(C,v);case"google.com":return new Kb(C,v);case"twitter.com":return new $r(C,v,p.screenName||null);case"custom":case"anonymous":return new Ts(C,null);default:return new Ts(C,g,v)}}(d)}class fa{constructor(c,d,g){this.type=c,this.credential=d,this.user=g}static _fromIdtoken(c,d){return new fa("enroll",c,d)}static _fromMfaPendingCredential(c){return new fa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,g;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return fa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return fa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Hg{constructor(c,d,g){this.session=c,this.hints=d,this.signInResolver=g}static _fromError(c,d){const g=un(c),v=d.customData._serverResponse,C=(v.mfaInfo||[]).map(Q=>nr._fromServerResponse(g,Q));de(v.mfaPendingCredential,g,"internal-error");const U=fa._fromMfaPendingCredential(v.mfaPendingCredential);return new Hg(U,C,function(){var Q=(0,S.Z)(function*(he){const Ne=yield he._process(g,U);delete v.mfaInfo,delete v.mfaPendingCredential;const ze=Object.assign(Object.assign({},v),{idToken:Ne.idToken,refreshToken:Ne.refreshToken});switch(d.operationType){case"signIn":const _t=yield ui._fromIdTokenResponse(g,d.operationType,ze);return yield g._updateCurrentUser(_t.user),_t;case"reauthenticate":return de(d.user,g,"internal-error"),ui._forOperation(d.user,d.operationType,ze);default:gt(g,"internal-error")}});return function(he){return Q.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,S.Z)(function*(){return d.signInResolver(c)})()}}function Xb(p,c){var d;const g=(0,P.m9)(p),v=c;return de(c.customData.operationType,g,"argument-error"),de(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Hg._fromError(g,v)}class zg{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>nr._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new zg(c)}getSession(){var c=this;return(0,S.Z)(function*(){return fa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var g=this;return(0,S.Z)(function*(){const v=c,C=yield g.getSession(),U=yield Kt(g.user,v._process(g.user.auth,C,d));return yield g.user._updateTokensIfNecessary(U),g.user.reload()})()}unenroll(c){var d=this;return(0,S.Z)(function*(){const g="string"==typeof c?c:c.uid,v=yield d.user.getIdToken();try{const C=yield Kt(d.user,function r0(p,c){return te(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ce(p,c))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:U})=>U!==g),yield d.user._updateTokensIfNecessary(C),yield d.user.reload()}catch(C){throw C}})()}}const Fc=new WeakMap;function qg(p){const c=(0,P.m9)(p);return Fc.has(c)||Fc.set(c,zg._fromUser(c)),Fc.get(c)}const vh="__sak";class mI{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const _I=(()=>{class p extends mI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function s0(){const p=(0,P.z$)();return tr(p)||vo(p)}()&&function ge(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=G(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),C=this.localCache[g];v!==C&&d(g,C,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((Q,he,Ne)=>{this.notifyListeners(Q,Ne)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(v);if(d.newValue!==Q)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const C=()=>{const Q=this.storage.getItem(v);!g&&this.localCache[v]===Q||this.notifyListeners(v,Q)},U=this.storage.getItem(v);!function H(){return(0,P.w1)()&&10===document.documentMode}()||U===d.newValue||d.newValue===d.oldValue?C():setTimeout(C,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,C=this;return(0,S.Z)(function*(){yield v().call(C,d,g),C.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,S.Z)(function*(){const C=yield g().call(v,d);return v.localCache[d]=JSON.stringify(C),C})()}_remove(d){var g=()=>super._remove,v=this;return(0,S.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),pa=(()=>{class p extends mI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Gg=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(C=>C.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,S.Z)(function*(){const v=d,{eventId:C,eventType:U,data:Q}=v.data,he=g.handlersMap[U];if(!he?.size)return;v.ports[0].postMessage({status:"ack",eventId:C,eventType:U});const Ne=Array.from(he).map(function(){var _t=(0,S.Z)(function*(hr){return hr(v.origin,Q)});return function(hr){return _t.apply(this,arguments)}}()),ze=yield function Ri(p){return Promise.all(p.map(function(){var c=(0,S.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return c.apply(this,arguments)}}()))}(Ne);v.ports[0].postMessage({status:"done",eventId:C,eventType:U,response:ze})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function ga(p="",c=10){let d="";for(let g=0;g<c;g++)d+=Math.floor(10*Math.random());return p+d}class Wg{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,g=50){var v=this;return(0,S.Z)(function*(){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let U,Q;return new Promise((he,Ne)=>{const ze=ga("",20);C.port1.start();const _t=setTimeout(()=>{Ne(new Error("unsupported_event"))},g);Q={messageChannel:C,onMessage(hr){const Hr=hr;if(Hr.data.eventId===ze)switch(Hr.data.status){case"ack":clearTimeout(_t),U=setTimeout(()=>{Ne(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),he(Hr.data.response);break;default:clearTimeout(_t),clearTimeout(U),Ne(new Error("invalid_response"))}}},v.handlers.add(Q),C.port1.addEventListener("message",Q.onMessage),v.target.postMessage({eventType:c,eventId:ze,data:d},[C.port2])}).finally(()=>{Q&&v.removeMessageHandler(Q)})})()}}function Fn(){return window}function Lc(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function _u(){return(_u=(0,S.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const wh="firebaseLocalStorageDb",Ks="firebaseLocalStorage",bo="fbase_key";class ma{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Th(p,c){return p.transaction([Ks],c?"readwrite":"readonly").objectStore(Ks)}function Qg(){const p=indexedDB.open(wh,1);return new Promise((c,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Ks,{keyPath:bo})}catch(v){d(v)}}),p.addEventListener("success",(0,S.Z)(function*(){const g=p.result;g.objectStoreNames.contains(Ks)?c(g):(g.close(),yield function o0(){const p=indexedDB.deleteDatabase(wh);return new ma(p).toPromise()}(),c(yield Qg()))}))})}function Yg(p,c,d){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,S.Z)(function*(p,c,d){const g=Th(p,!0).put({[bo]:c,value:d});return new ma(g).toPromise()})).apply(this,arguments)}function Bc(){return(Bc=(0,S.Z)(function*(p,c){const d=Th(p,!1).get(c),g=yield new ma(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function $c(p,c){const d=Th(p,!0).delete(c);return new ma(d).toPromise()}const vI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,S.Z)(function*(){return d.db||(d.db=yield Qg()),d.db})()}_withRetries(d){var g=this;return(0,S.Z)(function*(){let v=0;for(;;)try{const C=yield g._openDb();return yield d(C)}catch(C){if(v++>3)throw C;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,S.Z)(function*(){return Lc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,S.Z)(function*(){d.receiver=Gg._getInstance(function Kg(){return Lc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,S.Z)(function*(v,C){return{keyProcessed:(yield d._poll()).includes(C.key)}});return function(v,C){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,S.Z)(function*(v,C){return["keyChanged"]});return function(v,C){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,S.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function Eh(){return _u.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Wg(d.activeServiceWorker);const C=yield d.sender._send("ping",{},800);C&&null!==(g=C[0])&&void 0!==g&&g.fulfilled&&null!==(v=C[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,S.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Zg(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,S.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Qg();return yield Yg(d,vh,"1"),yield $c(d,vh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,S.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,S.Z)(function*(){return v._withPendingWrite((0,S.Z)(function*(){return yield v._withRetries(C=>Yg(C,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,S.Z)(function*(){const v=yield g._withRetries(C=>function a0(p,c){return Bc.apply(this,arguments)}(C,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,S.Z)(function*(){return g._withPendingWrite((0,S.Z)(function*(){return yield g._withRetries(v=>$c(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,S.Z)(function*(){const g=yield d._withRetries(U=>{const Q=Th(U,!1).getAll();return new ma(Q).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],C=new Set;if(0!==g.length)for(const{fbase_key:U,value:Q}of g)C.add(U),JSON.stringify(d.localCache[U])!==JSON.stringify(Q)&&(d.notifyListeners(U,Q),v.push(U));for(const U of Object.keys(d.localCache))d.localCache[U]&&!C.has(U)&&(d.notifyListeners(U,null),v.push(U));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const C of Array.from(v))C(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,S.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),jc=1e12;class em{constructor(c){this.auth=c,this.counter=jc,this._widgets=new Map}render(c,d){const g=this.counter;return this._widgets.set(g,new TI(c,this.auth.name,d||{})),this.counter++,g}reset(c){var d;const g=c||jc;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(c){var d;return(null===(d=this._widgets.get(c||jc))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,S.Z)(function*(){var g;return null===(g=d._widgets.get(c||jc))||void 0===g||g.execute(),""})()}}class TI{constructor(c,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;de(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function tm(p){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ah=Cg("rcb"),u0=new Ti(3e4,6e4);class CI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Fn().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return de(function Pi(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Dn(Fn().grecaptcha)?Promise.resolve(Fn().grecaptcha):new Promise((g,v)=>{const C=Fn().setTimeout(()=>{v(Lt(c,"network-request-failed"))},u0.get());Fn()[Ah]=()=>{Fn().clearTimeout(C),delete Fn()[Ah];const Q=Fn().grecaptcha;if(!Q||!Dn(Q))return void v(Lt(c,"internal-error"));const he=Q.render;Q.render=(Ne,ze)=>{const _t=he(Ne,ze);return this.counter++,_t},this.hostLanguage=d,g(Q)},Tg(`${function Bb(){return gc.recaptchaV2Script}()}?${(0,P.xO)({onload:Ah,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(C),v(Lt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Fn().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nm{load(c){return(0,S.Z)(function*(){return new em(c)})()}clearedOneInstance(){}}const rm="recaptcha",DI={theme:"light",type:"image"};class im{constructor(c,d,g=Object.assign({},DI)){this.parameters=g,this.type=rm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(c),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;de(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nm:new CI,this.validateStartingState()}verify(){var c=this;return(0,S.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(d)||new Promise(C=>{const U=Q=>{Q&&(c.tokenChangeListeners.delete(U),C(Q))};c.tokenChangeListeners.add(U),c.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof c)c(d);else if("string"==typeof c){const g=Fn()[c];"function"==typeof g&&g(d)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,S.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,S.Z)(function*(){de(ii()&&!Lc(),c.auth,"internal-error"),yield function sm(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function ms(p){return Li.apply(this,arguments)}(c.auth);de(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=$i._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Sh(p,c,d){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,S.Z)(function*(p,c,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=un(p),v=yield _a(g,c,(0,P.m9)(d));return new bh(v,C=>Mc(g,C))})).apply(this,arguments)}function ts(p,c,d){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);yield Pc(!1,g,"phone");const v=yield _a(g.auth,c,(0,P.m9)(d));return new bh(v,C=>ji(g,C))})).apply(this,arguments)}function om(p,c,d){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ot(g.auth));const v=yield _a(g.auth,c,(0,P.m9)(d));return new bh(v,C=>Fg(g,C))})).apply(this,arguments)}function _a(p,c,d){return ya.apply(this,arguments)}function ya(){return ya=(0,S.Z)(function*(p,c,d){var g;const v=yield d.verify();try{let C;if(de("string"==typeof v,p,"argument-error"),de(d.type===rm,p,"argument-error"),C="string"==typeof c?{phoneNumber:c}:c,"session"in C){const U=C.session;if("phoneNumber"in C)return de("enroll"===U.type,p,"internal-error"),(yield function e0(p,c){return te(p,"POST","/v2/accounts/mfaEnrollment:start",ce(p,c))}(p,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:C.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{de("signin"===U.type,p,"internal-error");const Q=(null===(g=C.multiFactorHint)||void 0===g?void 0:g.uid)||C.multiFactorUid;return de(Q,p,"missing-multi-factor-info"),(yield function II(p,c){return te(p,"POST","/v2/accounts/mfaSignIn:start",ce(p,c))}(p,{mfaPendingCredential:U.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield function oa(p,c){return nh.apply(this,arguments)}(p,{phoneNumber:C.phoneNumber,recaptchaToken:v});return U}}finally{d._reset()}}),ya.apply(this,arguments)}function jr(p,c){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,S.Z)(function*(p,c){const d=(0,P.m9)(p);if((0,Ce._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ot(d.auth));yield ah(d,c)})).apply(this,arguments)}let am=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=un(d)}verifyPhoneNumber(d,g){return _a(this.auth,d,(0,P.m9)(g))}static credential(d,g){return $i._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?$i._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Mi(p,c){return c?be(c):(de(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Pr extends Eo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ws(c,this._buildIdpRequest())}_linkToIdToken(c,d){return ws(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return ws(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function AI(p){return lh(p.auth,new Pr(p),p.bypassAuthState)}function bI(p){const{auth:c,user:d}=p;return de(d,c,"internal-error"),Vg(d,new Pr(p),p.bypassAuthState)}function SI(p){return ns.apply(this,arguments)}function ns(){return(ns=(0,S.Z)(function*(p){const{auth:c,user:d}=p;return de(d,c,"internal-error"),ah(d,new Pr(p),p.bypassAuthState)})).apply(this,arguments)}class Mh{constructor(c,d,g,v,C=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=C,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,S.Z)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(C){c.reject(C)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,S.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:C,tenantId:U,error:Q,type:he}=c;if(Q)return void d.reject(Q);const Ne={auth:d.auth,requestUri:g,sessionId:v,tenantId:U||void 0,postBody:C||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(he)(Ne))}catch(ze){d.reject(ze)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return AI;case"linkViaPopup":case"linkViaRedirect":return SI;case"reauthViaPopup":case"reauthViaRedirect":return bI;default:gt(this.auth,"internal-error")}}resolve(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RI=new Ti(2e3,1e4);function um(p,c,d){return zc.apply(this,arguments)}function zc(){return(zc=(0,S.Z)(function*(p,c,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p,"operation-not-supported-in-this-environment"));const g=un(p);st(p,c,Wn);const v=Mi(g,d);return new lm(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function cm(p,c,d){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if((0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth,"operation-not-supported-in-this-environment"));st(g.auth,c,Wn);const v=Mi(g.auth,d);return new lm(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function Qe(p,c,d){return qc.apply(this,arguments)}function qc(){return(qc=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);st(g.auth,c,Wn);const v=Mi(g.auth,d);return new lm(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let lm=(()=>{class p extends Mh{constructor(d,g,v,C,U){super(d,g,C,U),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,S.Z)(function*(){const g=yield d.execute();return de(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,S.Z)(function*(){Wt(1===d.filter.length,"Popup operations only handle one event");const g=ga();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Lt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Lt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,RI.get())};d()}}return p.currentPopupAction=null,p})();const PI="pendingRedirect",yu=new Map;class MI extends Mh{constructor(c,d,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,S.Z)(function*(){let g=yu.get(d.auth._key());if(!g){try{const C=(yield function dm(p,c){return Qs.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;g=()=>Promise.resolve(C)}catch(v){g=()=>Promise.reject(v)}yu.set(d.auth._key(),g)}return d.bypassAuthState||yu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,g=this;return(0,S.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,d().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,S.Z)(function*(){})()}cleanUp(){}}function Qs(){return(Qs=(0,S.Z)(function*(p,c){const d=fe(c),g=fm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function xh(p,c){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,S.Z)(function*(p,c){return fm(p)._set(fe(c),"true")})).apply(this,arguments)}function NI(){yu.clear()}function hm(p,c){yu.set(p._key(),c)}function fm(p){return be(p._redirectPersistence)}function fe(p){return Dt(PI,p.config.apiKey,p.name)}function bt(p,c,d){return function xI(p,c,d){return kh.apply(this,arguments)}(p,c,d)}function kh(){return(kh=(0,S.Z)(function*(p,c,d){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=un(p);st(p,c,Wn),yield g._initializationPromise;const v=Mi(g,d);return yield xh(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function lr(p,c,d){return function pm(p,c,d){return So.apply(this,arguments)}(p,c,d)}function So(){return(So=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);if(st(g.auth,c,Wn),(0,Ce._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ot(g.auth));yield g.auth._initializationPromise;const v=Mi(g.auth,d);yield xh(v,g.auth);const C=yield is(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",C)})).apply(this,arguments)}function rs(p,c,d){return function Vh(p,c,d){return vu.apply(this,arguments)}(p,c,d)}function vu(){return(vu=(0,S.Z)(function*(p,c,d){const g=(0,P.m9)(p);st(g.auth,c,Wn),yield g.auth._initializationPromise;const v=Mi(g.auth,d);yield Pc(!1,g,c.providerId),yield xh(v,g.auth);const C=yield is(g);return v._openRedirect(g.auth,c,"linkViaRedirect",C)})).apply(this,arguments)}function OI(p,c){return gm.apply(this,arguments)}function gm(){return(gm=(0,S.Z)(function*(p,c){return yield un(p)._initializationPromise,Gc(p,c,!1)})).apply(this,arguments)}function Gc(p,c){return dr.apply(this,arguments)}function dr(){return(dr=(0,S.Z)(function*(p,c,d=!1){if((0,Ce._isFirebaseServerApp)(p.app))return Promise.reject(Ot(p));const g=un(p),v=Mi(g,c),U=yield new MI(g,v,d).execute();return U&&!d&&(delete U.user._redirectEventId,yield g._persistUserIfCurrent(U.user),yield g._setRedirectUser(null,c)),U})).apply(this,arguments)}function is(p){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,S.Z)(function*(p){const c=ga(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class ss{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(d=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function kI(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fh(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var g;if(c.error&&!Fh(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Lt(this.auth,v))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const g=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mm(c))}saveEventToCache(c){this.cachedEventUids.add(mm(c)),this.lastProcessedEventTime=Date.now()}}function mm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function Fh({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function _m(p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,S.Z)(function*(p,c={}){return te(p,"GET","/v1/projects",c)})).apply(this,arguments)}const Lh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ym=/^https?/;function Bh(){return(Bh=(0,S.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield _m(p);for(const d of c)try{if(vm(d))return}catch{}gt(p,"unauthorized-domain")})).apply(this,arguments)}function vm(p){const c=mn(),{protocol:d,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const U=new URL(p);return""===U.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&U.hostname===g}if(!ym.test(d))return!1;if(Lh.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const $h=new Ti(3e4,6e4);function jh(){const p=Fn().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Eu=null;const Hh=new Ti(5e3,15e3),VI="__/auth/iframe",FI="emulator/auth/iframe",Mr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ro=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vn(p){const c=p.config;de(c.authDomain,p,"auth-domain-config-required");const d=c.emulator?J(c,FI):`https://${p.config.authDomain}/${VI}`,g={apiKey:c.apiKey,appName:p.name,v:Ce.SDK_VERSION},v=Ro.get(p.config.apiHost);v&&(g.eid=v);const C=p._getFrameworks();return C.length&&(g.fw=C.join(",")),`${d}?${(0,P.xO)(g).slice(1)}`}function zh(){return zh=(0,S.Z)(function*(p){const c=yield function Em(p){return Eu=Eu||function Im(p){return new Promise((c,d)=>{var g,v,C;function U(){jh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{jh(),d(Lt(p,"network-request-failed"))},timeout:$h.get()})}if(null!==(v=null===(g=Fn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(C=Fn().gapi)||void 0===C||!C.load){const Q=Cg("iframefcb");return Fn()[Q]=()=>{gapi.load?U():d(Lt(p,"network-request-failed"))},Tg(`${function $b(){return gc.gapiScript}()}?onload=${Q}`).catch(he=>d(he))}U()}}).catch(c=>{throw Eu=null,c})}(p),Eu}(p),d=Fn().gapi;return de(d,p,"internal-error"),c.open({where:document.body,url:vn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mr,dontclear:!0},g=>new Promise(function(){var v=(0,S.Z)(function*(C,U){yield g.restyle({setHideOnLeave:!1});const Q=Lt(p,"network-request-failed"),he=Fn().setTimeout(()=>{U(Q)},Hh.get());function Ne(){Fn().clearTimeout(he),C(g)}g.ping(Ne).then(Ne,()=>{U(Q)})});return function(C,U){return v.apply(this,arguments)}}()))}),zh.apply(this,arguments)}const UI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cs{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Qc="__/auth/handler",Yc="emulator/auth/handler",qh=encodeURIComponent("fac");function Jc(p,c,d,g,v,C){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,S.Z)(function*(p,c,d,g,v,C){de(p.config.authDomain,p,"auth-domain-config-required"),de(p.config.apiKey,p,"invalid-api-key");const U={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Ce.SDK_VERSION,eventId:v};if(c instanceof Wn){c.setDefaultLanguage(p.languageCode),U.providerId=c.providerId||"",(0,P.xb)(c.getCustomParameters())||(U.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ze,_t]of Object.entries(C||{}))U[ze]=_t}if(c instanceof br){const ze=c.getScopes().filter(_t=>""!==_t);ze.length>0&&(U.scopes=ze.join(","))}p.tenantId&&(U.tid=p.tenantId);const Q=U;for(const ze of Object.keys(Q))void 0===Q[ze]&&delete Q[ze];const he=yield p._getAppCheckToken(),Ne=he?`#${qh}=${encodeURIComponent(he)}`:"";return`${function jI({config:p}){return p.emulator?J(p,Yc):`https://${p.authDomain}/${Qc}`}(p)}?${(0,P.xO)(Q).slice(1)}${Ne}`})).apply(this,arguments)}const Ys="webStorageSupport",Cm=class wu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pa,this._completeRedirectFn=Gc,this._overrideRedirectResult=hm}_openPopup(c,d,g,v){var C=this;return(0,S.Z)(function*(){var U;Wt(null===(U=C.eventManagers[c._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const Q=yield Jc(c,d,g,mn(),v);return function $I(p,c,d,g=500,v=600){const C=Math.max((window.screen.availHeight-v)/2,0).toString(),U=Math.max((window.screen.availWidth-g)/2,0).toString();let Q="";const he=Object.assign(Object.assign({},UI),{width:g.toString(),height:v.toString(),top:C,left:U}),Ne=(0,P.z$)().toLowerCase();d&&(Q=yo(Ne)?"_blank":d),$e(Ne)&&(c=c||"http://localhost",he.scrollbars="yes");const ze=Object.entries(he).reduce((hr,[Hr,nl])=>`${hr}${Hr}=${nl},`,"");if(function M(p=(0,P.z$)()){var c;return vo(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ne)&&"_self"!==Q)return function Kc(p,c){const d=document.createElement("a");d.href=p,d.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(c||"",Q),new Cs(null);const _t=window.open(c||"",Q,ze);de(_t,p,"popup-blocked");try{_t.focus()}catch{}return new Cs(_t)}(c,Q,ga())})()}_openRedirect(c,d,g,v){var C=this;return(0,S.Z)(function*(){return yield C._originValidation(c),function Ih(p){Fn().location.href=p}(yield Jc(c,d,g,mn(),v)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:v,promise:C}=this.eventManagers[d];return v?Promise.resolve(v):(Wt(C,"If manager is not set, promise should be"),C)}const g=this.initAndGetManager(c);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(c){var d=this;return(0,S.Z)(function*(){const g=yield function LI(p){return zh.apply(this,arguments)}(c),v=new ss(c);return g.register("authEvent",C=>(de(C?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:v},d.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Ys,{type:Ys},v=>{var C;const U=null===(C=v?.[0])||void 0===C?void 0:C[Ys];void 0!==U&&d(!!U),gt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Uh(p){return Bh.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return G()||tr()||vo()}};class c0{constructor(c){this.factorId=c}_process(c,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,g);case"signin":return this._finalizeSignIn(c,d.credential);default:return rn("unexpected MultiFactorSessionType")}}}class Tu extends c0{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Tu(c)}_finalizeEnroll(c,d,g){return function t0(p,c){return te(p,"POST","/v2/accounts/mfaEnrollment:finalize",ce(p,c))}(c,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function Jg(p,c){return te(p,"POST","/v2/accounts/mfaSignIn:finalize",ce(p,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let l0=(()=>{class p{constructor(){}static assertion(d){return Tu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var el="@firebase/auth";class zI{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,S.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,P.Pz)("authIdTokenMaxAge"),function Ub(p){gc=p}({loadJS:p=>new Promise((c,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const C=Lt("internal-error");C.customData=v,d(C)},g.type="text/javascript",g.charset="UTF-8",function os(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Zh(p){(0,Ce._registerComponent)(new pn.wA("auth",(c,{options:d})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),C=c.getProvider("app-check-internal"),{apiKey:U,authDomain:Q}=g.options;de(U&&!U.includes(":"),"invalid-api-key",{appName:g.name});const he={apiKey:U,authDomain:Q,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:et(p)},Ne=new Io(g,v,C,he);return function cI(p,c){const d=c?.persistence||[],g=(Array.isArray(d)?d:[d]).map(be);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(Ne,d),Ne},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,g)=>{c.getProvider("auth-internal").initialize()})),(0,Ce._registerComponent)(new pn.wA("auth-internal",c=>{const d=un(c.getProvider("auth").getImmediate());return new zI(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ce.registerVersion)(el,"1.7.4",function Cu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ce.registerVersion)(el,"1.7.4","esm2017")}("Browser")},58:(Ji,zn,Ge)=>{Ge.d(zn,{BH:()=>Lr,G6:()=>Ti,L:()=>At,LL:()=>te,P0:()=>gn,Pz:()=>Lt,Sg:()=>Ot,UG:()=>de,ZB:()=>Be,ZR:()=>ce,aH:()=>gt,b$:()=>mn,eu:()=>ee,hl:()=>J,jU:()=>rn,m9:()=>Es,ne:()=>Cr,pd:()=>ai,r3:()=>Dn,ru:()=>Wt,tV:()=>le,uI:()=>Cn,vZ:()=>Li,w1:()=>si,xO:()=>Vs,xb:()=>ur,z$:()=>st,zd:()=>_s});const Ue=function(V){const x=[];let T=0;for(let A=0;A<V.length;A++){let w=V.charCodeAt(A);w<128?x[T++]=w:w<2048?(x[T++]=w>>6|192,x[T++]=63&w|128):55296==(64512&w)&&A+1<V.length&&56320==(64512&V.charCodeAt(A+1))?(w=65536+((1023&w)<<10)+(1023&V.charCodeAt(++A)),x[T++]=w>>18|240,x[T++]=w>>12&63|128,x[T++]=w>>6&63|128,x[T++]=63&w|128):(x[T++]=w>>12|224,x[T++]=w>>6&63|128,x[T++]=63&w|128)}return x},pn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,x){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,A=[];for(let w=0;w<V.length;w+=3){const O=V[w],ue=w+1<V.length,be=ue?V[w+1]:0,ke=w+2<V.length,Ye=ke?V[w+2]:0;let Ut=(15&be)<<2|Ye>>6,$e=63&Ye;ke||($e=64,ue||(Ut=64)),A.push(T[O>>2],T[(3&O)<<4|be>>4],T[Ut],T[$e])}return A.join("")},encodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(V):this.encodeByteArray(Ue(V),x)},decodeString(V,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(V):function(V){const x=[];let T=0,A=0;for(;T<V.length;){const w=V[T++];if(w<128)x[A++]=String.fromCharCode(w);else if(w>191&&w<224){const O=V[T++];x[A++]=String.fromCharCode((31&w)<<6|63&O)}else if(w>239&&w<365){const ke=((7&w)<<18|(63&V[T++])<<12|(63&V[T++])<<6|63&V[T++])-65536;x[A++]=String.fromCharCode(55296+(ke>>10)),x[A++]=String.fromCharCode(56320+(1023&ke))}else{const O=V[T++],ue=V[T++];x[A++]=String.fromCharCode((15&w)<<12|(63&O)<<6|63&ue)}}return x.join("")}(this.decodeStringToByteArray(V,x))},decodeStringToByteArray(V,x){this.init_();const T=x?this.charToByteMapWebSafe_:this.charToByteMap_,A=[];for(let w=0;w<V.length;){const O=T[V.charAt(w++)],be=w<V.length?T[V.charAt(w)]:0;++w;const Ye=w<V.length?T[V.charAt(w)]:64;++w;const Se=w<V.length?T[V.charAt(w)]:64;if(++w,null==O||null==be||null==Ye||null==Se)throw new Nn;A.push(O<<2|be>>4),64!==Ye&&(A.push(be<<4&240|Ye>>2),64!==Se&&A.push(Ye<<6&192|Se))}return A},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class Nn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const At=function(V){return function(V){const x=Ue(V);return pn.encodeByteArray(x,!0)}(V).replace(/\./g,"")},le=function(V){try{return pn.decodeString(V,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function Be(V,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return x}for(const T in x)!x.hasOwnProperty(T)||!it(T)||(V[T]=Be(V[T],x[T]));return V}function it(V){return"__proto__"!==V}const Xe=()=>{try{return function Mt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const x=V&&le(V[1]);return x&&JSON.parse(x)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},gn=V=>{const x=(V=>{var x,T;return null===(T=null===(x=Xe())||void 0===x?void 0:x.emulatorHosts)||void 0===T?void 0:T[V]})(V);if(!x)return;const T=x.lastIndexOf(":");if(T<=0||T+1===x.length)throw new Error(`Invalid host ${x} with no separate hostname and port!`);const A=parseInt(x.substring(T+1),10);return"["===x[0]?[x.substring(1,T-1),A]:[x.substring(0,T),A]},gt=()=>{var V;return null===(V=Xe())||void 0===V?void 0:V.config},Lt=V=>{var x;return null===(x=Xe())||void 0===x?void 0:x[`_${V}`]};class Lr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((x,T)=>{this.resolve=x,this.reject=T})}wrapCallback(x){return(T,A)=>{T?this.reject(T):this.resolve(A),"function"==typeof x&&(this.promise.catch(()=>{}),1===x.length?x(T):x(T,A))}}}function Ot(V,x){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A=x||"demo-project",w=V.iat||0,O=V.sub||V.user_id;if(!O)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${A}`,aud:A,iat:w,exp:w+3600,auth_time:w,sub:O,user_id:O,firebase:{sign_in_provider:"custom",identities:{}}},V);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(ue)),""].join(".")}function st(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Cn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function de(){var V;const x=null===(V=Xe())||void 0===V?void 0:V.forceEnvironment;if("node"===x)return!0;if("browser"===x)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function rn(){return"object"==typeof self&&self.self===self}function Wt(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function mn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function si(){const V=st();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ti(){return!de()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){try{return"object"==typeof indexedDB}catch{return!1}}function ee(){return new Promise((V,x)=>{try{let T=!0;const A="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(A);w.onsuccess=()=>{w.result.close(),T||self.indexedDB.deleteDatabase(A),V(!0)},w.onupgradeneeded=()=>{T=!1},w.onerror=()=>{var O;x((null===(O=w.error)||void 0===O?void 0:O.message)||"")}}catch(T){x(T)}})}class ce extends Error{constructor(x,T,A){super(T),this.code=x,this.customData=A,this.name="FirebaseError",Object.setPrototypeOf(this,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(x,T,A){this.service=x,this.serviceName=T,this.errors=A}create(x,...T){const A=T[0]||{},w=`${this.service}/${x}`,O=this.errors[x],ue=O?function Re(V,x){return V.replace(It,(T,A)=>{const w=x[A];return null!=w?String(w):`<${A}?>`})}(O,A):"Error";return new ce(w,`${this.serviceName}: ${ue} (${w}).`,A)}}const It=/\{\$([^}]+)}/g;function Dn(V,x){return Object.prototype.hasOwnProperty.call(V,x)}function ur(V){for(const x in V)if(Object.prototype.hasOwnProperty.call(V,x))return!1;return!0}function Li(V,x){if(V===x)return!0;const T=Object.keys(V),A=Object.keys(x);for(const w of T){if(!A.includes(w))return!1;const O=V[w],ue=x[w];if(xt(O)&&xt(ue)){if(!Li(O,ue))return!1}else if(O!==ue)return!1}for(const w of A)if(!T.includes(w))return!1;return!0}function xt(V){return null!==V&&"object"==typeof V}function Vs(V){const x=[];for(const[T,A]of Object.entries(V))Array.isArray(A)?A.forEach(w=>{x.push(encodeURIComponent(T)+"="+encodeURIComponent(w))}):x.push(encodeURIComponent(T)+"="+encodeURIComponent(A));return x.length?"&"+x.join("&"):""}function _s(V){const x={};return V.replace(/^\?/,"").split("&").forEach(A=>{if(A){const[w,O]=A.split("=");x[decodeURIComponent(w)]=decodeURIComponent(O)}}),x}function ai(V){const x=V.indexOf("?");if(!x)return"";const T=V.indexOf("#",x);return V.substring(x,T>0?T:void 0)}function Cr(V,x){const T=new Dr(V,x);return T.subscribe.bind(T)}class Dr{constructor(x,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then(()=>{x(this)}).catch(A=>{this.error(A)})}next(x){this.forEachObserver(T=>{T.next(x)})}error(x){this.forEachObserver(T=>{T.error(x)}),this.close(x)}complete(){this.forEachObserver(x=>{x.complete()}),this.close()}subscribe(x,T,A){let w;if(void 0===x&&void 0===T&&void 0===A)throw new Error("Missing Observer.");w=function Ar(V,x){if("object"!=typeof V||null===V)return!1;for(const T of x)if(T in V&&"function"==typeof V[T])return!0;return!1}(x,["next","error","complete"])?x:{next:x,error:T,complete:A},void 0===w.next&&(w.next=en),void 0===w.error&&(w.error=en),void 0===w.complete&&(w.complete=en);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),O}unsubscribeOne(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(x){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,x)}sendOne(x,T){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[x])try{T(this.observers[x])}catch(A){typeof console<"u"&&console.error&&console.error(A)}})}close(x){this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function en(){}function Es(V){return V&&V._delegate?V._delegate:V}},102:(Ji,zn,Ge)=>{function S(n){return"function"==typeof n}function Ce(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const P=Ce(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Ue(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Pt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(S(r))try{r()}catch(s){e=s instanceof P?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Xt(s)}catch(o){e=e??[],o instanceof P?e=[...e,...o.errors]:e.push(o)}}if(e)throw new P(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Xt(e);else{if(e instanceof Pt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ue(t,e)}remove(e){const{_finalizers:t}=this;t&&Ue(t,e),e instanceof Pt&&e._removeParent(this)}}Pt.EMPTY=(()=>{const n=new Pt;return n.closed=!0,n})();const pn=Pt.EMPTY;function Nn(n){return n instanceof Pt||n&&"closed"in n&&S(n.remove)&&S(n.add)&&S(n.unsubscribe)}function Xt(n){S(n)?n():n.unsubscribe()}const At={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},le={setTimeout(n,e,...t){const{delegate:r}=le;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=le;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _e(n){le.setTimeout(()=>{const{onUnhandledError:e}=At;if(!e)throw n;e(n)})}function Be(){}const it=vt("C",void 0,void 0);function vt(n,e,t){return{kind:n,value:e,error:t}}let Je=null;function Xe(n){if(At.useDeprecatedSynchronousErrorHandling){const e=!Je;if(e&&(Je={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Je;if(Je=null,t)throw r}}else n()}class gn extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nn(e)&&e.add(this)):this.destination=rn}static create(e,t,r){return new Ot(e,t,r)}next(e){this.isStopped?de(function qn(n){return vt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?de(function Mt(n){return vt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?de(it,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const gt=Function.prototype.bind;function Lt(n,e){return gt.call(n,e)}class Lr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){st(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){st(r)}else st(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){st(t)}}}class Ot extends gn{constructor(e,t,r){let i;if(super(),S(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&At.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lt(e.next,s),error:e.error&&Lt(e.error,s),complete:e.complete&&Lt(e.complete,s)}):i=e}this.destination=new Lr(i)}}function st(n){At.useDeprecatedSynchronousErrorHandling?function Xn(n){At.useDeprecatedSynchronousErrorHandling&&Je&&(Je.errorThrown=!0,Je.error=n)}(n):_e(n)}function de(n,e){const{onStoppedNotification:t}=At;t&&le.setTimeout(()=>t(n,e))}const rn={closed:!0,next:Be,error:function Cn(n){throw n},complete:Be},Wt="function"==typeof Symbol&&Symbol.observable||"@@observable";function mn(n){return n}function si(n){return 0===n.length?mn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let at=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function J(n){return n&&n instanceof gn||function Ti(n){return n&&S(n.next)&&S(n.error)&&S(n.complete)}(n)&&Nn(n)}(t)?t:new Ot(t,r,i);return Xe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=gs(r))((i,s)=>{const o=new Ot({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Wt](){return this}pipe(...t){return si(t)(this)}toPromise(t){return new(t=gs(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function gs(n){var e;return null!==(e=n??At.Promise)&&void 0!==e?e:Promise}const ee=Ce(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let re=(()=>{class n extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new se(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ee}next(t){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?pn:(this.currentObservers=null,s.push(t),new Pt(()=>{this.currentObservers=null,Ue(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new at;return t.source=this,t}}return n.create=(e,t)=>new se(e,t),n})();class se extends re{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:pn}}function ce(n){return S(n?.lift)}function te(n){return e=>{if(ce(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(n,e,t,r,i){return new It(n,e,t,r,i)}class It extends gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function xe(n,e){return te((t,r)=>{let i=0;t.subscribe(Re(r,s=>{r.next(n.call(e,s,i++))}))})}var Fe=Ge(582);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function sn(n){return S(n?.then)}function oi(n){return S(n[Wt])}function Nt(n){return Symbol.asyncIterator&&S(n?.[Symbol.asyncIterator])}function Zt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gn=function Dn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ur(n){return S(n?.[Gn])}function ms(n){return(0,Fe.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Fe.qq)(t.read());if(i)return yield(0,Fe.qq)(void 0);yield yield(0,Fe.qq)(r)}}finally{t.releaseLock()}})}function Li(n){return S(n?.getReader)}function xt(n){if(n instanceof at)return n;if(null!=n){if(oi(n))return function Ci(n){return new at(e=>{const t=n[Wt]();if(S(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function Vs(n){return new at(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(sn(n))return function _s(n){return new at(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_e)})}(n);if(Nt(n))return Ui(n);if(ur(n))return function ai(n){return new at(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Li(n))return function Cr(n){return Ui(ms(n))}(n)}throw Zt(n)}function Ui(n){return new at(e=>{(function Dr(n,e){var t,r,i,s;return(0,Fe.mG)(this,void 0,void 0,function*(){try{for(t=(0,Fe.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function _n(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function en(n,e,t=1/0){return S(e)?en((r,i)=>xe((s,o)=>e(r,s,i,o))(xt(n(r,i))),t):("number"==typeof e&&(t=e),te((r,i)=>function Ar(n,e,t,r,i,s,o,a){const u=[];let l=0,f=0,m=!1;const y=()=>{m&&!u.length&&!l&&e.complete()},E=N=>l<r?b(N):u.push(N),b=N=>{s&&e.next(N),l++;let k=!1;xt(t(N,f++)).subscribe(Re(e,W=>{i?.(W),s?E(W):e.next(W)},()=>{k=!0},void 0,()=>{if(k)try{for(l--;u.length&&l<r;){const W=u.shift();o?_n(e,o,()=>b(W)):b(W)}y()}catch(W){e.error(W)}}))};return n.subscribe(Re(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function yr(n=1/0){return en(mn,n)}const xn=new at(n=>n.complete());function Di(n){return n[n.length-1]}function vs(n){return S(Di(n))?n.pop():void 0}function On(n){return function Kt(n){return n&&S(n.schedule)}(Di(n))?n.pop():void 0}function yn(n,e=0){return te((t,r)=>{t.subscribe(Re(r,i=>_n(r,n,()=>r.next(i),e),()=>_n(r,n,()=>r.complete(),e),i=>_n(r,n,()=>r.error(i),e)))})}function vr(n,e=0){return te((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Es(n,e){if(!n)throw new Error("Iterable cannot be null");return new at(t=>{_n(t,e,()=>{const r=n[Symbol.asyncIterator]();_n(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function T(n,e){return e?function x(n,e){if(null!=n){if(oi(n))return function Is(n,e){return xt(n).pipe(vr(e),yn(e))}(n,e);if(Ct(n))return function Us(n,e){return new at(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(sn(n))return function Ls(n,e){return xt(n).pipe(vr(e),yn(e))}(n,e);if(Nt(n))return Es(n,e);if(ur(n))return function Bs(n,e){return new at(t=>{let r;return _n(t,e,()=>{r=n[Gn](),_n(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>S(r?.return)&&r.return()})}(n,e);if(Li(n))return function V(n,e){return Es(ms(n),e)}(n,e)}throw Zt(n)}(n,e):xt(n)}function A(...n){const e=On(n),t=function er(n,e){return"number"==typeof Di(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?xt(r[0]):yr(t)(T(r,e)):xn}class w extends re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function O(...n){return T(n,On(n))}function ue(n={}){const{connector:e=(()=>new re),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),o=u=void 0,f=m=!1},b=()=>{const N=o;E(),N?.unsubscribe()};return te((N,k)=>{l++,!m&&!f&&y();const W=u=u??e();k.add(()=>{l--,0===l&&!m&&!f&&(a=be(b,i))}),W.subscribe(k),!o&&l>0&&(o=new Ot({next:B=>W.next(B),error:B=>{m=!0,y(),a=be(E,t,B),W.error(B)},complete:()=>{f=!0,y(),a=be(E,r),W.complete()}}),xt(N).subscribe(o))})(s)}}function be(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ot({next:()=>{r.unsubscribe(),n()}});return xt(e(...t)).subscribe(r)}function ke(n,e){return te((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Re(r,u=>{i?.unsubscribe();let l=0;const f=s++;xt(n(u,f)).subscribe(i=Re(r,m=>r.next(e?e(u,m,f,l++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ye(n,e=mn){return n=n??Dt,te((t,r)=>{let i,s=!0;t.subscribe(Re(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Dt(n,e){return n===e}function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Ut(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $e(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map($e).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function tr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const yo=Se({__forward_ref__:Se});function $t(n){return n.__forward_ref__=$t,n.toString=function(){return $e(this())},n}function We(n){return ia(n)?n():n}function ia(n){return"function"==typeof n&&n.hasOwnProperty(yo)&&n.__forward_ref__===$t}function sa(n){return n&&!!n.\u0275providers}const pc="https://g.co/ng/security#xss";class M extends Error{constructor(e,t){super(function H(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function G(n){return"string"==typeof n?n:null==n?"":String(n)}function zt(n,e){throw new M(-201,!1)}function bi(n,e){null==n&&function Ze(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function He(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function _c(n){return Zd(n,su)||Zd(n,Eo)}function Zd(n,e){return n.hasOwnProperty(e)?n[e]:null}function yc(n){return n&&(n.hasOwnProperty(Kd)||n.hasOwnProperty(bg))?n[Kd]:null}const su=Se({\u0275prov:Se}),Kd=Se({\u0275inj:Se}),Eo=Se({ngInjectableDef:Se}),bg=Se({ngInjectorDef:Se});var pt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pt||{});let Qd;function Ur(n){const e=Qd;return Qd=n,e}function Ic(n,e,t){const r=_c(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&pt.Optional?null:void 0!==e?e:void zt($e(n))}const qt=globalThis;class Te{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=He({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const au={},uu="__NG_DI_FLAG__",js="ngTempTokenPath",th=/\n/gm,Bi="__source";let oa;function Hs(n){const e=oa;return oa=n,e}function rh(n,e=pt.Default){if(void 0===oa)throw new M(-203,!1);return null===oa?Ic(n,void 0,e):oa.get(n,e&pt.Optional?null:void 0,e)}function ve(n,e=pt.Default){return(function vc(){return Qd}()||rh)(We(n),e)}function Ve(n,e=pt.Default){return ve(n,Tc(e))}function Tc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cu(n){const e=[];for(let t=0;t<n.length;t++){const r=We(n[t]);if(Array.isArray(r)){if(0===r.length)throw new M(900,!1);let i,s=pt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=dI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ve(i,s))}else e.push(ve(r))}return e}function $i(n,e){return n[uu]=e,n.prototype[uu]=e,n}function dI(n){return n[uu]}function zs(n){return{toString:n}.toString()}var aa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(aa||{}),Wn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Wn||{});const br={},wt=[],Cc=Se({\u0275cmp:Se}),ih=Se({\u0275dir:Se}),sh=Se({\u0275pipe:Se}),Ng=Se({\u0275mod:Se}),Br=Se({\u0275fac:Se}),du=Se({__NG_ELEMENT_ID__:Se}),hu=Se({__NG_ENV_ID__:Se});function xg(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Dc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ui(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Ac(n){return 3===n||4===n||6===n}function ui(n){return 64===n.charCodeAt(0)}function ua(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Og(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Og(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const bc="ng-template";function Sc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==xg(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function oh(n){return 4===n.type&&n.value!==bc}function kg(n,e,t){return e===(4!==n.type||t?n.value:bc)}function fI(n,e,t){let r=4;const i=n.attrs||[],s=function uh(n){for(let e=0;e<n.length;e++)if(Ac(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!kg(n,u,t)||""===u&&1===e.length){if(ci(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Sc(n.attrs,l,t)){if(ci(r))return!1;o=!0}continue}const m=ah(8&r?"class":u,i,oh(n),t);if(-1===m){if(ci(r))return!1;o=!0;continue}if(""!==l){let y;y=m>s?"":i[m+1].toLowerCase();const E=8&r?y:null;if(E&&-1!==xg(E,l,0)||2&r&&l!==y){if(ci(r))return!1;o=!0}}}}else{if(!o&&!ci(r)&&!ci(u))return!1;if(o&&ci(u))continue;o=!1,r=u|1&r}}return ci(r)||o}function ci(n){return 0==(1&n)}function ah(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Vg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Rc(n,e,t=!1){for(let r=0;r<e.length;r++)if(fI(n,e[r],t))return!0;return!1}function lh(n,e){return n?":not("+e.trim()+")":e}function dh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ci(o)&&(e+=lh(s,i),i=""),r=o,s=s||!ci(r);t++}return""!==i&&(e+=lh(s,i)),e}function ji(n){return zs(()=>{const e=Ug(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===aa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Wn.Emulated,styles:n.styles||wt,_:null,schemas:n.schemas||null,tView:null,id:""};Nc(t);const r=n.dependencies;return t.directiveDefs=xc(r,!1),t.pipeDefs=xc(r,!0),t.id=function pI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Fg(n){return Tt(n)||Kn(n)}function ph(n){return null!==n}function Zn(n){return zs(()=>({type:n.type,bootstrap:n.bootstrap||wt,declarations:n.declarations||wt,imports:n.imports||wt,exports:n.exports||wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Lg(n,e){if(null==n)return br;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ke(n){return zs(()=>{const e=Ug(n);return Nc(e),e})}function nr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Tt(n){return n[Cc]||null}function Kn(n){return n[ih]||null}function rr(n){return n[sh]||null}function Sr(n,e){const t=n[Ng]||null;if(!t&&!0===e)throw new Error(`Type ${$e(n)} does not have '\u0275mod' property.`);return t}function Ug(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||br,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lg(n.inputs,e),outputs:Lg(n.outputs)}}function Nc(n){n.features?.forEach(e=>e(n))}function xc(n,e){if(!n)return null;const t=e?rr:Fg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ph)}const cn=0,Me=1,tt=2,ln=3,li=4,fu=5,ir=6,ca=7,kn=8,Xi=9,la=10,nt=11,wo=12,Bg=13,Gs=14,Vn=15,To=16,da=17,Si=18,pu=19,Oc=20,Ws=21,Hi=22,gu=23,Co=24,mt=25,kc=1,Vc=2,es=7,Do=9,cr=11;function $r(n){return Array.isArray(n)&&"object"==typeof n[kc]}function Rr(n){return Array.isArray(n)&&!0===n[kc]}function $g(n){return 0!=(4&n.flags)}function ha(n){return n.componentOffset>-1}function _h(n){return 1==(1&n.flags)}function di(n){return!!n.template}function yh(n){return 0!=(512&n[tt])}function Ao(n,e){return n.hasOwnProperty(Br)?n[Br]:null}let Ir=null,pa=!1;function Ri(n){const e=Ir;return Ir=n,e}const Gg={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Wg(n){if(!Ks(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Zg(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Lc(n){n.dirty=!0,function Fn(n){if(void 0===n.liveConsumerNode)return;const e=pa;pa=!0;try{for(const t of n.liveConsumerNode)t.dirty||Lc(t)}finally{pa=e}}(n),n.consumerMarkedDirty?.(n)}function Eh(n){return n&&(n.nextProducerIndex=0),Ri(n)}function _u(n,e){if(Ri(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ks(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Uc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Zg(n){bo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Wg(t),r!==t.version))return!0}return!1}function Kg(n){if(bo(n),Ks(n))for(let e=0;e<n.producerNode.length;e++)Uc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Uc(n,e){if(function ma(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),bo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Uc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];bo(i),i.producerIndexOfThis[r]=e}}function Ks(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function bo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Bc=null;function em(n){const e=Ri(null);try{return n()}finally{Ri(e)}}const tm=()=>{},Ah=(()=>({...Gg,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:tm}))();class CI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Pi(){return nm}function nm(n){return n.type.prototype.ngOnChanges&&(n.setInput=DI),rm}function rm(){const n=sm(this),e=n?.current;if(e){const t=n.previous;if(t===br)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function DI(n,e,t,r){const i=this.declaredInputs[t],s=sm(n)||function bh(n,e){return n[im]=e}(n,{previous:br,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new CI(u&&u.currentValue,e,a===br),n[r]=e}Pi.ngInherit=!0;const im="__ngSimpleChanges__";function sm(n){return n[im]||null}const ts=function(n,e,t){};function Gt(n){for(;Array.isArray(n);)n=n[cn];return n}function ya(n,e){return Gt(e[n])}function jr(n,e){return Gt(e[n.index])}function am(n,e){return n.data[e]}function Pr(n,e){const t=e[n];return $r(t)?t:t[cn]}function ns(n,e){return null==e?null:n[e]}function Mh(n){n[da]=0}function RI(n){1024&n[tt]||(n[tt]|=1024,zc(n,1))}function um(n){1024&n[tt]&&(n[tt]&=-1025,zc(n,-1))}function zc(n,e){let t=n[ln];if(null===t)return;t[fu]+=e;let r=t;for(t=t[ln];null!==t&&(1===e&&1===r[fu]||-1===e&&0===r[fu]);)t[fu]+=e,r=t,t=t[ln]}const Qe={lFrame:Im(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function dm(){return Qe.bindingsEnabled}function fe(){return Qe.lFrame.lView}function bt(){return Qe.lFrame.tView}function lr(){let n=pm();for(;null!==n&&64===n.type;)n=n.parent;return n}function pm(){return Qe.lFrame.currentTNode}function rs(n,e){const t=Qe.lFrame;t.currentTNode=n,t.isParent=e}function Vh(){return Qe.lFrame.isParent}function va(){return Qe.lFrame.bindingIndex++}function kI(n,e){const t=Qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Iu(e)}function Iu(n){Qe.lFrame.currentDirectiveIndex=n}function Uh(n){Qe.lFrame.currentQueryIndex=n}function Bh(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[ir]:null}function vm(n,e,t){if(t&pt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&pt.Host||(i=Bh(s),null===i||(s=s[Gs],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Qe.lFrame=jh();return r.currentTNode=e,r.lView=n,!0}function $h(n){const e=jh(),t=n[Me];Qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jh(){const n=Qe.lFrame,e=null===n?null:n.child;return null===e?Im(n):e}function Im(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Eu(){const n=Qe.lFrame;return Qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Em=Eu;function Hh(){const n=Eu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Mr(){return Qe.lFrame.selectedIndex}function Ro(n){Qe.lFrame.selectedIndex=n}function vn(){const n=Qe.lFrame;return am(n.tView,n.selectedIndex)}let Tm=!0;function Zc(){return Tm}function Cs(n){Tm=n}function Kc(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Qc(n,e,t){Jc(n,e,3,t)}function Yc(n,e,t,r){(3&n[tt])===t&&Jc(n,e,t,r)}function qh(n,e){let t=n[tt];(3&t)===e&&(t&=8191,t+=1,n[tt]=t)}function Jc(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[da]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[da]+=65536),(a<s||-1==s)&&(jI(n,t,e,u),n[da]=(4294901760&n[da])+u+2),u++}function Xc(n,e){ts(4,n,e);const t=Ri(null);try{e.call(n)}finally{Ri(t),ts(5,n,e)}}function jI(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[tt]>>13<n[da]>>16&&(3&n[tt])===e&&(n[tt]+=8192,Xc(a,s)):Xc(a,s)}const Ys=-1;class wu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function el(n){return n!==Ys}function Ia(n){return 32767&n}function Cu(n,e){let t=function zI(n){return n>>16}(n),r=e;for(;t>0;)r=r[Gs],t--;return r}let Zh=!0;function tl(n){const e=Zh;return Zh=n,e}const Kh=255,Dm=5;let f0=0;const os={};function c(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),s=n.injectorIndex;if(el(i)){const o=Ia(i),a=Cu(i,e),u=a[Me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Rm(i),null===r)return Ys;if(t++,i=i[Gs],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ys}function C(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(du)&&(r=t[du]),null==r&&(r=t[du]=f0++);const i=r&Kh;e.data[n+(i>>Dm)]|=1<<i}(n,e,t)}function Q(n,e,t){if(t&pt.Optional||void 0!==n)return n;zt()}function he(n,e,t,r){if(t&pt.Optional&&void 0===r&&(r=null),!(t&(pt.Self|pt.Host))){const i=n[Xi],s=Ur(void 0);try{return i?i.get(e,r,t&pt.Optional):Ic(e,r,t&pt.Optional)}finally{Ur(s)}}return Q(r,0,t)}function Ne(n,e,t,r=pt.Default,i){if(null!==n){if(2048&e[tt]&&!(r&pt.Self)){const o=function Sm(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[tt]&&!(512&o[tt]);){const a=ze(s,o,t,r|pt.Self,os);if(a!==os)return a;let u=s.parent;if(!u){const l=o[Oc];if(l){const f=l.get(t,os,r);if(f!==os)return f}u=Rm(o),o=o[Gs]}s=u}return i}(n,e,t,r,os);if(o!==os)return o}const s=ze(n,e,t,r,os);if(s!==os)return s}return he(e,t,r,i)}function ze(n,e,t,r,i){const s=function nl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(du)?n[du]:void 0;return"number"==typeof e?e>=0?e&Kh:bm:e}(t);if("function"==typeof s){if(!vm(e,n,r))return r&pt.Host?Q(i,0,r):he(e,t,r,i);try{let o;if(o=s(r),null!=o||r&pt.Optional)return o;zt()}finally{Em()}}else if("number"==typeof s){let o=null,a=g(n,e),u=Ys,l=r&pt.Host?e[Vn][ir]:null;for((-1===a||r&pt.SkipSelf)&&(u=-1===a?v(n,e):e[a+8],u!==Ys&&rl(r,!1)?(o=e[Me],a=Ia(u),e=Cu(u,e)):a=-1);-1!==a;){const f=e[Me];if(Qh(s,a,f.data)){const m=_t(a,e,t,o,r,l);if(m!==os)return m}u=e[a+8],u!==Ys&&rl(r,e[Me].data[a+8]===l)&&Qh(s,a,e)?(o=f,a=Ia(u),e=Cu(u,e)):a=-1}}return i}function _t(n,e,t,r,i,s){const o=e[Me],a=o.data[n+8],f=function hr(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,y=i?a+f:n.directiveEnd;for(let E=r?a:a+f;E<y;E++){const b=o[E];if(E<u&&t===b||E>=u&&b.type===t)return E}if(i){const E=o[u];if(E&&di(E)&&E.type===t)return u}return null}(a,o,t,null==r?ha(a)&&Zh:r!=o&&0!=(3&a.type),i&pt.Host&&s===a);return null!==f?Hr(e,o,f,a):os}function Hr(n,e,t,r){let i=n[t];const s=e.data;if(function Cm(n){return n instanceof wu}(i)){const o=i;o.resolving&&function et(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new M(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ge(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():G(n)}(s[t]));const a=tl(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ur(o.injectImpl):null;vm(n,r,pt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function $I(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=nm(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Ur(l),tl(a),o.resolving=!1,Em()}}return i}function Qh(n,e,t){return!!(t[e+(n>>Dm)]&1<<n)}function rl(n,e){return!(n&pt.Self||n&pt.Host&&e)}class fr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ne(this._tNode,this._lView,e,Tc(r),t)}}function bm(){return new fr(lr(),fe())}function sr(n){return zs(()=>{const e=n.prototype.constructor,t=e[Br]||Du(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Br]||Du(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Du(n){return ia(n)?()=>{const e=Du(We(n));return e&&e()}:Ao(n)}function Rm(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[ir]:null}const il="__parameters__";function ol(n,e,t){return zs(()=>{const r=function qI(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,f){const m=u.hasOwnProperty(il)?u[il]:Object.defineProperty(u,il,{value:[]})[il];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ul(n,e){n.forEach(t=>Array.isArray(t)?ul(t,e):e(t))}function g0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zi(n,e,t){let r=cl(n,e);return r>=0?n[1|r]=t:(r=~r,function gB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function GI(n,e){const t=cl(n,e);if(t>=0)return n[1|t]}function cl(n,e){return function m0(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Nr=$i(ol("Optional"),8),Nm=$i(ol("SkipSelf"),4);function Fm(n){return 128==(128&n.flags)}var Ca=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ca||{});const YI=new Map;let UB=0;const XI="__ngContext__";function zr(n,e){$r(e)?(n[XI]=e[pu],function $B(n){YI.set(n[pu],n)}(e)):n[XI]=e}let eE;function tE(n,e){return eE(n,e)}function tf(n){const e=n[ln];return Rr(e)?e[ln]:e}function V0(n){return L0(n[wo])}function F0(n){return L0(n[li])}function L0(n){for(;null!==n&&!Rr(n);)n=n[li];return n}function hl(n,e,t,r,i){if(null!=r){let s,o=!1;Rr(r)?s=r:$r(r)&&(o=!0,r=r[cn]);const a=Gt(r);0===n&&null!==t?null==i?j0(e,t,a):Au(e,t,a,i||null,!0):1===n&&null!==t?Au(e,t,a,i||null,!0):2===n?function zm(n,e,t){const r=jm(n,e);r&&function o$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function c$(n,e,t,r,i){const s=t[es];s!==Gt(t)&&hl(e,n,r,s,i);for(let a=cr;a<t.length;a++){const u=t[a];rf(u[Me],u,n,e,r,s)}}(e,n,s,t,i)}}function Bm(n,e,t){return n.createElement(e,t)}function B0(n,e){const t=n[Do],r=t.indexOf(e);um(e),t.splice(r,1)}function $m(n,e){if(n.length<=cr)return;const t=cr+e,r=n[t];if(r){const i=r[To];null!==i&&i!==n&&B0(i,r),e>0&&(n[t-1][li]=r[li]);const s=Pm(n,cr+e);!function JB(n,e){rf(n,e,e[nt],2,null,null),e[cn]=null,e[ir]=null}(r[Me],r);const o=s[Si];null!==o&&o.detachView(s[Me]),r[ln]=null,r[li]=null,r[tt]&=-129}return r}function rE(n,e){if(!(256&e[tt])){const t=e[nt];e[gu]&&Kg(e[gu]),e[Co]&&Kg(e[Co]),t.destroyNode&&rf(n,e,t,3,null,null),function t$(n){let e=n[wo];if(!e)return iE(n[Me],n);for(;e;){let t=null;if($r(e))t=e[wo];else{const r=e[cr];r&&(t=r)}if(!t){for(;e&&!e[li]&&e!==n;)$r(e)&&iE(e[Me],e),e=e[ln];null===e&&(e=n),$r(e)&&iE(e[Me],e),t=e&&e[li]}e=t}}(e)}}function iE(n,e){if(!(256&e[tt])){e[tt]&=-129,e[tt]|=256,function s$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof wu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];ts(4,a,u);try{u.call(a)}finally{ts(5,a,u)}}else{ts(4,i,s);try{s.call(i)}finally{ts(5,i,s)}}}}}(n,e),function i$(n,e){const t=n.cleanup,r=e[ca];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ca]=null);const i=e[Ws];if(null!==i){e[Ws]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Me].type&&e[nt].destroy();const t=e[To];if(null!==t&&Rr(e[ln])){t!==e[ln]&&B0(t,e);const r=e[Si];null!==r&&r.detachView(n)}!function jB(n){YI.delete(n[pu])}(e)}}function sE(n,e,t){return function $0(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[cn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Wn.None||s===Wn.Emulated)return null}return jr(r,t)}}(n,e.parent,t)}function Au(n,e,t,r,i){n.insertBefore(e,t,r,i)}function j0(n,e,t){n.appendChild(e,t)}function H0(n,e,t,r,i){null!==r?Au(n,e,t,r,i):j0(n,e,t)}function jm(n,e){return n.parentNode(e)}let oE,lE,Gm,G0=function q0(n,e,t){return 40&n.type?jr(n,t):null};function Hm(n,e,t,r){const i=sE(n,r,e),s=e[nt],a=function z0(n,e,t){return G0(n,e,t)}(r.parent||e[ir],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)H0(s,i,t[u],a,!1);else H0(s,i,t,a,!1);void 0!==oE&&oE(s,r,e,t,i)}function nf(n,e){if(null!==e){const t=e.type;if(3&t)return jr(e,n);if(4&t)return aE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return nf(n,r);{const i=n[e.index];return Rr(i)?aE(-1,i):Gt(i)}}if(32&t)return tE(e,n)()||Gt(n[e.index]);{const r=Z0(n,e);return null!==r?Array.isArray(r)?r[0]:nf(tf(n[Vn]),r):nf(n,e.next)}}return null}function Z0(n,e){return null!==e?n[Vn][ir].projection[e.projection]:null}function aE(n,e){const t=cr+n+1;if(t<e.length){const r=e[t],i=r[Me].firstChild;if(null!==i)return nf(r,i)}return e[es]}function uE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&zr(Gt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)uE(n,e,t.child,r,i,s,!1),hl(e,n,i,a,s);else if(32&u){const l=tE(t,r);let f;for(;f=l();)hl(e,n,i,f,s);hl(e,n,i,a,s)}else 16&u?Q0(n,e,r,t,i,s):hl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function rf(n,e,t,r,i,s){uE(t,r,n.firstChild,e,i,s,!1)}function Q0(n,e,t,r,i,s){const o=t[Vn],u=o[ir].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)hl(e,n,i,u[l],s);else{let l=u;const f=o[ln];Fm(r)&&(l.flags|=128),uE(n,e,l,f,i,s,!0)}}function Y0(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function J0(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Dc(n,e,r),null!==i&&Y0(n,e,i),null!==s&&function d$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function tS(n){return function dE(){if(void 0===Gm&&(Gm=null,qt.trustedTypes))try{Gm=qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gm}()?.createScriptURL(n)||n}class nS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pc})`}}function Da(n){return n instanceof nS?n.changingThisBreaksApplicationSecurity:n}function sf(n,e){const t=function E$(n){return n instanceof nS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${pc})`)}return t===e}const D$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(gl||{});function cS(n){const e=uf();return e?e.sanitize(gl.URL,n)||"":sf(n,"URL")?Da(n):function hE(n){return(n=String(n)).match(D$)?n:"unsafe:"+n}(G(n))}function lS(n){const e=uf();if(e)return tS(e.sanitize(gl.RESOURCE_URL,n)||"");if(sf(n,"ResourceURL"))return tS(Da(n));throw new M(904,!1)}function uf(){const n=fe();return n&&n[la].sanitizer}const cf=new Te("ENVIRONMENT_INITIALIZER"),hS=new Te("INJECTOR",-1),fS=new Te("INJECTOR_DEF_TYPES");class mE{get(e,t=au){if(t===au){const r=new Error(`NullInjectorError: No provider for ${$e(e)}!`);throw r.name="NullInjectorError",r}return t}}function L$(...n){return{\u0275providers:gS(0,n),\u0275fromNgModule:!0}}function gS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return ul(e,o=>{const a=o;Zm(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&mS(i,s),t}function mS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];_E(i,s=>{e(s,r)})}}function Zm(n,e,t,r){if(!(n=We(n)))return!1;let i=null,s=yc(n);const o=!s&&Tt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=yc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)Zm(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{ul(s.imports,f=>{Zm(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&mS(l,e)}if(!a){const l=Ao(i)||(()=>new i);e({provide:i,useFactory:l,deps:wt},i),e({provide:fS,useValue:i,multi:!0},i),e({provide:cf,useValue:()=>ve(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;_E(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function _E(n,e){for(let t of n)sa(t)&&(t=t.\u0275providers),Array.isArray(t)?_E(t,e):e(t)}const U$=Se({provide:String,useValue:Se});function yE(n){return null!==n&&"object"==typeof n&&U$ in n}function bu(n){return"function"==typeof n}const vE=new Te("Set Injector scope."),Km={},$$={};let IE;function Qm(){return void 0===IE&&(IE=new mE),IE}class us{}class ml extends us{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wE(e,o=>this.processProvider(o)),this.records.set(hS,_l(void 0,this)),i.has("environment")&&this.records.set(us,_l(void 0,this));const s=this.records.get(vE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fS.multi,wt,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Hs(this),r=Ur(void 0);try{return e()}finally{Hs(t),Ur(r)}}get(e,t=au,r=pt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hu))return e[hu](this);r=Tc(r);const s=Hs(this),o=Ur(void 0);try{if(!(r&pt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function G$(n){return"function"==typeof n||"object"==typeof n&&n instanceof Te}(e)&&_c(e);u=l&&this.injectableDefInScope(l)?_l(EE(e),Km):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&pt.Self?Qm():this.parent).get(e,t=r&pt.Optional&&t===au?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[js]=a[js]||[]).unshift($e(e)),s)throw a;return function hI(n,e,t,r){const i=n[js];throw e[Bi]&&i.unshift(e[Bi]),n.message=function lu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=$e(e);if(Array.isArray(e))i=e.map($e).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):$e(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(th,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[js]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ur(o),Hs(s)}}resolveInjectorInitializers(){const e=Hs(this),t=Ur(void 0);try{const i=this.get(cf.multi,wt,pt.Self);for(const s of i)s()}finally{Hs(e),Ur(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push($e(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){let t=bu(e=We(e))?e:We(e&&e.provide);const r=function H$(n){return yE(n)?_l(void 0,n.useValue):_l(vS(n),Km)}(e);if(bu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=_l(void 0,Km,!0),i.factory=()=>cu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Km&&(t.value=$$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function q$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=We(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function EE(n){const e=_c(n),t=null!==e?e.factory:Ao(n);if(null!==t)return t;if(n instanceof Te)throw new M(204,!1);if(n instanceof Function)return function j$(n){const e=n.length;if(e>0)throw function Jh(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new M(204,!1);const t=function Ag(n){return n&&(n[su]||n[Eo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new M(204,!1)}function vS(n,e,t){let r;if(bu(n)){const i=We(n);return Ao(i)||EE(i)}if(yE(n))r=()=>We(n.useValue);else if(function yS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...cu(n.deps||[]));else if(function _S(n){return!(!n||!n.useExisting)}(n))r=()=>ve(We(n.useExisting));else{const i=We(n&&(n.useClass||n.provide));if(!function z$(n){return!!n.deps}(n))return Ao(i)||EE(i);r=()=>new i(...cu(n.deps))}return r}function _l(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function wE(n,e){for(const t of n)Array.isArray(t)?wE(t,e):t&&sa(t)?wE(t.\u0275providers,e):e(t)}const Ym=new Te("AppId",{providedIn:"root",factory:()=>W$}),W$="ng",IS=new Te("Platform Initializer"),Ds=new Te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ES=new Te("CSP nonce",{providedIn:"root",factory:()=>function pl(){if(void 0!==lE)return lE;if(typeof document<"u")return document;throw new M(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let wS=(n,e,t)=>null;function PE(n,e,t=!1){return wS(n,e,t)}class rj{}class DS{}class sj{resolveComponentFactory(e){throw function ij(n){const e=Error(`No component factory found for ${$e(n)}.`);return e.ngComponent=n,e}(e)}}let r_=(()=>{class n{static#e=this.NULL=new sj}return n})();function oj(){return Il(lr(),fe())}function Il(n,e){return new qi(jr(n,e))}let qi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=oj}return n})();class bS{}let Mo=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function uj(){const n=fe(),t=Pr(lr().index,n);return($r(t)?t:n)[nt]}()}return n})(),cj=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>null})}return n})();class El{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const xE=new El("16.2.12"),OE={};function MS(n,e=null,t=null,r){const i=NS(n,e,t,r);return i.resolveInjectorInitializers(),i}function NS(n,e=null,t=null,r,i=new Set){const s=[t||wt,L$(n)];return r=r||("object"==typeof n?void 0:$e(n)),new ml(s,e||Qm(),r||null,i)}let qr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=au;static#t=this.NULL=new mE;static create(t,r){if(Array.isArray(t))return MS({name:""},r,t,"");{const i=t.name??"";return MS({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=He({token:n,providedIn:"any",factory:()=>ve(hS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function VE(n){return n.ngOriginalError}class No{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&VE(e);for(;t&&VE(t);)t=VE(t);return t||null}}function LE(n){return e=>{setTimeout(n,void 0,e)}}const Un=class mj extends re{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=LE(s),i&&(i=LE(i)),o&&(o=LE(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Pt&&e.add(a),a}};function OS(...n){}class kt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Un(!1),this.onMicrotaskEmpty=new Un(!1),this.onStable=new Un(!1),this.onError=new Un(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function _j(){const n="function"==typeof qt.requestAnimationFrame;let e=qt[n?"requestAnimationFrame":"setTimeout"],t=qt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Ij(n){const e=()=>{!function vj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,BE(n),n.isCheckStableRunning=!0,UE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),BE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function wj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return kS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VS(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return kS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),VS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,BE(n),UE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!kt.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(kt.isInAngularZone())throw new M(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,yj,OS,OS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const yj={};function UE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function BE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VS(n){n._nesting--,UE(n)}class Ej{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Un,this.onMicrotaskEmpty=new Un,this.onStable=new Un,this.onError=new Un}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const FS=new Te("",{providedIn:"root",factory:LS});function LS(){const n=Ve(kt);let e=!0;return A(new at(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new at(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{kt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{kt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ue()))}function xo(n){return n instanceof Function?n():n}let $E=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})();function hf(n){for(;n;){n[tt]|=64;const e=tf(n);if(yh(n)&&!e)return n;n=e}return null}const HS=new Te("",{providedIn:"root",factory:()=>!1});let s_=null;function WS(n,e){return n[e]??QS()}function ZS(n,e){const t=QS();t.producerNode?.length&&(n[e]=s_,t.lView=n,s_=KS())}const Nj={...Gg,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hf(n.lView)},lView:null};function KS(){return Object.create(Nj)}function QS(){return s_??=KS(),s_}const ut={};function o_(n){YS(bt(),fe(),Mr()+n,!1)}function YS(n,e,t,r){if(!r)if(3==(3&e[tt])){const s=n.preOrderCheckHooks;null!==s&&Qc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Yc(e,s,0,t)}Ro(t)}function ye(n,e=pt.Default){const t=fe();return null===t?ve(n,e):Ne(lr(),t,We(n),e)}function a_(n,e,t,r,i,s,o,a,u,l,f){const m=e.blueprint.slice();return m[cn]=i,m[tt]=140|r,(null!==l||n&&2048&n[tt])&&(m[tt]|=2048),Mh(m),m[ln]=m[Gs]=n,m[kn]=t,m[la]=o||n&&n[la],m[nt]=a||n&&n[nt],m[Xi]=u||n&&n[Xi]||null,m[ir]=s,m[pu]=function BB(){return UB++}(),m[Hi]=f,m[Oc]=l,m[Vn]=2==e.type?n[Vn]:m,m}function Cl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function jE(n,e,t,r,i){const s=pm(),o=Vh(),u=n.data[e]=function Bj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Qs(){return null!==Qe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function mm(){return Qe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function So(){const n=Qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return rs(s,!0),s}function ff(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XS(n,e,t,r,i){const s=WS(e,gu),o=Mr(),a=2&r;try{Ro(-1),a&&e.length>mt&&YS(n,e,mt,!1),ts(a?2:0,i);const l=a?s:null,f=Eh(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{_u(l,f)}}finally{a&&null===e[gu]&&ZS(e,gu),Ro(o),ts(a?3:1,i)}}function HE(n,e,t){if($g(e)){const r=Ri(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ri(r)}}}function zE(n,e,t){dm()&&(function Wj(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ha(t)&&function eH(n,e,t){const r=jr(e,n),i=eR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=u_(n,a_(n,i,null,o,r,e,null,n[la].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||c(t,e),zr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=Hr(e,n,a,t);zr(l,e),null!==o&&tH(0,a-i,l,u,0,o),di(u)&&(Pr(t.index,e)[kn]=Hr(e,n,a,t))}}(n,e,t,jr(t,e)),64==(64&t.flags)&&sR(n,e,t))}function qE(n,e,t=jr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function eR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=GE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function GE(n,e,t,r,i,s,o,a,u,l,f){const m=mt+r,y=m+i,E=function Oj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ut);return t}(m,y),b="function"==typeof l?l():l;return E[Me]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:f}}let tR=n=>null;function nR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?rR(t,e,i,s):r.hasOwnProperty(i)&&rR(t,e,r[i],s)}return t}function rR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function WE(n,e,t,r){if(dm()){const i=null===r?null:{"":-1},s=function Kj(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Rc(e,o.selectors,!1))if(r||(r=[]),di(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),ZE(n,e,a.length)}else r.unshift(o),ZE(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&iR(n,e,t,o,i,a),i&&function Qj(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new M(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ua(t.mergedAttrs,t.attrs)}function iR(n,e,t,r,i,s){for(let l=0;l<r.length;l++)C(c(t,e),n,r[l].type);!function Jj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=ff(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=ua(t.mergedAttrs,f.hostAttrs),Xj(n,t,e,u,f),Yj(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function $j(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=t?t.get(m):null,b=y?y.outputs:null;u=nR(m.inputs,f,u,y?y.inputs:null),l=nR(m.outputs,f,l,b);const N=null===u||null===o||oh(e)?null:nH(u,f,o);a.push(N)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function sR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function _m(){return Qe.lFrame.currentDirectiveIndex}();try{Ro(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Iu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Zj(u,l)}}finally{Ro(-1),Iu(o)}}function Zj(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function ZE(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Yj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;di(e)&&(t[""]=n)}}function Xj(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ao(i.type)),o=new wu(s,di(i),ye);n.blueprint[r]=o,t[r]=o,function qj(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Gj(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,ff(n,t,i.hostVars,ut),i)}function Js(n,e,t,r,i,s){const o=jr(n,e);!function KE(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?G(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[nt],o,s,n.value,t,r,i)}function tH(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)oR(r,t,o[a++],o[a++],o[a++])}function oR(n,e,t,r,i){const s=Ri(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Ri(s)}}function nH(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function aR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function uR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Uh(t[r]),o.contentQueries(2,e[s],s)}}}function u_(n,e){return n[wo]?n[Bg][li]=e:n[wo]=e,n[Bg]=e,e}function QE(n,e,t){Uh(0);const r=Ri(null);try{e(n,t)}finally{Ri(r)}}function hR(n,e){const t=n[Xi],r=t?t.get(No,null):null;r&&r.handleError(e)}function YE(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];oR(n.data[o],e[o],r,a,i)}}function rH(n,e){const t=Pr(e,n),r=t[Me];!function iH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[cn];null!==i&&null===t[Hi]&&(t[Hi]=PE(i,t[Xi])),JE(r,t,t[kn])}function JE(n,e,t){$h(e);try{const r=n.viewQuery;null!==r&&QE(1,r,t);const i=n.template;null!==i&&XS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&uR(n,e),n.staticViewQueries&&QE(2,n.viewQuery,t);const s=n.components;null!==s&&function sH(n,e){for(let t=0;t<e.length;t++)rH(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[tt]&=-5,Hh()}}let fR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function TI(n,e,t){const r=Object.create(Ah);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Lc(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Zg(r))return;r.hasRun=!0;const o=Eh(r);try{r.cleanupFn(),r.cleanupFn=tm,r.fn(i)}finally{_u(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})();function c_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=tr(i,a):2==s&&(r=tr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function pf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Gt(s)),Rr(s)&&pR(s,r);const o=t.type;if(8&o)pf(n,e,t.child,r);else if(32&o){const a=tE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Z0(e,t);if(Array.isArray(a))r.push(...a);else{const u=tf(e[Vn]);pf(u[Me],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pR(n,e){for(let t=cr;t<n.length;t++){const r=n[t],i=r[Me].firstChild;null!==i&&pf(r[Me],r,i,e)}n[es]!==n[cn]&&e.push(n[es])}function l_(n,e,t,r=!0){const i=e[la],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{gR(n,e,n.template,t)}catch(u){throw r&&hR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function gR(n,e,t,r){const i=e[tt];if(256!=(256&i)){e[la].effectManager?.flush(),$h(e);try{Mh(e),function Wc(n){return Qe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&XS(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Qc(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Yc(e,l,0,null),qh(e,0)}if(function uH(n){for(let e=V0(n);null!==e;e=F0(e)){if(!e[Vc])continue;const t=e[Do];for(let r=0;r<t.length;r++){RI(t[r])}}}(e),mR(e,2),null!==n.contentQueries&&uR(n,e),o){const l=n.contentCheckHooks;null!==l&&Qc(e,l)}else{const l=n.contentHooks;null!==l&&Yc(e,l,1),qh(e,1)}!function xj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=WS(e,Co);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Ro(~s);else{const o=s,a=t[++i],u=t[++i];kI(a,o),r.dirty=!1;const l=Eh(r);try{u(2,e[o])}finally{_u(r,l)}}}}finally{null===e[Co]&&ZS(e,Co),Ro(-1)}}(n,e);const a=n.components;null!==a&&yR(e,a,0);const u=n.viewQuery;if(null!==u&&QE(2,u,r),o){const l=n.viewCheckHooks;null!==l&&Qc(e,l)}else{const l=n.viewHooks;null!==l&&Yc(e,l,2),qh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tt]&=-73,um(e)}finally{Hh()}}}function mR(n,e){for(let t=V0(n);null!==t;t=F0(t))for(let r=cr;r<t.length;r++)_R(t[r],e)}function cH(n,e,t){_R(Pr(e,n),t)}function _R(n,e){if(!function bI(n){return 128==(128&n[tt])}(n))return;const t=n[Me],r=n[tt];if(80&r&&0===e||1024&r||2===e)gR(t,n,t.template,n[kn]);else if(n[fu]>0){mR(n,1);const i=t.components;null!==i&&yR(n,i,1)}}function yR(n,e,t){for(let r=0;r<e.length;r++)cH(n,e[r],t)}class gf{get rootNodes(){const e=this._lView,t=e[Me];return pf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(e){this._lView[kn]=e}get destroyed(){return 256==(256&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ln];if(Rr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&($m(e,r),Pm(t,r))}this._attachedToViewContainer=!1}rE(this._lView[Me],this._lView)}onDestroy(e){!function cm(n,e){if(256==(256&n[tt]))throw new M(911,!1);null===n[Ws]&&(n[Ws]=[]),n[Ws].push(e)}(this._lView,e)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){this._lView[tt]|=128}detectChanges(){l_(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function e$(n,e){rf(n,e,e[nt],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e}}class lH extends gf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;l_(e[Me],e,e[kn],!1)}checkNoChanges(){}get context(){return null}}class vR extends r_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new mf(t,this.ngModule)}}function IR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class hH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tc(r);const i=this.injector.get(e,OE,r);return i!==OE||t===OE?i:this.parentInjector.get(e,t,r)}}class mf extends DS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=IR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return IR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Mc(n){return n.map(dh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof us?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new hH(e,s):e,a=o.get(bS,null);if(null===a)throw new M(407,!1);const m={rendererFactory:a,sanitizer:o.get(cj,null),effectManager:o.get(fR,null),afterRenderEventManager:o.get($E,null)},y=a.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",b=r?function kj(n,e,t,r){const s=r.get(HS,!1)||t===Wn.ShadowDom,o=n.selectRootElement(e,s);return function Vj(n){tR(n)}(o),o}(y,r,this.componentDef.encapsulation,o):Bm(y,E,function dH(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E)),W=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let B=null;null!==b&&(B=PE(b,o,!0));const K=GE(0,null,null,1,0,null,null,null,null,null,null),ae=a_(null,K,null,W,null,null,m,y,o,null,B);let Ee,Le;$h(ae);try{const $=this.componentDef;let R,F=null;$.findHostDirectiveDefs?(R=[],F=new Map,$.findHostDirectiveDefs($,R,F),R.push($)):R=[$];const j=function pH(n,e){const t=n[Me],r=mt;return n[r]=e,Cl(t,r,2,"#host",null)}(ae,b),z=function gH(n,e,t,r,i,s,o){const a=i[Me];!function mH(n,e,t,r){for(const i of n)e.mergedAttrs=ua(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(c_(e,e.mergedAttrs,!0),null!==t&&J0(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=PE(e,i[Xi]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=a_(i,eR(t),null,f,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&ZE(a,n,r.length-1),u_(i,m),i[n.index]=m}(j,b,$,R,ae,m,y);Le=am(K,mt),b&&function yH(n,e,t,r){if(r)Dc(n,t,["ng-version",xE.full]);else{const{attrs:i,classes:s}=function hh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ci(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Dc(n,t,i),s&&s.length>0&&Y0(n,t,s.join(" "))}}(y,$,b,r),void 0!==t&&function vH(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Le,this.ngContentSelectors,t),Ee=function _H(n,e,t,r,i,s){const o=lr(),a=i[Me],u=jr(o,i);iR(a,i,o,t,null,r);for(let f=0;f<t.length;f++)zr(Hr(i,a,o.directiveStart+f,o),i);sR(a,i,o),u&&zr(u,i);const l=Hr(i,a,o.directiveStart+o.componentOffset,o);if(n[kn]=i[kn]=l,null!==s)for(const f of s)f(l,e);return HE(a,o,n),l}(z,$,R,F,ae,[IH]),JE(K,ae,null)}finally{Hh()}return new fH(this.componentType,Ee,Il(Le,ae),ae,Le)}}class fH extends rj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new lH(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;YE(s[Me],s,i,e,t),this.previousInputValues.set(e,t),hf(Pr(this._tNode.index,s))}}get injector(){return new fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function IH(){const n=lr();Kc(fe()[Me],n)}function Qt(n){let e=function ER(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(di(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=d_(n.inputs),o.inputTransforms=d_(n.inputTransforms),o.declaredInputs=d_(n.declaredInputs),o.outputs=d_(n.outputs);const a=i.hostBindings;a&&CH(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&wH(n,u),l&&TH(n,l),Ut(n.inputs,i.inputs),Ut(n.declaredInputs,i.declaredInputs),Ut(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Ut(o.inputTransforms,i.inputTransforms)),di(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function EH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ua(i.hostAttrs,t=ua(t,i.hostAttrs))}}(r)}function d_(n){return n===br?{}:n===wt?[]:n}function wH(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function TH(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function CH(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function DR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function h_(n){return!!function XE(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function eo(n,e,t,r){const i=fe();return Gr(i,va(),e)&&(bt(),Js(vn(),i,n,e,t,r)),eo}let UR=function BR(n,e,t,r){return Cs(!0),e[nt].createComment("")};function __(n,e,t){const r=fe();return Gr(r,va(),e)&&function Gi(n,e,t,r,i,s,o,a){const u=jr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(YE(n,t,f,r,i),ha(e)&&function Hj(n,e){const t=Pr(e,n);16&t[tt]||(t[tt]|=64)}(t,e.index)):3&e.type&&(r=function jj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(bt(),vn(),r,n,e,r[nt],t,!1),__}function sw(n,e,t,r,i){const o=i?"class":"style";YE(n,t,e.inputs[o],o,r)}function Ie(n,e,t,r){const i=fe(),s=bt(),o=mt+n,a=i[nt],u=s.firstCreatePass?function ez(n,e,t,r,i,s){const o=e.consts,u=Cl(e,n,2,r,ns(o,i));return WE(e,t,u,ns(o,s)),null!==u.attrs&&c_(u,u.attrs,!1),null!==u.mergedAttrs&&c_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=$R(s,i,u,a,e,n);i[o]=l;const f=_h(u);return rs(u,!0),J0(a,l,u),32!=(32&u.flags)&&Zc()&&Hm(s,i,l,u),0===function PI(){return Qe.lFrame.elementDepthCount}()&&zr(l,i),function yu(){Qe.lFrame.elementDepthCount++}(),f&&(zE(s,i,u),HE(s,u,i)),null!==r&&qE(i,u),Ie}function ie(){let n=lr();Vh()?function vu(){Qe.lFrame.isParent=!1}():(n=n.parent,rs(n,!1));const e=n;(function xh(n){return Qe.skipHydrationRootTNode===n})(e)&&function fm(){Qe.skipHydrationRootTNode=null}(),function MI(){Qe.lFrame.elementDepthCount--}();const t=bt();return t.firstCreatePass&&(Kc(t,n),$g(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function d0(n){return 0!=(8&n.flags)}(e)&&sw(t,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Gh(n){return 0!=(16&n.flags)}(e)&&sw(t,e,fe(),e.stylesWithoutHost,!1),ie}function ct(n,e,t,r){return Ie(n,e,t,r),ie(),ct}let $R=(n,e,t,r,i,s)=>(Cs(!0),Bm(r,i,function wm(){return Qe.lFrame.currentNamespace}()));function Ef(n){return!!n&&"function"==typeof n.then}function zR(n){return!!n&&"function"==typeof n.subscribe}function Wr(n,e,t,r){const i=fe(),s=bt(),o=lr();return function GR(n,e,t,r,i,s,o){const a=_h(r),l=n.firstCreatePass&&function lR(n){return n.cleanup||(n.cleanup=[])}(n),f=e[kn],m=function cR(n){return n[ca]||(n[ca]=[])}(e);let y=!0;if(3&r.type||o){const N=jr(r,e),k=o?o(N):N,W=m.length,B=o?ae=>o(Gt(ae[r.index])):r.index;let K=null;if(!o&&a&&(K=function az(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ca],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==K)(K.__ngLastListenerFn__||K).__ngNextListenerFn__=s,K.__ngLastListenerFn__=s,y=!1;else{s=ZR(r,e,f,s,!1);const ae=t.listen(k,i,s);m.push(s,ae),l&&l.push(i,B,W,W+1)}}else s=ZR(r,e,f,s,!1);const E=r.outputs;let b;if(y&&null!==E&&(b=E[i])){const N=b.length;if(N)for(let k=0;k<N;k+=2){const Ee=e[b[k]][b[k+1]].subscribe(s),Le=m.length;m.push(s,Ee),l&&l.push(i,r.index,Le,-(Le+1))}}}(s,i,i[nt],o,n,e,r),Wr}function WR(n,e,t,r){try{return ts(6,e,t),!1!==t(r)}catch(i){return hR(n,i),!1}finally{ts(7,e,t)}}function ZR(n,e,t,r,i){return function s(o){if(o===Function)return r;hf(n.componentOffset>-1?Pr(n.index,e):e);let u=WR(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=WR(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function y_(n,e){return n<<17|e<<2}function Aa(n){return n>>17&32767}function cw(n){return 2|n}function Ru(n){return(131068&n)>>2}function lw(n,e){return-131069&n|e<<2}function dw(n){return 1|n}function iP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Aa(s):Ru(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];_z(n[a],e)&&(u=!0,n[a+1]=r?dw(f):cw(f)),a=r?Aa(f):Ru(f)}u&&(n[t+1]=r?cw(s):dw(s))}function _z(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cl(n,e)>=0}function v_(n,e){return function As(n,e,t,r){const i=fe(),s=bt(),o=function ss(n){const e=Qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function fP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Mr()],o=function hP(n,e){return e>=n.expandoStartIndex}(n,t);(function _P(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Az(n,e,t,r){const i=function Lh(n){const e=Qe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=wf(t=hw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=hw(i,n,e,t,r),null===s){let u=function bz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ru(r))return n[Aa(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=hw(null,n,e,u[1],r),u=wf(u,e.attrs,r),function Sz(n,e,t,r){n[Aa(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function Rz(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=wf(r,n[s].hostAttrs,t);return wf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function gz(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Aa(o),u=Ru(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||cl(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const y=Aa(n[a+1]);n[r+1]=y_(y,a),0!==y&&(n[y+1]=lw(n[y+1],r)),n[a+1]=function fz(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=y_(a,0),0!==a&&(n[a+1]=lw(n[a+1],r)),a=r;else n[r+1]=y_(u,0),0===a?a=r:n[u+1]=lw(n[u+1],r),u=r;l&&(n[r+1]=cw(n[r+1])),iP(n,f,r,!0),iP(n,f,r,!1),function mz(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cl(s,e)>=0&&(t[r+1]=dw(t[r+1]))}(e,f,n,r,s),o=y_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ut&&Gr(i,o,e)&&function gP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function pz(n){return 1==(1&n)}(l)?mP(u,e,t,i,Ru(l),o):void 0;I_(f)||(I_(s)||function hz(n){return 2==(2&n)}(l)&&(s=mP(u,null,t,i,a,o)),function l$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ca.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ca.Important),n.setStyle(t,r,i,s))}}(r,o,ya(Mr(),t),i,s))}(s,s.data[Mr()],i,i[nt],n,i[o+1]=function xz(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=$e(Da(n)))),n}(e,t),r,o)}(n,e,null,!0),v_}function hw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=wf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function wf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),zi(n,o,!!t||e[++s]))}return void 0===n?null:n}function mP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,m=null===f;let y=t[i+1];y===ut&&(y=m?wt:void 0);let E=m?GI(y,r):f===r?y:void 0;if(l&&!I_(E)&&(E=GI(u,r)),I_(E)&&(a=E,o))return a;const b=n[i+1];i=o?Aa(b):Ru(b)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=GI(u,r))}return a}function I_(n){return void 0!==n}function we(n,e=""){const t=fe(),r=bt(),i=n+mt,s=r.firstCreatePass?Cl(r,i,1,e,null):r.data[i],o=yP(r,t,s,e,n);t[i]=o,Zc()&&Hm(r,t,o,s),rs(s,!1)}let yP=(n,e,t,r,i)=>(Cs(!0),function Um(n,e){return n.createText(e)}(e[nt],r));function E_(n){return fw("",n,""),E_}function fw(n,e,t){const r=fe(),i=function Al(n,e,t,r){return Gr(n,va(),t)?e+G(t)+r:ut}(r,n,e,t);return i!==ut&&function Oo(n,e,t){const r=ya(e,n);!function U0(n,e,t){n.setValue(e,t)}(n[nt],r,t)}(r,Mr(),i),fw}const Vl="en-US";let BP=Vl;function mw(n,e,t,r,i){if(n=We(n),Array.isArray(n))for(let s=0;s<n.length;s++)mw(n[s],e,t,r,i);else{const s=bt(),o=fe(),a=lr();let u=bu(n)?n:We(n.provide);const l=vS(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(bu(n)||!n.multi){const E=new wu(l,i,ye),b=yw(u,e,i?f:f+y,m);-1===b?(C(c(a,o),s,u),_w(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[b]=E,o[b]=E)}else{const E=yw(u,e,f+y,m),b=yw(u,e,f,f+y),k=b>=0&&t[b];if(i&&!k||!i&&!(E>=0&&t[E])){C(c(a,o),s,u);const W=function eq(n,e,t,r,i){const s=new wu(n,t,ye);return s.multi=[],s.index=e,s.componentProviders=0,dM(s,i,r&&!t),s}(i?X4:J4,t.length,i,r,l);!i&&k&&(t[b].providerFactory=W),_w(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),o.push(W)}else _w(s,n,E>-1?E:b,dM(t[i?b:E],l,!i&&r));!i&&r&&k&&t[b].componentProviders++}}}function _w(n,e,t,r){const i=bu(e),s=function B$(n){return!!n.useClass}(e);if(i||s){const u=(s?We(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function dM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function J4(n,e,t,r){return vw(this.multi,[])}function X4(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Hr(t,t[Me],this.providerFactory.index,r);s=a.slice(0,o),vw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],vw(i,s);return s}function vw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function bn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Y4(n,e,t){const r=bt();if(r.firstCreatePass){const i=di(n);mw(t,r.data,r.blueprint,i,!0),mw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Mu{}class hM{}class Iw extends Mu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vR(this);const i=Sr(e);this._bootstrapComponents=xo(i.bootstrap),this._r3Injector=NS(e,t,[{provide:Mu,useValue:this},{provide:r_,useValue:this.componentFactoryResolver},...r],$e(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ew extends hM{constructor(e){super(),this.moduleType=e}create(e){return new Iw(this.moduleType,e,[])}}class fM extends Mu{constructor(e){super(),this.componentFactoryResolver=new vR(this),this.instance=null;const t=new ml([...e.providers,{provide:Mu,useValue:this},{provide:r_,useValue:this.componentFactoryResolver}],e.parent||Qm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ww(n,e,t=null){return new fM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let rq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=gS(0,t.type),i=r.length>0?ww([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=He({token:n,providedIn:"environment",factory:()=>new n(ve(us))})}return n})();function pM(n){n.getStandaloneInjector=e=>e.get(rq).getOrCreateStandaloneInjector(n)}function EM(n,e,t,r,i,s){const o=e+t;return Gr(n,o,i)?function Xs(n,e,t){return n[e]=t}(n,o+1,s?r.call(s,i):r(i)):function Sf(n,e){const t=n[e];return t===ut?void 0:t}(n,o+1)}function bM(n,e,t){const r=n+mt,i=fe(),s=function Mi(n,e){return n[e]}(i,r);return function Rf(n,e){return n[Me].data[e].pure}(i,r)?EM(i,function dr(){const n=Qe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,s.transform,t,s):s.transform(t)}function Rq(n,e,t,r=!0){const i=e[Me];if(function n$(n,e,t,r){const i=cr+r,s=t.length;r>0&&(t[i-1][li]=e),r<s-cr?(e[li]=t[i],g0(t,cr+r,e)):(t.push(e),e[li]=null),e[ln]=t;const o=e[To];null!==o&&t!==o&&function r$(n,e){const t=n[Do];e[Vn]!==e[ln][ln][Vn]&&(n[Vc]=!0),null===t?n[Do]=[e]:t.push(e)}(o,e);const a=e[Si];null!==a&&a.insertView(n),e[tt]|=128}(i,e,n,t),r){const s=aE(t,n),o=e[nt],a=jm(o,n[es]);null!==a&&function XB(n,e,t,r,i,s){r[cn]=i,r[ir]=e,rf(n,r,t,1,i,s)}(i,n[ir],o,e,a,s)}}Symbol;let ko=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Nq}return n})();const Pq=ko,Mq=class extends Pq{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Sq(n,e,t,r){const i=e.tView,a=a_(n,i,t,4096&n[tt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[To]=n[e.index];const l=n[Si];return null!==l&&(a[Si]=l.createEmbeddedView(i)),JE(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new gf(i)}};function Nq(){return function A_(n,e){return 4&n.type?new Mq(e,n,Il(n,e)):null}(lr(),fe())}let Ss=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Lq}return n})();function Lq(){return function OM(n,e){let t;const r=e[n.index];return Rr(r)?t=r:(t=aR(r,e,null,n),e[n.index]=t,u_(e,t)),kM(t,e,n,r),new NM(t,n,e)}(lr(),fe())}const Uq=Ss,NM=class extends Uq{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Il(this._hostTNode,this._hostLView)}get injector(){return new fr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(el(e)){const t=Cu(e,this._hostLView),r=Ia(e);return new fr(t[Me].data[r+8],t)}return new fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-cr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Yh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,s=N.environmentInjector||N.ngModuleRef}const u=o?e:new mf(Tt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const k=(o?l:this.parentInjector).get(us,null);k&&(s=k)}Tt(u.componentType??{});const E=u.create(l,i,null,s);return this.insertImpl(E.hostView,a,false),E}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function SI(n){return Rr(n[ln])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[ln],f=new NM(l,l[ir],l[ln]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Rq(a,i,o,!r),e.attachToViewContainerRef(),g0(Dw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=$m(this._lContainer,t);r&&(Pm(Dw(this._lContainer),t),rE(r[Me],r))}detach(e){const t=this._adjustIndex(e,-1),r=$m(this._lContainer,t);return r&&null!=Pm(Dw(this._lContainer),t)?new gf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xM(n){return n[8]}function Dw(n){return n[8]||(n[8]=[])}let kM=function VM(n,e,t,r){if(n[es])return;let i;i=8&t.type?Gt(r):function Bq(n,e){const t=n[nt],r=t.createComment(""),i=jr(e,n);return Au(t,jm(t,i),r,function a$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[es]=i};const Vw=new Te("Application Initializer");let Fw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ve(Vw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Ef(s))t.push(s);else if(zR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Vo=new Te("LocaleId",{providedIn:"root",factory:()=>Ve(Vo,pt.Optional|pt.SkipSelf)||function _G(){return typeof $localize<"u"&&$localize.locale||Vl}()});let uN=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class IG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let cN=(()=>{class n{compileModuleSync(t){return new Ew(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=xo(Sr(t).declarations).reduce((o,a)=>{const u=Tt(a);return u&&o.push(new mf(u)),o},[]);return new IG(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fN=new Te(""),P_=new Te("");let jw,Bw=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jw||(function jG(n){jw=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{kt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ve(kt),ve($w),ve(P_))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),$w=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return jw?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ba=null;const pN=new Te("AllowMultipleToken"),Hw=new Te("PlatformDestroyListeners"),zw=new Te("appBootstrapListener");class mN{constructor(e,t){this.name=e,this.token=t}}function yN(n,e,t=[]){const r=`Platform: ${e}`,i=new Te(r);return(s=[])=>{let o=qw();if(!o||o.injector.get(pN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function qG(n){if(ba&&!ba.get(pN,!1))throw new M(400,!1);(function gN(){!function yI(n){Bc=n}(()=>{throw new M(600,!1)})})(),ba=n;const e=n.get(IN);(function _N(n){n.get(IS,null)?.forEach(t=>t())})(n)}(function vN(n=[],e){return qr.create({name:e,providers:[{provide:vE,useValue:"platform"},{provide:Hw,useValue:new Set([()=>ba=null])},...n]})}(a,r))}return function WG(n){const e=qw();if(!e)throw new M(401,!1);return e}()}}function qw(){return ba?.get(IN)??null}let IN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function ZG(n="zone.js",e){return"noop"===n?new Ej:"zone.js"===n?new kt(e):n}(r?.ngZone,function EN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function nq(n,e,t){return new Iw(n,e,t)}(t.moduleType,this.injector,function AN(n){return[{provide:kt,useFactory:n},{provide:cf,multi:!0,useFactory:()=>{const e=Ve(QG,{optional:!0});return()=>e.initialize()}},{provide:DN,useFactory:KG},{provide:FS,useFactory:LS}]}(()=>i)),o=s.injector.get(No,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{M_(this._modules,s),a.unsubscribe()})}),function wN(n,e,t){try{const r=t();return Ef(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Fw);return a.runInitializers(),a.donePromise.then(()=>(function $P(n){bi(n,"Expected localeId to be defined"),"string"==typeof n&&(BP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Vo,Vl)||Vl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=TN({},r);return function HG(n,e,t){const r=new Ew(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ul);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new M(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new M(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Hw,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ve(qr))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function TN(n,e){return Array.isArray(e)?e.reduce(TN,n):{...n,...e}}let Ul=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ve(DN),this.zoneIsStable=Ve(FS),this.componentTypes=[],this.components=[],this.isStable=Ve(uN).hasPendingTasks.pipe(ke(t=>t?O(!1):this.zoneIsStable),Ye(),ue()),this._injector=Ve(us)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof DS;if(!this._injector.get(Fw).done)throw!i&&function qs(n){const e=Tt(n)||Kn(n)||rr(n);return null!==e&&e.standalone}(t),new M(405,!1);let o;o=i?t:this._injector.get(r_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function zG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Mu),l=o.create(qr.NULL,[],r||o.selector,a),f=l.location.nativeElement,m=l.injector.get(fN,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),M_(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;M_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(zw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>M_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new M(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const DN=new Te("",{providedIn:"root",factory:()=>Ve(No).handleError.bind(void 0)});function KG(){const n=Ve(kt),e=Ve(No);return t=>n.runOutsideAngular(()=>e.handleError(t))}let QG=(()=>{class n{constructor(){this.zone=Ve(kt),this.applicationRef=Ve(Ul)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let N_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=JG}return n})();function JG(n){return function XG(n,e,t){if(ha(n)&&!t){const r=Pr(n.index,e);return new gf(r,r)}return 47&n.type?new gf(e[Vn],e):null}(lr(),fe(),16==(16&n))}class MN{constructor(){}supports(e){return h_(e)}create(e){return new s3(e)}}const i3=(n,e)=>e;class s3{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||i3}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<xN(r,i,s)?t:r,a=xN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){const E=y<s.length?s[y]:s[y]=0,b=E+y;f<=b&&b<l&&(s[y]=E+1)}s[o.previousIndex]=f-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!h_(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function MH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new o3(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new NN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class o3{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class a3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class NN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new a3,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function kN(){return new k_([new MN])}let k_=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:kN});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kN()),deps:[[n,new Nm,new Nr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new M(901,!1)}}return n})();const h3=yN(null,"core",[]);let f3=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Ul))};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({})}return n})();function Bl(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Yw=null;function Sa(){return Yw}class b3{}const ls=new Te("DocumentToken");let Jw=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ve(R3)},providedIn:"platform"})}return n})();const S3=new Te("Location Initialized");let R3=(()=>{class n extends Jw{constructor(){super(),this._doc=Ve(ls),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sa().getBaseHref(this._doc)}onPopState(t){const r=Sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Sa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Xw(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qN(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fo(n){return n&&"?"!==n[0]?"?"+n:n}let xu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ve(WN)},providedIn:"root"})}return n})();const GN=new Te("appBaseHref");let WN=(()=>{class n extends xu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ve(ls).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xw(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Fo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Fo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Jw),ve(GN,8))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P3=(()=>{class n extends xu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Xw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Fo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Fo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Jw),ve(GN,8))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),eT=(()=>{class n{constructor(t){this._subject=new Un,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function x3(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qN(ZN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fo(r))}normalize(t){return n.stripTrailingSlash(function N3(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ZN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Fo;static#t=this.joinWithSlash=Xw;static#n=this.stripTrailingSlash=qN;static#r=this.\u0275fac=function(r){return new(r||n)(ve(xu))};static#i=this.\u0275prov=He({token:n,factory:function(){return function M3(){return new eT(ve(xu))}()},providedIn:"root"})}return n})();function ZN(n){return n.replace(/\/index.html$/,"")}class IW{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sx=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new IW(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),ox(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ox(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Ss),ye(ko),ye(k_))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function ox(n,e){n.context.$implicit=e.item}class DW{createSubscription(e,t){return em(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){em(()=>e.unsubscribe())}}class AW{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const bW=new AW,SW=new DW;let cx=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ef(t))return bW;if(zR(t))return SW;throw function Ps(n,e){return new M(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(ye(N_,16))};static#t=this.\u0275pipe=nr({name:"async",type:n,pure:!1,standalone:!0})}return n})(),GW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({})}return n})();function W_(n){return"server"===n}let QW=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new YW(ve(ls),window)})}return n})();class YW{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function JW(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class w9 extends b3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _T extends w9{static makeCurrent(){!function A3(n){Yw||(Yw=n)}(new _T)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function T9(){return Vf=Vf||document.querySelector("base"),Vf?Vf.getAttribute("href"):null}();return null==t?null:function C9(n){Q_=Q_||document.createElement("a"),Q_.setAttribute("href",n);const e=Q_.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _W(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Q_,Vf=null,A9=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const yT=new Te("EventManagerPlugins");let mx=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ve(yT),ve(kt))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();class _x{constructor(e){this._doc=e}}const vT="ng-app-id";let yx=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=W_(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${vT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(vT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(vT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(ls),ve(Ym),ve(ES,8),ve(Ds))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const IT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ET=/%COMP%/g,P9=new Te("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ix(n,e){return e.map(t=>t.replace(ET,n))}let Ex=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=W_(a),this.defaultRenderer=new wT(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wn.ShadowDom&&(r={...r,encapsulation:Wn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Tx?i.applyToHost(t):i instanceof TT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Wn.Emulated:s=new Tx(u,l,r,this.appId,f,o,a,m);break;case Wn.ShadowDom:return new O9(u,l,t,r,o,a,this.nonce,m);default:s=new TT(u,l,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ve(mx),ve(yx),ve(Ym),ve(P9),ve(ls),ve(Ds),ve(kt),ve(ES))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();class wT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(IT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=IT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=IT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ca.DashCase|Ca.Important)?e.style.setProperty(t,r,i&Ca.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ca.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Sa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function wx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class O9 extends wT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ix(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class TT extends wT{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Ix(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Tx extends TT{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function M9(n){return"_ngcontent-%COMP%".replace(ET,n)}(l),this.hostAttr=function N9(n){return"_nghost-%COMP%".replace(ET,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let k9=(()=>{class n extends _x{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(ls))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const Cx=["alt","control","meta","shift"],V9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let L9=(()=>{class n extends _x{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sa().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Cx.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=V9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Cx.forEach(o=>{o!==i&&(0,F9[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ve(ls))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const j9=yN(h3,"browser",[{provide:Ds,useValue:"browser"},{provide:IS,useValue:function U9(){_T.makeCurrent()},multi:!0},{provide:ls,useFactory:function $9(){return function g$(n){lE=n}(document),document},deps:[]}]),H9=new Te(""),bx=[{provide:P_,useClass:class D9{addToWindow(e){qt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new M(5103,!1);return s},qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),qt.getAllAngularRootElements=()=>e.getAllRootElements(),qt.frameworkStabilizers||(qt.frameworkStabilizers=[]),qt.frameworkStabilizers.push(r=>{const i=qt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Sa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:fN,useClass:Bw,deps:[kt,$w,P_]},{provide:Bw,useClass:Bw,deps:[kt,$w,P_]}],Sx=[{provide:vE,useValue:"root"},{provide:No,useFactory:function B9(){return new No},deps:[]},{provide:yT,useClass:k9,multi:!0,deps:[ls,kt,Ds]},{provide:yT,useClass:L9,multi:!0,deps:[ls]},Ex,yx,mx,{provide:bS,useExisting:Ex},{provide:class XW{},useClass:A9,deps:[]},[]];let z9=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ym,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ve(H9,12))};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({providers:[...Sx,...bx],imports:[GW,f3]})}return n})(),Rx=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ve(ls))};static#t=this.\u0275prov=He({token:n,factory:function(r){let i=null;return i=r?new r:function G9(){return new Rx(ve(ls))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:J9}=Array,{getPrototypeOf:X9,prototype:e6,keys:t6}=Object;function xx(n){if(1===n.length){const e=n[0];if(J9(e))return{args:e,keys:null};if(function n6(n){return n&&"object"==typeof n&&X9(n)===e6}(e)){const t=t6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:r6}=Array;function Ox(n){return xe(e=>function i6(n,e){return r6(e)?n(...e):n(e)}(n,e))}function kx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function DT(...n){const e=On(n),t=vs(n),{args:r,keys:i}=xx(n);if(0===r.length)return T([],e);const s=new at(function s6(n,e,t=mn){return r=>{Vx(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)Vx(e,()=>{const l=T(n[u],e);let f=!1;l.subscribe(Re(r,m=>{s[u]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>kx(i,o):mn));return t?s.pipe(Ox(t)):s}function Vx(n,e,t){n?_n(t,n,e):e()}const Y_=Ce(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function AT(...n){return function o6(){return yr(1)}()(T(n,On(n)))}function Fx(n){return new at(e=>{xt(n()).subscribe(e)})}function Ff(n,e){const t=S(n)?n:()=>n,r=i=>i.error(t());return new at(e?i=>e.schedule(r,0,i):r)}function bT(){return te((n,e)=>{let t=null;n._refCount++;const r=Re(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lx extends at{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ce(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;const t=this.getSubject();e.add(this.source.subscribe(Re(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return bT()(this)}}function jl(n){return n<=0?()=>xn:te((e,t)=>{let r=0;e.subscribe(Re(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function J_(...n){const e=On(n);return te((t,r)=>{(e?AT(n,t,e):AT(n,t)).subscribe(r)})}function Ms(n,e){return te((t,r)=>{let i=0;t.subscribe(Re(r,s=>n.call(e,s,i++)&&r.next(s)))})}function X_(n){return te((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ux(n=a6){return te((e,t)=>{let r=!1;e.subscribe(Re(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function a6(){return new Y_}function Pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,s)=>n(i,s,r)):mn,jl(1),t?X_(e):Ux(()=>new Y_))}function Lf(n,e){return S(e)?en(n,e,1):en(n,1)}function xr(n,e,t){const r=S(n)||e||t?{next:n,error:e,complete:t}:n;return r?te((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Re(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):mn}function Ou(n){return te((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Re(t,void 0,void 0,o=>{s=xt(n(o,Ou(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ey(n,e){return te(function u6(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Re(o,f=>{const m=l++;u=a?n(u,f,m):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function ST(n){return n<=0?()=>xn:te((e,t)=>{let r=[];e.subscribe(Re(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function RT(n){return te((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const dt="primary",Uf=Symbol("RouteTitle");class h6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hl(n){return new h6(n)}function f6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ro(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Bx(n[i],e[i]))return!1;return!0}function Bx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function $x(n){return n.length>0?n[n.length-1]:null}function Ma(n){return function Y9(n){return!!n&&(n instanceof at||S(n.lift)&&S(n.subscribe))}(n)?n:Ef(n)?T(Promise.resolve(n)):O(n)}const g6={exact:function zx(n,e,t){if(!ku(n.segments,e.segments)||!ty(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!zx(n.children[r],e.children[r],t))return!1;return!0},subset:qx},jx={exact:function m6(n,e){return ro(n,e)},subset:function _6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Bx(n[t],e[t]))},ignored:()=>!0};function Hx(n,e,t){return g6[t.paths](n.root,e.root,t.matrixParams)&&jx[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qx(n,e,t){return Gx(n,e,e.segments,t)}function Gx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ku(i,t)||e.hasChildren()||!ty(i,t,r))}if(n.segments.length===t.length){if(!ku(n.segments,t)||!ty(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!qx(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ku(n.segments,i)&&ty(n.segments,i,r)&&n.children[dt])&&Gx(n.children[dt],e,s,r)}}function ty(n,e,t){return e.every((r,i)=>jx[t](n[i].parameters,r.parameters))}class zl{constructor(e=new Yt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return I6.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ny(this)}}class Bf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hl(this.parameters)),this._parameterMap}toString(){return Kx(this)}}function ku(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let $f=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return new PT},providedIn:"root"})}return n})();class PT{parse(e){const t=new M6(e);return new zl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jf(e.root,!0)}`,r=function T6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ry(t)}=${ry(i)}`).join("&"):`${ry(t)}=${ry(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function E6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const I6=new PT;function ny(n){return n.segments.map(e=>Kx(e)).join("/")}function jf(n,e){if(!n.hasChildren())return ny(n);if(e){const t=n.children[dt]?jf(n.children[dt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==dt&&r.push(`${i}:${jf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function v6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===dt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==dt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===dt?[jf(n.children[dt],!1)]:[`${i}:${jf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${ny(n)}/${t[0]}`:`${ny(n)}/(${t.join("//")})`}}function Wx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ry(n){return Wx(n).replace(/%3B/gi,";")}function MT(n){return Wx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iy(n){return decodeURIComponent(n)}function Zx(n){return iy(n.replace(/\+/g,"%20"))}function Kx(n){return`${MT(n.path)}${function w6(n){return Object.keys(n).map(e=>`;${MT(e)}=${MT(n[e])}`).join("")}(n.parameters)}`}const C6=/^[^\/()?;#]+/;function NT(n){const e=n.match(C6);return e?e[0]:""}const D6=/^[^\/()?;=#]+/,b6=/^[^=?&#]+/,R6=/^[^&#]+/;class M6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new Yt(e,t)),r}parseSegment(){const e=NT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new Bf(iy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function A6(n){const e=n.match(D6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=NT(this.remaining);i&&(r=i,this.capture(r))}e[iy(t)]=iy(r)}parseQueryParam(e){const t=function S6(n){const e=n.match(b6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function P6(n){const e=n.match(R6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Zx(t),s=Zx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=NT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new Yt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}}function Qx(n){return n.segments.length>0?new Yt([],{[dt]:n}):n}function Yx(n){const e={};for(const r of Object.keys(n.children)){const s=Yx(n.children[r]);if(r===dt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function N6(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function Vu(n){return n instanceof zl}function Jx(n){let e;const i=Qx(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new Yt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Xx(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return xT(i,i,i,t,r);const s=function O6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new t1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new t1(t,e,r)}(e);if(s.toRoot())return xT(i,i,new Yt([],{}),t,r);const o=function k6(n,e,t){if(n.isAbsolute)return new oy(e,!0,0);if(!t)return new oy(e,!1,NaN);if(null===t.parent)return new oy(t,!0,0);const r=sy(n.commands[0])?0:1;return function V6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new oy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?zf(o.segmentGroup,o.index,s.commands):n1(o.segmentGroup,o.index,s.commands);return xT(i,o.segmentGroup,a,t,r)}function sy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hf(n){return"object"==typeof n&&null!=n&&n.outlets}function xT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:e1(n,e,t);const a=Qx(Yx(o));return new zl(a,s,i)}function e1(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:e1(s,e,t)}),new Yt(n.segments,r)}class t1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sy(r[0]))throw new M(4003,!1);const i=r.find(Hf);if(i&&i!==$x(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class oy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function n1(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return zf(n,e,t);const r=function L6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Hf(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!i1(u,l,o))return s;r+=2}else{if(!i1(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Yt(n.segments.slice(0,r.pathIndex),{});return s.children[dt]=new Yt(n.segments.slice(r.pathIndex),n.children),zf(s,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?OT(n,e,t):r.match?zf(n,0,i):OT(n,e,t)}function zf(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function F6(n){return Hf(n[0])?n[0].outlets:{[dt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==dt)&&n.children[dt]&&1===n.numberOfChildren&&0===n.children[dt].segments.length){const s=zf(n.children[dt],e,t);return new Yt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=n1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Yt(n.segments,i)}}function OT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Hf(s)){const u=U6(s.outlets);return new Yt(r,u)}if(0===i&&sy(t[0])){r.push(new Bf(n.segments[e].path,r1(t[0]))),i++;continue}const o=Hf(s)?s.outlets[dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&sy(a)?(r.push(new Bf(o,r1(a))),i+=2):(r.push(new Bf(o,{})),i++)}return new Yt(r,{})}function U6(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=OT(new Yt([],{}),0,r))}),e}function r1(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function i1(n,e,t){return n==t.path&&ro(e,t.parameters)}const qf="imperative";class io{constructor(e,t){this.id=e,this.url=t}}class ay extends io{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Na extends io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gf extends io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ql extends io{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class uy extends io{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class s1 extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B6 extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $6 extends io{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class j6 extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H6 extends io{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class q6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class G6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kT{}class VT{constructor(e){this.url=e}}class Q6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wf,this.attachRef=null}}let Wf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Q6,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class a1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=FT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=FT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=LT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return LT(e,this._root).map(t=>t.value)}}function FT(n,e){if(n===e.value)return e;for(const t of e.children){const r=FT(n,t);if(r)return r}return null}function LT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=LT(n,t);if(r.length)return r.unshift(e),r}return[]}class Bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class u1 extends a1{constructor(e,t){super(e),this.snapshot=t,UT(this,e)}toString(){return this.snapshot.toString()}}function c1(n,e){const t=function Y6(n,e){const o=new cy([],{},{},"",{},dt,e,null,{});return new d1("",new Bo(o,[]))}(0,e),r=new w([new Bf("",{})]),i=new w({}),s=new w({}),o=new w({}),a=new w(""),u=new Wl(r,i,o,a,s,dt,e,t.root);return u.snapshot=t.root,new u1(new Bo(u,[]),t)}class Wl{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(xe(l=>l[Uf]))??O(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(e=>Hl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(e=>Hl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function J6(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cy{get title(){return this.data?.[Uf]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class d1 extends a1{constructor(e,t){super(t),this.url=e,UT(this,t)}toString(){return h1(this._root)}}function UT(n,e){e.value._routerState=n,e.children.forEach(t=>UT(n,t))}function h1(n){const e=n.children.length>0?` { ${n.children.map(h1).join(", ")} } `:"";return`${n.value}${e}`}function BT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ro(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ro(e.params,t.params)||n.paramsSubject.next(t.params),function p6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ro(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ro(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $T(n,e){const t=ro(n.params,e.params)&&function y6(n,e){return ku(n,e)&&n.every((t,r)=>ro(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||$T(n.parent,e.parent))}let jT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=dt,this.activateEvents=new Un,this.deactivateEvents=new Un,this.attachEvents=new Un,this.detachEvents=new Un,this.parentContexts=Ve(Wf),this.location=Ve(Ss),this.changeDetector=Ve(N_),this.environmentInjector=Ve(us),this.inputBinder=Ve(ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new X6(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]})}return n})();class X6{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wl?this.route:e===Wf?this.childContexts:this.parent.get(e,t)}}const ly=new Te("");let f1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=DT([r.queryParams,r.params,r.data]).pipe(ke(([s,o,a],u)=>(a={...s,...o,...a},0===u?O(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function D3(n){const e=Tt(n);if(!e)return null;const t=new mf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function Zf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function t5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zf(n,r,i);return Zf(n,r)})}(n,e,t);return new Bo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zf(n,a)),o}}const r=function n5(n){return new Wl(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Zf(n,s));return new Bo(r,i)}}const HT="ngNavigationCancelingError";function p1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=g1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function g1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[HT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function m1(n){return n&&n[HT]}let _1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["ng-component"]],standalone:!0,features:[pM],decls:1,vars:0,template:function(r,i){1&r&&ct(0,"router-outlet")},dependencies:[jT],encapsulation:2})}return n})();function zT(n){const e=n.children&&n.children.map(zT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=_1),t}function Ns(n){return n.outlet||dt}function Kf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class l5{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),BT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Gl(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Gl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Gl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Gl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new K6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new W6(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(BT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),BT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Kf(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class y1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dy{constructor(e,t){this.component=e,this.route=t}}function d5(n,e,t){const r=n._root;return Qf(r,e?e._root:null,t,[r.value])}function Zl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function cI(n){return null!==_c(n)}(n)?e.get(n):n:r}function Qf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Gl(e);return n.children.forEach(o=>{(function f5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function p5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ku(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ku(n.url,e.url)||!ro(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$T(n,e)||!ro(n.queryParams,e.queryParams);default:return!$T(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new y1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Qf(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dy(a.outlet.component,o))}else o&&Yf(e,a,i),i.canActivateChecks.push(new y1(r)),Qf(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yf(a,t.getContext(o),i)),i}function Yf(n,e,t){const r=Gl(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Yf(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new dy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Jf(n){return"function"==typeof n}function v1(n){return n instanceof Y_||"EmptyError"===n?.name}const hy=Symbol("INITIAL_VALUE");function Kl(){return ke(n=>DT(n.map(e=>e.pipe(jl(1),J_(hy)))).pipe(xe(e=>{for(const t of e)if(!0!==t){if(t===hy)return hy;if(!1===t||t instanceof zl)return t}return!0}),Ms(e=>e!==hy),jl(1)))}function I1(n){return function ii(...n){return si(n)}(xr(e=>{if(Vu(e))throw p1(0,e)}),xe(e=>!0===e))}class fy{constructor(e){this.segmentGroup=e||null}}class E1{constructor(e){this.urlTree=e}}function Ql(n){return Ff(new fy(n))}function w1(n){return Ff(new E1(n))}class O5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new M(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return O(r);if(i.numberOfChildren>1||!i.children[dt])return Ff(new M(4e3,!1));i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new zl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Yt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const qT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function k5(n,e,t,r,i){const s=GT(n,e,t);return s.matched?(r=function i5(n,e){return n.providers&&!n._injector&&(n._injector=ww(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function M5(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?O(i.map(o=>{const a=Zl(o,n);return Ma(function I5(n){return n&&Jf(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Kl(),I1()):O(!0)}(r,e,t).pipe(xe(o=>!0===o?s:{...qT}))):O(s)}function GT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||f6)(t,n,e);if(!i)return{...qT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function T1(n,e,t,r){return t.length>0&&function L5(n,e,t){return t.some(r=>py(n,e,r)&&Ns(r)!==dt)}(n,t,r)?{segmentGroup:new Yt(e,F5(r,new Yt(t,n.children))),slicedSegments:[]}:0===t.length&&function U5(n,e,t){return t.some(r=>py(n,e,r))}(n,t,r)?{segmentGroup:new Yt(n.segments,V5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Yt(n.segments,n.children),slicedSegments:t}}function V5(n,e,t,r,i){const s={};for(const o of r)if(py(n,t,o)&&!i[Ns(o)]){const a=new Yt([],{});s[Ns(o)]=a}return{...i,...s}}function F5(n,e){const t={};t[dt]=e;for(const r of n)if(""===r.path&&Ns(r)!==dt){const i=new Yt([],{});t[Ns(r)]=i}return t}function py(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class H5{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new O5(this.urlSerializer,this.urlTree)}noMatchError(e){return new M(4002,!1)}recognize(){const e=T1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,dt).pipe(Ou(t=>{if(t instanceof E1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof fy?this.noMatchError(t):t}),xe(t=>{const r=new cy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dt,this.rootComponentType,null,{}),i=new Bo(r,t),s=new d1("",i),o=function x6(n,e,t=null,r=null){return Xx(Jx(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,dt).pipe(Ou(r=>{throw r instanceof fy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=l1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return T(i).pipe(Lf(s=>{const o=r.children[s],a=function u5(n,e){const t=n.filter(r=>Ns(r)===e);return t.push(...n.filter(r=>Ns(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),ey((s,o)=>(s.push(...o),s)),X_(null),function c6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ms((i,s)=>n(i,s,r)):mn,ST(1),t?X_(e):Ux(()=>new Y_))}(),en(s=>{if(null===s)return Ql(r);const o=C1(s);return function z5(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),O(o)}))}processSegment(e,t,r,i,s,o){return T(t).pipe(Lf(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Ou(u=>{if(u instanceof fy)return O(null);throw u}))),Pa(a=>!!a),Ou(a=>{if(v1(a))return function $5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?O([]):Ql(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function B5(n,e,t,r){return!!(Ns(n)===r||r!==dt&&py(e,t,n))&&("**"===n.path||GT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ql(i):Ql(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?w1(s):this.applyRedirects.lineralizeSegments(r,s).pipe(en(o=>{const a=new Yt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=GT(t,i,s);if(!a)return Ql(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?w1(m):this.applyRedirects.lineralizeSegments(i,m).pipe(en(y=>this.processSegment(e,r,t,y.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?$x(i).parameters:{};a=O({snapshot:new cy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,D1(r),Ns(r),r.component??r._loadedComponent??null,r,A1(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=k5(t,r,i,e).pipe(xe(({matched:u,consumedSegments:l,remainingSegments:f,parameters:m})=>u?{snapshot:new cy(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,D1(r),Ns(r),r.component??r._loadedComponent??null,r,A1(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(ke(u=>null===u?Ql(t):this.getChildConfig(e=r._injector??e,r,i).pipe(ke(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:E}=u,{segmentGroup:b,slicedSegments:N}=T1(t,y,E,l);if(0===N.length&&b.hasChildren())return this.processChildren(f,l,b).pipe(xe(W=>null===W?null:[new Bo(m,W)]));if(0===l.length&&0===N.length)return O([new Bo(m,[])]);const k=Ns(r)===s;return this.processSegment(f,l,b,N,k?dt:s,!0).pipe(xe(W=>[new Bo(m,W)]))}))))}getChildConfig(e,t,r){return t.children?O({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?O({routes:t._loadedRoutes,injector:t._loadedInjector}):function P5(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?O(!0):O(i.map(o=>{const a=Zl(o,n);return Ma(function m5(n){return n&&Jf(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Kl(),I1())}(e,t,r).pipe(en(i=>i?this.configLoader.loadChildren(e,t).pipe(xr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function x5(n){return Ff(g1(!1,3))}())):O({routes:[],injector:e})}}function q5(n){const e=n.value.routeConfig;return e&&""===e.path}function C1(n){const e=[],t=new Set;for(const r of n){if(!q5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=C1(r.children);e.push(new Bo(r.value,i))}return e.filter(r=>!t.has(r))}function D1(n){return n.data||{}}function A1(n){return n.resolve||{}}function b1(n){return"string"==typeof n.title||null===n.title}function WT(n){return ke(e=>{const t=n(e);return t?T(t).pipe(xe(()=>e)):O(e)})}const Yl=new Te("ROUTES");let ZT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ve(cN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return O(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ma(t.loadComponent()).pipe(xe(S1),xr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),RT(()=>{this.componentLoaders.delete(t)})),i=new Lx(r,()=>new re).pipe(bT());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return O({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function J5(n,e,t,r){return Ma(n.loadChildren()).pipe(xe(S1),en(i=>i instanceof hM||Array.isArray(i)?O(i):T(e.compileModuleAsync(i))),xe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Yl,[],{optional:!0,self:!0}).flat()),{routes:o.map(zT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(RT(()=>{this.childrenLoaders.delete(r)})),o=new Lx(s,()=>new re).pipe(bT());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function S1(n){return function X5(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let gy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new re,this.transitionAbortSubject=new re,this.configLoader=Ve(ZT),this.environmentInjector=Ve(us),this.urlSerializer=Ve($f),this.rootContexts=Ve(Wf),this.inputBindingEnabled=null!==Ve(ly,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new q6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new z6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qf,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ms(s=>0!==s.id),xe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),ke(s=>{this.currentTransition=s;let o=!1,a=!1;return O(s).pipe(xr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ke(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new ql(u.id,this.urlSerializer.serialize(u.rawUrl),y,0)),u.resolve(null),xn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return O(u).pipe(ke(y=>{const E=this.transitions?.getValue();return this.events.next(new ay(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?xn:Promise.resolve(y)}),function G5(n,e,t,r,i,s){return en(o=>function j5(n,e,t,r,i,s,o="emptyOnly"){return new H5(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(xe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),xr(y=>{s.targetSnapshot=y.targetSnapshot,s.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const E=new s1(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:y,extractedUrl:E,source:b,restoredState:N,extras:k}=u,W=new ay(y,this.urlSerializer.serialize(E),b,N);this.events.next(W);const B=c1(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:B,urlAfterRedirects:E,extras:{...k,skipLocationChange:!1,replaceUrl:!1}},O(s)}{const y="";return this.events.next(new ql(u.id,this.urlSerializer.serialize(u.extractedUrl),y,1)),u.resolve(null),xn}}),xr(u=>{const l=new B6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),xe(u=>(this.currentTransition=s={...u,guards:d5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function w5(n,e){return en(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?O({...t,guardsResult:!0}):function T5(n,e,t,r){return T(n).pipe(en(i=>function R5(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?O(s.map(a=>{const u=Kf(e)??i,l=Zl(a,u);return Ma(function v5(n){return n&&Jf(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(Pa())})).pipe(Kl()):O(!0)}(i.component,i.route,t,e,r)),Pa(i=>!0!==i,!0))}(o,r,i,n).pipe(en(a=>a&&function g5(n){return"boolean"==typeof n}(a)?function C5(n,e,t,r){return T(e).pipe(Lf(i=>AT(function A5(n,e){return null!==n&&e&&e(new G6(n)),O(!0)}(i.route.parent,r),function D5(n,e){return null!==n&&e&&e(new Z6(n)),O(!0)}(i.route,r),function S5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function h5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Fx(()=>O(o.guards.map(u=>{const l=Kf(o.node)??t,f=Zl(u,l);return Ma(function y5(n){return n&&Jf(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Pa())})).pipe(Kl())));return O(s).pipe(Kl())}(n,i.path,t),function b5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return O(!0);const i=r.map(s=>Fx(()=>{const o=Kf(e)??t,a=Zl(s,o);return Ma(function _5(n){return n&&Jf(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Pa())}));return O(i).pipe(Kl())}(n,i.route,t))),Pa(i=>!0!==i,!0))}(r,s,n,e):O(a)),xe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),xr(u=>{if(s.guardsResult=u.guardsResult,Vu(u.guardsResult))throw p1(0,u.guardsResult);const l=new $6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ms(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),WT(u=>{if(u.guards.canActivateChecks.length)return O(u).pipe(xr(l=>{const f=new j6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ke(l=>{let f=!1;return O(l).pipe(function W5(n,e){return en(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return O(t);let s=0;return T(i).pipe(Lf(o=>function Z5(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!b1(i)&&(s[Uf]=i.title),function K5(n,e,t,r){const i=function Q5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return O({});const s={};return T(i).pipe(en(o=>function Y5(n,e,t,r){const i=Kf(e)??r,s=Zl(n,i);return Ma(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Pa(),xr(a=>{s[o]=a}))),ST(1),function l6(n){return xe(()=>n)}(s),Ou(o=>v1(o)?xn:Ff(o)))}(s,n,e,r).pipe(xe(o=>(n._resolvedData=o,n.data=l1(n,t).resolve,i&&b1(i)&&(n.data[Uf]=i.title),null)))}(o.route,r,n,e)),xr(()=>s++),ST(1),en(o=>s===i.length?O(t):xn))})}(t.paramsInheritanceStrategy,this.environmentInjector),xr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),xr(l=>{const f=new H6(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),WT(u=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(xr(y=>{f.component=y}),xe(()=>{})));for(const y of f.children)m.push(...l(y));return m};return DT(l(u.targetSnapshot.root)).pipe(X_(),jl(1))}),WT(()=>this.afterPreactivation()),xe(u=>{const l=function e5(n,e,t){const r=Zf(n,e._root,t?t._root:void 0);return new u1(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),xr(()=>{this.events.next(new kT)}),((n,e,t,r)=>xe(i=>(new l5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),jl(1),xr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Na(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function d6(n){return te((e,t)=>{xt(n).subscribe(Re(t,()=>t.complete(),Be)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(xr(u=>{throw u}))),RT(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ou(u=>{if(a=!0,m1(u))this.events.next(new Gf(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function r5(n){return m1(n)&&Vu(n.url)}(u)?this.events.next(new VT(u.url)):s.resolve(!1);else{this.events.next(new uy(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){s.reject(l)}}return xn}))}))}cancelNavigationTransition(t,r,i){const s=new Gf(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function R1(n){return n!==qf}let P1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===dt);return r}getResolvedTitleForRoute(t){return t.data[Uf]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ve(e8)},providedIn:"root"})}return n})(),e8=(()=>{class n extends P1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Rx))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ve(r8)},providedIn:"root"})}return n})();class n8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let r8=(()=>{class n extends n8{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=sr(n)))(i||n)}}();static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const my=new Te("",{providedIn:"root",factory:()=>({})});let i8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ve(s8)},providedIn:"root"})}return n})(),s8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Xf||{});function M1(n,e){n.events.pipe(Ms(t=>t instanceof Na||t instanceof Gf||t instanceof uy||t instanceof ql),xe(t=>t instanceof Na||t instanceof ql?Xf.COMPLETE:t instanceof Gf&&(0===t.code||1===t.code)?Xf.REDIRECTING:Xf.FAILED),Ms(t=>t!==Xf.REDIRECTING),jl(1)).subscribe(()=>{e()})}function o8(n){throw n}function a8(n,e,t){return e.parse("/")}const u8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fs=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ve(aN),this.isNgZoneEnabled=!1,this._events=new re,this.options=Ve(my,{optional:!0})||{},this.pendingTasks=Ve(uN),this.errorHandler=this.options.errorHandler||o8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||a8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ve(i8),this.routeReuseStrategy=Ve(t8),this.titleStrategy=Ve(P1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ve(Yl,{optional:!0})?.flat()??[],this.navigationTransitions=Ve(gy),this.urlSerializer=Ve($f),this.location=Ve(eT),this.componentInputBindingEnabled=!!Ve(ly,{optional:!0}),this.eventsSubscription=new Pt,this.isNgZoneEnabled=Ve(kt)instanceof kt&&kt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new zl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=c1(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(N1(r)&&this._events.next(r));if(r instanceof ay)R1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof ql)this.rawUrlTree=i.rawUrl;else if(r instanceof s1){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof kT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Gf)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof VT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||R1(i.source)};this.scheduleNavigation(s,qf,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof uy&&this.restoreHistory(i,!0),r instanceof Na&&(this.navigated=!0),N1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(zT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=Jx(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return Xx(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,qf,null,r)}navigate(t,r={skipLocationChange:!1}){return function l8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new M(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u8}:!1===r?{...c8}:r,Vu(t))return Hx(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Hx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return M1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N1(n){return!(n instanceof kT||n instanceof VT)}let _y=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new re,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Na&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function dS(n,e,t){return function F$(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?lS:cS}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ye(fs),ye(Wl),function wa(n){return function U(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Ac(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(lr(),n)}("tabindex"),ye(Mo),ye(qi),ye(xu))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Wr("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&eo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Bl],skipLocationChange:["skipLocationChange","skipLocationChange",Bl],replaceUrl:["replaceUrl","replaceUrl",Bl],routerLink:"routerLink"},standalone:!0,features:[DR,Pi]})}return n})();class x1{}let f8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ms(t=>t instanceof Na),Lf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ww(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return T(i).pipe(yr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):O(null);const s=i.pipe(en(o=>null===o?O(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?T([s,this.loader.loadComponent(r)]).pipe(yr()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ve(fs),ve(cN),ve(us),ve(x1),ve(ZT))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const KT=new Te("");let O1=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ay?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Na?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ql&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof o1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new o1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function JS(){throw new Error("invalid")}()};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function $o(n,e){return{\u0275kind:n,\u0275providers:e}}function V1(){const n=Ve(qr);return e=>{const t=n.get(Ul);if(e!==t.components[0])return;const r=n.get(fs),i=n.get(F1);1===n.get(QT)&&r.initialNavigation(),n.get(L1,null,pt.Optional)?.setUpPreloading(),n.get(KT,null,pt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const F1=new Te("",{factory:()=>new re}),QT=new Te("",{providedIn:"root",factory:()=>1}),L1=new Te("");function _8(n){return $o(0,[{provide:L1,useExisting:f8},{provide:x1,useExisting:n}])}const U1=new Te("ROUTER_FORROOT_GUARD"),v8=[eT,{provide:$f,useClass:PT},fs,Wf,{provide:Wl,useFactory:function k1(n){return n.routerState.root},deps:[fs]},ZT,[]];function I8(){return new mN("Router",fs)}let B1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[v8,[],{provide:Yl,multi:!0,useValue:t},{provide:U1,useFactory:C8,deps:[[fs,new Nr,new Nm]]},{provide:my,useValue:r||{}},r?.useHash?{provide:xu,useClass:P3}:{provide:xu,useClass:WN},{provide:KT,useFactory:()=>{const n=Ve(QW),e=Ve(kt),t=Ve(my),r=Ve(gy),i=Ve($f);return t.scrollOffset&&n.setOffset(t.scrollOffset),new O1(i,r,n,e,t)}},r?.preloadingStrategy?_8(r.preloadingStrategy).\u0275providers:[],{provide:mN,multi:!0,useFactory:I8},r?.initialNavigation?D8(r):[],r?.bindToComponentInputs?$o(8,[f1,{provide:ly,useExisting:f1}]).\u0275providers:[],[{provide:$1,useFactory:V1},{provide:zw,multi:!0,useExisting:$1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Yl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ve(U1,8))};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({})}return n})();function C8(n){return"guarded"}function D8(n){return["disabled"===n.initialNavigation?$o(3,[{provide:Vw,multi:!0,useFactory:()=>{const e=Ve(fs);return()=>{e.setUpLocationChangeListener()}}},{provide:QT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?$o(2,[{provide:QT,useValue:0},{provide:Vw,multi:!0,deps:[qr],useFactory:e=>{const t=e.get(S3,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(fs),s=e.get(F1);M1(i,()=>{r(!0)}),e.get(gy).afterPreactivation=()=>(r(!0),s.closed?O(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const $1=new Te("");let b8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-home"]],decls:45,vars:0,consts:[[1,"hero"],[1,"hero-overlay"],[1,"container"],[1,"features"],[1,"feature-list"],[1,"feature-item"],[1,"why-choose-us"],[1,"reasons-list"],[1,"reason-item"]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"div",1)(2,"h1"),we(3,"Welcome to Our Adult Family Home"),ie(),Ie(4,"p"),we(5,"Providing compassionate care and a loving environment"),ie()()(),Ie(6,"div",2)(7,"section",3)(8,"h2"),we(9,"Our Unique Features"),ie(),Ie(10,"div",4)(11,"div",5)(12,"h3"),we(13,"Feature 1"),ie(),Ie(14,"p"),we(15,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."),ie()(),Ie(16,"div",5)(17,"h3"),we(18,"Feature 2"),ie(),Ie(19,"p"),we(20,"Nullam non nisi est sit amet facilisis magna etiam tempor orci."),ie()(),Ie(21,"div",5)(22,"h3"),we(23,"Feature 3"),ie(),Ie(24,"p"),we(25,"Praesent elementum facilisis leo vel fringilla est ullamcorper."),ie()()()(),Ie(26,"section",6)(27,"h2"),we(28,"Why Choose Us"),ie(),Ie(29,"div",7)(30,"div",8)(31,"h3"),we(32,"Reason 1"),ie(),Ie(33,"p"),we(34,"Lorem ipsum dolor sit amet, consectetur adipiscing elit."),ie()(),Ie(35,"div",8)(36,"h3"),we(37,"Reason 2"),ie(),Ie(38,"p"),we(39,"Nullam non nisi est sit amet facilisis magna etiam tempor orci."),ie()(),Ie(40,"div",8)(41,"h3"),we(42,"Reason 3"),ie(),Ie(43,"p"),we(44,"Praesent elementum facilisis leo vel fringilla est ullamcorper."),ie()()()()())},styles:[".hero[_ngcontent-%COMP%]{position:relative;width:100%;height:50vh;background:url(https://plus.unsplash.com/premium_photo-1661274147223-116687829d26?q=80&w=2673&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D) no-repeat center center/cover}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#00000080;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin:0}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin:10px 0 0}.container[_ngcontent-%COMP%]{padding:40px 20px}.features[_ngcontent-%COMP%], .why-choose-us[_ngcontent-%COMP%]{margin:40px 0}.features[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .why-choose-us[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:20px}.feature-list[_ngcontent-%COMP%], .reasons-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around}.feature-item[_ngcontent-%COMP%], .reason-item[_ngcontent-%COMP%]{width:30%;margin-bottom:20px;text-align:center}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .reason-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:10px}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .reason-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}"]})}return n})(),S8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-about-us"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"h1"),we(2,"About Us"),ie(),Ie(3,"p"),we(4,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sit amet accumsan tortor."),ie()())}})}return n})(),R8=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-services"]],decls:11,vars:0,consts:[[1,"container"],["src","https://source.unsplash.com/random/800x602","alt","Services Image"]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"h1"),we(2,"Our Services"),ie(),Ie(3,"ul")(4,"li"),we(5,"Service 1: Lorem ipsum dolor sit amet, consectetur adipiscing elit."),ie(),Ie(6,"li"),we(7,"Service 2: Lorem ipsum dolor sit amet, consectetur adipiscing elit."),ie(),Ie(8,"li"),we(9,"Service 3: Lorem ipsum dolor sit amet, consectetur adipiscing elit."),ie()(),ct(10,"img",1),ie())}})}return n})(),j1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Mo),ye(qi))};static#t=this.\u0275dir=Ke({type:n})}return n})(),Fu=(()=>{class n extends j1{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=sr(n)))(i||n)}}();static#t=this.\u0275dir=Ke({type:n,features:[Qt]})}return n})();const so=new Te("NgValueAccessor"),N8={provide:so,useExisting:$t(()=>yy),multi:!0},O8=new Te("CompositionEventMode");let yy=(()=>{class n extends j1{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x8(){const n=Sa()?Sa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Mo),ye(qi),ye(O8,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Wr("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[bn([N8]),Qt]})}return n})();function xa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function z1(n){return null!=n&&"number"==typeof n.length}const Zr=new Te("NgValidators"),Oa=new Te("NgAsyncValidators"),k8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vt{static min(e){return function q1(n){return e=>{if(xa(e.value)||xa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function G1(n){return e=>{if(xa(e.value)||xa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return W1(e)}static requiredTrue(e){return function Z1(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function K1(n){return xa(n.value)||k8.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Q1(n){return e=>xa(e.value)||!z1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Y1(n){return e=>z1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function J1(n){if(!n)return vy;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(xa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return iO(e)}static composeAsync(e){return sO(e)}}function W1(n){return xa(n.value)?{required:!0}:null}function vy(n){return null}function X1(n){return null!=n}function eO(n){return Ef(n)?T(n):n}function tO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function nO(n,e){return e.map(t=>t(n))}function rO(n){return n.map(e=>function V8(n){return!n.validate}(e)?e:t=>e.validate(t))}function iO(n){if(!n)return null;const e=n.filter(X1);return 0==e.length?null:function(t){return tO(nO(t,e))}}function YT(n){return null!=n?iO(rO(n)):null}function sO(n){if(!n)return null;const e=n.filter(X1);return 0==e.length?null:function(t){return function P8(...n){const e=vs(n),{args:t,keys:r}=xx(n),i=new at(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let f=0;f<o;f++){let m=!1;xt(t[f]).subscribe(Re(s,y=>{m||(m=!0,l--),a[f]=y},()=>u--,void 0,()=>{(!u||!m)&&(l||s.next(r?kx(r,a):a),s.complete())}))}});return e?i.pipe(Ox(e)):i}(nO(t,e).map(eO)).pipe(xe(tO))}}function JT(n){return null!=n?sO(rO(n)):null}function oO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aO(n){return n._rawValidators}function uO(n){return n._rawAsyncValidators}function XT(n){return n?Array.isArray(n)?n:[n]:[]}function Iy(n,e){return Array.isArray(n)?n.includes(e):n===e}function cO(n,e){const t=XT(e);return XT(n).forEach(i=>{Iy(t,i)||t.push(i)}),t}function lO(n,e){return XT(e).filter(t=>!Iy(n,t))}class dO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gi extends dO{get formDirective(){return null}get path(){return null}}class ka extends dO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class hO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let fO=(()=>{class n extends hO{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ka,2))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&v_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Qt]})}return n})(),eC=(()=>{class n extends hO{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(gi,10))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&v_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Qt]})}return n})();const ep="VALID",wy="INVALID",Jl="PENDING",tp="DISABLED";function rC(n){return(Ty(n)?n.validators:n)||null}function iC(n,e){return(Ty(e)?e.asyncValidators:n)||null}function Ty(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function gO(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new M(1e3,"");if(!r[t])throw new M(1001,"")}function mO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new M(1002,"")})}class Cy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ep}get invalid(){return this.status===wy}get pending(){return this.status==Jl}get disabled(){return this.status===tp}get enabled(){return this.status!==tp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lO(e,this._rawAsyncValidators))}hasValidator(e){return Iy(this._rawValidators,e)}hasAsyncValidator(e){return Iy(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Jl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tp,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ep,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ep||this.status===Jl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tp:ep}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Jl,this._hasOwnPendingAsyncValidator=!0;const t=eO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Un,this.statusChanges=new Un}_calculateStatus(){return this._allControlsDisabled()?tp:this.errors?wy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jl)?Jl:this._anyControlsHaveStatus(wy)?wy:ep}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ty(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function B8(n){return Array.isArray(n)?YT(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function $8(n){return Array.isArray(n)?JT(n):n||null}(this._rawAsyncValidators)}}class np extends Cy{constructor(e,t,r){super(rC(t),iC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mO(this,0,e),Object.keys(e).forEach(r=>{gO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class _O extends np{}const Lu=new Te("CallSetDisabledState",{providedIn:"root",factory:()=>rp}),rp="always";function ip(n,e,t=rp){sC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function H8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&yO(n,e)})}(n,e),function q8(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function z8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&yO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function j8(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ay(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sy(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function by(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function sC(n,e){const t=aO(n);null!==e.validator?n.setValidators(oO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=uO(n);null!==e.asyncValidator?n.setAsyncValidators(oO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();by(e._rawValidators,i),by(e._rawAsyncValidators,i)}function Sy(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=aO(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=uO(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return by(e._rawValidators,r),by(e._rawAsyncValidators,r),t}function yO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vO(n,e){sC(n,e)}function IO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const Q8={provide:gi,useExisting:$t(()=>Ry)},sp=(()=>Promise.resolve())();let Ry=(()=>{class n extends gi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Un,this.form=new np({},YT(t),JT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sp.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ip(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sp.then(()=>{const r=this._findContainer(t.path),i=new np({});vO(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sp.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,IO(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Zr,10),ye(Oa,10),ye(Lu,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Wr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([Q8]),Qt]})}return n})();function EO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function wO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const op=class extends Cy{constructor(e=null,t,r){super(rC(t),iC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ty(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=wO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){wO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let cC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),SO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({})}return n})();const lC=new Te("NgModelWithFormControlWarning"),s7={provide:gi,useExisting:$t(()=>Py)};let Py=(()=>{class n extends gi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Un,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ip(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ay(t.control||null,t,!1),function K8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,IO(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ay(r||null,t),(n=>n instanceof op)(i)&&(ip(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vO(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function G8(n,e){return Sy(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sC(this.form,this),this._oldForm&&Sy(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Zr,10),ye(Oa,10),ye(Lu,8))};static#t=this.\u0275dir=Ke({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Wr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bn([s7]),Qt,Pi]})}return n})();const u7={provide:ka,useExisting:$t(()=>fC)};let fC=(()=>{class n extends ka{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Un,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function uC(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===yy?t=s:function Z8(n){return Object.getPrototypeOf(n.constructor)===Fu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function aC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Dy(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(ye(gi,13),ye(Zr,10),ye(Oa,10),ye(so,10),ye(lC,8))};static#n=this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[bn([u7]),Qt,Pi]})}return n})(),Uu=(()=>{class n{constructor(){this._validator=vy}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):vy,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ke({type:n,features:[Pi]})}return n})();const _7={provide:Zr,useExisting:$t(()=>My),multi:!0};let My=(()=>{class n extends Uu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bl,this.createValidator=t=>W1}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=sr(n)))(i||n)}}();static#t=this.\u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&eo("required",i._enabled?"":null)},inputs:{required:"required"},features:[bn([_7]),Qt]})}return n})(),zO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({imports:[SO]})}return n})();class qO extends Cy{constructor(e,t,r){super(rC(t),iC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mO(this,0,e),e.forEach((r,i)=>{gO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function GO(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let T7=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return GO(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new np(i,s)}record(t,r=null){const i=this._reduceControls(t);return new _O(i,r)}control(t,r,i){let s={};return this.useNonNullable?(GO(r)?s=r:(s.validators=r,s.asyncValidators=i),new op(t,{...s,nonNullable:!0})):new op(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new qO(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof op||t instanceof Cy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lu,useValue:t.callSetDisabledState??rp}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({imports:[zO]})}return n})(),D7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Lu,useValue:t.callSetDisabledState??rp}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({imports:[zO]})}return n})(),A7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-contact-us"]],decls:20,vars:0,consts:[[1,"container"],["for","name"],["type","text","id","name","name","name"],["for","email"],["type","email","id","email","name","email"],["for","message"],["id","message","name","message"],["type","submit"]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"h1"),we(2,"Contact Us"),ie(),Ie(3,"p"),we(4,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sit amet accumsan tortor."),ie(),Ie(5,"form")(6,"div")(7,"label",1),we(8,"Name:"),ie(),ct(9,"input",2),ie(),Ie(10,"div")(11,"label",3),we(12,"Email:"),ie(),ct(13,"input",4),ie(),Ie(14,"div")(15,"label",5),we(16,"Message:"),ie(),ct(17,"textarea",6),ie(),Ie(18,"button",7),we(19,"Submit"),ie()()())},dependencies:[cC,eC,Ry]})}return n})();var $n=Ge(534);(0,$n.registerVersion)("firebase","10.12.2","app");class R7 extends Pt{constructor(e,t){super()}schedule(e,t=0){return this}}const Ny={setInterval(n,e,...t){const{delegate:r}=Ny;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ny;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class WO extends R7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Ny.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Ny.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ue(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const mC={now:()=>(mC.delegate||Date).now(),delegate:void 0};class ap{constructor(e,t=ap.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}ap.now=mC.now;class ZO extends ap{constructor(e,t=ap.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const N7=new class M7 extends ZO{}(class P7 extends WO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),_C=new ZO(WO),jo=new El("ANGULARFIRE2_VERSION");function yC(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const xy=(n,e)=>{const t=e?[e]:(0,$n.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class up{constructor(){return xy(x7)}}const x7="app-check";function Xl(){}class KO{zone;delegate;constructor(e,t=N7){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class O7{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xl,{},Xl,Xl)),t.pipe(xr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ed=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new KO(Zone.current)),this.insideAngular=t.run(()=>new KO(Zone.current,_C)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ve(kt))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function td(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Bu(n){return td().ngZone.run(()=>n())}function QO(n){return n.pipe(yn(td().outsideAngular))}function mi(n){return function V7(n){return function(t){return(t=t.lift(new O7(n.ngZone))).pipe(vr(n.outsideAngular),yn(n.insideAngular))}}(td())(n)}const F7=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Bu(()=>n.apply(void 0,r))},vC=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=Bu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xl,{},Xl,Xl))),r[s]=F7(r[s],t));const i=function k7(n){return td().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof at){const s=td();return i.pipe(vr(s.outsideAngular),yn(s.insideAngular))}return Bu(()=>i)}return i instanceof at?i.pipe(mi):i instanceof Promise?Bu(()=>new Promise((s,o)=>i.then(a=>Bu(()=>s(a)),a=>Bu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Bu(()=>i)};var xs=Ge(106);xs.Z.registerVersion("firebase","10.12.2","app-compat");const B7=["ngOnDestroy"];class YO{constructor(e){return e}}const cp=new Te("angularfire2.app.options"),lp=new Te("angularfire2.app.name");function Oy(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=xs.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>xs.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;H7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new YO(o)}const H7=(n,...e)=>{},z7={provide:YO,useFactory:Oy,deps:[cp,kt,[new Nr,lp]]};let q7=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:cp,useValue:t},{provide:lp,useValue:r}]}}constructor(t){xs.Z.registerVersion("angularfire",jo.full,"core"),xs.Z.registerVersion("angularfire",jo.full,"app-compat"),xs.Z.registerVersion("angular",xE.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ve(Ds))};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[z7]})}return n})();function IC(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function G7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(JO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${W7?" You may need to reload as Firebase is not HMR aware.":""}`),JO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const W7=typeof module<"u"&&!!module.hot,JO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ge(365);class Z7 extends re{constructor(e=1/0,t=1/0,r=mC){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function XO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,ue({connector:()=>new Z7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ek(n,e){return S(e)?ke(()=>n,e):ke(()=>n)}const tk=new Te("angularfire2.auth.use-emulator"),nk=new Te("angularfire2.auth.settings"),rk=new Te("angularfire2.auth.tenant-id"),ik=new Te("angularfire2.auth.langugage-code"),sk=new Te("angularfire2.auth.use-device-language"),ok=new Te("angularfire.auth.persistence"),ak=(n,e,t,r,i,s,o,a)=>IC(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let EC=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,f,m,y,E){const b=new re,N=O(void 0).pipe(yn(o.outsideAngular),ke(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ge.bind(Ge,365)))),xe(()=>Oy(t,s,r)),xe(k=>ak(k,s,a,l,f,m,u,y)),XO({bufferSize:1,refCount:!1}));if(W_(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=O(null);else{N.pipe(Pa()).subscribe();const k=N.pipe(ke(K=>K.getRedirectResult().then(ae=>ae,()=>null)),mi,XO({bufferSize:1,refCount:!1})),W=N.pipe(ke(K=>new at(ae=>({unsubscribe:s.runOutsideAngular(()=>K.onAuthStateChanged(Ee=>ae.next(Ee),Ee=>ae.error(Ee),()=>ae.complete()))})))),B=N.pipe(ke(K=>new at(ae=>({unsubscribe:s.runOutsideAngular(()=>K.onIdTokenChanged(Ee=>ae.next(Ee),Ee=>ae.error(Ee),()=>ae.complete()))}))));this.authState=k.pipe(ek(W),vr(o.outsideAngular),yn(o.insideAngular)),this.user=k.pipe(ek(B),vr(o.outsideAngular),yn(o.insideAngular)),this.idToken=this.user.pipe(ke(K=>K?T(K.getIdToken()):O(null))),this.idTokenResult=this.user.pipe(ke(K=>K?T(K.getIdTokenResult()):O(null))),this.credential=A(k,b,this.authState.pipe(Ms(K=>!K))).pipe(xe(K=>K?.user?K:null),vr(o.outsideAngular),yn(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(B7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,m),m})})})}))(this,N,s,{spy:{apply:(k,W,B)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&B.then(K=>b.next(K))}}})}static \u0275fac=function(r){return new(r||n)(ve(cp),ve(lp,8),ve(Ds),ve(kt),ve(ed),ve(tk,8),ve(nk,8),ve(rk,8),ve(ik,8),ve(sk,8),ve(ok,8),ve(up,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Q7=(()=>{class n{constructor(){xs.Z.registerVersion("angularfire",jo.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[EC]})}return n})();function wC(){return te((n,e)=>{let t,r=!1;n.subscribe(Re(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var $u,lk,oe=Ge(861),ky=Ge(537),oo=Ge(879),lt=Ge(58),uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ck={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i($,R,F){F||(F=0);var j=Array(16);if("string"==typeof R)for(var z=0;16>z;++z)j[z]=R.charCodeAt(F++)|R.charCodeAt(F++)<<8|R.charCodeAt(F++)<<16|R.charCodeAt(F++)<<24;else for(z=0;16>z;++z)j[z]=R[F++]|R[F++]<<8|R[F++]<<16|R[F++]<<24;var Y=$.g[3],L=(R=$.g[0])+(Y^(F=$.g[1])&((z=$.g[2])^Y))+j[0]+3614090360&4294967295;L=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=(F=(z=(Y=(R=F+(L<<7&4294967295|L>>>25))+((L=Y+(z^R&(F^z))+j[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=z+(F^Y&(R^F))+j[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^z&(Y^R))+j[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=R+(Y^F&(z^Y))+j[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=Y+(z^R&(F^z))+j[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=z+(F^Y&(R^F))+j[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^z&(Y^R))+j[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=R+(Y^F&(z^Y))+j[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=Y+(z^R&(F^z))+j[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=z+(F^Y&(R^F))+j[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^z&(Y^R))+j[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=R+(Y^F&(z^Y))+j[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=Y+(z^R&(F^z))+j[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=z+(F^Y&(R^F))+j[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=F+(R^z&(Y^R))+j[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=R+(z^Y&(F^z))+j[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=Y+(F^z&(R^F))+j[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=z+(R^F&(Y^R))+j[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=F+(Y^R&(z^Y))+j[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=R+(z^Y&(F^z))+j[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=Y+(F^z&(R^F))+j[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=z+(R^F&(Y^R))+j[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=F+(Y^R&(z^Y))+j[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=R+(z^Y&(F^z))+j[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=Y+(F^z&(R^F))+j[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=z+(R^F&(Y^R))+j[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=F+(Y^R&(z^Y))+j[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=R+(z^Y&(F^z))+j[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=Y+(F^z&(R^F))+j[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=z+(R^F&(Y^R))+j[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=F+(Y^R&(z^Y))+j[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=R+(F^z^Y)+j[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=Y+(R^F^z)+j[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=z+(Y^R^F)+j[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=F+(z^Y^R)+j[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^z^Y)+j[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=Y+(R^F^z)+j[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=z+(Y^R^F)+j[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=F+(z^Y^R)+j[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^z^Y)+j[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=Y+(R^F^z)+j[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=z+(Y^R^F)+j[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=F+(z^Y^R)+j[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=R+(F^z^Y)+j[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=Y+(R^F^z)+j[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=z+(Y^R^F)+j[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=F+(z^Y^R)+j[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=R+(z^(F|~Y))+j[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=Y+(F^(R|~z))+j[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=z+(R^(Y|~F))+j[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=F+(Y^(z|~R))+j[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=R+(z^(F|~Y))+j[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=Y+(F^(R|~z))+j[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=z+(R^(Y|~F))+j[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=F+(Y^(z|~R))+j[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=R+(z^(F|~Y))+j[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=Y+(F^(R|~z))+j[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=z+(R^(Y|~F))+j[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=F+(Y^(z|~R))+j[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((Y=(R=F+((L=R+(z^(F|~Y))+j[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=Y+(F^(R|~z))+j[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((z=Y+((L=z+(R^(Y|~F))+j[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~R))+j[9]+3951481745&4294967295,$.g[0]=$.g[0]+R&4294967295,$.g[1]=$.g[1]+(z+(L<<21&4294967295|L>>>11))&4294967295,$.g[2]=$.g[2]+z&4294967295,$.g[3]=$.g[3]+Y&4294967295}function o($,R){this.h=R;for(var F=[],j=!0,z=$.length-1;0<=z;z--){var Y=0|$[z];j&&Y==R||(F[z]=Y,j=!1)}this.g=F}(function e($,R){function F(){}F.prototype=R.prototype,$.D=R.prototype,$.prototype=new F,$.prototype.constructor=$,$.C=function(j,z,Y){for(var L=Array(arguments.length-2),ta=2;ta<arguments.length;ta++)L[ta-2]=arguments[ta];return R.prototype[z].apply(j,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function($,R){void 0===R&&(R=$.length);for(var F=R-this.blockSize,j=this.B,z=this.h,Y=0;Y<R;){if(0==z)for(;Y<=F;)i(this,$,Y),Y+=this.blockSize;if("string"==typeof $){for(;Y<R;)if(j[z++]=$.charCodeAt(Y++),z==this.blockSize){i(this,j),z=0;break}}else for(;Y<R;)if(j[z++]=$[Y++],z==this.blockSize){i(this,j),z=0;break}}this.h=z,this.o+=R},r.prototype.v=function(){var $=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);$[0]=128;for(var R=1;R<$.length-8;++R)$[R]=0;var F=8*this.o;for(R=$.length-8;R<$.length;++R)$[R]=255&F,F/=256;for(this.u($),$=Array(16),R=F=0;4>R;++R)for(var j=0;32>j;j+=8)$[F++]=this.g[R]>>>j&255;return $};var a={};function u($){return-128<=$&&128>$?function s($,R){var F=a;return Object.prototype.hasOwnProperty.call(F,$)?F[$]:F[$]=R($)}($,function(R){return new o([0|R],0>R?-1:0)}):new o([0|$],0>$?-1:0)}function l($){if(isNaN($)||!isFinite($))return m;if(0>$)return k(l(-$));for(var R=[],F=1,j=0;$>=F;j++)R[j]=$/F|0,F*=4294967296;return new o(R,0)}var m=u(0),y=u(1),E=u(16777216);function b($){if(0!=$.h)return!1;for(var R=0;R<$.g.length;R++)if(0!=$.g[R])return!1;return!0}function N($){return-1==$.h}function k($){for(var R=$.g.length,F=[],j=0;j<R;j++)F[j]=~$.g[j];return new o(F,~$.h).add(y)}function W($,R){return $.add(k(R))}function B($,R){for(;(65535&$[R])!=$[R];)$[R+1]+=$[R]>>>16,$[R]&=65535,R++}function K($,R){this.g=$,this.h=R}function ae($,R){if(b(R))throw Error("division by zero");if(b($))return new K(m,m);if(N($))return R=ae(k($),R),new K(k(R.g),k(R.h));if(N(R))return R=ae($,k(R)),new K(k(R.g),R.h);if(30<$.g.length){if(N($)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var F=y,j=R;0>=j.l($);)F=Ee(F),j=Ee(j);var z=Le(F,1),Y=Le(j,1);for(j=Le(j,2),F=Le(F,2);!b(j);){var L=Y.add(j);0>=L.l($)&&(z=z.add(F),Y=L),j=Le(j,1),F=Le(F,1)}return R=W($,z.j(R)),new K(z,R)}for(z=m;0<=$.l(R);){for(F=Math.max(1,Math.floor($.m()/R.m())),j=48>=(j=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,j-48),L=(Y=l(F)).j(R);N(L)||0<L.l($);)L=(Y=l(F-=j)).j(R);b(Y)&&(Y=y),z=z.add(Y),$=W($,L)}return new K(z,$)}function Ee($){for(var R=$.g.length+1,F=[],j=0;j<R;j++)F[j]=$.i(j)<<1|$.i(j-1)>>>31;return new o(F,$.h)}function Le($,R){var F=R>>5;R%=32;for(var j=$.g.length-F,z=[],Y=0;Y<j;Y++)z[Y]=0<R?$.i(Y+F)>>>R|$.i(Y+F+1)<<32-R:$.i(Y+F);return new o(z,$.h)}(n=o.prototype).m=function(){if(N(this))return-k(this).m();for(var $=0,R=1,F=0;F<this.g.length;F++){var j=this.i(F);$+=(0<=j?j:4294967296+j)*R,R*=4294967296}return $},n.toString=function($){if(2>($=$||10)||36<$)throw Error("radix out of range: "+$);if(b(this))return"0";if(N(this))return"-"+k(this).toString($);for(var R=l(Math.pow($,6)),F=this,j="";;){var z=ae(F,R).g,Y=((0<(F=W(F,z.j(R))).g.length?F.g[0]:F.h)>>>0).toString($);if(b(F=z))return Y+j;for(;6>Y.length;)Y="0"+Y;j=Y+j}},n.i=function($){return 0>$?0:$<this.g.length?this.g[$]:this.h},n.l=function($){return N($=W(this,$))?-1:b($)?0:1},n.abs=function(){return N(this)?k(this):this},n.add=function($){for(var R=Math.max(this.g.length,$.g.length),F=[],j=0,z=0;z<=R;z++){var Y=j+(65535&this.i(z))+(65535&$.i(z)),L=(Y>>>16)+(this.i(z)>>>16)+($.i(z)>>>16);j=L>>>16,F[z]=(L&=65535)<<16|(Y&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function($){if(b(this)||b($))return m;if(N(this))return N($)?k(this).j(k($)):k(k(this).j($));if(N($))return k(this.j(k($)));if(0>this.l(E)&&0>$.l(E))return l(this.m()*$.m());for(var R=this.g.length+$.g.length,F=[],j=0;j<2*R;j++)F[j]=0;for(j=0;j<this.g.length;j++)for(var z=0;z<$.g.length;z++){var Y=this.i(j)>>>16,L=65535&this.i(j),ta=$.i(z)>>>16,ig=65535&$.i(z);F[2*j+2*z]+=L*ig,B(F,2*j+2*z),F[2*j+2*z+1]+=Y*ig,B(F,2*j+2*z+1),F[2*j+2*z+1]+=L*ta,B(F,2*j+2*z+1),F[2*j+2*z+2]+=Y*ta,B(F,2*j+2*z+2)}for(j=0;j<R;j++)F[j]=F[2*j+1]<<16|F[2*j];for(j=R;j<2*R;j++)F[j]=0;return new o(F,0)},n.A=function($){return ae(this,$).h},n.and=function($){for(var R=Math.max(this.g.length,$.g.length),F=[],j=0;j<R;j++)F[j]=this.i(j)&$.i(j);return new o(F,this.h&$.h)},n.or=function($){for(var R=Math.max(this.g.length,$.g.length),F=[],j=0;j<R;j++)F[j]=this.i(j)|$.i(j);return new o(F,this.h|$.h)},n.xor=function($){for(var R=Math.max(this.g.length,$.g.length),F=[],j=0;j<R;j++)F[j]=this.i(j)^$.i(j);return new o(F,this.h^$.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lk=ck.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function f($,R){if(0==$.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==$.charAt(0))return k(f($.substring(1),R));if(0<=$.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=l(Math.pow(R,8)),j=m,z=0;z<$.length;z+=8){var Y=Math.min(8,$.length-z),L=parseInt($.substring(z,z+Y),R);8>Y?(Y=l(Math.pow(R,Y)),j=j.j(Y).add(l(L))):j=(j=j.j(F)).add(l(L))}return j},$u=ck.Integer=o}).apply(typeof uk<"u"?uk:typeof self<"u"?self:typeof window<"u"?window:{});var dk,hk,dp,fk,Fy,TC,pk,gk,mk,Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vy&&Vy];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var q=h[D];if(!(q in I))break e;I=I[q]}(_=_(D=I[h=h[h.length-1]]))!=D&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,D=!1,q={next:function(){if(!D&&I<h.length){var ne=I++;return{value:_(ne,h[ne]),done:!1}}return D=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,D),h.apply(_,q)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var D=I.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function b(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(D,q,ne){for(var Ae=Array(arguments.length-2),an=2;an<arguments.length;an++)Ae[an-2]=arguments[an];return _.prototype[q].apply(D,Ae)}}function N(h){const _=h.length;if(0<_){const I=Array(_);for(let D=0;D<_;D++)I[D]=h[D];return I}return[]}function k(h,_){for(let I=1;I<arguments.length;I++){const D=arguments[I];if(u(D)){const q=h.length||0,ne=D.length||0;h.length=q+ne;for(let Ae=0;Ae<ne;Ae++)h[q+Ae]=D[Ae]}else h.push(D)}}function B(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var Ee=!(-1==K().indexOf("Gecko")||-1!=K().toLowerCase().indexOf("webkit")&&-1==K().indexOf("Edge")||-1!=K().indexOf("Trident")||-1!=K().indexOf("MSIE")||-1!=K().indexOf("Edge"));function Le(h,_,I){for(const D in h)_.call(I,h[D],D,h)}function R(h){const _={};for(const I in h)_[I]=h[I];return _}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,_){let I,D;for(let q=1;q<arguments.length;q++){for(I in D=arguments[q],D)h[I]=D[I];for(let ne=0;ne<F.length;ne++)I=F[ne],Object.prototype.hasOwnProperty.call(D,I)&&(h[I]=D[I])}}function z(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function Y(h){a.setTimeout(()=>{throw h},0)}function L(){var h=pb;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var ig=new class W{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Wee,h=>h.reset());class Wee{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let sg,og=!1,pb=new class ta{constructor(){this.h=this.g=null}add(_,I){const D=ig.get();D.set(_,I),this.h?this.h.next=D:this.g=D,this.h=D}},nU=()=>{const h=a.Promise.resolve(void 0);sg=()=>{h.then(Zee)}};var Zee=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(I){Y(I)}var _=ig;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}og=!1};function tu(){this.s=this.s,this.C=this.C}function ei(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}tu.prototype.s=!1,tu.prototype.ma=function(){this.s||(this.s=!0,this.N())},tu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ei.prototype.h=function(){this.defaultPrevented=!0};var Kee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function ag(h,_){if(ei.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ee){e:{try{ae(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Qee[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ag.aa.h.call(this)}}b(ag,ei);var Qee={2:"touch",3:"pen",4:"mouse"};ag.prototype.h=function(){ag.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ug="closure_listenable_"+(1e6*Math.random()|0),Yee=0;function Jee(h,_,I,D,q){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!D,this.ha=q,this.key=++Yee,this.da=this.fa=!1}function zv(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qv(h){this.src=h,this.g={},this.h=0}function gb(h,_){var I=_.type;if(I in h.g){var ne,D=h.g[I],q=Array.prototype.indexOf.call(D,_,void 0);(ne=0<=q)&&Array.prototype.splice.call(D,q,1),ne&&(zv(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function mb(h,_,I,D){for(var q=0;q<h.length;++q){var ne=h[q];if(!ne.da&&ne.listener==_&&ne.capture==!!I&&ne.ha==D)return q}return-1}qv.prototype.add=function(h,_,I,D,q){var ne=h.toString();(h=this.g[ne])||(h=this.g[ne]=[],this.h++);var Ae=mb(h,_,D,q);return-1<Ae?(_=h[Ae],I||(_.fa=!1)):((_=new Jee(_,this.src,ne,!!D,q)).fa=I,h.push(_)),_};var _b="closure_lm_"+(1e6*Math.random()|0),yb={};function rU(h,_,I,D,q){if(D&&D.once)return sU(h,_,I,D,q);if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)rU(h,_[ne],I,D,q);return null}return I=wb(I),h&&h[ug]?h.K(_,I,l(D)?!!D.capture:!!D,q):iU(h,_,I,!1,D,q)}function iU(h,_,I,D,q,ne){if(!_)throw Error("Invalid event type");var Ae=l(q)?!!q.capture:!!q,an=Ib(h);if(an||(h[_b]=an=new qv(h)),(I=an.add(_,I,D,Ae,ne)).proxy)return I;if(D=function Xee(){const _=ete;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=D,D.src=h,D.listener=I,h.addEventListener)Kee||(q=Ae),void 0===q&&(q=!1),h.addEventListener(_.toString(),D,q);else if(h.attachEvent)h.attachEvent(aU(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return I}function sU(h,_,I,D,q){if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)sU(h,_[ne],I,D,q);return null}return I=wb(I),h&&h[ug]?h.L(_,I,l(D)?!!D.capture:!!D,q):iU(h,_,I,!0,D,q)}function oU(h,_,I,D,q){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)oU(h,_[ne],I,D,q);else D=l(D)?!!D.capture:!!D,I=wb(I),h&&h[ug]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=mb(ne=h.g[_],I,D,q))&&(zv(ne[I]),Array.prototype.splice.call(ne,I,1),0==ne.length&&(delete h.g[_],h.h--))):h&&(h=Ib(h))&&(_=h.g[_.toString()],h=-1,_&&(h=mb(_,I,D,q)),(I=-1<h?_[h]:null)&&vb(I))}function vb(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[ug])gb(_.i,h);else{var I=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(I,D,h.capture):_.detachEvent?_.detachEvent(aU(I),D):_.addListener&&_.removeListener&&_.removeListener(D),(I=Ib(_))?(gb(I,h),0==I.h&&(I.src=null,_[_b]=null)):zv(h)}}}function aU(h){return h in yb?yb[h]:yb[h]="on"+h}function ete(h,_){if(h.da)h=!0;else{_=new ag(_,this);var I=h.listener,D=h.ha||h.src;h.fa&&vb(h),h=I.call(D,_)}return h}function Ib(h){return(h=h[_b])instanceof qv?h:null}var Eb="__closure_events_fn_"+(1e9*Math.random()>>>0);function wb(h){return"function"==typeof h?h:(h[Eb]||(h[Eb]=function(_){return h.handleEvent(_)}),h[Eb])}function ti(){tu.call(this),this.i=new qv(this),this.M=this,this.F=null}function Ei(h,_){var I,D=h.F;if(D)for(I=[];D;D=D.F)I.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new ei(_,h);else if(_ instanceof ei)_.target=_.target||h;else{var q=_;j(_=new ei(D,h),q)}if(q=!0,I)for(var ne=I.length-1;0<=ne;ne--){var Ae=_.g=I[ne];q=Gv(Ae,D,!0,_)&&q}if(q=Gv(Ae=_.g=h,D,!0,_)&&q,q=Gv(Ae,D,!1,_)&&q,I)for(ne=0;ne<I.length;ne++)q=Gv(Ae=_.g=I[ne],D,!1,_)&&q}function Gv(h,_,I,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var q=!0,ne=0;ne<_.length;++ne){var Ae=_[ne];if(Ae&&!Ae.da&&Ae.capture==I){var an=Ae.listener,Fr=Ae.ha||Ae.src;Ae.fa&&gb(h.i,Ae),q=!1!==an.call(Fr,D)&&q}}return q&&!D.defaultPrevented}function uU(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function cU(h){h.g=uU(()=>{h.g=null,h.i&&(h.i=!1,cU(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(ti,tu),ti.prototype[ug]=!0,ti.prototype.removeEventListener=function(h,_,I,D){oU(this,h,_,I,D)},ti.prototype.N=function(){if(ti.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],D=0;D<I.length;D++)zv(I[D]);delete h.g[_],h.h--}}this.F=null},ti.prototype.K=function(h,_,I,D){return this.i.add(String(h),_,!1,I,D)},ti.prototype.L=function(h,_,I,D){return this.i.add(String(h),_,!0,I,D)};class tte extends tu{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:cU(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cg(h){tu.call(this),this.h=h,this.g={}}b(cg,tu);var lU=[];function dU(h){Le(h.g,function(_,I){this.g.hasOwnProperty(I)&&vb(_)},h),h.g={}}cg.prototype.N=function(){cg.aa.N.call(this),dU(this)},cg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tb=a.JSON.stringify,nte=a.JSON.parse,rte=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Cb(){}function fU(){}Cb.prototype.h=null;var lg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Db(){ei.call(this,"d")}function Ab(){ei.call(this,"c")}b(Db,ei),b(Ab,ei);var lc={},pU=null;function Wv(){return pU=pU||new ti}function gU(h){ei.call(this,lc.La,h)}function dg(h){const _=Wv();Ei(_,new gU(_))}function mU(h,_){ei.call(this,lc.STAT_EVENT,h),this.stat=_}function wi(h){const _=Wv();Ei(_,new mU(_,h))}function _U(h,_){ei.call(this,lc.Ma,h),this.size=_}function hg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function fg(){this.g=!0}function zd(h,_,I,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function ate(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var D=I[h];if(!(2>D.length)){var q=D[1];if(Array.isArray(q)&&!(1>q.length)){var ne=q[0];if("noop"!=ne&&"stop"!=ne&&"close"!=ne)for(var Ae=1;Ae<q.length;Ae++)q[Ae]=""}}}return Tb(I)}catch{return _}}(h,I)+(D?" "+D:"")})}lc.La="serverreachability",b(gU,ei),lc.STAT_EVENT="statevent",b(mU,ei),lc.Ma="timingevent",b(_U,ei),fg.prototype.xa=function(){this.g=!1},fg.prototype.info=function(){};var bb,Zv={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Kv(){}function nu(h,_,I,D){this.j=h,this.i=_,this.l=I,this.R=D||1,this.U=new cg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vU}function vU(){this.i=null,this.g="",this.h=!1}b(Kv,Cb),Kv.prototype.g=function(){return new XMLHttpRequest},Kv.prototype.i=function(){return{}},bb=new Kv;var IU={},Sb={};function Rb(h,_,I){h.L=1,h.v=Xv(na(_)),h.m=I,h.P=!0,EU(h,null)}function EU(h,_){h.F=Date.now(),Qv(h),h.A=na(h.v);var I=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),kU(I.i,"t",D),h.C=0,I=h.j.J,h.h=new vU,h.g=XU(h.j,I?_:null,!h.m),0<h.O&&(h.M=new tte(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,D=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(lU[0]=q.toString()),q=lU);for(var ne=0;ne<q.length;ne++){var Ae=rU(I,q[ne],D||_.handleEvent,!1,_.h||_);if(!Ae)break;_.g[Ae.key]=Ae}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),dg(),function ite(h,_,I,D,q,ne){h.info(function(){if(h.g)if(ne)for(var Ae="",an=ne.split("&"),Fr=0;Fr<an.length;Fr++){var Bt=an[Fr].split("=");if(1<Bt.length){var ni=Bt[0];Bt=Bt[1];var ri=ni.split("_");Ae=2<=ri.length&&"type"==ri[1]?Ae+(ni+"=")+Bt+"&":Ae+(ni+"=redacted&")}}else Ae=null;else Ae=ne;return"XMLHTTP REQ ("+D+") [attempt "+q+"]: "+_+"\n"+I+"\n"+Ae})}(h.i,h.u,h.A,h.l,h.R,h.m)}function wU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function ute(h,_){var I=h.C,D=_.indexOf("\n",I);return-1==D?Sb:(I=Number(_.substring(I,D)),isNaN(I)?IU:(D+=1)+I>_.length?Sb:(_=_.slice(D,D+I),h.C=D+I,_))}function Qv(h){h.S=Date.now()+h.I,TU(h,h.I)}function TU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=hg(y(h.ba,h),_)}function Pb(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function pg(h){0==h.j.G||h.J||KU(h.j,h)}function dc(h){Pb(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,dU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Mb(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||Nb(I.h,h)))if(!h.K&&Nb(I.h,h)&&3==I.G){try{var D=I.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var q=D;if(0==q[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;iI(I),nI(I)}Vb(I),wi(18)}}else I.za=q[1],0<I.za-I.T&&37500>q[2]&&I.F&&0==I.v&&!I.C&&(I.C=hg(y(I.Za,I),6e3));if(1>=AU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else fc(I,11)}else if((h.K||I.g==h)&&iI(I),!B(_))for(q=I.Da.g.parse(_),_=0;_<q.length;_++){let Bt=q[_];if(I.T=Bt[0],Bt=Bt[1],2==I.G)if("c"==Bt[0]){I.K=Bt[1],I.ia=Bt[2];const ni=Bt[3];null!=ni&&(I.la=ni,I.j.info("VER="+I.la));const ri=Bt[4];null!=ri&&(I.Aa=ri,I.j.info("SVER="+I.Aa));const Wd=Bt[5];null!=Wd&&"number"==typeof Wd&&0<Wd&&(I.L=D=1.5*Wd,I.j.info("backChannelRequestTimeoutMs_="+D)),D=I;const ks=h.g;if(ks){const oI=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oI){var ne=D.h;ne.g||-1==oI.indexOf("spdy")&&-1==oI.indexOf("quic")&&-1==oI.indexOf("h2")||(ne.j=ne.l,ne.g=new Set,ne.h&&(xb(ne,ne.h),ne.h=null))}if(D.D){const Lb=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Lb&&(D.ya=Lb,Tn(D.I,D.D,Lb))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ae=h;if((D=I).qa=JU(D,D.J?D.ia:null,D.W),Ae.K){bU(D.h,Ae);var an=Ae,Fr=D.L;Fr&&(an.I=Fr),an.B&&(Pb(an),Qv(an)),D.g=Ae}else WU(D);0<I.i.length&&rI(I)}else"stop"!=Bt[0]&&"close"!=Bt[0]||fc(I,7);else 3==I.G&&("stop"==Bt[0]||"close"==Bt[0]?"stop"==Bt[0]?fc(I,7):kb(I):"noop"!=Bt[0]&&I.l&&I.l.ta(Bt),I.v=0)}dg()}catch{}}function CU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function DU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function AU(h){return h.h?1:h.g?h.g.size:0}function Nb(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function xb(h,_){h.g?h.g.add(_):h.h=_}function bU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function SU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return N(h.i)}function RU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function dte(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const D in h)_[I++]=D;return _}}}(h),D=function lte(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,D=0;D<I;D++)_.push(h[D]);return _}for(D in _=[],I=0,h)_[I++]=h[D];return _}(h),q=D.length,ne=0;ne<q;ne++)_.call(void 0,D[ne],I&&I[ne],h)}nu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==ra(h)?_.j():this.Y(h)},nu.prototype.Y=function(h){try{if(h==this.g)e:{const ri=ra(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ri)&&(3!=ri||this.g&&(this.h.h||this.g.oa()||jU(this.g)))){this.J||4!=ri||7==_||dg(),Pb(this);var I=this.g.Z();this.X=I;t:if(wU(this)){var D=jU(this.g);h="";var q=D.length,ne=4==ra(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){dc(this),pg(this);var Ae="";break t}this.h.i=new a.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(ne&&_==q-1)});D.length=0,this.h.g+=h,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=200==I,function ste(h,_,I,D,q,ne,Ae){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+q+"]: "+_+"\n"+I+"\n"+ne+" "+Ae})}(this.i,this.u,this.A,this.l,this.R,ri,I),this.o){if(this.T&&!this.K){t:{if(this.g){var an,Fr=this.g;if((an=Fr.g?Fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(an)){var Bt=an;break t}}Bt=null}if(!(I=Bt)){this.o=!1,this.s=3,wi(12),dc(this),pg(this);break e}zd(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mb(this,I)}if(this.P){let ks;for(I=!0;!this.J&&this.C<Ae.length;){if(ks=ute(this,Ae),ks==Sb){4==ri&&(this.s=4,wi(14),I=!1),zd(this.i,this.l,null,"[Incomplete Response]");break}if(ks==IU){this.s=4,wi(15),zd(this.i,this.l,Ae,"[Invalid Chunk]"),I=!1;break}zd(this.i,this.l,ks,null),Mb(this,ks)}if(wU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ri||0!=Ae.length||this.h.h||(this.s=1,wi(16),I=!1),this.o=this.o&&I,I){if(0<Ae.length&&!this.W){this.W=!0;var ni=this.j;ni.g==this&&ni.ba&&!ni.M&&(ni.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),Fb(ni),ni.M=!0,wi(11))}}else zd(this.i,this.l,Ae,"[Invalid Chunked Response]"),dc(this),pg(this)}else zd(this.i,this.l,Ae,null),Mb(this,Ae);4==ri&&dc(this),this.o&&!this.J&&(4==ri?KU(this.j,this):(this.o=!1,Qv(this)))}else(function Dte(h){const _={};h=(h.g&&2<=ra(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(B(h[D]))continue;var I=z(h[D]);const q=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const ne=_[q]||[];_[q]=ne,ne.push(I)}!function $(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(D){return D.join(", ")})})(this.g),400==I&&0<Ae.indexOf("Unknown SID")?(this.s=3,wi(12)):(this.s=0,wi(13)),dc(this),pg(this)}}}catch{}},nu.prototype.cancel=function(){this.J=!0,dc(this)},nu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function ote(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(dg(),wi(17)),dc(this),this.s=2,pg(this)):TU(this,this.S-h)},CU.prototype.cancel=function(){if(this.i=SU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var PU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof hc){this.h=h.h,Yv(this,h.j),this.o=h.o,this.g=h.g,Jv(this,h.s),this.l=h.l;var _=h.i,I=new _g;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),MU(this,I),this.m=h.m}else h&&(_=String(h).match(PU))?(this.h=!1,Yv(this,_[1]||"",!0),this.o=gg(_[2]||""),this.g=gg(_[3]||"",!0),Jv(this,_[4]),this.l=gg(_[5]||"",!0),MU(this,_[6]||"",!0),this.m=gg(_[7]||"")):(this.h=!1,this.i=new _g(null,this.h))}function na(h){return new hc(h)}function Yv(h,_,I){h.j=I?gg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jv(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function MU(h,_,I){_ instanceof _g?(h.i=_,function yte(h,_){_&&!h.j&&(ru(h),h.i=null,h.g.forEach(function(I,D){var q=D.toLowerCase();D!=q&&(xU(this,D),kU(this,q,I))},h)),h.j=_}(h.i,h.h)):(I||(_=mg(_,mte)),h.i=new _g(_,h.h))}function Tn(h,_,I){h.i.set(_,I)}function Xv(h){return Tn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function gg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function mg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,fte),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fte(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}hc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(mg(_,NU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(mg(_,NU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(mg(I,"/"==I.charAt(0)?gte:pte,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",mg(I,_te)),h.join("")};var h,NU=/[#\/\?@]/g,pte=/[#\?:]/g,gte=/[#\?]/g,mte=/[#\?@]/g,_te=/#/g;function _g(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ru(h){h.g||(h.g=new Map,h.h=0,h.i&&function hte(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var D=h[I].indexOf("="),q=null;if(0<=D){var ne=h[I].substring(0,D);q=h[I].substring(D+1)}else ne=h[I];_(ne,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function xU(h,_){ru(h),_=qd(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function OU(h,_){return ru(h),_=qd(h,_),h.g.has(_)}function kU(h,_,I){xU(h,_),0<I.length&&(h.i=null,h.g.set(qd(h,_),N(I)),h.h+=I.length)}function qd(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function iu(h,_,I,D,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),D(I)}catch{}}function Ete(){this.g=new rte}function wte(h,_,I){const D=I||"";try{RU(h,function(q,ne){let Ae=q;l(q)&&(Ae=Tb(q)),_.push(D+ne+"="+encodeURIComponent(Ae))})}catch(q){throw _.push(D+"type="+encodeURIComponent("_badmap")),q}}function yg(h){this.l=h.Ub||null,this.j=h.eb||!1}function eI(h,_){ti.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function VU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function vg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ig(h)}function Ig(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function FU(h){let _="";return Le(h,function(I,D){_+=D,_+=":",_+=I,_+="\r\n"}),_}function Ob(h,_,I){e:{for(D in I){var D=!1;break e}D=!0}D||(I=FU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):Tn(h,_,I))}function Hn(h){ti.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=_g.prototype).add=function(h,_){ru(this),this.i=null,h=qd(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){ru(this),this.g.forEach(function(I,D){I.forEach(function(q){h.call(_,q,D,this)},this)},this)},n.na=function(){ru(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let D=0;D<_.length;D++){const q=h[D];for(let ne=0;ne<q.length;ne++)I.push(_[D])}return I},n.V=function(h){ru(this);let _=[];if("string"==typeof h)OU(this,h)&&(_=_.concat(this.g.get(qd(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return ru(this),this.i=null,OU(this,h=qd(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var D=_[I];const ne=encodeURIComponent(String(D)),Ae=this.V(D);for(D=0;D<Ae.length;D++){var q=ne;""!==Ae[D]&&(q+="="+encodeURIComponent(String(Ae[D]))),h.push(q)}}return this.i=h.join("&")},b(yg,Cb),yg.prototype.g=function(){return new eI(this.l,this.j)},yg.prototype.i=(h={},function(){return h}),b(eI,ti),(n=eI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ig(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ig(this)),this.g&&(this.readyState=3,Ig(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?vg(this):Ig(this),3==this.readyState&&VU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,vg(this))},n.Qa=function(h){this.g&&(this.response=h,vg(this))},n.ga=function(){this.g&&vg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(eI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(Hn,ti);var Tte=/^https?$/i,Cte=["POST","PUT"];function LU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,UU(h),tI(h)}function UU(h){h.A||(h.A=!0,Ei(h,"complete"),Ei(h,"error"))}function BU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=ra(h)||2!=h.Z()))if(h.u&&4==ra(h))uU(h.Ea,0,h);else if(Ei(h,"readystatechange"),4==ra(h)){h.h=!1;try{const Ae=h.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var D;if(D=0===Ae){var q=String(h.D).match(PU)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),D=!Tte.test(q?q.toLowerCase():"")}I=D}if(I)Ei(h,"complete"),Ei(h,"success");else{h.m=6;try{var ne=2<ra(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",UU(h)}}finally{tI(h)}}}function tI(h,_){if(h.g){$U(h);const I=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ei(h,"ready");try{I.onreadystatechange=D}catch{}}}function $U(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function ra(h){return h.g?h.g.readyState:0}function jU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Eg(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function HU(h){this.Aa=0,this.i=[],this.j=new fg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eg("baseRetryDelayMs",5e3,h),this.cb=Eg("retryDelaySeedMs",1e4,h),this.Wa=Eg("forwardChannelMaxRetries",2,h),this.wa=Eg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new CU(h&&h.concurrentRequestLimit),this.Da=new Ete,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function kb(h){if(zU(h),3==h.G){var _=h.U++,I=na(h.I);if(Tn(I,"SID",h.K),Tn(I,"RID",_),Tn(I,"TYPE","terminate"),wg(h,I),(_=new nu(h,h.j,_)).L=2,_.v=Xv(na(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=XU(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Qv(_)}YU(h)}function nI(h){h.g&&(Fb(h),h.g.cancel(),h.g=null)}function zU(h){nI(h),h.u&&(a.clearTimeout(h.u),h.u=null),iI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function rI(h){if(!DU(h.h)&&!h.s){h.s=!0;var _=h.Ga;sg||nU(),og||(sg(),og=!0),pb.add(_,h),h.B=0}}function qU(h,_){var I;I=_?_.l:h.U++;const D=na(h.I);Tn(D,"SID",h.K),Tn(D,"RID",I),Tn(D,"AID",h.T),wg(h,D),h.m&&h.o&&Ob(D,h.m,h.o),I=new nu(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=GU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),xb(h.h,I),Rb(I,D,_)}function wg(h,_){h.H&&Le(h.H,function(I,D){Tn(_,D,I)}),h.l&&RU({},function(I,D){Tn(_,D,I)})}function GU(h,_,I){I=Math.min(h.i.length,I);var D=h.l?y(h.l.Na,h.l,h):null;e:{var q=h.i;let ne=-1;for(;;){const Ae=["count="+I];-1==ne?0<I?(ne=q[0].g,Ae.push("ofs="+ne)):ne=0:Ae.push("ofs="+ne);let an=!0;for(let Fr=0;Fr<I;Fr++){let Bt=q[Fr].g;const ni=q[Fr].map;if(Bt-=ne,0>Bt)ne=Math.max(0,q[Fr].g-100),an=!1;else try{wte(ni,Ae,"req"+Bt+"_")}catch{D&&D(ni)}}if(an){D=Ae.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,D}function WU(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;sg||nU(),og||(sg(),og=!0),pb.add(_,h),h.v=0}}function Vb(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=hg(y(h.Fa,h),QU(h,h.v)),h.v++,0))}function Fb(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function ZU(h){h.g=new nu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=na(h.qa);Tn(_,"RID","rpc"),Tn(_,"SID",h.K),Tn(_,"AID",h.T),Tn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Tn(_,"TO",h.ja),Tn(_,"TYPE","xmlhttp"),wg(h,_),h.m&&h.o&&Ob(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Xv(na(_)),I.m=null,I.P=!0,EU(I,h)}function iI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function KU(h,_){var I=null;if(h.g==_){iI(h),Fb(h),h.g=null;var D=2}else{if(!Nb(h.h,_))return;I=_.D,bU(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){I=_.m?_.m.length:0,_=Date.now()-_.F;var q=h.B;Ei(D=Wv(),new _U(D,I)),rI(h)}else WU(h);else if(3==(q=_.s)||0==q&&0<_.X||!(1==D&&function Ate(h,_){return!(AU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=hg(y(h.Ga,h,_),QU(h,h.B)),h.B++,0)))}(h,_)||2==D&&Vb(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),q){case 1:fc(h,5);break;case 4:fc(h,10);break;case 3:fc(h,6);break;default:fc(h,2)}}function QU(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function fc(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),D=h.Xa;const q=!D;D=new hc(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Yv(D,"https"),Xv(D),q?function vte(h,_){const I=new fg;if(a.Image){const D=new Image;D.onload=E(iu,I,"TestLoadImage: loaded",!0,_,D),D.onerror=E(iu,I,"TestLoadImage: error",!1,_,D),D.onabort=E(iu,I,"TestLoadImage: abort",!1,_,D),D.ontimeout=E(iu,I,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),I):function Ite(h,_){new fg;const D=new AbortController,q=setTimeout(()=>{D.abort(),iu(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(ne=>{clearTimeout(q),iu(0,0,!!ne.ok,_)}).catch(()=>{clearTimeout(q),iu(0,0,!1,_)})}(D.toString(),I)}else wi(2);h.G=0,h.l&&h.l.sa(_),YU(h),zU(h)}function YU(h){if(h.G=0,h.ka=[],h.l){const _=SU(h.h);(0!=_.length||0!=h.i.length)&&(k(h.ka,_),k(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function JU(h,_,I){var D=I instanceof hc?na(I):new hc(I);if(""!=D.g)_&&(D.g=_+"."+D.g),Jv(D,D.s);else{var q=a.location;D=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var ne=new hc(null);D&&Yv(ne,D),_&&(ne.g=_),q&&Jv(ne,q),I&&(ne.l=I),D=ne}return _=h.ya,(I=h.D)&&_&&Tn(D,I,_),Tn(D,"VER",h.la),wg(h,D),D}function XU(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Hn(h.Ca&&!h.pa?new yg({eb:I}):h.pa)).Ha(h.J),_}function eB(){}function sI(){}function Yi(h,_){ti.call(this),this.g=new HU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!B(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!B(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Gd(this)}function tB(h){Db.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function nB(){Ab.call(this),this.status=1}function Gd(h){this.g=h}(n=Hn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bb.g(),this.v=function hU(h){return h.h||(h.h=h.i())}(this.o?this.o:bb),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){return void LU(this,ne)}if(h=I||"",I=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var q in D)I.set(q,D[q]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const ne of D.keys())I.set(ne,D.get(ne))}D=Array.from(I.keys()).find(ne=>"content-type"==ne.toLowerCase()),q=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Cte,_,void 0))||D||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ae]of I)this.g.setRequestHeader(ne,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$U(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){LU(this,ne)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ei(this,"complete"),Ei(this,"abort"),tI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tI(this,!0)),Hn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?BU(this):this.bb())},n.bb=function(){BU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ra(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),nte(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=HU.prototype).la=8,n.G=1,n.connect=function(h,_,I,D){wi(0),this.W=h,this.H=_||{},I&&void 0!==D&&(this.H.OSID=I,this.H.OAID=D),this.F=this.X,this.I=JU(this,null,this.W),rI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new nu(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=R(ne),j(ne,this.S)):ne=this.S),null!==this.m||this.O||(q.H=ne,ne=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var D=this.i[I];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=GU(this,q,_),Tn(I=na(this.I),"RID",h),Tn(I,"CVER",22),this.D&&Tn(I,"X-HTTP-Session-Id",this.D),wg(this,I),ne&&(this.O?_="headers="+encodeURIComponent(String(FU(ne)))+"&"+_:this.m&&Ob(I,this.m,ne)),xb(this.h,q),this.Ua&&Tn(I,"TYPE","init"),this.P?(Tn(I,"$req",_),Tn(I,"SID","null"),q.T=!0,Rb(q,I,null)):Rb(q,I,_),this.G=2}}else 3==this.G&&(h?qU(this,h):0==this.i.length||DU(this.h)||qU(this))},n.Fa=function(){if(this.u=null,ZU(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=hg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wi(10),nI(this),ZU(this))},n.Za=function(){null!=this.C&&(this.C=null,nI(this),Vb(this),wi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=eB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},sI.prototype.g=function(h,_){return new Yi(h,_)},b(Yi,ti),Yi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yi.prototype.close=function(){kb(this.g)},Yi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=Tb(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&rI(_)},Yi.prototype.N=function(){this.g.l=null,delete this.j,kb(this.g),delete this.g,Yi.aa.N.call(this)},b(tB,Db),b(nB,Ab),b(Gd,eB),Gd.prototype.ua=function(){Ei(this.g,"a")},Gd.prototype.ta=function(h){Ei(this.g,new tB(h))},Gd.prototype.sa=function(h){Ei(this.g,new nB)},Gd.prototype.ra=function(){Ei(this.g,"b")},sI.prototype.createWebChannel=sI.prototype.g,Yi.prototype.send=Yi.prototype.o,Yi.prototype.open=Yi.prototype.m,Yi.prototype.close=Yi.prototype.close,mk=Ho.createWebChannelTransport=function(){return new sI},gk=Ho.getStatEventTarget=function(){return Wv()},pk=Ho.Event=lc,TC=Ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zv.NO_ERROR=0,Zv.TIMEOUT=8,Zv.HTTP_ERROR=6,Fy=Ho.ErrorCode=Zv,yU.COMPLETE="complete",fk=Ho.EventType=yU,fU.EventType=lg,lg.OPEN="a",lg.CLOSE="b",lg.ERROR="c",lg.MESSAGE="d",ti.prototype.listen=ti.prototype.K,dp=Ho.WebChannel=fU,hk=Ho.FetchXmlHttpFactory=yg,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,dk=Ho.XhrIo=Hn}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});const _k="@firebase/firestore";class Er{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Er.UNAUTHENTICATED=new Er(null),Er.GOOGLE_CREDENTIALS=new Er("google-credentials-uid"),Er.FIRST_PARTY=new Er("first-party-uid"),Er.MOCK_USER=new Er("mock-user");let nd="10.12.1";const Va=new oo.Yd("@firebase/firestore");function rd(){return Va.logLevel}function me(n,...e){if(Va.logLevel<=oo.in.DEBUG){const t=e.map(CC);Va.debug(`Firestore (${nd}): ${n}`,...t)}}function Yn(n,...e){if(Va.logLevel<=oo.in.ERROR){const t=e.map(CC);Va.error(`Firestore (${nd}): ${n}`,...t)}}function ki(n,...e){if(Va.logLevel<=oo.in.WARN){const t=e.map(CC);Va.warn(`Firestore (${nd}): ${n}`,...t)}}function CC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Oe(n="Unexpected state"){const e=`FIRESTORE (${nd}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function je(n,e){n||Oe()}function De(n,e){return n}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends lt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Er.UNAUTHENTICATED))}shutdown(){}}class eZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tZ{constructor(e){this.t=e,this.currentUser=Er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,oe.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je("string"==typeof r.accessToken),new yk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return je(null===e||"string"==typeof e),new Er(e)}}class nZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Er.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nZ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Er.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je("string"==typeof t.token),this.R=t.token,new vk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function sZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ik{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=sZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function rt(n,e){return n<e?-1:n>e?1:0}function id(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ek(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Sn(0,0))}static max(){return new qe(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Oe(),void 0===r?r=e.length-t:r>e.length-t&&Oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class St extends hp{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new St(t)}static emptyPath(){return new St([])}}const oZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends hp{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return oZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new pe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new pe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new pe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new pe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(St.fromString(e))}static fromName(e){return new Pe(St.fromString(e).popFirst(5))}static empty(){return new Pe(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===St.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new St(e.slice()))}}class sd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function DC(n){return n.fields.find(e=>2===e.kind)}function ju(n){return n.fields.filter(e=>2!==e.kind)}sd.UNKNOWN_ID=-1;class Hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new od(0,Zi.min())}}function wk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=qe.fromTimestamp(1e9===r?new Sn(t+1,0):new Sn(t,r));return new Zi(i,Pe.empty(),e)}function Tk(n){return new Zi(n.readTime,n.key,-1)}class Zi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zi(qe.min(),Pe.empty(),-1)}static max(){return new Zi(qe.max(),Pe.empty(),-1)}}function AC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const Ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Fa(n){return bC.apply(this,arguments)}function bC(){return(bC=(0,oe.Z)(function*(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==Ck)throw n;me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Z.reject(t)}static resolve(e){return new Z((t,r)=>{t(e)})}static reject(e){return new Z((t,r)=>{r(e)})}static waitFor(e){return new Z((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=Z.resolve(!1);for(const r of e)t=t.next(i=>i?Z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new Z((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Ly{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=SC(r.target.error);this.V.reject(new fp(e,i))}}static open(e,t,r,i){try{return new Ly(t,e.transaction(i,r))}catch(s){throw new fp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lZ(t)}}class ao{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ao.S((0,lt.z$)())&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return me("SimpleDb","Removing database:",e),zu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,lt.hl)())return!1;if(ao.C())return!0;const e=(0,lt.z$)(),t=ao.S(e),r=0<t&&t<10,i=Ak(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,oe.Z)(function*(){return t.db||(me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new fp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new pe(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new pe(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new fp(e,a))},s.onupgradeneeded=o=>{me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,oe.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=Ly.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),Z.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(me("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ak(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class cZ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return zu(this.B.delete())}}class fp extends pe{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function La(n){return"IndexedDbTransactionError"===n.name}class lZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zu(r)}add(e){return me("SimpleDb","ADD",this.store.name,e,e),zu(this.store.add(e))}get(e){return zu(this.store.get(e)).next(t=>(void 0===t&&(t=null),me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return me("SimpleDb","DELETE",this.store.name,e),zu(this.store.delete(e))}count(){return me("SimpleDb","COUNT",this.store.name),zu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new Z((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Z((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Z((r,i)=>{t.onerror=s=>{const o=SC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new Z((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new cZ(a),l=t(a.primaryKey,a.value,u);if(l instanceof Z){const f=l.catch(m=>(u.done(),Z.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>Z.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zu(n){return new Z((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=SC(r.target.error);t(i)}})}let bk=!1;function SC(n){const e=ao.S((0,lt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bk||(bk=!0,setTimeout(()=>{throw r},0)),r}}return n}class dZ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;me("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,oe.Z)(function*(){t.task=null;try{me("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){La(r)?me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Fa(r)}yield t.X(6e4)}))}}class hZ{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return Z.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return me("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Tk(s);AC(o,r)>0&&(r=o)}),new Zi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ki=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function pp(n){return null==n}function gp(n){return 0===n&&1/n==-1/0}function Sk(n){return"number"==typeof n&&Number.isInteger(n)&&!gp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Kr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Rk(e)),e=fZ(n.get(t),e);return Rk(e)}function fZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Rk(n){return n+"\x01\x01"}function uo(n){const e=n.length;if(je(e>=2),2===e)return je("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),St.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Oe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Oe()}s=o+2}return new St(r)}const Pk=["userId","batchId"];function Uy(n,e){return[n,Kr(e)]}function Mk(n,e,t){return[n,Kr(e),t]}const pZ={},gZ=["prefixPath","collectionGroup","readTime","documentId"],mZ=["prefixPath","collectionGroup","documentId"],_Z=["collectionGroup","readTime","prefixPath","documentId"],yZ=["canonicalId","targetId"],vZ=["targetId","path"],IZ=["path","targetId"],EZ=["collectionId","parent"],wZ=["indexId","uid"],TZ=["uid","sequenceNumber"],CZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DZ=["indexId","uid","orderedDocumentKey"],AZ=["userId","collectionPath","documentId"],bZ=["userId","collectionPath","largestBatchId"],SZ=["userId","collectionGroup","largestBatchId"],Nk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RZ=[...Nk,"documentOverlays"],xk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ok=xk,kk=[...Ok,"indexConfiguration","indexState","indexEntries"],PZ=kk;class RC extends Dk{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function wr(n,e){const t=De(n);return ao.F(t._e,e)}function Vk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fn{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new By(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new By(this.root,e,this.comparator,!1)}getReverseIterator(){return new By(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new By(this.root,e,this.comparator,!0)}}class By{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Or.RED,this.left=i??Or.EMPTY,this.right=s??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Or(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1,Or.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uk(this.data.getIterator())}getIteratorFrom(e){return new Uk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class Uk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ad(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new tn(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return id(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Bk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bk("Invalid base64 string: "+s):s}}(e);return new _r(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const NZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(je(!!n),"string"==typeof n){let e=0;const t=NZ.exec(n);if(je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jn(n.seconds),nanos:jn(n.nanos)}}function jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qo(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function $y(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jy(n){const e=n.mapValue.fields.__previous_value__;return $y(e)?jy(e):e}function mp(n){const e=zo(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}class xZ{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Ba{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ba("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ba&&e.projectId===this.projectId&&e.database===this.database}}const $a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hy={nullValue:"NULL_VALUE"};function ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?$y(n)?4:zk(n)?9007199254740991:10:Oe()}function co(n,e){if(n===e)return!0;const t=ja(n);if(t!==ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mp(n).isEqual(mp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zo(i.timestampValue),a=zo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,qo(n.bytesValue).isEqual(qo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return jn(i.geoPointValue.latitude)===jn(s.geoPointValue.latitude)&&jn(i.geoPointValue.longitude)===jn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jn(i.integerValue)===jn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=jn(i.doubleValue),a=jn(s.doubleValue);return o===a?gp(o)===gp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return id(n.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Vk(o)!==Vk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!co(o[u],a[u])))return!1;return!0}(n,e);default:return Oe()}var s}function _p(n,e){return void 0!==(n.values||[]).find(t=>co(t,e))}function Ha(n,e){if(n===e)return 0;const t=ja(n),r=ja(e);if(t!==r)return rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=jn(s.integerValue||s.doubleValue),u=jn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return $k(n.timestampValue,e.timestampValue);case 4:return $k(mp(n),mp(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=qo(s),u=qo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=rt(a[l],u[l]);if(0!==f)return f}return rt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(jn(s.latitude),jn(o.latitude));return 0!==a?a:rt(jn(s.longitude),jn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const f=Ha(a[l],u[l]);if(f)return f}return rt(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===$a.mapValue&&o===$a.mapValue)return 0;if(s===$a.mapValue)return 1;if(o===$a.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=rt(u[m],f[m]);if(0!==y)return y;const E=Ha(a[u[m]],l[f[m]]);if(0!==E)return E}return rt(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Oe()}}function $k(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=zo(n),r=zo(e),i=rt(t.seconds,r.seconds);return 0!==i?i:rt(t.nanos,r.nanos)}function ud(n){return PC(n)}function PC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=zo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qo(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=PC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${PC(t.fields[o])}`;return i+"}"}(n.mapValue):Oe()}function qu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function MC(n){return!!n&&"integerValue"in n}function yp(n){return!!n&&"arrayValue"in n}function jk(n){return!!n&&"nullValue"in n}function Hk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qy(n){return!!n&&"mapValue"in n}function vp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zk(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function OZ(n){return"nullValue"in n?Hy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qu(Ba.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Oe()}function kZ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qu(Ba.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$a:Oe()}function qk(n,e){const t=Ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gk(n,e){const t=Ha(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(t)}setAll(e){let t=In.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=vp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());qy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ua(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new kr(vp(this.value))}}function Wk(n){const e=[];return Ua(n.fields,(t,r)=>{const i=new In([t]);if(qy(r)){const s=Wk(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vi(e)}class En{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new En(e,0,qe.min(),qe.min(),qe.min(),kr.empty(),0)}static newFoundDocument(e,t,r,i){return new En(e,1,t,qe.min(),r,i,0)}static newNoDocument(e,t){return new En(e,2,t,qe.min(),qe.min(),kr.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,qe.min(),qe.min(),kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class za{constructor(e,t){this.position=e,this.inclusive=t}}function Zk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Pe.comparator(Pe.fromName(o.referenceValue),t.key):Ha(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Kk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!co(n.position[t],e.position[t]))return!1;return!0}class Ip{constructor(e,t="asc"){this.field=e,this.dir=t}}function VZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Qk{}class Rt extends Qk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new FZ(e,t,r):"array-contains"===t?new BZ(e,r):"in"===t?new nV(e,r):"not-in"===t?new $Z(e,r):"array-contains-any"===t?new jZ(e,r):new Rt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new LZ(e,r):new UZ(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ha(t,this.value)):null!==t&&ja(this.value)===ja(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Qk{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jt(e,t)}matches(e){return cd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cd(n){return"and"===n.op}function NC(n){return"or"===n.op}function xC(n){return Yk(n)&&cd(n)}function Yk(n){for(const e of n.filters)if(e instanceof Jt)return!1;return!0}function OC(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+ud(n.value);if(xC(n))return n.filters.map(e=>OC(e)).join(",");{const e=n.filters.map(t=>OC(t)).join(",");return`${n.op}(${e})`}}function Jk(n,e){return n instanceof Rt?(r=n,(i=e)instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&co(r.value,i.value)):n instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Jk(o,i.filters[a]),!0)}(n,e):void Oe();var r,i}function Xk(n,e){const t=n.filters.concat(e);return Jt.create(t,n.op)}function eV(n){return n instanceof Rt?`${(t=n).field.canonicalString()} ${t.op} ${ud(t.value)}`:n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(eV).join(" ,")+"}"}(n):"Filter";var t}class FZ extends Rt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class LZ extends Rt{constructor(e,t){super(e,"in",t),this.keys=tV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UZ extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=tV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class BZ extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&_p(t.arrayValue,this.value)}}class nV extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_p(this.value.arrayValue,t)}}class $Z extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(_p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_p(this.value.arrayValue,t)}}class jZ extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_p(this.value.arrayValue,r))}}class HZ{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function kC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new HZ(n,e,t,r,i,s,o)}function Gu(n){const e=De(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ud(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ud(r)).join(",")),e.ue=t}return e.ue}function Ep(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kk(n.startAt,e.startAt)&&Kk(n.endAt,e.endAt)}function Gy(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Wy(n,e){return n.filters.filter(t=>t instanceof Rt&&t.field.isEqual(e))}function rV(n,e,t){let r=Hy,i=!0;for(const s of Wy(n,e)){let o=Hy,a=!0;switch(s.op){case"<":case"<=":o=OZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Hy}qk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];qk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function iV(n,e,t){let r=$a,i=!0;for(const s of Wy(n,e)){let o=$a,a=!0;switch(s.op){case">=":case">":o=kZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=$a}Gk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Gk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Go{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function sV(n,e,t,r,i,s,o,a){return new Go(n,e,t,r,i,s,o,a)}function ld(n){return new Go(n)}function oV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function VC(n){return null!==n.collectionGroup}function dd(n){const e=De(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(In.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ip(s,r))}),t.has(In.keyField().canonicalString())||e.ce.push(new Ip(In.keyField(),r))}return e.ce}function Qr(n){const e=De(n);return e.le||(e.le=function uV(n,e){if("F"===n.limitType)return kC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Ip(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return kC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,dd(n))),e.le}function FC(n,e){const t=n.filters.concat([e]);return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zy(n,e,t){return new Go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wp(n,e){return Ep(Qr(n),Qr(e))&&n.limitType===e.limitType}function cV(n){return`${Gu(Qr(n))}|lt:${n.limitType}`}function hd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eV(i)).join(", ")}]`),pp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ud(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ud(i)).join(",")),`Target(${r})`}(Qr(n))}; limitType=${n.limitType})`}function Tp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of dd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=Zk(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,dd(r),i)||r.endAt&&!function(o,a,u){const l=Zk(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,dd(r),i)));var r,i}function lV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dV(n){return(e,t)=>{let r=!1;for(const i of dd(n)){const s=zZ(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function zZ(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?Ha(u,l):Oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Lk(this.inner)}size(){return this.innerSize}}const qZ=new fn(Pe.comparator);function Fi(){return qZ}const hV=new fn(Pe.comparator);function Cp(...n){let e=hV;for(const t of n)e=e.insert(t.key,t);return e}function fV(n){let e=hV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lo(){return Dp()}function pV(){return Dp()}function Dp(){return new Wo(n=>n.toString(),(n,e)=>n.isEqual(e))}const GZ=new fn(Pe.comparator),WZ=new tn(Pe.comparator);function ht(...n){let e=WZ;for(const t of n)e=e.add(t);return e}const ZZ=new tn(rt);function LC(){return ZZ}function gV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gp(e)?"-0":e}}function mV(n){return{integerValue:""+n}}function _V(n,e){return Sk(e)?mV(e):gV(n,e)}class Ky{constructor(){this._=void 0}}function KZ(n,e,t){return n instanceof fd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$y(s)&&(s=jy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Wu?vV(n,e):n instanceof Zu?IV(n,e):function(i,s){const o=yV(i,s),a=EV(o)+EV(i.Pe);return MC(o)&&MC(i.Pe)?mV(a):gV(i.serializer,a)}(n,e)}function QZ(n,e,t){return n instanceof Wu?vV(n,e):n instanceof Zu?IV(n,e):t}function yV(n,e){return n instanceof pd?MC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class fd extends Ky{}class Wu extends Ky{constructor(e){super(),this.elements=e}}function vV(n,e){const t=wV(e);for(const r of n.elements)t.some(i=>co(i,r))||t.push(r);return{arrayValue:{values:t}}}class Zu extends Ky{constructor(e){super(),this.elements=e}}function IV(n,e){let t=wV(e);for(const r of n.elements)t=t.filter(i=>!co(i,r));return{arrayValue:{values:t}}}class pd extends Ky{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function EV(n){return jn(n.integerValue||n.doubleValue)}function wV(n){return yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ap{constructor(e,t){this.field=e,this.transform=t}}class JZ{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yy{}function TV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new md(n.key,Rn.none()):new gd(n.key,n.data,Rn.none());{const t=n.data,r=kr.empty();let i=new tn(In.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Zo(n.key,r,new Vi(i.toArray()),Rn.none())}}function XZ(n,e,t){n instanceof gd?function(i,s,o){const a=i.value.clone(),u=AV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Zo?function(i,s,o){if(!Qy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=AV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(DV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bp(n,e,t,r){return n instanceof gd?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const l=s.value.clone(),f=bV(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zo?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const l=bV(s.fieldTransforms,u,o),f=o.data;return f.setAll(DV(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Qy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function eK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=yV(r.transform,i||null);null!=s&&(null===t&&(t=kr.empty()),t.set(r.field,s))}return t||null}function CV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&id(r,i,(s,o)=>function YZ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Wu&&i instanceof Wu||r instanceof Zu&&i instanceof Zu?id(r.elements,i.elements,co):r instanceof pd&&i instanceof pd?co(r.Pe,i.Pe):r instanceof fd&&i instanceof fd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class gd extends Yy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zo extends Yy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function DV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function AV(n,e,t){const r=new Map;je(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QZ(o,a,t[i]))}return r}function bV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,KZ(s,o,e))}return r}class md extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UC extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&XZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=TV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(qe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ht())}isEqual(e){return this.batchId===e.batchId&&id(this.mutations,e.mutations,(t,r)=>CV(t,r))&&id(this.baseMutations,e.baseMutations,(t,r)=>CV(t,r))}}class $C{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){je(e.mutations.length===r.length);let i=GZ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $C(e,t,r,i)}}class jC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tK{constructor(e,t){this.count=e,this.unchangedNames=t}}var ar,Ft;function RV(n){switch(n){default:return Oe();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function PV(n){if(void 0===n)return Yn("GRPC error has no .code"),X.UNKNOWN;switch(n){case ar.OK:return X.OK;case ar.CANCELLED:return X.CANCELLED;case ar.UNKNOWN:return X.UNKNOWN;case ar.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case ar.INTERNAL:return X.INTERNAL;case ar.UNAVAILABLE:return X.UNAVAILABLE;case ar.UNAUTHENTICATED:return X.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case ar.NOT_FOUND:return X.NOT_FOUND;case ar.ALREADY_EXISTS:return X.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return X.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case ar.ABORTED:return X.ABORTED;case ar.OUT_OF_RANGE:return X.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return X.UNIMPLEMENTED;case ar.DATA_LOSS:return X.DATA_LOSS;default:return Oe()}}(Ft=ar||(ar={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";function MV(){return new TextEncoder}const nK=new $u([4294967295,4294967295],0);function NV(n){const e=MV().encode(n),t=new lk;return t.update(e),new Uint8Array(t.digest())}function xV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $u([t,r],0),new $u([i,s],0)]}class HC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Sp(`Invalid padding: ${t}`);if(r<0)throw new Sp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Sp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Sp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=$u.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply($u.fromNumber(r)));return 1===i.compare(nK)&&(i=new $u([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=NV(e),[r,i]=xV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new HC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=NV(e),[r,i]=xV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Sp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rp(qe.min(),i,new fn(rt),Fi(),ht())}}class Pp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pp(r,t,ht(),ht(),ht())}}class Xy{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class OV{constructor(e,t){this.targetId=e,this.me=t}}class kV{constructor(e,t,r=_r.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VV{constructor(){this.fe=0,this.ge=LV(),this.pe=_r.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ht(),t=ht(),r=ht();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Oe()}}),new Pp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=LV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rK{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fi(),this.qe=FV(),this.Qe=new fn(rt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Gy(s))if(0===r){const o=new Pe(s.path);this.Ue(t,o,En.newNoDocument(o,qe.min()))}else je(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=qo(r).toUint8Array()}catch(u){if(u instanceof Bk)return ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new HC(o,i,s)}catch(u){return ki(u instanceof Sp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Gy(a.target)){const u=new Pe(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,En.newNoDocument(u,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=ht();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Rp(e,t,this.Qe,this.ke,r);return this.ke=Fi(),this.qe=FV(),this.Qe=new fn(rt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new VV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tn(rt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new VV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function FV(){return new fn(Pe.comparator)}function LV(){return new fn(Pe.comparator)}const iK={asc:"ASCENDING",desc:"DESCENDING"},sK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oK={and:"AND",or:"OR"};class aK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zC(n,e){return n.useProto3Json||pp(e)?e:{value:e}}function _d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uK(n,e){return _d(n,e.toTimestamp())}function Jn(n){return je(!!n),qe.fromTimestamp(function(t){const r=zo(t);return new Sn(r.seconds,r.nanos)}(n))}function qC(n,e){return GC(n,e).canonicalString()}function GC(n,e){const t=(i=n,new St(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function BV(n){const e=St.fromString(n);return je(YV(e)),e}function Mp(n,e){return qC(n.databaseId,e.path)}function ho(n,e){const t=BV(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(HV(t))}function $V(n,e){return qC(n.databaseId,e)}function jV(n){const e=BV(n);return 4===e.length?St.emptyPath():HV(e)}function WC(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HV(n){return je(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zV(n,e,t){return{name:Mp(n,e),fields:t.value.mapValue.fields}}function qV(n,e,t){const r=ho(n,e.name),i=Jn(e.updateTime),s=e.createTime?Jn(e.createTime):qe.min(),o=new kr({mapValue:{fields:e.fields}}),a=En.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Np(n,e){let t;if(e instanceof gd)t={update:zV(n,e.key,e.value)};else if(e instanceof md)t={delete:Mp(n,e.key)};else if(e instanceof Zo)t={update:zV(n,e.key,e.data),updateMask:mK(e.fieldMask)};else{if(!(e instanceof UC))return Oe();t={verify:Mp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Oe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:uK(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Oe()),t;var s}function ZC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Rn.updateTime(Jn(s.updateTime)):void 0!==s.exists?Rn.exists(s.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(je("REQUEST_TIME"===a.setToServerValue),u=new fd):"appendMissingElements"in a?u=new Wu(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Zu(a.removeAllFromArray.values||[]):"increment"in a?u=new pd(o,a.increment):Oe();const l=In.fromServerFormat(a.fieldPath);return new Ap(l,u)}(n,i)):[];var s;if(e.update){const i=ho(n,e.update.name),s=new kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Vi((e.updateMask.fieldPaths||[]).map(f=>In.fromServerFormat(f)));return new Zo(i,s,o,t,r)}return new gd(i,s,t,r)}if(e.delete){const i=ho(n,e.delete);return new md(i,t)}if(e.verify){const i=ho(n,e.verify);return new UC(i,t)}return Oe()}function GV(n,e){return{documents:[$V(n,e.path)]}}function ev(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$V(n,i);const s=function(l){if(0!==l.length)return QV(Jt.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:qa((y=f).field),direction:fK(y.dir)};var y})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=zC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function ZV(n){let e=jV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){je(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=KV(m);return y instanceof Jt&&xC(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(y=>{return new Ip(yd((b=y).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,pp(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new za((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new za(m.values||[],!m.before)}(t.endAt)),sV(e,i,o,s,a,"F",u,l)}function KV(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=yd(t.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yd(t.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yd(t.unaryFilter.field);return Rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yd(t.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(n):void 0!==n.fieldFilter?Rt.create(yd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jt.create(t.compositeFilter.filters.map(r=>KV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}}(t.compositeFilter.op))}(n):Oe();var t}function fK(n){return iK[n]}function pK(n){return sK[n]}function gK(n){return oK[n]}function qa(n){return{fieldPath:n.canonicalString()}}function yd(n){return In.fromServerFormat(n.fieldPath)}function QV(n){return n instanceof Rt?function(t){if("=="===t.op){if(Hk(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NAN"}};if(jk(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Hk(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NAN"}};if(jk(t.value))return{unaryFilter:{field:qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qa(t.field),op:pK(t.op),value:t.value}}}(n):n instanceof Jt?function(t){const r=t.getFilters().map(i=>QV(i));return 1===r.length?r[0]:{compositeFilter:{op:gK(t.op),filters:r}}}(n):Oe()}function mK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ko{constructor(e,t,r,i,s=qe.min(),o=qe.min(),a=_r.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JV{constructor(e){this.ct=e}}function XV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Mp(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:_d(s,o.version.toTimestamp()),createTime:_d(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ku(e.version)};else{if(!e.isUnknownDocument())return Oe();r.unknownDocument={path:t.path.toArray(),version:Ku(e.version)}}var s,o;return r}function tv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ku(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qu(n){const e=new Sn(n.seconds,n.nanoseconds);return qe.fromTimestamp(e)}function Yu(n,e){const t=(e.baseMutations||[]).map(s=>ZC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>ZC(n.ct,s)),i=Sn.fromMillis(e.localWriteTimeMs);return new BC(e.batchId,i,t,r)}function xp(n){const e=Qu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qu(n.lastLimboFreeSnapshotVersion):qe.min();let r;return r=void 0!==n.query.documents?(je(1===(s=n.query).documents.length),Qr(ld(jV(s.documents[0])))):function(s){return Qr(ZV(s))}(n.query),new Ko(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken));var s}function eF(n,e){const t=Ku(e.snapshotVersion),r=Ku(e.lastLimboFreeSnapshotVersion);let i;i=Gy(e.target)?GV(n.ct,e.target):ev(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Gu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KC(n){const e=ZV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Zy(e,e.limit,"L"):e}function QC(n,e){return new jC(e.largestBatchId,ZC(n.ct,e.overlayMutation))}function tF(n,e){const t=e.path.lastSegment();return[n,Kr(e.path.popLast()),t]}function nF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ku(r.readTime),documentKey:Kr(r.documentKey.path),largestBatchId:r.largestBatchId}}class yK{getBundleMetadata(e,t){return rF(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return rF(e).put({bundleId:(i=t).id,createTime:Ku(Jn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return iF(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:KC(s.bundledQuery),readTime:Qu(s.readTime)};var s})}saveNamedQuery(e,t){return iF(e).put({name:(i=t).name,readTime:Ku(Jn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function rF(n){return wr(n,"bundles")}function iF(n){return wr(n,"namedQueries")}class nv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new nv(e,t.uid||"")}getOverlay(e,t){return Op(e).get(tF(this.userId,t)).next(r=>r?QC(this.serializer,r):null)}getOverlays(e,t){const r=lo();return Z.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new jC(t,o);i.push(this.ht(e,a))}),Z.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Kr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Op(e).j("collectionPathOverlayIndex",a))}),Z.waitFor(s)}getOverlaysForCollection(e,t,r){const i=lo(),s=Kr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Op(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=QC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=lo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Op(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const m=QC(this.serializer,l);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Op(e).put(function(i,s,o){const[a,u,l]=tF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Np(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Op(n){return wr(n,"documentOverlays")}class Ju{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(jn(e.integerValue));else if("doubleValue"in e){const r=jn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),gp(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=zo(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?zk(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Oe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Pe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function vK(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sF(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=vK(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Ju.bt=new Ju;class IK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=sF(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=sF(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EK{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class wK{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class kp{constructor(){this.Gt=new IK,this.zt=new EK(this.Gt),this.jt=new wK(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Xu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xu(this.indexId,this.documentKey,this.arrayValue,r)}}function Ga(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oF(n.arrayValue,e.arrayValue),0!==t?t:(t=oF(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function oF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class aF{constructor(e){this.Yt=new tn((t,r)=>In.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(je(e.collectionGroup===this.collectionId),this.en)return!1;const t=DC(e);if(void 0!==t&&!this.nn(t))return!1;const r=ju(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new tn(In.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Hu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hu(r.field,"asc"===r.dir?0:1)));return new sd(sd.UNKNOWN_ID,this.collectionId,t,od.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function uF(n){var e,t;if(je(n instanceof Rt||n instanceof Jt),n instanceof Rt){if(n instanceof nV){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Rt.create(n.field,"==",s)))||[];return Jt.create(i,"or")}return n}const r=n.filters.map(i=>uF(i));return Jt.create(r,n.op)}function TK(n){if(0===n.getFilters().length)return[];const e=XC(uF(n));return je(cF(e)),YC(e)||JC(e)?[e]:e.getFilters()}function YC(n){return n instanceof Rt}function JC(n){return n instanceof Jt&&xC(n)}function cF(n){return YC(n)||JC(n)||function(t){if(t instanceof Jt&&NC(t)){for(const r of t.getFilters())if(!YC(r)&&!JC(r))return!1;return!0}return!1}(n)}function XC(n){if(je(n instanceof Rt||n instanceof Jt),n instanceof Rt)return n;if(1===n.filters.length)return XC(n.filters[0]);const e=n.filters.map(r=>XC(r));let t=Jt.create(e,n.op);return t=rv(t),cF(t)?t:(je(t instanceof Jt),je(cd(t)),je(t.filters.length>1),t.filters.reduce((r,i)=>eD(r,i)))}function eD(n,e){let t;return je(n instanceof Rt||n instanceof Jt),je(e instanceof Rt||e instanceof Jt),t=n instanceof Rt?e instanceof Rt?Jt.create([n,e],"and"):lF(n,e):e instanceof Rt?lF(e,n):function(i,s){if(je(i.filters.length>0&&s.filters.length>0),cd(i)&&cd(s))return Xk(i,s.getFilters());const o=NC(i)?i:s,a=NC(i)?s:i,u=o.filters.map(l=>eD(l,a));return Jt.create(u,"or")}(n,e),rv(t)}function lF(n,e){if(cd(e))return Xk(e,n.getFilters());{const t=e.filters.map(r=>eD(n,r));return Jt.create(t,"or")}}function rv(n){if(je(n instanceof Rt||n instanceof Jt),n instanceof Rt)return n;const e=n.getFilters();if(1===e.length)return rv(e[0]);if(Yk(n))return n;const t=e.map(i=>rv(i)),r=[];return t.forEach(i=>{i instanceof Rt?r.push(i):i instanceof Jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jt.create(r,n.op)}class CK{constructor(){this._n=new tD}addToCollectionParentIndex(e,t){return this._n.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Zi.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class tD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(St.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(St.comparator)).toArray()}}const iv=new Uint8Array(0);class DK{constructor(e,t){this.databaseId=t,this.an=new tD,this.un=new Wo(r=>Gu(r),(r,i)=>Ep(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Kr(i)};return dF(e).put(s)}return Z.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ek(t),""],!1,!0);return dF(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(uo(o.parent))}return r})}addFieldIndex(e,t){const r=Vp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Id(e);return s.next(a=>{o.put(nF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Vp(e),i=Id(e),s=vd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Vp(e),r=vd(e),i=Id(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Z.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new aF(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=vd(e);let i=!0;const s=new Map;return Z.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ht();const a=[];return Z.forEach(s,(u,l)=>{var K;me("IndexedDbIndexManager",`Using index ${K=u,`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${Gu(t)}`);const f=function(K,ae){const Ee=DC(ae);if(void 0===Ee)return null;for(const Le of Wy(K,Ee.fieldPath))switch(Le.op){case"array-contains-any":return Le.value.arrayValue.values||[];case"array-contains":return[Le.value]}return null}(l,u),m=function(K,ae){const Ee=new Map;for(const Le of ju(ae))for(const $ of Wy(K,Le.fieldPath))switch($.op){case"==":case"in":Ee.set(Le.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return Ee.set(Le.fieldPath.canonicalString(),$.value),Array.from(Ee.values())}return null}(l,u),y=function(K,ae){const Ee=[];let Le=!0;for(const $ of ju(ae)){const R=0===$.kind?rV(K,$.fieldPath,K.startAt):iV(K,$.fieldPath,K.startAt);Ee.push(R.value),Le&&(Le=R.inclusive)}return new za(Ee,Le)}(l,u),E=function(K,ae){const Ee=[];let Le=!0;for(const $ of ju(ae)){const R=0===$.kind?iV(K,$.fieldPath,K.endAt):rV(K,$.fieldPath,K.endAt);Ee.push(R.value),Le&&(Le=R.inclusive)}return new za(Ee,Le)}(l,u),b=this.hn(u,l,y),N=this.hn(u,l,E),k=this.Pn(u,l,m),W=this.In(u.indexId,f,b,y.inclusive,N,E.inclusive,k);return Z.forEach(W,B=>r.G(B,t.limit).next(K=>{K.forEach(ae=>{const Ee=Pe.fromSegments(ae.documentKey);o.has(Ee)||(o=o.add(Ee),a.push(Ee))})}))}).next(()=>a)}return Z.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:TK(Jt.create(e.filters,"and")).map(r=>kC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const y=t?this.Tn(t[m/l]):iv,E=this.En(e,y,r[m%l],i),b=this.dn(e,y,s[m%l],o),N=a.map(k=>this.En(e,y,k,!0));f.push(...this.createRange(E,b,N))}return f}En(e,t,r,i){const s=new Xu(e,Pe.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Xu(e,Pe.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new aF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return Z.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new tn(In.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new kp;for(const i of ju(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);Ju.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new kp;return Ju.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new kp;return Ju.bt.Pt(qu(this.databaseId,t),r.Ht(function(s){const o=ju(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new kp);let s=0;for(const o of ju(e)){const a=r[s++];for(const u of i)if(this.Vn(t,o.fieldPath)&&yp(a))i=this.mn(i,o,a);else{const l=u.Ht(o.kind);Ju.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new kp;u.seed(a.Wt()),Ju.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Rt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Vp(e),i=Id(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return Z.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,m){const y=m?new od(m.sequenceNumber,new Zi(Qu(m.readTime),new Pe(uo(m.documentKey)),m.largestBatchId)):od.empty(),E=f.fields.map(([b,N])=>new Hu(In.fromServerFormat(b),N));return new sd(f.indexId,f.collectionGroup,E,y)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Vp(e),s=Id(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Z.forEach(a,u=>s.put(nF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return Z.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Z.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Z.forEach(a,u=>this.pn(e,i,u).next(l=>{const f=this.yn(s,u);return l.isEqual(f)?Z.resolve():this.wn(e,s,u,l,f)}))))})}Sn(e,t,r,i){return vd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return vd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=vd(e);let s=new tn(Ga);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Xu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new tn(Ga);const i=this.An(t,e);if(null==i)return r;const s=DC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(yp(o))for(const a of o.arrayValue.values||[])r=r.add(new Xu(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Xu(t.indexId,e.key,iv,i));return r}wn(e,t,r,i,s){me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,f,m,y){const E=u.getIterator(),b=l.getIterator();let N=ad(E),k=ad(b);for(;N||k;){let W=!1,B=!1;if(N&&k){const K=f(N,k);K<0?B=!0:K>0&&(W=!0)}else null!=N?B=!0:W=!0;W?(m(k),k=ad(b)):B?(y(N),N=ad(E)):(N=ad(E),k=ad(b))}}(i,s,Ga,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),Z.waitFor(o)}gn(e){let t=1;return Id(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ga(o,a)).filter((o,a,u)=>!a||0!==Ga(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ga(o,e),u=Ga(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,iv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,iv,[]]))}return s}Dn(e,t){return Ga(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hF)}getMinOffset(e,t){return Z.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Oe())).next(hF)}}function dF(n){return wr(n,"collectionParents")}function vd(n){return wr(n,"indexEntries")}function Vp(n){return wr(n,"indexConfiguration")}function Id(n){return wr(n,"indexState")}function hF(n){je(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;AC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zi(e.readTime,e.documentKey,t)}const fF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Yr(e,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function pF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(u.next(()=>{je(1===a)}));const l=[];for(const f of t.mutations){const m=Mk(e,f.key.path,t.batchId);s.push(i.delete(m)),l.push(f.key)}return Z.waitFor(s).next(()=>l)}function sv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Oe();e=n.noDocument}return JSON.stringify(e).length}Yr.DEFAULT_COLLECTION_PERCENTILE=10,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yr.DEFAULT=new Yr(41943040,Yr.DEFAULT_COLLECTION_PERCENTILE,Yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yr.DISABLED=new Yr(-1,0,0);class ov{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){je(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ov(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Ed(e),o=Wa(e);return o.add({}).next(a=>{je("number"==typeof a);const u=new BC(a,t,r,i),l=function(E,b,N){const k=N.baseMutations.map(B=>Np(E.ct,B)),W=N.mutations.map(B=>Np(E.ct,B));return{userId:b,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:k,mutations:W}}(this.serializer,this.userId,u),f=[];let m=new tn((y,E)=>rt(y.canonicalString(),E.canonicalString()));for(const y of i){const E=Mk(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(l)),f.push(s.put(E,pZ))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),Z.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return Wa(e).get(t).next(r=>r?(je(r.userId===this.userId),Yu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Z.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Wa(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(je(a.batchId>=r),s=Yu(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wa(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wa(e).U("userMutationsIndex",t).next(r=>r.map(i=>Yu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Uy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ed(e).J({range:i},(o,a,u)=>{const[l,f,m]=o,y=uo(f);if(l===this.userId&&t.path.isEqual(y))return Wa(e).get(m).next(E=>{if(!E)throw Oe();je(E.userId===this.userId),s.push(Yu(this.serializer,E))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(rt);const i=[];return t.forEach(s=>{const o=Uy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ed(e).J({range:a},(l,f,m)=>{const[y,E,b]=l,N=uo(E);y===this.userId&&s.path.isEqual(N)?r=r.add(b):m.done()});i.push(u)}),Z.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Uy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new tn(rt);return Ed(e).J({range:o},(u,l,f)=>{const[m,y,E]=u,b=uo(y);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Wa(e).get(s).next(o=>{if(null===o)throw Oe();je(o.userId===this.userId),r.push(Yu(this.serializer,o))}))}),Z.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return pF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Z.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ed(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=uo(s[1]);i.push(u)}else a.done()}).next(()=>{je(0===i.length)})})}containsKey(e,t){return gF(e,this.userId,t)}xn(e){return mF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gF(n,e,t){const r=Uy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ed(n).J({range:s,H:!0},(a,u,l)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),l.done()}).next(()=>o)}function Wa(n){return wr(n,"mutations")}function Ed(n){return wr(n,"documentMutations")}function mF(n){return wr(n,"mutationQueues")}class ec{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ec(0)}static Ln(){return new ec(-1)}}class AK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new ec(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>qe.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>wd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(je(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return wd(e).J((o,a)=>{const u=xp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>Z.waitFor(s)).next(()=>i)}forEachTarget(e,t){return wd(e).J((r,i)=>{const s=xp(i);t(s)})}Bn(e){return _F(e).get("targetGlobalKey").next(t=>(je(null!==t),t))}kn(e,t){return _F(e).put("targetGlobalKey",t)}qn(e,t){return wd(e).put(eF(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return wd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=xp(a);Ep(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Za(e);return t.forEach(o=>{const a=Kr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),Z.waitFor(i)}removeMatchingKeys(e,t,r){const i=Za(e);return Z.forEach(t,s=>{const o=Kr(s.path);return Z.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Za(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Za(e);let s=ht();return i.J({range:r,H:!0},(o,a,u)=>{const l=uo(o[1]),f=new Pe(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=Kr(t.path),i=IDBKeyRange.bound([r],[Ek(r)],!1,!0);let s=0;return Za(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return wd(e).get(t).next(r=>r?xp(r):null)}}function wd(n){return wr(n,"targets")}function _F(n){return wr(n,"targetGlobal")}function Za(n){return wr(n,"targetDocuments")}function yF([n,e],[t,r]){const i=rt(n,t);return 0===i?rt(e,r):i}class bK{constructor(e){this.Kn=e,this.buffer=new tn(yF),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,oe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){La(r)?me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Fa(r)}yield t.zn(3e5)}))}}class SK{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Z.resolve(Ki.oe);const r=new bK(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(fF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fF):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),rd()<=oo.in.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class RK{constructor(e,t){this.db=e,this.garbageCollector=function IF(n,e){return new SK(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return av(e,r)}removeReference(e,t,r){return av(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return av(e,t)}er(e,t){return function(i,s){let o=!1;return mF(i).Y(a=>gF(i,a,s).next(u=>(u&&(o=!0),Z.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,qe.min()),Za(e).delete([0,Kr(o.path)])))});i.push(u)}}).next(()=>Z.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return av(e,t)}Xn(e,t){const r=Za(e);let i,s=Ki.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==Ki.oe&&t(new Pe(uo(i)),s),s=l,i=u):s=Ki.oe}).next(()=>{s!==Ki.oe&&t(new Pe(uo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function av(n,e){return Za(n).put((i=n.currentSequenceNumber,{targetId:0,path:Kr(e.path),sequenceNumber:i}));var i}class EF{constructor(){this.changes=new Wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tc(e).put(r)}removeEntry(e,t,r){return tc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=En.newInvalidDocument(t);return tc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fp(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:En.newInvalidDocument(t)};return tc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fp(t))},(i,s)=>{r={document:this.nr(t,s),size:sv(s)}}).next(()=>r)}getEntries(e,t){let r=Fi();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=Fi(),i=new fn(Pe.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,sv(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Z.resolve();let i=new tn(DF);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Fp(i.first()),Fp(i.last())),o=i.getIterator();let a=o.getNext();return tc(e).J({index:"documentKeyIndex",range:s},(u,l,f)=>{const m=Pe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&DF(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.$(Fp(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),tv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tc(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=Fi();for(const m of l){const y=this.nr(Pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Tp(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=Fi();const o=CF(t,r),a=CF(t,Zi.max());return tc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,f)=>{const m=this.nr(Pe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new MK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TF(e).get("remoteDocumentGlobalKey").next(t=>(je(!!t),t))}tr(e,t){return TF(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function _K(n,e){let t;if(e.document)t=qV(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=Qu(e.noDocument.readTime);t=En.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const r=Pe.fromSegments(e.unknownDocument.path),i=Qu(e.unknownDocument.version);t=En.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Sn(i[0],i[1]);return qe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(qe.min()))return r}return En.newInvalidDocument(e)}}function wF(n){return new PK(n)}class MK extends EF{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Wo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new tn((s,o)=>rt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=XV(this.ar.serializer,o);i=i.add(s.path.popLast());const l=sv(u);r+=l-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=XV(this.ar.serializer,o.convertToNoDocument(qe.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),Z.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function TF(n){return wr(n,"remoteDocumentGlobal")}function tc(n){return wr(n,"remoteDocumentsV14")}function Fp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CF(n,e){const t=e.documentKey.path.toArray();return[n,tv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=rt(t[s],r[s]),i)return i;return i=rt(t.length,r.length),i||(i=rt(t[t.length-2],r[r.length-2]),i||rt(t[t.length-1],r[r.length-1]))}class NK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&bp(r.mutation,i,Vi.empty(),Sn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ht()){const i=lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Cp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ht()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Fi();const o=Dp(),a=Dp();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof Zo)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),bp(f.mutation,l,f.mutation.getFieldMask(),Sn.now())):o.set(l.key,Vi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new NK(f,null!==(m=o.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Dp();let i=new fn((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||Vi.empty();f=a.applyToLocalView(l,f),r.set(u,f);const m=(i.get(a.batchId)||ht()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,m=pV();f.forEach(y=>{if(!s.has(y)){const E=TV(t.get(y),r.get(y));null!==E&&m.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,m))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):VC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Z.resolve(lo());let a=-1,u=s;return o.next(l=>Z.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?Z.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ht())).next(f=>({batchId:a,changes:fV(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let i=Cp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Cp();return this.indexManager.getCollectionParents(e,s).next(a=>Z.forEach(a,u=>{const l=(m=t,y=u.child(s),new Go(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,En.newInvalidDocument(f)))});let a=Cp();return o.forEach((u,l)=>{const f=s.get(u);void 0!==f&&bp(f.mutation,l,Vi.empty(),Sn.now()),Tp(t,l)&&(a=a.insert(u,l))}),a})}}class xK{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:Jn(i.createTime)}),Z.resolve();var i}getNamedQuery(e,t){return Z.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:KC(i.bundledQuery),readTime:Jn(i.readTime)}),Z.resolve();var i}}class OK{constructor(){this.overlays=new fn(Pe.comparator),this.hr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lo();return Z.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){const i=lo(),s=t.length+1,o=new Pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new fn((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=lo(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=lo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return Z.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jC(t,r));let s=this.hr.get(t);void 0===s&&(s=ht(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class nD{constructor(){this.Pr=new tn(Tr.Ir),this.Tr=new tn(Tr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Tr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Tr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Pe(new St([])),r=new Tr(t,e),i=new Tr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Pe(new St([])),r=new Tr(t,e),i=new Tr(t,e+1);let s=ht();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Tr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Pe.comparator(e.key,t.key)||rt(e.pr,t.pr)}static Er(e,t){return rt(e.pr,t.pr)||Pe.comparator(e.key,t.key)}}class kK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new tn(Tr.Ir)}checkEmpty(e){return Z.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new BC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Tr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,t){return Z.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return Z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tr(t,0),i=new Tr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(rt);return t.forEach(i=>{const s=new Tr(i,0),o=new Tr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Z.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const o=new Tr(new Pe(s),0);let a=new tn(rt);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Z.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){je(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Z.forEach(t.mutations,i=>{const s=new Tr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Tr(t,0),i=this.wr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Z.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class VK{constructor(e){this.vr=e,this.docs=new fn(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=Fi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():En.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Fi();const o=t.path,a=new Pe(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||AC(Tk(f),r)<=0||(i.has(f.key)||Tp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Oe()}Fr(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FK(this)}getSize(e){return Z.resolve(this.size)}}class FK extends EF{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class LK{constructor(e){this.persistence=e,this.Mr=new Wo(t=>Gu(t),Ep),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new nD,this.targetCount=0,this.Lr=ec.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Z.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new ec(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.qn(t),Z.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(s).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.Nr.containsKey(t))}}class rD{constructor(e,t){this.Br={},this.overlays={},this.kr=new Ki(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new LK(this),this.indexManager=new CK,this.remoteDocumentCache=new VK(r=>this.referenceDelegate.Kr(r)),this.serializer=new JV(t),this.$r=new xK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new kK(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new UK(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return Z.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class UK extends Dk{constructor(e){super(),this.currentSequenceNumber=e}}class uv{constructor(e){this.persistence=e,this.zr=new nD,this.jr=null}static Hr(e){return new uv(e)}get Jr(){if(this.jr)return this.jr;throw Oe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Z.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.Jr,r=>{const i=Pe.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,qe.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Z.or([()=>Z.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class BK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Ly("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pk,{unique:!0}),u.createObjectStore("documentMutations"),bF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=Z.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),bF(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pk,{unique:!0});const m=l.store("mutations"),y=f.map(E=>m.put(E));return Z.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:AZ});l.createIndex("collectionPathOverlayIndex",bZ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",SZ,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:gZ});l.createIndex("documentKeyIndex",mZ),l.createIndex("collectionGroupIndex",_Z)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:wZ}).createIndex("sequenceNumberIndex",TZ,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:CZ}).createIndex("documentKeyIndex",DZ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=sv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Z.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>Z.forEach(a,u=>{je(u.userId===s.userId);const l=Yu(this.serializer,u);return pF(e,s.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new St(o),l=[0,Kr(u)];s.push(t.get(l).next(f=>f?Z.resolve():t.put({targetId:0,path:Kr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Z.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:EZ});const r=t.store("collectionParents"),i=new tD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Kr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new St(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{const f=uo(a);return s(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const s=xp(i),o=eF(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Pe(St.fromString(m.document.name).popFirst(5)):m.noDocument?Pe.fromSegments(m.noDocument.path):m.unknownDocument?Pe.fromSegments(m.unknownDocument.path):Oe()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>Z.waitFor(i))}si(e,t){const r=t.store("mutations"),i=wF(this.serializer),s=new rD(uv.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:ht();Yu(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),Z.forEach(a,(u,l)=>{const f=new Er(l),m=nv.lt(this.serializer,f),y=s.getIndexManager(f),E=ov.lt(f,this.serializer,y,s.referenceDelegate);return new AF(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new RC(t,Ki.oe),u).next()})})}}function bF(n){n.createObjectStore("targetDocuments",{keyPath:vZ}).createIndex("documentTargetsIndex",IZ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yZ,{unique:!0}),n.createObjectStore("targetGlobal")}const iD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sD{constructor(e,t,r,i,s,o,a,u,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!sD.D())throw new pe(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RK(this,i),this.Ti=t+"main",this.serializer=new JV(u),this.Ei=new ao(this.Ti,this.ui,new BK(this.serializer)),this.Qr=new AK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wF(this.serializer),this.$r=new yK,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&Yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(X.FAILED_PRECONDITION,iD);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ki(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,oe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,oe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,oe.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(La(e))return me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Lp(e).get("owner").next(t=>Z.resolve(this.Si(t)))}bi(e){return lv(e).delete(this.clientId)}Di(){var e=this;return(0,oe.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=wr(r,"clientMetadata");return i.U().next(s=>{const o=e.vi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return Z.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Z.resolve(!0):Lp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new pe(X.FAILED_PRECONDITION,iD);return!1}}return!(!this.networkEnabled||!this.inForeground)||lv(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,oe.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new RC(t,Ki.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>lv(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return ov.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new DK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return nv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){me("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=16===(u=this.ui)?PZ:15===u?kk:14===u?Ok:13===u?xk:12===u?RZ:11===u?Nk:void Oe();var u;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new RC(a,this.kr?this.kr.next():Ki.oe),"readwrite-primary"===t?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new pe(X.FAILED_PRECONDITION,Ck);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Lp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new pe(X.FAILED_PRECONDITION,iD)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lp(e).put("owner",t)}static D(){return ao.D()}yi(e){const t=Lp(e);return t.get("owner").next(r=>this.Si(r)?(me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Z.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yn(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,lt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lp(n){return wr(n,"owner")}function lv(n){return wr(n,"clientMetadata")}function oD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=ht(),i=ht();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new aD(e,t.fromCache,r,i)}}class $K{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,lt.G6)()?8:Ak((0,lt.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $K;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(rd()<=oo.in.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",hd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Z.resolve()):(rd()<=oo.in.DEBUG&&me("QueryEngine","Query:",hd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rd()<=oo.in.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",hd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):Z.resolve())}ji(e,t){if(oV(t))return Z.resolve(null);let r=Qr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Zy(t,null,"F"),r=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ht(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(t,a);return this.Xi(t,l,o,u.readTime)?this.ji(e,Zy(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return oV(t)||i.isEqual(qe.min())?Z.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?Z.resolve(null):(rd()<=oo.in.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hd(t)),this.es(e,o,t,wk(i,-1)).next(a=>a))})}Zi(e,t){let r=new tn(dV(e));return t.forEach((i,s)=>{Tp(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return rd()<=oo.in.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",hd(t)),this.zi.getDocumentsMatchingQuery(e,t,Zi.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class jK{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new fn(rt),this.rs=new Wo(s=>Gu(s),Ep),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function RF(n,e,t,r){return new jK(n,e,t,r)}function PF(n,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,oe.Z)(function*(n,e){const t=De(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ht();for(const l of i){o.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function MF(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function NF(n,e,t){let r=ht(),i=ht();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Fi();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(qe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function qK(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Td(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,Z.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Cd(n,e,t){return cD.apply(this,arguments)}function cD(){return(cD=(0,oe.Z)(function*(n,e,t){const r=De(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!La(o))throw o;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function dv(n,e,t){const r=De(n);let i=qe.min(),s=ht();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){const m=De(u),y=m.rs.get(f);return void 0!==y?Z.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,o,Qr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:qe.min(),t?s:ht())).next(a=>(kF(r,lV(e),a),{documents:a,hs:s})))}function xF(n,e){const t=De(n),r=De(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function OF(n,e){const t=De(n),r=t.ss.get(e)||qe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,wk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kF(t,e,i),i))}function kF(n,e,t){let r=n.ss.get(e)||qe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function lD(){return(lD=(0,oe.Z)(function*(n,e,t,r){const i=De(n);let s=ht(),o=Fi();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(s=s.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Td(i,(f=r,Qr(ld(St.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>NF(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function WK(n,e){return dD.apply(this,arguments)}function dD(){return(dD=(0,oe.Z)(function*(n,e,t=ht()){const r=yield Td(n,Qr(KC(e.bundledQuery))),i=De(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Jn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(_r.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})})).apply(this,arguments)}function VF(n,e){return`firestore_clients_${n}_${e}`}function FF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hD(n,e){return`firestore_targets_${n}_${e}`}class hv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new pe(i.error.code,i.error.message))),o?new hv(e,t,i.state,s):(Yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Up{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new pe(r.error.code,r.error.message))),s?new Up(e,r.state,i):(Yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=LC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Sk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new fv(e,s):(Yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class fD{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new fD(t.clientId,t.onlineState):(Yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pD{constructor(){this.activeTargetIds=LC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gD{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new fn(rt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=VF(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new pD),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,oe.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(VF(e.persistenceKey,i));if(s){const o=fv.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(hD(this.persistenceKey,e));if(r){const i=Up.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hD(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me("SharedClientState","READ",e,t),t}setItem(e,t){me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,oe.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Ki.oe;if(null!=o)try{const u=JSON.parse(o);je("number"==typeof u),a=u}catch(u){Yn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Ki.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new hv(this.currentUser,e,t,r),s=FF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const t=FF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=hD(this.persistenceKey,e),s=new Up(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return fv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return hv.Es(new Er(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Up.Es(i,t)}xs(e){return fD.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=LC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LF{constructor(){this.no=new pD,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new pD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ZK{io(e){}shutdown(){}}class UF{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pv=null;function mD(){return null===pv?pv=268435456+Math.round(2147483648*Math.random()):pv++,"0x"+pv.toString(16)}const KK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QK{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Jr="WebChannelConnection";class YK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){const a=mD(),u=this.vo(t,r.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,u,l,i).then(f=>(me("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw ki("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+nd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){return`${this.wo}/v1/${r}:${KK[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const s=mD();return new Promise((o,a)=>{const u=new dk;u.setWithCredentials(!0),u.listenOnce(fk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fy.NO_ERROR:const f=u.getResponseJson();me(Jr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Fy.TIMEOUT:me(Jr,`RPC '${e}' ${s} timed out`),a(new pe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Fy.HTTP_ERROR:const m=u.getStatus();if(me(Jr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const b=function(k){const W=k.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(W)>=0?W:X.UNKNOWN}(E.status);a(new pe(b,E.message))}else a(new pe(X.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new pe(X.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{me(Jr,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);me(Jr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=mD(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mk(),a=gk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new hk({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");me(Jr,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let y=!1,E=!1;const b=new QK({lo:k=>{E?me(Jr,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(y||(me(Jr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),me(Jr,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},ho:()=>m.close()}),N=(k,W,B)=>{k.listen(W,K=>{try{B(K)}catch(ae){setTimeout(()=>{throw ae},0)}})};return N(m,dp.EventType.OPEN,()=>{E||(me(Jr,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),N(m,dp.EventType.CLOSE,()=>{E||(E=!0,me(Jr,`RPC '${e}' stream ${i} transport closed`),b.po())}),N(m,dp.EventType.ERROR,k=>{E||(E=!0,ki(Jr,`RPC '${e}' stream ${i} transport errored:`,k),b.po(new pe(X.UNAVAILABLE,"The operation could not be completed")))}),N(m,dp.EventType.MESSAGE,k=>{var W;if(!E){const B=k.data[0];je(!!B);const ae=B.error||(null===(W=B[0])||void 0===W?void 0:W.error);if(ae){me(Jr,`RPC '${e}' stream ${i} received error:`,ae);const Ee=ae.status;let Le=function(F){const j=ar[F];if(void 0!==j)return PV(j)}(Ee),$=ae.message;void 0===Le&&(Le=X.INTERNAL,$="Unknown error status: "+Ee+" with message "+ae.message),E=!0,b.po(new pe(Le,$)),m.close()}else me(Jr,`RPC '${e}' stream ${i} received:`,B),b.yo(B)}}),N(a,pk.STAT_EVENT,k=>{k.stat===TC.PROXY?me(Jr,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===TC.NOPROXY&&me(Jr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}}function BF(){return typeof window<"u"?window:null}function gv(){return typeof document<"u"?document:null}function Bp(n){return new aK(n,!0)}class _D{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class $F{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new _D(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,oe.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,oe.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,oe.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===X.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new pe(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,oe.Z)(function*(){e.state=0,e.start()}))}c_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JK extends $F{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function lK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Oe(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(je(void 0===f||"string"==typeof f),_r.fromBase64String(f||"")):(je(void 0===f||f instanceof Buffer||f instanceof Uint8Array),_r.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?X.UNKNOWN:PV(l.code);return new pe(f,l.message||"")}(o);t=new kV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ho(n,r.document.name),s=Jn(r.document.updateTime),o=r.document.createTime?Jn(r.document.createTime):qe.min(),a=new kr({mapValue:{fields:r.document.fields}}),u=En.newFoundDocument(i,s,o,a);t=new Xy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ho(n,r.document),s=r.readTime?Jn(r.readTime):qe.min(),o=En.newNoDocument(i,s);t=new Xy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ho(n,r.document);t=new Xy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Oe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new tK(i,s);t=new OV(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return qe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?qe.min():o.readTime?Jn(o.readTime):qe.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=WC(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Gy(u)?{documents:GV(s,u)}:{query:ev(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=UV(s,o.resumeToken);const l=zC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(qe.min())>0){a.readTime=_d(s,o.snapshotVersion.toTimestamp());const l=zC(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function hK(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=WC(this.serializer),t.removeTarget=e,this.i_(t)}}class XK extends $F{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function dK(n,e){return n&&n.length>0?(je(void 0!==e),n.map(t=>function(i,s){let o=Jn(i.updateTime?i.updateTime:s);return o.isEqual(qe.min())&&(o=Jn(s)),new JZ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.A_(r,t)}return je(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=WC(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Np(this.serializer,r))};this.i_(t)}}class eQ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,GC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(X.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,GC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(X.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class tQ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Yn(t),this.y_=!1):me("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class nQ{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget((0,oe.Z)(function*(){var u;Ka(o)&&(me("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,oe.Z)(function*(f){const m=De(f);m.M_.add(4),yield Dd(m),m.N_.set("Unknown"),m.M_.delete(4),yield $p(m)}),function l(f){return u.apply(this,arguments)})(o))}))}),this.N_=new tQ(r,i)}}function $p(n){return yD.apply(this,arguments)}function yD(){return(yD=(0,oe.Z)(function*(n){if(Ka(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Dd(n){return vD.apply(this,arguments)}function vD(){return(vD=(0,oe.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function mv(n,e){const t=De(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),wD(t)?ED(t):Sd(t).Xo()&&ID(t,e))}function Ad(n,e){const t=De(n),r=Sd(t);t.F_.delete(e),r.Xo()&&jF(t,e),0===t.F_.size&&(r.Xo()?r.n_():Ka(t)&&t.N_.set("Unknown"))}function ID(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sd(n).P_(e)}function jF(n,e){n.L_.xe(e),Sd(n).I_(e)}function ED(n){n.L_=new rK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sd(n).start(),n.N_.w_()}function wD(n){return Ka(n)&&!Sd(n).Zo()&&n.F_.size>0}function Ka(n){return 0===De(n).M_.size}function HF(n){n.L_=void 0}function rQ(n){return TD.apply(this,arguments)}function TD(){return(TD=(0,oe.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function iQ(n){return CD.apply(this,arguments)}function CD(){return(CD=(0,oe.Z)(function*(n){n.F_.forEach((e,t)=>{ID(n,e)})})).apply(this,arguments)}function sQ(n,e){return DD.apply(this,arguments)}function DD(){return(DD=(0,oe.Z)(function*(n,e){HF(n),wD(n)?(n.N_.D_(e),ED(n)):n.N_.set("Unknown")})).apply(this,arguments)}function oQ(n,e,t){return AD.apply(this,arguments)}function AD(){return AD=(0,oe.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof kV&&2===e.state&&e.cause)try{yield(r=(0,oe.Z)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.F_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.F_.delete(u),s.L_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _v(n,r)}else if(e instanceof Xy?n.L_.Ke(e):e instanceof OV?n.L_.He(e):n.L_.We(e),!t.isEqual(qe.min()))try{const r=yield MF(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(l);f&&s.F_.set(l,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(_r.EMPTY_BYTE_STRING,f.snapshotVersion)),jF(s,u);const m=new Ko(f.target,u,l,f.sequenceNumber);ID(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){me("RemoteStore","Failed to raise snapshot:",r),yield _v(n,r)}var r}),AD.apply(this,arguments)}function _v(n,e,t){return bD.apply(this,arguments)}function bD(){return(bD=(0,oe.Z)(function*(n,e,t){if(!La(e))throw e;n.M_.add(1),yield Dd(n),n.N_.set("Offline"),t||(t=()=>MF(n.localStore)),n.asyncQueue.enqueueRetryable((0,oe.Z)(function*(){me("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield $p(n)}))})).apply(this,arguments)}function zF(n,e){return e().catch(t=>_v(n,t,e))}function bd(n){return SD.apply(this,arguments)}function SD(){return(SD=(0,oe.Z)(function*(n){const e=De(n),t=Qa(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;aQ(e);)try{const i=yield qK(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,uQ(e,i)}catch(i){yield _v(e,i)}qF(e)&&GF(e)})).apply(this,arguments)}function aQ(n){return Ka(n)&&n.v_.length<10}function uQ(n,e){n.v_.push(e);const t=Qa(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function qF(n){return Ka(n)&&!Qa(n).Zo()&&n.v_.length>0}function GF(n){Qa(n).start()}function cQ(n){return RD.apply(this,arguments)}function RD(){return(RD=(0,oe.Z)(function*(n){Qa(n).V_()})).apply(this,arguments)}function lQ(n){return PD.apply(this,arguments)}function PD(){return(PD=(0,oe.Z)(function*(n){const e=Qa(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function dQ(n,e,t){return MD.apply(this,arguments)}function MD(){return(MD=(0,oe.Z)(function*(n,e,t){const r=n.v_.shift(),i=$C.from(r,e,t);yield zF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bd(n)})).apply(this,arguments)}function hQ(n,e){return ND.apply(this,arguments)}function ND(){return ND=(0,oe.Z)(function*(n,e){var t;e&&Qa(n).E_&&(yield(t=(0,oe.Z)(function*(i,s){if(RV(a=s.code)&&a!==X.ABORTED){const o=i.v_.shift();Qa(i).t_(),yield zF(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield bd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),qF(n)&&GF(n)}),ND.apply(this,arguments)}function WF(n,e){return xD.apply(this,arguments)}function xD(){return(xD=(0,oe.Z)(function*(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=Ka(t);t.M_.add(3),yield Dd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield $p(t)})).apply(this,arguments)}function OD(n,e){return kD.apply(this,arguments)}function kD(){return(kD=(0,oe.Z)(function*(n,e){const t=De(n);e?(t.M_.delete(2),yield $p(t)):e||(t.M_.add(2),yield Dd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Sd(n){return n.B_||(n.B_=function(t,r,i){const s=De(t);return s.f_(),new JK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:rQ.bind(null,n),To:iQ.bind(null,n),Ao:sQ.bind(null,n),h_:oQ.bind(null,n)}),n.x_.push(function(){var e=(0,oe.Z)(function*(t){t?(n.B_.t_(),wD(n)?ED(n):n.N_.set("Unknown")):(yield n.B_.stop(),HF(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function Qa(n){return n.k_||(n.k_=function(t,r,i){const s=De(t);return s.f_(),new XK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:cQ.bind(null,n),Ao:hQ.bind(null,n),R_:lQ.bind(null,n),A_:dQ.bind(null,n)}),n.x_.push(function(){var e=(0,oe.Z)(function*(t){t?(n.k_.t_(),yield bd(n)):(yield n.k_.stop(),n.v_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class VD{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new VD(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rd(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),La(n))return new pe(X.UNAVAILABLE,`${e}: ${n}`);throw n}class Pd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Cp(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new Pd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Pd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZF{constructor(){this.q_=new fn(Pe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Oe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Md{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Md(e,t,Pd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class fQ{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class pQ{constructor(){this.queries=new Wo(e=>cV(e),wp),this.onlineState="Unknown",this.z_=new Set}}function FD(n,e){return LD.apply(this,arguments)}function LD(){return(LD=(0,oe.Z)(function*(n,e){const t=De(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new fQ,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Rd(o,`Initialization of query '${hd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&$D(t)})).apply(this,arguments)}function UD(n,e){return BD.apply(this,arguments)}function BD(){return(BD=(0,oe.Z)(function*(n,e){const t=De(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),0===s.U_.length?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function gQ(n,e){const t=De(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&$D(t)}function mQ(n,e,t){const r=De(n),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(t);r.queries.delete(e)}function $D(n){n.z_.forEach(e=>{e.next()})}var jD,KF;(KF=jD||(jD={})).J_="default",KF.Cache="cache";class HD{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Md(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==jD.Cache}}class _Q{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class QF{constructor(e){this.serializer=e}Ps(e){return ho(this.serializer,e)}Is(e){return e.metadata.exists?qV(this.serializer,e.document,!1):En.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Jn(e)}}class yQ{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=YF(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=St.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new QF(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ht()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,oe.Z)(function*(){const t=yield function GK(n,e,t,r){return lD.apply(this,arguments)}(e.localStore,new QF(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield WK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function YF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JF{constructor(e){this.key=e}}class XF{constructor(e){this.key=e}}class eL{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ht(),this.mutatedKeys=ht(),this.Ia=dV(e),this.Ta=new Pd(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new ZF,i=t?t.Ta:this.Ta;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),E=Tp(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;y&&E?y.data.isEqual(E.data)?b!==N&&(r.track({type:3,doc:E}),k=!0):this.Ra(y,E)||(r.track({type:2,doc:E}),k=!0,(u&&this.Ia(E,u)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),k=!0):y&&!E&&(r.track({type:1,doc:y}),k=!0,(u||l)&&(a=!0)),k&&(E?(o=o.add(E),s=N?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((f,m)=>function(E,b){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return N(E)-N(b)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,0!==o.length||l?{snapshot:new Md(this.query,e.Ta,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ZF,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=ht(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new XF(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new JF(r))}),t}pa(e){this.la=e.hs,this.Pa=ht();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Md.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class vQ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class IQ{constructor(e){this.key=e,this.wa=!1}}class EQ{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Wo(a=>cV(a),wp),this.Da=new Map,this.Ca=new Set,this.va=new fn(Pe.comparator),this.Fa=new Map,this.Ma=new nD,this.xa={},this.Oa=new Map,this.Na=ec.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function wQ(n,e){return zD.apply(this,arguments)}function zD(){return(zD=(0,oe.Z)(function*(n,e,t=!0){const r=yv(n);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield tL(r,e,t,!0),i})).apply(this,arguments)}function TQ(n,e){return qD.apply(this,arguments)}function qD(){return(qD=(0,oe.Z)(function*(n,e){const t=yv(n);yield tL(t,e,!0,!1)})).apply(this,arguments)}function tL(n,e,t,r){return GD.apply(this,arguments)}function GD(){return(GD=(0,oe.Z)(function*(n,e,t,r){const i=yield Td(n.localStore,Qr(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield WD(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&mv(n.remoteStore,i),a})).apply(this,arguments)}function WD(n,e,t,r,i){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,oe.Z)(function*(n,e,t,r,i){n.Ba=(m,y,E)=>{return(b=(0,oe.Z)(function*(k,W,B,K){let ae=W.view.da(B);ae.Xi&&(ae=yield dv(k.localStore,W.query,!1).then(({documents:R})=>W.view.da(R,ae)));const Ee=K&&K.targetChanges.get(W.targetId),Le=K&&null!=K.targetMismatches.get(W.targetId),$=W.view.applyChanges(ae,k.isPrimaryClient,Ee,Le);return sA(k,W.targetId,$.fa),$.snapshot}),function N(k,W,B,K){return b.apply(this,arguments)})(n,m,y,E);var b};const s=yield dv(n.localStore,e,!0),o=new eL(e,s.hs),a=o.da(s.documents),u=Pp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);sA(n,t,l.fa);const f=new vQ(e,t,o);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),ZD.apply(this,arguments)}function CQ(n,e,t){return KD.apply(this,arguments)}function KD(){return(KD=(0,oe.Z)(function*(n,e,t){const r=De(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!wp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Cd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ad(r.remoteStore,i.targetId),Nd(r,i.targetId)}).catch(Fa))):(Nd(r,i.targetId),yield Cd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function DQ(n,e){return QD.apply(this,arguments)}function QD(){return(QD=(0,oe.Z)(function*(n,e){const t=De(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ad(t.remoteStore,r.targetId))})).apply(this,arguments)}function YD(){return(YD=(0,oe.Z)(function*(n,e,t){const r=mA(n);try{const i=yield function(o,a){const u=De(o),l=Sn.now(),f=a.reduce((E,b)=>E.add(b.key),ht());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let b=Fi(),N=ht();return u.os.getEntries(E,f).next(k=>{b=k,b.forEach((W,B)=>{B.isValidDocument()||(N=N.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,b)).next(k=>{m=k;const W=[];for(const B of a){const K=eK(B,m.get(B.key).overlayedDocument);null!=K&&W.push(new Zo(B.key,K,Wk(K.value.mapValue),Rn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,W,a)}).next(k=>{y=k;const W=k.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(E,k.batchId,W)})}).then(()=>({batchId:y.batchId,changes:fV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new fn(rt)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Qo(r,i.changes),yield bd(r.remoteStore)}catch(i){const s=Rd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function nL(n,e){return JD.apply(this,arguments)}function JD(){return(JD=(0,oe.Z)(function*(n,e){const t=De(n);try{const r=yield function zK(n,e){const t=De(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(s,f.addedDocuments,m)));let E=y.withSequenceNumber(s.currentSequenceNumber);var N,k,W;null!==e.targetMismatches.get(m)?E=E.withResumeToken(_r.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),k=E,W=f,(0===(N=y).resumeToken.approximateByteSize()||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,E))});let u=Fi(),l=ht();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(NF(s,o,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(qe.min())){const f=t.Qr.getLastRemoteSnapshotVersion(s).next(m=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Fa.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?je(o.wa):i.removedDocuments.size>0&&(je(o.wa),o.wa=!1))}),yield Qo(t,r,e)}catch(r){yield Fa(r)}})).apply(this,arguments)}function rL(n,e,t){const r=De(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=De(o);u.onlineState=a;let l=!1;u.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&$D(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bQ(n,e,t){return XD.apply(this,arguments)}function XD(){return(XD=(0,oe.Z)(function*(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new fn(Pe.comparator);o=o.insert(s,En.newNoDocument(s,qe.min()));const a=ht().add(s),u=new Rp(qe.min(),new Map,new fn(rt),o,a);yield nL(r,u),r.va=r.va.remove(s),r.Fa.delete(e),oA(r)}else yield Cd(r.localStore,e,!1).then(()=>Nd(r,e,t)).catch(Fa)})).apply(this,arguments)}function SQ(n,e){return eA.apply(this,arguments)}function eA(){return(eA=(0,oe.Z)(function*(n,e){const t=De(n),r=e.batch.batchId;try{const i=yield function HK(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const m=l.batch,y=m.keys();let E=Z.resolve();return y.forEach(b=>{E=E.next(()=>f.getEntry(u,b)).next(N=>{const k=l.docVersions.get(b);je(null!==k),N.version.compareTo(k)<0&&(m.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ht();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);iA(t,r,null),rA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qo(t,i)}catch(i){yield Fa(i)}})).apply(this,arguments)}function RQ(n,e,t){return tA.apply(this,arguments)}function tA(){return(tA=(0,oe.Z)(function*(n,e,t){const r=De(n);try{const i=yield function(o,a){const u=De(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(m=>(je(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(l,m))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);iA(r,e,t),rA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qo(r,i)}catch(i){yield Fa(i)}})).apply(this,arguments)}function nA(){return(nA=(0,oe.Z)(function*(n,e){const t=De(n);Ka(t.remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=De(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Rd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function rA(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function iA(n,e,t){const r=De(n);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Nd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||iL(n,r)})}function iL(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Ad(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),oA(n))}function sA(n,e,t){for(const r of t)r instanceof JF?(n.Ma.addReference(r.key,e),MQ(n,r)):r instanceof XF?(me("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||iL(n,r.key)):Oe()}function MQ(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(me("SyncEngine","New document in limbo: "+t),n.Ca.add(r),oA(n))}function oA(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Pe(St.fromString(e)),r=n.Na.next();n.Fa.set(r,new IQ(t)),n.va=n.va.insert(t,r),mv(n.remoteStore,new Ko(Qr(ld(t.path)),r,"TargetPurposeLimboResolution",Ki.oe))}}function Qo(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,oe.Z)(function*(n,e,t){const r=De(n),i=[],s=[],o=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=aD.Ki(u.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield(a=(0,oe.Z)(function*(l,f){const m=De(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(f,E=>Z.forEach(E.qi,b=>m.persistence.referenceDelegate.addReference(y,E.targetId,b)).next(()=>Z.forEach(E.Qi,b=>m.persistence.referenceDelegate.removeReference(y,E.targetId,b)))))}catch(y){if(!La(y))throw y;me("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const b=m.ns.get(E),k=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.ns=m.ns.insert(E,k)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,s))}),aA.apply(this,arguments)}function NQ(n,e){return uA.apply(this,arguments)}function uA(){return(uA=(0,oe.Z)(function*(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=yield PF(t.localStore,e);t.currentUser=e,(s=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new pe(X.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qo(t,r.us)}var s})).apply(this,arguments)}function xQ(n,e){const t=De(n),r=t.Fa.get(e);if(r&&r.wa)return ht().add(r.key);{let i=ht();const s=t.Da.get(e);if(!s)return i;for(const o of s){const a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function OQ(n,e){return cA.apply(this,arguments)}function cA(){return(cA=(0,oe.Z)(function*(n,e){const t=De(n),r=yield dv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&sA(t,e.targetId,i.fa),i})).apply(this,arguments)}function kQ(n,e){return lA.apply(this,arguments)}function lA(){return(lA=(0,oe.Z)(function*(n,e){const t=De(n);return OF(t.localStore,e).then(r=>Qo(t,r))})).apply(this,arguments)}function VQ(n,e,t,r){return dA.apply(this,arguments)}function dA(){return(dA=(0,oe.Z)(function*(n,e,t,r){const i=De(n),s=yield function(a,u){const l=De(a),f=De(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(y=>y?l.localDocuments.getDocuments(m,y):Z.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield bd(i.remoteStore):"acknowledged"===t||"rejected"===t?(iA(i,e,r||null),rA(i,e),u=e,De(De(i.localStore).mutationQueue).Mn(u)):Oe(),yield Qo(i,s)):me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function hA(){return(hA=(0,oe.Z)(function*(n,e){const t=De(n);if(yv(t),mA(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sL(t,r.toArray());t.La=!0,yield OD(t.remoteStore,!0);for(const s of i)mv(t.remoteStore,s)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Nd(t,o),Cd(t.localStore,o,!0))),Ad(t.remoteStore,o)}),yield i,yield sL(t,r),function(o){const a=De(o);a.Fa.forEach((u,l)=>{Ad(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new fn(Pe.comparator)}(t),t.La=!1,yield OD(t.remoteStore,!1)}})).apply(this,arguments)}function sL(n,e,t){return fA.apply(this,arguments)}function fA(){return(fA=(0,oe.Z)(function*(n,e,t){const r=De(n),i=[],s=[];for(const o of e){let a;const u=r.Da.get(o);if(u&&0!==u.length){a=yield Td(r.localStore,Qr(u[0]));for(const l of u){const f=r.ba.get(l),m=yield OQ(r,f);m.snapshot&&s.push(m.snapshot)}}else{const l=yield xF(r.localStore,o);a=yield Td(r.localStore,l),yield WD(r,oL(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})).apply(this,arguments)}function oL(n){return sV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LQ(n){return t=De(n).localStore,De(De(t).persistence).Bi();var t}function UQ(n,e,t,r){return pA.apply(this,arguments)}function pA(){return(pA=(0,oe.Z)(function*(n,e,t,r){const i=De(n);if(i.La)return void me("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield OF(i.localStore,lV(s[0])),a=Rp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_r.EMPTY_BYTE_STRING);yield Qo(i,o,a);break}case"rejected":yield Cd(i.localStore,e,!0),Nd(i,e,r);break;default:Oe()}})).apply(this,arguments)}function BQ(n,e,t){return gA.apply(this,arguments)}function gA(){return(gA=(0,oe.Z)(function*(n,e,t){const r=yv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){me("SyncEngine","Adding an already active target "+i);continue}const s=yield xF(r.localStore,i),o=yield Td(r.localStore,s);yield WD(r,oL(s),o.targetId,!1,o.resumeToken),mv(r.remoteStore,o)}for(const i of t)r.Da.has(i)&&(yield Cd(r.localStore,i,!1).then(()=>{Ad(r.remoteStore,i),Nd(r,i)}).catch(Fa))}})).apply(this,arguments)}function yv(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bQ.bind(null,e),e.Sa.h_=gQ.bind(null,e.eventManager),e.Sa.ka=mQ.bind(null,e.eventManager),e}function mA(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RQ.bind(null,e),e}class jp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,oe.Z)(function*(){t.serializer=Bp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return RF(this.persistence,new SF,e.initialUser,this.serializer)}createPersistence(e){return new rD(uv.Hr,this.serializer)}createSharedClientState(e){return new LF}terminate(){var e=this;return(0,oe.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _A extends jp{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield mA(r.Qa.syncEngine),yield bd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return RF(this.persistence,new SF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new vF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new hZ(t,this.persistence);return new dZ(e.asyncQueue,r)}createPersistence(e){const t=oD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Yr.withCacheSize(this.cacheSizeBytes):Yr.DEFAULT;return new sD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,BF(),gv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LF}}class aL extends _A{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,oe.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof gD&&(r.sharedClientState.syncEngine={Zs:VQ.bind(null,i),Xs:UQ.bind(null,i),eo:BQ.bind(null,i),Bi:LQ.bind(null,i),Ys:kQ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,oe.Z)(function*(o){yield function FQ(n,e){return hA.apply(this,arguments)}(r.Qa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=BF();if(!gD.D(t))throw new pe(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class xd{initialize(e,t){var r=this;return(0,oe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>rL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=NQ.bind(null,r.syncEngine),yield OD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pQ}createDatastore(e){const t=Bp(e.databaseInfo.databaseId),r=new YK(e.databaseInfo);return new eQ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>rL(this.syncEngine,t,0),a=UF.D()?new UF:new ZK,new nQ(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,u,l,f){const m=new EQ(i,s,o,a,u,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,oe.Z)(function*(){var t,r;yield(r=(0,oe.Z)(function*(s){const o=De(s);me("RemoteStore","RemoteStore shutting down."),o.M_.add(5),yield Dd(o),o.O_.shutdown(),o.N_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function uL(n,e=10240){let t=0;return{read:()=>(0,oe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HQ{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new mr,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,oe.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,oe.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,oe.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const s=yield e.Ha(i);return new _Q(JSON.parse(s),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,oe.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,oe.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class zQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new pe(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,oe.Z)(function*(o,a){const u=De(o),l={documents:a.map(E=>Mp(u.serializer,E))},f=yield u.xo("BatchGetDocuments",u.serializer.databaseId,St.emptyPath(),l,a.length),m=new Map;f.forEach(E=>{const b=function cK(n,e){return"found"in e?function(r,i){je(!!i.found);const s=ho(r,i.found.name),o=Jn(i.found.updateTime),a=i.found.createTime?Jn(i.found.createTime):qe.min(),u=new kr({mapValue:{fields:i.found.fields}});return En.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){je(!!i.missing),je(!!i.readTime);const s=ho(r,i.missing),o=Jn(i.readTime);return En.newNoDocument(s,o)}(n,e):Oe()}(u.serializer,E);m.set(b.key.toString(),b)});const y=[];return a.forEach(E=>{const b=m.get(E.toString());je(!!b),y.push(b)}),y}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pe.fromPath(i);e.mutations.push(new UC(s,e.precondition(s)))}),yield(r=(0,oe.Z)(function*(s,o){const a=De(s),u={writes:o.map(l=>Np(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,St.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Oe();t=qe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new pe(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(qe.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qe.min()))throw new pe(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qQ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new _D(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,oe.Z)(function*(){const t=new zQ(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.nu(s)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!pp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!RV(t)}return!1}}class GQ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Er.UNAUTHENTICATED,this.clientId=Ik.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,oe.Z)(function*(a){me("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(me("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pe(X.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Rd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Iv(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,oe.Z)(function*(s){r.isEqual(s)||(yield PF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),yA.apply(this,arguments)}function vA(n,e){return IA.apply(this,arguments)}function IA(){return(IA=(0,oe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield EA(n);me("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>WF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>WF(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function cL(n){return"FirebaseError"===n.name?n.code===X.FAILED_PRECONDITION||n.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function EA(n){return wA.apply(this,arguments)}function wA(){return(wA=(0,oe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Iv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!cL(t))throw t;ki("Error using user provided cache. Falling back to memory cache: "+t),yield Iv(n,new jp)}}else me("FirestoreClient","Using default OfflineComponentProvider"),yield Iv(n,new jp);return n._offlineComponents})).apply(this,arguments)}function Ev(n){return TA.apply(this,arguments)}function TA(){return(TA=(0,oe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),yield vA(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),yield vA(n,new xd))),n._onlineComponents})).apply(this,arguments)}function lL(n){return EA(n).then(e=>e.persistence)}function Od(n){return EA(n).then(e=>e.localStore)}function dL(n){return Ev(n).then(e=>e.remoteStore)}function CA(n){return Ev(n).then(e=>e.syncEngine)}function kd(n){return DA.apply(this,arguments)}function DA(){return(DA=(0,oe.Z)(function*(n){const e=yield Ev(n),t=e.eventManager;return t.onListen=wQ.bind(null,e.syncEngine),t.onUnlisten=CQ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TQ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DQ.bind(null,e.syncEngine),t})).apply(this,arguments)}function fL(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(s,o,a,u,l){const f=new vv({next:y=>{o.enqueueAndForget(()=>UD(s,m));const E=y.docs.has(a);!E&&y.fromCache?l.reject(new pe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?l.reject(new pe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new HD(ld(a.path),f,{includeMetadataChanges:!0,ra:!0});return FD(s,m)}(yield kd(n),n.asyncQueue,e,t,r)})),r.promise}function pL(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function(s,o,a,u,l){const f=new vv({next:y=>{o.enqueueAndForget(()=>UD(s,m)),y.fromCache&&"server"===u.source?l.reject(new pe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new HD(a,f,{includeMetadataChanges:!0,ra:!0});return FD(s,m)}(yield kd(n),n.asyncQueue,e,t,r)})),r.promise}function gL(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const mL=new Map;function AA(n,e,t){if(!t)throw new pe(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _L(n,e,t,r){if(!0===e&&!0===r)throw new pe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yL(n){if(!Pe.isDocumentKey(n))throw new pe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vL(n){if(Pe.isDocumentKey(n))throw new pe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Oe()}function yt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wv(n);throw new pe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IL(n,e){if(e<=0)throw new pe(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new pe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new pe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_L("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new pe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new X7;switch(r.type){case"firstParty":return new rZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mL.get(t);r&&(me("ComponentProvider","Removing Datastore"),mL.delete(t),r.terminate())}(this),Promise.resolve()}}function wL(n,e,t,r={}){var i;const s=(n=yt(n,Hp))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Er.MOCK_USER;else{a=(0,lt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new pe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Er(l)}n._authCredentials=new eZ(new yk(a,u))}}class Vr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class fo extends Vr{constructor(e,t,r){super(e,t,ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Pe(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function TL(n,e,...t){if(n=(0,lt.m9)(n),AA("collection","path",e),n instanceof Hp){const r=St.fromString(e,...t);return vL(r),new fo(n,null,r)}{if(!(n instanceof wn||n instanceof fo))throw new pe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return vL(r),new fo(n.firestore,null,r)}}function Tv(n,e,...t){if(n=(0,lt.m9)(n),1===arguments.length&&(e=Ik.newId()),AA("doc","path",e),n instanceof Hp){const r=St.fromString(e,...t);return yL(r),new wn(n,null,new Pe(r))}{if(!(n instanceof wn||n instanceof fo))throw new pe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return yL(r),new wn(n.firestore,n instanceof fo?n.converter:null,new Pe(r))}}function CL(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),(n instanceof wn||n instanceof fo)&&(e instanceof wn||e instanceof fo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bA(n,e){return n=(0,lt.m9)(n),e=(0,lt.m9)(e),n instanceof Vr&&e instanceof Vr&&n.firestore===e.firestore&&wp(n._query,e._query)&&n.converter===e.converter}class sY{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new _D(this,"async_queue_retry"),this.hu=()=>{const t=gv();t&&me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=gv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=gv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new mr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,oe.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!La(t))throw t;me("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=VD.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Oe()}verifyOperationInProgress(){}du(){var e=this;return(0,oe.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function SA(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class oY{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends Hp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DL(this),this._firestoreClient.terminate()}}function uY(n,e){const t="object"==typeof n?n:(0,$n.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,$n._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,lt.P0)("firestore");s&&wL(i,...s)}return i}function Pn(n){return n._firestoreClient||DL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DL(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xZ(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,gL(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new GQ(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function AL(n,e,t){const r=new mr;return n.asyncQueue.enqueue((0,oe.Z)(function*(){try{yield Iv(n,t),yield vA(n,e),r.resolve()}catch(i){const s=i;if(!cL(s))throw s;ki("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function bL(n){if(n._initialized||n._terminated)throw new pe(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(_r.fromBase64String(e))}catch(t){throw new pe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new po(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new pe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nc{constructor(e){this._methodName=e}}class Cv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}const yY=/^__.*__$/;class vY{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new gd(e,this.data,t,this.fieldTransforms)}}class SL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Dv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Dv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Sv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(RL(this.fu)&&yY.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class IY{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bp(e)}Fu(e,t,r,i=!1){return new Dv({fu:e,methodName:t,vu:r,path:In.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rc(n){const e=n._freezeSettings(),t=Bp(n._databaseId);return new IY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Av(n,e,t,r,i,s={}){const o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);kA("Data must be an object, but it was:",o,r);const a=NL(r,o);let u,l;if(s.merge)u=new Vi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=Gp(e,m,t);if(!o.contains(y))throw new pe(X.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);OL(f,y)||f.push(y)}u=new Vi(f),l=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,l=o.fieldTransforms;return new vY(new kr(a),u,l)}class qp extends nc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qp}}function PL(n,e,t){return new Dv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class RA extends nc{_toFieldTransform(e){return new Ap(e.path,new fd)}isEqual(e){return e instanceof RA}}class PA extends nc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=PL(this,e,!0),r=this.Mu.map(s=>ic(s,t)),i=new Wu(r);return new Ap(e.path,i)}isEqual(e){return e instanceof PA&&(0,lt.vZ)(this.Mu,e.Mu)}}class MA extends nc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=PL(this,e,!0),r=this.Mu.map(s=>ic(s,t)),i=new Zu(r);return new Ap(e.path,i)}isEqual(e){return e instanceof MA&&(0,lt.vZ)(this.Mu,e.Mu)}}class NA extends nc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new pd(e.serializer,_V(e.serializer,this.xu));return new Ap(e.path,t)}isEqual(e){return e instanceof NA&&this.xu===e.xu}}function xA(n,e,t,r){const i=n.Fu(1,e,t);kA("Data must be an object, but it was:",i,r);const s=[],o=kr.empty();Ua(r,(u,l)=>{const f=bv(e,u,t);l=(0,lt.m9)(l);const m=i.Su(f);if(l instanceof qp)s.push(f);else{const y=ic(l,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Vi(s);return new SL(o,a,i.fieldTransforms)}function OA(n,e,t,r,i,s){const o=n.Fu(1,e,t),a=[Gp(e,r,t)],u=[i];if(s.length%2!=0)throw new pe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Gp(e,s[y])),u.push(s[y+1]);const l=[],f=kr.empty();for(let y=a.length-1;y>=0;--y)if(!OL(l,a[y])){const E=a[y];let b=u[y];b=(0,lt.m9)(b);const N=o.Su(E);if(b instanceof qp)l.push(E);else{const k=ic(b,N);null!=k&&(l.push(E),f.set(E,k))}}const m=new Vi(l);return new SL(f,m,o.fieldTransforms)}function ML(n,e,t,r=!1){return ic(t,n.Fu(r?4:3,e))}function ic(n,e){if(xL(n=(0,lt.m9)(n)))return kA("Unsupported field value:",e,n),NL(n,e);if(n instanceof nc)return function(r,i){if(!RL(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ic(a,i.bu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,lt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return _V(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Sn.fromDate(r);return{timestampValue:_d(i.serializer,s)}}if(r instanceof Sn){const s=new Sn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_d(i.serializer,s)}}if(r instanceof Cv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:UV(i.serializer,r._byteString)};if(r instanceof wn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qC(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${wv(r)}`)}(n,e)}function NL(n,e){const t={};return Lk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,(r,i)=>{const s=ic(i,e.pu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function xL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof Cv||n instanceof po||n instanceof wn||n instanceof nc)}function kA(n,e,t){if(!xL(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=wv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function Gp(n,e,t){if((e=(0,lt.m9)(e))instanceof Yo)return e._internalPath;if("string"==typeof e)return bv(n,e);throw Sv("Field path arguments must be of type string or ",n,!1,void 0,t)}const EY=new RegExp("[~\\*/\\[\\]]");function bv(n,e,t){if(e.search(EY)>=0)throw Sv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yo(...e.split("."))._internalPath}catch{throw Sv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new pe(X.INVALID_ARGUMENT,a+n+u)}function OL(n,e){return n.some(t=>t.isEqual(e))}class Wp{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wY extends Wp{data(){return super.data()}}function Rv(n,e){return"string"==typeof e?bv(n,e):e instanceof Yo?e._internalPath:e._delegate._internalPath}function kL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new pe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VA{}class Zp extends VA{}function Ya(n,e,...t){let r=[];e instanceof VA&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Vd).length,a=s.filter(u=>u instanceof Kp).length;if(o>1||o>0&&a>0)throw new pe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Kp extends Zp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Kp(e,t,r)}_apply(e){const t=this._parse(e);return UL(e._query,t),new Vr(e.firestore,e.converter,FC(e._query,t))}_parse(e){const t=rc(e.firestore);return function(s,o,a,u,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new pe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){LL(m,f);const E=[];for(const b of m)E.push(FL(u,s,b));y={arrayValue:{values:E}}}else y=FL(u,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||LL(m,f),y=ML(a,"where",m,"in"===f||"not-in"===f);return Rt.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vd extends VA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)UL(o,u),o=FC(o,u)}(e._query,t),new Vr(e.firestore,e.converter,FC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class FA extends Zp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new FA(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new pe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new pe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ip(s,o)}(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Go(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Pv extends Zp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Pv(e,t,r)}_apply(e){return new Vr(e.firestore,e.converter,Zy(e._query,this._limit,this._limitType))}}class Mv extends Zp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Mv(e,t,r)}_apply(e){const t=VL(e,this.type,this._docOrFields,this._inclusive);return new Vr(e.firestore,e.converter,(s=t,new Go((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Nv extends Zp{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Nv(e,t,r)}_apply(e){const t=VL(e,this.type,this._docOrFields,this._inclusive);return new Vr(e.firestore,e.converter,(s=t,new Go((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function VL(n,e,t,r){if(t[0]=(0,lt.m9)(t[0]),t[0]instanceof Wp)return function(s,o,a,u,l){if(!u)throw new pe(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of dd(s))if(m.field.isKeyField())f.push(qu(o,u.key));else{const y=u.data.field(m.field);if($y(y))throw new pe(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new pe(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(y)}return new za(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=rc(n.firestore);return function(o,a,u,l,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new pe(X.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let b=0;b<f.length;b++){const N=f[b];if(y[b].field.isKeyField()){if("string"!=typeof N)throw new pe(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!VC(o)&&-1!==N.indexOf("/"))throw new pe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);const k=o.path.child(St.fromString(N));if(!Pe.isDocumentKey(k))throw new pe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${k}' is not because it contains an odd number of segments.`);const W=new Pe(k);E.push(qu(a,W))}else{const k=ML(u,l,N);E.push(k)}}return new za(E,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FL(n,e,t){if("string"==typeof(t=(0,lt.m9)(t))){if(""===t)throw new pe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VC(e)&&-1!==t.indexOf("/"))throw new pe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Pe.isDocumentKey(r))throw new pe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qu(n,new Pe(r))}if(t instanceof wn)return qu(n,t._key);throw new pe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wv(t)}.`)}function LL(n,e){if(!Array.isArray(n)||0===n.length)throw new pe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UL(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new pe(X.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class LA{convertValue(e,t="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ua(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Cv(jn(e.latitude),jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mp(e));default:return null}}convertTimestamp(e){const t=zo(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);je(YV(r));const i=new Ba(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(t)||Yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function xv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MY extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}class sc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends Wp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qp extends Jo{data(e={}){return super.data(e)}}class Ja{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qp(this._firestore,this._userDataWriter,r.key,r,new sc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Qp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Qp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:xY(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function $L(n,e){return n instanceof Jo&&e instanceof Jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ja&&e instanceof Ja&&n._firestore===e._firestore&&bA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Xa extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function jL(n,e,t){n=yt(n,wn);const r=yt(n.firestore,nn),i=xv(n.converter,e,t);return Fd(r,[Av(rc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rn.none())])}function HL(n,e,t,...r){n=yt(n,wn);const i=yt(n.firestore,nn),s=rc(i);let o;return o="string"==typeof(e=(0,lt.m9)(e))||e instanceof Yo?OA(s,"updateDoc",n._key,e,t,r):xA(s,"updateDoc",n._key,e),Fd(i,[o.toMutation(n._key,Rn.exists(!0))])}function zL(n,...e){var t,r,i;n=(0,lt.m9)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||SA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(SA(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,l,f;if(n instanceof wn)l=yt(n.firestore,nn),f=ld(n._key.path),u={next:m=>{e[o]&&e[o](UA(l,n,m))},error:e[o+1],complete:e[o+2]};else{const m=yt(n,Vr);l=yt(m.firestore,nn),f=m._query;const y=new Xa(l);u={next:E=>{e[o]&&e[o](new Ja(l,y,m,E))},error:e[o+1],complete:e[o+2]},kL(n._query)}return function(y,E,b,N){const k=new vv(N),W=new HD(E,k,b);return y.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return FD(yield kd(y),W)})),()=>{k.$a(),y.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return UD(yield kd(y),W)}))}}(Pn(l),f,a,u)}function Fd(n,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function AQ(n,e,t){return YD.apply(this,arguments)}(yield CA(r),i,s)})),s.promise}(Pn(n),e)}function UA(n,e,t){const r=t.docs.get(e._key),i=new Xa(n);return new Jo(n,i,e._key,r,new sc(t.hasPendingWrites,t.fromCache),e.converter)}const YY={maxAttempts:5};class qL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rc(e)}set(e,t,r){this._verifyNotCommitted();const i=eu(e,this._firestore),s=xv(i.converter,t,r),o=Av(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=eu(e,this._firestore);let o;return o="string"==typeof(t=(0,lt.m9)(t))||t instanceof Yo?OA(this._dataReader,"WriteBatch.update",s._key,t,r,i):xA(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=eu(e,this._firestore);return this._mutations=this._mutations.concat(new md(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eu(n,e){if((n=(0,lt.m9)(n)).firestore!==e)throw new pe(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class JY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=rc(t)}get(t){const r=eu(t,this._firestore),i=new MY(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Oe();const o=s[0];if(o.isFoundDocument())return new Wp(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Wp(this._firestore,i,r._key,null,r.converter);throw Oe()})}set(t,r,i){const s=eu(t,this._firestore),o=xv(s.converter,r,i),a=Av(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=eu(t,this._firestore);let a;return a="string"==typeof(r=(0,lt.m9)(r))||r instanceof Yo?OA(this._dataReader,"Transaction.update",o._key,r,i,s):xA(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=eu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=eu(e,this._firestore),r=new Xa(this._firestore);return super.get(e).then(i=>new Jo(this._firestore,r,t._key,i._document,new sc(!1,!1),t.converter))}}function $A(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KL(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function QL(){if(!function MZ(){return typeof atob<"u"}())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){nd=$n.SDK_VERSION,(0,$n._registerComponent)(new ky.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nn(new tZ(r.getProvider("auth-internal")),new iZ(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new pe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ba(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)(_k,"4.6.3",e),(0,$n.registerVersion)(_k,"4.6.3","esm2017")}();class Yp{constructor(e){this._delegate=e}static fromBase64String(e){return QL(),new Yp(po.fromBase64String(e))}static fromUint8Array(e){return KL(),new Yp(po.fromUint8Array(e))}toBase64(){return QL(),this._delegate.toBase64()}toUint8Array(){return KL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jA(n){return function uJ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cJ{enableIndexedDbPersistence(e,t){return function cY(n,e){bL(n=yt(n,nn));const t=Pn(n);if(t._uninitializedComponentsProvider)throw new pe(X.FAILED_PRECONDITION,"SDK cache is already specified.");ki("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new xd;return AL(t,i,new _A(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lY(n){bL(n=yt(n,nn));const e=Pn(n);if(e._uninitializedComponentsProvider)throw new pe(X.FAILED_PRECONDITION,"SDK cache is already specified.");ki("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new xd;return AL(e,r,new aL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dY(n){if(n._initialized&&!n._terminated)throw new pe(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,oe.Z)(function*(){try{yield(t=(0,oe.Z)(function*(i){if(!ao.D())return Promise.resolve();const s=i+"main";yield ao.delete(s)}),function r(i){return t.apply(this,arguments)})(oD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class YL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ba||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ki("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){wL(this._delegate,e,t,r)}enableNetwork(){return function fY(n){return function WQ(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield lL(n),t=yield dL(n);return e.setNetworkEnabled(!0),function(i){const s=De(i);return s.M_.delete(0),$p(s)}(t)}))}(Pn(n=yt(n,nn)))}(this._delegate)}disableNetwork(){return function pY(n){return function ZQ(n){return n.asyncQueue.enqueue((0,oe.Z)(function*(){const e=yield lL(n),t=yield dL(n);return e.setNetworkEnabled(!1),(r=(0,oe.Z)(function*(s){const o=De(s);o.M_.add(0),yield Dd(o),o.N_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Pn(n=yt(n,nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_L("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hY(n){return function(t){const r=new mr;return t.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return function PQ(n,e){return nA.apply(this,arguments)}(yield CA(t),r)})),r.promise}(Pn(n=yt(n,nn)))}(this._delegate)}onSnapshotsInSync(e){return function jY(n,e){return function JQ(n,e){const t=new vv(e);return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return i=yield kd(n),s=t,De(i).z_.add(s),void s.next();var i,s})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return i=yield kd(n),s=t,void De(i).z_.delete(s);var i,s}))}}(Pn(n=yt(n,nn)),SA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ld(this,TL(this._delegate,e))}catch(t){throw _i(t,"collection()","Firestore.collection()")}}doc(e){try{return new ps(this,Tv(this._delegate,e))}catch(t){throw _i(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yi(this,function iY(n,e){if(n=yt(n,Hp),AA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vr(n,null,(r=e,new Go(St.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw _i(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function XY(n,e,t){n=yt(n,nn);const r=Object.assign(Object.assign({},YY),t);return function(s){if(s.maxAttempts<1)throw new pe(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new mr;return s.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){const l=yield function hL(n){return Ev(n).then(e=>e.datastore)}(s);new qQ(s.asyncQueue,l,a,o,u).Xa()})),u.promise}(Pn(n),i=>e(new JY(n,i)),r)}(this._delegate,t=>e(new JL(this,t)))}batch(){return Pn(this._delegate),new XL(new qL(this._delegate,e=>Fd(this._delegate,e)))}loadBundle(e){return function gY(n,e){const t=Pn(n=yt(n,nn)),r=new oY;return function XQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?MV().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return uL(f,m);if(f instanceof ArrayBuffer)return uL(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new HQ(f,a);var f}(t,Bp(e));n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){!function $Q(n,e,t){const r=De(n);var i;(i=(0,oe.Z)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(b,N){const k=De(b),W=Jn(N.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",B=>k.$r.getBundleMetadata(B,N.id)).then(B=>!!B&&B.createTime.compareTo(W)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(b=l).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);u._updateProgress(YF(l));const f=new yQ(l,o.localStore,a.serializer);let m=yield a.qa();for(;m;){const E=yield f._a(m);E&&u._updateProgress(E),m=yield a.qa()}const y=yield f.complete();return yield Qo(o,y.ca,void 0),yield function(b,N){const k=De(b);return k.persistence.runTransaction("Save bundle","readwrite",W=>k.$r.saveBundleMetadata(W,N))}(o.localStore,l),u._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return ki("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var b}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mY(n,e){return function eY(n,e){return n.asyncQueue.enqueue((0,oe.Z)(function*(){return function(r,i){const s=De(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Od(n),e)}))}(Pn(n=yt(n,nn)),e).then(t=>t?new Vr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new yi(this,t):null)}}class kv extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yp(new po(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ps.forKey(t,this.firestore,null)}}class JL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}get(e){const t=ac(e);return this._delegate.get(t).then(r=>new Jp(this._firestore,new Jo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ac(e);return r?($A("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ac(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ac(e);return this._delegate.delete(t),this}}class XL{constructor(e){this._delegate=e}set(e,t,r){const i=ac(e);return r?($A("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=ac(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=ac(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class oc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Qp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xp(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=oc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new oc(e,new kv(e),t),i.set(t,s)),s}}oc.INSTANCES=new WeakMap;class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ps(t,new wn(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new ps(t,new wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ld(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ld(this.firestore,TL(this._delegate,e))}catch(t){throw _i(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,lt.m9)(e))instanceof wn&&CL(this._delegate,e)}set(e,t){t=$A("DocumentReference.set",t);try{return t?jL(this._delegate,e,t):jL(this._delegate,e)}catch(r){throw _i(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HL(this._delegate,e):HL(this._delegate,e,t,...r)}catch(i){throw _i(i,"updateDoc()","DocumentReference.update()")}}delete(){return function BY(n){return Fd(yt(n.firestore,nn),[new md(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=e2(e),r=t2(e,i=>new Jp(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zL(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kY(n){n=yt(n,wn);const e=yt(n.firestore,nn),t=Pn(e),r=new Xa(e);return function KQ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(s,o,a){try{const u=yield function(f,m){const y=De(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new pe(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Rd(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Od(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Jo(e,r,n._key,i,new sc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function VY(n){n=yt(n,wn);const e=yt(n.firestore,nn);return fL(Pn(e),n._key,{source:"server"}).then(t=>UA(e,n,t))}(this._delegate):function OY(n){n=yt(n,wn);const e=yt(n.firestore,nn);return fL(Pn(e),n._key).then(t=>UA(e,n,t))}(this._delegate),t.then(r=>new Jp(this.firestore,new Jo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?oc.getInstance(this.firestore,e):null))}}function _i(n,e,t){return n.message=n.message.replace(e,t),n}function e2(n){for(const e of n)if("object"==typeof e&&!jA(e))return e;return{}}function t2(n,e){var t,r;let i;return i=jA(n[0])?n[0]:jA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Jp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ps(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $L(this._delegate,e._delegate)}}class Xp extends Jp{data(e){const t=this._delegate.data(e);return this._delegate._converter||function J7(n,e){n||Oe()}(void 0!==t),t}}class yi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kv(e)}where(e,t,r){try{return new yi(this.firestore,Ya(this._delegate,function TY(n,e,t){const r=e,i=Rv("where",n);return Kp._create(i,r,t)}(e,t,r)))}catch(i){throw _i(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new yi(this.firestore,Ya(this._delegate,function CY(n,e="asc"){const t=e,r=Rv("orderBy",n);return FA._create(r,t)}(e,t)))}catch(r){throw _i(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yi(this.firestore,Ya(this._delegate,function DY(n){return IL("limit",n),Pv._create("limit",n,"F")}(e)))}catch(t){throw _i(t,"limit()","Query.limit()")}}limitToLast(e){try{return new yi(this.firestore,Ya(this._delegate,function AY(n){return IL("limitToLast",n),Pv._create("limitToLast",n,"L")}(e)))}catch(t){throw _i(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new yi(this.firestore,Ya(this._delegate,function bY(...n){return Mv._create("startAt",n,!0)}(...e)))}catch(t){throw _i(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new yi(this.firestore,Ya(this._delegate,function SY(...n){return Mv._create("startAfter",n,!1)}(...e)))}catch(t){throw _i(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new yi(this.firestore,Ya(this._delegate,function RY(...n){return Nv._create("endBefore",n,!1)}(...e)))}catch(t){throw _i(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new yi(this.firestore,Ya(this._delegate,function PY(...n){return Nv._create("endAt",n,!0)}(...e)))}catch(t){throw _i(t,"endAt()","Query.endAt()")}}isEqual(e){return bA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function LY(n){n=yt(n,Vr);const e=yt(n.firestore,nn),t=Pn(e),r=new Xa(e);return function QQ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,oe.Z)(function*(){return(r=(0,oe.Z)(function*(s,o,a){try{const u=yield dv(s,o,!0),l=new eL(o,u.hs),f=l.da(u.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const l=Rd(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Od(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate):"server"===e?.source?function UY(n){n=yt(n,Vr);const e=yt(n.firestore,nn),t=Pn(e),r=new Xa(e);return pL(t,n._query,{source:"server"}).then(i=>new Ja(e,r,n,i))}(this._delegate):function FY(n){n=yt(n,Vr);const e=yt(n.firestore,nn),t=Pn(e),r=new Xa(e);return kL(n._query),pL(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate),t.then(r=>new HA(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=e2(e),r=t2(e,i=>new HA(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zL(this._delegate,t,r)}withConverter(e){return new yi(this.firestore,this._delegate.withConverter(e?oc.getInstance(this.firestore,e):null))}}class dJ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new yi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dJ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xp(this._firestore,r))})}isEqual(e){return $L(this._delegate,e._delegate)}}class Ld extends yi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ps(this.firestore,e):null}doc(e){try{return new ps(this.firestore,void 0===e?Tv(this._delegate):Tv(this._delegate,e))}catch(t){throw _i(t,"doc()","CollectionReference.doc()")}}add(e){return function $Y(n,e){const t=yt(n.firestore,nn),r=Tv(n),i=xv(n.converter,e);return Fd(t,[Av(rc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ps(this.firestore,t))}isEqual(e){return CL(this._delegate,e._delegate)}withConverter(e){return new Ld(this.firestore,this._delegate.withConverter(e?oc.getInstance(this.firestore,e):null))}}function ac(n){return yt(n,wn)}class zA{constructor(...e){this._delegate=new Yo(...e)}static documentId(){return new zA(In.keyField().canonicalString())}isEqual(e){return(e=(0,lt.m9)(e))instanceof Yo&&this._delegate._internalPath.isEqual(e._internalPath)}}class uc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function tJ(){return new RA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new uc(e)}static delete(){const e=function eJ(){return new qp("deleteField")}();return e._methodName="FieldValue.delete",new uc(e)}static arrayUnion(...e){const t=function nJ(...n){return new PA("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new uc(t)}static arrayRemove(...e){const t=function rJ(...n){return new MA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new uc(t)}static increment(e){const t=function iJ(n){return new NA("increment",n)}(e);return t._methodName="FieldValue.increment",new uc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hJ={Firestore:YL,GeoPoint:Cv,Timestamp:Sn,Blob:Yp,Transaction:JL,WriteBatch:XL,DocumentReference:ps,DocumentSnapshot:Jp,Query:yi,QueryDocumentSnapshot:Xp,QuerySnapshot:HA,CollectionReference:Ld,FieldPath:zA,FieldValue:uc,setLogLevel:function lJ(n){!function Y7(n){Va.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function n2(n,e){return function gJ(n,e=_C){return new at(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qA(n,e){return n2(n,e).pipe(xe(t=>({payload:t,type:"query"})))}!function pJ(n){(function fJ(n,e){n.INTERNAL.registerComponent(new ky.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},hJ)))})(n,(e,t)=>new YL(e,t,new cJ)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(xs.Z);class r2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=c2(r,t);return new o2(i,s,this.afs)}snapshotChanges(){return function mJ(n,e){return n2(n,e).pipe(J_(void 0),wC(),xe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return this.snapshotChanges().pipe(xe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return T(this.ref.get(e)).pipe(mi)}}function Vv(n,e){return qA(n,e).pipe(J_(void 0),wC(),xe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function i2(n,e,t){return Vv(n,t).pipe(ey((r,i)=>function _J(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yJ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Ye(),xe(r=>r.map(i=>({type:i.type,payload:i}))))}function GA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function s2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class o2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Vv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(xe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(J_(void 0),wC(),Ms(([r,i])=>i.length>0||!r),xe(([,r])=>r),mi)}auditTrail(e){return this.stateChanges(e).pipe(ey((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=s2(e);return i2(this.query,t,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return qA(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),mi)}get(e){return T(this.query.get(e)).pipe(mi)}add(e){return this.ref.add(e)}doc(e){return new r2(this.ref.doc(e),this.afs)}}class vJ{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Vv(this.query,this.afs.schedulers.outsideAngular).pipe(xe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ms(t=>t.length>0),mi):Vv(this.query,this.afs.schedulers.outsideAngular).pipe(mi)}auditTrail(e){return this.stateChanges(e).pipe(ey((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=s2(e);return i2(this.query,t,this.afs.schedulers.outsideAngular).pipe(mi)}valueChanges(e={}){return qA(this.query,this.afs.schedulers.outsideAngular).pipe(xe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),mi)}get(e){return T(this.query.get(e)).pipe(mi)}}const a2=new Te("angularfire2.enableFirestorePersistence"),u2=new Te("angularfire2.firestore.persistenceSettings"),IJ=new Te("angularfire2.firestore.settings"),EJ=new Te("angularfire2.firestore.use-emulator");function c2(n,e=(t=>t)){return{query:e(n),ref:n}}let l2=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,f,m,y,E,b,N,k,W,B){this.schedulers=u;const K=Oy(t,a,r),ae=f;m&&ak(K,a,y,b,N,k,E,W),[this.firestore,this.persistenceEnabled$]=IC(`${K.name}.firestore`,"AngularFirestore",K.name,()=>{const Ee=a.runOutsideAngular(()=>K.firestore());if(s&&Ee.settings(s),ae&&Ee.useEmulator(...ae),i&&!W_(o)){const Le=()=>{try{return T(Ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch($){return typeof console<"u"&&console.warn($),O(!1)}};return[Ee,a.runOutsideAngular(Le)]}return[Ee,O(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=c2(i,r),a=this.schedulers.ngZone.run(()=>s);return new o2(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new vJ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new r2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ve(cp),ve(lp,8),ve(a2,8),ve(IJ,8),ve(Ds),ve(kt),ve(ed),ve(u2,8),ve(EJ,8),ve(EC,8),ve(tk,8),ve(nk,8),ve(rk,8),ve(ik,8),ve(sk,8),ve(ok,8),ve(up,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),wJ=(()=>{class n{constructor(){xs.Z.registerVersion("angularfire",jo.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:a2,useValue:!0},{provide:u2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[l2]})}return n})();const d2="firebasestorage.googleapis.com",h2="storageBucket";class Ln extends lt.ZR{constructor(e,t,r=0){super(WA(e),`Firebase Storage: ${t} (${WA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Mn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Mn||{});function WA(n){return"storage/"+n}function ZA(){return new Ln(Mn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f2(){return new Ln(Mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p2(){return new Ln(Mn.CANCELED,"User canceled the upload/download.")}function g2(){return new Ln(Mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ud(n){return new Ln(Mn.INVALID_ARGUMENT,n)}function m2(){return new Ln(Mn.APP_DELETED,"The Firebase app was deleted.")}function _2(n){return new Ln(Mn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eg(n,e){return new Ln(Mn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function tg(n){throw new Ln(Mn.INTERNAL_ERROR,"Internal error: "+n)}class Xr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Xr.makeFromUrl(e,t)}catch{return new Xr(e,"")}if(""===r.path)return r;throw function xJ(n){return new Ln(Mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(ae){ae.path_=decodeURIComponent(ae.path)}const m=t.replace(/[.]/g,"\\."),K=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ae){"/"===ae.path.charAt(ae.path.length-1)&&(ae.path_=ae.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===d2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let ae=0;ae<K.length;ae++){const Ee=K[ae],Le=Ee.regex.exec(e);if(Le){let R=Le[Ee.indices.path];R||(R=""),r=new Xr(Le[Ee.indices.bucket],R),Ee.postModify(r);break}}if(null==r)throw function NJ(n){return new Ln(Mn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class LJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Fv(n){return"string"==typeof n||n instanceof String}function y2(n){return KA()&&n instanceof Blob}function KA(){return typeof Blob<"u"}function QA(n,e,t,r){if(r<e)throw Ud(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ud(`Invalid value for '${n}'. Expected ${t} or less.`)}function Xo(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function v2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bd=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Bd||{});function I2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class zJ{constructor(e,t,r,i,s,o,a,u,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,b)=>{this.resolve_=E,this.reject_=b,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function $J(n){return void 0!==n}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=ZA();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?m2():p2():f2())};this.canceled_?t(0,new Lv(!1,null,!0)):this.backoffId_=function UJ(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let l=!1;function f(...k){l||(l=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,n(E,u())},k)}function y(){s&&clearTimeout(s)}function E(k,...W){if(l)return void y();if(k)return y(),void f.call(null,k,...W);if(u()||o)return y(),void f.call(null,k,...W);let K;r<64&&(r*=2),1===a?(a=2,K=0):K=1e3*(r+Math.random()),m(K)}let b=!1;function N(k){b||(b=!0,y(),!l&&(null!==i?(k||(a=2),clearTimeout(i),m(0)):k||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}((r,i)=>{if(i)return void r(!1,new Lv(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Bd.NO_ERROR,u=s.getStatus();if(!a||I2(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Bd.ABORT;return void r(!1,new Lv(!1,null,f))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new Lv(l,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function BJ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Lv{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function YJ(...n){const e=function QJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(KA())return new Blob(n);throw new Ln(Mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YA{constructor(e,t){this.data=e,this.contentType=t||null}}function JA(n,e){switch(n){case Qi.RAW:return new YA(E2(e));case Qi.BASE64:case Qi.BASE64URL:return new YA(w2(n,e));case Qi.DATA_URL:return new YA(function tX(n){const e=new T2(n);return e.base64?w2(Qi.BASE64,e.rest):function eX(n){let e;try{e=decodeURIComponent(n)}catch{throw eg(Qi.DATA_URL,"Malformed data URL.")}return E2(e)}(e.rest)}(e),function nX(n){return new T2(n).contentType}(e))}throw ZA()}function E2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function w2(n,e){switch(n){case Qi.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw eg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qi.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw eg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function XJ(n){if(typeof atob>"u")throw function FJ(n){return new Ln(Mn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:eg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class T2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw eg(Qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function rX(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class go{constructor(e,t){let r=0,i="";y2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(y2(this.data_)){const i=function JJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new go(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new go(r,!0)}}static getBlob(...e){if(KA()){const t=e.map(r=>r instanceof go?r.data_:r);return new go(YJ.apply(null,t))}{const t=e.map(o=>Fv(o)?JA(Qi.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new go(i,!0)}}uploadData(){return this.data_}}function XA(n){let e;try{e=JSON.parse(n)}catch{return null}return function HJ(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function C2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function oX(n,e){return e}class vi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||oX}}let Uv=null;function ng(){if(Uv)return Uv;const n=[];n.push(new vi("bucket")),n.push(new vi("generation")),n.push(new vi("metageneration")),n.push(new vi("name","fullPath",!0));const t=new vi("name");t.xform=function e(s,o){return function aX(n){return!Fv(n)||n.length<2?n:C2(n)}(o)},n.push(t);const i=new vi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new vi("timeCreated")),n.push(new vi("updated")),n.push(new vi("md5Hash",null,!0)),n.push(new vi("cacheControl",null,!0)),n.push(new vi("contentDisposition",null,!0)),n.push(new vi("contentEncoding",null,!0)),n.push(new vi("contentLanguage",null,!0)),n.push(new vi("contentType",null,!0)),n.push(new vi("metadata","customMetadata",!0)),Uv=n,Uv}function D2(n,e,t){const r=XA(e);return null===r?null:function cX(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function uX(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Xr(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function eb(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const A2="prefixes",b2="items";class mo{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _o(n){if(!n)throw ZA()}function Bv(n,e){return function t(r,i){const s=D2(n,i,e);return _o(null!==s),s}}function $d(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function PJ(){return new Ln(Mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function RJ(){return new Ln(Mn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function SJ(n){return new Ln(Mn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function MJ(n){return new Ln(Mn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function rg(n){const e=$d(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function bJ(n){return new Ln(Mn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function S2(n,e,t){const i=Xo(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new mo(i,"GET",Bv(n,t),o);return a.errorHandler=rg(e),a}function gX(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Xo(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new mo(a,"GET",function fX(n,e){return function t(r,i){const s=function hX(n,e,t){const r=XA(t);return null===r?null:function dX(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[A2])for(const i of t[A2]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new Xr(e,s));r.prefixes.push(o)}if(t[b2])for(const i of t[b2]){const s=n._makeStorageReference(new Xr(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return _o(null!==s),s}}(n,e.bucket),l);return f.urlParams=s,f.errorHandler=$d(e),f}function P2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function vX(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class $v{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function tb(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{_o(!1)}return _o(!!t&&-1!==(e||["active"]).indexOf(t)),t}const TX={STATE_CHANGED:"state_changed"},Ii={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nb(n){switch(n){case"running":case"pausing":case"canceling":return Ii.RUNNING;case"paused":return Ii.PAUSED;case"success":return Ii.SUCCESS;case"canceled":return Ii.CANCELED;default:return Ii.ERROR}}class CX{constructor(e,t,r){if(function jJ(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function jd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let x2=null;class DX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class AX extends DX{initXhr(){this.xhr_.responseType="text"}}function Os(){return x2?x2():new AX}class O2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ng(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Mn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(I2(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=f2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Mn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function IX(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=P2(e,r,i),a={name:o.fullPath},u=Xo(s,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=eb(o,t),b=new mo(u,"POST",function E(N){let k;tb(N);try{k=N.getResponseHeader("X-Goog-Upload-URL")}catch{_o(!1)}return _o(Fv(k)),k},n.maxUploadRetryTime);return b.urlParams=a,b.headers=f,b.body=m,b.errorHandler=$d(e),b}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Os,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function EX(n,e,t,r){const u=new mo(t,"POST",function s(l){const f=tb(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_o(!1)}m||_o(!1);const y=Number(m);return _o(!isNaN(y)),new $v(y,r.size(),"final"===f)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=$d(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Os,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new $v(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function wX(n,e,t,r,i,s,o,a){const u=new $v(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function kJ(){return new Ln(Mn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=u.total-u.current;let f=l;i>0&&(f=Math.min(f,i));const m=u.current;let E="";E=0===f?"finalize":l===f?"upload, finalize":"upload";const b={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${u.current}`},N=r.slice(m,m+f);if(null===N)throw g2();const K=new mo(t,"POST",function k(ae,Ee){const Le=tb(ae,["active","final"]),$=u.current+f,R=r.size();let F;return F="final"===Le?Bv(e,s)(ae,Ee):null,new $v($,R,"final"===Le,F)},e.maxUploadRetryTime);return K.headers=b,K.body=N.uploadData(),K.progressCallback=a||null,K.errorHandler=$d(n),K}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Os,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=S2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Os,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function M2(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let K="";for(let ae=0;ae<2;ae++)K+=Math.random().toString().slice(2);return K}();o["Content-Type"]="multipart/related; boundary="+u;const l=P2(e,r,i),f=eb(l,t),E=go.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===E)throw g2();const b={name:l.fullPath},N=Xo(s,n.host,n._protocol),W=n.maxUploadRetryTime,B=new mo(N,"POST",Bv(n,t),W);return B.urlParams=b,B.headers=o,B.body=E.uploadData(),B.errorHandler=$d(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Os,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=p2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=nb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new CX(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(nb(this._state)){case Ii.SUCCESS:jd(this._resolve.bind(null,this.snapshot))();break;case Ii.CANCELED:case Ii.ERROR:jd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(nb(this._state)){case Ii.RUNNING:case Ii.PAUSED:e.next&&jd(e.next.bind(e,this.snapshot))();break;case Ii.SUCCESS:e.complete&&jd(e.complete.bind(e))();break;default:e.error&&jd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cc{constructor(e,t){this._service=e,this._location=t instanceof Xr?t:Xr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cc(e,t)}get root(){const e=new Xr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C2(this._location.path)}get storage(){return this._service}get parent(){const e=function iX(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xr(this._location.bucket,e);return new cc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw _2(e)}}function V2(n,e,t){return rb.apply(this,arguments)}function rb(){return(rb=(0,oe.Z)(function*(n,e,t){const i=yield F2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield V2(n,e,i.nextPageToken))})).apply(this,arguments)}function F2(n,e){null!=e&&"number"==typeof e.maxResults&&QA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=gX(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Os)}function LX(n){n._throwIfRoot("getDownloadURL");const e=function mX(n,e,t){const i=Xo(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new mo(i,"GET",function pX(n,e){return function t(r,i){const s=D2(n,i,e);return _o(null!==s),function lX(n,e,t,r){const i=XA(e);if(null===i||!Fv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const m=n.fullPath;return Xo("/b/"+o(n.bucket)+"/o/"+o(m),t,r)+v2({alt:"media",token:l})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=rg(e),a}(n.storage,n._location,ng());return n.storage.makeRequestWithTokens(e,Os).then(t=>{if(null===t)throw function VJ(){return new Ln(Mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function L2(n,e){const t=function sX(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Xr(n._location.bucket,t);return new cc(n.storage,r)}function U2(n,e){if(n instanceof ib){const t=n;if(null==t._bucket)throw function OJ(){return new Ln(Mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+h2+"' property when initializing the app?")}();const r=new cc(t,t._bucket);return null!=e?U2(r,e):r}return void 0!==e?L2(n,e):n}function jX(n,e){if(e&&function BX(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ib)return function $X(n,e){return new cc(n,e)}(n,e);throw Ud("To use ref(service, url), the first argument must be a Storage instance.")}return U2(n,e)}function B2(n,e){const t=e?.[h2];return null==t?null:Xr.makeFromBucketSpec(t,n)}class ib{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=d2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xr.makeFromBucketSpec(i,this._host):B2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xr.makeFromBucketSpec(this._url,e):B2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,oe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,oe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new LJ(m2());{const o=function KJ(n,e,t,r,i,s,o=!0){const a=v2(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return function WJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function qJ(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function GJ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,s),function ZJ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new zJ(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,oe.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const $2="@firebase/storage",H2="storage";function z2(n,e){return jX(n=(0,lt.m9)(n),e)}function JX(n=(0,$n.getApp)(),e){n=(0,lt.m9)(n);const r=(0,$n._getProvider)(n,H2).getImmediate({identifier:e}),i=(0,lt.P0)("storage");return i&&q2(r,...i),r}function q2(n,e,t,r={}){!function HX(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,lt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function XX(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ib(t,r,i,e,$n.SDK_VERSION)}!function eee(){(0,$n._registerComponent)(new ky.wA(H2,XX,"PUBLIC").setMultipleInstances(!0)),(0,$n.registerVersion)($2,"0.12.5",""),(0,$n.registerVersion)($2,"0.12.5","esm2017")}();class jv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class G2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new jv(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new jv(o,this,this._ref)):{next:t.next?o=>t.next(new jv(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class W2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ea(e,this._service))}get items(){return this._delegate.items.map(e=>new ea(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ea{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function YX(n,e){return L2(n,e)}(this._delegate,e);return new ea(t,this.storage)}get root(){return new ea(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ea(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new G2(function zX(n,e,t){return function xX(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new O2(n,new go(e),t)}(n=(0,lt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Qi.RAW,r){this._throwIfRoot("putString");const i=JA(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new G2(new O2(this._delegate,new go(i.data,!0),s),this)}listAll(){return function ZX(n){return function kX(n){const e={prefixes:[],items:[]};return V2(n,e).then(()=>e)}(n=(0,lt.m9)(n))}(this._delegate).then(e=>new W2(e,this.storage))}list(e){return function WX(n,e){return F2(n=(0,lt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new W2(t,this.storage))}getMetadata(){return function qX(n){return function VX(n){n._throwIfRoot("getMetadata");const e=S2(n.storage,n._location,ng());return n.storage.makeRequestWithTokens(e,Os)}(n=(0,lt.m9)(n))}(this._delegate)}updateMetadata(e){return function GX(n,e){return function FX(n,e){n._throwIfRoot("updateMetadata");const t=function _X(n,e,t,r){const s=Xo(e.fullServerUrl(),n.host,n._protocol),a=eb(t,r),l=n.maxOperationRetryTime,f=new mo(s,"PATCH",Bv(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=rg(e),f}(n.storage,n._location,e,ng());return n.storage.makeRequestWithTokens(t,Os)}(n=(0,lt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function KX(n){return LX(n=(0,lt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function QX(n){return function UX(n){n._throwIfRoot("deleteObject");const e=function yX(n,e){const r=Xo(e.fullServerUrl(),n.host,n._protocol),a=new mo(r,"DELETE",function o(u,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=rg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Os)}(n=(0,lt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw _2(e)}}class Z2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(K2(e))throw Ud("ref() expected a child path but got a URL, use refFromURL instead.");return new ea(z2(this._delegate,e),this)}refFromURL(e){if(!K2(e))throw Ud("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xr.makeFromUrl(e,this._delegate.host)}catch{throw Ud("refFromUrl() expected a valid full URL but got an invalid one.")}return new ea(z2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){q2(this._delegate,e,t,r)}}function K2(n){return/^[A-Za-z]+:\/\//.test(n)}function iee(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Z2(t,r)}function Q2(n){const e=function oee(n){return new at(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function TJ(n,e=_C){return te((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=s;s=null,r.next(l)}};function u(){const l=o+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(Re(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(xe(t=>t.bytesTransferred/t.totalBytes*100))}}function Hv(n){return{getDownloadURL:()=>O(void 0).pipe(QO,ke(()=>n.getDownloadURL()),mi),getMetadata:()=>O(void 0).pipe(QO,ke(()=>n.getMetadata()),mi),delete:()=>T(n.delete()),child:e=>Hv(n.child(e)),updateMetadata:e=>T(n.updateMetadata(e)),put:(e,t)=>Q2(n.put(e,t)),putString:(e,t,r)=>Q2(n.putString(e,t,r)),list:e=>T(n.list(e)),listAll:()=>T(n.listAll())}}!function see(n){const e={TaskState:Ii,TaskEvent:TX,StringFormat:Qi,Storage:Z2,Reference:ea};n.INTERNAL.registerComponent(new ky.wA("storage-compat",iee,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(xs.Z);const aee=new Te("angularfire2.storageBucket"),uee=new Te("angularfire2.storage.maxUploadRetryTime"),cee=new Te("angularfire2.storage.maxOperationRetryTime"),lee=new Te("angularfire2.storage.use-emulator");let Y2=(()=>{class n{storage;constructor(t,r,i,s,o,a,u,l,f,m){const y=Oy(t,o,r);this.storage=IC(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const E=o.runOutsideAngular(()=>y.storage(i||void 0)),b=f;return b&&E.useEmulator(...b),u&&E.setMaxUploadRetryTime(u),l&&E.setMaxOperationRetryTime(l),E},[u,l])}ref(t){return Hv(this.storage.ref(t))}refFromURL(t){return Hv(this.storage.refFromURL(t))}upload(t,r,i){return Hv(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(ve(cp),ve(lp,8),ve(aee,8),ve(Ds),ve(kt),ve(ed),ve(uee,8),ve(cee,8),ve(lee,8),ve(up,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),dee=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({})}return n})(),hee=(()=>{class n{constructor(){xs.Z.registerVersion("angularfire",jo.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[Y2],imports:[dee]})}return n})(),fee=(()=>{class n{constructor(t,r){this.afs=t,this.storage=r,this.basePath="businesses"}createBusiness(t){const r=this.afs.createId();return this.afs.doc(`${this.basePath}/${r}`).set({...t,id:r})}getBusinesses(){return this.afs.collection(this.basePath).snapshotChanges().pipe(xe(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).valueChanges()}updateBusiness(t,r){return this.afs.doc(`${this.basePath}/${t}`).update(r)}deleteBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).delete()}uploadFile(t,r){return this.storage.upload(t,r)}getDownloadURL(t){return this.storage.ref(t).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||n)(ve(l2),ve(Y2))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gee(n,e){if(1&n&&(Ie(0,"div")(1,"h2"),we(2),ie(),Ie(3,"p"),we(4),ie()()),2&n){const t=e.$implicit;o_(2),E_(t.businessName),o_(2),E_(t.tagline)}}const mee=[{path:"",component:b8},{path:"about-us",component:S8},{path:"services",component:R8},{path:"contact-us",component:A7},{path:"bqs",component:(()=>{class n{constructor(t,r){this.fb=t,this.businessService=r,this.uploadProgress={}}ngOnInit(){this.businessForm=this.fb.group({businessName:["",Vt.required],tagline:[""],uniqueService:["",Vt.required],whyChoose:["",Vt.required],businessStory:["",Vt.required],motivation:["",Vt.required],mission:["",Vt.required],vision:["",Vt.required],certifications:["",Vt.required],targetAudience:["",Vt.required],services:["",Vt.required],specialPrograms:["",Vt.required],tours:["",Vt.required],freeConsulting:["",Vt.required],websiteGoals:["",Vt.required],logoImage:[""],ownerImagesBios:["",Vt.required],staffImagesBios:["",Vt.required],facilityImages:[""],lifestyleImages:[""],mediaFeatures:["",Vt.required],ratings:["",Vt.required],testimonials:["",Vt.required],address:["",Vt.required],phone:["",Vt.required],fax:[""],email:["",Vt.required],businessHours:["",Vt.required],socialMedia:["",Vt.required],welcomeMessage:["",Vt.required],keyServicesHighlights:["",Vt.required],teamValues:["",Vt.required],serviceBenefits:["",Vt.required],pricingStructure:["",Vt.required],contactFormDetails:["",Vt.required],mapDirections:["",Vt.required],faqs:["",Vt.required],blogNews:["",Vt.required],photoGallery:["",Vt.required]})}onFileChange(t,r){}onSubmit(){}static#e=this.\u0275fac=function(r){return new(r||n)(ye(T7),ye(fee))};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-business-question-form"]],decls:188,vars:1,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["formControlName","businessName","required",""],["formControlName","tagline"],["formControlName","uniqueService"],["formControlName","whyChoose"],["formControlName","businessStory"],["formControlName","motivation"],["formControlName","mission"],["formControlName","vision"],["formControlName","certifications"],["formControlName","targetAudience"],["formControlName","services"],["formControlName","specialPrograms"],["formControlName","tours"],["formControlName","freeConsulting"],["formControlName","websiteGoals"],["type","file",3,"change"],["formControlName","ownerImagesBios"],["formControlName","staffImagesBios"],["type","file","multiple","",3,"change"],["formControlName","mediaFeatures"],["formControlName","ratings"],["formControlName","testimonials"],["formControlName","address"],["formControlName","phone"],["formControlName","fax"],["formControlName","email"],["formControlName","businessHours"],["formControlName","socialMedia"],["formControlName","welcomeMessage"],["formControlName","keyServicesHighlights"],["formControlName","teamValues"],["formControlName","serviceBenefits"],["formControlName","pricingStructure"],["formControlName","contactFormDetails"],["formControlName","mapDirections"],["formControlName","faqs"],["formControlName","blogNews"],["formControlName","photoGallery"],["type","submit"]],template:function(r,i){1&r&&(Ie(0,"div",0)(1,"form",1),Wr("ngSubmit",function(){return i.onSubmit()}),Ie(2,"h2"),we(3,"Basic Information"),ie(),Ie(4,"div")(5,"label"),we(6,"Business Name:"),ie(),ct(7,"input",2),ie(),Ie(8,"div")(9,"label"),we(10,"Tagline:"),ie(),ct(11,"input",3),ie(),Ie(12,"div")(13,"label"),we(14,"Unique Service:"),ie(),ct(15,"textarea",4),ie(),Ie(16,"div")(17,"label"),we(18,"Why Choose Your AFH:"),ie(),ct(19,"textarea",5),ie(),Ie(20,"h2"),we(21,"Business Story and Mission"),ie(),Ie(22,"div")(23,"label"),we(24,"Business Story:"),ie(),ct(25,"textarea",6),ie(),Ie(26,"div")(27,"label"),we(28,"Motivation:"),ie(),ct(29,"textarea",7),ie(),Ie(30,"div")(31,"label"),we(32,"Mission Statement:"),ie(),ct(33,"textarea",8),ie(),Ie(34,"div")(35,"label"),we(36,"Vision:"),ie(),ct(37,"textarea",9),ie(),Ie(38,"h2"),we(39,"Certifications and Target Audience"),ie(),Ie(40,"div")(41,"label"),we(42,"Certifications:"),ie(),ct(43,"textarea",10),ie(),Ie(44,"div")(45,"label"),we(46,"Target Audience:"),ie(),ct(47,"textarea",11),ie(),Ie(48,"h2"),we(49,"Services and Offerings"),ie(),Ie(50,"div")(51,"label"),we(52,"Service Description:"),ie(),ct(53,"textarea",12),ie(),Ie(54,"div")(55,"label"),we(56,"Special Programs:"),ie(),ct(57,"textarea",13),ie(),Ie(58,"div")(59,"label"),we(60,"Tours:"),ie(),ct(61,"textarea",14),ie(),Ie(62,"div")(63,"label"),we(64,"Free Consulting:"),ie(),ct(65,"textarea",15),ie(),Ie(66,"h2"),we(67,"Website Goals"),ie(),Ie(68,"div")(69,"label"),we(70,"Primary Goal:"),ie(),ct(71,"textarea",16),ie(),Ie(72,"h2"),we(73,"Content and Photos"),ie(),Ie(74,"div")(75,"label"),we(76,"Logo Image:"),ie(),Ie(77,"input",17),Wr("change",function(o){return i.onFileChange(o,"logoImage")}),ie()(),Ie(78,"div")(79,"label"),we(80,"Owner Images and Bios:"),ie(),ct(81,"textarea",18),ie(),Ie(82,"div")(83,"label"),we(84,"Staff Images and Bios:"),ie(),ct(85,"textarea",19),ie(),Ie(86,"h2"),we(87,"Facility and Lifestyle Images"),ie(),Ie(88,"div")(89,"label"),we(90,"Facility Images:"),ie(),Ie(91,"input",20),Wr("change",function(o){return i.onFileChange(o,"facilityImages")}),ie()(),Ie(92,"div")(93,"label"),we(94,"Lifestyle Images:"),ie(),Ie(95,"input",20),Wr("change",function(o){return i.onFileChange(o,"lifestyleImages")}),ie()(),Ie(96,"h2"),we(97,"Media and Reviews"),ie(),Ie(98,"div")(99,"label"),we(100,"Media Features:"),ie(),ct(101,"textarea",21),ie(),Ie(102,"div")(103,"label"),we(104,"Ratings:"),ie(),ct(105,"textarea",22),ie(),Ie(106,"div")(107,"label"),we(108,"Testimonials:"),ie(),ct(109,"textarea",23),ie(),Ie(110,"h2"),we(111,"Contact Information"),ie(),Ie(112,"div")(113,"label"),we(114,"Full Address:"),ie(),ct(115,"textarea",24),ie(),Ie(116,"div")(117,"label"),we(118,"Phone Number:"),ie(),ct(119,"input",25),ie(),Ie(120,"div")(121,"label"),we(122,"Fax Number:"),ie(),ct(123,"input",26),ie(),Ie(124,"div")(125,"label"),we(126,"Email:"),ie(),ct(127,"input",27),ie(),Ie(128,"div")(129,"label"),we(130,"Business Hours:"),ie(),ct(131,"textarea",28),ie(),Ie(132,"div")(133,"label"),we(134,"Social Media Profiles:"),ie(),ct(135,"textarea",29),ie(),Ie(136,"h2"),we(137,"Home Page"),ie(),Ie(138,"div")(139,"label"),we(140,"Welcome Message:"),ie(),ct(141,"textarea",30),ie(),Ie(142,"div")(143,"label"),we(144,"Key Services and Highlights:"),ie(),ct(145,"textarea",31),ie(),Ie(146,"h2"),we(147,"About Us Page"),ie(),Ie(148,"div")(149,"label"),we(150,"Team and Values:"),ie(),ct(151,"textarea",32),ie(),Ie(152,"h2"),we(153,"Services Page"),ie(),Ie(154,"div")(155,"label"),we(156,"Service Benefits:"),ie(),ct(157,"textarea",33),ie(),Ie(158,"div")(159,"label"),we(160,"Pricing Structure:"),ie(),ct(161,"textarea",34),ie(),Ie(162,"h2"),we(163,"Contact Us Page"),ie(),Ie(164,"div")(165,"label"),we(166,"Contact Form Details:"),ie(),ct(167,"textarea",35),ie(),Ie(168,"div")(169,"label"),we(170,"Map or Directions:"),ie(),ct(171,"textarea",36),ie(),Ie(172,"h2"),we(173,"Additional Content"),ie(),Ie(174,"div")(175,"label"),we(176,"FAQs:"),ie(),ct(177,"textarea",37),ie(),Ie(178,"div")(179,"label"),we(180,"Blog or News:"),ie(),ct(181,"textarea",38),ie(),Ie(182,"div")(183,"label"),we(184,"Photo Gallery:"),ie(),ct(185,"textarea",39),ie(),Ie(186,"button",40),we(187,"Submit"),ie()()()),2&r&&(o_(1),__("formGroup",i.businessForm))},dependencies:[cC,yy,fO,eC,My,Py,fC]})}return n})()},{path:"bls",component:(()=>{class n{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-business-list"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(function LR(n,e,t,r,i,s,o,a){const u=fe(),l=bt(),f=n+mt,m=l.firstCreatePass?function KH(n,e,t,r,i,s,o,a,u){const l=e.consts,f=Cl(e,n,4,o||null,ns(l,a));WE(e,t,f,ns(l,u)),Kc(e,f);const m=f.tView=GE(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,s,o):l.data[f];rs(m,!1);const y=UR(l,u,m,n);Zc()&&Hm(l,u,y,m),zr(y,u),u_(u,u[f]=aR(y,u,y,m)),_h(m)&&zE(l,u,m),null!=o&&qE(u,m,a)}(0,gee,5,2,"div",0),function AM(n,e){const t=bt();let r;const i=n+mt;t.firstCreatePass?(r=function wq(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ao(r.type)),a=Ur(ye);try{const u=tl(!1),l=s();return tl(u),function JH(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,fe(),i,l),l}finally{Ur(a)}}(1,"async")),2&r&&__("ngForOf",bM(1,1,i.businesses$))},dependencies:[sx,cx]})}return n})()}];let _ee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n});static#n=this.\u0275inj=An({imports:[B1.forRoot(mee),B1]})}return n})(),yee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-navigation"]],decls:14,vars:0,consts:[["routerLink","/"],["routerLink","/about-us"],["routerLink","/services"],["routerLink","/contact-us"]],template:function(r,i){1&r&&(Ie(0,"nav")(1,"ul")(2,"li")(3,"a",0),we(4,"Home"),ie()(),Ie(5,"li")(6,"a",1),we(7,"About Us"),ie()(),Ie(8,"li")(9,"a",2),we(10,"Services"),ie()(),Ie(11,"li")(12,"a",3),we(13,"Contact Us"),ie()()()())},dependencies:[_y],styles:["nav[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:10px 0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;justify-content:center}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:15px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 15px;transition:background-color .3s ease}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#555}"]})}return n})(),vee=(()=>{class n{constructor(){this.title="adult-family-home"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ji({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&ct(0,"app-navigation")(1,"router-outlet")},dependencies:[jT,yee]})}return n})();const J2_firebase={apiKey:"AIzaSyDABajs8rbYwBKsW74SRQbGQKyJ_GdU1tY",authDomain:"afhdynamicwebsite.firebaseapp.com",projectId:"afhdynamicwebsite",storageBucket:"afhdynamicwebsite.appspot.com",messagingSenderId:"692885221546",appId:"1:692885221546:web:23317a318f6e277a0520d3",measurementId:"G-JREGNTXHB6"};class Hd{constructor(e){return e}}class sb{constructor(){return(0,$n.getApps)()}}const ob=new Te("angularfire2._apps"),Eee={provide:Hd,useFactory:function Iee(n){return n&&1===n.length?n[0]:new Hd((0,$n.getApp)())},deps:[[new Nr,ob]]},wee={provide:sb,deps:[[new Nr,ob]]};function Tee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Hd(r)}}let Cee=(()=>{class n{constructor(t){(0,$n.registerVersion)("angularfire",jo.full,"core"),(0,$n.registerVersion)("angularfire",jo.full,"app"),(0,$n.registerVersion)("angular",xE.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ve(Ds))};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[Eee,wee]})}return n})();function Dee(n,...e){return{ngModule:Cee,providers:[{provide:ob,useFactory:Tee(n),multi:!0,deps:[kt,qr,ed,...e]}]}}const Aee=vC($n.initializeApp,!0);Ge(35);class ub{constructor(){return xy("auth")}}class lb{constructor(e){return e}}const eU="firestore",db=new Te("angularfire2.firestore-instances");function Nee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lb(r)}}const xee={provide:class Pee{constructor(){return xy(eU)}},deps:[[new Nr,db]]},Oee={provide:lb,useFactory:function Mee(n,e){const t=yC(eU,n,e);return t&&new lb(t)},deps:[[new Nr,db],Hd]};let kee=(()=>{class n{constructor(){(0,$n.registerVersion)("angularfire",jo.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[Oee,xee]})}return n})();function Vee(n,...e){return{ngModule:kee,providers:[{provide:db,useFactory:Nee(n),multi:!0,deps:[kt,qr,ed,sb,[new Nr,ub],[new Nr,up],...e]}]}}const Fee=vC(uY,!0);class hb{constructor(e){return e}}const tU="storage",fb=new Te("angularfire2.storage-instances");function Bee(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new hb(r)}}const $ee={provide:class Lee{constructor(){return xy(tU)}},deps:[[new Nr,fb]]},jee={provide:hb,useFactory:function Uee(n,e){const t=yC(tU,n,e);return t&&new hb(t)},deps:[[new Nr,fb],Hd]};let Hee=(()=>{class n{constructor(){(0,$n.registerVersion)("angularfire",jo.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Zn({type:n});static \u0275inj=An({providers:[jee,$ee]})}return n})();function zee(n,...e){return{ngModule:Hee,providers:[{provide:fb,useFactory:Bee(n),multi:!0,deps:[kt,qr,ed,sb,[new Nr,ub],[new Nr,up],...e]}]}}const qee=vC(JX,!0);let Gee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Zn({type:n,bootstrap:[vee]});static#n=this.\u0275inj=An({imports:[z9,_ee,wJ,hee,Q7,q7.initializeApp(J2_firebase),Dee(()=>Aee(J2_firebase)),Vee(()=>Fee()),zee(()=>qee()),D7,C7]})}return n})();j9().bootstrapModule(Gee).catch(n=>console.error(n))},106:(Ji,zn,Ge)=>{Ge.d(zn,{Z:()=>qn});var S=Ge(58),Ce=Ge(537),P=Ge(534),Ue=Ge(879);class Pt{constructor(Je,Xe){this._delegate=Je,this.firebase=Xe,(0,P._addComponent)(Je,new Ce.wA("app-compat",()=>this,"PUBLIC")),this.container=Je.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this._delegate.automaticDataCollectionEnabled=Je}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Je=>{this._delegate.checkDestroyed(),Je()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Je,Xe=P._DEFAULT_ENTRY_NAME){var Xn;this._delegate.checkDestroyed();const gn=this._delegate.container.getProvider(Je);return!gn.isInitialized()&&"EXPLICIT"===(null===(Xn=gn.getComponent())||void 0===Xn?void 0:Xn.instantiationMode)&&gn.initialize(),gn.getImmediate({identifier:Xe})}_removeServiceInstance(Je,Xe=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Je).clearInstance(Xe)}_addComponent(Je){(0,P._addComponent)(this._delegate,Je)}_addOrOverwriteComponent(Je){(0,P._addOrOverwriteComponent)(this._delegate,Je)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Nn=new S.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function At(){const vt=function Xt(vt){const Je={},Xe={__esModule:!0,initializeApp:function gt(st,Cn={}){const de=P.initializeApp(st,Cn);if((0,S.r3)(Je,de.name))return Je[de.name];const rn=new vt(de,Xe);return Je[de.name]=rn,rn},app:gn,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Lr(st){const Cn=st.name,de=Cn.replace("-compat","");if(P._registerComponent(st)&&"PUBLIC"===st.type){const rn=(Wt=gn())=>{if("function"!=typeof Wt[de])throw Nn.create("invalid-app-argument",{appName:Cn});return Wt[de]()};void 0!==st.serviceProps&&(0,S.ZB)(rn,st.serviceProps),Xe[de]=rn,vt.prototype[de]=function(...Wt){return this._getService.bind(this,Cn).apply(this,st.multipleInstances?Wt:[])}}return"PUBLIC"===st.type?Xe[de]:null},removeApp:function Xn(st){delete Je[st]},useAsService:function Ot(st,Cn){return"serverAuth"===Cn?null:Cn},modularAPIs:P}};function gn(st){if(!(0,S.r3)(Je,st=st||P._DEFAULT_ENTRY_NAME))throw Nn.create("no-app",{appName:st});return Je[st]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function Lt(){return Object.keys(Je).map(st=>Je[st])}}),gn.App=vt,Xe}(Pt);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:At,extendNamespace:function Je(Xe){(0,S.ZB)(vt,Xe)},createSubscribe:S.ne,ErrorFactory:S.LL,deepExtend:S.ZB}),vt}(),_e=new Ue.Yd("@firebase/app-compat");if((0,S.jU)()&&void 0!==self.firebase){_e.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&_e.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qn=le;!function Mt(vt){(0,P.registerVersion)("@firebase/app-compat","0.2.35",vt)}()},534:(Ji,zn,Ge)=>{Ge.r(zn),Ge.d(zn,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>vr,_DEFAULT_ENTRY_NAME:()=>ai,_addComponent:()=>Ar,_addOrOverwriteComponent:()=>en,_apps:()=>Cr,_clearComponents:()=>Di,_components:()=>_n,_getProvider:()=>xn,_isFirebaseApp:()=>ys,_isFirebaseServerApp:()=>Kt,_registerComponent:()=>yr,_removeServiceInstance:()=>Fs,_serverApps:()=>Dr,deleteApp:()=>Es,getApp:()=>Us,getApps:()=>Bs,initializeApp:()=>Is,initializeServerApp:()=>Ls,onLog:()=>T,registerVersion:()=>x,setLogLevel:()=>A});var S=Ge(861),Ce=Ge(537),P=Ge(879),Ue=Ge(58);const Pt=(M,H)=>H.some(G=>M instanceof G);let pn,Nn;const le=new WeakMap,_e=new WeakMap,Be=new WeakMap,it=new WeakMap,Mt=new WeakMap;let Je={get(M,H,G){if(M instanceof IDBTransaction){if("done"===H)return _e.get(M);if("objectStoreNames"===H)return M.objectStoreNames||Be.get(M);if("store"===H)return G.objectStoreNames[1]?void 0:G.objectStore(G.objectStoreNames[0])}return gt(M[H])},set:(M,H,G)=>(M[H]=G,!0),has:(M,H)=>M instanceof IDBTransaction&&("done"===H||"store"===H)||H in M};function gn(M){return"function"==typeof M?function Xn(M){return M!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function At(){return Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(M)?function(...H){return M.apply(Lt(this),H),gt(le.get(this))}:function(...H){return gt(M.apply(Lt(this),H))}:function(H,...G){const ge=M.call(Lt(this),H,...G);return Be.set(ge,H.sort?H.sort():[H]),gt(ge)}}(M):(M instanceof IDBTransaction&&function vt(M){if(_e.has(M))return;const H=new Promise((G,ge)=>{const et=()=>{M.removeEventListener("complete",ot),M.removeEventListener("error",ft),M.removeEventListener("abort",ft)},ot=()=>{G(),et()},ft=()=>{ge(M.error||new DOMException("AbortError","AbortError")),et()};M.addEventListener("complete",ot),M.addEventListener("error",ft),M.addEventListener("abort",ft)});_e.set(M,H)}(M),Pt(M,function Xt(){return pn||(pn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(M,Je):M)}function gt(M){if(M instanceof IDBRequest)return function qn(M){const H=new Promise((G,ge)=>{const et=()=>{M.removeEventListener("success",ot),M.removeEventListener("error",ft)},ot=()=>{G(gt(M.result)),et()},ft=()=>{ge(M.error),et()};M.addEventListener("success",ot),M.addEventListener("error",ft)});return H.then(G=>{G instanceof IDBCursor&&le.set(G,M)}).catch(()=>{}),Mt.set(H,M),H}(M);if(it.has(M))return it.get(M);const H=gn(M);return H!==M&&(it.set(M,H),Mt.set(H,M)),H}const Lt=M=>Mt.get(M),st=["get","getKey","getAll","getAllKeys","count"],Cn=["put","add","delete","clear"],de=new Map;function rn(M,H){if(!(M instanceof IDBDatabase)||H in M||"string"!=typeof H)return;if(de.get(H))return de.get(H);const G=H.replace(/FromIndex$/,""),ge=H!==G,et=Cn.includes(G);if(!(G in(ge?IDBIndex:IDBObjectStore).prototype)||!et&&!st.includes(G))return;const ot=function(){var ft=(0,S.Z)(function*(zt,...Et){const Ai=this.transaction(zt,et?"readwrite":"readonly");let Io=Ai.store;return ge&&(Io=Io.index(Et.shift())),(yield Promise.all([Io[G](...Et),et&&Ai.done]))[0]});return function(Et){return ft.apply(this,arguments)}}();return de.set(H,ot),ot}!function Xe(M){Je=M(Je)}(M=>({...M,get:(H,G,ge)=>rn(H,G)||M.get(H,G,ge),has:(H,G)=>!!rn(H,G)||M.has(H,G)}));class Wt{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(G=>{if(function mn(M){const H=M.getComponent();return"VERSION"===H?.type}(G)){const ge=G.getImmediate();return`${ge.library}/${ge.version}`}return null}).filter(G=>G).join(" ")}}const ii="@firebase/app",si="0.10.5",at=new P.Yd("@firebase/app"),ai="[DEFAULT]",Ui={[ii]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Cr=new Map,Dr=new Map,_n=new Map;function Ar(M,H){try{M.container.addComponent(H)}catch(G){at.debug(`Component ${H.name} failed to register with FirebaseApp ${M.name}`,G)}}function en(M,H){M.container.addOrOverwriteComponent(H)}function yr(M){const H=M.name;if(_n.has(H))return at.debug(`There were multiple attempts to register component ${H}.`),!1;_n.set(H,M);for(const G of Cr.values())Ar(G,M);for(const G of Dr.values())Ar(G,M);return!0}function xn(M,H){const G=M.container.getProvider("heartbeat").getImmediate({optional:!0});return G&&G.triggerHeartbeat(),M.container.getProvider(H)}function Fs(M,H,G=ai){xn(M,H).clearInstance(G)}function ys(M){return void 0!==M.options}function Kt(M){return void 0!==M.settings}function Di(){_n.clear()}const On=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class er{constructor(H,G,ge){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},G),this._name=G.name,this._automaticDataCollectionEnabled=G.automaticDataCollectionEnabled,this._container=ge,this.container.addComponent(new Ce.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw On.create("app-deleted",{appName:this._name})}}class yn extends er{constructor(H,G,ge,et){const ot=void 0!==G.automaticDataCollectionEnabled&&G.automaticDataCollectionEnabled,ft={name:ge,automaticDataCollectionEnabled:ot};super(void 0!==H.apiKey?H:H.options,ft,et),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ot},G),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,G.releaseOnDeref=void 0,x(ii,si,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(H){this.isDeleted||(this._refCount++,void 0!==H&&this._finalizationRegistry.register(H,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Es(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw On.create("server-app-deleted")}}const vr="10.12.2";function Is(M,H={}){let G=M;"object"!=typeof H&&(H={name:H});const ge=Object.assign({name:ai,automaticDataCollectionEnabled:!1},H),et=ge.name;if("string"!=typeof et||!et)throw On.create("bad-app-name",{appName:String(et)});if(G||(G=(0,Ue.aH)()),!G)throw On.create("no-options");const ot=Cr.get(et);if(ot){if((0,Ue.vZ)(G,ot.options)&&(0,Ue.vZ)(ge,ot.config))return ot;throw On.create("duplicate-app",{appName:et})}const ft=new Ce.H0(et);for(const Et of _n.values())ft.addComponent(Et);const zt=new er(G,ge,ft);return Cr.set(et,zt),zt}function Ls(M,H){if((0,Ue.jU)())throw On.create("invalid-server-app-environment");let G;void 0===H.automaticDataCollectionEnabled&&(H.automaticDataCollectionEnabled=!1),G=ys(M)?M.options:M;const ge=Object.assign(Object.assign({},H),G);if(void 0!==ge.releaseOnDeref&&delete ge.releaseOnDeref,void 0!==H.releaseOnDeref&&typeof FinalizationRegistry>"u")throw On.create("finalization-registry-not-supported",{});const ot=""+(Ai=JSON.stringify(ge),[...Ai].reduce((Io,un)=>Math.imul(31,Io)+un.charCodeAt(0)|0,0)),ft=Dr.get(ot);var Ai;if(ft)return ft.incRefCount(H.releaseOnDeref),ft;const zt=new Ce.H0(ot);for(const Ai of _n.values())zt.addComponent(Ai);const Et=new yn(G,H,ot,zt);return Dr.set(ot,Et),Et}function Us(M=ai){const H=Cr.get(M);if(!H&&M===ai&&(0,Ue.aH)())return Is();if(!H)throw On.create("no-app",{appName:M});return H}function Bs(){return Array.from(Cr.values())}function Es(M){return V.apply(this,arguments)}function V(){return(V=(0,S.Z)(function*(M){let H=!1;const G=M.name;Cr.has(G)?(H=!0,Cr.delete(G)):Dr.has(G)&&M.decRefCount()<=0&&(Dr.delete(G),H=!0),H&&(yield Promise.all(M.container.getProviders().map(ge=>ge.delete())),M.isDeleted=!0)})).apply(this,arguments)}function x(M,H,G){var ge;let et=null!==(ge=Ui[M])&&void 0!==ge?ge:M;G&&(et+=`-${G}`);const ot=et.match(/\s|\//),ft=H.match(/\s|\//);if(ot||ft){const zt=[`Unable to register library "${et}" with version "${H}":`];return ot&&zt.push(`library name "${et}" contains illegal characters (whitespace or "/")`),ot&&ft&&zt.push("and"),ft&&zt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void at.warn(zt.join(" "))}yr(new Ce.wA(`${et}-version`,()=>({library:et,version:H}),"VERSION"))}function T(M,H){if(null!==M&&"function"!=typeof M)throw On.create("invalid-log-argument");(0,P.Am)(M,H)}function A(M){(0,P.Ub)(M)}const w="firebase-heartbeat-database",O=1,ue="firebase-heartbeat-store";let be=null;function ke(){return be||(be=function Lr(M,H,{blocked:G,upgrade:ge,blocking:et,terminated:ot}={}){const ft=indexedDB.open(M,H),zt=gt(ft);return ge&&ft.addEventListener("upgradeneeded",Et=>{ge(gt(ft.result),Et.oldVersion,Et.newVersion,gt(ft.transaction),Et)}),G&&ft.addEventListener("blocked",Et=>G(Et.oldVersion,Et.newVersion,Et)),zt.then(Et=>{ot&&Et.addEventListener("close",()=>ot()),et&&Et.addEventListener("versionchange",Ai=>et(Ai.oldVersion,Ai.newVersion,Ai))}).catch(()=>{}),zt}(w,O,{upgrade:(M,H)=>{if(0===H)try{M.createObjectStore(ue)}catch(G){console.warn(G)}}}).catch(M=>{throw On.create("idb-open",{originalErrorMessage:M.message})})),be}function Dt(){return(Dt=(0,S.Z)(function*(M){try{const G=(yield ke()).transaction(ue),ge=yield G.objectStore(ue).get($e(M));return yield G.done,ge}catch(H){if(H instanceof Ue.ZR)at.warn(H.message);else{const G=On.create("idb-get",{originalErrorMessage:H?.message});at.warn(G.message)}}})).apply(this,arguments)}function Se(M,H){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,S.Z)(function*(M,H){try{const ge=(yield ke()).transaction(ue,"readwrite");yield ge.objectStore(ue).put(H,$e(M)),yield ge.done}catch(G){if(G instanceof Ue.ZR)at.warn(G.message);else{const ge=On.create("idb-set",{originalErrorMessage:G?.message});at.warn(ge.message)}}})).apply(this,arguments)}function $e(M){return`${M.name}!${M.options.appId}`}class $t{constructor(H){this.container=H,this._heartbeatsCache=null;const G=this.container.getProvider("app").getImmediate();this._storage=new sa(G),this._heartbeatsCachePromise=this._storage.read().then(ge=>(this._heartbeatsCache=ge,ge))}triggerHeartbeat(){var H=this;return(0,S.Z)(function*(){var G,ge;const ot=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=We();if((null!=(null===(G=H._heartbeatsCache)||void 0===G?void 0:G.heartbeats)||(H._heartbeatsCache=yield H._heartbeatsCachePromise,null!=(null===(ge=H._heartbeatsCache)||void 0===ge?void 0:ge.heartbeats)))&&H._heartbeatsCache.lastSentHeartbeatDate!==ft&&!H._heartbeatsCache.heartbeats.some(zt=>zt.date===ft))return H._heartbeatsCache.heartbeats.push({date:ft,agent:ot}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(zt=>{const Et=new Date(zt.date).valueOf();return Date.now()-Et<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,S.Z)(function*(){var G;if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null==(null===(G=H._heartbeatsCache)||void 0===G?void 0:G.heartbeats)||0===H._heartbeatsCache.heartbeats.length)return"";const ge=We(),{heartbeatsToSend:et,unsentEntries:ot}=function ia(M,H=1024){const G=[];let ge=M.slice();for(const et of M){const ot=G.find(ft=>ft.agent===et.agent);if(ot){if(ot.dates.push(et.date),vo(G)>H){ot.dates.pop();break}}else if(G.push({agent:et.agent,dates:[et.date]}),vo(G)>H){G.pop();break}ge=ge.slice(1)}return{heartbeatsToSend:G,unsentEntries:ge}}(H._heartbeatsCache.heartbeats),ft=(0,Ue.L)(JSON.stringify({version:2,heartbeats:et}));return H._heartbeatsCache.lastSentHeartbeatDate=ge,ot.length>0?(H._heartbeatsCache.heartbeats=ot,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),ft})()}}function We(){return(new Date).toISOString().substring(0,10)}class sa{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,S.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,S.Z)(function*(){if(yield H._canUseIndexedDBPromise){const ge=yield function Ye(M){return Dt.apply(this,arguments)}(H.app);return ge?.heartbeats?ge:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(H){var G=this;return(0,S.Z)(function*(){var ge;if(yield G._canUseIndexedDBPromise){const ot=yield G.read();return Se(G.app,{lastSentHeartbeatDate:null!==(ge=H.lastSentHeartbeatDate)&&void 0!==ge?ge:ot.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var G=this;return(0,S.Z)(function*(){var ge;if(yield G._canUseIndexedDBPromise){const ot=yield G.read();return Se(G.app,{lastSentHeartbeatDate:null!==(ge=H.lastSentHeartbeatDate)&&void 0!==ge?ge:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...H.heartbeats]})}})()}}function vo(M){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:M})).length}!function pc(M){yr(new Ce.wA("platform-logger",H=>new Wt(H),"PRIVATE")),yr(new Ce.wA("heartbeat",H=>new $t(H),"PRIVATE")),x(ii,si,M),x(ii,si,"esm2017"),x("fire-js","")}("")},537:(Ji,zn,Ge)=>{Ge.d(zn,{H0:()=>Xt,wA:()=>P});var S=Ge(861),Ce=Ge(58);class P{constructor(le,_e,Be){this.name=le,this.instanceFactory=_e,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const Ue="[DEFAULT]";class Pt{constructor(le,_e){this.name=le,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const _e=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(_e)){const Be=new Ce.BH;if(this.instancesDeferred.set(_e,Be),this.isInitialized(_e)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:_e});it&&Be.resolve(it)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(le){var _e;const Be=this.normalizeInstanceIdentifier(le?.identifier),it=null!==(_e=le?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Mt){if(it)return null;throw Mt}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Nn(At){return"EAGER"===At.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[_e,Be]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(_e);try{const Mt=this.getOrInitializeService({instanceIdentifier:it});Be.resolve(Mt)}catch{}}}}clearInstance(le=Ue){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,S.Z)(function*(){const _e=Array.from(le.instances.values());yield Promise.all([..._e.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),..._e.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=Ue){return this.instances.has(le)}getOptions(le=Ue){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:_e={}}=le,Be=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:Be,options:_e});for(const[Mt,qn]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Mt)&&qn.resolve(it);return it}onInit(le,_e){var Be;const it=this.normalizeInstanceIdentifier(_e),Mt=null!==(Be=this.onInitCallbacks.get(it))&&void 0!==Be?Be:new Set;Mt.add(le),this.onInitCallbacks.set(it,Mt);const qn=this.instances.get(it);return qn&&le(qn,it),()=>{Mt.delete(le)}}invokeOnInitCallbacks(le,_e){const Be=this.onInitCallbacks.get(_e);if(Be)for(const it of Be)try{it(le,_e)}catch{}}getOrInitializeService({instanceIdentifier:le,options:_e={}}){let Be=this.instances.get(le);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(At=le,At===Ue?void 0:At),options:_e}),this.instances.set(le,Be),this.instancesOptions.set(le,_e),this.invokeOnInitCallbacks(Be,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Be)}catch{}var At;return Be||null}normalizeInstanceIdentifier(le=Ue){return this.component?this.component.multipleInstances?le:Ue:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xt{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const _e=this.getProvider(le.name);if(_e.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);_e.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const _e=new Pt(le,this);return this.providers.set(le,_e),_e}getProviders(){return Array.from(this.providers.values())}}},879:(Ji,zn,Ge)=>{Ge.d(zn,{Am:()=>At,Ub:()=>Xt,Yd:()=>Nn,in:()=>Ce});const S=[];var Ce=function(le){return le[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",le}(Ce||{});const P={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Ue=Ce.INFO,Pt={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},pn=(le,_e,...Be)=>{if(_e<le.logLevel)return;const it=(new Date).toISOString(),Mt=Pt[_e];if(!Mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[Mt](`[${it}]  ${le.name}:`,...Be)};class Nn{constructor(_e){this.name=_e,this._logLevel=Ue,this._logHandler=pn,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in Ce))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?P[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,..._e),this._logHandler(this,Ce.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,..._e),this._logHandler(this,Ce.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,..._e),this._logHandler(this,Ce.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,..._e),this._logHandler(this,Ce.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,..._e),this._logHandler(this,Ce.ERROR,..._e)}}function Xt(le){S.forEach(_e=>{_e.setLogLevel(le)})}function At(le,_e){for(const Be of S){let it=null;_e&&_e.level&&(it=P[_e.level]),Be.userLogHandler=null===le?null:(Mt,qn,...vt)=>{const Je=vt.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");qn>=(it??Mt.logLevel)&&le({level:Ce[qn].toLowerCase(),message:Je,args:vt,type:Mt.name})}}}},365:(Ji,zn,Ge)=>{Ge.r(zn);var S=Ge(861),Ce=Ge(106),P=Ge(35),Ue=Ge(58),Nn=(Ge(534),Ge(879),Ge(537));function Xt(){return window}function _e(){return _e=(0,S.Z)(function*(T,A,w){var O;const{BuildInfo:ue}=Xt();(0,P.au)(A.sessionId,"AuthEvent did not contain a session ID");const be=yield function Xe(T){return Xn.apply(this,arguments)}(A.sessionId),ke={};return(0,P.av)()?ke.ibi=ue.packageName:(0,P.aw)()?ke.apn=ue.packageName:(0,P.ax)(T,"operation-not-supported-in-this-environment"),ue.displayName&&(ke.appDisplayName=ue.displayName),ke.sessionId=be,(0,P.ay)(T,w,A.type,void 0,null!==(O=A.eventId)&&void 0!==O?O:void 0,ke)}),_e.apply(this,arguments)}function it(){return(it=(0,S.Z)(function*(T){const{BuildInfo:A}=Xt(),w={};(0,P.av)()?w.iosBundleId=A.packageName:(0,P.aw)()?w.androidPackageName=A.packageName:(0,P.ax)(T,"operation-not-supported-in-this-environment"),yield(0,P.az)(T,w)})).apply(this,arguments)}function vt(){return(vt=(0,S.Z)(function*(T,A,w){const{cordova:O}=Xt();let ue=()=>{};try{yield new Promise((be,ke)=>{let Ye=null;function Dt(){var $e;be();const tr=null===($e=O.plugins.browsertab)||void 0===$e?void 0:$e.close;"function"==typeof tr&&tr(),"function"==typeof w?.close&&w.close()}function Se(){Ye||(Ye=window.setTimeout(()=>{ke((0,P.aB)(T,"redirect-cancelled-by-user"))},2e3))}function Ut(){"visible"===document?.visibilityState&&Se()}A.addPassiveListener(Dt),document.addEventListener("resume",Se,!1),(0,P.aw)()&&document.addEventListener("visibilitychange",Ut,!1),ue=()=>{A.removePassiveListener(Dt),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",Ut,!1),Ye&&window.clearTimeout(Ye)}})}finally{ue()}})).apply(this,arguments)}function Xn(){return(Xn=(0,S.Z)(function*(T){const A=function gn(T){if((0,P.au)(/[0-9a-zA-Z]+/.test(T),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(T);const A=new ArrayBuffer(T.length),w=new Uint8Array(A);for(let O=0;O<T.length;O++)w[O]=T.charCodeAt(O);return w}(T),w=yield crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(w)).map(ue=>ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Lt extends P.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(A=>{this.resolveInialized=A})}addPassiveListener(A){this.passiveListeners.add(A)}removePassiveListener(A){this.passiveListeners.delete(A)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(A){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(A)),super.onEvent(A)}initialized(){var A=this;return(0,S.Z)(function*(){yield A.initPromise})()}}function st(T){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,S.Z)(function*(T){const A=yield Wt()._get(mn(T));return A&&(yield Wt()._remove(mn(T))),A})).apply(this,arguments)}function rn(){const T=[];for(let w=0;w<20;w++){const O=Math.floor(62*Math.random());T.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(O))}return T.join("")}function Wt(){return(0,P.aE)(P.b)}function mn(T){return(0,P.aF)("authEvent",T.config.apiKey,T.name)}function at(T){if(!T?.includes("?"))return{};const[A,...w]=T.split("?");return(0,Ue.zd)(w.join("?"))}const J=class Ti{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(A){var w=this;return(0,S.Z)(function*(){const O=A._key();let ue=w.eventManagers.get(O);return ue||(ue=new Lt(A),w.eventManagers.set(O,ue),w.attachCallbackListeners(A,ue)),ue})()}_openPopup(A){(0,P.ax)(A,"operation-not-supported-in-this-environment")}_openRedirect(A,w,O,ue){var be=this;return(0,S.Z)(function*(){!function Je(T){var A,w,O,ue,be,ke,Ye,Dt,Se,Ut;const $e=Xt();(0,P.aC)("function"==typeof(null===(A=$e?.universalLinks)||void 0===A?void 0:A.subscribe),T,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aC)(typeof(null===(w=$e?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aC)("function"==typeof(null===(be=null===(ue=null===(O=$e?.cordova)||void 0===O?void 0:O.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===be?void 0:be.openUrl),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Dt=null===(Ye=null===(ke=$e?.cordova)||void 0===ke?void 0:ke.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===Dt?void 0:Dt.isAvailable),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Ut=null===(Se=$e?.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===Ut?void 0:Ut.open),T,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(A);const ke=yield be._initialize(A);yield ke.initialized(),ke.resetRedirect(),(0,P.aI)(),yield be._originValidation(A);const Ye=function Lr(T,A,w=null){return{type:A,eventId:w,urlResponse:null,sessionId:rn(),postBody:null,tenantId:T.tenantId,error:(0,P.aB)(T,"no-auth-event")}}(A,O,ue);yield function Ot(T,A){return Wt()._set(mn(T),A)}(A,Ye);const Dt=yield function le(T,A,w){return _e.apply(this,arguments)}(A,Ye,w),Se=yield function Mt(T){const{cordova:A}=Xt();return new Promise(w=>{A.plugins.browsertab.isAvailable(O=>{let ue=null;O?A.plugins.browsertab.openUrl(T):ue=A.InAppBrowser.open(T,(0,P.aA)()?"_blank":"_system","location=yes"),w(ue)})})}(Dt);return function qn(T,A,w){return vt.apply(this,arguments)}(A,ke,Se)})()}_isIframeWebStorageSupported(A,w){throw new Error("Method not implemented.")}_originValidation(A){const w=A._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function Be(T){return it.apply(this,arguments)}(A)),this.originValidationPromises[w]}attachCallbackListeners(A,w){const{universalLinks:O,handleOpenURL:ue,BuildInfo:be}=Xt(),ke=setTimeout((0,S.Z)(function*(){yield st(A),w.onEvent(ee())}),500),Ye=function(){var Ut=(0,S.Z)(function*($e){clearTimeout(ke);const tr=yield st(A);let yo=null;tr&&$e?.url&&(yo=function de(T,A){var w,O;const ue=function si(T){const A=at(T),w=A.link?decodeURIComponent(A.link):void 0,O=at(w).link,ue=A.deep_link_id?decodeURIComponent(A.deep_link_id):void 0;return at(ue).link||ue||O||w||T}(A);if(ue.includes("/__/auth/callback")){const be=at(ue),ke=be.firebaseError?function ii(T){try{return JSON.parse(T)}catch{return null}}(decodeURIComponent(be.firebaseError)):null,Ye=null===(O=null===(w=ke?.code)||void 0===w?void 0:w.split("auth/"))||void 0===O?void 0:O[1],Dt=Ye?(0,P.aB)(Ye):null;return Dt?{type:T.type,eventId:T.eventId,tenantId:T.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:T.type,eventId:T.eventId,tenantId:T.tenantId,sessionId:T.sessionId,urlResponse:ue,postBody:null}}return null}(tr,$e.url)),w.onEvent(yo||ee())});return function(tr){return Ut.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,Ye);const Dt=ue,Se=`${be.packageName.toLowerCase()}://`;Xt().handleOpenURL=function(){var Ut=(0,S.Z)(function*($e){if($e.toLowerCase().startsWith(Se)&&Ye({url:$e}),"function"==typeof Dt)try{Dt($e)}catch(tr){console.error(tr)}});return function($e){return Ut.apply(this,arguments)}}()}};function ee(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aB)("no-auth-event")}}function Re(){var T;return(null===(T=self?.location)||void 0===T?void 0:T.protocol)||null}function xe(T=(0,Ue.z$)()){return!("file:"!==Re()&&"ionic:"!==Re()&&"capacitor:"!==Re()||!T.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nt(){try{const T=self.localStorage,A=P.aN();if(T)return T.setItem(A,"1"),T.removeItem(A),!function oi(T=(0,Ue.z$)()){return function Ct(){return(0,Ue.w1)()&&11===document?.documentMode}()||function sn(T=(0,Ue.z$)()){return/Edge\/\d+/.test(T)}(T)}()||(0,Ue.hl)()}catch{return Zt()&&(0,Ue.hl)()}return!1}function Zt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dn(){return(function It(){return"http:"===Re()||"https:"===Re()}()||(0,Ue.ru)()||xe())&&!function Fe(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&Nt()&&!Zt()}function Gn(){return xe()&&typeof document<"u"}function ms(){return(ms=(0,S.Z)(function*(){return!!Gn()&&new Promise(T=>{const A=setTimeout(()=>{T(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(A),T(!0)})})})).apply(this,arguments)}const xt={LOCAL:"local",NONE:"none",SESSION:"session"},Ci=P.aC,Vs="persistence";function ai(T){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,S.Z)(function*(T){yield T._initializationPromise;const A=Dr(),w=P.aF(Vs,T.config.apiKey,T.name);A&&A.setItem(w,T._getPersistence())})).apply(this,arguments)}function Dr(){var T;try{return(null===(T=function Li(){return typeof window<"u"?window:null}())||void 0===T?void 0:T.sessionStorage)||null}catch{return null}}const _n=P.aC;class Ar{constructor(){this.browserResolver=P.aE(P.k),this.cordovaResolver=P.aE(J),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(A){var w=this;return(0,S.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(A)})()}_openPopup(A,w,O,ue){var be=this;return(0,S.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openPopup(A,w,O,ue)})()}_openRedirect(A,w,O,ue){var be=this;return(0,S.Z)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openRedirect(A,w,O,ue)})()}_isIframeWebStorageSupported(A,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(A,w)}_originValidation(A){return this.assertedUnderlyingResolver._originValidation(A)}get _shouldInitProactively(){return Gn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _n(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var A=this;return(0,S.Z)(function*(){if(A.underlyingResolver)return;const w=yield function ur(){return ms.apply(this,arguments)}();A.underlyingResolver=w?A.cordovaResolver:A.browserResolver})()}}function en(T){return T.unwrap()}function xn(T){return ys(T)}function ys(T){const{_tokenResponse:A}=T instanceof Ue.ZR?T.customData:T;if(!A)return null;if(!(T instanceof Ue.ZR)&&"temporaryProof"in A&&"phoneNumber"in A)return P.P.credentialFromResult(T);const w=A.providerId;if(!w||w===P.p.PASSWORD)return null;let O;switch(w){case P.p.GOOGLE:O=P.X;break;case P.p.FACEBOOK:O=P.W;break;case P.p.GITHUB:O=P.Y;break;case P.p.TWITTER:O=P.$;break;default:const{oauthIdToken:ue,oauthAccessToken:be,oauthTokenSecret:ke,pendingToken:Ye,nonce:Dt}=A;return be||ke||ue||Ye?Ye?w.startsWith("saml.")?P.aQ._create(w,Ye):P.N._fromParams({providerId:w,signInMethod:w,pendingToken:Ye,idToken:ue,accessToken:be}):new P.Z(w).credential({idToken:ue,accessToken:be,rawNonce:Dt}):null}return T instanceof Ue.ZR?O.credentialFromError(T):O.credentialFromResult(T)}function Kt(T,A){return A.catch(w=>{throw w instanceof Ue.ZR&&function Fs(T,A){var w;const O=null===(w=A.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===A?.code)A.resolver=new On(T,P.as(T,A));else if(O){const ue=ys(A),be=A;ue&&(be.credential=ue,be.tenantId=O.tenantId||void 0,be.email=O.email||void 0,be.phoneNumber=O.phoneNumber||void 0)}}(T,w),w}).then(w=>{const ue=w.user;return{operationType:w.operationType,credential:xn(w),additionalUserInfo:P.aq(w),user:er.getOrCreate(ue)}})}function Di(T,A){return vs.apply(this,arguments)}function vs(){return(vs=(0,S.Z)(function*(T,A){const w=yield A;return{verificationId:w.verificationId,confirm:O=>Kt(T,w.confirm(O))}})).apply(this,arguments)}class On{constructor(A,w){this.resolver=w,this.auth=function yr(T){return T.wrapped()}(A)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(A){return Kt(en(this.auth),this.resolver.resolveSignIn(A))}}class er{constructor(A){this._delegate=A,this.multiFactor=P.at(A)}static getOrCreate(A){return er.USER_MAP.has(A)||er.USER_MAP.set(A,new er(A)),er.USER_MAP.get(A)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(A){return this._delegate.getIdTokenResult(A)}getIdToken(A){return this._delegate.getIdToken(A)}linkAndRetrieveDataWithCredential(A){return this.linkWithCredential(A)}linkWithCredential(A){var w=this;return(0,S.Z)(function*(){return Kt(w.auth,P.a2(w._delegate,A))})()}linkWithPhoneNumber(A,w){var O=this;return(0,S.Z)(function*(){return Di(O.auth,P.l(O._delegate,A,w))})()}linkWithPopup(A){var w=this;return(0,S.Z)(function*(){return Kt(w.auth,P.d(w._delegate,A,Ar))})()}linkWithRedirect(A){var w=this;return(0,S.Z)(function*(){return yield ai(P.aJ(w.auth)),P.g(w._delegate,A,Ar)})()}reauthenticateAndRetrieveDataWithCredential(A){return this.reauthenticateWithCredential(A)}reauthenticateWithCredential(A){var w=this;return(0,S.Z)(function*(){return Kt(w.auth,P.a3(w._delegate,A))})()}reauthenticateWithPhoneNumber(A,w){return Di(this.auth,P.r(this._delegate,A,w))}reauthenticateWithPopup(A){return Kt(this.auth,P.e(this._delegate,A,Ar))}reauthenticateWithRedirect(A){var w=this;return(0,S.Z)(function*(){return yield ai(P.aJ(w.auth)),P.h(w._delegate,A,Ar)})()}sendEmailVerification(A){return P.ag(this._delegate,A)}unlink(A){var w=this;return(0,S.Z)(function*(){return yield P.ap(w._delegate,A),w})()}updateEmail(A){return P.al(this._delegate,A)}updatePassword(A){return P.am(this._delegate,A)}updatePhoneNumber(A){return P.u(this._delegate,A)}updateProfile(A){return P.ak(this._delegate,A)}verifyBeforeUpdateEmail(A,w){return P.ah(this._delegate,A,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}er.USER_MAP=new WeakMap;const yn=P.aC;let vr=(()=>{class T{constructor(w,O){if(this.app=w,O.isInitialized())return this._delegate=O.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ue}=w.options;yn(ue,"invalid-api-key",{appName:w.name}),yn(ue,"invalid-api-key",{appName:w.name});const be=typeof window<"u"?Ar:void 0;this._delegate=O.initialize({options:{persistence:Ls(ue,w.name),popupRedirectResolver:be}}),this._delegate._updateErrorMap(P.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?er.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,O){P.K(this._delegate,w,O)}applyActionCode(w){return P.a7(this._delegate,w)}checkActionCode(w){return P.a8(this._delegate,w)}confirmPasswordReset(w,O){return P.a6(this._delegate,w,O)}createUserWithEmailAndPassword(w,O){var ue=this;return(0,S.Z)(function*(){return Kt(ue._delegate,P.aa(ue._delegate,w,O))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return P.af(this._delegate,w)}isSignInWithEmailLink(w){return P.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,S.Z)(function*(){yn(Dn(),w._delegate,"operation-not-supported-in-this-environment");const O=yield P.j(w._delegate,Ar);return O?Kt(w._delegate,Promise.resolve(O)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function re(T,A){(0,P.aJ)(T)._logFramework(A)}(this._delegate,w)}onAuthStateChanged(w,O,ue){const{next:be,error:ke,complete:Ye}=Is(w,O,ue);return this._delegate.onAuthStateChanged(be,ke,Ye)}onIdTokenChanged(w,O,ue){const{next:be,error:ke,complete:Ye}=Is(w,O,ue);return this._delegate.onIdTokenChanged(be,ke,Ye)}sendSignInLinkToEmail(w,O){return P.ac(this._delegate,w,O)}sendPasswordResetEmail(w,O){return P.a5(this._delegate,w,O||void 0)}setPersistence(w){var O=this;return(0,S.Z)(function*(){let ue;switch(function _s(T,A){Ci(Object.values(xt).includes(A),T,"invalid-persistence-type"),(0,Ue.b$)()?Ci(A!==xt.SESSION,T,"unsupported-persistence-type"):(0,Ue.UG)()?Ci(A===xt.NONE,T,"unsupported-persistence-type"):Zt()?Ci(A===xt.NONE||A===xt.LOCAL&&(0,Ue.hl)(),T,"unsupported-persistence-type"):Ci(A===xt.NONE||Nt(),T,"unsupported-persistence-type")}(O._delegate,w),w){case xt.SESSION:ue=P.a;break;case xt.LOCAL:ue=(yield P.aE(P.i)._isAvailable())?P.i:P.b;break;case xt.NONE:ue=P.U;break;default:return P.ax("argument-error",{appName:O._delegate.name})}return O._delegate.setPersistence(ue)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Kt(this._delegate,P.a0(this._delegate))}signInWithCredential(w){return Kt(this._delegate,P.a1(this._delegate,w))}signInWithCustomToken(w){return Kt(this._delegate,P.a4(this._delegate,w))}signInWithEmailAndPassword(w,O){return Kt(this._delegate,P.ab(this._delegate,w,O))}signInWithEmailLink(w,O){return Kt(this._delegate,P.ae(this._delegate,w,O))}signInWithPhoneNumber(w,O){return Di(this._delegate,P.s(this._delegate,w,O))}signInWithPopup(w){var O=this;return(0,S.Z)(function*(){return yn(Dn(),O._delegate,"operation-not-supported-in-this-environment"),Kt(O._delegate,P.c(O._delegate,w,Ar))})()}signInWithRedirect(w){var O=this;return(0,S.Z)(function*(){return yn(Dn(),O._delegate,"operation-not-supported-in-this-environment"),yield ai(O._delegate),P.f(O._delegate,w,Ar)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return P.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return T.Persistence=xt,T})();function Is(T,A,w){let O=T;"function"!=typeof T&&({next:O,error:A,complete:w}=T);const ue=O;return{next:ke=>ue(ke&&er.getOrCreate(ke)),error:A,complete:w}}function Ls(T,A){const w=function Cr(T,A){const w=Dr();if(!w)return[];const O=P.aF(Vs,T,A);switch(w.getItem(O)){case xt.NONE:return[P.U];case xt.LOCAL:return[P.i,P.a];case xt.SESSION:return[P.a];default:return[]}}(T,A);if(typeof self<"u"&&!w.includes(P.i)&&w.push(P.i),typeof window<"u")for(const O of[P.b,P.a])w.includes(O)||w.push(O);return w.includes(P.U)||w.push(P.U),w}class Us{constructor(){this.providerId="phone",this._delegate=new P.P(en(Ce.Z.auth()))}static credential(A,w){return P.P.credential(A,w)}verifyPhoneNumber(A,w){return this._delegate.verifyPhoneNumber(A,w)}unwrap(){return this._delegate}}Us.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Us.PROVIDER_ID=P.P.PROVIDER_ID;const Bs=P.aC;class Es{constructor(A,w,O=Ce.Z.app()){var ue;Bs(null===(ue=O.options)||void 0===ue?void 0:ue.apiKey,"invalid-api-key",{appName:O.name}),this._delegate=new P.R(O.auth(),A,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function x(T){T.INTERNAL.registerComponent(new Nn.wA("auth-compat",A=>{const w=A.getProvider("app-compat").getImmediate(),O=A.getProvider("auth");return new vr(w,O)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.V,FacebookAuthProvider:P.W,GithubAuthProvider:P.Y,GoogleAuthProvider:P.X,OAuthProvider:P.Z,SAMLAuthProvider:P._,PhoneAuthProvider:Us,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Es,TwitterAuthProvider:P.$,Auth:vr,AuthCredential:P.L,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),T.registerVersion("@firebase/auth-compat","0.5.9")}(Ce.Z)},861:(Ji,zn,Ge)=>{function S(P,Ue,Pt,pn,Nn,Xt,At){try{var le=P[Xt](At),_e=le.value}catch(Be){return void Pt(Be)}le.done?Ue(_e):Promise.resolve(_e).then(pn,Nn)}function Ce(P){return function(){var Ue=this,Pt=arguments;return new Promise(function(pn,Nn){var Xt=P.apply(Ue,Pt);function At(_e){S(Xt,pn,Nn,At,le,"next",_e)}function le(_e){S(Xt,pn,Nn,At,le,"throw",_e)}At(void 0)})}}Ge.d(zn,{Z:()=>Ce})},582:(Ji,zn,Ge)=>{function Ue(J,ee){var re={};for(var se in J)Object.prototype.hasOwnProperty.call(J,se)&&ee.indexOf(se)<0&&(re[se]=J[se]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(se=Object.getOwnPropertySymbols(J);ce<se.length;ce++)ee.indexOf(se[ce])<0&&Object.prototype.propertyIsEnumerable.call(J,se[ce])&&(re[se[ce]]=J[se[ce]])}return re}function Be(J,ee,re,se){return new(re||(re=Promise))(function(te,Re){function It(Ct){try{Fe(se.next(Ct))}catch(sn){Re(sn)}}function xe(Ct){try{Fe(se.throw(Ct))}catch(sn){Re(sn)}}function Fe(Ct){Ct.done?te(Ct.value):function ce(te){return te instanceof re?te:new re(function(Re){Re(te)})}(Ct.value).then(It,xe)}Fe((se=se.apply(J,ee||[])).next())})}function gt(J){return this instanceof gt?(this.v=J,this):new gt(J)}function Lt(J,ee,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,se=re.apply(J,ee||[]),te=[];return ce={},It("next"),It("throw"),It("return",function Re(Nt){return function(Zt){return Promise.resolve(Zt).then(Nt,sn)}}),ce[Symbol.asyncIterator]=function(){return this},ce;function It(Nt,Zt){se[Nt]&&(ce[Nt]=function(Dn){return new Promise(function(Gn,ur){te.push([Nt,Dn,Gn,ur])>1||xe(Nt,Dn)})},Zt&&(ce[Nt]=Zt(ce[Nt])))}function xe(Nt,Zt){try{!function Fe(Nt){Nt.value instanceof gt?Promise.resolve(Nt.value.v).then(Ct,sn):oi(te[0][2],Nt)}(se[Nt](Zt))}catch(Dn){oi(te[0][3],Dn)}}function Ct(Nt){xe("next",Nt)}function sn(Nt){xe("throw",Nt)}function oi(Nt,Zt){Nt(Zt),te.shift(),te.length&&xe(te[0][0],te[0][1])}}function Ot(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,ee=J[Symbol.asyncIterator];return ee?ee.call(J):(J=function vt(J){var ee="function"==typeof Symbol&&Symbol.iterator,re=ee&&J[ee],se=0;if(re)return re.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&se>=J.length&&(J=void 0),{value:J&&J[se++],done:!J}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),re={},se("next"),se("throw"),se("return"),re[Symbol.asyncIterator]=function(){return this},re);function se(te){re[te]=J[te]&&function(Re){return new Promise(function(It,xe){!function ce(te,Re,It,xe){Promise.resolve(xe).then(function(Fe){te({value:Fe,done:It})},Re)}(It,xe,(Re=J[te](Re)).done,Re.value)})}}}Ge.d(zn,{FC:()=>Lt,KL:()=>Ot,_T:()=>Ue,mG:()=>Be,qq:()=>gt}),"function"==typeof SuppressedError&&SuppressedError}},Ji=>{Ji(Ji.s=102)}]);