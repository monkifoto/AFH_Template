"use strict";(self.webpackChunkadult_family_home=self.webpackChunkadult_family_home||[]).push([[179],{35:(ho,Kn,Ke)=>{Ke.d(Kn,{$:()=>dm,A:()=>be,G:()=>kt,K:()=>yh,L:()=>Bs,N:()=>Ji,P:()=>Um,R:()=>Fm,U:()=>et,V:()=>Da,W:()=>Wc,X:()=>Sh,Y:()=>Ph,Z:()=>Tt,_:()=>Ou,a:()=>Na,a0:()=>hm,a1:()=>el,a2:()=>ar,a3:()=>gm,a4:()=>mm,a5:()=>_m,a6:()=>nl,a7:()=>jI,a8:()=>Ne,a9:()=>gn,aA:()=>Vc,aB:()=>jt,aC:()=>pe,aD:()=>vo,aE:()=>Pe,aF:()=>Pt,aG:()=>gl,aH:()=>Hm,aI:()=>oE,aJ:()=>fn,aN:()=>Oa,aQ:()=>Zr,aa:()=>ku,ab:()=>Sa,ac:()=>Bn,ad:()=>Pa,ae:()=>ot,af:()=>jn,ag:()=>Ra,ah:()=>Fu,ak:()=>Vu,al:()=>vt,am:()=>yA,ap:()=>BI,aq:()=>kr,as:()=>wA,at:()=>wm,au:()=>Qt,av:()=>Ls,aw:()=>Qe,ax:()=>yt,ay:()=>El,az:()=>Km,b:()=>HI,c:()=>Bm,d:()=>Xe,e:()=>jm,f:()=>xt,g:()=>_o,h:()=>mr,i:()=>GI,j:()=>sE,k:()=>n_,l:()=>go,m:()=>NA,p:()=>rn,r:()=>Lm,s:()=>Jh,u:()=>Qr});var R=Ke(861),De=Ke(534),M=Ke(58),$e=Ke(879),Ot=Ke(582),vn=Ke(537);const rn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},be={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const kt=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Qn=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new $e.Yd("@firebase/auth");function In(p,...c){nt.logLevel<=$e.in.ERROR&&nt.error(`Auth (${De.SDK_VERSION}): ${p}`,...c)}function yt(p,...c){throw Pn(p,...c)}function jt(p,...c){return Pn(p,...c)}function Gr(p,c,d){const g=Object.assign(Object.assign({},Qn()),{[c]:d});return new M.LL("auth","Firebase",g).create(c,{appName:p.name})}function Lt(p){return Gr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ut(p,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&yt(p,"argument-error"),Gr(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pn(p,...c){if("string"!=typeof p){const d=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return bt.create(p,...c)}function pe(p,c,...d){if(!p)throw Pn(c,...d)}function un(p){const c="INTERNAL ASSERTION FAILED: "+p;throw In(c),new Error(c)}function Qt(p,c){p||un(c)}function En(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function di(){return"http:"===hi()||"https:"===hi()}function hi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class xi{constructor(c,d){this.shortDelay=c,this.longDelay=d,Qt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return function ct(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(di()||(0,M.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(p,c){Qt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class re{static initialize(c,d,g){this.fetchImpl=c,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ue=new xi(3e4,6e4);function he(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function ie(p,c,d,g){return xe.apply(this,arguments)}function xe(){return(xe=(0,R.Z)(function*(p,c,d,g,v={}){return wt(p,v,(0,R.Z)(function*(){let T={},$={};g&&("GET"===c?$=g:T={body:JSON.stringify(g)});const X=(0,M.xO)(Object.assign({key:p.config.apiKey},$)).slice(1),ge=yield p._getAdditionalHeaders();return ge["Content-Type"]="application/json",p.languageCode&&(ge["X-Firebase-Locale"]=p.languageCode),re.fetch()(cn(p,p.config.apiHost,d,X),Object.assign({method:c,headers:ge,referrerPolicy:"no-referrer"},T))}))})).apply(this,arguments)}function wt(p,c,d){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,R.Z)(function*(p,c,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},se),c);try{const v=new Ft(p),T=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const $=yield T.json();if("needConfirmation"in $)throw Yt(p,"account-exists-with-different-credential",$);if(T.ok&&!("errorMessage"in $))return $;{const X=T.ok?$.errorMessage:$.error.message,[ge,ke]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ge)throw Yt(p,"credential-already-in-use",$);if("EMAIL_EXISTS"===ge)throw Yt(p,"email-already-in-use",$);if("USER_DISABLED"===ge)throw Yt(p,"user-disabled",$);const We=g[ge]||ge.toLowerCase().replace(/[_\s]+/g,"-");if(ke)throw Gr(p,We,ke);yt(p,We)}}catch(v){if(v instanceof M.ZR)throw v;yt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Be(p,c,d,g){return St.apply(this,arguments)}function St(){return(St=(0,R.Z)(function*(p,c,d,g,v={}){const T=yield ie(p,c,d,g,v);return"mfaPendingCredential"in T&&yt(p,"multi-factor-auth-required",{_serverResponse:T}),T})).apply(this,arguments)}function cn(p,c,d,g){const v=`${c}${d}?${g}`;return p.config.emulator?te(p.config,v):`${p.config.apiScheme}://${v}`}function fi(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ft{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(jt(this.auth,"network-request-failed")),ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yt(p,c,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=jt(p,c,g);return v.customData._tokenResponse=d,v}function Rn(p){return void 0!==p&&void 0!==p.getResponse}function Yn(p){return void 0!==p&&void 0!==p.enterprise}class pr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return fi(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Qi(){return(Qi=(0,R.Z)(function*(p){return(yield ie(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vt(p,c){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,R.Z)(function*(p,c){return ie(p,"GET","/v2/recaptchaConfig",he(p,c))})).apply(this,arguments)}function Ro(){return(Ro=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Yi(){return(Yi=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Rr(p,c){return xr.apply(this,arguments)}function xr(){return(xr=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function bn(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Cr(){return(Cr=(0,R.Z)(function*(p,c=!1){const d=(0,M.m9)(p),g=yield d.getIdToken(c),v=ns(g);pe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const T="object"==typeof v.firebase?v.firebase:void 0,$=T?.sign_in_provider;return{claims:v,token:g,authTime:bn(Ln(v.auth_time)),issuedAtTime:bn(Ln(v.iat)),expirationTime:bn(Ln(v.exp)),signInProvider:$||null,signInSecondFactor:T?.sign_in_second_factor||null}})).apply(this,arguments)}function Ln(p){return 1e3*Number(p)}function ns(p){const[c,d,g]=p.split(".");if(void 0===c||void 0===d||void 0===g)return In("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,M.tV)(d);return v?JSON.parse(v):(In("Failed to decode base64 JWT payload"),null)}catch(v){return In("Caught error parsing JWT payload as JSON",v?.toString()),null}}function xo(p){const c=ns(p);return pe(c,"internal-error"),pe(typeof c.exp<"u","internal-error"),pe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Jt(p,c){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,R.Z)(function*(p,c,d=!1){if(d)return c;try{return yield c}catch(g){throw g instanceof M.ZR&&function Mo({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Un{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,R.Z)(function*(){yield d.iteration()}),g)}iteration(){var c=this;return(0,R.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class or{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wn(p){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,R.Z)(function*(p){var c;const d=p.auth,g=yield p.getIdToken(),v=yield Jt(p,Rr(d,{idToken:g}));pe(v?.users.length,d,"internal-error");const T=v.users[0];p._notifyReloadListener(T);const $=null!==(c=T.providerUserInfo)&&void 0!==c&&c.length?os(T.providerUserInfo):[],X=function is(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,$),We=!!p.isAnonymous&&!(p.email&&T.passwordHash||X?.length),It={uid:T.localId,displayName:T.displayName||null,photoURL:T.photoUrl||null,email:T.email||null,emailVerified:T.emailVerified||!1,phoneNumber:T.phoneNumber||null,tenantId:T.tenantId||null,providerData:X,metadata:new or(T.createdAt,T.lastLoginAt),isAnonymous:We};Object.assign(p,It)})).apply(this,arguments)}function rs(){return(rs=(0,R.Z)(function*(p){const c=(0,M.m9)(p);yield wn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function os(p){return p.map(c=>{var{providerId:d}=c,g=(0,Ot._T)(c,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function U(){return(U=(0,R.Z)(function*(p,c){const d=yield wt(p,{},(0,R.Z)(function*(){const g=(0,M.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:T}=p.config,$=cn(p,v,"/v1/token",`key=${T}`),X=yield p._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",re.fetch()($,{method:"POST",headers:X,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,R.Z)(function*(p,c){return ie(p,"POST","/v2/accounts:revokeToken",he(p,c))})).apply(this,arguments)}class A{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){pe(c.idToken,"internal-error"),pe(typeof c.idToken<"u","internal-error"),pe(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):xo(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){pe(0!==c.length,"internal-error");const d=xo(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var g=this;return(0,R.Z)(function*(){return d||!g.accessToken||g.isExpired?(pe(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var g=this;return(0,R.Z)(function*(){const{accessToken:v,refreshToken:T,expiresIn:$}=yield function Oo(p,c){return U.apply(this,arguments)}(c,d);g.updateTokensAndExpiration(v,T,Number($))})()}updateTokensAndExpiration(c,d,g){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,d){const{refreshToken:g,accessToken:v,expirationTime:T}=d,$=new A;return g&&(pe("string"==typeof g,"internal-error",{appName:c}),$.refreshToken=g),v&&(pe("string"==typeof v,"internal-error",{appName:c}),$.accessToken=v),T&&(pe("number"==typeof T,"internal-error",{appName:c}),$.expirationTime=T),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new A,this.toJSON())}_performRefresh(){return un("not implemented")}}function b(p,c){pe("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class V{constructor(c){var{uid:d,auth:g,stsTokenManager:v}=c,T=(0,Ot._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=T.displayName||null,this.email=T.email||null,this.emailVerified=T.emailVerified||!1,this.phoneNumber=T.phoneNumber||null,this.photoURL=T.photoURL||null,this.isAnonymous=T.isAnonymous||!1,this.tenantId=T.tenantId||null,this.providerData=T.providerData?[...T.providerData]:[],this.metadata=new or(T.createdAt||void 0,T.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,R.Z)(function*(){const g=yield Jt(d,d.stsTokenManager.getToken(d.auth,c));return pe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(c){return function on(p){return Cr.apply(this,arguments)}(this,c)}reload(){return function No(p){return rs.apply(this,arguments)}(this)}_assign(c){this!==c&&(pe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new V(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var g=this;return(0,R.Z)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),d&&(yield wn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,R.Z)(function*(){if((0,De._isFirebaseServerApp)(c.auth.app))return Promise.reject(Lt(c.auth));const d=yield c.getIdToken();return yield Jt(c,function ts(p,c){return Ro.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var g,v,T,$,X,ge,ke,We;const It=null!==(g=d.displayName)&&void 0!==g?g:void 0,yr=null!==(v=d.email)&&void 0!==v?v:void 0,Yr=null!==(T=d.phoneNumber)&&void 0!==T?T:void 0,Tl=null!==($=d.photoURL)&&void 0!==$?$:void 0,Ef=null!==(X=d.tenantId)&&void 0!==X?X:void 0,Dl=null!==(ge=d._redirectEventId)&&void 0!==ge?ge:void 0,Ba=null!==(ke=d.createdAt)&&void 0!==ke?ke:void 0,i_=null!==(We=d.lastLoginAt)&&void 0!==We?We:void 0,{uid:vr,emailVerified:o_,isAnonymous:dr,providerData:Wu,stsTokenManager:s_}=d;pe(vr&&s_,c,"internal-error");const a_=A.fromJSON(this.name,s_);pe("string"==typeof vr,c,"internal-error"),b(It,c.name),b(yr,c.name),pe("boolean"==typeof o_,c,"internal-error"),pe("boolean"==typeof dr,c,"internal-error"),b(Yr,c.name),b(Tl,c.name),b(Ef,c.name),b(Dl,c.name),b(Ba,c.name),b(i_,c.name);const ja=new V({uid:vr,auth:c,email:yr,emailVerified:o_,displayName:It,isAnonymous:dr,photoURL:Tl,phoneNumber:Yr,tenantId:Ef,stsTokenManager:a_,createdAt:Ba,lastLoginAt:i_});return Wu&&Array.isArray(Wu)&&(ja.providerData=Wu.map($a=>Object.assign({},$a))),Dl&&(ja._redirectEventId=Dl),ja}static _fromIdTokenResponse(c,d,g=!1){return(0,R.Z)(function*(){const v=new A;v.updateFromServerResponse(d);const T=new V({uid:d.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield wn(T),T})()}static _fromGetAccountInfoResponse(c,d,g){return(0,R.Z)(function*(){const v=d.users[0];pe(void 0!==v.localId,"internal-error");const T=void 0!==v.providerUserInfo?os(v.providerUserInfo):[],$=!(v.email&&v.passwordHash||T?.length),X=new A;X.updateFromIdToken(g);const ge=new V({uid:v.localId,auth:c,stsTokenManager:X,isAnonymous:$}),ke={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:T,metadata:new or(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||T?.length)};return Object.assign(ge,ke),ge})()}}const de=new Map;function Pe(p){Qt(p instanceof Function,"Expected a class definition");let c=de.get(p);return c?(Qt(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,de.set(p,c),c)}const et=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,R.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,R.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,R.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function Pt(p,c,d){return`firebase:${p}:${c}:${d}`}class Re{constructor(c,d,g){this.persistence=c,this.auth=d,this.userKey=g;const{config:v,name:T}=this.auth;this.fullUserKey=Pt(this.userKey,v.apiKey,T),this.fullPersistenceKey=Pt("persistence",v.apiKey,T),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,R.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?V._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,R.Z)(function*(){if(d.persistence===c)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,g="authUser"){return(0,R.Z)(function*(){if(!d.length)return new Re(Pe(et),c,g);const v=(yield Promise.all(d.map(function(){var ke=(0,R.Z)(function*(We){if(yield We._isAvailable())return We});return function(We){return ke.apply(this,arguments)}}()))).filter(ke=>ke);let T=v[0]||Pe(et);const $=Pt(g,c.config.apiKey,c.name);let X=null;for(const ke of d)try{const We=yield ke._get($);if(We){const It=V._fromJSON(c,We);ke!==T&&(X=It),T=ke;break}}catch{}const ge=v.filter(ke=>ke._shouldAllowMigration);return T._shouldAllowMigration&&ge.length?(T=ge[0],X&&(yield T._set($,X.toJSON())),yield Promise.all(d.map(function(){var ke=(0,R.Z)(function*(We){if(We!==T)try{yield We._remove($)}catch{}});return function(We){return ke.apply(this,arguments)}}())),new Re(T,c,g)):new Re(T,c,g)})()}}function $t(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ht(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(qe(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(wa(c))return"Blackberry";if(Ca(c))return"Webos";if(sr(c))return"Safari";if((c.includes("chrome/")||Vs(c))&&!c.includes("edge/"))return"Chrome";if(Qe(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function qe(p=(0,M.z$)()){return/firefox\//i.test(p)}function sr(p=(0,M.z$)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Vs(p=(0,M.z$)()){return/crios\//i.test(p)}function Ht(p=(0,M.z$)()){return/iemobile/i.test(p)}function Qe(p=(0,M.z$)()){return/android/i.test(p)}function wa(p=(0,M.z$)()){return/blackberry/i.test(p)}function Ca(p=(0,M.z$)()){return/webos/i.test(p)}function Ls(p=(0,M.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Vc(p=(0,M.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function K(p=(0,M.z$)()){return Ls(p)||Qe(p)||Ca(p)||wa(p)||/windows phone/i.test(p)||Ht(p)}function rt(p,c=[]){let d;switch(p){case"Browser":d=$t((0,M.z$)());break;case"Worker":d=`${$t((0,M.z$)())}-${p}`;break;default:d=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${De.SDK_VERSION}/${g}`}class lt{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const g=T=>new Promise(($,X)=>{try{$(c(T))}catch(ge){X(ge)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,R.Z)(function*(){if(d.auth.currentUser===c)return;const g=[];try{for(const v of d.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const T of g)try{T()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Wt(){return(Wt=(0,R.Z)(function*(p,c={}){return ie(p,"GET","/v2/passwordPolicy",he(p,c))})).apply(this,arguments)}class Oi{constructor(c){var d,g,v,T;const $=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=$.minPasswordLength)&&void 0!==d?d:6,$.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=$.maxPasswordLength),void 0!==$.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=$.containsLowercaseCharacter),void 0!==$.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=$.containsUppercaseCharacter),void 0!==$.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=$.containsNumericCharacter),void 0!==$.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=$.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(T=c.forceUpgradeOnSignin)&&void 0!==T&&T,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,g,v,T,$,X;const ge={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,ge),this.validatePasswordCharacterOptions(c,ge),ge.isValid&&(ge.isValid=null===(d=ge.meetsMinPasswordLength)||void 0===d||d),ge.isValid&&(ge.isValid=null===(g=ge.meetsMaxPasswordLength)||void 0===g||g),ge.isValid&&(ge.isValid=null===(v=ge.containsLowercaseLetter)||void 0===v||v),ge.isValid&&(ge.isValid=null===(T=ge.containsUppercaseLetter)||void 0===T||T),ge.isValid&&(ge.isValid=null===($=ge.containsNumericCharacter)||void 0===$||$),ge.isValid&&(ge.isValid=null===(X=ge.containsNonAlphanumericCharacter)||void 0===X||X),ge}validatePasswordLengthOptions(c,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=c.length>=g),v&&(d.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,d,g,v,T){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=T))}}class Us{constructor(c,d,g,v){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.beforeStateQueue=new lt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,d){var g=this;return d&&(this._popupRedirectResolver=Pe(d)),this._initializationPromise=this.queue((0,R.Z)(function*(){var v,T;if(!g._deleted&&(g.persistenceManager=yield Re.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(T=g.currentUser)||void 0===T?void 0:T.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,R.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,R.Z)(function*(){try{const g=yield Rr(d,{idToken:c}),v=yield V._fromGetAccountInfoResponse(d,g,c);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,R.Z)(function*(){var g;if((0,De._isFirebaseServerApp)(d.app)){const X=d.app.settings.authIdToken;return X?new Promise(ge=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(X).then(ge,ge))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let T=v,$=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const X=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,ge=T?._redirectEventId,ke=yield d.tryRedirectSignIn(c);(!X||X===ge)&&ke?.user&&(T=ke.user,$=!0)}if(!T)return d.directlySetCurrentUser(null);if(!T._redirectEventId){if($)try{yield d.beforeStateQueue.runMiddleware(T)}catch(X){T=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(X))}return T?d.reloadAndSetCurrentUserOrClear(T):d.directlySetCurrentUser(null)}return pe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===T._redirectEventId?d.directlySetCurrentUser(T):d.reloadAndSetCurrentUserOrClear(T)})()}tryRedirectSignIn(c){var d=this;return(0,R.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,R.Z)(function*(){try{yield wn(c)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function So(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,R.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,R.Z)(function*(){if((0,De._isFirebaseServerApp)(d.app))return Promise.reject(Lt(d));const g=c?(0,M.m9)(c):null;return g&&pe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(c,d=!1){var g=this;return(0,R.Z)(function*(){if(!g._deleted)return c&&pe(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,R.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,R.Z)(function*(){return(0,De._isFirebaseServerApp)(c.app)?Promise.reject(Lt(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,De._isFirebaseServerApp)(this.app)?Promise.reject(Lt(this)):this.queue((0,R.Z)(function*(){yield d.assertedPersistence.setPersistence(Pe(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,R.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,R.Z)(function*(){const d=yield function mt(p){return Wt.apply(this,arguments)}(c),g=new Oi(d);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new M.LL("auth","Firebase",c())}onAuthStateChanged(c,d,g){return this.registerStateListener(this.authStateSubscription,c,d,g)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,g){return this.registerStateListener(this.idTokenSubscription,c,d,g)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,R.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function F(p,c){return C.apply(this,arguments)}(d,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var g=this;return(0,R.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,R.Z)(function*(){if(!d.redirectPersistenceManager){const g=c&&Pe(c)||d._popupRedirectResolver;pe(g,d,"argument-error"),d.redirectPersistenceManager=yield Re.create(d,[Pe(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,R.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,R.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===c?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,R.Z)(function*(){if(c===d.currentUser)return d.queue((0,R.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,g,v){if(this._deleted)return()=>{};const T="function"==typeof d?d:d.next.bind(d);let $=!1;const X=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(X,this,"internal-error"),X.then(()=>{$||T(this.currentUser)}),"function"==typeof d){const ge=c.addObserver(d,g,v);return()=>{$=!0,ge()}}{const ge=c.addObserver(d);return()=>{$=!0,ge()}}}directlySetCurrentUser(c){var d=this;return(0,R.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,R.Z)(function*(){var d;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const T=yield c._getAppCheckToken();return T&&(g["X-Firebase-AppCheck"]=T),g})()}_getAppCheckToken(){var c=this;return(0,R.Z)(function*(){var d;const g=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function ir(p,...c){nt.logLevel<=$e.in.WARN&&nt.warn(`Auth (${De.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function fn(p){return(0,M.m9)(p)}class ss{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,M.ne)(d=>this.observer=d)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lc={loadJS:()=>(0,R.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tm(p){return Lc.loadJS(p)}function nm(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Ye{constructor(c){this.type="recaptcha-enterprise",this.auth=fn(c)}verify(c="verify",d=!1){var g=this;return(0,R.Z)(function*(){function T(){return T=(0,R.Z)(function*(X){if(!d){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var ge=(0,R.Z)(function*(ke,We){Vt(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(It=>{if(void 0!==It.recaptchaKey){const yr=new pr(It);return null==X.tenantId?X._agentRecaptchaConfig=yr:X._tenantRecaptchaConfigs[X.tenantId]=yr,ke(yr.siteKey)}We(new Error("recaptcha Enterprise site key undefined"))}).catch(It=>{We(It)})});return function(ke,We){return ge.apply(this,arguments)}}())}),T.apply(this,arguments)}function $(X,ge,ke){const We=window.grecaptcha;Yn(We)?We.enterprise.ready(()=>{We.enterprise.execute(X,{action:c}).then(It=>{ge(It)}).catch(()=>{ge("NO_RECAPTCHA")})}):ke(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,ge)=>{(function v(X){return T.apply(this,arguments)})(g.auth).then(ke=>{if(!d&&Yn(window.grecaptcha))$(ke,X,ge);else{if(typeof window>"u")return void ge(new Error("RecaptchaVerifier is only supported in browser"));let We=function OI(){return Lc.recaptchaEnterpriseScript}();0!==We.length&&(We+=ke),tm(We).then(()=>{$(ke,X,ge)}).catch(It=>{ge(It)})}}).catch(ke=>{ge(ke)})})})()}}function kI(p,c,d){return rm.apply(this,arguments)}function rm(){return(rm=(0,R.Z)(function*(p,c,d,g=!1){const v=new Ye(p);let T;try{T=yield v.verify(d)}catch{T=yield v.verify(d,!0)}const $=Object.assign({},c);return Object.assign($,g?{captchaResp:T}:{captchaResponse:T}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}function Uc(p,c,d,g){return He.apply(this,arguments)}function He(){return He=(0,R.Z)(function*(p,c,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const T=yield kI(p,c,d,"getOobCode"===d);return g(p,T)}return g(p,c).catch(function(){var T=(0,R.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const X=yield kI(p,c,d,"getOobCode"===d);return g(p,X)}return Promise.reject($)});return function($){return T.apply(this,arguments)}}())}),He.apply(this,arguments)}function yh(p,c,d){const g=fn(p);pe(g._canInitEmulator,g,"emulator-config-failed"),pe(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,T=im(c),{host:$,port:X}=function jc(p){const c=im(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const T=v[1];return{host:T,port:Au(g.substr(T.length+1))}}{const[T,$]=g.split(":");return{host:T,port:Au($)}}}(c);g.config.emulator={url:`${T}//${$}${null===X?"":`:${X}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:$,port:X,protocol:T.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function vh(){function p(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function im(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function Au(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class Bs{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return un("not implemented")}_getIdTokenResponse(c){return un("not implemented")}_linkToIdToken(c,d){return un("not implemented")}_getReauthenticationResolver(c){return un("not implemented")}}function om(p,c){return _t.apply(this,arguments)}function _t(){return(_t=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:resetPassword",he(p,c))})).apply(this,arguments)}function $c(){return($c=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Wr(p,c){return zc.apply(this,arguments)}function zc(){return(zc=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Zt(){return(Zt=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",he(p,c))})).apply(this,arguments)}function gA(p,c){return sm.apply(this,arguments)}function sm(){return(sm=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithPassword",he(p,c))})).apply(this,arguments)}function Te(p,c){return Su.apply(this,arguments)}function Su(){return(Su=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:sendOobCode",he(p,c))})).apply(this,arguments)}function Hc(){return(Hc=(0,R.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function bh(p,c){return wh.apply(this,arguments)}function wh(){return(wh=(0,R.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function Ch(p,c){return am.apply(this,arguments)}function am(){return(am=(0,R.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function um(){return(um=(0,R.Z)(function*(p,c){return Te(p,c)})).apply(this,arguments)}function cm(){return(cm=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithEmailLink",he(p,c))})).apply(this,arguments)}function Ru(){return(Ru=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithEmailLink",he(p,c))})).apply(this,arguments)}class as extends Bs{constructor(c,d,g,v=null){super("password",g),this._email=c,this._password=d,this._tenantId=v}static _fromEmailAndPassword(c,d){return new as(c,d,"password")}static _fromEmailAndCode(c,d,g=null){return new as(c,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,R.Z)(function*(){switch(d.signInMethod){case"password":return Uc(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",gA);case"emailLink":return function _A(p,c){return cm.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:yt(c,"internal-error")}})()}_linkToIdToken(c,d){var g=this;return(0,R.Z)(function*(){switch(g.signInMethod){case"password":return Uc(c,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wr);case"emailLink":return function Pu(p,c){return Ru.apply(this,arguments)}(c,{idToken:d,email:g._email,oobCode:g._password});default:yt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ko(p,c){return Th.apply(this,arguments)}function Th(){return(Th=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithIdp",he(p,c))})).apply(this,arguments)}class Ji extends Bs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Ji(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):yt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=d,T=(0,Ot._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const $=new Ji(g,v);return $.idToken=T.idToken||void 0,$.accessToken=T.accessToken||void 0,$.secret=T.secret,$.nonce=T.nonce,$.pendingToken=T.pendingToken||null,$}_getIdTokenResponse(c){return ko(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,ko(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ko(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,M.xO)(d)}return c}}function Dh(){return(Dh=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:sendVerificationCode",he(p,c))})).apply(this,arguments)}function Ah(){return(Ah=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,c))})).apply(this,arguments)}function qc(){return(qc=(0,R.Z)(function*(p,c){const d=yield Be(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,c));if(d.temporaryProof)throw Yt(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ue={USER_NOT_FOUND:"user-not-found"};function xu(){return(xu=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Ue)})).apply(this,arguments)}class Xi extends Bs{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Xi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Xi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function us(p,c){return Ah.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function we(p,c){return qc.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Gc(p,c){return xu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:T}=c;return g||d||v||T?new Xi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:T}):null}}class Mu{constructor(c){var d,g,v,T,$,X;const ge=(0,M.zd)((0,M.pd)(c)),ke=null!==(d=ge.apiKey)&&void 0!==d?d:null,We=null!==(g=ge.oobCode)&&void 0!==g?g:null,It=function LI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ge.mode)&&void 0!==v?v:null);pe(ke&&We&&It,"argument-error"),this.apiKey=ke,this.operation=It,this.code=We,this.continueUrl=null!==(T=ge.continueUrl)&&void 0!==T?T:null,this.languageCode=null!==($=ge.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(X=ge.tenantId)&&void 0!==X?X:null}static parseLink(c){const d=function UI(p){const c=(0,M.zd)((0,M.pd)(p)).link,d=c?(0,M.zd)((0,M.pd)(c)).deep_link_id:null,g=(0,M.zd)((0,M.pd)(p)).deep_link_id;return(g?(0,M.zd)((0,M.pd)(g)).link:null)||g||d||c||p}(c);try{return new Mu(d)}catch{return null}}}let Da=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return as._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Mu.parseLink(g);return pe(v,"argument-error"),as._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Jn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Nr extends Jn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Tt extends Nr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return pe("providerId"in d&&"signInMethod"in d,"argument-error"),Ji._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return pe(c.idToken||c.accessToken,"argument-error"),Ji._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Tt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Tt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:T,nonce:$,providerId:X}=c;if(!g&&!v&&!d&&!T||!X)return null;try{return new Tt(X)._credential({idToken:d,accessToken:g,nonce:$,pendingToken:T})}catch{return null}}}let Wc=(()=>{class p extends Nr{constructor(){super("facebook.com")}static credential(d){return Ji._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Sh=(()=>{class p extends Nr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Ji._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Ph=(()=>{class p extends Nr{constructor(){super("github.com")}static credential(d){return Ji._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Zr extends Bs{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return ko(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,ko(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,ko(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:T}=d;return g&&v&&T&&g===v?new Zr(g,T):null}static _create(c,d){return new Zr(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ou extends Jn{constructor(c){pe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Ou.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Ou.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Zr.fromJSON(c);return pe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:g}=c;if(!d||!g)return null;try{return Zr._create(g,d)}catch{return null}}}let dm=(()=>{class p extends Nr{constructor(){super("twitter.com")}static credential(d,g){return Ji._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Zc(p,c){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signUp",he(p,c))})).apply(this,arguments)}class gi{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,g,v=!1){return(0,R.Z)(function*(){const T=yield V._fromIdTokenResponse(c,g,v),$=Aa(g);return new gi({user:T,providerId:$,_tokenResponse:g,operationType:d})})()}static _forOperation(c,d,g){return(0,R.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=Aa(g);return new gi({user:c,providerId:v,_tokenResponse:g,operationType:d})})()}}function Aa(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function hm(p){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,R.Z)(function*(p){var c;if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const d=fn(p);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new gi({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Zc(d,{returnSecureToken:!0}),v=yield gi._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Yc extends M.ZR{constructor(c,d,g,v){var T;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:c.name,tenantId:null!==(T=c.tenantId)&&void 0!==T?T:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,d,g,v){return new Yc(c,d,g,v)}}function Rh(p,c,d,g){return("reauthenticate"===c?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(T=>{throw"auth/multi-factor-auth-required"===T.code?Yc._fromErrorAndOperation(p,T,c,g):T})}function fm(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function BI(p,c){return mi.apply(this,arguments)}function mi(){return mi=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);yield Xc(!0,d,c);const{providerUserInfo:g}=yield function pi(p,c){return Yi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),v=fm(g||[]);return d.providerData=d.providerData.filter(T=>v.has(T.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),mi.apply(this,arguments)}function xh(p,c){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,R.Z)(function*(p,c,d=!1){const g=yield Jt(p,c._linkToIdToken(p.auth,yield p.getIdToken()),d);return gi._forOperation(p,"link",g)})).apply(this,arguments)}function Xc(p,c,d){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,R.Z)(function*(p,c,d){yield wn(c);const v=!1===p?"provider-already-linked":"no-such-provider";pe(fm(c.providerData).has(d)===p,c.auth,v)})).apply(this,arguments)}function pm(p,c){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,R.Z)(function*(p,c,d=!1){const{auth:g}=p;if((0,De._isFirebaseServerApp)(g.app))return Promise.reject(Lt(g));const v="reauthenticate";try{const T=yield Jt(p,Rh(g,v,c,p),d);pe(T.idToken,g,"internal-error");const $=ns(T.idToken);pe($,g,"internal-error");const{sub:X}=$;return pe(p.uid===X,g,"user-mismatch"),gi._forOperation(p,v,T)}catch(T){throw"auth/user-not-found"===T?.code&&yt(g,"user-mismatch"),T}})).apply(this,arguments)}function Oh(p,c){return kh.apply(this,arguments)}function kh(){return(kh=(0,R.Z)(function*(p,c,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g="signIn",v=yield Rh(p,g,c),T=yield gi._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(T.user)),T})).apply(this,arguments)}function el(p,c){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,R.Z)(function*(p,c){return Oh(fn(p),c)})).apply(this,arguments)}function ar(p,c){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);return yield Xc(!1,d,c.providerId),xh(d,c)})).apply(this,arguments)}function gm(p,c){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,R.Z)(function*(p,c){return pm((0,M.m9)(p),c)})).apply(this,arguments)}function Uh(){return(Uh=(0,R.Z)(function*(p,c){return Be(p,"POST","/v1/accounts:signInWithCustomToken",he(p,c))})).apply(this,arguments)}function mm(p,c){return Je.apply(this,arguments)}function Je(){return Je=(0,R.Z)(function*(p,c){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const d=fn(p),g=yield function Xn(p,c){return Uh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),v=yield gi._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Je.apply(this,arguments)}class ur{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Dt._fromServerResponse(c,d):"totpInfo"in d?er._fromServerResponse(c,d):yt(c,"internal-error")}}class Dt extends ur{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Dt(d)}}class er extends ur{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new er(d)}}function cr(p,c,d){var g;pe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),pe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(pe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(pe(d.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function ls(p){return Or.apply(this,arguments)}function Or(){return(Or=(0,R.Z)(function*(p){const c=fn(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function _m(p,c,d){return tl.apply(this,arguments)}function tl(){return(tl=(0,R.Z)(function*(p,c,d){const g=fn(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&cr(g,v,d),yield Uc(g,v,"getOobCode",bh)})).apply(this,arguments)}function nl(p,c,d){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,R.Z)(function*(p,c,d){yield om((0,M.m9)(p),{oobCode:c,newPassword:d}).catch(function(){var g=(0,R.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&ls(p),v});return function(v){return g.apply(this,arguments)}}())}),Bh.apply(this,arguments)}function jI(p,c){return pn.apply(this,arguments)}function pn(){return pn=(0,R.Z)(function*(p,c){yield function pA(p,c){return Zt.apply(this,arguments)}((0,M.m9)(p),{oobCode:c})}),pn.apply(this,arguments)}function Ne(p,c){return it.apply(this,arguments)}function it(){return(it=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p),g=yield om(d,{oobCode:c}),v=g.requestType;switch(pe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(g.mfaInfo,d,"internal-error");default:pe(g.email,d,"internal-error")}let T=null;return g.mfaInfo&&(T=ur._fromServerResponse(fn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:T},operation:v}})).apply(this,arguments)}function gn(p,c){return _i.apply(this,arguments)}function _i(){return(_i=(0,R.Z)(function*(p,c){const{data:d}=yield Ne((0,M.m9)(p),c);return d.email})).apply(this,arguments)}function ku(p,c,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=fn(p),$=yield Uc(g,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zc).catch(ge=>{throw"auth/password-does-not-meet-requirements"===ge.code&&ls(p),ge}),X=yield gi._fromIdTokenResponse(g,"signIn",$);return yield g._updateCurrentUser(X.user),X})).apply(this,arguments)}function Sa(p,c,d){return(0,De._isFirebaseServerApp)(p.app)?Promise.reject(Lt(p)):el((0,M.m9)(p),Da.credential(c,d)).catch(function(){var g=(0,R.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&ls(p),v});return function(v){return g.apply(this,arguments)}}())}function Bn(p,c,d){return fo.apply(this,arguments)}function fo(){return(fo=(0,R.Z)(function*(p,c,d){const g=fn(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function T($,X){pe(X.handleCodeInApp,g,"argument-error"),X&&cr(g,$,X)})(v,d),yield Uc(g,v,"getOobCode",Ch)})).apply(this,arguments)}function Pa(p,c){const d=Mu.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function ot(p,c,d){return js.apply(this,arguments)}function js(){return(js=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=(0,M.m9)(p),v=Da.credentialWithLink(c,d||En());return pe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),el(g,v)})).apply(this,arguments)}function ds(){return(ds=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:createAuthUri",he(p,c))})).apply(this,arguments)}function jn(p,c){return $s.apply(this,arguments)}function $s(){return $s=(0,R.Z)(function*(p,c){const g={identifier:c,continueUri:di()?En():"http://localhost"},{signinMethods:v}=yield function ym(p,c){return ds.apply(this,arguments)}((0,M.m9)(p),g);return v||[]}),$s.apply(this,arguments)}function Ra(p,c){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&cr(d.auth,v,c);const{email:T}=yield function Eh(p,c){return Hc.apply(this,arguments)}(d.auth,v);T!==p.email&&(yield p.reload())}),Fi.apply(this,arguments)}function Fu(p,c,d){return rl.apply(this,arguments)}function rl(){return rl=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p),T={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};d&&cr(g.auth,T,d);const{email:$}=yield function mA(p,c){return um.apply(this,arguments)}(g.auth,T);$!==p.email&&(yield p.reload())}),rl.apply(this,arguments)}function eo(){return(eo=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Vu(p,c){return zs.apply(this,arguments)}function zs(){return zs=(0,R.Z)(function*(p,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const g=(0,M.m9)(p),T={idToken:yield g.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},$=yield Jt(g,function hs(p,c){return eo.apply(this,arguments)}(g.auth,T));g.displayName=$.displayName||null,g.photoURL=$.photoUrl||null;const X=g.providerData.find(({providerId:ge})=>"password"===ge);X&&(X.displayName=g.displayName,X.photoURL=g.photoURL),yield g._updateTokensIfNecessary($)}),zs.apply(this,arguments)}function vt(p,c){const d=(0,M.m9)(p);return(0,De._isFirebaseServerApp)(d.auth.app)?Promise.reject(Lt(d.auth)):il(d,c,null)}function yA(p,c){return il((0,M.m9)(p),null,c)}function il(p,c,d){return ol.apply(this,arguments)}function ol(){return ol=(0,R.Z)(function*(p,c,d){const{auth:g}=p,T={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(T.email=c),d&&(T.password=d);const $=yield Jt(p,function Ih(p,c){return $c.apply(this,arguments)}(g,T));yield p._updateTokensIfNecessary($,!0)}),ol.apply(this,arguments)}class Fo{constructor(c,d,g={}){this.isNewUser=c,this.providerId=d,this.profile=g}}class Hs extends Fo{constructor(c,d,g,v){super(c,d,g),this.username=v}}class Lu extends Fo{constructor(c,d){super(c,"facebook.com",d)}}class gr extends Hs{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class vA extends Fo{constructor(c,d){super(c,"google.com",d)}}class Kr extends Hs{constructor(c,d,g){super(c,"twitter.com",d,g)}}function kr(p){const{user:c,_tokenResponse:d}=p;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function po(p){var c,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},T=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const $=null===(d=null===(c=ns(p.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if($)return new Fo(T,"anonymous"!==$&&"custom"!==$?$:null)}if(!g)return null;switch(g){case"facebook.com":return new Lu(T,v);case"github.com":return new gr(T,v);case"google.com":return new vA(T,v);case"twitter.com":return new Kr(T,v,p.screenName||null);case"custom":case"anonymous":return new Fo(T,null);default:return new Fo(T,g,v)}}(d)}class Ma{constructor(c,d,g){this.type=c,this.credential=d,this.user=g}static _fromIdtoken(c,d){return new Ma("enroll",c,d)}static _fromMfaPendingCredential(c){return new Ma("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,g;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ma._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Ma._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Em{constructor(c,d,g){this.session=c,this.hints=d,this.signInResolver=g}static _fromError(c,d){const g=fn(c),v=d.customData._serverResponse,T=(v.mfaInfo||[]).map(X=>ur._fromServerResponse(g,X));pe(v.mfaPendingCredential,g,"internal-error");const $=Ma._fromMfaPendingCredential(v.mfaPendingCredential);return new Em($,T,function(){var X=(0,R.Z)(function*(ge){const ke=yield ge._process(g,$);delete v.mfaInfo,delete v.mfaPendingCredential;const We=Object.assign(Object.assign({},v),{idToken:ke.idToken,refreshToken:ke.refreshToken});switch(d.operationType){case"signIn":const It=yield gi._fromIdTokenResponse(g,d.operationType,We);return yield g._updateCurrentUser(It.user),It;case"reauthenticate":return pe(d.user,g,"internal-error"),gi._forOperation(d.user,d.operationType,We);default:yt(g,"internal-error")}});return function(ge){return X.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,R.Z)(function*(){return d.signInResolver(c)})()}}function wA(p,c){var d;const g=(0,M.m9)(p),v=c;return pe(c.customData.operationType,g,"argument-error"),pe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Em._fromError(g,v)}class bm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>ur._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new bm(c)}getSession(){var c=this;return(0,R.Z)(function*(){return Ma._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var g=this;return(0,R.Z)(function*(){const v=c,T=yield g.getSession(),$=yield Jt(g.user,v._process(g.user.auth,T,d));return yield g.user._updateTokensIfNecessary($),g.user.reload()})()}unenroll(c){var d=this;return(0,R.Z)(function*(){const g="string"==typeof c?c:c.uid,v=yield d.user.getIdToken();try{const T=yield Jt(d.user,function AA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,c))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:$})=>$!==g),yield d.user._updateTokensIfNecessary(T),yield d.user.reload()}catch(T){throw T}})()}}const sl=new WeakMap;function wm(p){const c=(0,M.m9)(p);return sl.has(c)||sl.set(c,bm._fromUser(c)),sl.get(c)}const zh="__sak";class zI{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const HI=(()=>{class p extends zI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function SA(){const p=(0,M.z$)();return sr(p)||Ls(p)}()&&function ve(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),T=this.localCache[g];v!==T&&d(g,T,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((X,ge,ke)=>{this.notifyListeners(X,ke)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(v);if(d.newValue!==X)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const T=()=>{const X=this.storage.getItem(v);!g&&this.localCache[v]===X||this.notifyListeners(v,X)},$=this.storage.getItem(v);!function G(){return(0,M.w1)()&&10===document.documentMode}()||$===d.newValue||d.newValue===d.oldValue?T():setTimeout(T,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const T of Array.from(v))T(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,T=this;return(0,R.Z)(function*(){yield v().call(T,d,g),T.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,R.Z)(function*(){const T=yield g().call(v,d);return v.localCache[d]=JSON.stringify(T),T})()}_remove(d){var g=()=>super._remove,v=this;return(0,R.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),Na=(()=>{class p extends zI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Cm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(T=>T.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,R.Z)(function*(){const v=d,{eventId:T,eventType:$,data:X}=v.data,ge=g.handlersMap[$];if(!ge?.size)return;v.ports[0].postMessage({status:"ack",eventId:T,eventType:$});const ke=Array.from(ge).map(function(){var It=(0,R.Z)(function*(yr){return yr(v.origin,X)});return function(yr){return It.apply(this,arguments)}}()),We=yield function Vi(p){return Promise.all(p.map(function(){var c=(0,R.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return c.apply(this,arguments)}}()))}(ke);v.ports[0].postMessage({status:"done",eventId:T,eventType:$,response:We})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Oa(p="",c=10){let d="";for(let g=0;g<c;g++)d+=Math.floor(10*Math.random());return p+d}class Tm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,g=50){var v=this;return(0,R.Z)(function*(){const T=typeof MessageChannel<"u"?new MessageChannel:null;if(!T)throw new Error("connection_unavailable");let $,X;return new Promise((ge,ke)=>{const We=Oa("",20);T.port1.start();const It=setTimeout(()=>{ke(new Error("unsupported_event"))},g);X={messageChannel:T,onMessage(yr){const Yr=yr;if(Yr.data.eventId===We)switch(Yr.data.status){case"ack":clearTimeout(It),$=setTimeout(()=>{ke(new Error("timeout"))},3e3);break;case"done":clearTimeout($),ge(Yr.data.response);break;default:clearTimeout(It),clearTimeout($),ke(new Error("invalid_response"))}}},v.handlers.add(X),T.port1.addEventListener("message",X.onMessage),v.target.postMessage({eventType:c,eventId:We,data:d},[T.port2])}).finally(()=>{X&&v.removeMessageHandler(X)})})()}}function $n(){return window}function al(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function Uu(){return(Uu=(0,R.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Gh="firebaseLocalStorageDb",ps="firebaseLocalStorage",Gs="fbase_key";class ka{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Wh(p,c){return p.transaction([ps],c?"readwrite":"readonly").objectStore(ps)}function Sm(){const p=indexedDB.open(Gh,1);return new Promise((c,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(ps,{keyPath:Gs})}catch(v){d(v)}}),p.addEventListener("success",(0,R.Z)(function*(){const g=p.result;g.objectStoreNames.contains(ps)?c(g):(g.close(),yield function PA(){const p=indexedDB.deleteDatabase(Gh);return new ka(p).toPromise()}(),c(yield Sm()))}))})}function Pm(p,c,d){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,R.Z)(function*(p,c,d){const g=Wh(p,!0).put({[Gs]:c,value:d});return new ka(g).toPromise()})).apply(this,arguments)}function cl(){return(cl=(0,R.Z)(function*(p,c){const d=Wh(p,!1).get(c),g=yield new ka(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function ll(p,c){const d=Wh(p,!0).delete(c);return new ka(d).toPromise()}const GI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,R.Z)(function*(){return d.db||(d.db=yield Sm()),d.db})()}_withRetries(d){var g=this;return(0,R.Z)(function*(){let v=0;for(;;)try{const T=yield g._openDb();return yield d(T)}catch(T){if(v++>3)throw T;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,R.Z)(function*(){return al()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,R.Z)(function*(){d.receiver=Cm._getInstance(function Am(){return al()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,R.Z)(function*(v,T){return{keyProcessed:(yield d._poll()).includes(T.key)}});return function(v,T){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,R.Z)(function*(v,T){return["keyChanged"]});return function(v,T){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,R.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function qh(){return Uu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Tm(d.activeServiceWorker);const T=yield d.sender._send("ping",{},800);T&&null!==(g=T[0])&&void 0!==g&&g.fulfilled&&null!==(v=T[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,R.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Dm(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,R.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Sm();return yield Pm(d,zh,"1"),yield ll(d,zh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,R.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,R.Z)(function*(){return v._withPendingWrite((0,R.Z)(function*(){return yield v._withRetries(T=>Pm(T,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,R.Z)(function*(){const v=yield g._withRetries(T=>function RA(p,c){return cl.apply(this,arguments)}(T,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,R.Z)(function*(){return g._withPendingWrite((0,R.Z)(function*(){return yield g._withRetries(v=>ll(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,R.Z)(function*(){const g=yield d._withRetries($=>{const X=Wh($,!1).getAll();return new ka(X).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],T=new Set;if(0!==g.length)for(const{fbase_key:$,value:X}of g)T.add($),JSON.stringify(d.localCache[$])!==JSON.stringify(X)&&(d.notifyListeners($,X),v.push($));for(const $ of Object.keys(d.localCache))d.localCache[$]&&!T.has($)&&(d.notifyListeners($,null),v.push($));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const T of Array.from(v))T(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,R.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),dl=1e12;class Mm{constructor(c){this.auth=c,this.counter=dl,this._widgets=new Map}render(c,d){const g=this.counter;return this._widgets.set(g,new QI(c,this.auth.name,d||{})),this.counter++,g}reset(c){var d;const g=c||dl;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(c){var d;return(null===(d=this._widgets.get(c||dl))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,R.Z)(function*(){var g;return null===(g=d._widgets.get(c||dl))||void 0===g||g.execute(),""})()}}class QI{constructor(c,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;pe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nm(p){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qh=nm("rcb"),xA=new xi(3e4,6e4);class YI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=$n().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return pe(function Li(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Rn($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((g,v)=>{const T=$n().setTimeout(()=>{v(jt(c,"network-request-failed"))},xA.get());$n()[Qh]=()=>{$n().clearTimeout(T),delete $n()[Qh];const X=$n().grecaptcha;if(!X||!Rn(X))return void v(jt(c,"internal-error"));const ge=X.render;X.render=(ke,We)=>{const It=ge(ke,We);return this.counter++,It},this.hostLanguage=d,g(X)},tm(`${function lA(){return Lc.recaptchaV2Script}()}?${(0,M.xO)({onload:Qh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(T),v(jt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=$n().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Om{load(c){return(0,R.Z)(function*(){return new Mm(c)})()}clearedOneInstance(){}}const km="recaptcha",JI={theme:"light",type:"image"};class Fm{constructor(c,d,g=Object.assign({},JI)){this.parameters=g,this.type=km,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fn(c),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;pe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Om:new YI,this.validateStartingState()}verify(){var c=this;return(0,R.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(d)||new Promise(T=>{const $=X=>{X&&(c.tokenChangeListeners.delete($),T(X))};c.tokenChangeListeners.add($),c.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof c)c(d);else if("string"==typeof c){const g=$n()[c];"function"==typeof g&&g(d)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,R.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,R.Z)(function*(){pe(di()&&!al(),c.auth,"internal-error"),yield function Vm(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Po(p){return Qi.apply(this,arguments)}(c.auth);pe(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Xi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Jh(p,c,d){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=fn(p),v=yield Fa(g,c,(0,M.m9)(d));return new Yh(v,T=>el(g,T))})).apply(this,arguments)}function go(p,c,d){return hl.apply(this,arguments)}function hl(){return(hl=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);yield Xc(!1,g,"phone");const v=yield Fa(g.auth,c,(0,M.m9)(d));return new Yh(v,T=>ar(g,T))})).apply(this,arguments)}function Lm(p,c,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth));const v=yield Fa(g.auth,c,(0,M.m9)(d));return new Yh(v,T=>gm(g,T))})).apply(this,arguments)}function Fa(p,c,d){return Va.apply(this,arguments)}function Va(){return Va=(0,R.Z)(function*(p,c,d){var g;const v=yield d.verify();try{let T;if(pe("string"==typeof v,p,"argument-error"),pe(d.type===km,p,"argument-error"),T="string"==typeof c?{phoneNumber:c}:c,"session"in T){const $=T.session;if("phoneNumber"in T)return pe("enroll"===$.type,p,"internal-error"),(yield function CA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,c))}(p,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:T.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{pe("signin"===$.type,p,"internal-error");const X=(null===(g=T.multiFactorHint)||void 0===g?void 0:g.uid)||T.multiFactorUid;return pe(X,p,"missing-multi-factor-info"),(yield function WI(p,c){return ie(p,"POST","/v2/accounts/mfaSignIn:start",he(p,c))}(p,{mfaPendingCredential:$.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Ta(p,c){return Dh.apply(this,arguments)}(p,{phoneNumber:T.phoneNumber,recaptchaToken:v});return $}}finally{d._reset()}}),Va.apply(this,arguments)}function Qr(p,c){return ef.apply(this,arguments)}function ef(){return(ef=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(d.auth.app))return Promise.reject(Lt(d.auth));yield xh(d,c)})).apply(this,arguments)}let Um=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=fn(d)}verifyPhoneNumber(d,g){return Fa(this.auth,d,(0,M.m9)(g))}static credential(d,g){return Xi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Xi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ui(p,c){return c?Pe(c):(pe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Fr extends Bs{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ko(c,this._buildIdpRequest())}_linkToIdToken(c,d){return ko(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return ko(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function XI(p){return Oh(p.auth,new Fr(p),p.bypassAuthState)}function eE(p){const{auth:c,user:d}=p;return pe(d,c,"internal-error"),pm(d,new Fr(p),p.bypassAuthState)}function tE(p){return mo.apply(this,arguments)}function mo(){return(mo=(0,R.Z)(function*(p){const{auth:c,user:d}=p;return pe(d,c,"internal-error"),xh(d,new Fr(p),p.bypassAuthState)})).apply(this,arguments)}class tf{constructor(c,d,g,v,T=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=T,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,R.Z)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(T){c.reject(T)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,R.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:T,tenantId:$,error:X,type:ge}=c;if(X)return void d.reject(X);const ke={auth:d.auth,requestUri:g,sessionId:v,tenantId:$||void 0,postBody:T||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ge)(ke))}catch(We){d.reject(We)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return XI;case"linkViaPopup":case"linkViaRedirect":return tE;case"reauthViaPopup":case"reauthViaRedirect":return eE;default:yt(this.auth,"internal-error")}}resolve(c){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nE=new xi(2e3,1e4);function Bm(p,c,d){return fl.apply(this,arguments)}function fl(){return(fl=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(jt(p,"operation-not-supported-in-this-environment"));const g=fn(p);ut(p,c,Jn);const v=Ui(g,d);return new $m(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function jm(p,c,d){return nf.apply(this,arguments)}function nf(){return(nf=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(jt(g.auth,"operation-not-supported-in-this-environment"));ut(g.auth,c,Jn);const v=Ui(g.auth,d);return new $m(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function Xe(p,c,d){return pl.apply(this,arguments)}function pl(){return(pl=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);ut(g.auth,c,Jn);const v=Ui(g.auth,d);return new $m(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let $m=(()=>{class p extends tf{constructor(d,g,v,T,$){super(d,g,T,$),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,R.Z)(function*(){const g=yield d.execute();return pe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,R.Z)(function*(){Qt(1===d.filter.length,"Popup operations only handle one event");const g=Oa();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,nE.get())};d()}}return p.currentPopupAction=null,p})();const rE="pendingRedirect",Bu=new Map;class iE extends tf{constructor(c,d,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,R.Z)(function*(){let g=Bu.get(d.auth._key());if(!g){try{const T=(yield function zm(p,c){return gs.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;g=()=>Promise.resolve(T)}catch(v){g=()=>Promise.reject(v)}Bu.set(d.auth._key(),g)}return d.bypassAuthState||Bu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,g=this;return(0,R.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,d().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,R.Z)(function*(){})()}cleanUp(){}}function gs(){return(gs=(0,R.Z)(function*(p,c){const d=me(c),g=qm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function rf(p,c){return sf.apply(this,arguments)}function sf(){return(sf=(0,R.Z)(function*(p,c){return qm(p)._set(me(c),"true")})).apply(this,arguments)}function oE(){Bu.clear()}function Hm(p,c){Bu.set(p._key(),c)}function qm(p){return Pe(p._redirectPersistence)}function me(p){return Pt(rE,p.config.apiKey,p.name)}function xt(p,c,d){return function Vo(p,c,d){return to.apply(this,arguments)}(p,c,d)}function to(){return(to=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=fn(p);ut(p,c,Jn),yield g._initializationPromise;const v=Ui(g,d);return yield rf(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function mr(p,c,d){return function Gm(p,c,d){return Ws.apply(this,arguments)}(p,c,d)}function Ws(){return(Ws=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if(ut(g.auth,c,Jn),(0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(Lt(g.auth));yield g.auth._initializationPromise;const v=Ui(g.auth,d);yield rf(v,g.auth);const T=yield yo(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",T)})).apply(this,arguments)}function _o(p,c,d){return function af(p,c,d){return ju.apply(this,arguments)}(p,c,d)}function ju(){return(ju=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);ut(g.auth,c,Jn),yield g.auth._initializationPromise;const v=Ui(g.auth,d);yield Xc(!1,g,c.providerId),yield rf(v,g.auth);const T=yield yo(g);return v._openRedirect(g.auth,c,"linkViaRedirect",T)})).apply(this,arguments)}function sE(p,c){return Wm.apply(this,arguments)}function Wm(){return(Wm=(0,R.Z)(function*(p,c){return yield fn(p)._initializationPromise,gl(p,c,!1)})).apply(this,arguments)}function gl(p,c){return _r.apply(this,arguments)}function _r(){return(_r=(0,R.Z)(function*(p,c,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Lt(p));const g=fn(p),v=Ui(g,c),$=yield new iE(g,v,d).execute();return $&&!d&&(delete $.user._redirectEventId,yield g._persistUserIfCurrent($.user),yield g._setRedirectUser(null,c)),$})).apply(this,arguments)}function yo(p){return ml.apply(this,arguments)}function ml(){return(ml=(0,R.Z)(function*(p){const c=Oa(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class vo{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(d=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function aE(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uf(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var g;if(c.error&&!uf(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(jt(this.auth,v))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const g=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zm(c))}saveEventToCache(c){this.cachedEventUids.add(Zm(c)),this.lastProcessedEventTime=Date.now()}}function Zm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function uf({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function Km(p){return $u.apply(this,arguments)}function $u(){return($u=(0,R.Z)(function*(p,c={}){return ie(p,"GET","/v1/projects",c)})).apply(this,arguments)}const cf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qm=/^https?/;function df(){return(df=(0,R.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield Km(p);for(const d of c)try{if(Ym(d))return}catch{}yt(p,"unauthorized-domain")})).apply(this,arguments)}function Ym(p){const c=En(),{protocol:d,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const $=new URL(p);return""===$.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&$.hostname===g}if(!Qm.test(d))return!1;if(cf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const hf=new xi(3e4,6e4);function ff(){const p=$n().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let zu=null;const pf=new xi(5e3,15e3),uE="__/auth/iframe",cE="emulator/auth/iframe",Vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(p){const c=p.config;pe(c.authDomain,p,"auth-domain-config-required");const d=c.emulator?te(c,cE):`https://${p.config.authDomain}/${uE}`,g={apiKey:c.apiKey,appName:p.name,v:De.SDK_VERSION},v=Zs.get(p.config.apiHost);v&&(g.eid=v);const T=p._getFrameworks();return T.length&&(g.fw=T.join(",")),`${d}?${(0,M.xO)(g).slice(1)}`}function gf(){return gf=(0,R.Z)(function*(p){const c=yield function Xm(p){return zu=zu||function Jm(p){return new Promise((c,d)=>{var g,v,T;function $(){ff(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ff(),d(jt(p,"network-request-failed"))},timeout:hf.get()})}if(null!==(v=null===(g=$n().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(T=$n().gapi)||void 0===T||!T.load){const X=nm("iframefcb");return $n()[X]=()=>{gapi.load?$():d(jt(p,"network-request-failed"))},tm(`${function dA(){return Lc.gapiScript}()}?onload=${X}`).catch(ge=>d(ge))}$()}}).catch(c=>{throw zu=null,c})}(p),zu}(p),d=$n().gapi;return pe(d,p,"internal-error"),c.open({where:document.body,url:Cn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vr,dontclear:!0},g=>new Promise(function(){var v=(0,R.Z)(function*(T,$){yield g.restyle({setHideOnLeave:!1});const X=jt(p,"network-request-failed"),ge=$n().setTimeout(()=>{$(X)},pf.get());function ke(){$n().clearTimeout(ge),T(g)}g.ping(ke).then(ke,()=>{$(X)})});return function(T,$){return v.apply(this,arguments)}}()))}),gf.apply(this,arguments)}const dE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lo{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vl="__/auth/handler",Il="emulator/auth/handler",mf=encodeURIComponent("fac");function El(p,c,d,g,v,T){return bl.apply(this,arguments)}function bl(){return(bl=(0,R.Z)(function*(p,c,d,g,v,T){pe(p.config.authDomain,p,"auth-domain-config-required"),pe(p.config.apiKey,p,"invalid-api-key");const $={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:De.SDK_VERSION,eventId:v};if(c instanceof Jn){c.setDefaultLanguage(p.languageCode),$.providerId=c.providerId||"",(0,M.xb)(c.getCustomParameters())||($.customParameters=JSON.stringify(c.getCustomParameters()));for(const[We,It]of Object.entries(T||{}))$[We]=It}if(c instanceof Nr){const We=c.getScopes().filter(It=>""!==It);We.length>0&&($.scopes=We.join(","))}p.tenantId&&($.tid=p.tenantId);const X=$;for(const We of Object.keys(X))void 0===X[We]&&delete X[We];const ge=yield p._getAppCheckToken(),ke=ge?`#${mf}=${encodeURIComponent(ge)}`:"";return`${function pE({config:p}){return p.emulator?te(p,Il):`https://${p.authDomain}/${vl}`}(p)}?${(0,M.xO)(X).slice(1)}${ke}`})).apply(this,arguments)}const ms="webStorageSupport",n_=class Hu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Na,this._completeRedirectFn=gl,this._overrideRedirectResult=Hm}_openPopup(c,d,g,v){var T=this;return(0,R.Z)(function*(){var $;Qt(null===($=T.eventManagers[c._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const X=yield El(c,d,g,En(),v);return function fE(p,c,d,g=500,v=600){const T=Math.max((window.screen.availHeight-v)/2,0).toString(),$=Math.max((window.screen.availWidth-g)/2,0).toString();let X="";const ge=Object.assign(Object.assign({},dE),{width:g.toString(),height:v.toString(),top:T,left:$}),ke=(0,M.z$)().toLowerCase();d&&(X=Vs(ke)?"_blank":d),qe(ke)&&(c=c||"http://localhost",ge.scrollbars="yes");const We=Object.entries(ge).reduce((yr,[Yr,Tl])=>`${yr}${Yr}=${Tl},`,"");if(function O(p=(0,M.z$)()){var c;return Ls(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ke)&&"_self"!==X)return function yl(p,c){const d=document.createElement("a");d.href=p,d.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(c||"",X),new Lo(null);const It=window.open(c||"",X,We);pe(It,p,"popup-blocked");try{It.focus()}catch{}return new Lo(It)}(c,X,Oa())})()}_openRedirect(c,d,g,v){var T=this;return(0,R.Z)(function*(){return yield T._originValidation(c),function Hh(p){$n().location.href=p}(yield El(c,d,g,En(),v)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:v,promise:T}=this.eventManagers[d];return v?Promise.resolve(v):(Qt(T,"If manager is not set, promise should be"),T)}const g=this.initAndGetManager(c);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(c){var d=this;return(0,R.Z)(function*(){const g=yield function lE(p){return gf.apply(this,arguments)}(c),v=new vo(c);return g.register("authEvent",T=>(pe(T?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(T.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:v},d.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(ms,{type:ms},v=>{var T;const $=null===(T=v?.[0])||void 0===T?void 0:T[ms];void 0!==$&&d(!!$),yt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function lf(p){return df.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return K()||sr()||Ls()}};class MA{constructor(c){this.factorId=c}_process(c,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,g);case"signin":return this._finalizeSignIn(c,d.credential);default:return un("unexpected MultiFactorSessionType")}}}class qu extends MA{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new qu(c)}_finalizeEnroll(c,d,g){return function TA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,c))}(c,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function Rm(p,c){return ie(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let NA=(()=>{class p{constructor(){}static assertion(d){return qu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var wl="@firebase/auth";class mE{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,R.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.Pz)("authIdTokenMaxAge"),function cA(p){Lc=p}({loadJS:p=>new Promise((c,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const T=jt("internal-error");T.customData=v,d(T)},g.type="text/javascript",g.charset="UTF-8",function Io(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function vf(p){(0,De._registerComponent)(new vn.wA("auth",(c,{options:d})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),T=c.getProvider("app-check-internal"),{apiKey:$,authDomain:X}=g.options;pe($&&!$.includes(":"),"invalid-api-key",{appName:g.name});const ge={apiKey:$,authDomain:X,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(p)},ke=new Us(g,v,T,ge);return function FI(p,c){const d=c?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Pe);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(ke,d),ke},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,g)=>{c.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new vn.wA("auth-internal",c=>{const d=fn(c.getProvider("auth").getImmediate());return new mE(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(wl,"1.7.4",function Gu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,De.registerVersion)(wl,"1.7.4","esm2017")}("Browser")},58:(ho,Kn,Ke)=>{Ke.d(Kn,{BH:()=>Gr,G6:()=>xi,L:()=>Rt,LL:()=>ie,P0:()=>In,Pz:()=>jt,Sg:()=>Lt,UG:()=>pe,ZB:()=>ze,ZR:()=>he,aH:()=>yt,b$:()=>En,eu:()=>re,hl:()=>te,jU:()=>un,m9:()=>Oo,ne:()=>Rr,pd:()=>pi,r3:()=>Rn,ru:()=>Qt,tV:()=>fe,uI:()=>Pn,vZ:()=>Qi,w1:()=>hi,xO:()=>ts,xb:()=>pr,z$:()=>ut,zd:()=>Ro});const $e=function(U){const F=[];let C=0;for(let A=0;A<U.length;A++){let b=U.charCodeAt(A);b<128?F[C++]=b:b<2048?(F[C++]=b>>6|192,F[C++]=63&b|128):55296==(64512&b)&&A+1<U.length&&56320==(64512&U.charCodeAt(A+1))?(b=65536+((1023&b)<<10)+(1023&U.charCodeAt(++A)),F[C++]=b>>18|240,F[C++]=b>>12&63|128,F[C++]=b>>6&63|128,F[C++]=63&b|128):(F[C++]=b>>12|224,F[C++]=b>>6&63|128,F[C++]=63&b|128)}return F},vn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,F){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const C=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,A=[];for(let b=0;b<U.length;b+=3){const V=U[b],de=b+1<U.length,Pe=de?U[b+1]:0,Ve=b+2<U.length,et=Ve?U[b+2]:0;let $t=(15&Pe)<<2|et>>6,qe=63&et;Ve||(qe=64,de||($t=64)),A.push(C[V>>2],C[(3&V)<<4|Pe>>4],C[$t],C[qe])}return A.join("")},encodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(U):this.encodeByteArray($e(U),F)},decodeString(U,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(U):function(U){const F=[];let C=0,A=0;for(;C<U.length;){const b=U[C++];if(b<128)F[A++]=String.fromCharCode(b);else if(b>191&&b<224){const V=U[C++];F[A++]=String.fromCharCode((31&b)<<6|63&V)}else if(b>239&&b<365){const Ve=((7&b)<<18|(63&U[C++])<<12|(63&U[C++])<<6|63&U[C++])-65536;F[A++]=String.fromCharCode(55296+(Ve>>10)),F[A++]=String.fromCharCode(56320+(1023&Ve))}else{const V=U[C++],de=U[C++];F[A++]=String.fromCharCode((15&b)<<12|(63&V)<<6|63&de)}}return F.join("")}(this.decodeStringToByteArray(U,F))},decodeStringToByteArray(U,F){this.init_();const C=F?this.charToByteMapWebSafe_:this.charToByteMap_,A=[];for(let b=0;b<U.length;){const V=C[U.charAt(b++)],Pe=b<U.length?C[U.charAt(b)]:0;++b;const et=b<U.length?C[U.charAt(b)]:64;++b;const Re=b<U.length?C[U.charAt(b)]:64;if(++b,null==V||null==Pe||null==et||null==Re)throw new Vn;A.push(V<<2|Pe>>4),64!==et&&(A.push(Pe<<4&240|et>>2),64!==Re&&A.push(et<<6&192|Re))}return A},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class Vn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rt=function(U){return function(U){const F=$e(U);return vn.encodeByteArray(F,!0)}(U).replace(/\./g,"")},fe=function(U){try{return vn.decodeString(U,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function ze(U,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return F}for(const C in F)!F.hasOwnProperty(C)||!at(C)||(U[C]=ze(U[C],F[C]));return U}function at(U){return"__proto__"!==U}const nt=()=>{try{return function kt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=U&&fe(U[1]);return F&&JSON.parse(F)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},In=U=>{const F=(U=>{var F,C;return null===(C=null===(F=nt())||void 0===F?void 0:F.emulatorHosts)||void 0===C?void 0:C[U]})(U);if(!F)return;const C=F.lastIndexOf(":");if(C<=0||C+1===F.length)throw new Error(`Invalid host ${F} with no separate hostname and port!`);const A=parseInt(F.substring(C+1),10);return"["===F[0]?[F.substring(1,C-1),A]:[F.substring(0,C),A]},yt=()=>{var U;return null===(U=nt())||void 0===U?void 0:U.config},jt=U=>{var F;return null===(F=nt())||void 0===F?void 0:F[`_${U}`]};class Gr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,C)=>{this.resolve=F,this.reject=C})}wrapCallback(F){return(C,A)=>{C?this.reject(C):this.resolve(A),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(C):F(C,A))}}}function Lt(U,F){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A=F||"demo-project",b=U.iat||0,V=U.sub||U.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const de=Object.assign({iss:`https://securetoken.google.com/${A}`,aud:A,iat:b,exp:b+3600,auth_time:b,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},U);return[Rt(JSON.stringify({alg:"none",type:"JWT"})),Rt(JSON.stringify(de)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function pe(){var U;const F=null===(U=nt())||void 0===U?void 0:U.forceEnvironment;if("node"===F)return!0;if("browser"===F)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function un(){return"object"==typeof self&&self.self===self}function Qt(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function En(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hi(){const U=ut();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function xi(){return!pe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((U,F)=>{try{let C=!0;const A="validate-browser-context-for-indexeddb-analytics-module",b=self.indexedDB.open(A);b.onsuccess=()=>{b.result.close(),C||self.indexedDB.deleteDatabase(A),U(!0)},b.onupgradeneeded=()=>{C=!1},b.onerror=()=>{var V;F((null===(V=b.error)||void 0===V?void 0:V.message)||"")}}catch(C){F(C)}})}class he extends Error{constructor(F,C,A){super(C),this.code=F,this.customData=A,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ie.prototype.create)}}class ie{constructor(F,C,A){this.service=F,this.serviceName=C,this.errors=A}create(F,...C){const A=C[0]||{},b=`${this.service}/${F}`,V=this.errors[F],de=V?function xe(U,F){return U.replace(wt,(C,A)=>{const b=F[A];return null!=b?String(b):`<${A}?>`})}(V,A):"Error";return new he(b,`${this.serviceName}: ${de} (${b}).`,A)}}const wt=/\{\$([^}]+)}/g;function Rn(U,F){return Object.prototype.hasOwnProperty.call(U,F)}function pr(U){for(const F in U)if(Object.prototype.hasOwnProperty.call(U,F))return!1;return!0}function Qi(U,F){if(U===F)return!0;const C=Object.keys(U),A=Object.keys(F);for(const b of C){if(!A.includes(b))return!1;const V=U[b],de=F[b];if(Vt(V)&&Vt(de)){if(!Qi(V,de))return!1}else if(V!==de)return!1}for(const b of A)if(!C.includes(b))return!1;return!0}function Vt(U){return null!==U&&"object"==typeof U}function ts(U){const F=[];for(const[C,A]of Object.entries(U))Array.isArray(A)?A.forEach(b=>{F.push(encodeURIComponent(C)+"="+encodeURIComponent(b))}):F.push(encodeURIComponent(C)+"="+encodeURIComponent(A));return F.length?"&"+F.join("&"):""}function Ro(U){const F={};return U.replace(/^\?/,"").split("&").forEach(A=>{if(A){const[b,V]=A.split("=");F[decodeURIComponent(b)]=decodeURIComponent(V)}}),F}function pi(U){const F=U.indexOf("?");if(!F)return"";const C=U.indexOf("#",F);return U.substring(F,C>0?C:void 0)}function Rr(U,F){const C=new xr(U,F);return C.subscribe.bind(C)}class xr{constructor(F,C){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=C,this.task.then(()=>{F(this)}).catch(A=>{this.error(A)})}next(F){this.forEachObserver(C=>{C.next(F)})}error(F){this.forEachObserver(C=>{C.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,C,A){let b;if(void 0===F&&void 0===C&&void 0===A)throw new Error("Missing Observer.");b=function Mr(U,F){if("object"!=typeof U||null===U)return!1;for(const C of F)if(C in U&&"function"==typeof U[C])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:C,complete:A},void 0===b.next&&(b.next=on),void 0===b.error&&(b.error=on),void 0===b.complete&&(b.complete=on);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?b.error(this.finalError):b.complete()}catch{}}),this.observers.push(b),V}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let C=0;C<this.observers.length;C++)this.sendOne(C,F)}sendOne(F,C){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{C(this.observers[F])}catch(A){typeof console<"u"&&console.error&&console.error(A)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function on(){}function Oo(U){return U&&U._delegate?U._delegate:U}},191:(ho,Kn,Ke)=>{function R(n){return"function"==typeof n}function De(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const M=De(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function $e(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ot{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(R(r))try{r()}catch(o){e=o instanceof M?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{rn(o)}catch(s){e=e??[],s instanceof M?e=[...e,...s.errors]:e.push(s)}}if(e)throw new M(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rn(e);else{if(e instanceof Ot){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$e(t,e)}remove(e){const{_finalizers:t}=this;t&&$e(t,e),e instanceof Ot&&e._removeParent(this)}}Ot.EMPTY=(()=>{const n=new Ot;return n.closed=!0,n})();const vn=Ot.EMPTY;function Vn(n){return n instanceof Ot||n&&"closed"in n&&R(n.remove)&&R(n.add)&&R(n.unsubscribe)}function rn(n){R(n)?n():n.unsubscribe()}const Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fe={setTimeout(n,e,...t){const{delegate:r}=fe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=fe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function be(n){fe.setTimeout(()=>{const{onUnhandledError:e}=Rt;if(!e)throw n;e(n)})}function ze(){}const at=bt("C",void 0,void 0);function bt(n,e,t){return{kind:n,value:e,error:t}}let tt=null;function nt(n){if(Rt.useDeprecatedSynchronousErrorHandling){const e=!tt;if(e&&(tt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=tt;if(tt=null,t)throw r}}else n()}class In extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vn(e)&&e.add(this)):this.destination=un}static create(e,t,r){return new Lt(e,t,r)}next(e){this.isStopped?pe(function Qn(n){return bt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?pe(function kt(n){return bt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pe(at,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function jt(n,e){return yt.call(n,e)}class Gr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ut(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ut(r)}else ut(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ut(t)}}}class Lt extends In{constructor(e,t,r){let i;if(super(),R(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Rt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jt(e.next,o),error:e.error&&jt(e.error,o),complete:e.complete&&jt(e.complete,o)}):i=e}this.destination=new Gr(i)}}function ut(n){Rt.useDeprecatedSynchronousErrorHandling?function ir(n){Rt.useDeprecatedSynchronousErrorHandling&&tt&&(tt.errorThrown=!0,tt.error=n)}(n):be(n)}function pe(n,e){const{onStoppedNotification:t}=Rt;t&&fe.setTimeout(()=>t(n,e))}const un={closed:!0,next:ze,error:function Pn(n){throw n},complete:ze},Qt="function"==typeof Symbol&&Symbol.observable||"@@observable";function En(n){return n}function hi(n){return 0===n.length?En:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function te(n){return n&&n instanceof In||function xi(n){return n&&R(n.next)&&R(n.error)&&R(n.complete)}(n)&&Vn(n)}(t)?t:new Lt(t,r,i);return nt(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=So(r))((i,o)=>{const s=new Lt({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Qt](){return this}pipe(...t){return hi(t)(this)}toPromise(t){return new(t=So(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function So(n){var e;return null!==(e=n??Rt.Promise)&&void 0!==e?e:Promise}const re=De(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class n extends ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ue(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?vn:(this.currentObservers=null,o.push(t),new Ot(()=>{this.currentObservers=null,$e(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ct;return t.source=this,t}}return n.create=(e,t)=>new ue(e,t),n})();class ue extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:vn}}function he(n){return R(n?.lift)}function ie(n){return e=>{if(he(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function xe(n,e,t,r,i){return new wt(n,e,t,r,i)}class wt extends In{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return ie((t,r)=>{let i=0;t.subscribe(xe(r,o=>{r.next(n.call(e,o,i++))}))})}var Be=Ke(582);const St=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cn(n){return R(n?.then)}function fi(n){return R(n[Qt])}function Ft(n){return Symbol.asyncIterator&&R(n?.[Symbol.asyncIterator])}function Yt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yn=function Rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pr(n){return R(n?.[Yn])}function Po(n){return(0,Be.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Be.qq)(t.read());if(i)return yield(0,Be.qq)(void 0);yield yield(0,Be.qq)(r)}}finally{t.releaseLock()}})}function Qi(n){return R(n?.getReader)}function Vt(n){if(n instanceof ct)return n;if(null!=n){if(fi(n))return function Mi(n){return new ct(e=>{const t=n[Qt]();if(R(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(St(n))return function ts(n){return new ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(cn(n))return function Ro(n){return new ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,be)})}(n);if(Ft(n))return Yi(n);if(pr(n))return function pi(n){return new ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Qi(n))return function Rr(n){return Yi(Po(n))}(n)}throw Yt(n)}function Yi(n){return new ct(e=>{(function xr(n,e){var t,r,i,o;return(0,Be.mG)(this,void 0,void 0,function*(){try{for(t=(0,Be.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bn(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function on(n,e,t=1/0){return R(e)?on((r,i)=>Oe((o,s)=>e(r,o,i,s))(Vt(n(r,i))),t):("number"==typeof e&&(t=e),ie((r,i)=>function Mr(n,e,t,r,i,o,s,a){const u=[];let l=0,f=0,m=!1;const y=()=>{m&&!u.length&&!l&&e.complete()},E=k=>l<r?S(k):u.push(k),S=k=>{o&&e.next(k),l++;let L=!1;Vt(t(k,f++)).subscribe(xe(e,Q=>{i?.(Q),o?E(Q):e.next(Q)},()=>{L=!0},void 0,()=>{if(L)try{for(l--;u.length&&l<r;){const Q=u.shift();s?bn(e,s,()=>S(Q)):S(Q)}y()}catch(Q){e.error(Q)}}))};return n.subscribe(xe(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Cr(n=1/0){return on(En,n)}const Ln=new ct(n=>n.complete());function Ni(n){return n[n.length-1]}function Mo(n){return R(Ni(n))?n.pop():void 0}function Un(n){return function Jt(n){return n&&R(n.schedule)}(Ni(n))?n.pop():void 0}function wn(n,e=0){return ie((t,r)=>{t.subscribe(xe(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function Tr(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Oo(n,e){if(!n)throw new Error("Iterable cannot be null");return new ct(t=>{bn(t,e,()=>{const r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function C(n,e){return e?function F(n,e){if(null!=n){if(fi(n))return function No(n,e){return Vt(n).pipe(Tr(e),wn(e))}(n,e);if(St(n))return function is(n,e){return new ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(cn(n))return function rs(n,e){return Vt(n).pipe(Tr(e),wn(e))}(n,e);if(Ft(n))return Oo(n,e);if(pr(n))return function os(n,e){return new ct(t=>{let r;return bn(t,e,()=>{r=n[Yn](),bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}(n,e);if(Qi(n))return function U(n,e){return Oo(Po(n),e)}(n,e)}throw Yt(n)}(n,e):Vt(n)}function A(...n){const e=Un(n),t=function or(n,e){return"number"==typeof Ni(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Vt(r[0]):Cr(t)(C(r,e)):Ln}class b extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function V(...n){return C(n,Un(n))}function de(n={}){const{connector:e=(()=>new se),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),s=u=void 0,f=m=!1},S=()=>{const k=s;E(),k?.unsubscribe()};return ie((k,L)=>{l++,!m&&!f&&y();const Q=u=u??e();L.add(()=>{l--,0===l&&!m&&!f&&(a=Pe(S,i))}),Q.subscribe(L),!s&&l>0&&(s=new Lt({next:z=>Q.next(z),error:z=>{m=!0,y(),a=Pe(E,t,z),Q.error(z)},complete:()=>{f=!0,y(),a=Pe(E,r),Q.complete()}}),Vt(k).subscribe(s))})(o)}}function Pe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Lt({next:()=>{r.unsubscribe(),n()}});return Vt(e(...t)).subscribe(r)}function Ve(n,e){return ie((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(xe(r,u=>{i?.unsubscribe();let l=0;const f=o++;Vt(n(u,f)).subscribe(i=xe(r,m=>r.next(e?e(u,m,f,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function et(n,e=En){return n=n??Pt,ie((t,r)=>{let i,o=!0;t.subscribe(xe(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Pt(n,e){return n===e}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function $t(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function sr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Vs=Re({__forward_ref__:Re});function Ht(n){return n.__forward_ref__=Ht,n.toString=function(){return qe(this())},n}function Qe(n){return wa(n)?n():n}function wa(n){return"function"==typeof n&&n.hasOwnProperty(Vs)&&n.__forward_ref__===Ht}function Ca(n){return n&&!!n.\u0275providers}const Vc="https://g.co/ng/security#xss";class O extends Error{constructor(e,t){super(function G(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function K(n){return"string"==typeof n?n:null==n?"":String(n)}function Wt(n,e){throw new O(-201,!1)}function ki(n,e){null==n&&function Ye(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function He(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bc(n){return yh(n,Au)||yh(n,Bs)}function yh(n,e){return n.hasOwnProperty(e)?n[e]:null}function jc(n){return n&&(n.hasOwnProperty(vh)||n.hasOwnProperty(om))?n[vh]:null}const Au=Re({\u0275prov:Re}),vh=Re({\u0275inj:Re}),Bs=Re({ngInjectableDef:Re}),om=Re({ngInjectorDef:Re});var _t=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_t||{});let Ih;function Wr(n){const e=Ih;return Ih=n,e}function zc(n,e,t){const r=Bc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&_t.Optional?null:void 0!==e?e:void Wt(qe(n))}const Zt=globalThis;class Te{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=He({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Pu={},Ru="__NG_DI_FLAG__",as="ngTempTokenPath",Th=/\n/gm,Ji="__source";let Ta;function us(n){const e=Ta;return Ta=n,e}function Ah(n,e=_t.Default){if(void 0===Ta)throw new O(-203,!1);return null===Ta?zc(n,void 0,e):Ta.get(n,e&_t.Optional?null:void 0,e)}function we(n,e=_t.Default){return(function $c(){return Ih}()||Ah)(Qe(n),e)}function Ue(n,e=_t.Default){return we(n,Gc(e))}function Gc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xu(n){const e=[];for(let t=0;t<n.length;t++){const r=Qe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new O(900,!1);let i,o=_t.Default;for(let s=0;s<r.length;s++){const a=r[s],u=LI(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(we(i,o))}else e.push(we(r))}return e}function Xi(n,e){return n[Ru]=e,n.prototype[Ru]=e,n}function LI(n){return n[Ru]}function cs(n){return{toString:n}.toString()}var Da=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Da||{}),Jn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Jn||{});const Nr={},Tt=[],Wc=Re({\u0275cmp:Re}),Sh=Re({\u0275dir:Re}),Ph=Re({\u0275pipe:Re}),lm=Re({\u0275mod:Re}),Zr=Re({\u0275fac:Re}),Nu=Re({__NG_ELEMENT_ID__:Re}),Ou=Re({__NG_ENV_ID__:Re});function dm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Zc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];gi(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Kc(n){return 3===n||4===n||6===n}function gi(n){return 64===n.charCodeAt(0)}function Aa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||hm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function hm(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const Qc="ng-template";function Yc(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(t&&"class"===o&&-1!==dm(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Rh(n){return 4===n.type&&n.value!==Qc}function fm(n,e,t){return e===(4!==n.type||t?n.value:Qc)}function BI(n,e,t){let r=4;const i=n.attrs||[],o=function Mh(n){for(let e=0;e<n.length;e++)if(Kc(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!fm(n,u,t)||""===u&&1===e.length){if(mi(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Yc(n.attrs,l,t)){if(mi(r))return!1;s=!0}continue}const m=xh(8&r?"class":u,i,Rh(n),t);if(-1===m){if(mi(r))return!1;s=!0;continue}if(""!==l){let y;y=m>o?"":i[m+1].toLowerCase();const E=8&r?y:null;if(E&&-1!==dm(E,l,0)||2&r&&l!==y){if(mi(r))return!1;s=!0}}}}else{if(!s&&!mi(r)&&!mi(u))return!1;if(s&&mi(u))continue;s=!1,r=u|1&r}}return mi(r)||s}function mi(n){return 0==(1&n)}function xh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function pm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Jc(n,e,t=!1){for(let r=0;r<e.length;r++)if(BI(n,e[r],t))return!0;return!1}function Oh(n,e){return n?":not("+e.trim()+")":e}function kh(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!mi(s)&&(e+=Oh(o,i),i=""),r=s,o=o||!mi(r);t++}return""!==i&&(e+=Oh(o,i)),e}function ar(n){return cs(()=>{const e=_m(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Da.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Jn.Emulated,styles:n.styles||Tt,_:null,schemas:n.schemas||null,tView:null,id:""};tl(t);const r=n.dependencies;return t.directiveDefs=nl(r,!1),t.pipeDefs=nl(r,!0),t.id=function jI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function gm(n){return Dt(n)||er(n)}function Lh(n){return null!==n}function Xn(n){return cs(()=>({type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mm(n,e){if(null==n)return Nr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function Je(n){return cs(()=>{const e=_m(n);return tl(e),e})}function ur(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dt(n){return n[Wc]||null}function er(n){return n[Sh]||null}function cr(n){return n[Ph]||null}function Or(n,e){const t=n[lm]||null;if(!t&&!0===e)throw new Error(`Type ${qe(n)} does not have '\u0275mod' property.`);return t}function _m(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Nr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mm(n.inputs,e),outputs:mm(n.outputs)}}function tl(n){n.features?.forEach(e=>e(n))}function nl(n,e){if(!n)return null;const t=e?cr:gm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Lh)}const pn=0,Ne=1,it=2,gn=3,_i=4,ku=5,lr=6,Sa=7,Bn=8,fo=9,Pa=10,ot=11,js=12,ym=13,ds=14,jn=15,$s=16,Ra=17,Fi=18,Fu=19,rl=20,hs=21,eo=22,Vu=23,zs=24,vt=25,il=1,ol=2,po=7,Hs=9,gr=11;function Kr(n){return Array.isArray(n)&&"object"==typeof n[il]}function kr(n){return Array.isArray(n)&&!0===n[il]}function vm(n){return 0!=(4&n.flags)}function xa(n){return n.componentOffset>-1}function jh(n){return 1==(1&n.flags)}function yi(n){return!!n.template}function $h(n){return 0!=(512&n[it])}function qs(n,e){return n.hasOwnProperty(Zr)?n[Zr]:null}let Dr=null,Na=!1;function Vi(n){const e=Dr;return Dr=n,e}const Cm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Tm(n){if(!ps(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Dm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function al(n){n.dirty=!0,function $n(n){if(void 0===n.liveConsumerNode)return;const e=Na;Na=!0;try{for(const t of n.liveConsumerNode)t.dirty||al(t)}finally{Na=e}}(n),n.consumerMarkedDirty?.(n)}function qh(n){return n&&(n.nextProducerIndex=0),Vi(n)}function Uu(n,e){if(Vi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ps(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ul(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Dm(n){Gs(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Tm(t),r!==t.version))return!0}return!1}function Am(n){if(Gs(n),ps(n))for(let e=0;e<n.producerNode.length;e++)ul(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ul(n,e){if(function ka(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Gs(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)ul(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Gs(i),i.producerIndexOfThis[r]=e}}function ps(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gs(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let cl=null;function Mm(n){const e=Vi(null);try{return n()}finally{Vi(e)}}const Nm=()=>{},Qh=(()=>({...Cm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Nm}))();class YI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Li(){return Om}function Om(n){return n.type.prototype.ngOnChanges&&(n.setInput=JI),km}function km(){const n=Vm(this),e=n?.current;if(e){const t=n.previous;if(t===Nr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function JI(n,e,t,r){const i=this.declaredInputs[t],o=Vm(n)||function Yh(n,e){return n[Fm]=e}(n,{previous:Nr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new YI(u&&u.currentValue,e,a===Nr),n[r]=e}Li.ngInherit=!0;const Fm="__ngSimpleChanges__";function Vm(n){return n[Fm]||null}const go=function(n,e,t){};function Kt(n){for(;Array.isArray(n);)n=n[pn];return n}function Va(n,e){return Kt(e[n])}function Qr(n,e){return Kt(e[n.index])}function Um(n,e){return n.data[e]}function Fr(n,e){const t=e[n];return Kr(t)?t:t[pn]}function mo(n,e){return null==e?null:n[e]}function tf(n){n[Ra]=0}function nE(n){1024&n[it]||(n[it]|=1024,fl(n,1))}function Bm(n){1024&n[it]&&(n[it]&=-1025,fl(n,-1))}function fl(n,e){let t=n[gn];if(null===t)return;t[ku]+=e;let r=t;for(t=t[gn];null!==t&&(1===e&&1===r[ku]||-1===e&&0===r[ku]);)t[ku]+=e,r=t,t=t[gn]}const Xe={lFrame:Jm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function zm(){return Xe.bindingsEnabled}function me(){return Xe.lFrame.lView}function xt(){return Xe.lFrame.tView}function Vo(n){return Xe.lFrame.contextLView=n,n[Bn]}function to(n){return Xe.lFrame.contextLView=null,n}function mr(){let n=Gm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Gm(){return Xe.lFrame.currentTNode}function _o(n,e){const t=Xe.lFrame;t.currentTNode=n,t.isParent=e}function af(){return Xe.lFrame.isParent}function ju(){Xe.lFrame.isParent=!1}function _r(){const n=Xe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function La(){return Xe.lFrame.bindingIndex++}function aE(n,e){const t=Xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,$u(e)}function $u(n){Xe.lFrame.currentDirectiveIndex=n}function lf(n){Xe.lFrame.currentQueryIndex=n}function df(n){const e=n[Ne];return 2===e.type?e.declTNode:1===e.type?n[lr]:null}function Ym(n,e,t){if(t&_t.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&_t.Host||(i=df(o),null===i||(o=o[ds],10&i.type))););if(null===i)return!1;e=i,n=o}const r=Xe.lFrame=ff();return r.currentTNode=e,r.lView=n,!0}function hf(n){const e=ff(),t=n[Ne];Xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ff(){const n=Xe.lFrame,e=null===n?null:n.child;return null===e?Jm(n):e}function Jm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function zu(){const n=Xe.lFrame;return Xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xm=zu;function pf(){const n=zu();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vr(){return Xe.lFrame.selectedIndex}function Zs(n){Xe.lFrame.selectedIndex=n}function Cn(){const n=Xe.lFrame;return Um(n.tView,n.selectedIndex)}let t_=!0;function _l(){return t_}function Lo(n){t_=n}function yl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function vl(n,e,t){El(n,e,3,t)}function Il(n,e,t,r){(3&n[it])===t&&El(n,e,t,r)}function mf(n,e){let t=n[it];(3&t)===e&&(t&=8191,t+=1,n[it]=t)}function El(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ra]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ra]+=65536),(a<o||-1==o)&&(pE(n,t,e,u),n[Ra]=(4294901760&n[Ra])+u+2),u++}function bl(n,e){go(4,n,e);const t=Vi(null);try{e.call(n)}finally{Vi(t),go(5,n,e)}}function pE(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[it]>>13<n[Ra]>>16&&(3&n[it])===e&&(n[it]+=8192,bl(a,o)):bl(a,o)}const ms=-1;class Hu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function wl(n){return n!==ms}function Ua(n){return 32767&n}function Gu(n,e){let t=function mE(n){return n>>16}(n),r=e;for(;t>0;)r=r[ds],t--;return r}let vf=!0;function Cl(n){const e=vf;return vf=n,e}const If=255,r_=5;let FA=0;const Io={};function c(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Ne];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),o=n.injectorIndex;if(wl(i)){const s=Ua(i),a=Gu(i,e),u=a[Ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=a_(i),null===r)return ms;if(t++,i=i[ds],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ms}function T(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Nu)&&(r=t[Nu]),null==r&&(r=t[Nu]=FA++);const i=r&If;e.data[n+(i>>r_)]|=1<<i}(n,e,t)}function X(n,e,t){if(t&_t.Optional||void 0!==n)return n;Wt()}function ge(n,e,t,r){if(t&_t.Optional&&void 0===r&&(r=null),!(t&(_t.Self|_t.Host))){const i=n[fo],o=Wr(void 0);try{return i?i.get(e,r,t&_t.Optional):zc(e,r,t&_t.Optional)}finally{Wr(o)}}return X(r,0,t)}function ke(n,e,t,r=_t.Default,i){if(null!==n){if(2048&e[it]&&!(r&_t.Self)){const s=function s_(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[it]&&!(512&s[it]);){const a=We(o,s,t,r|_t.Self,Io);if(a!==Io)return a;let u=o.parent;if(!u){const l=s[rl];if(l){const f=l.get(t,Io,r);if(f!==Io)return f}u=a_(s),s=s[ds]}o=u}return i}(n,e,t,r,Io);if(s!==Io)return s}const o=We(n,e,t,r,Io);if(o!==Io)return o}return ge(e,t,r,i)}function We(n,e,t,r,i){const o=function Tl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Nu)?n[Nu]:void 0;return"number"==typeof e?e>=0?e&If:o_:e}(t);if("function"==typeof o){if(!Ym(e,n,r))return r&_t.Host?X(i,0,r):ge(e,t,r,i);try{let s;if(s=o(r),null!=s||r&_t.Optional)return s;Wt()}finally{Xm()}}else if("number"==typeof o){let s=null,a=g(n,e),u=ms,l=r&_t.Host?e[jn][lr]:null;for((-1===a||r&_t.SkipSelf)&&(u=-1===a?v(n,e):e[a+8],u!==ms&&Dl(r,!1)?(s=e[Ne],a=Ua(u),e=Gu(u,e)):a=-1);-1!==a;){const f=e[Ne];if(Ef(o,a,f.data)){const m=It(a,e,t,s,r,l);if(m!==Io)return m}u=e[a+8],u!==ms&&Dl(r,e[Ne].data[a+8]===l)&&Ef(o,a,e)?(s=f,a=Ua(u),e=Gu(u,e)):a=-1}}return i}function It(n,e,t,r,i,o){const s=e[Ne],a=s.data[n+8],f=function yr(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,f=o>>20,y=i?a+f:n.directiveEnd;for(let E=r?a:a+f;E<y;E++){const S=s[E];if(E<u&&t===S||E>=u&&S.type===t)return E}if(i){const E=s[u];if(E&&yi(E)&&E.type===t)return u}return null}(a,s,t,null==r?xa(a)&&vf:r!=s&&0!=(3&a.type),i&_t.Host&&o===a);return null!==f?Yr(e,s,f,a):Io}function Yr(n,e,t,r){let i=n[t];const o=e.data;if(function n_(n){return n instanceof Hu}(i)){const s=i;s.resolving&&function rt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():K(n)}(o[t]));const a=Cl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Wr(s.injectImpl):null;Ym(n,r,_t.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function fE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Om(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&Wr(l),Cl(a),s.resolving=!1,Xm()}}return i}function Ef(n,e,t){return!!(t[e+(n>>r_)]&1<<n)}function Dl(n,e){return!(n&_t.Self||n&_t.Host&&e)}class vr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ke(this._tNode,this._lView,e,Gc(r),t)}}function o_(){return new vr(mr(),me())}function dr(n){return cs(()=>{const e=n.prototype.constructor,t=e[Zr]||Wu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Zr]||Wu(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wu(n){return wa(n)?()=>{const e=Wu(Qe(n));return e&&e()}:qs(n)}function a_(n){const e=n[Ne],t=e.type;return 2===t?e.declTNode:1===t?n[lr]:null}const Al="__parameters__";function Pl(n,e,t){return cs(()=>{const r=function _E(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,f){const m=u.hasOwnProperty(Al)?u[Al]:Object.defineProperty(u,Al,{value:[]})[Al];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function xl(n,e){n.forEach(t=>Array.isArray(t)?xl(t,e):e(t))}function LA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function u_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function no(n,e,t){let r=Ml(n,e);return r>=0?n[1|r]=t:(r=~r,function xB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function yE(n,e){const t=Ml(n,e);if(t>=0)return n[1|t]}function Ml(n,e){return function UA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Lr=Xi(Pl("Optional"),8),l_=Xi(Pl("SkipSelf"),4);function g_(n){return 128==(128&n.flags)}var za=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(za||{});const JB=/^>|^->|<!--|-->|--!>|<!-$/g,XB=/(<|>)/g,ej="\u200b$1\u200b";const wE=new Map;let tj=0;const TE="__ngContext__";function Jr(n,e){Kr(e)?(n[TE]=e[Fu],function rj(n){wE.set(n[Fu],n)}(e)):n[TE]=e}let DE;function AE(n,e){return DE(n,e)}function Df(n){const e=n[gn];return kr(e)?e[gn]:e}function oS(n){return aS(n[js])}function sS(n){return aS(n[_i])}function aS(n){for(;null!==n&&!kr(n);)n=n[_i];return n}function kl(n,e,t,r,i){if(null!=r){let o,s=!1;kr(r)?o=r:Kr(r)&&(s=!0,r=r[pn]);const a=Kt(r);0===n&&null!==t?null==i?dS(e,t,a):Zu(e,t,a,i||null,!0):1===n&&null!==t?Zu(e,t,a,i||null,!0):2===n?function b_(n,e,t){const r=I_(n,e);r&&function bj(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function Tj(n,e,t,r,i){const o=t[po];o!==Kt(t)&&kl(e,n,r,o,i);for(let a=gr;a<t.length;a++){const u=t[a];Sf(u[Ne],u,n,e,r,o)}}(e,n,o,t,i)}}function SE(n,e){return n.createComment(function YA(n){return n.replace(JB,e=>e.replace(XB,ej))}(e))}function y_(n,e,t){return n.createElement(e,t)}function cS(n,e){const t=n[Hs],r=t.indexOf(e);Bm(e),t.splice(r,1)}function v_(n,e){if(n.length<=gr)return;const t=gr+e,r=n[t];if(r){const i=r[$s];null!==i&&i!==n&&cS(i,r),e>0&&(n[t-1][_i]=r[_i]);const o=u_(n,gr+e);!function pj(n,e){Sf(n,e,e[ot],2,null,null),e[pn]=null,e[lr]=null}(r[Ne],r);const s=o[Fi];null!==s&&s.detachView(o[Ne]),r[gn]=null,r[_i]=null,r[it]&=-129}return r}function PE(n,e){if(!(256&e[it])){const t=e[ot];e[Vu]&&Am(e[Vu]),e[zs]&&Am(e[zs]),t.destroyNode&&Sf(n,e,t,3,null,null),function _j(n){let e=n[js];if(!e)return RE(n[Ne],n);for(;e;){let t=null;if(Kr(e))t=e[js];else{const r=e[gr];r&&(t=r)}if(!t){for(;e&&!e[_i]&&e!==n;)Kr(e)&&RE(e[Ne],e),e=e[gn];null===e&&(e=n),Kr(e)&&RE(e[Ne],e),t=e&&e[_i]}e=t}}(e)}}function RE(n,e){if(!(256&e[it])){e[it]&=-129,e[it]|=256,function Ej(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Hu)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];go(4,a,u);try{u.call(a)}finally{go(5,a,u)}}else{go(4,i,o);try{o.call(i)}finally{go(5,i,o)}}}}}(n,e),function Ij(n,e){const t=n.cleanup,r=e[Sa];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[Sa]=null);const i=e[hs];if(null!==i){e[hs]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Ne].type&&e[ot].destroy();const t=e[$s];if(null!==t&&kr(e[gn])){t!==e[gn]&&cS(t,e);const r=e[Fi];null!==r&&r.detachView(n)}!function ij(n){wE.delete(n[Fu])}(e)}}function xE(n,e,t){return function lS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[pn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Jn.None||o===Jn.Emulated)return null}return Qr(r,t)}}(n,e.parent,t)}function Zu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function dS(n,e,t){n.appendChild(e,t)}function hS(n,e,t,r,i){null!==r?Zu(n,e,t,r,i):dS(n,e,t)}function I_(n,e){return n.parentNode(e)}let ME,w_,FE,C_,gS=function pS(n,e,t){return 40&n.type?Qr(n,t):null};function E_(n,e,t,r){const i=xE(n,r,e),o=e[ot],a=function fS(n,e,t){return gS(n,e,t)}(r.parent||e[lr],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)hS(o,i,t[u],a,!1);else hS(o,i,t,a,!1);void 0!==ME&&ME(o,r,e,t,i)}function Af(n,e){if(null!==e){const t=e.type;if(3&t)return Qr(e,n);if(4&t)return NE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Af(n,r);{const i=n[e.index];return kr(i)?NE(-1,i):Kt(i)}}if(32&t)return AE(e,n)()||Kt(n[e.index]);{const r=_S(n,e);return null!==r?Array.isArray(r)?r[0]:Af(Df(n[jn]),r):Af(n,e.next)}}return null}function _S(n,e){return null!==e?n[jn][lr].projection[e.projection]:null}function NE(n,e){const t=gr+n+1;if(t<e.length){const r=e[t],i=r[Ne].firstChild;if(null!==i)return Af(r,i)}return e[po]}function OE(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Jr(Kt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)OE(n,e,t.child,r,i,o,!1),kl(e,n,i,a,o);else if(32&u){const l=AE(t,r);let f;for(;f=l();)kl(e,n,i,f,o);kl(e,n,i,a,o)}else 16&u?vS(n,e,r,t,i,o):kl(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Sf(n,e,t,r,i,o){OE(t,r,n.firstChild,e,i,o,!1)}function vS(n,e,t,r,i,o){const s=t[jn],u=s[lr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)kl(e,n,i,u[l],o);else{let l=u;const f=s[gn];g_(r)&&(l.flags|=128),OE(n,e,l,f,i,o,!0)}}function IS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ES(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Zc(n,e,r),null!==i&&IS(n,e,i),null!==o&&function Aj(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Fl(n){return function kE(){if(void 0===w_&&(w_=null,Zt.trustedTypes))try{w_=Zt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return w_}()?.createHTML(n)||n}function Vl(){if(void 0!==FE)return FE;if(typeof document<"u")return document;throw new O(210,!1)}function VE(){if(void 0===C_&&(C_=null,Zt.trustedTypes))try{C_=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return C_}function bS(n){return VE()?.createHTML(n)||n}function CS(n){return VE()?.createScriptURL(n)||n}class TS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vc})`}}function Ha(n){return n instanceof TS?n.changingThisBreaksApplicationSecurity:n}function Pf(n,e){const t=function Vj(n){return n instanceof TS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Vc})`)}return t===e}class Lj{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Fl(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class Uj{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Fl(e),t}}const jj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LE(n){return(n=String(n)).match(jj)?n:"unsafe:"+n}function Ks(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Rf(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const AS=Ks("area,br,col,hr,img,wbr"),SS=Ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),PS=Ks("rp,rt"),UE=Rf(AS,Rf(SS,Ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rf(PS,Ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rf(PS,SS)),BE=Ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),RS=Rf(BE,Ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$j=Ks("script,style,template");class zj{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!UE.hasOwnProperty(t))return this.sanitizedSomething=!0,!$j.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!RS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;BE[a]&&(u=LE(u)),this.buf.push(" ",s,'="',xS(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();UE.hasOwnProperty(t)&&!AS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(xS(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Hj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qj=/([^\#-~ |!])/g;function xS(n){return n.replace(/&/g,"&amp;").replace(Hj,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(qj,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let T_;function jE(n){return"content"in n&&function Wj(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ll=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ll||{});function qa(n){const e=xf();return e?bS(e.sanitize(Ll.HTML,n)||""):Pf(n,"HTML")?bS(Ha(n)):function Gj(n,e){let t=null;try{T_=T_||function DS(n){const e=new Uj(n);return function Bj(){try{return!!(new window.DOMParser).parseFromString(Fl(""),"text/html")}catch{return!1}}()?new Lj(e):e}(n);let r=e?String(e):"";t=T_.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=T_.getInertBodyElement(r)}while(r!==o);return Fl((new zj).sanitizeChildren(jE(t)||t))}finally{if(t){const r=jE(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(Vl(),K(n))}function ji(n){const e=xf();return e?e.sanitize(Ll.URL,n)||"":Pf(n,"URL")?Ha(n):LE(K(n))}function MS(n){const e=xf();if(e)return CS(e.sanitize(Ll.RESOURCE_URL,n)||"");if(Pf(n,"ResourceURL"))return CS(Ha(n));throw new O(904,!1)}function xf(){const n=me();return n&&n[Pa].sanitizer}const Mf=new Te("ENVIRONMENT_INITIALIZER"),OS=new Te("INJECTOR",-1),kS=new Te("INJECTOR_DEF_TYPES");class $E{get(e,t=Pu){if(t===Pu){const r=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw r.name="NullInjectorError",r}return t}}function Xj(...n){return{\u0275providers:VS(0,n),\u0275fromNgModule:!0}}function VS(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return xl(e,s=>{const a=s;D_(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&LS(i,o),t}function LS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];zE(i,o=>{e(o,r)})}}function D_(n,e,t,r){if(!(n=Qe(n)))return!1;let i=null,o=jc(n);const s=!o&&Dt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=jc(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)D_(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{xl(o.imports,f=>{D_(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&LS(l,e)}if(!a){const l=qs(i)||(()=>new i);e({provide:i,useFactory:l,deps:Tt},i),e({provide:kS,useValue:i,multi:!0},i),e({provide:Mf,useValue:()=>we(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=n;zE(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function zE(n,e){for(let t of n)Ca(t)&&(t=t.\u0275providers),Array.isArray(t)?zE(t,e):e(t)}const e$=Re({provide:String,useValue:Re});function HE(n){return null!==n&&"object"==typeof n&&e$ in n}function Ku(n){return"function"==typeof n}const qE=new Te("Set Injector scope."),A_={},n$={};let GE;function S_(){return void 0===GE&&(GE=new $E),GE}class bo{}class Ul extends bo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ZE(e,s=>this.processProvider(s)),this.records.set(OS,Bl(void 0,this)),i.has("environment")&&this.records.set(bo,Bl(void 0,this));const o=this.records.get(qE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kS.multi,Tt,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=us(this),r=Wr(void 0);try{return e()}finally{us(t),Wr(r)}}get(e,t=Pu,r=_t.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ou))return e[Ou](this);r=Gc(r);const o=us(this),s=Wr(void 0);try{if(!(r&_t.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function a$(n){return"function"==typeof n||"object"==typeof n&&n instanceof Te}(e)&&Bc(e);u=l&&this.injectableDefInScope(l)?Bl(WE(e),A_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&_t.Self?S_():this.parent).get(e,t=r&_t.Optional&&t===Pu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[as]=a[as]||[]).unshift(qe(e)),o)throw a;return function UI(n,e,t,r){const i=n[as];throw e[Ji]&&i.unshift(e[Ji]),n.message=function Mu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=qe(e);if(Array.isArray(e))i=e.map(qe).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):qe(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Th,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[as]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Wr(s),us(o)}}resolveInjectorInitializers(){const e=us(this),t=Wr(void 0);try{const i=this.get(Mf.multi,Tt,_t.Self);for(const o of i)o()}finally{us(e),Wr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let t=Ku(e=Qe(e))?e:Qe(e&&e.provide);const r=function i$(n){return HE(n)?Bl(void 0,n.useValue):Bl(jS(n),A_)}(e);if(Ku(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Bl(void 0,A_,!0),i.factory=()=>xu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===A_&&(t.value=n$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function s$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Qe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function WE(n){const e=Bc(n),t=null!==e?e.factory:qs(n);if(null!==t)return t;if(n instanceof Te)throw new O(204,!1);if(n instanceof Function)return function r$(n){const e=n.length;if(e>0)throw function wf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new O(204,!1);const t=function im(n){return n&&(n[Au]||n[Bs])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new O(204,!1)}function jS(n,e,t){let r;if(Ku(n)){const i=Qe(n);return qs(i)||WE(i)}if(HE(n))r=()=>Qe(n.useValue);else if(function BS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...xu(n.deps||[]));else if(function US(n){return!(!n||!n.useExisting)}(n))r=()=>we(Qe(n.useExisting));else{const i=Qe(n&&(n.useClass||n.provide));if(!function o$(n){return!!n.deps}(n))return qs(i)||WE(i);r=()=>new i(...xu(n.deps))}return r}function Bl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZE(n,e){for(const t of n)Array.isArray(t)?ZE(t,e):t&&Ca(t)?ZE(t.\u0275providers,e):e(t)}const P_=new Te("AppId",{providedIn:"root",factory:()=>u$}),u$="ng",$S=new Te("Platform Initializer"),Uo=new Te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zS=new Te("CSP nonce",{providedIn:"root",factory:()=>Vl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let HS=(n,e,t)=>null;function nb(n,e,t=!1){return HS(n,e,t)}class y${}class WS{}class I${resolveComponentFactory(e){throw function v$(n){const e=Error(`No component factory found for ${qe(n)}.`);return e.ngComponent=n,e}(e)}}let k_=(()=>{class n{static#e=this.NULL=new I$}return n})();function E$(){return zl(mr(),me())}function zl(n,e){return new ro(Qr(n,e))}let ro=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=E$}return n})();class KS{}let Qs=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function w$(){const n=me(),t=Fr(mr().index,n);return(Kr(t)?t:n)[ot]}()}return n})(),C$=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>null})}return n})();class Hl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ob=new Hl("16.2.12"),sb={};function XS(n,e=null,t=null,r){const i=e1(n,e,t,r);return i.resolveInjectorInitializers(),i}function e1(n,e=null,t=null,r,i=new Set){const o=[t||Tt,Xj(n)];return r=r||("object"==typeof n?void 0:qe(n)),new Ul(o,e||S_(),r||null,i)}let Xr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Pu;static#t=this.NULL=new $E;static create(t,r){if(Array.isArray(t))return XS({name:""},r,t,"");{const i=t.name??"";return XS({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=He({token:n,providedIn:"any",factory:()=>we(OS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function ub(n){return n.ngOriginalError}class Ys{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&ub(e);for(;t&&ub(t);)t=ub(t);return t||null}}function lb(n){return e=>{setTimeout(n,void 0,e)}}const zn=class x$ extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=lb(o),i&&(i=lb(i)),s&&(s=lb(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ot&&e.add(a),a}};function n1(...n){}class Ut{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zn(!1),this.onMicrotaskEmpty=new zn(!1),this.onStable=new zn(!1),this.onError=new zn(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function M$(){const n="function"==typeof Zt.requestAnimationFrame;let e=Zt[n?"requestAnimationFrame":"setTimeout"],t=Zt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function k$(n){const e=()=>{!function O$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Zt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hb(n),n.isCheckStableRunning=!0,db(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function V$(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,o,s,a);try{return r1(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),i1(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return r1(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),i1(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,hb(n),db(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new O(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,N$,n1,n1);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const N$={};function db(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function r1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function i1(n){n._nesting--,db(n)}class F${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zn,this.onMicrotaskEmpty=new zn,this.onStable=new zn,this.onError=new zn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const o1=new Te("",{providedIn:"root",factory:s1});function s1(){const n=Ue(Ut);let e=!0;return A(new ct(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ct(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(de()))}function Js(n){return n instanceof Function?n():n}let fb=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})();function kf(n){for(;n;){n[it]|=64;const e=Df(n);if($h(n)&&!e)return n;n=e}return null}const d1=new Te("",{providedIn:"root",factory:()=>!1});let V_=null;function g1(n,e){return n[e]??y1()}function m1(n,e){const t=y1();t.producerNode?.length&&(n[e]=V_,t.lView=n,V_=_1())}const W$={...Cm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kf(n.lView)},lView:null};function _1(){return Object.create(W$)}function y1(){return V_??=_1(),V_}const dt={};function Ee(n){v1(xt(),me(),Vr()+n,!1)}function v1(n,e,t,r){if(!r)if(3==(3&e[it])){const o=n.preOrderCheckHooks;null!==o&&vl(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Il(e,o,0,t)}Zs(t)}function ae(n,e=_t.Default){const t=me();return null===t?we(n,e):ke(mr(),t,Qe(n),e)}function L_(n,e,t,r,i,o,s,a,u,l,f){const m=e.blueprint.slice();return m[pn]=i,m[it]=140|r,(null!==l||n&&2048&n[it])&&(m[it]|=2048),tf(m),m[gn]=m[ds]=n,m[Bn]=t,m[Pa]=s||n&&n[Pa],m[ot]=a||n&&n[ot],m[fo]=u||n&&n[fo]||null,m[lr]=o,m[Fu]=function nj(){return tj++}(),m[eo]=f,m[rl]=l,m[jn]=2==e.type?n[jn]:m,m}function Wl(n,e,t,r,i){let o=n.data[e];if(null===o)o=function pb(n,e,t,r,i){const o=Gm(),s=af(),u=n.data[e]=function t4(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function gs(){return null!==Xe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(n,e,t,r,i),function Zm(){return Xe.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Ws(){const n=Xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return _o(o,!0),o}function Ff(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function E1(n,e,t,r,i){const o=g1(e,Vu),s=Vr(),a=2&r;try{Zs(-1),a&&e.length>vt&&v1(n,e,vt,!1),go(a?2:0,i);const l=a?o:null,f=qh(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Uu(l,f)}}finally{a&&null===e[Vu]&&m1(e,Vu),Zs(s),go(a?3:1,i)}}function gb(n,e,t){if(vm(e)){const r=Vi(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Vi(r)}}}function mb(n,e,t){zm()&&(function u4(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;xa(t)&&function g4(n,e,t){const r=Qr(e,n),i=b1(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=U_(n,L_(n,i,null,s,r,e,null,n[Pa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||c(t,e),Jr(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],l=Yr(e,n,a,t);Jr(l,e),null!==s&&m4(0,a-i,l,u,0,s),yi(u)&&(Fr(t.index,e)[Bn]=Yr(e,n,a,t))}}(n,e,t,Qr(t,e)),64==(64&t.flags)&&A1(n,e,t))}function _b(n,e,t=Qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function b1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=yb(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yb(n,e,t,r,i,o,s,a,u,l,f){const m=vt+r,y=m+i,E=function K$(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:dt);return t}(m,y),S="function"==typeof l?l():l;return E[Ne]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}let w1=n=>null;function C1(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?T1(t,e,i,o):r.hasOwnProperty(i)&&T1(t,e,r[i],o)}return t}function T1(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function io(n,e,t,r,i,o,s,a){const u=Qr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(wb(n,t,f,r,i),xa(e)&&function i4(n,e){const t=Fr(e,n);16&t[it]||(t[it]|=64)}(t,e.index)):3&e.type&&(r=function r4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function vb(n,e,t,r){if(zm()){const i=null===r?null:{"":-1},o=function l4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(Jc(e,s.selectors,!1))if(r||(r=[]),yi(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Ib(n,e,a.length)}else r.unshift(s),Ib(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&D1(n,e,t,s,i,a),i&&function d4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new O(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Aa(t.mergedAttrs,t.attrs)}function D1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)T(c(t,e),n,r[l].type);!function f4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=Ff(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=Aa(t.mergedAttrs,f.hostAttrs),p4(n,t,e,u,f),h4(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function n4(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=o[f],y=t?t.get(m):null,S=y?y.outputs:null;u=C1(m.inputs,f,u,y?y.inputs:null),l=C1(m.outputs,f,l,S);const k=null===u||null===s||Rh(e)?null:_4(u,f,s);a.push(k)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,o)}function A1(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function Km(){return Xe.lFrame.currentDirectiveIndex}();try{Zs(o);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];$u(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&c4(u,l)}}finally{Zs(-1),$u(s)}}function c4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ib(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function h4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;yi(e)&&(t[""]=n)}}function p4(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=qs(i.type)),s=new Hu(o,yi(i),ae);n.blueprint[r]=s,t[r]=s,function s4(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function a4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Ff(n,t,i.hostVars,dt),i)}function _s(n,e,t,r,i,o){const s=Qr(n,e);!function Eb(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?K(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[ot],s,o,n.value,t,r,i)}function m4(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)S1(r,t,s[a++],s[a++],s[a++])}function S1(n,e,t,r,i){const o=Vi(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Vi(o)}}function _4(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function P1(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function R1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];lf(t[r]),s.contentQueries(2,e[o],o)}}}function U_(n,e){return n[js]?n[ym][_i]=e:n[js]=e,n[ym]=e,e}function bb(n,e,t){lf(0);const r=Vi(null);try{e(n,t)}finally{Vi(r)}}function O1(n,e){const t=n[fo],r=t?t.get(Ys,null):null;r&&r.handleError(e)}function wb(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];S1(n.data[s],e[s],r,a,i)}}function y4(n,e){const t=Fr(e,n),r=t[Ne];!function v4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[pn];null!==i&&null===t[eo]&&(t[eo]=nb(i,t[fo])),Cb(r,t,t[Bn])}function Cb(n,e,t){hf(e);try{const r=n.viewQuery;null!==r&&bb(1,r,t);const i=n.template;null!==i&&E1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&R1(n,e),n.staticViewQueries&&bb(2,n.viewQuery,t);const o=n.components;null!==o&&function I4(n,e){for(let t=0;t<e.length;t++)y4(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[it]&=-5,pf()}}let k1=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function QI(n,e,t){const r=Object.create(Qh);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>al(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Dm(r))return;r.hasRun=!0;const s=qh(r);try{r.cleanupFn(),r.cleanupFn=Nm,r.fn(i)}finally{Uu(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new n})}return n})();function B_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=sr(i,a):2==o&&(r=sr(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Vf(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(Kt(o)),kr(o)&&F1(o,r);const s=t.type;if(8&s)Vf(n,e,t.child,r);else if(32&s){const a=AE(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=_S(e,t);if(Array.isArray(a))r.push(...a);else{const u=Df(e[jn]);Vf(u[Ne],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function F1(n,e){for(let t=gr;t<n.length;t++){const r=n[t],i=r[Ne].firstChild;null!==i&&Vf(r[Ne],r,i,e)}n[po]!==n[pn]&&e.push(n[po])}function j_(n,e,t,r=!0){const i=e[Pa],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{V1(n,e,n.template,t)}catch(u){throw r&&O1(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function V1(n,e,t,r){const i=e[it];if(256!=(256&i)){e[Pa].effectManager?.flush(),hf(e);try{tf(e),function ml(n){return Xe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&E1(n,e,t,2,r);const s=3==(3&i);if(s){const l=n.preOrderCheckHooks;null!==l&&vl(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Il(e,l,0,null),mf(e,0)}if(function w4(n){for(let e=oS(n);null!==e;e=sS(e)){if(!e[ol])continue;const t=e[Hs];for(let r=0;r<t.length;r++){nE(t[r])}}}(e),L1(e,2),null!==n.contentQueries&&R1(n,e),s){const l=n.contentCheckHooks;null!==l&&vl(e,l)}else{const l=n.contentHooks;null!==l&&Il(e,l,1),mf(e,1)}!function Z$(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=g1(e,zs);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)Zs(~o);else{const s=o,a=t[++i],u=t[++i];aE(a,s),r.dirty=!1;const l=qh(r);try{u(2,e[s])}finally{Uu(r,l)}}}}finally{null===e[zs]&&m1(e,zs),Zs(-1)}}(n,e);const a=n.components;null!==a&&B1(e,a,0);const u=n.viewQuery;if(null!==u&&bb(2,u,r),s){const l=n.viewCheckHooks;null!==l&&vl(e,l)}else{const l=n.viewHooks;null!==l&&Il(e,l,2),mf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[it]&=-73,Bm(e)}finally{pf()}}}function L1(n,e){for(let t=oS(n);null!==t;t=sS(t))for(let r=gr;r<t.length;r++)U1(t[r],e)}function C4(n,e,t){U1(Fr(e,n),t)}function U1(n,e){if(!function eE(n){return 128==(128&n[it])}(n))return;const t=n[Ne],r=n[it];if(80&r&&0===e||1024&r||2===e)V1(t,n,t.template,n[Bn]);else if(n[ku]>0){L1(n,1);const i=t.components;null!==i&&B1(n,i,1)}}function B1(n,e,t){for(let r=0;r<e.length;r++)C4(n,e[r],t)}class Lf{get rootNodes(){const e=this._lView,t=e[Ne];return Vf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(e){this._lView[Bn]=e}get destroyed(){return 256==(256&this._lView[it])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[gn];if(kr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(v_(e,r),u_(t,r))}this._attachedToViewContainer=!1}PE(this._lView[Ne],this._lView)}onDestroy(e){!function jm(n,e){if(256==(256&n[it]))throw new O(911,!1);null===n[hs]&&(n[hs]=[]),n[hs].push(e)}(this._lView,e)}markForCheck(){kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[it]&=-129}reattach(){this._lView[it]|=128}detectChanges(){j_(this._lView[Ne],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mj(n,e){Sf(n,e,e[ot],2,null,null)}(this._lView[Ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}}class T4 extends Lf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;j_(e[Ne],e,e[Bn],!1)}checkNoChanges(){}get context(){return null}}class j1 extends k_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Dt(e);return new Uf(t,this.ngModule)}}function $1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class A4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Gc(r);const i=this.injector.get(e,sb,r);return i!==sb||t===sb?i:this.parentInjector.get(e,t,r)}}class Uf extends WS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=$1(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return $1(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function el(n){return n.map(kh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof bo?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new A4(e,o):e,a=s.get(KS,null);if(null===a)throw new O(407,!1);const m={rendererFactory:a,sanitizer:s.get(C$,null),effectManager:s.get(k1,null),afterRenderEventManager:s.get(fb,null)},y=a.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",S=r?function Q$(n,e,t,r){const o=r.get(d1,!1)||t===Jn.ShadowDom,s=n.selectRootElement(e,o);return function Y$(n){w1(n)}(s),s}(y,r,this.componentDef.encapsulation,s):y_(y,E,function D4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E)),Q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let z=null;null!==S&&(z=nb(S,s,!0));const J=yb(0,null,null,1,0,null,null,null,null,null,null),le=L_(null,J,null,Q,null,null,m,y,s,null,z);let Ce,je;hf(le);try{const H=this.componentDef;let x,B=null;H.findHostDirectiveDefs?(x=[],B=new Map,H.findHostDirectiveDefs(H,x,B),x.push(H)):x=[H];const q=function P4(n,e){const t=n[Ne],r=vt;return n[r]=e,Wl(t,r,2,"#host",null)}(le,S),W=function R4(n,e,t,r,i,o,s){const a=i[Ne];!function x4(n,e,t,r){for(const i of n)e.mergedAttrs=Aa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(B_(e,e.mergedAttrs,!0),null!==t&&ES(r,t,e))}(r,n,e,s);let u=null;null!==e&&(u=nb(e,i[fo]));const l=o.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=L_(i,b1(t),null,f,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Ib(a,n,r.length-1),U_(i,m),i[n.index]=m}(q,S,H,x,le,m,y);je=Um(J,vt),S&&function N4(n,e,t,r){if(r)Zc(n,t,["ng-version",ob.full]);else{const{attrs:i,classes:o}=function Fh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!mi(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Zc(n,t,i),o&&o.length>0&&IS(n,t,o.join(" "))}}(y,H,S,r),void 0!==t&&function O4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(je,this.ngContentSelectors,t),Ce=function M4(n,e,t,r,i,o){const s=mr(),a=i[Ne],u=Qr(s,i);D1(a,i,s,t,null,r);for(let f=0;f<t.length;f++)Jr(Yr(i,a,s.directiveStart+f,s),i);A1(a,i,s),u&&Jr(u,i);const l=Yr(i,a,s.directiveStart+s.componentOffset,s);if(n[Bn]=i[Bn]=l,null!==o)for(const f of o)f(l,e);return gb(a,s,n),l}(W,H,x,B,le,[k4]),Cb(J,le,null)}finally{pf()}return new S4(this.componentType,Ce,zl(je,le),le,je)}}class S4 extends y${constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new T4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;wb(o[Ne],o,i,e,t),this.previousInputValues.set(e,t),kf(Fr(this._tNode.index,o))}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function k4(){const n=mr();yl(me()[Ne],n)}function Xt(n){let e=function z1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(yi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=$_(n.inputs),s.inputTransforms=$_(n.inputTransforms),s.declaredInputs=$_(n.declaredInputs),s.outputs=$_(n.outputs);const a=i.hostBindings;a&&U4(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&V4(n,u),l&&L4(n,l),$t(n.inputs,i.inputs),$t(n.declaredInputs,i.declaredInputs),$t(n.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),$t(s.inputTransforms,i.inputTransforms)),yi(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Xt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function F4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Aa(i.hostAttrs,t=Aa(t,i.hostAttrs))}}(r)}function $_(n){return n===Nr?{}:n===Tt?[]:n}function V4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function L4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function U4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function W1(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function z_(n){return!!Tb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Tb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ys(n,e,t){return n[e]=t}function ei(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Bo(n,e,t,r){const i=me();return ei(i,La(),e)&&(xt(),_s(Cn(),i,n,e,t,r)),Bo}function Kl(n,e,t,r){return ei(n,La(),t)?e+K(t)+r:dt}function At(n,e,t,r,i,o,s,a){const u=me(),l=xt(),f=n+vt,m=l.firstCreatePass?function l3(n,e,t,r,i,o,s,a,u){const l=e.consts,f=Wl(e,n,4,s||null,mo(l,a));vb(e,t,f,mo(l,u)),yl(e,f);const m=f.tView=yb(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,o,s):l.data[f];_o(m,!1);const y=sP(l,u,m,n);_l()&&E_(l,u,y,m),Jr(y,u),U_(u,u[f]=P1(y,u,y,m)),jh(m)&&mb(l,u,m),null!=s&&_b(u,m,a)}let sP=function aP(n,e,t,r){return Lo(!0),e[ot].createComment("")};function Le(n,e,t){const r=me();return ei(r,La(),e)&&io(xt(),Cn(),r,n,e,r[ot],t,!1),Le}function xb(n,e,t,r,i){const s=i?"class":"style";wb(n,t,e.inputs[s],s,r)}function P(n,e,t,r){const i=me(),o=xt(),s=vt+n,a=i[ot],u=o.firstCreatePass?function g3(n,e,t,r,i,o){const s=e.consts,u=Wl(e,n,2,r,mo(s,i));return vb(e,t,u,mo(s,o)),null!==u.attrs&&B_(u,u.attrs,!1),null!==u.mergedAttrs&&B_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,t,r):o.data[s],l=uP(o,i,u,a,e,n);i[s]=l;const f=jh(u);return _o(u,!0),ES(a,l,u),32!=(32&u.flags)&&_l()&&E_(o,i,l,u),0===function rE(){return Xe.lFrame.elementDepthCount}()&&Jr(l,i),function Bu(){Xe.lFrame.elementDepthCount++}(),f&&(mb(o,i,u),gb(o,u,i)),null!==r&&_b(i,u),P}function w(){let n=mr();af()?ju():(n=n.parent,_o(n,!1));const e=n;(function rf(n){return Xe.skipHydrationRootTNode===n})(e)&&function qm(){Xe.skipHydrationRootTNode=null}(),function iE(){Xe.lFrame.elementDepthCount--}();const t=xt();return t.firstCreatePass&&(yl(t,n),vm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function OA(n){return 0!=(8&n.flags)}(e)&&xb(t,e,me(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function _f(n){return 0!=(16&n.flags)}(e)&&xb(t,e,me(),e.stylesWithoutHost,!1),w}function _e(n,e,t,r){return P(n,e,t,r),w(),_e}let uP=(n,e,t,r,i,o)=>(Lo(!0),y_(r,i,function e_(){return Xe.lFrame.currentNamespace}()));function jo(n,e,t){const r=me(),i=xt(),o=n+vt,s=i.firstCreatePass?function y3(n,e,t,r,i){const o=e.consts,s=mo(o,r),a=Wl(e,n,8,"ng-container",s);return null!==s&&B_(a,s,!0),vb(e,t,a,mo(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];_o(s,!0);const a=lP(i,r,s,n);return r[o]=a,_l()&&E_(i,r,a,s),Jr(a,r),jh(s)&&(mb(i,r,s),gb(i,s,r)),null!=t&&_b(r,s),jo}function $o(){let n=mr();const e=xt();return af()?ju():(n=n.parent,_o(n,!1)),e.firstCreatePass&&(yl(e,n),vm(n)&&e.queries.elementEnd(n)),$o}let lP=(n,e,t,r)=>(Lo(!0),SE(e[ot],""));function rd(){return me()}function Hf(n){return!!n&&"function"==typeof n.then}function dP(n){return!!n&&"function"==typeof n.subscribe}function ft(n,e,t,r){const i=me(),o=xt(),s=mr();return function fP(n,e,t,r,i,o,s){const a=jh(r),l=n.firstCreatePass&&function M1(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Bn],m=function x1(n){return n[Sa]||(n[Sa]=[])}(e);let y=!0;if(3&r.type||s){const k=Qr(r,e),L=s?s(k):k,Q=m.length,z=s?le=>s(Kt(le[r.index])):r.index;let J=null;if(!s&&a&&(J=function E3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[Sa],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==J)(J.__ngLastListenerFn__||J).__ngNextListenerFn__=o,J.__ngLastListenerFn__=o,y=!1;else{o=gP(r,e,f,o,!1);const le=t.listen(L,i,o);m.push(o,le),l&&l.push(i,z,Q,Q+1)}}else o=gP(r,e,f,o,!1);const E=r.outputs;let S;if(y&&null!==E&&(S=E[i])){const k=S.length;if(k)for(let L=0;L<k;L+=2){const Ce=e[S[L]][S[L+1]].subscribe(o),je=m.length;m.push(o,Ce),l&&l.push(i,r.index,je,-(je+1))}}}(o,i,i[ot],s,n,e,r),ft}function pP(n,e,t,r){try{return go(6,e,t),!1!==t(r)}catch(i){return O1(n,i),!1}finally{go(7,e,t)}}function gP(n,e,t,r,i){return function o(s){if(s===Function)return r;kf(n.componentOffset>-1?Fr(n.index,e):e);let u=pP(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=pP(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function ln(n=1){return function uE(n){return(Xe.lFrame.contextLView=function cE(n,e){for(;n>0;)e=e[ds],n--;return e}(n,Xe.lFrame.contextLView))[Bn]}(n)}function qf(n,e,t){return oo(n,"",e,"",t),qf}function oo(n,e,t,r,i){const o=me(),s=Kl(o,e,t,r);return s!==dt&&io(xt(),Cn(),o,n,s,o[ot],i,!1),oo}function Z_(n,e){return n<<17|e<<2}function Ga(n){return n>>17&32767}function Mb(n){return 2|n}function Yu(n){return(131068&n)>>2}function Nb(n,e){return-131069&n|e<<2}function Ob(n){return 1|n}function CP(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?Ga(o):Yu(o),u=!1;for(;0!==a&&(!1===u||s);){const f=n[a+1];R3(n[a],e)&&(u=!0,n[a+1]=r?Ob(f):Mb(f)),a=r?Ga(f):Yu(f)}u&&(n[t+1]=r?Mb(o):Ob(o))}function R3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ml(n,e)>=0}function zo(n,e,t){return Ho(n,e,t,!1),zo}function od(n,e){return Ho(n,e,null,!0),od}function Ho(n,e,t,r){const i=me(),o=xt(),s=function vo(n){const e=Xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function MP(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Vr()],s=function xP(n,e){return e>=n.expandoStartIndex}(n,t);(function FP(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function U3(n,e,t,r){const i=function cf(n){const e=Xe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Gf(t=kb(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=kb(i,n,e,t,r),null===o){let u=function B3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Yu(r))return n[Ga(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=kb(null,n,e,u[1],r),u=Gf(u,e.attrs,r),function j3(n,e,t,r){n[Ga(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function $3(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Gf(r,n[o].hostAttrs,t);return Gf(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function S3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ga(s),u=Yu(s);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Ml(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const y=Ga(n[a+1]);n[r+1]=Z_(y,a),0!==y&&(n[y+1]=Nb(n[y+1],r)),n[a+1]=function D3(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Z_(a,0),0!==a&&(n[a+1]=Nb(n[a+1],r)),a=r;else n[r+1]=Z_(u,0),0===a?a=r:n[u+1]=Nb(n[u+1],r),u=r;l&&(n[r+1]=Mb(n[r+1])),CP(n,f,r,!0),CP(n,f,r,!1),function P3(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ml(o,e)>=0&&(t[r+1]=Ob(t[r+1]))}(e,f,n,r,o),s=Z_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==dt&&ei(i,s,e)&&function OP(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function A3(n){return 1==(1&n)}(l)?kP(u,e,t,i,Yu(l),s):void 0;K_(f)||(K_(o)||function T3(n){return 2==(2&n)}(l)&&(o=kP(u,null,t,i,a,s)),function Dj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:za.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=za.Important),n.setStyle(t,r,i,o))}}(r,s,Va(Vr(),t),i,o))}(o,o.data[Vr()],i,i[ot],n,i[s+1]=function G3(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=qe(Ha(n)))),n}(e,t),r,s)}function kb(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Gf(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Gf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),no(n,s,!!t||e[++o]))}return void 0===n?null:n}function kP(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,m=null===f;let y=t[i+1];y===dt&&(y=m?Tt:void 0);let E=m?yE(y,r):f===r?y:void 0;if(l&&!K_(E)&&(E=yE(u,r)),K_(E)&&(a=E,s))return a;const S=n[i+1];i=s?Ga(S):Yu(S)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=yE(u,r))}return a}function K_(n){return void 0!==n}function N(n,e=""){const t=me(),r=xt(),i=n+vt,o=r.firstCreatePass?Wl(r,i,1,e,null):r.data[i],s=VP(r,t,o,e,n);t[i]=s,_l()&&E_(r,t,s,o),_o(o,!1)}let VP=(n,e,t,r,i)=>(Lo(!0),function __(n,e){return n.createText(e)}(e[ot],r));function Ur(n){return vi("",n,""),Ur}function vi(n,e,t){const r=me(),i=Kl(r,n,e,t);return i!==dt&&function Xs(n,e,t){const r=Va(e,n);!function uS(n,e,t){n.setValue(e,t)}(n[ot],r,t)}(r,Vr(),i),vi}const ad="en-US";let oR=ad;function Lb(n,e,t,r,i){if(n=Qe(n),Array.isArray(n))for(let o=0;o<n.length;o++)Lb(n[o],e,t,r,i);else{const o=xt(),s=me(),a=mr();let u=Ku(n)?n:Qe(n.provide);const l=jS(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Ku(n)||!n.multi){const E=new Hu(l,i,ae),S=Bb(u,e,i?f:f+y,m);-1===S?(T(c(a,s),o,u),Ub(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[S]=E,s[S]=E)}else{const E=Bb(u,e,f+y,m),S=Bb(u,e,f,f+y),L=S>=0&&t[S];if(i&&!L||!i&&!(E>=0&&t[E])){T(c(a,s),o,u);const Q=function fH(n,e,t,r,i){const o=new Hu(n,t,ae);return o.multi=[],o.index=e,o.componentProviders=0,RR(o,i,r&&!t),o}(i?hH:dH,t.length,i,r,l);!i&&L&&(t[S].providerFactory=Q),Ub(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(Q),s.push(Q)}else Ub(o,n,E>-1?E:S,RR(t[i?S:E],l,!i&&r));!i&&r&&L&&t[S].componentProviders++}}}function Ub(n,e,t,r){const i=Ku(e),o=function t$(n){return!!n.useClass}(e);if(i||o){const u=(o?Qe(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function RR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Bb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function dH(n,e,t,r){return jb(this.multi,[])}function hH(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Yr(t,t[Ne],this.providerFactory.index,r);o=a.slice(0,s),jb(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],jb(i,o);return o}function jb(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Mn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function lH(n,e,t){const r=xt();if(r.firstCreatePass){const i=yi(n);Lb(t,r.data,r.blueprint,i,!0),Lb(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Xu{}class xR{}class $b extends Xu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new j1(this);const i=Or(e);this._bootstrapComponents=Js(i.bootstrap),this._r3Injector=e1(e,t,[{provide:Xu,useValue:this},{provide:k_,useValue:this.componentFactoryResolver},...r],qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zb extends xR{constructor(e){super(),this.moduleType=e}create(e){return new $b(this.moduleType,e,[])}}class MR extends Xu{constructor(e){super(),this.componentFactoryResolver=new j1(this),this.instance=null;const t=new Ul([...e.providers,{provide:Xu,useValue:this},{provide:k_,useValue:this.componentFactoryResolver}],e.parent||S_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Hb(n,e,t=null){return new MR({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let mH=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=VS(0,t.type),i=r.length>0?Hb([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=He({token:n,providedIn:"environment",factory:()=>new n(we(bo))})}return n})();function NR(n){n.getStandaloneInjector=e=>e.get(mH).getOrCreateStandaloneInjector(n)}function Gb(n,e,t){const r=_r()+n,i=me();return i[r]===dt?ys(i,r,t?e.call(t):e()):function Bf(n,e){return n[e]}(i,r)}function ec(n,e,t,r){return BR(me(),_r(),n,e,t,r)}function BR(n,e,t,r,i,o){const s=e+t;return ei(n,s,i)?ys(n,s+1,o?r.call(o,i):r(i)):function Jf(n,e){const t=n[e];return t===dt?void 0:t}(n,s+1)}function zi(n,e){const t=xt();let r;const i=n+vt;t.firstCreatePass?(r=function NH(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=qs(r.type)),a=Wr(ae);try{const u=Cl(!1),l=o();return Cl(u),function f3(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,me(),i,l),l}finally{Wr(a)}}function Hi(n,e,t){const r=n+vt,i=me(),o=function Ui(n,e){return n[e]}(i,r);return function Xf(n,e){return n[Ne].data[e].pure}(i,r)?BR(i,_r(),e,o.transform,t,o):o.transform(t)}function BH(n,e,t,r=!0){const i=e[Ne];if(function yj(n,e,t,r){const i=gr+r,o=t.length;r>0&&(t[i-1][_i]=e),r<o-gr?(e[_i]=t[i],LA(t,gr+r,e)):(t.push(e),e[_i]=null),e[gn]=t;const s=e[$s];null!==s&&t!==s&&function vj(n,e){const t=n[Hs];e[jn]!==e[gn][gn][jn]&&(n[ol]=!0),null===t?n[Hs]=[e]:t.push(e)}(s,e);const a=e[Fi];null!==a&&a.insertView(n),e[it]|=128}(i,e,n,t),r){const o=NE(t,n),s=e[ot],a=I_(s,n[po]);null!==a&&function gj(n,e,t,r,i,o){r[pn]=i,r[lr]=e,Sf(n,r,t,1,i,o)}(i,n[lr],s,e,a,o)}}Symbol;let ea=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=zH}return n})();const jH=ea,$H=class extends jH{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function UH(n,e,t,r){const i=e.tView,a=L_(n,i,t,4096&n[it]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[$s]=n[e.index];const l=n[Fi];return null!==l&&(a[Fi]=l.createEmbeddedView(i)),Cb(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Lf(i)}};function zH(){return function ey(n,e){return 4&n.type?new $H(e,n,zl(n,e)):null}(mr(),me())}let Go=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=KH}return n})();function KH(){return function YR(n,e){let t;const r=e[n.index];return kr(r)?t=r:(t=P1(r,e,null,n),e[n.index]=t,U_(e,t)),JR(t,e,n,r),new KR(t,n,e)}(mr(),me())}const QH=Go,KR=class extends QH{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zl(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(wl(e)){const t=Gu(e,this._hostLView),r=Ua(e);return new vr(t[Ne].data[r+8],t)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=QR(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,o){const s=e&&!function bf(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const k=t||{};a=k.index,r=k.injector,i=k.projectableNodes,o=k.environmentInjector||k.ngModuleRef}const u=s?e:new Uf(Dt(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const L=(s?l:this.parentInjector).get(bo,null);L&&(o=L)}Dt(u.componentType??{});const E=u.create(l,i,null,o);return this.insertImpl(E.hostView,a,false),E}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function tE(n){return kr(n[gn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[gn],f=new KR(l,l[lr],l[gn]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return BH(a,i,s,!r),e.attachToViewContainerRef(),LA(Zb(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=QR(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=v_(this._lContainer,t);r&&(u_(Zb(this._lContainer),t),PE(r[Ne],r))}detach(e){const t=this._adjustIndex(e,-1),r=v_(this._lContainer,t);return r&&null!=u_(Zb(this._lContainer),t)?new Lf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function QR(n){return n[8]}function Zb(n){return n[8]||(n[8]=[])}let JR=function XR(n,e,t,r){if(n[po])return;let i;i=8&t.type?Kt(r):function YH(n,e){const t=n[ot],r=t.createComment(""),i=Qr(e,n);return Zu(t,I_(t,i),r,function wj(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[po]=i};const ow=new Te("Application Initializer");let sw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ue(ow,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(Hf(o))t.push(o);else if(dP(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Cx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const ta=new Te("LocaleId",{providedIn:"root",factory:()=>Ue(ta,_t.Optional|_t.SkipSelf)||function S9(){return typeof $localize<"u"&&$localize.locale||ad}()});let Tx=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new b(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class x9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Dx=(()=>{class n{compileModuleSync(t){return new zb(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Js(Or(t).declarations).reduce((s,a)=>{const u=Dt(a);return u&&s.push(new Uf(u)),s},[]);return new x9(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Rx=new Te(""),iy=new Te("");let dw,cw=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dw||(function X9(n){dw=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(we(Ut),we(lw),we(iy))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),lw=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return dw?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Wa=null;const xx=new Te("AllowMultipleToken"),hw=new Te("PlatformDestroyListeners"),fw=new Te("appBootstrapListener");class Nx{constructor(e,t){this.name=e,this.token=t}}function kx(n,e,t=[]){const r=`Platform: ${e}`,i=new Te(r);return(o=[])=>{let s=pw();if(!s||s.injector.get(xx,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function n5(n){if(Wa&&!Wa.get(xx,!1))throw new O(400,!1);(function Mx(){!function qI(n){cl=n}(()=>{throw new O(600,!1)})})(),Wa=n;const e=n.get(Vx);(function Ox(n){n.get($S,null)?.forEach(t=>t())})(n)}(function Fx(n=[],e){return Xr.create({name:e,providers:[{provide:qE,useValue:"platform"},{provide:hw,useValue:new Set([()=>Wa=null])},...n]})}(a,r))}return function i5(n){const e=pw();if(!e)throw new O(401,!1);return e}()}}function pw(){return Wa?.get(Vx)??null}let Vx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function o5(n="zone.js",e){return"noop"===n?new F$:"zone.js"===n?new Ut(e):n}(r?.ngZone,function Lx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function gH(n,e,t){return new $b(n,e,t)}(t.moduleType,this.injector,function zx(n){return[{provide:Ut,useFactory:n},{provide:Mf,multi:!0,useFactory:()=>{const e=Ue(a5,{optional:!0});return()=>e.initialize()}},{provide:$x,useFactory:s5},{provide:o1,useFactory:s1}]}(()=>i)),s=o.injector.get(Ys,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{oy(this._modules,o),a.unsubscribe()})}),function Ux(n,e,t){try{const r=t();return Hf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(sw);return a.runInitializers(),a.donePromise.then(()=>(function sR(n){ki(n,"Expected localeId to be defined"),"string"==typeof n&&(oR=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ta,ad)||ad),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=Bx({},r);return function e5(n,e,t){const r=new zb(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(ld);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new O(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(hw,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(we(Xr))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Bx(n,e){return Array.isArray(e)?e.reduce(Bx,n):{...n,...e}}let ld=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ue($x),this.zoneIsStable=Ue(o1),this.componentTypes=[],this.components=[],this.isStable=Ue(Tx).hasPendingTasks.pipe(Ve(t=>t?V(!1):this.zoneIsStable),et(),de()),this._injector=Ue(bo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof WS;if(!this._injector.get(sw).done)throw!i&&function ls(n){const e=Dt(n)||er(n)||cr(n);return null!==e&&e.standalone}(t),new O(405,!1);let s;s=i?t:this._injector.get(k_).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function t5(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Xu),l=s.create(Xr.NULL,[],r||s.selector,a),f=l.location.nativeElement,m=l.injector.get(Rx,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),oy(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;oy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(fw,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new O(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $x=new Te("",{providedIn:"root",factory:()=>Ue(Ys).handleError.bind(void 0)});function s5(){const n=Ue(Ut),e=Ue(Ys);return t=>n.runOutsideAngular(()=>e.handleError(t))}let a5=(()=>{class n{constructor(){this.zone=Ue(Ut),this.applicationRef=Ue(ld)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let sy=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=c5}return n})();function c5(n){return function l5(n,e,t){if(xa(n)&&!t){const r=Fr(n.index,e);return new Lf(r,r)}return 47&n.type?new Lf(e[jn],e):null}(mr(),me(),16==(16&n))}class Zx{constructor(){}supports(e){return z_(e)}create(e){return new m5(e)}}const g5=(n,e)=>e;class m5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||g5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<Qx(r,i,o)?t:r,a=Qx(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){const E=y<o.length?o[y]:o[y]=0,S=E+y;f<=S&&S<l&&(o[y]=E+1)}o[s.previousIndex]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!z_(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function G4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new _5(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Kx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class y5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Kx{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new y5,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qx(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Yx{constructor(){}supports(e){return e instanceof Map||Tb(e)}create(){return new v5}}class v5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Tb(e)))throw new O(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new I5(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class I5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jx(){return new cy([new Zx])}let cy=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:Jx});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Jx()),deps:[[n,new l_,new Lr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new O(901,!1)}}return n})();function Xx(){return new np([new Yx])}let np=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:Xx});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Xx()),deps:[[n,new l_,new Lr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new O(901,!1)}}return n})();const w5=kx(null,"core",[]);let C5=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(we(ld))};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({})}return n})();function dd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Iw=null;function Za(){return Iw}class L5{}const Co=new Te("DocumentToken");let Ew=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ue(B5)},providedIn:"platform"})}return n})();const U5=new Te("Location Initialized");let B5=(()=>{class n extends Ew{constructor(){super(),this._doc=Ue(Co),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Za().getBaseHref(this._doc)}onPopState(t){const r=Za().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Za().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function bw(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function uM(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function na(n){return n&&"?"!==n[0]?"?"+n:n}let nc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ue(lM)},providedIn:"root"})}return n})();const cM=new Te("appBaseHref");let lM=(()=>{class n extends nc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ue(Co).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return bw(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+na(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+na(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+na(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Ew),we(cM,8))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j5=(()=>{class n extends nc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=bw(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+na(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+na(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Ew),we(cM,8))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})(),ww=(()=>{class n{constructor(t){this._subject=new zn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function H5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(uM(dM(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+na(r))}normalize(t){return n.stripTrailingSlash(function z5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,dM(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=na;static#t=this.joinWithSlash=bw;static#n=this.stripTrailingSlash=uM;static#r=this.\u0275fac=function(r){return new(r||n)(we(nc))};static#i=this.\u0275prov=He({token:n,factory:function(){return function $5(){return new ww(we(nc))}()},providedIn:"root"})}return n})();function dM(n){return n.replace(/\/index.html$/,"")}const Nw=/\s+/,IM=[];let EM=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=IM,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Nw):IM}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Nw):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Nw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(cy),ae(np),ae(ro),ae(Qs))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Rq{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Es=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Rq(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),wM(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{wM(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Go),ae(ea),ae(cy))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function wM(n,e){n.context.$implicit=e.item}let Zo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){CM("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){CM("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Go),ae(ea))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class xq{constructor(){this.$implicit=null,this.ngIf=null}}function CM(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${qe(e)}'.`)}class Oq{createSubscription(e,t){return Mm(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Mm(()=>e.unsubscribe())}}class kq{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Fq=new kq,Vq=new Oq;let rc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Hf(t))return Fq;if(dP(t))return Vq;throw function Ko(n,e){return new O(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(ae(sy,16))};static#t=this.\u0275pipe=ur({name:"async",type:n,pure:!1,standalone:!0})}return n})(),DM=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=AM}transform(t,r=AM){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const i=this.differ.diff(t),o=r!==this.compareFn;return i&&(this.keyValues=[],i.forEachItem(s=>{this.keyValues.push(function Qq(n,e){return{key:n,value:e}}(s.key,s.currentValue))})),(i||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static#e=this.\u0275fac=function(r){return new(r||n)(ae(np,16))};static#t=this.\u0275pipe=ur({name:"keyvalue",type:n,pure:!1,standalone:!0})}return n})();function AM(n,e){const t=n.key,r=e.key;if(t===r)return 0;if(void 0===t)return 1;if(void 0===r)return-1;if(null===t)return 1;if(null===r)return-1;if("string"==typeof t&&"string"==typeof r)return t<r?-1:1;if("number"==typeof t&&"number"==typeof r)return t-r;if("boolean"==typeof t&&"boolean"==typeof r)return t<r?-1:1;const i=String(t),o=String(r);return i==o?0:i<o?-1:1}let e6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({})}return n})();function Ey(n){return"server"===n}let i6=(()=>{class n{static#e=this.\u0275prov=He({token:n,providedIn:"root",factory:()=>new o6(we(Co),window)})}return n})();class o6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function s6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class R6 extends L5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Bw extends R6{static makeCurrent(){!function V5(n){Iw||(Iw=n)}(new Bw)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function x6(){return sp=sp||document.querySelector("base"),sp?sp.getAttribute("href"):null}();return null==t?null:function M6(n){Cy=Cy||document.createElement("a"),Cy.setAttribute("href",n);const e=Cy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Sq(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Cy,sp=null,O6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const jw=new Te("EventManagerPlugins");let NM=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(we(jw),we(Ut))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();class OM{constructor(e){this._doc=e}}const $w="ng-app-id";let kM=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ey(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${$w}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute($w),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute($w,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Co),we(P_),we(zS,8),we(Uo))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const zw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hw=/%COMP%/g,L6=new Te("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function VM(n,e){return e.map(t=>t.replace(Hw,n))}let LM=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ey(a),this.defaultRenderer=new qw(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jn.ShadowDom&&(r={...r,encapsulation:Jn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof BM?i.applyToHost(t):i instanceof Gw&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Jn.Emulated:o=new BM(u,l,r,this.appId,f,s,a,m);break;case Jn.ShadowDom:return new $6(u,l,t,r,s,a,this.nonce,m);default:o=new Gw(u,l,r,f,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(we(NM),we(kM),we(P_),we(L6),we(Co),we(Uo),we(Ut),we(zS))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();class qw{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(zw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(UM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(UM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=zw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=zw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(za.DashCase|za.Important)?e.style.setProperty(t,r,i&za.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&za.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Za().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function UM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $6 extends qw{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=VM(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gw extends qw{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?VM(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class BM extends Gw{constructor(e,t,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=function U6(n){return"_ngcontent-%COMP%".replace(Hw,n)}(l),this.hostAttr=function B6(n){return"_nghost-%COMP%".replace(Hw,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let z6=(()=>{class n extends OM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Co))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const jM=["alt","control","meta","shift"],H6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let G6=(()=>{class n extends OM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Za().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),jM.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=H6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),jM.forEach(s=>{s!==i&&(0,q6[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(we(Co))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();const Q6=kx(w5,"browser",[{provide:Uo,useValue:"browser"},{provide:$S,useValue:function W6(){Bw.makeCurrent()},multi:!0},{provide:Co,useFactory:function K6(){return function xj(n){FE=n}(document),document},deps:[]}]),Y6=new Te(""),HM=[{provide:iy,useClass:class N6{addToWindow(e){Zt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new O(5103,!1);return o},Zt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zt.getAllAngularRootElements=()=>e.getAllRootElements(),Zt.frameworkStabilizers||(Zt.frameworkStabilizers=[]),Zt.frameworkStabilizers.push(r=>{const i=Zt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Za().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Rx,useClass:cw,deps:[Ut,lw,iy]},{provide:cw,useClass:cw,deps:[Ut,lw,iy]}],qM=[{provide:qE,useValue:"root"},{provide:Ys,useFactory:function Z6(){return new Ys},deps:[]},{provide:jw,useClass:z6,multi:!0,deps:[Co,Ut,Uo]},{provide:jw,useClass:G6,multi:!0,deps:[Co]},LM,kM,NM,{provide:KS,useExisting:LM},{provide:class a6{},useClass:O6,deps:[]},[]];let J6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:P_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(we(Y6,12))};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({providers:[...qM,...HM],imports:[e6,C5]})}return n})(),GM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(we(Co))};static#t=this.\u0275prov=He({token:n,factory:function(r){let i=null;return i=r?new r:function e8(){return new GM(we(Co))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:s8}=Array,{getPrototypeOf:a8,prototype:u8,keys:c8}=Object;function QM(n){if(1===n.length){const e=n[0];if(s8(e))return{args:e,keys:null};if(function l8(n){return n&&"object"==typeof n&&a8(n)===u8}(e)){const t=c8(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:d8}=Array;function YM(n){return Oe(e=>function h8(n,e){return d8(e)?n(...e):n(e)}(n,e))}function JM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zw(...n){const e=Un(n),t=Mo(n),{args:r,keys:i}=QM(n);if(0===r.length)return C([],e);const o=new ct(function f8(n,e,t=En){return r=>{XM(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)XM(e,()=>{const l=C(n[u],e);let f=!1;l.subscribe(xe(r,m=>{o[u]=m,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>JM(i,s):En));return t?o.pipe(YM(t)):o}function XM(n,e,t){n?bn(t,n,e):e()}const Ty=De(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Kw(...n){return function p8(){return Cr(1)}()(C(n,Un(n)))}function eN(n){return new ct(e=>{Vt(n()).subscribe(e)})}function ap(n,e){const t=R(n)?n:()=>n,r=i=>i.error(t());return new ct(e?i=>e.schedule(r,0,i):r)}function Qw(){return ie((n,e)=>{let t=null;n._refCount++;const r=xe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tN extends ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,he(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;const t=this.getSubject();e.add(this.source.subscribe(xe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return Qw()(this)}}function fd(n){return n<=0?()=>Ln:ie((e,t)=>{let r=0;e.subscribe(xe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Dy(...n){const e=Un(n);return ie((t,r)=>{(e?Kw(n,t,e):Kw(n,t)).subscribe(r)})}function Qo(n,e){return ie((t,r)=>{let i=0;t.subscribe(xe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ay(n){return ie((e,t)=>{let r=!1;e.subscribe(xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function nN(n=g8){return ie((e,t)=>{let r=!1;e.subscribe(xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function g8(){return new Ty}function Qa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qo((i,o)=>n(i,o,r)):En,fd(1),t?Ay(e):nN(()=>new Ty))}function up(n,e){return R(e)?on(n,e,1):on(n,1)}function Br(n,e,t){const r=R(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(xe(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):En}function bs(n){return ie((e,t)=>{let o,r=null,i=!1;r=e.subscribe(xe(t,void 0,void 0,s=>{o=Vt(n(s,bs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Sy(n,e){return ie(function m8(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(xe(s,f=>{const m=l++;u=a?n(u,f,m):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(n,e,arguments.length>=2,!0))}function Yw(n){return n<=0?()=>Ln:ie((e,t)=>{let r=[];e.subscribe(xe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ya(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const pt="primary",cp=Symbol("RouteTitle");class I8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pd(n){return new I8(n)}function E8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ws(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!rN(n[i],e[i]))return!1;return!0}function rN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function iN(n){return n.length>0?n[n.length-1]:null}function Ja(n){return function o8(n){return!!n&&(n instanceof ct||R(n.lift)&&R(n.subscribe))}(n)?n:Hf(n)?C(Promise.resolve(n)):V(n)}const w8={exact:function aN(n,e,t){if(!ic(n.segments,e.segments)||!Py(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!aN(n.children[r],e.children[r],t))return!1;return!0},subset:uN},oN={exact:function C8(n,e){return ws(n,e)},subset:function T8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rN(n[t],e[t]))},ignored:()=>!0};function sN(n,e,t){return w8[t.paths](n.root,e.root,t.matrixParams)&&oN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uN(n,e,t){return cN(n,e,e.segments,t)}function cN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ic(i,t)||e.hasChildren()||!Py(i,t,r))}if(n.segments.length===t.length){if(!ic(n.segments,t)||!Py(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ic(n.segments,i)&&Py(n.segments,i,r)&&n.children[pt])&&cN(n.children[pt],e,o,r)}}function Py(n,e,t){return e.every((r,i)=>oN[t](n[i].parameters,r.parameters))}class gd{constructor(e=new en([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pd(this.queryParams)),this._queryParamMap}toString(){return S8.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ry(this)}}class lp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pd(this.parameters)),this._parameterMap}toString(){return hN(this)}}function ic(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let dp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return new Jw},providedIn:"root"})}return n})();class Jw{parse(e){const t=new U8(e);return new gd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${hp(e.root,!0)}`,r=function x8(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${xy(t)}=${xy(i)}`).join("&"):`${xy(t)}=${xy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function P8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const S8=new Jw;function Ry(n){return n.segments.map(e=>hN(e)).join("/")}function hp(n,e){if(!n.hasChildren())return Ry(n);if(e){const t=n.children[pt]?hp(n.children[pt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==pt&&r.push(`${i}:${hp(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function A8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===pt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===pt?[hp(n.children[pt],!1)]:[`${i}:${hp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pt]?`${Ry(n)}/${t[0]}`:`${Ry(n)}/(${t.join("//")})`}}function lN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xy(n){return lN(n).replace(/%3B/gi,";")}function Xw(n){return lN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function My(n){return decodeURIComponent(n)}function dN(n){return My(n.replace(/\+/g,"%20"))}function hN(n){return`${Xw(n.path)}${function R8(n){return Object.keys(n).map(e=>`;${Xw(e)}=${Xw(n[e])}`).join("")}(n.parameters)}`}const M8=/^[^\/()?;#]+/;function e0(n){const e=n.match(M8);return e?e[0]:""}const N8=/^[^\/()?;=#]+/,k8=/^[^=?&#]+/,V8=/^[^&#]+/;class U8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pt]=new en(e,t)),r}parseSegment(){const e=e0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new lp(My(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function O8(n){const e=n.match(N8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=e0(this.remaining);i&&(r=i,this.capture(r))}e[My(t)]=My(r)}parseQueryParam(e){const t=function F8(n){const e=n.match(k8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function L8(n){const e=n.match(V8);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=dN(t),o=dN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=e0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new O(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=pt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[pt]:new en([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}}function fN(n){return n.segments.length>0?new en([],{[pt]:n}):n}function pN(n){const e={};for(const r of Object.keys(n.children)){const o=pN(n.children[r]);if(r===pt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function B8(n){if(1===n.numberOfChildren&&n.children[pt]){const e=n.children[pt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function oc(n){return n instanceof gd}function gN(n){let e;const i=fN(function t(o){const s={};for(const u of o.children){const l=t(u);s[u.outlet]=l}const a=new en(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function mN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return t0(i,i,i,t,r);const o=function $8(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new yN(t,e,r)}(e);if(o.toRoot())return t0(i,i,new en([],{}),t,r);const s=function z8(n,e,t){if(n.isAbsolute)return new Oy(e,!0,0);if(!t)return new Oy(e,!1,NaN);if(null===t.parent)return new Oy(t,!0,0);const r=Ny(n.commands[0])?0:1;return function H8(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Oy(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?pp(s.segmentGroup,s.index,o.commands):vN(s.segmentGroup,s.index,o.commands);return t0(i,s.segmentGroup,a,t,r)}function Ny(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fp(n){return"object"==typeof n&&null!=n&&n.outlets}function t0(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),s=n===e?t:_N(n,e,t);const a=fN(pN(s));return new gd(a,o,i)}function _N(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:_N(o,e,t)}),new en(n.segments,r)}class yN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ny(r[0]))throw new O(4003,!1);const i=r.find(fp);if(i&&i!==iN(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function vN(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return pp(n,e,t);const r=function G8(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(fp(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!EN(u,l,s))return o;r+=2}else{if(!EN(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new en(n.segments.slice(0,r.pathIndex),{});return o.children[pt]=new en(n.segments.slice(r.pathIndex),n.children),pp(o,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?n0(n,e,t):r.match?pp(n,0,i):n0(n,e,t)}function pp(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function q8(n){return fp(n[0])?n[0].outlets:{[pt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==pt)&&n.children[pt]&&1===n.numberOfChildren&&0===n.children[pt].segments.length){const o=pp(n.children[pt],e,t);return new en(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=vN(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new en(n.segments,i)}}function n0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(fp(o)){const u=W8(o.outlets);return new en(r,u)}if(0===i&&Ny(t[0])){r.push(new lp(n.segments[e].path,IN(t[0]))),i++;continue}const s=fp(o)?o.outlets[pt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ny(a)?(r.push(new lp(s,IN(a))),i+=2):(r.push(new lp(s,{})),i++)}return new en(r,{})}function W8(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=n0(new en([],{}),0,r))}),e}function IN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function EN(n,e,t){return n==t.path&&ws(e,t.parameters)}const gp="imperative";class Cs{constructor(e,t){this.id=e,this.url=t}}class ky extends Cs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xa extends Cs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mp extends Cs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class md extends Cs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Fy extends Cs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bN extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z8 extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K8 extends Cs{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q8 extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y8 extends Cs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class X8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eG{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class r0{}class o0{constructor(e){this.url=e}}class iG{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _p,this.attachRef=null}}let _p=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new iG,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class CN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=s0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=s0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=a0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return a0(e,this._root).map(t=>t.value)}}function s0(n,e){if(n===e.value)return e;for(const t of e.children){const r=s0(n,t);if(r)return r}return null}function a0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=a0(n,t);if(r.length)return r.unshift(e),r}return[]}class oa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _d(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class TN extends CN{constructor(e,t){super(e),this.snapshot=t,u0(this,e)}toString(){return this.snapshot.toString()}}function DN(n,e){const t=function oG(n,e){const s=new Vy([],{},{},"",{},pt,e,null,{});return new SN("",new oa(s,[]))}(0,e),r=new b([new lp("",{})]),i=new b({}),o=new b({}),s=new b({}),a=new b(""),u=new jr(r,i,s,a,o,pt,e,t.root);return u.snapshot=t.root,new TN(new oa(u,[]),t)}class jr{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(l=>l[cp]))??V(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>pd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>pd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function AN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function sG(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vy{get title(){return this.data?.[cp]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class SN extends CN{constructor(e,t){super(t),this.url=e,u0(this,t)}toString(){return PN(this._root)}}function u0(n,e){e.value._routerState=n,e.children.forEach(t=>u0(n,t))}function PN(n){const e=n.children.length>0?` { ${n.children.map(PN).join(", ")} } `:"";return`${n.value}${e}`}function c0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ws(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ws(e.params,t.params)||n.paramsSubject.next(t.params),function b8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ws(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ws(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function l0(n,e){const t=ws(n.params,e.params)&&function D8(n,e){return ic(n,e)&&n.every((t,r)=>ws(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||l0(n.parent,e.parent))}let d0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new zn,this.deactivateEvents=new zn,this.attachEvents=new zn,this.detachEvents=new zn,this.parentContexts=Ue(_p),this.location=Ue(Go),this.changeDetector=Ue(sy),this.environmentInjector=Ue(bo),this.inputBinder=Ue(Ly,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new aG(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Li]})}return n})();class aG{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jr?this.route:e===_p?this.childContexts:this.parent.get(e,t)}}const Ly=new Te("");let RN=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Zw([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],u)=>(a={...o,...s,...a},0===u?V(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function F5(n){const e=Dt(n);if(!e)return null;const t=new Uf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function yp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function cG(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yp(n,r,i);return yp(n,r)})}(n,e,t);return new oa(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yp(n,a)),s}}const r=function lG(n){return new jr(new b(n.url),new b(n.params),new b(n.queryParams),new b(n.fragment),new b(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>yp(n,o));return new oa(r,i)}}const h0="ngNavigationCancelingError";function xN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=oc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=MN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function MN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[h0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function NN(n){return n&&n[h0]}let ON=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["ng-component"]],standalone:!0,features:[NR],decls:1,vars:0,template:function(r,i){1&r&&_e(0,"router-outlet")},dependencies:[d0],encapsulation:2})}return n})();function f0(n){const e=n.children&&n.children.map(f0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pt&&(t.component=ON),t}function Yo(n){return n.outlet||pt}function vp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class yG{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),c0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_d(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_d(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=_d(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=_d(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rG(o.value.snapshot))}),e.children.length&&this.forwardEvent(new tG(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(c0(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),c0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=vp(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class kN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Uy{constructor(e,t){this.component=e,this.route=t}}function vG(n,e,t){const r=n._root;return Ip(r,e?e._root:null,t,[r.value])}function yd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function FI(n){return null!==Bc(n)}(n)?e.get(n):n:r}function Ip(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_d(e);return n.children.forEach(s=>{(function EG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function bG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ic(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ic(n.url,e.url)||!ws(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!l0(n,e)||!ws(n.queryParams,e.queryParams);default:return!l0(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new kN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ip(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uy(a.outlet.component,s))}else s&&Ep(e,a,i),i.canActivateChecks.push(new kN(r)),Ip(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ep(a,t.getContext(s),i)),i}function Ep(n,e,t){const r=_d(n),i=n.value;Object.entries(r).forEach(([o,s])=>{Ep(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Uy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function bp(n){return"function"==typeof n}function FN(n){return n instanceof Ty||"EmptyError"===n?.name}const By=Symbol("INITIAL_VALUE");function vd(){return Ve(n=>Zw(n.map(e=>e.pipe(fd(1),Dy(By)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===By)return By;if(!1===t||t instanceof gd)return t}return!0}),Qo(e=>e!==By),fd(1)))}function VN(n){return function di(...n){return hi(n)}(Br(e=>{if(oc(e))throw xN(0,e)}),Oe(e=>!0===e))}class jy{constructor(e){this.segmentGroup=e||null}}class LN{constructor(e){this.urlTree=e}}function Id(n){return ap(new jy(n))}function UN(n){return ap(new LN(n))}class $G{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new O(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return V(r);if(i.numberOfChildren>1||!i.children[pt])return ap(new O(4e3,!1));i=i.children[pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new gd(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new en(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new O(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const p0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zG(n,e,t,r,i){const o=g0(n,e,t);return o.matched?(r=function hG(n,e){return n.providers&&!n._injector&&(n._injector=Hb(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function UG(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?V(i.map(s=>{const a=yd(s,n);return Ja(function SG(n){return n&&bp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(vd(),VN()):V(!0)}(r,e,t).pipe(Oe(s=>!0===s?o:{...p0}))):V(o)}function g0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...p0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||E8)(t,n,e);if(!i)return{...p0};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BN(n,e,t,r){return t.length>0&&function GG(n,e,t){return t.some(r=>$y(n,e,r)&&Yo(r)!==pt)}(n,t,r)?{segmentGroup:new en(e,qG(r,new en(t,n.children))),slicedSegments:[]}:0===t.length&&function WG(n,e,t){return t.some(r=>$y(n,e,r))}(n,t,r)?{segmentGroup:new en(n.segments,HG(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new en(n.segments,n.children),slicedSegments:t}}function HG(n,e,t,r,i){const o={};for(const s of r)if($y(n,t,s)&&!i[Yo(s)]){const a=new en([],{});o[Yo(s)]=a}return{...i,...o}}function qG(n,e){const t={};t[pt]=e;for(const r of n)if(""===r.path&&Yo(r)!==pt){const i=new en([],{});t[Yo(r)]=i}return t}function $y(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class YG{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new $G(this.urlSerializer,this.urlTree)}noMatchError(e){return new O(4002,!1)}recognize(){const e=BN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pt).pipe(bs(t=>{if(t instanceof LN)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof jy?this.noMatchError(t):t}),Oe(t=>{const r=new Vy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,{}),i=new oa(r,t),o=new SN("",i),s=function j8(n,e,t=null,r=null){return mN(gN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,pt).pipe(bs(r=>{throw r instanceof jy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=AN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return C(i).pipe(up(o=>{const s=r.children[o],a=function mG(n,e){const t=n.filter(r=>Yo(r)===e);return t.push(...n.filter(r=>Yo(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),Sy((o,s)=>(o.push(...s),o)),Ay(null),function _8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qo((i,o)=>n(i,o,r)):En,Yw(1),t?Ay(e):nN(()=>new Ty))}(),on(o=>{if(null===o)return Id(r);const s=jN(o);return function JG(n){n.sort((e,t)=>e.value.outlet===pt?-1:t.value.outlet===pt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),V(s)}))}processSegment(e,t,r,i,o,s){return C(t).pipe(up(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(bs(u=>{if(u instanceof jy)return V(null);throw u}))),Qa(a=>!!a),bs(a=>{if(FN(a))return function KG(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?V([]):Id(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function ZG(n,e,t,r){return!!(Yo(n)===r||r!==pt&&$y(e,t,n))&&("**"===n.path||g0(e,n,t).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):Id(i):Id(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?UN(o):this.applyRedirects.lineralizeSegments(r,o).pipe(on(s=>{const a=new en(s,{});return this.processSegment(e,t,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=g0(t,i,o);if(!a)return Id(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?UN(m):this.applyRedirects.lineralizeSegments(i,m).pipe(on(y=>this.processSegment(e,r,t,y.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?iN(i).parameters:{};a=V({snapshot:new Vy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$N(r),Yo(r),r.component??r._loadedComponent??null,r,zN(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=zG(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:l,remainingSegments:f,parameters:m})=>u?{snapshot:new Vy(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$N(r),Yo(r),r.component??r._loadedComponent??null,r,zN(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(Ve(u=>null===u?Id(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ve(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:E}=u,{segmentGroup:S,slicedSegments:k}=BN(t,y,E,l);if(0===k.length&&S.hasChildren())return this.processChildren(f,l,S).pipe(Oe(Q=>null===Q?null:[new oa(m,Q)]));if(0===l.length&&0===k.length)return V([new oa(m,[])]);const L=Yo(r)===o;return this.processSegment(f,l,S,k,L?pt:o,!0).pipe(Oe(Q=>[new oa(m,Q)]))}))))}getChildConfig(e,t,r){return t.children?V({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?V({routes:t._loadedRoutes,injector:t._loadedInjector}):function LG(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?V(!0):V(i.map(s=>{const a=yd(s,n);return Ja(function CG(n){return n&&bp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(vd(),VN())}(e,t,r).pipe(on(i=>i?this.configLoader.loadChildren(e,t).pipe(Br(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function jG(n){return ap(MN(!1,3))}())):V({routes:[],injector:e})}}function XG(n){const e=n.value.routeConfig;return e&&""===e.path}function jN(n){const e=[],t=new Set;for(const r of n){if(!XG(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=jN(r.children);e.push(new oa(r.value,i))}return e.filter(r=>!t.has(r))}function $N(n){return n.data||{}}function zN(n){return n.resolve||{}}function HN(n){return"string"==typeof n.title||null===n.title}function m0(n){return Ve(e=>{const t=n(e);return t?C(t).pipe(Oe(()=>e)):V(e)})}const Ed=new Te("ROUTES");let _0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ue(Dx)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return V(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ja(t.loadComponent()).pipe(Oe(qN),Br(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ya(()=>{this.componentLoaders.delete(t)})),i=new tN(r,()=>new se).pipe(Qw());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return V({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function sW(n,e,t,r){return Ja(n.loadChildren()).pipe(Oe(qN),on(i=>i instanceof xR||Array.isArray(i)?V(i):C(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Ed,[],{optional:!0,self:!0}).flat()),{routes:s.map(f0),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Ya(()=>{this.childrenLoaders.delete(r)})),s=new tN(o,()=>new se).pipe(Qw());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qN(n){return function aW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let zy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new se,this.transitionAbortSubject=new se,this.configLoader=Ue(_0),this.environmentInjector=Ue(bo),this.urlSerializer=Ue(dp),this.rootContexts=Ue(_p),this.inputBindingEnabled=null!==Ue(Ly,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>V(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new X8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new J8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new b({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qo(o=>0!==o.id),Oe(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{this.currentTransition=o;let s=!1,a=!1;return V(o).pipe(Br(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ve(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new md(u.id,this.urlSerializer.serialize(u.rawUrl),y,0)),u.resolve(null),Ln}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return V(u).pipe(Ve(y=>{const E=this.transitions?.getValue();return this.events.next(new ky(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?Ln:Promise.resolve(y)}),function eW(n,e,t,r,i,o){return on(s=>function QG(n,e,t,r,i,o,s="emptyOnly"){return new YG(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Oe(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Br(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const E=new bN(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:y,extractedUrl:E,source:S,restoredState:k,extras:L}=u,Q=new ky(y,this.urlSerializer.serialize(E),S,k);this.events.next(Q);const z=DN(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:z,urlAfterRedirects:E,extras:{...L,skipLocationChange:!1,replaceUrl:!1}},V(o)}{const y="";return this.events.next(new md(u.id,this.urlSerializer.serialize(u.extractedUrl),y,1)),u.resolve(null),Ln}}),Br(u=>{const l=new Z8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Oe(u=>(this.currentTransition=o={...u,guards:vG(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function RG(n,e){return on(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?V({...t,guardsResult:!0}):function xG(n,e,t,r){return C(n).pipe(on(i=>function VG(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?V(o.map(a=>{const u=vp(e)??i,l=yd(a,u);return Ja(function AG(n){return n&&bp(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(Qa())})).pipe(vd()):V(!0)}(i.component,i.route,t,e,r)),Qa(i=>!0!==i,!0))}(s,r,i,n).pipe(on(a=>a&&function wG(n){return"boolean"==typeof n}(a)?function MG(n,e,t,r){return C(e).pipe(up(i=>Kw(function OG(n,e){return null!==n&&e&&e(new eG(n)),V(!0)}(i.route.parent,r),function NG(n,e){return null!==n&&e&&e(new nG(n)),V(!0)}(i.route,r),function FG(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function IG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>eN(()=>V(s.guards.map(u=>{const l=vp(s.node)??t,f=yd(u,l);return Ja(function DG(n){return n&&bp(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Qa())})).pipe(vd())));return V(o).pipe(vd())}(n,i.path,t),function kG(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return V(!0);const i=r.map(o=>eN(()=>{const s=vp(e)??t,a=yd(o,s);return Ja(function TG(n){return n&&bp(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Qa())}));return V(i).pipe(vd())}(n,i.route,t))),Qa(i=>!0!==i,!0))}(r,o,n,e):V(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Br(u=>{if(o.guardsResult=u.guardsResult,oc(u.guardsResult))throw xN(0,u.guardsResult);const l=new K8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Qo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),m0(u=>{if(u.guards.canActivateChecks.length)return V(u).pipe(Br(l=>{const f=new Q8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),Ve(l=>{let f=!1;return V(l).pipe(function tW(n,e){return on(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return V(t);let o=0;return C(i).pipe(up(s=>function nW(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!HN(i)&&(o[cp]=i.title),function rW(n,e,t,r){const i=function iW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return V({});const o={};return C(i).pipe(on(s=>function oW(n,e,t,r){const i=vp(e)??r,o=yd(n,i);return Ja(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Qa(),Br(a=>{o[s]=a}))),Yw(1),function y8(n){return Oe(()=>n)}(o),bs(s=>FN(s)?Ln:ap(s)))}(o,n,e,r).pipe(Oe(s=>(n._resolvedData=s,n.data=AN(n,t).resolve,i&&HN(i)&&(n.data[cp]=i.title),null)))}(s.route,r,n,e)),Br(()=>o++),Yw(1),on(s=>o===i.length?V(t):Ln))})}(t.paramsInheritanceStrategy,this.environmentInjector),Br({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Br(l=>{const f=new Y8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),m0(u=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Br(y=>{f.component=y}),Oe(()=>{})));for(const y of f.children)m.push(...l(y));return m};return Zw(l(u.targetSnapshot.root)).pipe(Ay(),fd(1))}),m0(()=>this.afterPreactivation()),Oe(u=>{const l=function uG(n,e,t){const r=yp(n,e._root,t?t._root:void 0);return new TN(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),Br(()=>{this.events.next(new r0)}),((n,e,t,r)=>Oe(i=>(new yG(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),fd(1),Br({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function v8(n){return ie((e,t)=>{Vt(n).subscribe(xe(t,()=>t.complete(),ze)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Br(u=>{throw u}))),Ya(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),bs(u=>{if(a=!0,NN(u))this.events.next(new mp(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function dG(n){return NN(n)&&oc(n.url)}(u)?this.events.next(new o0(u.url)):o.resolve(!1);else{this.events.next(new Fy(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(l){o.reject(l)}}return Ln}))}))}cancelNavigationTransition(t,r,i){const o=new mp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GN(n){return n!==gp}let WN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===pt);return r}getResolvedTitleForRoute(t){return t.data[cp]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ue(uW)},providedIn:"root"})}return n})(),uW=(()=>{class n extends WN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(we(GM))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ue(dW)},providedIn:"root"})}return n})();class lW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let dW=(()=>{class n extends lW{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=dr(n)))(i||n)}}();static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Hy=new Te("",{providedIn:"root",factory:()=>({})});let hW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:function(){return Ue(fW)},providedIn:"root"})}return n})(),fW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wp||{});function ZN(n,e){n.events.pipe(Qo(t=>t instanceof Xa||t instanceof mp||t instanceof Fy||t instanceof md),Oe(t=>t instanceof Xa||t instanceof md?wp.COMPLETE:t instanceof mp&&(0===t.code||1===t.code)?wp.REDIRECTING:wp.FAILED),Qo(t=>t!==wp.REDIRECTING),fd(1)).subscribe(()=>{e()})}function pW(n){throw n}function gW(n,e,t){return e.parse("/")}const mW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_W={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ue(Cx),this.isNgZoneEnabled=!1,this._events=new se,this.options=Ue(Hy,{optional:!0})||{},this.pendingTasks=Ue(Tx),this.errorHandler=this.options.errorHandler||pW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||gW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ue(hW),this.routeReuseStrategy=Ue(cW),this.titleStrategy=Ue(WN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ue(Ed,{optional:!0})?.flat()??[],this.navigationTransitions=Ue(zy),this.urlSerializer=Ue(dp),this.location=Ue(ww),this.componentInputBindingEnabled=!!Ue(Ly,{optional:!0}),this.eventsSubscription=new Ot,this.isNgZoneEnabled=Ue(Ut)instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new gd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=DN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(KN(r)&&this._events.next(r));if(r instanceof ky)GN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof md)this.rawUrlTree=i.rawUrl;else if(r instanceof bN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof r0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof mp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof o0){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||GN(i.source)};this.scheduleNavigation(o,gp,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Fy&&this.restoreHistory(i,!0),r instanceof Xa&&(this.navigated=!0),KN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),gp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(f0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}null!==f&&(f=this.removeEmptyProps(f));try{m=gN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return mN(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=oc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,gp,null,r)}navigate(t,r={skipLocationChange:!1}){return function yW(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new O(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...mW}:!1===r?{..._W}:r,oc(t))return sN(this.currentUrlTree,t,i);const o=this.parseUrl(t);return sN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return ZN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KN(n){return!(n instanceof r0||n instanceof o0)}let Cp=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new se,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Xa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function NS(n,e,t){return function Jj(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?MS:ji}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Gi),ae(jr),function ja(n){return function $(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Kc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(mr(),n)}("tabindex"),ae(Qs),ae(ro),ae(nc))};static#t=this.\u0275dir=Je({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ft("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Bo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",dd],skipLocationChange:["skipLocationChange","skipLocationChange",dd],replaceUrl:["replaceUrl","replaceUrl",dd],routerLink:"routerLink"},standalone:!0,features:[W1,Li]})}return n})();class QN{}let EW=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Qo(t=>t instanceof Xa),up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Hb(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return C(i).pipe(Cr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):V(null);const o=i.pipe(on(s=>null===s?V(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?C([o,this.loader.loadComponent(r)]).pipe(Cr()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(we(Gi),we(Dx),we(bo),we(QN),we(_0))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const y0=new Te("");let YN=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ky?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof md&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function I1(){throw new Error("invalid")}()};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac})}return n})();function sa(n,e){return{\u0275kind:n,\u0275providers:e}}function XN(){const n=Ue(Xr);return e=>{const t=n.get(ld);if(e!==t.components[0])return;const r=n.get(Gi),i=n.get(eO);1===n.get(v0)&&r.initialNavigation(),n.get(tO,null,_t.Optional)?.setUpPreloading(),n.get(y0,null,_t.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const eO=new Te("",{factory:()=>new se}),v0=new Te("",{providedIn:"root",factory:()=>1}),tO=new Te("");function TW(n){return sa(0,[{provide:tO,useExisting:EW},{provide:QN,useExisting:n}])}const nO=new Te("ROUTER_FORROOT_GUARD"),AW=[ww,{provide:dp,useClass:Jw},Gi,_p,{provide:jr,useFactory:function JN(n){return n.routerState.root},deps:[Gi]},_0,[]];function SW(){return new Nx("Router",Gi)}let I0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[AW,[],{provide:Ed,multi:!0,useValue:t},{provide:nO,useFactory:MW,deps:[[Gi,new Lr,new l_]]},{provide:Hy,useValue:r||{}},r?.useHash?{provide:nc,useClass:j5}:{provide:nc,useClass:lM},{provide:y0,useFactory:()=>{const n=Ue(i6),e=Ue(Ut),t=Ue(Hy),r=Ue(zy),i=Ue(dp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new YN(i,r,n,e,t)}},r?.preloadingStrategy?TW(r.preloadingStrategy).\u0275providers:[],{provide:Nx,multi:!0,useFactory:SW},r?.initialNavigation?NW(r):[],r?.bindToComponentInputs?sa(8,[RN,{provide:Ly,useExisting:RN}]).\u0275providers:[],[{provide:rO,useFactory:XN},{provide:fw,multi:!0,useExisting:rO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ed,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(we(nO,8))};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({})}return n})();function MW(n){return"guarded"}function NW(n){return["disabled"===n.initialNavigation?sa(3,[{provide:ow,multi:!0,useFactory:()=>{const e=Ue(Gi);return()=>{e.setUpLocationChangeListener()}}},{provide:v0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?sa(2,[{provide:v0,useValue:0},{provide:ow,multi:!0,deps:[Xr],useFactory:e=>{const t=e.get(U5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Gi),o=e.get(eO);ZN(i,()=>{r(!0)}),e.get(zy).afterPreactivation=()=>(r(!0),o.closed?V(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const rO=new Te("");var Gn=Ke(534);(0,Gn.registerVersion)("firebase","10.12.2","app");class VW extends Ot{constructor(e,t){super()}schedule(e,t=0){return this}}const qy={setInterval(n,e,...t){const{delegate:r}=qy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=qy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class iO extends VW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return qy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&qy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$e(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const E0={now:()=>(E0.delegate||Date).now(),delegate:void 0};class Tp{constructor(e,t=Tp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Tp.now=E0.now;class oO extends Tp{constructor(e,t=Tp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const BW=new class UW extends oO{}(class LW extends iO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),b0=new oO(iO),aa=new Hl("ANGULARFIRE2_VERSION");function w0(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const Gy=(n,e)=>{const t=e?[e]:(0,Gn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class Dp{constructor(){return Gy(jW)}}const jW="app-check";function bd(){}class sO{zone;delegate;constructor(e,t=BW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class $W{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bd,{},bd,bd)),t.pipe(Br({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sO(Zone.current)),this.insideAngular=t.run(()=>new sO(Zone.current,b0)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(we(Ut))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function sc(n){return Cd().ngZone.run(()=>n())}function aO(n){return n.pipe(wn(Cd().outsideAngular))}function wi(n){return function HW(n){return function(t){return(t=t.lift(new $W(n.ngZone))).pipe(Tr(n.outsideAngular),wn(n.insideAngular))}}(Cd())(n)}const qW=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),sc(()=>n.apply(void 0,r))},C0=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||=sc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bd,{},bd,bd))),r[o]=qW(r[o],t));const i=function zW(n){return Cd().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ct){const o=Cd();return i.pipe(Tr(o.outsideAngular),wn(o.insideAngular))}return sc(()=>i)}return i instanceof ct?i.pipe(wi):i instanceof Promise?sc(()=>new Promise((o,s)=>i.then(a=>sc(()=>o(a)),a=>sc(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:sc(()=>i)};var Jo=Ke(106);Jo.Z.registerVersion("firebase","10.12.2","app-compat");const ZW=["ngOnDestroy"];class uO{constructor(e){return e}}const Ap=new Te("angularfire2.app.options"),Sp=new Te("angularfire2.app.name");function Wy(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Jo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Jo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;YW("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new uO(s)}const YW=(n,...e)=>{},JW={provide:uO,useFactory:Wy,deps:[Ap,Ut,[new Lr,Sp]]};let XW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ap,useValue:t},{provide:Sp,useValue:r}]}}constructor(t){Jo.Z.registerVersion("angularfire",aa.full,"core"),Jo.Z.registerVersion("angularfire",aa.full,"app-compat"),Jo.Z.registerVersion("angular",ob.full,t.toString())}static \u0275fac=function(r){return new(r||n)(we(Uo))};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[JW]})}return n})();function T0(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function e7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(cO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${t7?" You may need to reload as Firebase is not HMR aware.":""}`),cO("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const t7=typeof module<"u"&&!!module.hot,cO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ke(365);class n7 extends se{constructor(e=1/0,t=1/0,r=E0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function lO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,de({connector:()=>new n7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function dO(n,e){return R(e)?Ve(()=>n,e):Ve(()=>n)}const hO=new Te("angularfire2.auth.use-emulator"),fO=new Te("angularfire2.auth.settings"),pO=new Te("angularfire2.auth.tenant-id"),gO=new Te("angularfire2.auth.langugage-code"),mO=new Te("angularfire2.auth.use-device-language"),_O=new Te("angularfire.auth.persistence"),yO=(n,e,t,r,i,o,s,a)=>T0(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,f]of Object.entries(s))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]);let D0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,f,m,y,E){const S=new se,k=V(void 0).pipe(wn(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>Promise.resolve().then(Ke.bind(Ke,365)))),Oe(()=>Wy(t,o,r)),Oe(L=>yO(L,o,a,l,f,m,u,y)),lO({bufferSize:1,refCount:!1}));if(Ey(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=V(null);else{k.pipe(Qa()).subscribe();const L=k.pipe(Ve(J=>J.getRedirectResult().then(le=>le,()=>null)),wi,lO({bufferSize:1,refCount:!1})),Q=k.pipe(Ve(J=>new ct(le=>({unsubscribe:o.runOutsideAngular(()=>J.onAuthStateChanged(Ce=>le.next(Ce),Ce=>le.error(Ce),()=>le.complete()))})))),z=k.pipe(Ve(J=>new ct(le=>({unsubscribe:o.runOutsideAngular(()=>J.onIdTokenChanged(Ce=>le.next(Ce),Ce=>le.error(Ce),()=>le.complete()))}))));this.authState=L.pipe(dO(Q),Tr(s.outsideAngular),wn(s.insideAngular)),this.user=L.pipe(dO(z),Tr(s.outsideAngular),wn(s.insideAngular)),this.idToken=this.user.pipe(Ve(J=>J?C(J.getIdToken()):V(null))),this.idTokenResult=this.user.pipe(Ve(J=>J?C(J.getIdTokenResult()):V(null))),this.credential=A(L,S,this.authState.pipe(Qo(J=>!J))).pipe(Oe(J=>J?.user?J:null),Tr(s.outsideAngular),wn(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(ZW.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,m),m})})})}))(this,k,o,{spy:{apply:(L,Q,z)=>{(L.startsWith("signIn")||L.startsWith("createUser"))&&z.then(J=>S.next(J))}}})}static \u0275fac=function(r){return new(r||n)(we(Ap),we(Sp,8),we(Uo),we(Ut),we(wd),we(hO,8),we(fO,8),we(pO,8),we(gO,8),we(mO,8),we(_O,8),we(Dp,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),i7=(()=>{class n{constructor(){Jo.Z.registerVersion("angularfire",aa.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[D0]})}return n})();function A0(){return ie((n,e)=>{let t,r=!1;n.subscribe(xe(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var ac,EO,ce=Ke(861),Zy=Ke(537),Ts=Ke(879),ht=Ke(58),vO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IO={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(H,x,B){B||(B=0);var q=Array(16);if("string"==typeof x)for(var W=0;16>W;++W)q[W]=x.charCodeAt(B++)|x.charCodeAt(B++)<<8|x.charCodeAt(B++)<<16|x.charCodeAt(B++)<<24;else for(W=0;16>W;++W)q[W]=x[B++]|x[B++]<<8|x[B++]<<16|x[B++]<<24;var ee=H.g[3],j=(x=H.g[0])+(ee^(B=H.g[1])&((W=H.g[2])^ee))+q[0]+3614090360&4294967295;j=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=(B=(W=(ee=(x=B+(j<<7&4294967295|j>>>25))+((j=ee+(W^x&(B^W))+q[1]+3905402710&4294967295)<<12&4294967295|j>>>20))+((j=W+(B^ee&(x^B))+q[2]+606105819&4294967295)<<17&4294967295|j>>>15))+((j=B+(x^W&(ee^x))+q[3]+3250441966&4294967295)<<22&4294967295|j>>>10))+((j=x+(ee^B&(W^ee))+q[4]+4118548399&4294967295)<<7&4294967295|j>>>25))+((j=ee+(W^x&(B^W))+q[5]+1200080426&4294967295)<<12&4294967295|j>>>20))+((j=W+(B^ee&(x^B))+q[6]+2821735955&4294967295)<<17&4294967295|j>>>15))+((j=B+(x^W&(ee^x))+q[7]+4249261313&4294967295)<<22&4294967295|j>>>10))+((j=x+(ee^B&(W^ee))+q[8]+1770035416&4294967295)<<7&4294967295|j>>>25))+((j=ee+(W^x&(B^W))+q[9]+2336552879&4294967295)<<12&4294967295|j>>>20))+((j=W+(B^ee&(x^B))+q[10]+4294925233&4294967295)<<17&4294967295|j>>>15))+((j=B+(x^W&(ee^x))+q[11]+2304563134&4294967295)<<22&4294967295|j>>>10))+((j=x+(ee^B&(W^ee))+q[12]+1804603682&4294967295)<<7&4294967295|j>>>25))+((j=ee+(W^x&(B^W))+q[13]+4254626195&4294967295)<<12&4294967295|j>>>20))+((j=W+(B^ee&(x^B))+q[14]+2792965006&4294967295)<<17&4294967295|j>>>15))+((j=B+(x^W&(ee^x))+q[15]+1236535329&4294967295)<<22&4294967295|j>>>10))+((j=x+(W^ee&(B^W))+q[1]+4129170786&4294967295)<<5&4294967295|j>>>27))+((j=ee+(B^W&(x^B))+q[6]+3225465664&4294967295)<<9&4294967295|j>>>23))+((j=W+(x^B&(ee^x))+q[11]+643717713&4294967295)<<14&4294967295|j>>>18))+((j=B+(ee^x&(W^ee))+q[0]+3921069994&4294967295)<<20&4294967295|j>>>12))+((j=x+(W^ee&(B^W))+q[5]+3593408605&4294967295)<<5&4294967295|j>>>27))+((j=ee+(B^W&(x^B))+q[10]+38016083&4294967295)<<9&4294967295|j>>>23))+((j=W+(x^B&(ee^x))+q[15]+3634488961&4294967295)<<14&4294967295|j>>>18))+((j=B+(ee^x&(W^ee))+q[4]+3889429448&4294967295)<<20&4294967295|j>>>12))+((j=x+(W^ee&(B^W))+q[9]+568446438&4294967295)<<5&4294967295|j>>>27))+((j=ee+(B^W&(x^B))+q[14]+3275163606&4294967295)<<9&4294967295|j>>>23))+((j=W+(x^B&(ee^x))+q[3]+4107603335&4294967295)<<14&4294967295|j>>>18))+((j=B+(ee^x&(W^ee))+q[8]+1163531501&4294967295)<<20&4294967295|j>>>12))+((j=x+(W^ee&(B^W))+q[13]+2850285829&4294967295)<<5&4294967295|j>>>27))+((j=ee+(B^W&(x^B))+q[2]+4243563512&4294967295)<<9&4294967295|j>>>23))+((j=W+(x^B&(ee^x))+q[7]+1735328473&4294967295)<<14&4294967295|j>>>18))+((j=B+(ee^x&(W^ee))+q[12]+2368359562&4294967295)<<20&4294967295|j>>>12))+((j=x+(B^W^ee)+q[5]+4294588738&4294967295)<<4&4294967295|j>>>28))+((j=ee+(x^B^W)+q[8]+2272392833&4294967295)<<11&4294967295|j>>>21))+((j=W+(ee^x^B)+q[11]+1839030562&4294967295)<<16&4294967295|j>>>16))+((j=B+(W^ee^x)+q[14]+4259657740&4294967295)<<23&4294967295|j>>>9))+((j=x+(B^W^ee)+q[1]+2763975236&4294967295)<<4&4294967295|j>>>28))+((j=ee+(x^B^W)+q[4]+1272893353&4294967295)<<11&4294967295|j>>>21))+((j=W+(ee^x^B)+q[7]+4139469664&4294967295)<<16&4294967295|j>>>16))+((j=B+(W^ee^x)+q[10]+3200236656&4294967295)<<23&4294967295|j>>>9))+((j=x+(B^W^ee)+q[13]+681279174&4294967295)<<4&4294967295|j>>>28))+((j=ee+(x^B^W)+q[0]+3936430074&4294967295)<<11&4294967295|j>>>21))+((j=W+(ee^x^B)+q[3]+3572445317&4294967295)<<16&4294967295|j>>>16))+((j=B+(W^ee^x)+q[6]+76029189&4294967295)<<23&4294967295|j>>>9))+((j=x+(B^W^ee)+q[9]+3654602809&4294967295)<<4&4294967295|j>>>28))+((j=ee+(x^B^W)+q[12]+3873151461&4294967295)<<11&4294967295|j>>>21))+((j=W+(ee^x^B)+q[15]+530742520&4294967295)<<16&4294967295|j>>>16))+((j=B+(W^ee^x)+q[2]+3299628645&4294967295)<<23&4294967295|j>>>9))+((j=x+(W^(B|~ee))+q[0]+4096336452&4294967295)<<6&4294967295|j>>>26))+((j=ee+(B^(x|~W))+q[7]+1126891415&4294967295)<<10&4294967295|j>>>22))+((j=W+(x^(ee|~B))+q[14]+2878612391&4294967295)<<15&4294967295|j>>>17))+((j=B+(ee^(W|~x))+q[5]+4237533241&4294967295)<<21&4294967295|j>>>11))+((j=x+(W^(B|~ee))+q[12]+1700485571&4294967295)<<6&4294967295|j>>>26))+((j=ee+(B^(x|~W))+q[3]+2399980690&4294967295)<<10&4294967295|j>>>22))+((j=W+(x^(ee|~B))+q[10]+4293915773&4294967295)<<15&4294967295|j>>>17))+((j=B+(ee^(W|~x))+q[1]+2240044497&4294967295)<<21&4294967295|j>>>11))+((j=x+(W^(B|~ee))+q[8]+1873313359&4294967295)<<6&4294967295|j>>>26))+((j=ee+(B^(x|~W))+q[15]+4264355552&4294967295)<<10&4294967295|j>>>22))+((j=W+(x^(ee|~B))+q[6]+2734768916&4294967295)<<15&4294967295|j>>>17))+((j=B+(ee^(W|~x))+q[13]+1309151649&4294967295)<<21&4294967295|j>>>11))+((ee=(x=B+((j=x+(W^(B|~ee))+q[4]+4149444226&4294967295)<<6&4294967295|j>>>26))+((j=ee+(B^(x|~W))+q[11]+3174756917&4294967295)<<10&4294967295|j>>>22))^((W=ee+((j=W+(x^(ee|~B))+q[2]+718787259&4294967295)<<15&4294967295|j>>>17))|~x))+q[9]+3951481745&4294967295,H.g[0]=H.g[0]+x&4294967295,H.g[1]=H.g[1]+(W+(j<<21&4294967295|j>>>11))&4294967295,H.g[2]=H.g[2]+W&4294967295,H.g[3]=H.g[3]+ee&4294967295}function s(H,x){this.h=x;for(var B=[],q=!0,W=H.length-1;0<=W;W--){var ee=0|H[W];q&&ee==x||(B[W]=ee,q=!1)}this.g=B}(function e(H,x){function B(){}B.prototype=x.prototype,H.D=x.prototype,H.prototype=new B,H.prototype.constructor=H,H.C=function(q,W,ee){for(var j=Array(arguments.length-2),Ia=2;Ia<arguments.length;Ia++)j[Ia-2]=arguments[Ia];return x.prototype[W].apply(q,j)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(H,x){void 0===x&&(x=H.length);for(var B=x-this.blockSize,q=this.B,W=this.h,ee=0;ee<x;){if(0==W)for(;ee<=B;)i(this,H,ee),ee+=this.blockSize;if("string"==typeof H){for(;ee<x;)if(q[W++]=H.charCodeAt(ee++),W==this.blockSize){i(this,q),W=0;break}}else for(;ee<x;)if(q[W++]=H[ee++],W==this.blockSize){i(this,q),W=0;break}}this.h=W,this.o+=x},r.prototype.v=function(){var H=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);H[0]=128;for(var x=1;x<H.length-8;++x)H[x]=0;var B=8*this.o;for(x=H.length-8;x<H.length;++x)H[x]=255&B,B/=256;for(this.u(H),H=Array(16),x=B=0;4>x;++x)for(var q=0;32>q;q+=8)H[B++]=this.g[x]>>>q&255;return H};var a={};function u(H){return-128<=H&&128>H?function o(H,x){var B=a;return Object.prototype.hasOwnProperty.call(B,H)?B[H]:B[H]=x(H)}(H,function(x){return new s([0|x],0>x?-1:0)}):new s([0|H],0>H?-1:0)}function l(H){if(isNaN(H)||!isFinite(H))return m;if(0>H)return L(l(-H));for(var x=[],B=1,q=0;H>=B;q++)x[q]=H/B|0,B*=4294967296;return new s(x,0)}var m=u(0),y=u(1),E=u(16777216);function S(H){if(0!=H.h)return!1;for(var x=0;x<H.g.length;x++)if(0!=H.g[x])return!1;return!0}function k(H){return-1==H.h}function L(H){for(var x=H.g.length,B=[],q=0;q<x;q++)B[q]=~H.g[q];return new s(B,~H.h).add(y)}function Q(H,x){return H.add(L(x))}function z(H,x){for(;(65535&H[x])!=H[x];)H[x+1]+=H[x]>>>16,H[x]&=65535,x++}function J(H,x){this.g=H,this.h=x}function le(H,x){if(S(x))throw Error("division by zero");if(S(H))return new J(m,m);if(k(H))return x=le(L(H),x),new J(L(x.g),L(x.h));if(k(x))return x=le(H,L(x)),new J(L(x.g),x.h);if(30<H.g.length){if(k(H)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var B=y,q=x;0>=q.l(H);)B=Ce(B),q=Ce(q);var W=je(B,1),ee=je(q,1);for(q=je(q,2),B=je(B,2);!S(q);){var j=ee.add(q);0>=j.l(H)&&(W=W.add(B),ee=j),q=je(q,1),B=je(B,1)}return x=Q(H,W.j(x)),new J(W,x)}for(W=m;0<=H.l(x);){for(B=Math.max(1,Math.floor(H.m()/x.m())),q=48>=(q=Math.ceil(Math.log(B)/Math.LN2))?1:Math.pow(2,q-48),j=(ee=l(B)).j(x);k(j)||0<j.l(H);)j=(ee=l(B-=q)).j(x);S(ee)&&(ee=y),W=W.add(ee),H=Q(H,j)}return new J(W,H)}function Ce(H){for(var x=H.g.length+1,B=[],q=0;q<x;q++)B[q]=H.i(q)<<1|H.i(q-1)>>>31;return new s(B,H.h)}function je(H,x){var B=x>>5;x%=32;for(var q=H.g.length-B,W=[],ee=0;ee<q;ee++)W[ee]=0<x?H.i(ee+B)>>>x|H.i(ee+B+1)<<32-x:H.i(ee+B);return new s(W,H.h)}(n=s.prototype).m=function(){if(k(this))return-L(this).m();for(var H=0,x=1,B=0;B<this.g.length;B++){var q=this.i(B);H+=(0<=q?q:4294967296+q)*x,x*=4294967296}return H},n.toString=function(H){if(2>(H=H||10)||36<H)throw Error("radix out of range: "+H);if(S(this))return"0";if(k(this))return"-"+L(this).toString(H);for(var x=l(Math.pow(H,6)),B=this,q="";;){var W=le(B,x).g,ee=((0<(B=Q(B,W.j(x))).g.length?B.g[0]:B.h)>>>0).toString(H);if(S(B=W))return ee+q;for(;6>ee.length;)ee="0"+ee;q=ee+q}},n.i=function(H){return 0>H?0:H<this.g.length?this.g[H]:this.h},n.l=function(H){return k(H=Q(this,H))?-1:S(H)?0:1},n.abs=function(){return k(this)?L(this):this},n.add=function(H){for(var x=Math.max(this.g.length,H.g.length),B=[],q=0,W=0;W<=x;W++){var ee=q+(65535&this.i(W))+(65535&H.i(W)),j=(ee>>>16)+(this.i(W)>>>16)+(H.i(W)>>>16);q=j>>>16,B[W]=(j&=65535)<<16|(ee&=65535)}return new s(B,-2147483648&B[B.length-1]?-1:0)},n.j=function(H){if(S(this)||S(H))return m;if(k(this))return k(H)?L(this).j(L(H)):L(L(this).j(H));if(k(H))return L(this.j(L(H)));if(0>this.l(E)&&0>H.l(E))return l(this.m()*H.m());for(var x=this.g.length+H.g.length,B=[],q=0;q<2*x;q++)B[q]=0;for(q=0;q<this.g.length;q++)for(var W=0;W<H.g.length;W++){var ee=this.i(q)>>>16,j=65535&this.i(q),Ia=H.i(W)>>>16,Fg=65535&H.i(W);B[2*q+2*W]+=j*Fg,z(B,2*q+2*W),B[2*q+2*W+1]+=ee*Fg,z(B,2*q+2*W+1),B[2*q+2*W+1]+=j*Ia,z(B,2*q+2*W+1),B[2*q+2*W+2]+=ee*Ia,z(B,2*q+2*W+2)}for(q=0;q<x;q++)B[q]=B[2*q+1]<<16|B[2*q];for(q=x;q<2*x;q++)B[q]=0;return new s(B,0)},n.A=function(H){return le(this,H).h},n.and=function(H){for(var x=Math.max(this.g.length,H.g.length),B=[],q=0;q<x;q++)B[q]=this.i(q)&H.i(q);return new s(B,this.h&H.h)},n.or=function(H){for(var x=Math.max(this.g.length,H.g.length),B=[],q=0;q<x;q++)B[q]=this.i(q)|H.i(q);return new s(B,this.h|H.h)},n.xor=function(H){for(var x=Math.max(this.g.length,H.g.length),B=[],q=0;q<x;q++)B[q]=this.i(q)^H.i(q);return new s(B,this.h^H.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,EO=IO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function f(H,x){if(0==H.length)throw Error("number format error: empty string");if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if("-"==H.charAt(0))return L(f(H.substring(1),x));if(0<=H.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=l(Math.pow(x,8)),q=m,W=0;W<H.length;W+=8){var ee=Math.min(8,H.length-W),j=parseInt(H.substring(W,W+ee),x);8>ee?(ee=l(Math.pow(x,ee)),q=q.j(ee).add(l(j))):q=(q=q.j(B)).add(l(j))}return q},ac=IO.Integer=s}).apply(typeof vO<"u"?vO:typeof self<"u"?self:typeof window<"u"?window:{});var bO,wO,Pp,CO,Qy,S0,TO,DO,AO,Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ky&&Ky];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var Z=h[D];if(!(Z in I))break e;I=I[Z]}(_=_(D=I[h=h[h.length-1]]))!=D&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function o(h,_){h instanceof String&&(h+="");var I=0,D=!1,Z={next:function(){if(!D&&I<h.length){var oe=I++;return{value:_(oe,h[oe]),done:!1}}return D=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}(this,function(_,I){return I})}});var s=s||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,D),h.apply(_,Z)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var D=I.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function S(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(D,Z,oe){for(var Se=Array(arguments.length-2),hn=2;hn<arguments.length;hn++)Se[hn-2]=arguments[hn];return _.prototype[Z].apply(D,Se)}}function k(h){const _=h.length;if(0<_){const I=Array(_);for(let D=0;D<_;D++)I[D]=h[D];return I}return[]}function L(h,_){for(let I=1;I<arguments.length;I++){const D=arguments[I];if(u(D)){const Z=h.length||0,oe=D.length||0;h.length=Z+oe;for(let Se=0;Se<oe;Se++)h[Z+Se]=D[Se]}else h.push(D)}}function z(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function le(h){return le[" "](h),h}le[" "]=function(){};var Ce=!(-1==J().indexOf("Gecko")||-1!=J().toLowerCase().indexOf("webkit")&&-1==J().indexOf("Edge")||-1!=J().indexOf("Trident")||-1!=J().indexOf("MSIE")||-1!=J().indexOf("Edge"));function je(h,_,I){for(const D in h)_.call(I,h[D],D,h)}function x(h){const _={};for(const I in h)_[I]=h[I];return _}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,_){let I,D;for(let Z=1;Z<arguments.length;Z++){for(I in D=arguments[Z],D)h[I]=D[I];for(let oe=0;oe<B.length;oe++)I=B[oe],Object.prototype.hasOwnProperty.call(D,I)&&(h[I]=D[I])}}function W(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function ee(h){a.setTimeout(()=>{throw h},0)}function j(){var h=LD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Fg=new class Q{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Gte,h=>h.reset());class Gte{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Vg,Lg=!1,LD=new class Ia{constructor(){this.h=this.g=null}add(_,I){const D=Fg.get();D.set(_,I),this.h?this.h.next=D:this.g=D,this.h=D}},yU=()=>{const h=a.Promise.resolve(void 0);Vg=()=>{h.then(Wte)}};var Wte=()=>{for(var h;h=j();){try{h.h.call(h.g)}catch(I){ee(I)}var _=Fg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Lg=!1};function wu(){this.s=this.s,this.C=this.C}function ai(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}wu.prototype.s=!1,wu.prototype.ma=function(){this.s||(this.s=!0,this.N())},wu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ai.prototype.h=function(){this.defaultPrevented=!0};var Zte=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function Ug(h,_){if(ai.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ce){e:{try{le(_.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,D?(this.clientX=void 0!==D.clientX?D.clientX:D.pageX,this.clientY=void 0!==D.clientY?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Kte[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ug.aa.h.call(this)}}S(Ug,ai);var Kte={2:"touch",3:"pen",4:"mouse"};Ug.prototype.h=function(){Ug.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Bg="closure_listenable_"+(1e6*Math.random()|0),Qte=0;function Yte(h,_,I,D,Z){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!D,this.ha=Z,this.key=++Qte,this.da=this.fa=!1}function _I(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function yI(h){this.src=h,this.g={},this.h=0}function UD(h,_){var I=_.type;if(I in h.g){var oe,D=h.g[I],Z=Array.prototype.indexOf.call(D,_,void 0);(oe=0<=Z)&&Array.prototype.splice.call(D,Z,1),oe&&(_I(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function BD(h,_,I,D){for(var Z=0;Z<h.length;++Z){var oe=h[Z];if(!oe.da&&oe.listener==_&&oe.capture==!!I&&oe.ha==D)return Z}return-1}yI.prototype.add=function(h,_,I,D,Z){var oe=h.toString();(h=this.g[oe])||(h=this.g[oe]=[],this.h++);var Se=BD(h,_,D,Z);return-1<Se?(_=h[Se],I||(_.fa=!1)):((_=new Yte(_,this.src,oe,!!D,Z)).fa=I,h.push(_)),_};var jD="closure_lm_"+(1e6*Math.random()|0),$D={};function vU(h,_,I,D,Z){if(D&&D.once)return EU(h,_,I,D,Z);if(Array.isArray(_)){for(var oe=0;oe<_.length;oe++)vU(h,_[oe],I,D,Z);return null}return I=GD(I),h&&h[Bg]?h.K(_,I,l(D)?!!D.capture:!!D,Z):IU(h,_,I,!1,D,Z)}function IU(h,_,I,D,Z,oe){if(!_)throw Error("Invalid event type");var Se=l(Z)?!!Z.capture:!!Z,hn=HD(h);if(hn||(h[jD]=hn=new yI(h)),(I=hn.add(_,I,D,Se,oe)).proxy)return I;if(D=function Jte(){const _=Xte;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=D,D.src=h,D.listener=I,h.addEventListener)Zte||(Z=Se),void 0===Z&&(Z=!1),h.addEventListener(_.toString(),D,Z);else if(h.attachEvent)h.attachEvent(wU(_.toString()),D);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(D)}return I}function EU(h,_,I,D,Z){if(Array.isArray(_)){for(var oe=0;oe<_.length;oe++)EU(h,_[oe],I,D,Z);return null}return I=GD(I),h&&h[Bg]?h.L(_,I,l(D)?!!D.capture:!!D,Z):IU(h,_,I,!0,D,Z)}function bU(h,_,I,D,Z){if(Array.isArray(_))for(var oe=0;oe<_.length;oe++)bU(h,_[oe],I,D,Z);else D=l(D)?!!D.capture:!!D,I=GD(I),h&&h[Bg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=BD(oe=h.g[_],I,D,Z))&&(_I(oe[I]),Array.prototype.splice.call(oe,I,1),0==oe.length&&(delete h.g[_],h.h--))):h&&(h=HD(h))&&(_=h.g[_.toString()],h=-1,_&&(h=BD(_,I,D,Z)),(I=-1<h?_[h]:null)&&zD(I))}function zD(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Bg])UD(_.i,h);else{var I=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(I,D,h.capture):_.detachEvent?_.detachEvent(wU(I),D):_.addListener&&_.removeListener&&_.removeListener(D),(I=HD(_))?(UD(I,h),0==I.h&&(I.src=null,_[jD]=null)):_I(h)}}}function wU(h){return h in $D?$D[h]:$D[h]="on"+h}function Xte(h,_){if(h.da)h=!0;else{_=new Ug(_,this);var I=h.listener,D=h.ha||h.src;h.fa&&zD(h),h=I.call(D,_)}return h}function HD(h){return(h=h[jD])instanceof yI?h:null}var qD="__closure_events_fn_"+(1e9*Math.random()>>>0);function GD(h){return"function"==typeof h?h:(h[qD]||(h[qD]=function(_){return h.handleEvent(_)}),h[qD])}function ui(){wu.call(this),this.i=new yI(this),this.M=this,this.F=null}function Pi(h,_){var I,D=h.F;if(D)for(I=[];D;D=D.F)I.push(D);if(h=h.M,D=_.type||_,"string"==typeof _)_=new ai(_,h);else if(_ instanceof ai)_.target=_.target||h;else{var Z=_;q(_=new ai(D,h),Z)}if(Z=!0,I)for(var oe=I.length-1;0<=oe;oe--){var Se=_.g=I[oe];Z=vI(Se,D,!0,_)&&Z}if(Z=vI(Se=_.g=h,D,!0,_)&&Z,Z=vI(Se,D,!1,_)&&Z,I)for(oe=0;oe<I.length;oe++)Z=vI(Se=_.g=I[oe],D,!1,_)&&Z}function vI(h,_,I,D){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var Z=!0,oe=0;oe<_.length;++oe){var Se=_[oe];if(Se&&!Se.da&&Se.capture==I){var hn=Se.listener,qr=Se.ha||Se.src;Se.fa&&UD(h.i,Se),Z=!1!==hn.call(qr,D)&&Z}}return Z&&!D.defaultPrevented}function CU(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function TU(h){h.g=CU(()=>{h.g=null,h.i&&(h.i=!1,TU(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}S(ui,wu),ui.prototype[Bg]=!0,ui.prototype.removeEventListener=function(h,_,I,D){bU(this,h,_,I,D)},ui.prototype.N=function(){if(ui.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],D=0;D<I.length;D++)_I(I[D]);delete h.g[_],h.h--}}this.F=null},ui.prototype.K=function(h,_,I,D){return this.i.add(String(h),_,!1,I,D)},ui.prototype.L=function(h,_,I,D){return this.i.add(String(h),_,!0,I,D)};class ene extends wu{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:TU(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jg(h){wu.call(this),this.h=h,this.g={}}S(jg,wu);var DU=[];function AU(h){je(h.g,function(_,I){this.g.hasOwnProperty(I)&&zD(_)},h),h.g={}}jg.prototype.N=function(){jg.aa.N.call(this),AU(this)},jg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var WD=a.JSON.stringify,tne=a.JSON.parse,nne=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function ZD(){}function PU(){}ZD.prototype.h=null;var $g={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function KD(){ai.call(this,"d")}function QD(){ai.call(this,"c")}S(KD,ai),S(QD,ai);var Nc={},RU=null;function II(){return RU=RU||new ui}function xU(h){ai.call(this,Nc.La,h)}function zg(h){const _=II();Pi(_,new xU(_))}function MU(h,_){ai.call(this,Nc.STAT_EVENT,h),this.stat=_}function Ri(h){const _=II();Pi(_,new MU(_,h))}function NU(h,_){ai.call(this,Nc.Ma,h),this.size=_}function Hg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function qg(){this.g=!0}function ph(h,_,I,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function sne(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var D=I[h];if(!(2>D.length)){var Z=D[1];if(Array.isArray(Z)&&!(1>Z.length)){var oe=Z[0];if("noop"!=oe&&"stop"!=oe&&"close"!=oe)for(var Se=1;Se<Z.length;Se++)Z[Se]=""}}}return WD(I)}catch{return _}}(h,I)+(D?" "+D:"")})}Nc.La="serverreachability",S(xU,ai),Nc.STAT_EVENT="statevent",S(MU,ai),Nc.Ma="timingevent",S(NU,ai),qg.prototype.xa=function(){this.g=!1},qg.prototype.info=function(){};var YD,EI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},OU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function bI(){}function Cu(h,_,I,D){this.j=h,this.i=_,this.l=I,this.R=D||1,this.U=new jg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kU}function kU(){this.i=null,this.g="",this.h=!1}S(bI,ZD),bI.prototype.g=function(){return new XMLHttpRequest},bI.prototype.i=function(){return{}},YD=new bI;var FU={},JD={};function XD(h,_,I){h.L=1,h.v=DI(Ea(_)),h.m=I,h.P=!0,VU(h,null)}function VU(h,_){h.F=Date.now(),wI(h),h.A=Ea(h.v);var I=h.A,D=h.R;Array.isArray(D)||(D=[String(D)]),YU(I.i,"t",D),h.C=0,I=h.j.J,h.h=new kU,h.g=gB(h.j,I?_:null,!h.m),0<h.O&&(h.M=new ene(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,D=h.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(DU[0]=Z.toString()),Z=DU);for(var oe=0;oe<Z.length;oe++){var Se=vU(I,Z[oe],D||_.handleEvent,!1,_.h||_);if(!Se)break;_.g[Se.key]=Se}_=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),zg(),function rne(h,_,I,D,Z,oe){h.info(function(){if(h.g)if(oe)for(var Se="",hn=oe.split("&"),qr=0;qr<hn.length;qr++){var zt=hn[qr].split("=");if(1<zt.length){var ci=zt[0];zt=zt[1];var li=ci.split("_");Se=2<=li.length&&"type"==li[1]?Se+(ci+"=")+zt+"&":Se+(ci+"=redacted&")}}else Se=null;else Se=oe;return"XMLHTTP REQ ("+D+") [attempt "+Z+"]: "+_+"\n"+I+"\n"+Se})}(h.i,h.u,h.A,h.l,h.R,h.m)}function LU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function ane(h,_){var I=h.C,D=_.indexOf("\n",I);return-1==D?JD:(I=Number(_.substring(I,D)),isNaN(I)?FU:(D+=1)+I>_.length?JD:(_=_.slice(D,D+I),h.C=D+I,_))}function wI(h){h.S=Date.now()+h.I,UU(h,h.I)}function UU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Hg(y(h.ba,h),_)}function eA(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Gg(h){0==h.j.G||h.J||dB(h.j,h)}function Oc(h){eA(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,AU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function tA(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||nA(I.h,h)))if(!h.K&&nA(I.h,h)&&3==I.G){try{var D=I.Da.g.parse(_)}catch{D=null}if(Array.isArray(D)&&3==D.length){var Z=D;if(0==Z[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;xI(I),PI(I)}sA(I),Ri(18)}}else I.za=Z[1],0<I.za-I.T&&37500>Z[2]&&I.F&&0==I.v&&!I.C&&(I.C=Hg(y(I.Za,I),6e3));if(1>=$U(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Fc(I,11)}else if((h.K||I.g==h)&&xI(I),!z(_))for(Z=I.Da.g.parse(_),_=0;_<Z.length;_++){let zt=Z[_];if(I.T=zt[0],zt=zt[1],2==I.G)if("c"==zt[0]){I.K=zt[1],I.ia=zt[2];const ci=zt[3];null!=ci&&(I.la=ci,I.j.info("VER="+I.la));const li=zt[4];null!=li&&(I.Aa=li,I.j.info("SVER="+I.Aa));const _h=zt[5];null!=_h&&"number"==typeof _h&&0<_h&&(I.L=D=1.5*_h,I.j.info("backChannelRequestTimeoutMs_="+D)),D=I;const es=h.g;if(es){const NI=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(NI){var oe=D.h;oe.g||-1==NI.indexOf("spdy")&&-1==NI.indexOf("quic")&&-1==NI.indexOf("h2")||(oe.j=oe.l,oe.g=new Set,oe.h&&(rA(oe,oe.h),oe.h=null))}if(D.D){const uA=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;uA&&(D.ya=uA,Sn(D.I,D.D,uA))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Se=h;if((D=I).qa=pB(D,D.J?D.ia:null,D.W),Se.K){zU(D.h,Se);var hn=Se,qr=D.L;qr&&(hn.I=qr),hn.B&&(eA(hn),wI(hn)),D.g=Se}else cB(D);0<I.i.length&&RI(I)}else"stop"!=zt[0]&&"close"!=zt[0]||Fc(I,7);else 3==I.G&&("stop"==zt[0]||"close"==zt[0]?"stop"==zt[0]?Fc(I,7):oA(I):"noop"!=zt[0]&&I.l&&I.l.ta(zt),I.v=0)}zg()}catch{}}function BU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function $U(h){return h.h?1:h.g?h.g.size:0}function nA(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function rA(h,_){h.g?h.g.add(_):h.h=_}function zU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function HU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return k(h.i)}function qU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function lne(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const D in h)_[I++]=D;return _}}}(h),D=function cne(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,D=0;D<I;D++)_.push(h[D]);return _}for(D in _=[],I=0,h)_[I++]=h[D];return _}(h),Z=D.length,oe=0;oe<Z;oe++)_.call(void 0,D[oe],I&&I[oe],h)}Cu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==ba(h)?_.j():this.Y(h)},Cu.prototype.Y=function(h){try{if(h==this.g)e:{const li=ba(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>li)&&(3!=li||this.g&&(this.h.h||this.g.oa()||iB(this.g)))){this.J||4!=li||7==_||zg(),eA(this);var I=this.g.Z();this.X=I;t:if(LU(this)){var D=iB(this.g);h="";var Z=D.length,oe=4==ba(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Oc(this),Gg(this);var Se="";break t}this.h.i=new a.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,h+=this.h.i.decode(D[_],{stream:!(oe&&_==Z-1)});D.length=0,this.h.g+=h,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=200==I,function ine(h,_,I,D,Z,oe,Se){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Z+"]: "+_+"\n"+I+"\n"+oe+" "+Se})}(this.i,this.u,this.A,this.l,this.R,li,I),this.o){if(this.T&&!this.K){t:{if(this.g){var hn,qr=this.g;if((hn=qr.g?qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(hn)){var zt=hn;break t}}zt=null}if(!(I=zt)){this.o=!1,this.s=3,Ri(12),Oc(this),Gg(this);break e}ph(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tA(this,I)}if(this.P){let es;for(I=!0;!this.J&&this.C<Se.length;){if(es=ane(this,Se),es==JD){4==li&&(this.s=4,Ri(14),I=!1),ph(this.i,this.l,null,"[Incomplete Response]");break}if(es==FU){this.s=4,Ri(15),ph(this.i,this.l,Se,"[Invalid Chunk]"),I=!1;break}ph(this.i,this.l,es,null),tA(this,es)}if(LU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=li||0!=Se.length||this.h.h||(this.s=1,Ri(16),I=!1),this.o=this.o&&I,I){if(0<Se.length&&!this.W){this.W=!0;var ci=this.j;ci.g==this&&ci.ba&&!ci.M&&(ci.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),aA(ci),ci.M=!0,Ri(11))}}else ph(this.i,this.l,Se,"[Invalid Chunked Response]"),Oc(this),Gg(this)}else ph(this.i,this.l,Se,null),tA(this,Se);4==li&&Oc(this),this.o&&!this.J&&(4==li?dB(this.j,this):(this.o=!1,wI(this)))}else(function Cne(h){const _={};h=(h.g&&2<=ba(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let D=0;D<h.length;D++){if(z(h[D]))continue;var I=W(h[D]);const Z=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const oe=_[Z]||[];_[Z]=oe,oe.push(I)}!function H(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(D){return D.join(", ")})})(this.g),400==I&&0<Se.indexOf("Unknown SID")?(this.s=3,Ri(12)):(this.s=0,Ri(13)),Oc(this),Gg(this)}}}catch{}},Cu.prototype.cancel=function(){this.J=!0,Oc(this)},Cu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function one(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(zg(),Ri(17)),Oc(this),this.s=2,Gg(this)):UU(this,this.S-h)},BU.prototype.cancel=function(){if(this.i=HU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var GU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof kc){this.h=h.h,CI(this,h.j),this.o=h.o,this.g=h.g,TI(this,h.s),this.l=h.l;var _=h.i,I=new Kg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),WU(this,I),this.m=h.m}else h&&(_=String(h).match(GU))?(this.h=!1,CI(this,_[1]||"",!0),this.o=Wg(_[2]||""),this.g=Wg(_[3]||"",!0),TI(this,_[4]),this.l=Wg(_[5]||"",!0),WU(this,_[6]||"",!0),this.m=Wg(_[7]||"")):(this.h=!1,this.i=new Kg(null,this.h))}function Ea(h){return new kc(h)}function CI(h,_,I){h.j=I?Wg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function TI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function WU(h,_,I){_ instanceof Kg?(h.i=_,function _ne(h,_){_&&!h.j&&(Tu(h),h.i=null,h.g.forEach(function(I,D){var Z=D.toLowerCase();D!=Z&&(KU(this,D),YU(this,Z,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Zg(_,gne)),h.i=new Kg(_,h.h))}function Sn(h,_,I){h.i.set(_,I)}function DI(h){return Sn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Wg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,hne),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hne(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}kc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Zg(_,ZU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Zg(_,ZU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Zg(I,"/"==I.charAt(0)?pne:fne,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Zg(I,mne)),h.join("")};var h,ZU=/[#\/\?@]/g,fne=/[#\?:]/g,pne=/[#\?]/g,gne=/[#\?@]/g,mne=/#/g;function Kg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Tu(h){h.g||(h.g=new Map,h.h=0,h.i&&function dne(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var D=h[I].indexOf("="),Z=null;if(0<=D){var oe=h[I].substring(0,D);Z=h[I].substring(D+1)}else oe=h[I];_(oe,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function KU(h,_){Tu(h),_=gh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function QU(h,_){return Tu(h),_=gh(h,_),h.g.has(_)}function YU(h,_,I){KU(h,_),0<I.length&&(h.i=null,h.g.set(gh(h,_),k(I)),h.h+=I.length)}function gh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Du(h,_,I,D,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),D(I)}catch{}}function Ine(){this.g=new nne}function Ene(h,_,I){const D=I||"";try{qU(h,function(Z,oe){let Se=Z;l(Z)&&(Se=WD(Z)),_.push(D+oe+"="+encodeURIComponent(Se))})}catch(Z){throw _.push(D+"type="+encodeURIComponent("_badmap")),Z}}function Qg(h){this.l=h.Ub||null,this.j=h.eb||!1}function AI(h,_){ui.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function JU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Yg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Jg(h)}function Jg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function XU(h){let _="";return je(h,function(I,D){_+=D,_+=":",_+=I,_+="\r\n"}),_}function iA(h,_,I){e:{for(D in I){var D=!1;break e}D=!0}D||(I=XU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):Sn(h,_,I))}function Zn(h){ui.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Kg.prototype).add=function(h,_){Tu(this),this.i=null,h=gh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){Tu(this),this.g.forEach(function(I,D){I.forEach(function(Z){h.call(_,Z,D,this)},this)},this)},n.na=function(){Tu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let D=0;D<_.length;D++){const Z=h[D];for(let oe=0;oe<Z.length;oe++)I.push(_[D])}return I},n.V=function(h){Tu(this);let _=[];if("string"==typeof h)QU(this,h)&&(_=_.concat(this.g.get(gh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return Tu(this),this.i=null,QU(this,h=gh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var D=_[I];const oe=encodeURIComponent(String(D)),Se=this.V(D);for(D=0;D<Se.length;D++){var Z=oe;""!==Se[D]&&(Z+="="+encodeURIComponent(String(Se[D]))),h.push(Z)}}return this.i=h.join("&")},S(Qg,ZD),Qg.prototype.g=function(){return new AI(this.l,this.j)},Qg.prototype.i=(h={},function(){return h}),S(AI,ui),(n=AI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Jg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jg(this)),this.g&&(this.readyState=3,Jg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;JU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Yg(this):Jg(this),3==this.readyState&&JU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Yg(this))},n.Qa=function(h){this.g&&(this.response=h,Yg(this))},n.ga=function(){this.g&&Yg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(AI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),S(Zn,ui);var bne=/^https?$/i,wne=["POST","PUT"];function eB(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,tB(h),SI(h)}function tB(h){h.A||(h.A=!0,Pi(h,"complete"),Pi(h,"error"))}function nB(h){if(h.h&&typeof s<"u"&&(!h.v[1]||4!=ba(h)||2!=h.Z()))if(h.u&&4==ba(h))CU(h.Ea,0,h);else if(Pi(h,"readystatechange"),4==ba(h)){h.h=!1;try{const Se=h.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var D;if(D=0===Se){var Z=String(h.D).match(GU)[1]||null;!Z&&a.self&&a.self.location&&(Z=a.self.location.protocol.slice(0,-1)),D=!bne.test(Z?Z.toLowerCase():"")}I=D}if(I)Pi(h,"complete"),Pi(h,"success");else{h.m=6;try{var oe=2<ba(h)?h.g.statusText:""}catch{oe=""}h.l=oe+" ["+h.Z()+"]",tB(h)}}finally{SI(h)}}}function SI(h,_){if(h.g){rB(h);const I=h.g,D=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Pi(h,"ready");try{I.onreadystatechange=D}catch{}}}function rB(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function ba(h){return h.g?h.g.readyState:0}function iB(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xg(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function oB(h){this.Aa=0,this.i=[],this.j=new qg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xg("baseRetryDelayMs",5e3,h),this.cb=Xg("retryDelaySeedMs",1e4,h),this.Wa=Xg("forwardChannelMaxRetries",2,h),this.wa=Xg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new BU(h&&h.concurrentRequestLimit),this.Da=new Ine,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function oA(h){if(sB(h),3==h.G){var _=h.U++,I=Ea(h.I);if(Sn(I,"SID",h.K),Sn(I,"RID",_),Sn(I,"TYPE","terminate"),em(h,I),(_=new Cu(h,h.j,_)).L=2,_.v=DI(Ea(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=gB(_.j,null),_.g.ea(_.v)),_.F=Date.now(),wI(_)}fB(h)}function PI(h){h.g&&(aA(h),h.g.cancel(),h.g=null)}function sB(h){PI(h),h.u&&(a.clearTimeout(h.u),h.u=null),xI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function RI(h){if(!jU(h.h)&&!h.s){h.s=!0;var _=h.Ga;Vg||yU(),Lg||(Vg(),Lg=!0),LD.add(_,h),h.B=0}}function aB(h,_){var I;I=_?_.l:h.U++;const D=Ea(h.I);Sn(D,"SID",h.K),Sn(D,"RID",I),Sn(D,"AID",h.T),em(h,D),h.m&&h.o&&iA(D,h.m,h.o),I=new Cu(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=uB(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),rA(h.h,I),XD(I,D,_)}function em(h,_){h.H&&je(h.H,function(I,D){Sn(_,D,I)}),h.l&&qU({},function(I,D){Sn(_,D,I)})}function uB(h,_,I){I=Math.min(h.i.length,I);var D=h.l?y(h.l.Na,h.l,h):null;e:{var Z=h.i;let oe=-1;for(;;){const Se=["count="+I];-1==oe?0<I?(oe=Z[0].g,Se.push("ofs="+oe)):oe=0:Se.push("ofs="+oe);let hn=!0;for(let qr=0;qr<I;qr++){let zt=Z[qr].g;const ci=Z[qr].map;if(zt-=oe,0>zt)oe=Math.max(0,Z[qr].g-100),hn=!1;else try{Ene(ci,Se,"req"+zt+"_")}catch{D&&D(ci)}}if(hn){D=Se.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,D}function cB(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Vg||yU(),Lg||(Vg(),Lg=!0),LD.add(_,h),h.v=0}}function sA(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Hg(y(h.Fa,h),hB(h,h.v)),h.v++,0))}function aA(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function lB(h){h.g=new Cu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Ea(h.qa);Sn(_,"RID","rpc"),Sn(_,"SID",h.K),Sn(_,"AID",h.T),Sn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Sn(_,"TO",h.ja),Sn(_,"TYPE","xmlhttp"),em(h,_),h.m&&h.o&&iA(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=DI(Ea(_)),I.m=null,I.P=!0,VU(I,h)}function xI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function dB(h,_){var I=null;if(h.g==_){xI(h),aA(h),h.g=null;var D=2}else{if(!nA(h.h,_))return;I=_.D,zU(h.h,_),D=1}if(0!=h.G)if(_.o)if(1==D){I=_.m?_.m.length:0,_=Date.now()-_.F;var Z=h.B;Pi(D=II(),new NU(D,I)),RI(h)}else cB(h);else if(3==(Z=_.s)||0==Z&&0<_.X||!(1==D&&function Tne(h,_){return!($U(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Hg(y(h.Ga,h,_),hB(h,h.B)),h.B++,0)))}(h,_)||2==D&&sA(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),Z){case 1:Fc(h,5);break;case 4:Fc(h,10);break;case 3:Fc(h,6);break;default:Fc(h,2)}}function hB(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function Fc(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),D=h.Xa;const Z=!D;D=new kc(D||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||CI(D,"https"),DI(D),Z?function yne(h,_){const I=new qg;if(a.Image){const D=new Image;D.onload=E(Du,I,"TestLoadImage: loaded",!0,_,D),D.onerror=E(Du,I,"TestLoadImage: error",!1,_,D),D.onabort=E(Du,I,"TestLoadImage: abort",!1,_,D),D.ontimeout=E(Du,I,"TestLoadImage: timeout",!1,_,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}(D.toString(),I):function vne(h,_){new qg;const D=new AbortController,Z=setTimeout(()=>{D.abort(),Du(0,0,!1,_)},1e4);fetch(h,{signal:D.signal}).then(oe=>{clearTimeout(Z),Du(0,0,!!oe.ok,_)}).catch(()=>{clearTimeout(Z),Du(0,0,!1,_)})}(D.toString(),I)}else Ri(2);h.G=0,h.l&&h.l.sa(_),fB(h),sB(h)}function fB(h){if(h.G=0,h.ka=[],h.l){const _=HU(h.h);(0!=_.length||0!=h.i.length)&&(L(h.ka,_),L(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function pB(h,_,I){var D=I instanceof kc?Ea(I):new kc(I);if(""!=D.g)_&&(D.g=_+"."+D.g),TI(D,D.s);else{var Z=a.location;D=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var oe=new kc(null);D&&CI(oe,D),_&&(oe.g=_),Z&&TI(oe,Z),I&&(oe.l=I),D=oe}return _=h.ya,(I=h.D)&&_&&Sn(D,I,_),Sn(D,"VER",h.la),em(h,D),D}function gB(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Zn(h.Ca&&!h.pa?new Qg({eb:I}):h.pa)).Ha(h.J),_}function mB(){}function MI(){}function lo(h,_){ui.call(this),this.g=new oB(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!z(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new mh(this)}function _B(h){KD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function yB(){QD.call(this),this.status=1}function mh(h){this.g=h}(n=Zn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():YD.g(),this.v=function SU(h){return h.h||(h.h=h.i())}(this.o?this.o:YD),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(oe){return void eB(this,oe)}if(h=I||"",I=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Z in D)I.set(Z,D[Z]);else{if("function"!=typeof D.keys||"function"!=typeof D.get)throw Error("Unknown input type for opt_headers: "+String(D));for(const oe of D.keys())I.set(oe,D.get(oe))}D=Array.from(I.keys()).find(oe=>"content-type"==oe.toLowerCase()),Z=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wne,_,void 0))||D||Z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Se]of I)this.g.setRequestHeader(oe,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rB(this),this.u=!0,this.g.send(h),this.u=!1}catch(oe){eB(this,oe)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Pi(this,"complete"),Pi(this,"abort"),SI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),SI(this,!0)),Zn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nB(this):this.bb())},n.bb=function(){nB(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ba(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),tne(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=oB.prototype).la=8,n.G=1,n.connect=function(h,_,I,D){Ri(0),this.W=h,this.H=_||{},I&&void 0!==D&&(this.H.OSID=I,this.H.OAID=D),this.F=this.X,this.I=pB(this,null,this.W),RI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Z=new Cu(this,this.j,h);let oe=this.o;if(this.S&&(oe?(oe=x(oe),q(oe,this.S)):oe=this.S),null!==this.m||this.O||(Z.H=oe,oe=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var D=this.i[I];if(void 0===(D="__data__"in D.map&&"string"==typeof(D=D.map.__data__)?D.length:void 0))break;if(4096<(_+=D)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=uB(this,Z,_),Sn(I=Ea(this.I),"RID",h),Sn(I,"CVER",22),this.D&&Sn(I,"X-HTTP-Session-Id",this.D),em(this,I),oe&&(this.O?_="headers="+encodeURIComponent(String(XU(oe)))+"&"+_:this.m&&iA(I,this.m,oe)),rA(this.h,Z),this.Ua&&Sn(I,"TYPE","init"),this.P?(Sn(I,"$req",_),Sn(I,"SID","null"),Z.T=!0,XD(Z,I,null)):XD(Z,I,_),this.G=2}}else 3==this.G&&(h?aB(this,h):0==this.i.length||jU(this.h)||aB(this))},n.Fa=function(){if(this.u=null,lB(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Hg(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ri(10),PI(this),lB(this))},n.Za=function(){null!=this.C&&(this.C=null,PI(this),sA(this),Ri(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ri(2)):(this.j.info("Failed to ping google.com"),Ri(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=mB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},MI.prototype.g=function(h,_){return new lo(h,_)},S(lo,ui),lo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lo.prototype.close=function(){oA(this.g)},lo.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=WD(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&RI(_)},lo.prototype.N=function(){this.g.l=null,delete this.j,oA(this.g),delete this.g,lo.aa.N.call(this)},S(_B,KD),S(yB,QD),S(mh,mB),mh.prototype.ua=function(){Pi(this.g,"a")},mh.prototype.ta=function(h){Pi(this.g,new _B(h))},mh.prototype.sa=function(h){Pi(this.g,new yB)},mh.prototype.ra=function(){Pi(this.g,"b")},MI.prototype.createWebChannel=MI.prototype.g,lo.prototype.send=lo.prototype.o,lo.prototype.open=lo.prototype.m,lo.prototype.close=lo.prototype.close,AO=ua.createWebChannelTransport=function(){return new MI},DO=ua.getStatEventTarget=function(){return II()},TO=ua.Event=Nc,S0=ua.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},EI.NO_ERROR=0,EI.TIMEOUT=8,EI.HTTP_ERROR=6,Qy=ua.ErrorCode=EI,OU.COMPLETE="complete",CO=ua.EventType=OU,PU.EventType=$g,$g.OPEN="a",$g.CLOSE="b",$g.ERROR="c",$g.MESSAGE="d",ui.prototype.listen=ui.prototype.K,Pp=ua.WebChannel=PU,wO=ua.FetchXmlHttpFactory=Qg,Zn.prototype.listenOnce=Zn.prototype.L,Zn.prototype.getLastError=Zn.prototype.Ka,Zn.prototype.getLastErrorCode=Zn.prototype.Ba,Zn.prototype.getStatus=Zn.prototype.Z,Zn.prototype.getResponseJson=Zn.prototype.Oa,Zn.prototype.getResponseText=Zn.prototype.oa,Zn.prototype.send=Zn.prototype.ea,Zn.prototype.setWithCredentials=Zn.prototype.Ha,bO=ua.XhrIo=Zn}).apply(typeof Ky<"u"?Ky:typeof self<"u"?self:typeof window<"u"?window:{});const SO="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let Td="10.12.1";const eu=new Ts.Yd("@firebase/firestore");function Dd(){return eu.logLevel}function Ie(n,...e){if(eu.logLevel<=Ts.in.DEBUG){const t=e.map(P0);eu.debug(`Firestore (${Td}): ${n}`,...t)}}function nr(n,...e){if(eu.logLevel<=Ts.in.ERROR){const t=e.map(P0);eu.error(`Firestore (${Td}): ${n}`,...t)}}function Wi(n,...e){if(eu.logLevel<=Ts.in.WARN){const t=e.map(P0);eu.warn(`Firestore (${Td}): ${n}`,...t)}}function P0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Fe(n="Unexpected state"){const e=`FIRESTORE (${Td}) INTERNAL ASSERTION FAILED: `+n;throw nr(e),new Error(e)}function Ge(n,e){n||Fe()}function Ae(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class PO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class u7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c7{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new br;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new br,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,ce.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new br)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge("string"==typeof r.accessToken),new PO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(null===e||"string"==typeof e),new Ar(e)}}class l7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class d7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new l7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge("string"==typeof t.token),this.R=t.token,new RO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function f7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xO{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=f7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function Ad(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function MO(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ze(e)}static min(){return new Ze(new Nn(0,0))}static max(){return new Ze(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Fe(),void 0===r?r=e.length-t:r>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Mt extends Rp{construct(e,t,r){return new Mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Mt(t)}static emptyPath(){return new Mt([])}}const p7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Rp{construct(e,t,r){return new Tn(e,t,r)}static isValidIdentifier(e){return p7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ye(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ye(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ye(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ye(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Mt.fromString(e))}static fromName(e){return new Me(Mt.fromString(e).popFirst(5))}static empty(){return new Me(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Mt(e.slice()))}}class Sd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function R0(n){return n.fields.find(e=>2===e.kind)}function uc(n){return n.fields.filter(e=>2!==e.kind)}Sd.UNKNOWN_ID=-1;class cc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pd(0,ao.min())}}function NO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ze.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new ao(i,Me.empty(),e)}function OO(n){return new ao(n.readTime,n.key,-1)}class ao{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ao(Ze.min(),Me.empty(),-1)}static max(){return new ao(Ze.max(),Me.empty(),-1)}}function x0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Me.comparator(n.documentKey,e.documentKey),0!==t?t:st(n.largestBatchId,e.largestBatchId))}const kO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function tu(n){return M0.apply(this,arguments)}function M0(){return(M0=(0,ce.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==kO)throw n;Ie("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Yy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new br,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new xp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=N0(r.target.error);this.V.reject(new xp(e,i))}}static open(e,t,r,i){try{return new Yy(t,e.transaction(i,r))}catch(o){throw new xp(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y7(t)}}class Ds{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Ds.S((0,ht.z$)())&&nr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ie("SimpleDb","Removing database:",e),lc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ht.hl)())return!1;if(Ds.C())return!0;const e=(0,ht.z$)(),t=Ds.S(e),r=0<t&&t<10,i=VO(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ce.Z)(function*(){return t.db||(Ie("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new xp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ye(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ye(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new xp(e,a))},o.onupgradeneeded=s=>{Ie("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{Ie("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ce.Z)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const u=Yy.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),Y.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(Ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),o.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function VO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return lc(this.B.delete())}}class xp extends ye{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nu(n){return"IndexedDbTransactionError"===n.name}class y7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lc(r)}add(e){return Ie("SimpleDb","ADD",this.store.name,e,e),lc(this.store.add(e))}get(e){return lc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ie("SimpleDb","DELETE",this.store.name,e),lc(this.store.delete(e))}count(){return Ie("SimpleDb","COUNT",this.store.name),lc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new Y((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){Ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=o=>{const s=N0(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new _7(a),l=t(a.primaryKey,a.value,u);if(l instanceof Y){const f=l.catch(m=>(u.done(),Y.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lc(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=N0(r.target.error);t(i)}})}let LO=!1;function N0(n){const e=Ds.S((0,ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LO||(LO=!0,setTimeout(()=>{throw r},0)),r}}return n}class v7{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){t.task=null;try{Ie("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){nu(r)?Ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield tu(r)}yield t.X(6e4)}))}}class I7{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return Y.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Ie("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(Ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=OO(o);x0(s,r)>0&&(r=s)}),new ao(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let uo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Mp(n){return null==n}function Np(n){return 0===n&&1/n==-1/0}function UO(n){return"number"==typeof n&&Number.isInteger(n)&&!Np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BO(e)),e=E7(n.get(t),e);return BO(e)}function E7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function BO(n){return n+"\x01\x01"}function As(n){const e=n.length;if(Ge(e>=2),2===e)return Ge("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Mt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Fe(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Fe()}o=s+2}return new Mt(r)}const jO=["userId","batchId"];function Jy(n,e){return[n,ti(e)]}function $O(n,e,t){return[n,ti(e),t]}const b7={},w7=["prefixPath","collectionGroup","readTime","documentId"],C7=["prefixPath","collectionGroup","documentId"],T7=["collectionGroup","readTime","prefixPath","documentId"],D7=["canonicalId","targetId"],A7=["targetId","path"],S7=["path","targetId"],P7=["collectionId","parent"],R7=["indexId","uid"],x7=["uid","sequenceNumber"],M7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N7=["indexId","uid","orderedDocumentKey"],O7=["userId","collectionPath","documentId"],k7=["userId","collectionPath","largestBatchId"],F7=["userId","collectionGroup","largestBatchId"],zO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V7=[...zO,"documentOverlays"],HO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qO=HO,GO=[...qO,"indexConfiguration","indexState","indexEntries"],L7=GO;class O0 extends FO{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Sr(n,e){const t=Ae(n);return Ds.F(t._e,e)}function WO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function KO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class yn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new yn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xy(this.root,e,this.comparator,!0)}}class Xy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??$r.RED,this.left=i??$r.EMPTY,this.right=o??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new $r(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,t,r,i,o){return this}insert(e,t,r){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QO(this.data.getIterator())}getIteratorFrom(e){return new QO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class QO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rd(n){return n.hasNext()?n.getNext():void 0}class Zi{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new sn(Tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ad(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class YO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new YO("Invalid base64 string: "+o):o}}(e);return new wr(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const B7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(n){if(Ge(!!n),"string"==typeof n){let e=0;const t=B7.exec(n);if(Ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function la(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function ev(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tv(n){const e=n.mapValue.fields.__previous_value__;return ev(e)?tv(e):e}function Op(n){const e=ca(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class j7{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class iu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new iu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}const ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nv={nullValue:"NULL_VALUE"};function su(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ev(n)?4:tk(n)?9007199254740991:10:Fe()}function Ss(n,e){if(n===e)return!0;const t=su(n);if(t!==su(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Op(n).isEqual(Op(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ca(i.timestampValue),a=ca(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,la(n.bytesValue).isEqual(la(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Wn(i.geoPointValue.latitude)===Wn(o.geoPointValue.latitude)&&Wn(i.geoPointValue.longitude)===Wn(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Wn(i.integerValue)===Wn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Wn(i.doubleValue),a=Wn(o.doubleValue);return s===a?Np(s)===Np(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ad(n.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(WO(s)!==WO(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Ss(s[u],a[u])))return!1;return!0}(n,e);default:return Fe()}var o}function kp(n,e){return void 0!==(n.values||[]).find(t=>Ss(t,e))}function au(n,e){if(n===e)return 0;const t=su(n),r=su(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Wn(o.integerValue||o.doubleValue),u=Wn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return JO(n.timestampValue,e.timestampValue);case 4:return JO(Op(n),Op(e));case 5:return st(n.stringValue,e.stringValue);case 6:return function(o,s){const a=la(o),u=la(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=st(a[l],u[l]);if(0!==f)return f}return st(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=st(Wn(o.latitude),Wn(s.latitude));return 0!==a?a:st(Wn(o.longitude),Wn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const f=au(a[l],u[l]);if(f)return f}return st(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ou.mapValue&&s===ou.mapValue)return 0;if(o===ou.mapValue)return 1;if(s===ou.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=st(u[m],f[m]);if(0!==y)return y;const E=au(a[u[m]],l[f[m]]);if(0!==E)return E}return st(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Fe()}}function JO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return st(n,e);const t=ca(n),r=ca(e),i=st(t.seconds,r.seconds);return 0!==i?i:st(t.nanos,r.nanos)}function xd(n){return k0(n)}function k0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ca(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?la(n.bytesValue).toBase64():"referenceValue"in n?Me.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=k0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${k0(t.fields[s])}`;return i+"}"}(n.mapValue):Fe()}function dc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function F0(n){return!!n&&"integerValue"in n}function Fp(n){return!!n&&"arrayValue"in n}function XO(n){return!!n&&"nullValue"in n}function ek(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function iv(n){return!!n&&"mapValue"in n}function Vp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tk(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $7(n){return"nullValue"in n?nv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dc(iu.empty(),Me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Fe()}function z7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dc(iu.empty(),Me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ou:Fe()}function nk(n,e){const t=au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rk(n,e){const t=au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!iv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vp(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Vp(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());iv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];iv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ru(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new zr(Vp(this.value))}}function ik(n){const e=[];return ru(n.fields,(t,r)=>{const i=new Tn([t]);if(iv(r)){const o=ik(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zi(e)}class Dn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Dn(e,0,Ze.min(),Ze.min(),Ze.min(),zr.empty(),0)}static newFoundDocument(e,t,r,i){return new Dn(e,1,t,Ze.min(),r,i,0)}static newNoDocument(e,t){return new Dn(e,2,t,Ze.min(),Ze.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,Ze.min(),Ze.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uu{constructor(e,t){this.position=e,this.inclusive=t}}function ok(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Me.comparator(Me.fromName(s.referenceValue),t.key):au(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function sk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ss(n.position[t],e.position[t]))return!1;return!0}class Lp{constructor(e,t="asc"){this.field=e,this.dir=t}}function H7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ak{}class Nt extends ak{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new q7(e,t,r):"array-contains"===t?new Z7(e,r):"in"===t?new fk(e,r):"not-in"===t?new K7(e,r):"array-contains-any"===t?new Q7(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new G7(e,r):new W7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(au(t,this.value)):null!==t&&su(this.value)===su(t)&&this.matchesComparison(au(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class tn extends ak{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new tn(e,t)}matches(e){return Md(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Md(n){return"and"===n.op}function V0(n){return"or"===n.op}function L0(n){return uk(n)&&Md(n)}function uk(n){for(const e of n.filters)if(e instanceof tn)return!1;return!0}function U0(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+xd(n.value);if(L0(n))return n.filters.map(e=>U0(e)).join(",");{const e=n.filters.map(t=>U0(t)).join(",");return`${n.op}(${e})`}}function ck(n,e){return n instanceof Nt?(r=n,(i=e)instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&Ss(r.value,i.value)):n instanceof tn?function(r,i){return i instanceof tn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&ck(s,i.filters[a]),!0)}(n,e):void Fe();var r,i}function lk(n,e){const t=n.filters.concat(e);return tn.create(t,n.op)}function dk(n){return n instanceof Nt?`${(t=n).field.canonicalString()} ${t.op} ${xd(t.value)}`:n instanceof tn?function(t){return t.op.toString()+" {"+t.getFilters().map(dk).join(" ,")+"}"}(n):"Filter";var t}class q7 extends Nt{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class G7 extends Nt{constructor(e,t){super(e,"in",t),this.keys=hk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W7 extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=hk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class Z7 extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fp(t)&&kp(t.arrayValue,this.value)}}class fk extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kp(this.value.arrayValue,t)}}class K7 extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kp(this.value.arrayValue,t)}}class Q7 extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kp(this.value.arrayValue,r))}}class Y7{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function B0(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Y7(n,e,t,r,i,o,s)}function hc(n){const e=Ae(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>U0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Mp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xd(r)).join(",")),e.ue=t}return e.ue}function Up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!H7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ck(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sk(n.startAt,e.startAt)&&sk(n.endAt,e.endAt)}function ov(n){return Me.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function sv(n,e){return n.filters.filter(t=>t instanceof Nt&&t.field.isEqual(e))}function pk(n,e,t){let r=nv,i=!0;for(const o of sv(n,e)){let s=nv,a=!0;switch(o.op){case"<":case"<=":s=$7(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=nv}nk({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];nk({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function gk(n,e,t){let r=ou,i=!0;for(const o of sv(n,e)){let s=ou,a=!0;switch(o.op){case">=":case">":s=z7(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ou}rk({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];rk({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class da{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function mk(n,e,t,r,i,o,s,a){return new da(n,e,t,r,i,o,s,a)}function Nd(n){return new da(n)}function _k(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function j0(n){return null!==n.collectionGroup}function Od(n){const e=Ae(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new sn(Tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Lp(o,r))}),t.has(Tn.keyField().canonicalString())||e.ce.push(new Lp(Tn.keyField(),r))}return e.ce}function ni(n){const e=Ae(n);return e.le||(e.le=function vk(n,e){if("F"===n.limitType)return B0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Lp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new uu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new uu(n.startAt.position,n.startAt.inclusive):null;return B0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Od(n))),e.le}function $0(n,e){const t=n.filters.concat([e]);return new da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function av(n,e,t){return new da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return Up(ni(n),ni(e))&&n.limitType===e.limitType}function Ik(n){return`${hc(ni(n))}|lt:${n.limitType}`}function kd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>dk(i)).join(", ")}]`),Mp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xd(i)).join(",")),`Target(${r})`}(ni(n))}; limitType=${n.limitType})`}function jp(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Me.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Od(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const l=ok(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Od(r),i)||r.endAt&&!function(s,a,u){const l=ok(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Od(r),i)));var r,i}function Ek(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bk(n){return(e,t)=>{let r=!1;for(const i of Od(n)){const o=J7(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function J7(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?au(u,l):Fe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}class ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return KO(this.inner)}size(){return this.innerSize}}const X7=new yn(Me.comparator);function Ki(){return X7}const wk=new yn(Me.comparator);function $p(...n){let e=wk;for(const t of n)e=e.insert(t.key,t);return e}function Ck(n){let e=wk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ps(){return zp()}function Tk(){return zp()}function zp(){return new ha(n=>n.toString(),(n,e)=>n.isEqual(e))}const eZ=new yn(Me.comparator),tZ=new sn(Me.comparator);function gt(...n){let e=tZ;for(const t of n)e=e.add(t);return e}const nZ=new sn(st);function z0(){return nZ}function Dk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Np(e)?"-0":e}}function Ak(n){return{integerValue:""+n}}function Sk(n,e){return UO(e)?Ak(e):Dk(n,e)}class uv{constructor(){this._=void 0}}function rZ(n,e,t){return n instanceof Fd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ev(o)&&(o=tv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof fc?Rk(n,e):n instanceof pc?xk(n,e):function(i,o){const s=Pk(i,o),a=Mk(s)+Mk(i.Pe);return F0(s)&&F0(i.Pe)?Ak(a):Dk(i.serializer,a)}(n,e)}function iZ(n,e,t){return n instanceof fc?Rk(n,e):n instanceof pc?xk(n,e):t}function Pk(n,e){return n instanceof Vd?F0(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Fd extends uv{}class fc extends uv{constructor(e){super(),this.elements=e}}function Rk(n,e){const t=Nk(e);for(const r of n.elements)t.some(i=>Ss(i,r))||t.push(r);return{arrayValue:{values:t}}}class pc extends uv{constructor(e){super(),this.elements=e}}function xk(n,e){let t=Nk(e);for(const r of n.elements)t=t.filter(i=>!Ss(i,r));return{arrayValue:{values:t}}}class Vd extends uv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Mk(n){return Wn(n.integerValue||n.doubleValue)}function Nk(n){return Fp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hp{constructor(e,t){this.field=e,this.transform=t}}class sZ{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lv{}function Ok(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ud(n.key,On.none()):new Ld(n.key,n.data,On.none());{const t=n.data,r=zr.empty();let i=new sn(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new fa(n.key,r,new Zi(i.toArray()),On.none())}}function aZ(n,e,t){n instanceof Ld?function(i,o,s){const a=i.value.clone(),u=Vk(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fa?function(i,o,s){if(!cv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Vk(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Fk(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qp(n,e,t,r){return n instanceof Ld?function(o,s,a,u){if(!cv(o.precondition,s))return a;const l=o.value.clone(),f=Lk(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof fa?function(o,s,a,u){if(!cv(o.precondition,s))return a;const l=Lk(o.fieldTransforms,u,s),f=s.data;return f.setAll(Fk(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,cv(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function uZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Pk(r.transform,i||null);null!=o&&(null===t&&(t=zr.empty()),t.set(r.field,o))}return t||null}function kk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Ad(r,i,(o,s)=>function oZ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof fc&&i instanceof fc||r instanceof pc&&i instanceof pc?Ad(r.elements,i.elements,Ss):r instanceof Vd&&i instanceof Vd?Ss(r.Pe,i.Pe):r instanceof Fd&&i instanceof Fd);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ld extends lv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fa extends lv{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Fk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Vk(n,e,t){const r=new Map;Ge(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,iZ(s,a,t[i]))}return r}function Lk(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,rZ(o,s,e))}return r}class Ud extends lv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H0 extends lv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class q0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&aZ(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tk();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=Ok(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Ze.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gt())}isEqual(e){return this.batchId===e.batchId&&Ad(this.mutations,e.mutations,(t,r)=>kk(t,r))&&Ad(this.baseMutations,e.baseMutations,(t,r)=>kk(t,r))}}class G0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length);let i=eZ;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new G0(e,t,r,i)}}class W0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var fr,Bt;function Bk(n){switch(n){default:return Fe();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function jk(n){if(void 0===n)return nr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case fr.OK:return ne.OK;case fr.CANCELLED:return ne.CANCELLED;case fr.UNKNOWN:return ne.UNKNOWN;case fr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case fr.INTERNAL:return ne.INTERNAL;case fr.UNAVAILABLE:return ne.UNAVAILABLE;case fr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case fr.NOT_FOUND:return ne.NOT_FOUND;case fr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case fr.ABORTED:return ne.ABORTED;case fr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case fr.DATA_LOSS:return ne.DATA_LOSS;default:return Fe()}}(Bt=fr||(fr={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";function $k(){return new TextEncoder}const lZ=new ac([4294967295,4294967295],0);function zk(n){const e=$k().encode(n),t=new EO;return t.update(e),new Uint8Array(t.digest())}function Hk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ac([t,r],0),new ac([i,o],0)]}class Z0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gp(`Invalid padding: ${t}`);if(r<0)throw new Gp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Gp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Gp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ac.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ac.fromNumber(r)));return 1===i.compare(lZ)&&(i=new ac([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=zk(e),[r,i]=Hk(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Z0(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=zk(e),[r,i]=Hk(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Gp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Zp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wp(Ze.min(),i,new yn(st),Ki(),gt())}}class Zp{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zp(r,t,gt(),gt(),gt())}}class hv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class qk{constructor(e,t){this.targetId=e,this.me=t}}class Gk{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Wk{constructor(){this.fe=0,this.ge=Kk(),this.pe=wr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=gt(),t=gt(),r=gt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe()}}),new Zp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=Kk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ki(),this.qe=Zk(),this.Qe=new yn(st)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Fe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(ov(o))if(0===r){const s=new Me(o.path);this.Ue(t,s,Dn.newNoDocument(s,Ze.min()))}else Ge(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=la(r).toUint8Array()}catch(u){if(u instanceof YO)return Wi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Z0(s,i,o)}catch(u){return Wi(u instanceof Gp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&ov(a.target)){const u=new Me(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,Dn.newNoDocument(u,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=gt();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Wp(e,t,this.Qe,this.ke,r);return this.ke=Ki(),this.qe=Zk(),this.Qe=new yn(st),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Wk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new sn(st),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Zk(){return new yn(Me.comparator)}function Kk(){return new yn(Me.comparator)}const hZ={asc:"ASCENDING",desc:"DESCENDING"},fZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pZ={and:"AND",or:"OR"};class gZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function K0(n,e){return n.useProto3Json||Mp(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mZ(n,e){return Bd(n,e.toTimestamp())}function rr(n){return Ge(!!n),Ze.fromTimestamp(function(t){const r=ca(t);return new Nn(r.seconds,r.nanos)}(n))}function Q0(n,e){return Y0(n,e).canonicalString()}function Y0(n,e){const t=(i=n,new Mt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Yk(n){const e=Mt.fromString(n);return Ge(uF(e)),e}function Kp(n,e){return Q0(n.databaseId,e.path)}function Rs(n,e){const t=Yk(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(eF(t))}function Jk(n,e){return Q0(n.databaseId,e)}function Xk(n){const e=Yk(n);return 4===e.length?Mt.emptyPath():eF(e)}function J0(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eF(n){return Ge(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tF(n,e,t){return{name:Kp(n,e),fields:t.value.mapValue.fields}}function nF(n,e,t){const r=Rs(n,e.name),i=rr(e.updateTime),o=e.createTime?rr(e.createTime):Ze.min(),s=new zr({mapValue:{fields:e.fields}}),a=Dn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Qp(n,e){let t;if(e instanceof Ld)t={update:tF(n,e.key,e.value)};else if(e instanceof Ud)t={delete:Kp(n,e.key)};else if(e instanceof fa)t={update:tF(n,e.key,e.data),updateMask:CZ(e.fieldMask)};else{if(!(e instanceof H0))return Fe();t={verify:Kp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Fd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vd)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Fe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:mZ(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Fe()),t;var o}function X0(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?On.updateTime(rr(o.updateTime)):void 0!==o.exists?On.exists(o.exists):On.none():On.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(Ge("REQUEST_TIME"===a.setToServerValue),u=new Fd):"appendMissingElements"in a?u=new fc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new pc(a.removeAllFromArray.values||[]):"increment"in a?u=new Vd(s,a.increment):Fe();const l=Tn.fromServerFormat(a.fieldPath);return new Hp(l,u)}(n,i)):[];var o;if(e.update){const i=Rs(n,e.update.name),o=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Zi((e.updateMask.fieldPaths||[]).map(f=>Tn.fromServerFormat(f)));return new fa(i,o,s,t,r)}return new Ld(i,o,t,r)}if(e.delete){const i=Rs(n,e.delete);return new Ud(i,t)}if(e.verify){const i=Rs(n,e.verify);return new H0(i,t)}return Fe()}function rF(n,e){return{documents:[Jk(n,e.path)]}}function fv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Jk(n,i);const o=function(l){if(0!==l.length)return aF(tn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(f=>{return{field:cu((y=f).field),direction:EZ(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=K0(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function oF(n){let e=Xk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ge(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(m){const y=sF(m);return y instanceof tn&&L0(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(y=>{return new Lp(jd((S=y).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Mp(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new uu((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new uu(m.values||[],!m.before)}(t.endAt)),mk(e,i,s,o,a,"F",u,l)}function sF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jd(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jd(t.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jd(t.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=jd(t.unaryFilter.field);return Nt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(n):void 0!==n.fieldFilter?Nt.create(jd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return tn.create(t.compositeFilter.filters.map(r=>sF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe()}}(t.compositeFilter.op))}(n):Fe();var t}function EZ(n){return hZ[n]}function bZ(n){return fZ[n]}function wZ(n){return pZ[n]}function cu(n){return{fieldPath:n.canonicalString()}}function jd(n){return Tn.fromServerFormat(n.fieldPath)}function aF(n){return n instanceof Nt?function(t){if("=="===t.op){if(ek(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NAN"}};if(XO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ek(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NAN"}};if(XO(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(t.field),op:bZ(t.op),value:t.value}}}(n):n instanceof tn?function(t){const r=t.getFilters().map(i=>aF(i));return 1===r.length?r[0]:{compositeFilter:{op:wZ(t.op),filters:r}}}(n):Fe()}function CZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class pa{constructor(e,t,r,i,o=Ze.min(),s=Ze.min(),a=wr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new pa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cF{constructor(e){this.ct=e}}function lF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Kp(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Bd(o,s.version.toTimestamp()),createTime:Bd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gc(e.version)};else{if(!e.isUnknownDocument())return Fe();r.unknownDocument={path:t.path.toArray(),version:gc(e.version)}}var o,s;return r}function pv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mc(n){const e=new Nn(n.seconds,n.nanoseconds);return Ze.fromTimestamp(e)}function _c(n,e){const t=(e.baseMutations||[]).map(o=>X0(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>X0(n.ct,o)),i=Nn.fromMillis(e.localWriteTimeMs);return new q0(e.batchId,i,t,r)}function Yp(n){const e=mc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mc(n.lastLimboFreeSnapshotVersion):Ze.min();let r;return r=void 0!==n.query.documents?(Ge(1===(o=n.query).documents.length),ni(Nd(Xk(o.documents[0])))):function(o){return ni(oF(o))}(n.query),new pa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken));var o}function dF(n,e){const t=gc(e.snapshotVersion),r=gc(e.lastLimboFreeSnapshotVersion);let i;i=ov(e.target)?rF(n.ct,e.target):fv(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eC(n){const e=oF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?av(e,e.limit,"L"):e}function tC(n,e){return new W0(e.largestBatchId,X0(n.ct,e.overlayMutation))}function hF(n,e){const t=e.path.lastSegment();return[n,ti(e.path.popLast()),t]}function fF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:gc(r.readTime),documentKey:ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class DZ{getBundleMetadata(e,t){return pF(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:mc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return pF(e).put({bundleId:(i=t).id,createTime:gc(rr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return gF(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:eC(o.bundledQuery),readTime:mc(o.readTime)};var o})}saveNamedQuery(e,t){return gF(e).put({name:(i=t).name,readTime:gc(rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function pF(n){return Sr(n,"bundles")}function gF(n){return Sr(n,"namedQueries")}class gv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new gv(e,t.uid||"")}getOverlay(e,t){return Jp(e).get(hF(this.userId,t)).next(r=>r?tC(this.serializer,r):null)}getOverlays(e,t){const r=Ps();return Y.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new W0(t,s);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(ti(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Jp(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ps(),o=ti(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Jp(e).U("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=tC(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ps();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const m=tC(this.serializer,l);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):f.done()}).next(()=>o)}ht(e,t){return Jp(e).put(function(i,o,s){const[a,u,l]=hF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Qp(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function Jp(n){return Sr(n,"documentOverlays")}class yc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Np(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=ca(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(la(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?tk(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Fe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),Me.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function AZ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function mF(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=AZ(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}yc.bt=new yc;class SZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=mF(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=mF(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PZ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class RZ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Xp{constructor(){this.Gt=new SZ,this.zt=new PZ(this.Gt),this.jt=new RZ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vc(this.indexId,this.documentKey,this.arrayValue,r)}}function lu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=_F(n.arrayValue,e.arrayValue),0!==t?t:(t=_F(n.directionalValue,e.directionalValue),0!==t?t:Me.comparator(n.documentKey,e.documentKey)))}function _F(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class yF{constructor(e){this.Yt=new sn((t,r)=>Tn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Ge(e.collectionGroup===this.collectionId),this.en)return!1;const t=R0(e);if(void 0!==t&&!this.nn(t))return!1;const r=uc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new sn(Tn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new cc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new cc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new cc(r.field,"asc"===r.dir?0:1)));return new Sd(Sd.UNKNOWN_ID,this.collectionId,t,Pd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vF(n){var e,t;if(Ge(n instanceof Nt||n instanceof tn),n instanceof Nt){if(n instanceof fk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Nt.create(n.field,"==",o)))||[];return tn.create(i,"or")}return n}const r=n.filters.map(i=>vF(i));return tn.create(r,n.op)}function xZ(n){if(0===n.getFilters().length)return[];const e=iC(vF(n));return Ge(IF(e)),nC(e)||rC(e)?[e]:e.getFilters()}function nC(n){return n instanceof Nt}function rC(n){return n instanceof tn&&L0(n)}function IF(n){return nC(n)||rC(n)||function(t){if(t instanceof tn&&V0(t)){for(const r of t.getFilters())if(!nC(r)&&!rC(r))return!1;return!0}return!1}(n)}function iC(n){if(Ge(n instanceof Nt||n instanceof tn),n instanceof Nt)return n;if(1===n.filters.length)return iC(n.filters[0]);const e=n.filters.map(r=>iC(r));let t=tn.create(e,n.op);return t=mv(t),IF(t)?t:(Ge(t instanceof tn),Ge(Md(t)),Ge(t.filters.length>1),t.filters.reduce((r,i)=>oC(r,i)))}function oC(n,e){let t;return Ge(n instanceof Nt||n instanceof tn),Ge(e instanceof Nt||e instanceof tn),t=n instanceof Nt?e instanceof Nt?tn.create([n,e],"and"):EF(n,e):e instanceof Nt?EF(e,n):function(i,o){if(Ge(i.filters.length>0&&o.filters.length>0),Md(i)&&Md(o))return lk(i,o.getFilters());const s=V0(i)?i:o,a=V0(i)?o:i,u=s.filters.map(l=>oC(l,a));return tn.create(u,"or")}(n,e),mv(t)}function EF(n,e){if(Md(e))return lk(e,n.getFilters());{const t=e.filters.map(r=>oC(n,r));return tn.create(t,"or")}}function mv(n){if(Ge(n instanceof Nt||n instanceof tn),n instanceof Nt)return n;const e=n.getFilters();if(1===e.length)return mv(e[0]);if(uk(n))return n;const t=e.map(i=>mv(i)),r=[];return t.forEach(i=>{i instanceof Nt?r.push(i):i instanceof tn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:tn.create(r,n.op)}class MZ{constructor(){this._n=new sC}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(ao.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class sC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new sn(Mt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new sn(Mt.comparator)).toArray()}}const _v=new Uint8Array(0);class NZ{constructor(e,t){this.databaseId=t,this.an=new sC,this.un=new ha(r=>hc(r),(r,i)=>Up(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const o={collectionId:r,parent:ti(i)};return bF(e).put(o)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[MO(t),""],!1,!0);return bF(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(As(s.parent))}return r})}addFieldIndex(e,t){const r=eg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=zd(e);return o.next(a=>{s.put(fF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=eg(e),i=zd(e),o=$d(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=eg(e),r=$d(e),i=zd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new yF(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=$d(e);let i=!0;const o=new Map;return Y.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=gt();const a=[];return Y.forEach(o,(u,l)=>{var J;Ie("IndexedDbIndexManager",`Using index ${J=u,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(le=>`${le.fieldPath}:${le.kind}`).join(",")}`} to execute ${hc(t)}`);const f=function(J,le){const Ce=R0(le);if(void 0===Ce)return null;for(const je of sv(J,Ce.fieldPath))switch(je.op){case"array-contains-any":return je.value.arrayValue.values||[];case"array-contains":return[je.value]}return null}(l,u),m=function(J,le){const Ce=new Map;for(const je of uc(le))for(const H of sv(J,je.fieldPath))switch(H.op){case"==":case"in":Ce.set(je.fieldPath.canonicalString(),H.value);break;case"not-in":case"!=":return Ce.set(je.fieldPath.canonicalString(),H.value),Array.from(Ce.values())}return null}(l,u),y=function(J,le){const Ce=[];let je=!0;for(const H of uc(le)){const x=0===H.kind?pk(J,H.fieldPath,J.startAt):gk(J,H.fieldPath,J.startAt);Ce.push(x.value),je&&(je=x.inclusive)}return new uu(Ce,je)}(l,u),E=function(J,le){const Ce=[];let je=!0;for(const H of uc(le)){const x=0===H.kind?gk(J,H.fieldPath,J.endAt):pk(J,H.fieldPath,J.endAt);Ce.push(x.value),je&&(je=x.inclusive)}return new uu(Ce,je)}(l,u),S=this.hn(u,l,y),k=this.hn(u,l,E),L=this.Pn(u,l,m),Q=this.In(u.indexId,f,S,y.inclusive,k,E.inclusive,L);return Y.forEach(Q,z=>r.G(z,t.limit).next(J=>{J.forEach(le=>{const Ce=Me.fromSegments(le.documentKey);s.has(Ce)||(s=s.add(Ce),a.push(Ce))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:xZ(tn.create(e.filters,"and")).map(r=>B0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){const u=(null!=t?t.length:1)*Math.max(r.length,o.length),l=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const y=t?this.Tn(t[m/l]):_v,E=this.En(e,y,r[m%l],i),S=this.dn(e,y,o[m%l],s),k=a.map(L=>this.En(e,y,L,!0));f.push(...this.createRange(E,S,k))}return f}En(e,t,r,i){const o=new vc(e,Me.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){const o=new vc(e,Me.empty(),t,r);return i?o.Jt():o}ln(e,t){const r=new yF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new sn(Tn.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Xp;for(const i of uc(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);yc.bt.Pt(o,s)}return r.Wt()}Tn(e){const t=new Xp;return yc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Xp;return yc.bt.Pt(dc(this.databaseId,t),r.Ht(function(o){const s=uc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Xp);let o=0;for(const s of uc(e)){const a=r[o++];for(const u of i)if(this.Vn(t,s.fieldPath)&&Fp(a))i=this.mn(i,s,a);else{const l=u.Ht(s.kind);yc.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Xp;u.seed(a.Wt()),yc.bt.Pt(s,u.Ht(t.kind)),o.push(u)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof Nt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eg(e),i=zd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return Y.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,m){const y=m?new Pd(m.sequenceNumber,new ao(mc(m.readTime),new Me(As(m.documentKey)),m.largestBatchId)):Pd.empty(),E=f.fields.map(([S,k])=>new cc(Tn.fromServerFormat(S),k));return new Sd(f.indexId,f.collectionGroup,E,y)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:st(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=eg(e),o=zd(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,u=>o.put(fF(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?Y.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,u=>this.pn(e,i,u).next(l=>{const f=this.yn(o,u);return l.isEqual(f)?Y.resolve():this.wn(e,o,u,l,f)}))))})}Sn(e,t,r,i){return $d(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return $d(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=$d(e);let o=new sn(lu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new vc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new sn(lu);const i=this.An(t,e);if(null==i)return r;const o=R0(t);if(null!=o){const s=e.data.field(o.fieldPath);if(Fp(s))for(const a of s.arrayValue.values||[])r=r.add(new vc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new vc(t.indexId,e.key,_v,i));return r}wn(e,t,r,i,o){Ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(u,l,f,m,y){const E=u.getIterator(),S=l.getIterator();let k=Rd(E),L=Rd(S);for(;k||L;){let Q=!1,z=!1;if(k&&L){const J=f(k,L);J<0?z=!0:J>0&&(Q=!0)}else null!=k?z=!0:Q=!0;Q?(m(L),L=Rd(S)):z?(y(k),k=Rd(E)):(k=Rd(E),L=Rd(S))}}(i,o,lu,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),Y.waitFor(s)}gn(e){let t=1;return zd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>lu(s,a)).filter((s,a,u)=>!a||0!==lu(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=lu(s,e),u=lu(s,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,_v,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,_v,[]]))}return o}Dn(e,t){return lu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(wF)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Fe())).next(wF)}}function bF(n){return Sr(n,"collectionParents")}function $d(n){return Sr(n,"indexEntries")}function eg(n){return Sr(n,"indexConfiguration")}function zd(n){return Sr(n,"indexState")}function wF(n){Ge(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;x0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ao(e.readTime,e.documentKey,t)}const CF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ri(e,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function TF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:s},(f,m,y)=>(a++,y.delete()));o.push(u.next(()=>{Ge(1===a)}));const l=[];for(const f of t.mutations){const m=$O(e,f.key.path,t.batchId);o.push(i.delete(m)),l.push(f.key)}return Y.waitFor(o).next(()=>l)}function yv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Fe();e=n.noDocument}return JSON.stringify(e).length}ri.DEFAULT_COLLECTION_PERCENTILE=10,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ri.DEFAULT=new ri(41943040,ri.DEFAULT_COLLECTION_PERCENTILE,ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ri.DISABLED=new ri(-1,0,0);class vv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Ge(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new vv(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return du(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Hd(e),s=du(e);return s.add({}).next(a=>{Ge("number"==typeof a);const u=new q0(a,t,r,i),l=function(E,S,k){const L=k.baseMutations.map(z=>Qp(E.ct,z)),Q=k.mutations.map(z=>Qp(E.ct,z));return{userId:S,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:L,mutations:Q}}(this.serializer,this.userId,u),f=[];let m=new sn((y,E)=>st(y.canonicalString(),E.canonicalString()));for(const y of i){const E=$O(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(s.put(l)),f.push(o.put(E,b7))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),Y.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return du(e).get(t).next(r=>r?(Ge(r.userId===this.userId),_c(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return du(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Ge(a.batchId>=r),o=_c(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return du(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return du(e).U("userMutationsIndex",t).next(r=>r.map(i=>_c(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Hd(e).J({range:i},(s,a,u)=>{const[l,f,m]=s,y=As(f);if(l===this.userId&&t.path.isEqual(y))return du(e).get(m).next(E=>{if(!E)throw Fe();Ge(E.userId===this.userId),o.push(_c(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(st);const i=[];return t.forEach(o=>{const s=Jy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Hd(e).J({range:a},(l,f,m)=>{const[y,E,S]=l,k=As(E);y===this.userId&&o.path.isEqual(k)?r=r.add(S):m.done()});i.push(u)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Jy(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new sn(st);return Hd(e).J({range:s},(u,l,f)=>{const[m,y,E]=u,S=As(y);m===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(du(e).get(o).next(s=>{if(null===s)throw Fe();Ge(s.userId===this.userId),r.push(_c(this.serializer,s))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return TF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Hd(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=As(o[1]);i.push(u)}else a.done()}).next(()=>{Ge(0===i.length)})})}containsKey(e,t){return DF(e,this.userId,t)}xn(e){return AF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DF(n,e,t){const r=Jy(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Hd(n).J({range:o,H:!0},(a,u,l)=>{const[f,m,y]=a;f===e&&m===i&&(s=!0),l.done()}).next(()=>s)}function du(n){return Sr(n,"mutations")}function Hd(n){return Sr(n,"documentMutations")}function AF(n){return Sr(n,"mutationQueues")}class Ic{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ic(0)}static Ln(){return new Ic(-1)}}class OZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new Ic(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>Ze.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(Ge(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return qd(e).J((s,a)=>{const u=Yp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>Y.waitFor(o)).next(()=>i)}forEachTarget(e,t){return qd(e).J((r,i)=>{const o=Yp(i);t(o)})}Bn(e){return SF(e).get("targetGlobalKey").next(t=>(Ge(null!==t),t))}kn(e,t){return SF(e).put("targetGlobalKey",t)}qn(e,t){return qd(e).put(dF(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return qd(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=Yp(a);Up(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=hu(e);return t.forEach(s=>{const a=ti(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=hu(e);return Y.forEach(t,o=>{const s=ti(o.path);return Y.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=hu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hu(e);let o=gt();return i.J({range:r,H:!0},(s,a,u)=>{const l=As(s[1]),f=new Me(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){const r=ti(t.path),i=IDBKeyRange.bound([r],[MO(r)],!1,!0);let o=0;return hu(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return qd(e).get(t).next(r=>r?Yp(r):null)}}function qd(n){return Sr(n,"targets")}function SF(n){return Sr(n,"targetGlobal")}function hu(n){return Sr(n,"targetDocuments")}function PF([n,e],[t,r]){const i=st(n,t);return 0===i?st(e,r):i}class kZ{constructor(e){this.Kn=e,this.buffer=new sn(PF),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();PF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){nu(r)?Ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield tu(r)}yield t.zn(3e5)}))}}class FZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(uo.oe);const r=new kZ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(CF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CF):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Dd()<=Ts.in.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-f}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class VZ{constructor(e,t){this.db=e,this.garbageCollector=function xF(n,e){return new FZ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return Iv(e,r)}removeReference(e,t,r){return Iv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Iv(e,t)}er(e,t){return function(i,o){let s=!1;return AF(i).Y(a=>DF(i,a,o).next(u=>(u&&(s=!0),Y.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=t){const u=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Ze.min()),hu(e).delete([0,ti(s.path)])))});i.push(u)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Iv(e,t)}Xn(e,t){const r=hu(e);let i,o=uo.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==uo.oe&&t(new Me(As(i)),o),o=l,i=u):o=uo.oe}).next(()=>{o!==uo.oe&&t(new Me(As(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Iv(n,e){return hu(n).put((i=n.currentSequenceNumber,{targetId:0,path:ti(e.path),sequenceNumber:i}));var i}class MF{constructor(){this.changes=new ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ec(e).put(r)}removeEntry(e,t,r){return Ec(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pv(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return Ec(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return Ec(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,o)=>{r={document:this.nr(t,o),size:yv(o)}}).next(()=>r)}getEntries(e,t){let r=Ki();return this.ir(e,t,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Ki(),i=new yn(Me.comparator);return this.ir(e,t,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,yv(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new sn(FF);t.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(tg(i.first()),tg(i.last())),s=i.getIterator();let a=s.getNext();return Ec(e).J({index:"documentKeyIndex",range:o},(u,l,f)=>{const m=Me.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&FF(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.$(tg(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),pv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Ki();for(const m of l){const y=this.nr(Me.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(jp(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=Ki();const s=kF(t,r),a=kF(t,ao.max());return Ec(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{const m=this.nr(Me.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(m.key,m),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new UZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return OF(e).get("remoteDocumentGlobalKey").next(t=>(Ge(!!t),t))}tr(e,t){return OF(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function TZ(n,e){let t;if(e.document)t=nF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Me.fromSegments(e.noDocument.path),i=mc(e.noDocument.readTime);t=Dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe();{const r=Me.fromSegments(e.unknownDocument.path),i=mc(e.unknownDocument.version);t=Dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new Nn(i[0],i[1]);return Ze.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ze.min()))return r}return Dn.newInvalidDocument(e)}}function NF(n){return new LZ(n)}class UZ extends MF{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ha(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new sn((o,s)=>st(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=lF(this.ar.serializer,s);i=i.add(o.path.popLast());const l=yv(u);r+=l-a.size,t.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=lF(this.ar.serializer,s.convertToNoDocument(Ze.min()));t.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function OF(n){return Sr(n,"remoteDocumentGlobal")}function Ec(n){return Sr(n,"remoteDocumentsV14")}function tg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kF(n,e){const t=e.documentKey.path.toArray();return[n,pv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=st(t[o],r[o]),i)return i;return i=st(t.length,r.length),i||(i=st(t[t.length-2],r[r.length-2]),i||st(t[t.length-1],r[r.length-1]))}class BZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class VF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&qp(r.mutation,i,Zi.empty(),Nn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=gt()){const i=Ps();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=$p();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Ps();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ki();const s=zp(),a=zp();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof fa)?o=o.insert(l.key,l):void 0!==f?(s.set(l.key,f.mutation.getFieldMask()),qp(f.mutation,l,f.mutation.getFieldMask(),Nn.now())):s.set(l.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new BZ(f,null!==(m=s.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=zp();let i=new yn((s,a)=>s-a),o=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||Zi.empty();f=a.applyToLocalView(l,f),r.set(u,f);const m=(i.get(a.batchId)||gt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,m=Tk();f.forEach(y=>{if(!o.has(y)){const E=Ok(t.get(y),r.get(y));null!==E&&m.set(y,E),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return Y.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Me.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):j0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Y.resolve(Ps());let a=-1,u=o;return s.next(l=>Y.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,gt())).next(f=>({batchId:a,changes:Ck(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let i=$p();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=$p();return this.indexManager.getCollectionParents(e,o).next(a=>Y.forEach(a,u=>{const l=(m=t,y=u.child(o),new da(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{const f=l.getKey();null===s.get(f)&&(s=s.insert(f,Dn.newInvalidDocument(f)))});let a=$p();return s.forEach((u,l)=>{const f=o.get(u);void 0!==f&&qp(f.mutation,l,Zi.empty(),Nn.now()),jp(t,l)&&(a=a.insert(u,l))}),a})}}class jZ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:rr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:eC(i.bundledQuery),readTime:rr(i.readTime)}),Y.resolve();var i}}class $Z{constructor(){this.overlays=new yn(Me.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ps();return Y.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=Ps(),o=t.length+1,s=new Me(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new yn((l,f)=>l-f);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);null===f&&(f=Ps(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=Ps(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new W0(t,r));let o=this.hr.get(t);void 0===o&&(o=gt(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class aC{constructor(){this.Pr=new sn(Pr.Ir),this.Tr=new sn(Pr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Pr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Me(new Mt([])),r=new Pr(t,e),i=new Pr(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Me(new Mt([])),r=new Pr(t,e),i=new Pr(t,e+1);let o=gt();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Pr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Me.comparator(e.key,t.key)||st(e.pr,t.pr)}static Er(e,t){return st(e.pr,t.pr)||Me.comparator(e.key,t.key)}}class zZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new sn(Pr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new q0(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Pr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(s)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),i=new Pr(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(st);return t.forEach(i=>{const o=new Pr(i,0),s=new Pr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Me.isDocumentKey(o)||(o=o.child(""));const s=new Pr(new Me(o),0);let a=new sn(st);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ge(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const o=new Pr(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Pr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HZ{constructor(e){this.vr=e,this.docs=new yn(Me.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Ki();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ki();const s=t.path,a=new Me(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||x0(OO(f),r)<=0||(i.has(f.key)||jp(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Fe()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qZ(this)}getSize(e){return Y.resolve(this.size)}}class qZ extends MF{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class GZ{constructor(e){this.persistence=e,this.Mr=new ha(t=>hc(t),Up),this.lastRemoteSnapshotVersion=Ze.min(),this.highestTargetId=0,this.Or=0,this.Nr=new aC,this.targetCount=0,this.Lr=Ic.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(o).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class uC{constructor(e,t){this.Br={},this.overlays={},this.kr=new uo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new GZ(this),this.indexManager=new MZ,this.remoteDocumentCache=new HZ(r=>this.referenceDelegate.Kr(r)),this.serializer=new cF(t),this.$r=new jZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $Z,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new zZ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new WZ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class WZ extends FO{constructor(e){super(),this.currentSequenceNumber=e}}class Ev{constructor(e){this.persistence=e,this.zr=new aC,this.jr=null}static Hr(e){return new Ev(e)}get Jr(){if(this.jr)return this.jr;throw Fe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=Me.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,Ze.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class ZZ{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Yy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jO,{unique:!0}),u.createObjectStore("documentMutations"),LF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),LF(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ze.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jO,{unique:!0});const m=l.store("mutations"),y=f.map(E=>m.put(E));return Y.waitFor(y)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:O7});l.createIndex("collectionPathOverlayIndex",k7,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",F7,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:w7});l.createIndex("documentKeyIndex",C7),l.createIndex("collectionGroupIndex",T7)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:R7}).createIndex("sequenceNumberIndex",x7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:M7}).createIndex("documentKeyIndex",N7,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=yv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>Y.forEach(a,u=>{Ge(u.userId===o.userId);const l=_c(this.serializer,u);return TF(e,o.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const u=new Mt(s),l=[0,ti(u)];o.push(t.get(l).next(f=>f?Y.resolve():t.put({targetId:0,path:ti(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:P7});const r=t.store("collectionParents"),i=new sC,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ti(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const u=new Mt(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{const f=As(a);return o(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const o=Yp(i),s=dF(this.serializer,o);return t.put(s)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),u=(m=s,m.document?new Me(Mt.fromString(m.document.name).popFirst(5)):m.noDocument?Me.fromSegments(m.noDocument.path):m.unknownDocument?Me.fromSegments(m.unknownDocument.path):Fe()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=NF(this.serializer),o=new uC(Ev.Hr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:gt();_c(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),Y.forEach(a,(u,l)=>{const f=new Ar(l),m=gv.lt(this.serializer,f),y=o.getIndexManager(f),E=vv.lt(f,this.serializer,y,o.referenceDelegate);return new VF(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new O0(t,uo.oe),u).next()})})}}function LF(n){n.createObjectStore("targetDocuments",{keyPath:A7}).createIndex("documentTargetsIndex",S7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",D7,{unique:!0}),n.createObjectStore("targetGlobal")}const cC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lC{constructor(e,t,r,i,o,s,a,u,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!lC.D())throw new ye(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VZ(this,i),this.Ti=t+"main",this.serializer=new cF(u),this.Ei=new Ds(this.Ti,this.ui,new ZZ(this.serializer)),this.Qr=new OZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NF(this.serializer),this.$r=new DZ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&nr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ye(ne.FAILED_PRECONDITION,cC);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new uo(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ce.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(nu(e))return Ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ng(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return wv(e).delete(this.clientId)}Di(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Sr(r,"clientMetadata");return i.U().next(o=>{const s=e.vi(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return Y.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):ng(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ye(ne.FAILED_PRECONDITION,cC);return!1}}return!(!this.networkEnabled||!this.inForeground)||wv(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new O0(t,uo.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>wv(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return vv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NZ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ie("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=16===(u=this.ui)?L7:15===u?GO:14===u?qO:13===u?HO:12===u?V7:11===u?zO:void Fe();var u;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new O0(a,this.kr?this.kr.next():uo.oe),"readwrite-primary"===t?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw nr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ye(ne.FAILED_PRECONDITION,kO);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return ng(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ye(ne.FAILED_PRECONDITION,cC)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ng(e).put("owner",t)}static D(){return Ds.D()}yi(e){const t=ng(e);return t.get("owner").next(r=>this.Si(r)?(Ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(nr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ht.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){nr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ng(n){return Sr(n,"owner")}function wv(n){return Sr(n,"clientMetadata")}function dC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=gt(),i=gt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new hC(e,t.fromCache,r,i)}}class KZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class UF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ht.G6)()?8:VO((0,ht.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new KZ;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Dd()<=Ts.in.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",kd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Dd()<=Ts.in.DEBUG&&Ie("QueryEngine","Query:",kd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Dd()<=Ts.in.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",kd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):Y.resolve())}ji(e,t){if(_k(t))return Y.resolve(null);let r=ni(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=av(t,null,"F"),r=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=gt(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(t,a);return this.Xi(t,l,s,u.readTime)?this.ji(e,av(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return _k(t)||i.isEqual(Ze.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?Y.resolve(null):(Dd()<=Ts.in.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kd(t)),this.es(e,s,t,NO(i,-1)).next(a=>a))})}Zi(e,t){let r=new sn(bk(e));return t.forEach((i,o)=>{jp(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Dd()<=Ts.in.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",kd(t)),this.zi.getDocumentsMatchingQuery(e,t,ao.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class QZ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new yn(st),this.rs=new ha(o=>hc(o),Up),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function BF(n,e,t,r){return new QZ(n,e,t,r)}function jF(n,e){return fC.apply(this,arguments)}function fC(){return(fC=(0,ce.Z)(function*(n,e){const t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=gt();for(const l of i){s.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of o){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function $F(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function zF(n,e,t){let r=gt(),i=gt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ki();return t.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ze.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function XZ(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gd(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,Y.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new pa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Wd(n,e,t){return pC.apply(this,arguments)}function pC(){return(pC=(0,ce.Z)(function*(n,e,t){const r=Ae(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!nu(s))throw s;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function Cv(n,e,t){const r=Ae(n);let i=Ze.min(),o=gt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){const m=Ae(u),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,s,ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:Ze.min(),t?o:gt())).next(a=>(GF(r,Ek(e),a),{documents:a,hs:o})))}function HF(n,e){const t=Ae(n),r=Ae(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function qF(n,e){const t=Ae(n),r=t.ss.get(e)||Ze.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,NO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GF(t,e,i),i))}function GF(n,e,t){let r=n.ss.get(e)||Ze.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function gC(){return(gC=(0,ce.Z)(function*(n,e,t,r){const i=Ae(n);let o=gt(),s=Ki();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(o=o.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Gd(i,(f=r,ni(Nd(Mt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>zF(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function tK(n,e){return mC.apply(this,arguments)}function mC(){return(mC=(0,ce.Z)(function*(n,e,t=gt()){const r=yield Gd(n,ni(eC(e.bundledQuery))),i=Ae(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=rr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(wr.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,t,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})})).apply(this,arguments)}function WF(n,e){return`firestore_clients_${n}_${e}`}function ZF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _C(n,e){return`firestore_targets_${n}_${e}`}class Tv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ye(i.error.code,i.error.message))),s?new Tv(e,t,i.state,o):(nr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ye(r.error.code,r.error.message))),o?new rg(e,r.state,i):(nr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=z0();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=UO(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new Dv(e,o):(nr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yC{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yC(t.clientId,t.onlineState):(nr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vC{constructor(){this.activeTargetIds=z0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IC{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new yn(st),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=WF(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new vC),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const o=e.getItem(WF(e.persistenceKey,i));if(o){const s=Dv.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_C(this.persistenceKey,e));if(r){const i=rg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_C(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ie("SharedClientState","READ",e,t),t}setItem(e,t){Ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void nr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(s){let a=uo.oe;if(null!=s)try{const u=JSON.parse(s);Ge("number"==typeof u),a=u}catch(u){nr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==uo.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Ys(o)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Tv(this.currentUser,e,t,r),o=ZF(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const t=ZF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=_C(this.persistenceKey,e),o=new rg(e,t,r);this.setItem(i,o.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return Dv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Tv.Es(new Ar(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return rg.Es(i,t)}xs(e){return yC.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=z0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class KF{constructor(){this.no=new vC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new vC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nK{io(e){}shutdown(){}}class QF{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Av=null;function EC(){return null===Av?Av=268435456+Math.round(2147483648*Math.random()):Av++,"0x"+Av.toString(16)}const rK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iK{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ii="WebChannelConnection";class oK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){const a=EC(),u=this.vo(t,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,u,l,i).then(f=>(Ie("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw Wi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Td,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){return`${this.wo}/v1/${r}:${rK[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const o=EC();return new Promise((s,a)=>{const u=new bO;u.setWithCredentials(!0),u.listenOnce(CO.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qy.NO_ERROR:const f=u.getResponseJson();Ie(ii,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Qy.TIMEOUT:Ie(ii,`RPC '${e}' ${o} timed out`),a(new ye(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Qy.HTTP_ERROR:const m=u.getStatus();if(Ie(ii,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const S=function(L){const Q=L.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN}(E.status);a(new ye(S,E.message))}else a(new ye(ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ye(ne.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Ie(ii,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);Ie(ii,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=EC(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=AO(),a=DO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new wO({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=o.join("");Ie(ii,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=s.createWebChannel(f,u);let y=!1,E=!1;const S=new iK({lo:L=>{E?Ie(ii,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(y||(Ie(ii,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ie(ii,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},ho:()=>m.close()}),k=(L,Q,z)=>{L.listen(Q,J=>{try{z(J)}catch(le){setTimeout(()=>{throw le},0)}})};return k(m,Pp.EventType.OPEN,()=>{E||(Ie(ii,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),k(m,Pp.EventType.CLOSE,()=>{E||(E=!0,Ie(ii,`RPC '${e}' stream ${i} transport closed`),S.po())}),k(m,Pp.EventType.ERROR,L=>{E||(E=!0,Wi(ii,`RPC '${e}' stream ${i} transport errored:`,L),S.po(new ye(ne.UNAVAILABLE,"The operation could not be completed")))}),k(m,Pp.EventType.MESSAGE,L=>{var Q;if(!E){const z=L.data[0];Ge(!!z);const le=z.error||(null===(Q=z[0])||void 0===Q?void 0:Q.error);if(le){Ie(ii,`RPC '${e}' stream ${i} received error:`,le);const Ce=le.status;let je=function(B){const q=fr[B];if(void 0!==q)return jk(q)}(Ce),H=le.message;void 0===je&&(je=ne.INTERNAL,H="Unknown error status: "+Ce+" with message "+le.message),E=!0,S.po(new ye(je,H)),m.close()}else Ie(ii,`RPC '${e}' stream ${i} received:`,z),S.yo(z)}}),k(a,TO.STAT_EVENT,L=>{L.stat===S0.PROXY?Ie(ii,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===S0.NOPROXY&&Ie(ii,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}}function YF(){return typeof window<"u"?window:null}function Sv(){return typeof document<"u"?document:null}function ig(n){return new gZ(n,!0)}class bC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class JF{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new bC(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ce.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ce.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ce.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(nr(t.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new ye(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ce.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sK extends JF{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function yZ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Fe(),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(Ge(void 0===f||"string"==typeof f),wr.fromBase64String(f||"")):(Ge(void 0===f||f instanceof Buffer||f instanceof Uint8Array),wr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const f=void 0===l.code?ne.UNKNOWN:jk(l.code);return new ye(f,l.message||"")}(s);t=new Gk(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Rs(n,r.document.name),o=rr(r.document.updateTime),s=r.document.createTime?rr(r.document.createTime):Ze.min(),a=new zr({mapValue:{fields:r.document.fields}}),u=Dn.newFoundDocument(i,o,s,a);t=new hv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Rs(n,r.document),o=r.readTime?rr(r.readTime):Ze.min(),s=Dn.newNoDocument(i,o);t=new hv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Rs(n,r.document);t=new hv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Fe();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new cZ(i,o);t=new qk(r.targetId,s)}}var l;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ze.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ze.min():s.readTime?rr(s.readTime):Ze.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=J0(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=ov(u)?{documents:rF(o,u)}:{query:fv(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Qk(o,s.resumeToken);const l=K0(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ze.min())>0){a.readTime=Bd(o,s.snapshotVersion.toTimestamp());const l=K0(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function IZ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=J0(this.serializer),t.removeTarget=e,this.i_(t)}}class aK extends JF{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function vZ(n,e){return n&&n.length>0?(Ge(void 0!==e),n.map(t=>function(i,o){let s=rr(i.updateTime?i.updateTime:o);return s.isEqual(Ze.min())&&(s=rr(o)),new sZ(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=rr(e.commitTime);return this.listener.A_(r,t)}return Ge(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=J0(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qp(this.serializer,r))};this.i_(t)}}class uK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Y0(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ne.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Y0(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ye(ne.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class cK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(nr(t),this.y_=!1):Ie("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class lK{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{r.enqueueAndForget((0,ce.Z)(function*(){var u;fu(s)&&(Ie("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ce.Z)(function*(f){const m=Ae(f);m.M_.add(4),yield Zd(m),m.N_.set("Unknown"),m.M_.delete(4),yield og(m)}),function l(f){return u.apply(this,arguments)})(s))}))}),this.N_=new cK(r,i)}}function og(n){return wC.apply(this,arguments)}function wC(){return(wC=(0,ce.Z)(function*(n){if(fu(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Zd(n){return CC.apply(this,arguments)}function CC(){return(CC=(0,ce.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Pv(n,e){const t=Ae(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),AC(t)?DC(t):Yd(t).Xo()&&TC(t,e))}function Kd(n,e){const t=Ae(n),r=Yd(t);t.F_.delete(e),r.Xo()&&XF(t,e),0===t.F_.size&&(r.Xo()?r.n_():fu(t)&&t.N_.set("Unknown"))}function TC(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yd(n).P_(e)}function XF(n,e){n.L_.xe(e),Yd(n).I_(e)}function DC(n){n.L_=new dZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Yd(n).start(),n.N_.w_()}function AC(n){return fu(n)&&!Yd(n).Zo()&&n.F_.size>0}function fu(n){return 0===Ae(n).M_.size}function eV(n){n.L_=void 0}function dK(n){return SC.apply(this,arguments)}function SC(){return(SC=(0,ce.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function hK(n){return PC.apply(this,arguments)}function PC(){return(PC=(0,ce.Z)(function*(n){n.F_.forEach((e,t)=>{TC(n,e)})})).apply(this,arguments)}function fK(n,e){return RC.apply(this,arguments)}function RC(){return(RC=(0,ce.Z)(function*(n,e){eV(n),AC(n)?(n.N_.D_(e),DC(n)):n.N_.set("Unknown")})).apply(this,arguments)}function pK(n,e,t){return xC.apply(this,arguments)}function xC(){return xC=(0,ce.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof Gk&&2===e.state&&e.cause)try{yield(r=(0,ce.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.F_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.F_.delete(u),o.L_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Rv(n,r)}else if(e instanceof hv?n.L_.Ke(e):e instanceof qk?n.L_.He(e):n.L_.We(e),!t.isEqual(Ze.min()))try{const r=yield $F(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.L_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.F_.get(l);f&&o.F_.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const f=o.F_.get(u);if(!f)return;o.F_.set(u,f.withResumeToken(wr.EMPTY_BYTE_STRING,f.snapshotVersion)),XF(o,u);const m=new pa(f.target,u,l,f.sequenceNumber);TC(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),yield Rv(n,r)}var r}),xC.apply(this,arguments)}function Rv(n,e,t){return MC.apply(this,arguments)}function MC(){return(MC=(0,ce.Z)(function*(n,e,t){if(!nu(e))throw e;n.M_.add(1),yield Zd(n),n.N_.set("Offline"),t||(t=()=>$F(n.localStore)),n.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){Ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield og(n)}))})).apply(this,arguments)}function tV(n,e){return e().catch(t=>Rv(n,t,e))}function Qd(n){return NC.apply(this,arguments)}function NC(){return(NC=(0,ce.Z)(function*(n){const e=Ae(n),t=pu(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;gK(e);)try{const i=yield XZ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,mK(e,i)}catch(i){yield Rv(e,i)}nV(e)&&rV(e)})).apply(this,arguments)}function gK(n){return fu(n)&&n.v_.length<10}function mK(n,e){n.v_.push(e);const t=pu(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function nV(n){return fu(n)&&!pu(n).Zo()&&n.v_.length>0}function rV(n){pu(n).start()}function _K(n){return OC.apply(this,arguments)}function OC(){return(OC=(0,ce.Z)(function*(n){pu(n).V_()})).apply(this,arguments)}function yK(n){return kC.apply(this,arguments)}function kC(){return(kC=(0,ce.Z)(function*(n){const e=pu(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function vK(n,e,t){return FC.apply(this,arguments)}function FC(){return(FC=(0,ce.Z)(function*(n,e,t){const r=n.v_.shift(),i=G0.from(r,e,t);yield tV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Qd(n)})).apply(this,arguments)}function IK(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ce.Z)(function*(n,e){var t;e&&pu(n).E_&&(yield(t=(0,ce.Z)(function*(i,o){if(Bk(a=o.code)&&a!==ne.ABORTED){const s=i.v_.shift();pu(i).t_(),yield tV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Qd(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),nV(n)&&rV(n)}),VC.apply(this,arguments)}function iV(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,ce.Z)(function*(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=fu(t);t.M_.add(3),yield Zd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield og(t)})).apply(this,arguments)}function UC(n,e){return BC.apply(this,arguments)}function BC(){return(BC=(0,ce.Z)(function*(n,e){const t=Ae(n);e?(t.M_.delete(2),yield og(t)):e||(t.M_.add(2),yield Zd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Yd(n){return n.B_||(n.B_=function(t,r,i){const o=Ae(t);return o.f_(),new sK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:dK.bind(null,n),To:hK.bind(null,n),Ao:fK.bind(null,n),h_:pK.bind(null,n)}),n.x_.push(function(){var e=(0,ce.Z)(function*(t){t?(n.B_.t_(),AC(n)?DC(n):n.N_.set("Unknown")):(yield n.B_.stop(),eV(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function pu(n){return n.k_||(n.k_=function(t,r,i){const o=Ae(t);return o.f_(),new aK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:_K.bind(null,n),Ao:IK.bind(null,n),R_:yK.bind(null,n),A_:vK.bind(null,n)}),n.x_.push(function(){var e=(0,ce.Z)(function*(t){t?(n.k_.t_(),yield Qd(n)):(yield n.k_.stop(),n.v_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class jC{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new jC(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ye(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jd(n,e){if(nr("AsyncQueue",`${e}: ${n}`),nu(n))return new ye(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class Xd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=$p(),this.sortedSet=new yn(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oV{constructor(){this.q_=new yn(Me.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Fe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class eh{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new eh(e,t,Xd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class EK{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class bK{constructor(){this.queries=new ha(e=>Ik(e),Bp),this.onlineState="Unknown",this.z_=new Set}}function $C(n,e){return zC.apply(this,arguments)}function zC(){return(zC=(0,ce.Z)(function*(n,e){const t=Ae(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new EK,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=Jd(s,`Initialization of query '${kd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&GC(t)})).apply(this,arguments)}function HC(n,e){return qC.apply(this,arguments)}function qC(){return(qC=(0,ce.Z)(function*(n,e){const t=Ae(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),0===o.U_.length?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function wK(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&GC(t)}function CK(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const o of i.U_)o.onError(t);r.queries.delete(e)}function GC(n){n.z_.forEach(e=>{e.next()})}var WC,sV;(sV=WC||(WC={})).J_="default",sV.Cache="cache";class ZC{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==WC.Cache}}class TK{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class aV{constructor(e){this.serializer=e}Ps(e){return Rs(this.serializer,e)}Is(e){return e.metadata.exists?nF(this.serializer,e.document,!1):Dn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return rr(e)}}class DK{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Mt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new aV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||gt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ce.Z)(function*(){const t=yield function eK(n,e,t,r){return gC.apply(this,arguments)}(e.localStore,new aV(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield tK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function uV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cV{constructor(e){this.key=e}}class lV{constructor(e){this.key=e}}class dV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=gt(),this.mutatedKeys=gt(),this.Ia=bk(e),this.Ta=new Xd(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new oV,i=t?t.Ta:this.Ta;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),E=jp(this.query,m)?m:null,S=!!y&&this.mutatedKeys.has(y.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let L=!1;y&&E?y.data.isEqual(E.data)?S!==k&&(r.track({type:3,doc:E}),L=!0):this.Ra(y,E)||(r.track({type:2,doc:E}),L=!0,(u&&this.Ia(E,u)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),L=!0):y&&!E&&(r.track({type:1,doc:y}),L=!0,(u||l)&&(a=!0)),L&&(E?(s=s.add(E),o=k?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const f="F"===this.query.limitType?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort((f,m)=>function(E,S){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return k(E)-k(S)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,0!==s.length||l?{snapshot:new eh(this.query,e.Ta,o,s,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new oV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=gt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new lV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new cV(r))}),t}pa(e){this.la=e.hs,this.Pa=gt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return eh.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class AK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SK{constructor(e){this.key=e,this.wa=!1}}class PK{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new ha(a=>Ik(a),Bp),this.Da=new Map,this.Ca=new Set,this.va=new yn(Me.comparator),this.Fa=new Map,this.Ma=new aC,this.xa={},this.Oa=new Map,this.Na=Ic.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function RK(n,e){return KC.apply(this,arguments)}function KC(){return(KC=(0,ce.Z)(function*(n,e,t=!0){const r=xv(n);let i;const o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield hV(r,e,t,!0),i})).apply(this,arguments)}function xK(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,ce.Z)(function*(n,e){const t=xv(n);yield hV(t,e,!0,!1)})).apply(this,arguments)}function hV(n,e,t,r){return YC.apply(this,arguments)}function YC(){return(YC=(0,ce.Z)(function*(n,e,t,r){const i=yield Gd(n.localStore,ni(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield JC(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&Pv(n.remoteStore,i),a})).apply(this,arguments)}function JC(n,e,t,r,i){return XC.apply(this,arguments)}function XC(){return XC=(0,ce.Z)(function*(n,e,t,r,i){n.Ba=(m,y,E)=>{return(S=(0,ce.Z)(function*(L,Q,z,J){let le=Q.view.da(z);le.Xi&&(le=yield Cv(L.localStore,Q.query,!1).then(({documents:x})=>Q.view.da(x,le)));const Ce=J&&J.targetChanges.get(Q.targetId),je=J&&null!=J.targetMismatches.get(Q.targetId),H=Q.view.applyChanges(le,L.isPrimaryClient,Ce,je);return lT(L,Q.targetId,H.fa),H.snapshot}),function k(L,Q,z,J){return S.apply(this,arguments)})(n,m,y,E);var S};const o=yield Cv(n.localStore,e,!0),s=new dV(e,o.hs),a=s.da(o.documents),u=Zp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=s.applyChanges(a,n.isPrimaryClient,u);lT(n,t,l.fa);const f=new AK(e,t,s);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),XC.apply(this,arguments)}function MK(n,e,t){return eT.apply(this,arguments)}function eT(){return(eT=(0,ce.Z)(function*(n,e,t){const r=Ae(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Bp(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Wd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Kd(r.remoteStore,i.targetId),th(r,i.targetId)}).catch(tu))):(th(r,i.targetId),yield Wd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function NK(n,e){return tT.apply(this,arguments)}function tT(){return(tT=(0,ce.Z)(function*(n,e){const t=Ae(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Kd(t.remoteStore,r.targetId))})).apply(this,arguments)}function nT(){return(nT=(0,ce.Z)(function*(n,e,t){const r=ET(n);try{const i=yield function(s,a){const u=Ae(s),l=Nn.now(),f=a.reduce((E,S)=>E.add(S.key),gt());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Ki(),k=gt();return u.os.getEntries(E,f).next(L=>{S=L,S.forEach((Q,z)=>{z.isValidDocument()||(k=k.add(Q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,S)).next(L=>{m=L;const Q=[];for(const z of a){const J=uZ(z,m.get(z.key).overlayedDocument);null!=J&&Q.push(new fa(z.key,J,ik(J.value.mapValue),On.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,Q,a)}).next(L=>{y=L;const Q=L.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(E,L.batchId,Q)})}).then(()=>({batchId:y.batchId,changes:Ck(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.xa[s.currentUser.toKey()];l||(l=new yn(st)),l=l.insert(a,u),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield ga(r,i.changes),yield Qd(r.remoteStore)}catch(i){const o=Jd(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function fV(n,e){return rT.apply(this,arguments)}function rT(){return(rT=(0,ce.Z)(function*(n,e){const t=Ae(n);try{const r=yield function JZ(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(o,f.addedDocuments,m)));let E=y.withSequenceNumber(o.currentSequenceNumber);var k,L,Q;null!==e.targetMismatches.get(m)?E=E.withResumeToken(wr.EMPTY_BYTE_STRING,Ze.min()).withLastLimboFreeSnapshotVersion(Ze.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),L=E,Q=f,(0===(k=y).resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,E))});let u=Ki(),l=gt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(zF(o,s,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(Ze.min())){const f=t.Qr.getLastRemoteSnapshotVersion(o).next(m=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.ns=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Fa.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?Ge(s.wa):i.removedDocuments.size>0&&(Ge(s.wa),s.wa=!1))}),yield ga(t,r,e)}catch(r){yield tu(r)}})).apply(this,arguments)}function pV(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((o,s)=>{const a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Ae(s);u.onlineState=a;let l=!1;u.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&GC(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kK(n,e,t){return iT.apply(this,arguments)}function iT(){return(iT=(0,ce.Z)(function*(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),o=i&&i.key;if(o){let s=new yn(Me.comparator);s=s.insert(o,Dn.newNoDocument(o,Ze.min()));const a=gt().add(o),u=new Wp(Ze.min(),new Map,new yn(st),s,a);yield fV(r,u),r.va=r.va.remove(o),r.Fa.delete(e),dT(r)}else yield Wd(r.localStore,e,!1).then(()=>th(r,e,t)).catch(tu)})).apply(this,arguments)}function FK(n,e){return oT.apply(this,arguments)}function oT(){return(oT=(0,ce.Z)(function*(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=yield function YZ(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const m=l.batch,y=m.keys();let E=Y.resolve();return y.forEach(S=>{E=E.next(()=>f.getEntry(u,S)).next(k=>{const L=l.docVersions.get(S);Ge(null!==L),k.version.compareTo(L)<0&&(m.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),f.addEntry(k)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=gt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);cT(t,r,null),uT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ga(t,i)}catch(i){yield tu(i)}})).apply(this,arguments)}function VK(n,e,t){return sT.apply(this,arguments)}function sT(){return(sT=(0,ce.Z)(function*(n,e,t){const r=Ae(n);try{const i=yield function(s,a){const u=Ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(m=>(Ge(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(l,m))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);cT(r,e,t),uT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ga(r,i)}catch(i){yield tu(i)}})).apply(this,arguments)}function aT(){return(aT=(0,ce.Z)(function*(n,e){const t=Ae(n);fu(t.remoteStore)||Ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Jd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function uT(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function cT(n,e,t){const r=Ae(n);let i=r.xa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function th(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||gV(n,r)})}function gV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Kd(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),dT(n))}function lT(n,e,t){for(const r of t)r instanceof cV?(n.Ma.addReference(r.key,e),UK(n,r)):r instanceof lV?(Ie("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||gV(n,r.key)):Fe()}function UK(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ie("SyncEngine","New document in limbo: "+t),n.Ca.add(r),dT(n))}function dT(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Me(Mt.fromString(e)),r=n.Na.next();n.Fa.set(r,new SK(t)),n.va=n.va.insert(t,r),Pv(n.remoteStore,new pa(ni(Nd(t.path)),r,"TargetPurposeLimboResolution",uo.oe))}}function ga(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,ce.Z)(function*(n,e,t){const r=Ae(n),i=[],o=[],s=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=hC.Ki(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Sa.h_(i),yield(a=(0,ce.Z)(function*(l,f){const m=Ae(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,E=>Y.forEach(E.qi,S=>m.persistence.referenceDelegate.addReference(y,E.targetId,S)).next(()=>Y.forEach(E.Qi,S=>m.persistence.referenceDelegate.removeReference(y,E.targetId,S)))))}catch(y){if(!nu(y))throw y;Ie("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const S=m.ns.get(E),L=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);m.ns=m.ns.insert(E,L)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,o))}),hT.apply(this,arguments)}function BK(n,e){return fT.apply(this,arguments)}function fT(){return(fT=(0,ce.Z)(function*(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=yield jF(t.localStore,e);t.currentUser=e,(o=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new ye(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ga(t,r.us)}var o})).apply(this,arguments)}function jK(n,e){const t=Ae(n),r=t.Fa.get(e);if(r&&r.wa)return gt().add(r.key);{let i=gt();const o=t.Da.get(e);if(!o)return i;for(const s of o){const a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function $K(n,e){return pT.apply(this,arguments)}function pT(){return(pT=(0,ce.Z)(function*(n,e){const t=Ae(n),r=yield Cv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&lT(t,e.targetId,i.fa),i})).apply(this,arguments)}function zK(n,e){return gT.apply(this,arguments)}function gT(){return(gT=(0,ce.Z)(function*(n,e){const t=Ae(n);return qF(t.localStore,e).then(r=>ga(t,r))})).apply(this,arguments)}function HK(n,e,t,r){return mT.apply(this,arguments)}function mT(){return(mT=(0,ce.Z)(function*(n,e,t,r){const i=Ae(n),o=yield function(a,u){const l=Ae(a),f=Ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(y=>y?l.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===t?yield Qd(i.remoteStore):"acknowledged"===t||"rejected"===t?(cT(i,e,r||null),uT(i,e),u=e,Ae(Ae(i.localStore).mutationQueue).Mn(u)):Fe(),yield ga(i,o)):Ie("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function _T(){return(_T=(0,ce.Z)(function*(n,e){const t=Ae(n);if(xv(t),ET(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mV(t,r.toArray());t.La=!0,yield UC(t.remoteStore,!0);for(const o of i)Pv(t.remoteStore,o)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(th(t,s),Wd(t.localStore,s,!0))),Kd(t.remoteStore,s)}),yield i,yield mV(t,r),function(s){const a=Ae(s);a.Fa.forEach((u,l)=>{Kd(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new yn(Me.comparator)}(t),t.La=!1,yield UC(t.remoteStore,!1)}})).apply(this,arguments)}function mV(n,e,t){return yT.apply(this,arguments)}function yT(){return(yT=(0,ce.Z)(function*(n,e,t){const r=Ae(n),i=[],o=[];for(const s of e){let a;const u=r.Da.get(s);if(u&&0!==u.length){a=yield Gd(r.localStore,ni(u[0]));for(const l of u){const f=r.ba.get(l),m=yield $K(r,f);m.snapshot&&o.push(m.snapshot)}}else{const l=yield HF(r.localStore,s);a=yield Gd(r.localStore,l),yield JC(r,_V(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})).apply(this,arguments)}function _V(n){return mk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GK(n){return t=Ae(n).localStore,Ae(Ae(t).persistence).Bi();var t}function WK(n,e,t,r){return vT.apply(this,arguments)}function vT(){return(vT=(0,ce.Z)(function*(n,e,t,r){const i=Ae(n);if(i.La)return void Ie("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield qF(i.localStore,Ek(o[0])),a=Wp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wr.EMPTY_BYTE_STRING);yield ga(i,s,a);break}case"rejected":yield Wd(i.localStore,e,!0),th(i,e,r);break;default:Fe()}})).apply(this,arguments)}function ZK(n,e,t){return IT.apply(this,arguments)}function IT(){return(IT=(0,ce.Z)(function*(n,e,t){const r=xv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ie("SyncEngine","Adding an already active target "+i);continue}const o=yield HF(r.localStore,i),s=yield Gd(r.localStore,o);yield JC(r,_V(o),s.targetId,!1,s.resumeToken),Pv(r.remoteStore,s)}for(const i of t)r.Da.has(i)&&(yield Wd(r.localStore,i,!1).then(()=>{Kd(r.remoteStore,i),th(r,i)}).catch(tu))}})).apply(this,arguments)}function xv(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kK.bind(null,e),e.Sa.h_=wK.bind(null,e.eventManager),e.Sa.ka=CK.bind(null,e.eventManager),e}function ET(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VK.bind(null,e),e}class sg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ce.Z)(function*(){t.serializer=ig(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return BF(this.persistence,new UF,e.initialUser,this.serializer)}createPersistence(e){return new uC(Ev.Hr,this.serializer)}createSharedClientState(e){return new KF}terminate(){var e=this;return(0,ce.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class bT extends sg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ce.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield ET(r.Qa.syncEngine),yield Qd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return BF(this.persistence,new UF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new RF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new I7(t,this.persistence);return new v7(e.asyncQueue,r)}createPersistence(e){const t=dC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ri.withCacheSize(this.cacheSizeBytes):ri.DEFAULT;return new lC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,YF(),Sv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new KF}}class yV extends bT{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ce.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof IC&&(r.sharedClientState.syncEngine={Zs:HK.bind(null,i),Xs:WK.bind(null,i),eo:ZK.bind(null,i),Bi:GK.bind(null,i),Ys:zK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,ce.Z)(function*(s){yield function qK(n,e){return _T.apply(this,arguments)}(r.Qa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=YF();if(!IC.D(t))throw new ye(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nh{initialize(e,t){var r=this;return(0,ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=BK.bind(null,r.syncEngine),yield UC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bK}createDatastore(e){const t=ig(e.databaseInfo.databaseId),r=new oK(e.databaseInfo);return new uK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>pV(this.syncEngine,t,0),a=QF.D()?new QF:new nK,new lK(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,l,f){const m=new PK(i,o,s,a,u,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ce.Z)(function*(){var t,r;yield(r=(0,ce.Z)(function*(o){const s=Ae(o);Ie("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield Zd(s),s.O_.shutdown(),s.N_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function vV(n,e=10240){let t=0;return{read:()=>(0,ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YK{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new br,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ce.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const o=yield e.Ha(i);return new TK(JSON.parse(o),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ce.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ce.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ye(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ce.Z)(function*(s,a){const u=Ae(s),l={documents:a.map(E=>Kp(u.serializer,E))},f=yield u.xo("BatchGetDocuments",u.serializer.databaseId,Mt.emptyPath(),l,a.length),m=new Map;f.forEach(E=>{const S=function _Z(n,e){return"found"in e?function(r,i){Ge(!!i.found);const o=Rs(r,i.found.name),s=rr(i.found.updateTime),a=i.found.createTime?rr(i.found.createTime):Ze.min(),u=new zr({mapValue:{fields:i.found.fields}});return Dn.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Ge(!!i.missing),Ge(!!i.readTime);const o=Rs(r,i.missing),s=rr(i.readTime);return Dn.newNoDocument(o,s)}(n,e):Fe()}(u.serializer,E);m.set(S.key.toString(),S)});const y=[];return a.forEach(E=>{const S=m.get(E.toString());Ge(!!S),y.push(S)}),y}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Me.fromPath(i);e.mutations.push(new H0(o,e.precondition(o)))}),yield(r=(0,ce.Z)(function*(o,s){const a=Ae(o),u={writes:s.map(l=>Qp(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,Mt.emptyPath(),u)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fe();t=Ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ye(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ze.min())?On.exists(!1):On.updateTime(t):On.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ze.min()))throw new ye(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return On.updateTime(t)}return On.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XK{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new bC(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ce.Z)(function*(){const t=new JK(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.nu(o)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Mp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Bk(t)}return!1}}class eQ{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=xO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,ce.Z)(function*(a){Ie("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(Ie("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ye(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Jd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Nv(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ce.Z)(function*(o){r.isEqual(o)||(yield jF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),wT.apply(this,arguments)}function CT(n,e){return TT.apply(this,arguments)}function TT(){return(TT=(0,ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DT(n);Ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function IV(n){return"FirebaseError"===n.name?n.code===ne.FAILED_PRECONDITION||n.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function DT(n){return AT.apply(this,arguments)}function AT(){return(AT=(0,ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Nv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!IV(t))throw t;Wi("Error using user provided cache. Falling back to memory cache: "+t),yield Nv(n,new sg)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),yield Nv(n,new sg);return n._offlineComponents})).apply(this,arguments)}function Ov(n){return ST.apply(this,arguments)}function ST(){return(ST=(0,ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield CT(n,n._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),yield CT(n,new nh))),n._onlineComponents})).apply(this,arguments)}function EV(n){return DT(n).then(e=>e.persistence)}function rh(n){return DT(n).then(e=>e.localStore)}function bV(n){return Ov(n).then(e=>e.remoteStore)}function PT(n){return Ov(n).then(e=>e.syncEngine)}function ih(n){return RT.apply(this,arguments)}function RT(){return(RT=(0,ce.Z)(function*(n){const e=yield Ov(n),t=e.eventManager;return t.onListen=RK.bind(null,e.syncEngine),t.onUnlisten=MK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NK.bind(null,e.syncEngine),t})).apply(this,arguments)}function CV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(o,s,a,u,l){const f=new Mv({next:y=>{s.enqueueAndForget(()=>HC(o,m));const E=y.docs.has(a);!E&&y.fromCache?l.reject(new ye(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?l.reject(new ye(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new ZC(Nd(a.path),f,{includeMetadataChanges:!0,ra:!0});return $C(o,m)}(yield ih(n),n.asyncQueue,e,t,r)})),r.promise}function TV(n,e,t={}){const r=new br;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(o,s,a,u,l){const f=new Mv({next:y=>{s.enqueueAndForget(()=>HC(o,m)),y.fromCache&&"server"===u.source?l.reject(new ye(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new ZC(a,f,{includeMetadataChanges:!0,ra:!0});return $C(o,m)}(yield ih(n),n.asyncQueue,e,t,r)})),r.promise}function DV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const AV=new Map;function xT(n,e,t){if(!t)throw new ye(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SV(n,e,t,r){if(!0===e&&!0===r)throw new ye(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PV(n){if(!Me.isDocumentKey(n))throw new ye(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RV(n){if(Me.isDocumentKey(n))throw new ye(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Fe()}function Et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kv(n);throw new ye(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xV(n,e){if(e<=0)throw new ye(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class MV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ye(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ye(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=DV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ye(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ye(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new a7;switch(r.type){case"firstParty":return new d7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=AV.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),AV.delete(t),r.terminate())}(this),Promise.resolve()}}function NV(n,e,t,r={}){var i;const o=(n=Et(n,ag))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Ar.MOCK_USER;else{a=(0,ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ye(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ar(l)}n._authCredentials=new u7(new PO(a,u))}}class Hr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hr(this.firestore,e,this._query)}}class An{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class xs extends Hr{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new Me(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function OV(n,e,...t){if(n=(0,ht.m9)(n),xT("collection","path",e),n instanceof ag){const r=Mt.fromString(e,...t);return RV(r),new xs(n,null,r)}{if(!(n instanceof An||n instanceof xs))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return RV(r),new xs(n.firestore,null,r)}}function Fv(n,e,...t){if(n=(0,ht.m9)(n),1===arguments.length&&(e=xO.newId()),xT("doc","path",e),n instanceof ag){const r=Mt.fromString(e,...t);return PV(r),new An(n,null,new Me(r))}{if(!(n instanceof An||n instanceof xs))throw new ye(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(e,...t));return PV(r),new An(n.firestore,n instanceof xs?n.converter:null,new Me(r))}}function kV(n,e){return n=(0,ht.m9)(n),e=(0,ht.m9)(e),(n instanceof An||n instanceof xs)&&(e instanceof An||e instanceof xs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MT(n,e){return n=(0,ht.m9)(n),e=(0,ht.m9)(e),n instanceof Hr&&e instanceof Hr&&n.firestore===e.firestore&&Bp(n._query,e._query)&&n.converter===e.converter}class fQ{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new bC(this,"async_queue_retry"),this.hu=()=>{const t=Sv();t&&Ie("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=Sv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Sv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new br;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ce.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!nu(t))throw t;Ie("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,nr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=jC.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&Fe()}verifyOperationInProgress(){}du(){var e=this;return(0,ce.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function NT(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class pQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class an extends ag{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FV(this),this._firestoreClient.terminate()}}function mQ(n,e){const t="object"==typeof n?n:(0,Gn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Gn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,ht.P0)("firestore");o&&NV(i,...o)}return i}function kn(n){return n._firestoreClient||FV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FV(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j7(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,DV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new eQ(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function VV(n,e,t){const r=new br;return n.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield Nv(n,t),yield CT(n,e),r.resolve()}catch(i){const o=i;if(!IV(o))throw o;Wi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function LV(n){if(n._initialized||n._terminated)throw new ye(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ms(wr.fromBase64String(e))}catch(t){throw new ye(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ms(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ma{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ye(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._methodName=e}}class Vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}const DQ=/^__.*__$/;class AQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ld(e,this.data,t,this.fieldTransforms)}}class UV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class Lv{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Lv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return jv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(BV(this.fu)&&DQ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class SQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ig(e)}Fu(e,t,r,i=!1){return new Lv({fu:e,methodName:t,vu:r,path:Tn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wc(n){const e=n._freezeSettings(),t=ig(n._databaseId);return new SQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Uv(n,e,t,r,i,o={}){const s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);BT("Data must be an object, but it was:",s,r);const a=zV(r,s);let u,l;if(o.merge)u=new Zi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const m of o.mergeFields){const y=lg(e,m,t);if(!s.contains(y))throw new ye(ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);qV(f,y)||f.push(y)}u=new Zi(f),l=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,l=s.fieldTransforms;return new AQ(new zr(a),u,l)}class cg extends bc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cg}}function jV(n,e,t){return new Lv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OT extends bc{_toFieldTransform(e){return new Hp(e.path,new Fd)}isEqual(e){return e instanceof OT}}class kT extends bc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=jV(this,e,!0),r=this.Mu.map(o=>Cc(o,t)),i=new fc(r);return new Hp(e.path,i)}isEqual(e){return e instanceof kT&&(0,ht.vZ)(this.Mu,e.Mu)}}class FT extends bc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=jV(this,e,!0),r=this.Mu.map(o=>Cc(o,t)),i=new pc(r);return new Hp(e.path,i)}isEqual(e){return e instanceof FT&&(0,ht.vZ)(this.Mu,e.Mu)}}class VT extends bc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Vd(e.serializer,Sk(e.serializer,this.xu));return new Hp(e.path,t)}isEqual(e){return e instanceof VT&&this.xu===e.xu}}function LT(n,e,t,r){const i=n.Fu(1,e,t);BT("Data must be an object, but it was:",i,r);const o=[],s=zr.empty();ru(r,(u,l)=>{const f=Bv(e,u,t);l=(0,ht.m9)(l);const m=i.Su(f);if(l instanceof cg)o.push(f);else{const y=Cc(l,m);null!=y&&(o.push(f),s.set(f,y))}});const a=new Zi(o);return new UV(s,a,i.fieldTransforms)}function UT(n,e,t,r,i,o){const s=n.Fu(1,e,t),a=[lg(e,r,t)],u=[i];if(o.length%2!=0)throw new ye(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(lg(e,o[y])),u.push(o[y+1]);const l=[],f=zr.empty();for(let y=a.length-1;y>=0;--y)if(!qV(l,a[y])){const E=a[y];let S=u[y];S=(0,ht.m9)(S);const k=s.Su(E);if(S instanceof cg)l.push(E);else{const L=Cc(S,k);null!=L&&(l.push(E),f.set(E,L))}}const m=new Zi(l);return new UV(f,m,s.fieldTransforms)}function $V(n,e,t,r=!1){return Cc(t,n.Fu(r?4:3,e))}function Cc(n,e){if(HV(n=(0,ht.m9)(n)))return BT("Unsupported field value:",e,n),zV(n,e);if(n instanceof bc)return function(r,i){if(!BV(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Cc(a,i.bu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,ht.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Sk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Nn.fromDate(r);return{timestampValue:Bd(i.serializer,o)}}if(r instanceof Nn){const o=new Nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bd(i.serializer,o)}}if(r instanceof Vv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ms)return{bytesValue:Qk(i.serializer,r._byteString)};if(r instanceof An){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Q0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${kv(r)}`)}(n,e)}function zV(n,e){const t={};return KO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(n,(r,i)=>{const o=Cc(i,e.pu(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function HV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof Vv||n instanceof Ms||n instanceof An||n instanceof bc)}function BT(n,e,t){if(!HV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=kv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function lg(n,e,t){if((e=(0,ht.m9)(e))instanceof ma)return e._internalPath;if("string"==typeof e)return Bv(n,e);throw jv("Field path arguments must be of type string or ",n,!1,void 0,t)}const PQ=new RegExp("[~\\*/\\[\\]]");function Bv(n,e,t){if(e.search(PQ)>=0)throw jv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ma(...e.split("."))._internalPath}catch{throw jv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jv(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new ye(ne.INVALID_ARGUMENT,a+n+u)}function qV(n,e){return n.some(t=>t.isEqual(e))}class dg{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($v("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RQ extends dg{data(){return super.data()}}function $v(n,e){return"string"==typeof e?Bv(n,e):e instanceof ma?e._internalPath:e._delegate._internalPath}function GV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ye(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jT{}class hg extends jT{}function gu(n,e,...t){let r=[];e instanceof jT&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof oh).length,a=o.filter(u=>u instanceof fg).length;if(s>1||s>0&&a>0)throw new ye(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fg extends hg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fg(e,t,r)}_apply(e){const t=this._parse(e);return QV(e._query,t),new Hr(e.firestore,e.converter,$0(e._query,t))}_parse(e){const t=wc(e.firestore);return function(o,s,a,u,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new ye(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){KV(m,f);const E=[];for(const S of m)E.push(ZV(u,o,S));y={arrayValue:{values:E}}}else y=ZV(u,o,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||KV(m,f),y=$V(a,"where",m,"in"===f||"not-in"===f);return Nt.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class oh extends jT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:tn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)QV(s,u),s=$0(s,u)}(e._query,t),new Hr(e.firestore,e.converter,$0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $T extends hg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $T(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new ye(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ye(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lp(o,s)}(e._query,this._field,this._direction);return new Hr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new da(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class zv extends hg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new zv(e,t,r)}_apply(e){return new Hr(e.firestore,e.converter,av(e._query,this._limit,this._limitType))}}class Hv extends hg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Hv(e,t,r)}_apply(e){const t=WV(e,this.type,this._docOrFields,this._inclusive);return new Hr(e.firestore,e.converter,(o=t,new da((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class qv extends hg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qv(e,t,r)}_apply(e){const t=WV(e,this.type,this._docOrFields,this._inclusive);return new Hr(e.firestore,e.converter,(o=t,new da((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function WV(n,e,t,r){if(t[0]=(0,ht.m9)(t[0]),t[0]instanceof dg)return function(o,s,a,u,l){if(!u)throw new ye(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Od(o))if(m.field.isKeyField())f.push(dc(s,u.key));else{const y=u.data.field(m.field);if(ev(y))throw new ye(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new ye(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(y)}return new uu(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wc(n.firestore);return function(s,a,u,l,f,m){const y=s.explicitOrderBy;if(f.length>y.length)throw new ye(ne.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let S=0;S<f.length;S++){const k=f[S];if(y[S].field.isKeyField()){if("string"!=typeof k)throw new ye(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof k}`);if(!j0(s)&&-1!==k.indexOf("/"))throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${k}' contains a slash.`);const L=s.path.child(Mt.fromString(k));if(!Me.isDocumentKey(L))throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const Q=new Me(L);E.push(dc(a,Q))}else{const L=$V(u,l,k);E.push(L)}}return new uu(E,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZV(n,e,t){if("string"==typeof(t=(0,ht.m9)(t))){if(""===t)throw new ye(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!j0(e)&&-1!==t.indexOf("/"))throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Mt.fromString(t));if(!Me.isDocumentKey(r))throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dc(n,new Me(r))}if(t instanceof An)return dc(n,t._key);throw new ye(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kv(t)}.`)}function KV(n,e){if(!Array.isArray(n)||0===n.length)throw new ye(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QV(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ye(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zT{convertValue(e,t="none"){switch(su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ru(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new Vv(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const t=ca(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Mt.fromString(e);Ge(uF(r));const i=new iu(r.get(1),r.get(3)),o=new Me(r.popFirst(5));return i.isEqual(t)||nr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Gv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UQ extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}class Tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _a extends dg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($v("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pg extends _a{data(e={}){return super.data(e)}}class mu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Tc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pg(this._firestore,this._userDataWriter,r.key,r,new Tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:jQ(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}function JV(n,e){return n instanceof _a&&e instanceof _a?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mu&&e instanceof mu&&n._firestore===e._firestore&&MT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class _u extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}function XV(n,e,t){n=Et(n,An);const r=Et(n.firestore,an),i=Gv(n.converter,e,t);return sh(r,[Uv(wc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,On.none())])}function e2(n,e,t,...r){n=Et(n,An);const i=Et(n.firestore,an),o=wc(i);let s;return s="string"==typeof(e=(0,ht.m9)(e))||e instanceof ma?UT(o,"updateDoc",n._key,e,t,r):LT(o,"updateDoc",n._key,e),sh(i,[s.toMutation(n._key,On.exists(!0))])}function t2(n,...e){var t,r,i;n=(0,ht.m9)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||NT(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(NT(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,l,f;if(n instanceof An)l=Et(n.firestore,an),f=Nd(n._key.path),u={next:m=>{e[s]&&e[s](HT(l,n,m))},error:e[s+1],complete:e[s+2]};else{const m=Et(n,Hr);l=Et(m.firestore,an),f=m._query;const y=new _u(l);u={next:E=>{e[s]&&e[s](new mu(l,y,m,E))},error:e[s+1],complete:e[s+2]},GV(n._query)}return function(y,E,S,k){const L=new Mv(k),Q=new ZC(E,L,S);return y.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return $C(yield ih(y),Q)})),()=>{L.$a(),y.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return HC(yield ih(y),Q)}))}}(kn(l),f,a,u)}function sh(n,e){return function(r,i){const o=new br;return r.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function OK(n,e,t){return nT.apply(this,arguments)}(yield PT(r),i,o)})),o.promise}(kn(n),e)}function HT(n,e,t){const r=t.docs.get(e._key),i=new _u(n);return new _a(n,i,e._key,r,new Tc(t.hasPendingWrites,t.fromCache),e.converter)}const oY={maxAttempts:5};class n2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wc(e)}set(e,t,r){this._verifyNotCommitted();const i=yu(e,this._firestore),o=Gv(i.converter,t,r),s=Uv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,On.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=yu(e,this._firestore);let s;return s="string"==typeof(t=(0,ht.m9)(t))||t instanceof ma?UT(this._dataReader,"WriteBatch.update",o._key,t,r,i):LT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,On.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yu(e,this._firestore);return this._mutations=this._mutations.concat(new Ud(t._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yu(n,e){if((n=(0,ht.m9)(n)).firestore!==e)throw new ye(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=wc(t)}get(t){const r=yu(t,this._firestore),i=new UQ(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Fe();const s=o[0];if(s.isFoundDocument())return new dg(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new dg(this._firestore,i,r._key,null,r.converter);throw Fe()})}set(t,r,i){const o=yu(t,this._firestore),s=Gv(o.converter,r,i),a=Uv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=yu(t,this._firestore);let a;return a="string"==typeof(r=(0,ht.m9)(r))||r instanceof ma?UT(this._dataReader,"Transaction.update",s._key,r,i,o):LT(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=yu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yu(e,this._firestore),r=new _u(this._firestore);return super.get(e).then(i=>new _a(this._firestore,r,t._key,i._document,new Tc(!1,!1),t.converter))}}function GT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function s2(){if(typeof Uint8Array>"u")throw new ye("unimplemented","Uint8Arrays are not available in this environment.")}function a2(){if(!function U7(){return typeof atob<"u"}())throw new ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Td=Gn.SDK_VERSION,(0,Gn._registerComponent)(new Zy.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new an(new c7(r.getProvider("auth-internal")),new h7(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ye(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(SO,"4.6.3",e),(0,Gn.registerVersion)(SO,"4.6.3","esm2017")}();class gg{constructor(e){this._delegate=e}static fromBase64String(e){return a2(),new gg(Ms.fromBase64String(e))}static fromUint8Array(e){return s2(),new gg(Ms.fromUint8Array(e))}toBase64(){return a2(),this._delegate.toBase64()}toUint8Array(){return s2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function WT(n){return function mY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _Y{enableIndexedDbPersistence(e,t){return function _Q(n,e){LV(n=Et(n,an));const t=kn(n);if(t._uninitializedComponentsProvider)throw new ye(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new nh;return VV(t,i,new bT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yQ(n){LV(n=Et(n,an));const e=kn(n);if(e._uninitializedComponentsProvider)throw new ye(ne.FAILED_PRECONDITION,"SDK cache is already specified.");Wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new nh;return VV(e,r,new yV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vQ(n){if(n._initialized&&!n._terminated)throw new ye(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(t=(0,ce.Z)(function*(i){if(!Ds.D())return Promise.resolve();const o=i+"main";yield Ds.delete(o)}),function r(i){return t.apply(this,arguments)})(dC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class u2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof iu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){NV(this._delegate,e,t,r)}enableNetwork(){return function EQ(n){return function tQ(n){return n.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield EV(n),t=yield bV(n);return e.setNetworkEnabled(!0),function(i){const o=Ae(i);return o.M_.delete(0),og(o)}(t)}))}(kn(n=Et(n,an)))}(this._delegate)}disableNetwork(){return function bQ(n){return function nQ(n){return n.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield EV(n),t=yield bV(n);return e.setNetworkEnabled(!1),(r=(0,ce.Z)(function*(o){const s=Ae(o);s.M_.add(0),yield Zd(s),s.N_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(kn(n=Et(n,an)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,SV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IQ(n){return function(t){const r=new br;return t.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function LK(n,e){return aT.apply(this,arguments)}(yield PT(t),r)})),r.promise}(kn(n=Et(n,an)))}(this._delegate)}onSnapshotsInSync(e){return function QQ(n,e){return function sQ(n,e){const t=new Mv(e);return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return i=yield ih(n),o=t,Ae(i).z_.add(o),void o.next();var i,o})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return i=yield ih(n),o=t,void Ae(i).z_.delete(o);var i,o}))}}(kn(n=Et(n,an)),NT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ah(this,OV(this._delegate,e))}catch(t){throw Ci(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ao(this,Fv(this._delegate,e))}catch(t){throw Ci(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ti(this,function hQ(n,e){if(n=Et(n,ag),xT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ye(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hr(n,null,(r=e,new da(Mt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ci(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aY(n,e,t){n=Et(n,an);const r=Object.assign(Object.assign({},oY),t);return function(o){if(o.maxAttempts<1)throw new ye(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new br;return o.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const l=yield function wV(n){return Ov(n).then(e=>e.datastore)}(o);new XK(o.asyncQueue,l,a,s,u).Xa()})),u.promise}(kn(n),i=>e(new sY(n,i)),r)}(this._delegate,t=>e(new c2(this,t)))}batch(){return kn(this._delegate),new l2(new n2(this._delegate,e=>sh(this._delegate,e)))}loadBundle(e){return function wQ(n,e){const t=kn(n=Et(n,an)),r=new pQ;return function aQ(n,e,t,r){const i=function(s,a){let u;return u="string"==typeof s?$k().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return vV(f,m);if(f instanceof ArrayBuffer)return vV(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new YK(f,a);var f}(t,ig(e));n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function KK(n,e,t){const r=Ae(n);var i;(i=(0,ce.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(S,k){const L=Ae(S),Q=rr(k.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",z=>L.$r.getBundleMetadata(z,k.id)).then(z=>!!z&&z.createTime.compareTo(Q)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(S=l).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);u._updateProgress(uV(l));const f=new DK(l,s.localStore,a.serializer);let m=yield a.qa();for(;m;){const E=yield f._a(m);E&&u._updateProgress(E),m=yield a.qa()}const y=yield f.complete();return yield ga(s,y.ca,void 0),yield function(S,k){const L=Ae(S);return L.persistence.runTransaction("Save bundle","readwrite",Q=>L.$r.saveBundleMetadata(Q,k))}(s.localStore,l),u._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return Wi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var S}),function o(s,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield PT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function CQ(n,e){return function uQ(n,e){return n.asyncQueue.enqueue((0,ce.Z)(function*(){return function(r,i){const o=Ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield rh(n),e)}))}(kn(n=Et(n,an)),e).then(t=>t?new Hr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ti(this,t):null)}}class Zv extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new gg(new Ms(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ao.forKey(t,this.firestore,null)}}class c2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Zv(e)}get(e){const t=Ac(e);return this._delegate.get(t).then(r=>new mg(this._firestore,new _a(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ac(e);return r?(GT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ac(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}}class l2{constructor(e){this._delegate=e}set(e,t,r){const i=Ac(e);return r?(GT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ac(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _g(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Dc(e,new Zv(e),t),i.set(t,o)),o}}Dc.INSTANCES=new WeakMap;class Ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ao(t,new An(t._delegate,r,new Me(e)))}static forKey(e,t,r){return new Ao(t,new An(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ah(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ah(this.firestore,OV(this._delegate,e))}catch(t){throw Ci(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ht.m9)(e))instanceof An&&kV(this._delegate,e)}set(e,t){t=GT("DocumentReference.set",t);try{return t?XV(this._delegate,e,t):XV(this._delegate,e)}catch(r){throw Ci(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?e2(this._delegate,e):e2(this._delegate,e,t,...r)}catch(i){throw Ci(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ZQ(n){return sh(Et(n.firestore,an),[new Ud(n._key,On.none())])}(this._delegate)}onSnapshot(...e){const t=d2(e),r=h2(e,i=>new mg(this.firestore,new _a(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return t2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function zQ(n){n=Et(n,An);const e=Et(n.firestore,an),t=kn(e),r=new _u(e);return function rQ(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(r=(0,ce.Z)(function*(o,s,a){try{const u=yield function(f,m){const y=Ae(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ye(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Jd(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield rh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new _a(e,r,n._key,i,new Tc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HQ(n){n=Et(n,An);const e=Et(n.firestore,an);return CV(kn(e),n._key,{source:"server"}).then(t=>HT(e,n,t))}(this._delegate):function $Q(n){n=Et(n,An);const e=Et(n.firestore,an);return CV(kn(e),n._key).then(t=>HT(e,n,t))}(this._delegate),t.then(r=>new mg(this.firestore,new _a(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ao(this.firestore,this._delegate.withConverter(e?Dc.getInstance(this.firestore,e):null))}}function Ci(n,e,t){return n.message=n.message.replace(e,t),n}function d2(n){for(const e of n)if("object"==typeof e&&!WT(e))return e;return{}}function h2(n,e){var t,r;let i;return i=WT(n[0])?n[0]:WT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return JV(this._delegate,e._delegate)}}class _g extends mg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function s7(n,e){n||Fe()}(void 0!==t),t}}class Ti{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Zv(e)}where(e,t,r){try{return new Ti(this.firestore,gu(this._delegate,function xQ(n,e,t){const r=e,i=$v("where",n);return fg._create(i,r,t)}(e,t,r)))}catch(i){throw Ci(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ti(this.firestore,gu(this._delegate,function MQ(n,e="asc"){const t=e,r=$v("orderBy",n);return $T._create(r,t)}(e,t)))}catch(r){throw Ci(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ti(this.firestore,gu(this._delegate,function NQ(n){return xV("limit",n),zv._create("limit",n,"F")}(e)))}catch(t){throw Ci(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ti(this.firestore,gu(this._delegate,function OQ(n){return xV("limitToLast",n),zv._create("limitToLast",n,"L")}(e)))}catch(t){throw Ci(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ti(this.firestore,gu(this._delegate,function kQ(...n){return Hv._create("startAt",n,!0)}(...e)))}catch(t){throw Ci(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ti(this.firestore,gu(this._delegate,function FQ(...n){return Hv._create("startAfter",n,!1)}(...e)))}catch(t){throw Ci(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ti(this.firestore,gu(this._delegate,function VQ(...n){return qv._create("endBefore",n,!1)}(...e)))}catch(t){throw Ci(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ti(this.firestore,gu(this._delegate,function LQ(...n){return qv._create("endAt",n,!0)}(...e)))}catch(t){throw Ci(t,"endAt()","Query.endAt()")}}isEqual(e){return MT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function GQ(n){n=Et(n,Hr);const e=Et(n.firestore,an),t=kn(e),r=new _u(e);return function iQ(n,e){const t=new br;return n.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(r=(0,ce.Z)(function*(o,s,a){try{const u=yield Cv(o,s,!0),l=new dV(s,u.hs),f=l.da(u.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const l=Jd(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield rh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mu(e,r,n,i))}(this._delegate):"server"===e?.source?function WQ(n){n=Et(n,Hr);const e=Et(n.firestore,an),t=kn(e),r=new _u(e);return TV(t,n._query,{source:"server"}).then(i=>new mu(e,r,n,i))}(this._delegate):function qQ(n){n=Et(n,Hr);const e=Et(n.firestore,an),t=kn(e),r=new _u(e);return GV(n._query),TV(t,n._query).then(i=>new mu(e,r,n,i))}(this._delegate),t.then(r=>new ZT(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=d2(e),r=h2(e,i=>new ZT(this.firestore,new mu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return t2(this._delegate,t,r)}withConverter(e){return new Ti(this.firestore,this._delegate.withConverter(e?Dc.getInstance(this.firestore,e):null))}}class vY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _g(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ZT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ti(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _g(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _g(this._firestore,r))})}isEqual(e){return JV(this._delegate,e._delegate)}}class ah extends Ti{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ao(this.firestore,e):null}doc(e){try{return new Ao(this.firestore,void 0===e?Fv(this._delegate):Fv(this._delegate,e))}catch(t){throw Ci(t,"doc()","CollectionReference.doc()")}}add(e){return function KQ(n,e){const t=Et(n.firestore,an),r=Fv(n),i=Gv(n.converter,e);return sh(t,[Uv(wc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ao(this.firestore,t))}isEqual(e){return kV(this._delegate,e._delegate)}withConverter(e){return new ah(this.firestore,this._delegate.withConverter(e?Dc.getInstance(this.firestore,e):null))}}function Ac(n){return Et(n,An)}class KT{constructor(...e){this._delegate=new ma(...e)}static documentId(){return new KT(Tn.keyField().canonicalString())}isEqual(e){return(e=(0,ht.m9)(e))instanceof ma&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cY(){return new OT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sc(e)}static delete(){const e=function uY(){return new cg("deleteField")}();return e._methodName="FieldValue.delete",new Sc(e)}static arrayUnion(...e){const t=function lY(...n){return new kT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sc(t)}static arrayRemove(...e){const t=function dY(...n){return new FT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sc(t)}static increment(e){const t=function hY(n){return new VT("increment",n)}(e);return t._methodName="FieldValue.increment",new Sc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IY={Firestore:u2,GeoPoint:Vv,Timestamp:Nn,Blob:gg,Transaction:c2,WriteBatch:l2,DocumentReference:Ao,DocumentSnapshot:mg,Query:Ti,QueryDocumentSnapshot:_g,QuerySnapshot:ZT,CollectionReference:ah,FieldPath:KT,FieldValue:Sc,setLogLevel:function yY(n){!function o7(n){eu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function f2(n,e){return function wY(n,e=b0){return new ct(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QT(n,e){return f2(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function bY(n){(function EY(n,e){n.INTERNAL.registerComponent(new Zy.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IY)))})(n,(e,t)=>new u2(e,t,new _Y)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Jo.Z);class p2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=I2(r,t);return new _2(i,o,this.afs)}snapshotChanges(){return function CY(n,e){return f2(n,e).pipe(Dy(void 0),A0(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return C(this.ref.get(e)).pipe(wi)}}function Kv(n,e){return QT(n,e).pipe(Dy(void 0),A0(),Oe(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function g2(n,e,t){return Kv(n,t).pipe(Sy((r,i)=>function TY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),et(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function YT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function m2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class _2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Kv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Dy(void 0),A0(),Qo(([r,i])=>i.length>0||!r),Oe(([,r])=>r),wi)}auditTrail(e){return this.stateChanges(e).pipe(Sy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m2(e);return g2(this.query,t,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),wi)}get(e){return C(this.query.get(e)).pipe(wi)}add(e){return this.ref.add(e)}doc(e){return new p2(this.ref.doc(e),this.afs)}}class AY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Kv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qo(t=>t.length>0),wi):Kv(this.query,this.afs.schedulers.outsideAngular).pipe(wi)}auditTrail(e){return this.stateChanges(e).pipe(Sy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m2(e);return g2(this.query,t,this.afs.schedulers.outsideAngular).pipe(wi)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),wi)}get(e){return C(this.query.get(e)).pipe(wi)}}const y2=new Te("angularfire2.enableFirestorePersistence"),v2=new Te("angularfire2.firestore.persistenceSettings"),SY=new Te("angularfire2.firestore.settings"),PY=new Te("angularfire2.firestore.use-emulator");function I2(n,e=(t=>t)){return{query:e(n),ref:n}}let yg=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,f,m,y,E,S,k,L,Q,z){this.schedulers=u;const J=Wy(t,a,r),le=f;m&&yO(J,a,y,S,k,L,E,Q),[this.firestore,this.persistenceEnabled$]=T0(`${J.name}.firestore`,"AngularFirestore",J.name,()=>{const Ce=a.runOutsideAngular(()=>J.firestore());if(o&&Ce.settings(o),le&&Ce.useEmulator(...le),i&&!Ey(s)){const je=()=>{try{return C(Ce.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(H){return typeof console<"u"&&console.warn(H),V(!1)}};return[Ce,a.runOutsideAngular(je)]}return[Ce,V(!1)]},[o,le,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=I2(i,r),a=this.schedulers.ngZone.run(()=>o);return new _2(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new AY(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new p2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(we(Ap),we(Sp,8),we(y2,8),we(SY,8),we(Uo),we(Ut),we(wd),we(v2,8),we(PY,8),we(D0,8),we(hO,8),we(fO,8),we(pO,8),we(gO,8),we(mO,8),we(_O,8),we(Dp,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),RY=(()=>{class n{constructor(){Jo.Z.registerVersion("angularfire",aa.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:y2,useValue:!0},{provide:v2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[yg]})}return n})();const E2="firebasestorage.googleapis.com",b2="storageBucket";class Hn extends ht.ZR{constructor(e,t,r=0){super(JT(e),`Firebase Storage: ${t} (${JT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return JT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Fn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Fn||{});function JT(n){return"storage/"+n}function XT(){return new Hn(Fn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function w2(){return new Hn(Fn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C2(){return new Hn(Fn.CANCELED,"User canceled the upload/download.")}function T2(){return new Hn(Fn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uh(n){return new Hn(Fn.INVALID_ARGUMENT,n)}function D2(){return new Hn(Fn.APP_DELETED,"The Firebase app was deleted.")}function A2(n){return new Hn(Fn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vg(n,e){return new Hn(Fn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ig(n){throw new Hn(Fn.INTERNAL_ERROR,"Internal error: "+n)}class oi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=oi.makeFromUrl(e,t)}catch{return new oi(e,"")}if(""===r.path)return r;throw function jY(n){return new Hn(Fn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(le){le.path_=decodeURIComponent(le.path)}const m=t.replace(/[.]/g,"\\."),J=[{regex:a,indices:{bucket:1,path:3},postModify:function o(le){"/"===le.path.charAt(le.path.length-1)&&(le.path_=le.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===E2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let le=0;le<J.length;le++){const Ce=J[le],je=Ce.regex.exec(e);if(je){let x=je[Ce.indices.path];x||(x=""),r=new oi(je[Ce.indices.bucket],x),Ce.postModify(r);break}}if(null==r)throw function BY(n){return new Hn(Fn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class GY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Qv(n){return"string"==typeof n||n instanceof String}function S2(n){return eD()&&n instanceof Blob}function eD(){return typeof Blob<"u"}function tD(n,e,t,r){if(r<e)throw uh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw uh(`Invalid value for '${n}'. Expected ${t} or less.`)}function ya(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function P2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var ch=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ch||{});function R2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class JY{constructor(e,t,r,i,o,s,a,u,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function KY(n){return void 0!==n}(u)?o():o(u)}catch(u){s(u)}else if(null!==a){const u=XT();u.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,u):u)}else s(i.canceled?this.appDelete_?D2():C2():w2())};this.canceled_?t(0,new Yv(!1,null,!0)):this.backoffId_=function WY(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function u(){return 2===a}let l=!1;function f(...L){l||(l=!0,e.apply(null,L))}function m(L){i=setTimeout(()=>{i=null,n(E,u())},L)}function y(){o&&clearTimeout(o)}function E(L,...Q){if(l)return void y();if(L)return y(),void f.call(null,L,...Q);if(u()||s)return y(),void f.call(null,L,...Q);let J;r<64&&(r*=2),1===a?(a=2,J=0):J=1e3*(r+Math.random()),m(J)}let S=!1;function k(L){S||(S=!0,y(),!l&&(null!==i?(L||(a=2),clearTimeout(i),m(0)):L||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,k(!0)},t),k}((r,i)=>{if(i)return void r(!1,new Yv(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===ch.NO_ERROR,u=o.getStatus();if(!a||R2(u,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===ch.ABORT;return void r(!1,new Yv(!1,null,f))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new Yv(l,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ZY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Yv{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oJ(...n){const e=function iJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(eD())return new Blob(n);throw new Hn(Fn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const co={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nD{constructor(e,t){this.data=e,this.contentType=t||null}}function rD(n,e){switch(n){case co.RAW:return new nD(x2(e));case co.BASE64:case co.BASE64URL:return new nD(M2(n,e));case co.DATA_URL:return new nD(function cJ(n){const e=new N2(n);return e.base64?M2(co.BASE64,e.rest):function uJ(n){let e;try{e=decodeURIComponent(n)}catch{throw vg(co.DATA_URL,"Malformed data URL.")}return x2(e)}(e.rest)}(e),function lJ(n){return new N2(n).contentType}(e))}throw XT()}function x2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function M2(n,e){switch(n){case co.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw vg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case co.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw vg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function aJ(n){if(typeof atob>"u")throw function qY(n){return new Hn(Fn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:vg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class N2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vg(co.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function dJ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ns{constructor(e,t){let r=0,i="";S2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(S2(this.data_)){const i=function sJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ns(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ns(r,!0)}}static getBlob(...e){if(eD()){const t=e.map(r=>r instanceof Ns?r.data_:r);return new Ns(oJ.apply(null,t))}{const t=e.map(s=>Qv(s)?rD(co.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Ns(i,!0)}}uploadData(){return this.data_}}function iD(n){let e;try{e=JSON.parse(n)}catch{return null}return function YY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function O2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pJ(n,e){return e}class Di{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||pJ}}let Jv=null;function Eg(){if(Jv)return Jv;const n=[];n.push(new Di("bucket")),n.push(new Di("generation")),n.push(new Di("metageneration")),n.push(new Di("name","fullPath",!0));const t=new Di("name");t.xform=function e(o,s){return function gJ(n){return!Qv(n)||n.length<2?n:O2(n)}(s)},n.push(t);const i=new Di("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},n.push(i),n.push(new Di("timeCreated")),n.push(new Di("updated")),n.push(new Di("md5Hash",null,!0)),n.push(new Di("cacheControl",null,!0)),n.push(new Di("contentDisposition",null,!0)),n.push(new Di("contentEncoding",null,!0)),n.push(new Di("contentLanguage",null,!0)),n.push(new Di("contentType",null,!0)),n.push(new Di("metadata","customMetadata",!0)),Jv=n,Jv}function k2(n,e,t){const r=iD(e);return null===r?null:function _J(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const s=t[o];r[s.local]=s.xform(r,e[s.server])}return function mJ(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new oi(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function oD(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const F2="prefixes",V2="items";class Os{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ks(n){if(!n)throw XT()}function Xv(n,e){return function t(r,i){const o=k2(n,i,e);return ks(null!==o),o}}function lh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function LY(){return new Hn(Fn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function VY(){return new Hn(Fn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function FY(n){return new Hn(Fn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function UY(n){return new Hn(Fn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function bg(n){const e=lh(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function kY(n){return new Hn(Fn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function L2(n,e,t){const i=ya(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Os(i,"GET",Xv(n,t),s);return a.errorHandler=bg(e),a}function wJ(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=ya(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Os(a,"GET",function EJ(n,e){return function t(r,i){const o=function IJ(n,e,t){const r=iD(t);return null===r?null:function vJ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[F2])for(const i of t[F2]){const o=i.replace(/\/$/,""),s=n._makeStorageReference(new oi(e,o));r.prefixes.push(s)}if(t[V2])for(const i of t[V2]){const o=n._makeStorageReference(new oi(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return ks(null!==o),o}}(n,e.bucket),l);return f.urlParams=o,f.errorHandler=lh(e),f}function B2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function AJ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class eI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sD(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ks(!1)}return ks(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xJ={STATE_CHANGED:"state_changed"},Ai={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function aD(n){switch(n){case"running":case"pausing":case"canceling":return Ai.RUNNING;case"paused":return Ai.PAUSED;case"success":return Ai.SUCCESS;case"canceled":return Ai.CANCELED;default:return Ai.ERROR}}class MJ{constructor(e,t,r){if(function QY(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function dh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let z2=null;class NJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ch.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ch.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ch.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ig("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ig("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ig("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ig("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ig("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class OJ extends NJ{initXhr(){this.xhr_.responseType="text"}}function Xo(){return z2?z2():new OJ}class H2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Eg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Fn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(R2(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=w2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Fn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function SJ(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s=B2(e,r,i),a={name:s.fullPath},u=ya(o,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=oD(s,t),S=new Os(u,"POST",function E(k){let L;sD(k);try{L=k.getResponseHeader("X-Goog-Upload-URL")}catch{ks(!1)}return ks(Qv(L)),L},n.maxUploadRetryTime);return S.urlParams=a,S.headers=f,S.body=m,S.errorHandler=lh(e),S}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function PJ(n,e,t,r){const u=new Os(t,"POST",function o(l){const f=sD(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ks(!1)}m||ks(!1);const y=Number(m);return ks(!isNaN(y)),new eI(y,r.size(),"final"===f)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=lh(e),u}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Xo,t,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new eI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function RJ(n,e,t,r,i,o,s,a){const u=new eI(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function zY(){return new Hn(Fn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=u.total-u.current;let f=l;i>0&&(f=Math.min(f,i));const m=u.current;let E="";E=0===f?"finalize":l===f?"upload, finalize":"upload";const S={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${u.current}`},k=r.slice(m,m+f);if(null===k)throw T2();const J=new Os(t,"POST",function L(le,Ce){const je=sD(le,["active","final"]),H=u.current+f,x=r.size();let B;return B="final"===je?Xv(e,o)(le,Ce):null,new eI(H,x,"final"===je,B)},e.maxUploadRetryTime);return J.headers=S,J.body=k.uploadData(),J.progressCallback=a||null,J.errorHandler=lh(n),J}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Xo,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=L2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function j2(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let J="";for(let le=0;le<2;le++)J+=Math.random().toString().slice(2);return J}();s["Content-Type"]="multipart/related; boundary="+u;const l=B2(e,r,i),f=oD(l,t),E=Ns.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===E)throw T2();const S={name:l.fullPath},k=ya(o,n.host,n._protocol),Q=n.maxUploadRetryTime,z=new Os(k,"POST",Xv(n,t),Q);return z.urlParams=S,z.headers=s,z.body=E.uploadData(),z.errorHandler=lh(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=C2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=aD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new MJ(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(aD(this._state)){case Ai.SUCCESS:dh(this._resolve.bind(null,this.snapshot))();break;case Ai.CANCELED:case Ai.ERROR:dh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(aD(this._state)){case Ai.RUNNING:case Ai.PAUSED:e.next&&dh(e.next.bind(e,this.snapshot))();break;case Ai.SUCCESS:e.complete&&dh(e.complete.bind(e))();break;default:e.error&&dh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Pc{constructor(e,t){this._service=e,this._location=t instanceof oi?t:oi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Pc(e,t)}get root(){const e=new oi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O2(this._location.path)}get storage(){return this._service}get parent(){const e=function hJ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new oi(this._location.bucket,e);return new Pc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw A2(e)}}function G2(n,e,t){return uD.apply(this,arguments)}function uD(){return(uD=(0,ce.Z)(function*(n,e,t){const i=yield W2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield G2(n,e,i.nextPageToken))})).apply(this,arguments)}function W2(n,e){null!=e&&"number"==typeof e.maxResults&&tD("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=wJ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xo)}function GJ(n){n._throwIfRoot("getDownloadURL");const e=function CJ(n,e,t){const i=ya(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Os(i,"GET",function bJ(n,e){return function t(r,i){const o=k2(n,i,e);return ks(null!==o),function yJ(n,e,t,r){const i=iD(e);if(null===i||!Qv(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const m=n.fullPath;return ya("/b/"+s(n.bucket)+"/o/"+s(m),t,r)+P2({alt:"media",token:l})})[0]}(o,i,n.host,n._protocol)}}(n,t),s);return a.errorHandler=bg(e),a}(n.storage,n._location,Eg());return n.storage.makeRequestWithTokens(e,Xo).then(t=>{if(null===t)throw function HY(){return new Hn(Fn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Z2(n,e){const t=function fJ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new oi(n._location.bucket,t);return new Pc(n.storage,r)}function K2(n,e){if(n instanceof cD){const t=n;if(null==t._bucket)throw function $Y(){return new Hn(Fn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b2+"' property when initializing the app?")}();const r=new Pc(t,t._bucket);return null!=e?K2(r,e):r}return void 0!==e?Z2(n,e):n}function QJ(n,e){if(e&&function ZJ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cD)return function KJ(n,e){return new Pc(n,e)}(n,e);throw uh("To use ref(service, url), the first argument must be a Storage instance.")}return K2(n,e)}function Q2(n,e){const t=e?.[b2];return null==t?null:oi.makeFromBucketSpec(t,n)}class cD{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=E2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?oi.makeFromBucketSpec(i,this._host):Q2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?oi.makeFromBucketSpec(this._url,e):Q2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new GY(D2());{const s=function rJ(n,e,t,r,i,o,s=!0){const a=P2(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return function tJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function XY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function eJ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,o),function nJ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new JY(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,ce.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const Y2="@firebase/storage",X2="storage";function eL(n,e){return QJ(n=(0,ht.m9)(n),e)}function sX(n=(0,Gn.getApp)(),e){n=(0,ht.m9)(n);const r=(0,Gn._getProvider)(n,X2).getImmediate({identifier:e}),i=(0,ht.P0)("storage");return i&&tL(r,...i),r}function tL(n,e,t,r={}){!function YJ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,ht.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function aX(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cD(t,r,i,e,Gn.SDK_VERSION)}!function uX(){(0,Gn._registerComponent)(new Zy.wA(X2,aX,"PUBLIC").setMultipleInstances(!0)),(0,Gn.registerVersion)(Y2,"0.12.5",""),(0,Gn.registerVersion)(Y2,"0.12.5","esm2017")}();class tI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class nL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tI(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?s=>t(new tI(s,this,this._ref)):{next:t.next?s=>t.next(new tI(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class rL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new va(e,this._service))}get items(){return this._delegate.items.map(e=>new va(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class va{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function oX(n,e){return Z2(n,e)}(this._delegate,e);return new va(t,this.storage)}get root(){return new va(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new va(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new nL(function JJ(n,e,t){return function jJ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new H2(n,new Ns(e),t)}(n=(0,ht.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=co.RAW,r){this._throwIfRoot("putString");const i=rD(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new nL(new H2(this._delegate,new Ns(i.data,!0),o),this)}listAll(){return function nX(n){return function zJ(n){const e={prefixes:[],items:[]};return G2(n,e).then(()=>e)}(n=(0,ht.m9)(n))}(this._delegate).then(e=>new rL(e,this.storage))}list(e){return function tX(n,e){return W2(n=(0,ht.m9)(n),e)}(this._delegate,e||void 0).then(t=>new rL(t,this.storage))}getMetadata(){return function XJ(n){return function HJ(n){n._throwIfRoot("getMetadata");const e=L2(n.storage,n._location,Eg());return n.storage.makeRequestWithTokens(e,Xo)}(n=(0,ht.m9)(n))}(this._delegate)}updateMetadata(e){return function eX(n,e){return function qJ(n,e){n._throwIfRoot("updateMetadata");const t=function TJ(n,e,t,r){const o=ya(e.fullServerUrl(),n.host,n._protocol),a=oD(t,r),l=n.maxOperationRetryTime,f=new Os(o,"PATCH",Xv(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=bg(e),f}(n.storage,n._location,e,Eg());return n.storage.makeRequestWithTokens(t,Xo)}(n=(0,ht.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function rX(n){return GJ(n=(0,ht.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function iX(n){return function WJ(n){n._throwIfRoot("deleteObject");const e=function DJ(n,e){const r=ya(e.fullServerUrl(),n.host,n._protocol),a=new Os(r,"DELETE",function s(u,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=bg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xo)}(n=(0,ht.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw A2(e)}}class iL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(oL(e))throw uh("ref() expected a child path but got a URL, use refFromURL instead.");return new va(eL(this._delegate,e),this)}refFromURL(e){if(!oL(e))throw uh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oi.makeFromUrl(e,this._delegate.host)}catch{throw uh("refFromUrl() expected a valid full URL but got an invalid one.")}return new va(eL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){tL(this._delegate,e,t,r)}}function oL(n){return/^[A-Za-z]+:\/\//.test(n)}function hX(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new iL(t,r)}function sL(n){const e=function pX(n){return new ct(e=>{const t=s=>e.next(s);t(n.snapshot);const o=n.on("state_changed",t);return n.then(s=>{t(s),e.complete()},s=>{t(n.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(function xY(n,e=b0){return ie((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=o;o=null,r.next(l)}};function u(){const l=s+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(xe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Oe(t=>t.bytesTransferred/t.totalBytes*100))}}function nI(n){return{getDownloadURL:()=>V(void 0).pipe(aO,Ve(()=>n.getDownloadURL()),wi),getMetadata:()=>V(void 0).pipe(aO,Ve(()=>n.getMetadata()),wi),delete:()=>C(n.delete()),child:e=>nI(n.child(e)),updateMetadata:e=>C(n.updateMetadata(e)),put:(e,t)=>sL(n.put(e,t)),putString:(e,t,r)=>sL(n.putString(e,t,r)),list:e=>C(n.list(e)),listAll:()=>C(n.listAll())}}!function fX(n){const e={TaskState:Ai,TaskEvent:xJ,StringFormat:co,Storage:iL,Reference:va};n.INTERNAL.registerComponent(new Zy.wA("storage-compat",hX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Jo.Z);const gX=new Te("angularfire2.storageBucket"),mX=new Te("angularfire2.storage.maxUploadRetryTime"),_X=new Te("angularfire2.storage.maxOperationRetryTime"),yX=new Te("angularfire2.storage.use-emulator");let wg=(()=>{class n{storage;constructor(t,r,i,o,s,a,u,l,f,m){const y=Wy(t,s,r);this.storage=T0(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const E=s.runOutsideAngular(()=>y.storage(i||void 0)),S=f;return S&&E.useEmulator(...S),u&&E.setMaxUploadRetryTime(u),l&&E.setMaxOperationRetryTime(l),E},[u,l])}ref(t){return nI(this.storage.ref(t))}refFromURL(t){return nI(this.storage.refFromURL(t))}upload(t,r,i){return nI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(we(Ap),we(Sp,8),we(gX,8),we(Uo),we(Ut),we(wd),we(mX,8),we(_X,8),we(yX,8),we(Dp,8))};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),vX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({})}return n})(),IX=(()=>{class n{constructor(){Jo.Z.registerVersion("angularfire",aa.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[wg],imports:[vX]})}return n})(),vu=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r,this.defaultBusinessId="vfCMoPjAu2ROVBbKvk0D"}getBusinessData(t){return t||(t=this.defaultBusinessId),this.firestore.collection("businesses").doc(t).snapshotChanges().pipe(Oe(r=>{const i=r.payload.data(),o=r.payload.id;if(i){const{id:s,...a}=i;return{id:o,...a}}}))}getDefaultBusinessData(){return this.getBusinessData(this.defaultBusinessId)}getEmployees(){return this.firestore.collection("employees").valueChanges({idField:"id"})}getEmployeePhoto(t){return this.storage.ref(t).getDownloadURL().pipe(bs(r=>(console.error("Error fetching photo URL:",r),V(""))))}getEmployeesByBusinessId(t){return console.log("Fetching employees for business ID:",t),this.firestore.collection("businesses").doc(t).get().pipe(Oe(r=>{if(r.exists){const i=r.data();return i&&i.employees?(console.log("Fetched employees:",i.employees),i.employees):(console.warn("No employees found in the document."),[])}return console.warn("Business document does not exist."),[]}),bs(r=>(console.error("Error fetching employees:",r),V([]))))}getBusinessGalleryImagesById(t){return this.firestore.collection("businesses").doc(t).collection("gallery").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||n)(we(yg),we(wg))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EX(n,e){if(1&n&&_e(0,"button",11),2&n){const t=e.index;od("active",0===t),Bo("data-bs-slide-to",t)("aria-current",0===t?"true":null)("aria-label","Slide "+(t+1))}}function bX(n,e){if(1&n&&(P(0,"div",12),_e(1,"img",13),P(2,"div",14)(3,"h1"),N(4,"Welcome to "),_e(5,"br"),N(6),w(),P(7,"div",15),_e(8,"br"),P(9,"p"),N(10),w()(),P(11,"button",16),N(12," Schedule an appointment "),w()()()),2&n){const t=e.$implicit,r=e.index,i=ln(2);od("active",0===r),Ee(1),Le("src",t,ji),Ee(5),vi(" ",i.business.businessName,""),Ee(4),Ur(i.business.tagline)}}function wX(n,e){if(1&n&&(P(0,"div",1)(1,"div",2),At(2,EX,1,5,"button",3),w(),P(3,"div",4),At(4,bX,13,5,"div",5),w(),P(5,"button",6),_e(6,"span",7),P(7,"span",8),N(8,"Previous"),w()(),P(9,"button",9),_e(10,"span",10),P(11,"span",8),N(12,"Next"),w()()()),2&n){const t=ln();Ee(2),Le("ngForOf",t.business.heroImages),Ee(2),Le("ngForOf",t.business.heroImages)}}let CX=(()=>{class n{ngOnInit(){this.fetchBusinessData()}fetchBusinessData(){this.business={businessName:"#1 Helping Hand AFH",tagline:"We\u2019re Family, Not Just Care.",heroImages:["../../../assets/sharedAssets/istockphoto-804432288-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-613308420-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-918529390-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-1324090651-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-653191338-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-1170514008-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-1315315044-2048x2048.jpg"]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-hero-carousel"]],inputs:{businessID:"businessID"},decls:1,vars:1,consts:[["id","heroCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],["id","heroCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#heroCarousel",3,"active",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#heroCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#heroCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["type","button","data-bs-target","#heroCarousel"],[1,"carousel-item"],["alt","Hero Image",1,"d-block","w-100",3,"src"],[1,"carousel-caption","d-none","d-md-block","hero-overlay"],[1,"business-subtitle","garamond"],[1,"action-btn"]],template:function(r,i){1&r&&At(0,wX,13,2,"div",0),2&r&&Le("ngIf",i.business)},dependencies:[Es,Zo],styles:[".carousel-item[_ngcontent-%COMP%]{display:none;position:relative;width:100%;transition:transform .6s ease-in-out}.carousel-item.active[_ngcontent-%COMP%]{display:block}#heroCarousel[_ngcontent-%COMP%]{position:relative}.carousel-item[_ngcontent-%COMP%]{position:relative;height:800px}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(249,241,214,.1);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:200px;font-size:5rem;letter-spacing:.5rem;text-transform:uppercase;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.business-subtitle[_ngcontent-%COMP%]{padding:20px;font-size:3rem;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.action-btn[_ngcontent-%COMP%]{padding:20px;background-color:var(--accent-color);font-size:1.4rem}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:10%}.carousel-control-prev[_ngcontent-%COMP%]:hover, .carousel-control-next[_ngcontent-%COMP%]:hover{background-color:#00000080}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{display:inline-block;width:30px;height:30px;background:none;border:solid white;border-width:0 6px 6px 0}.carousel-control-prev-icon[_ngcontent-%COMP%]{transform:rotate(135deg)}.carousel-control-next-icon[_ngcontent-%COMP%]{transform:rotate(-45deg)}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.carousel-item[_ngcontent-%COMP%]{height:300px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]{padding:10px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.carousel-item[_ngcontent-%COMP%]{height:200px}}.carousel[_ngcontent-%COMP%]{position:relative}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:5%;top:50%;transform:translateY(-50%)}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{background-size:100%,100%}.carousel-indicators[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);z-index:15;display:flex;justify-content:center;padding-left:0;margin-right:0;margin-left:0;list-style:none}.carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{box-sizing:content-box;flex:0 1 auto;width:50px;height:5px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#ffffff80;background-clip:padding-box;border:0;border-radius:0}.carousel-indicators[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#fff}"]})}return n})();function TX(n,e){if(1&n&&(P(0,"div",8),_e(1,"div",9),w()),2&n){const t=e.$implicit;Ee(1),Le("innerHTML",t,qa)}}function DX(n,e){if(1&n&&(P(0,"div",8),_e(1,"div",9),w()),2&n){const t=e.$implicit;Ee(1),Le("innerHTML",t,qa)}}let lD=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r,this.business={businessName:"",tagline:"",uniqueService:"",whyChoose:"",businessStory:"",motivation:"",mission:"",vision:"",certifications:"",targetAudience:"",services:"",specialPrograms:"",tours:"",freeConsulting:"",websiteGoals:"",logoImage:"",ownerImagesBios:"",staffImagesBios:"",facilityImages:[],lifestyleImages:[],mediaFeatures:"",ratings:"",testimonials:"",address:"",phone:"",fax:"",email:"",businessHours:"",socialMedia:"",welcomeMessage:"",keyServicesHighlights:"",teamValues:"",serviceBenefits:"",pricingStructure:"",contactFormDetails:"",mapDirections:"",photoGallery:"",employees:[],id:"",faqs:"",blogNews:"",mapIframe:"",isActive:!1}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(vu),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-home"]],decls:19,vars:3,consts:[[3,"businessID"],[1,"intro-section"],[1,"left"],[1,"right"],[1,"features-container"],[1,"features-section"],[1,"feature-list"],["class","feature-item",4,"ngFor","ngForOf"],[1,"feature-item"],[1,"",3,"innerHTML"]],template:function(r,i){1&r&&(_e(0,"app-hero-carousel",0),P(1,"div",1)(2,"div",2)(3,"h1"),N(4,"A Home of Exceptional Care"),w()(),P(5,"div",3)(6,"p"),N(7,"#1 Helping Hand AFH was founded in June 2021 with a deep passion for helping the elderly live their best lives. Our journey began with a simple idea: to create a home-like environment where seniors can thrive and feel loved."),w()()(),P(8,"div",4)(9,"div",5)(10,"h2"),N(11,"Our Unique Features"),w(),P(12,"div",6),At(13,TX,2,1,"div",7),w()(),P(14,"div",5)(15,"h2"),N(16,"Why Choose Us"),w(),P(17,"div",6),At(18,DX,2,1,"div",7),w()()()),2&r&&(Le("businessID",i.business.id),Ee(13),Le("ngForOf",i.business.uniqueService.split("|")),Ee(5),Le("ngForOf",i.business.whyChoose.split("|")))},dependencies:[Es,CX],styles:[".container[_ngcontent-%COMP%]{padding:40px 20px}.intro-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:40px 20px;text-align:left}.left[_ngcontent-%COMP%]{flex:1;margin-right:20px}.left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:400;margin:0}.right[_ngcontent-%COMP%]{flex:1;margin-left:20px}.right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;line-height:1.6;margin:0}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{margin:0;text-align:center}.left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px}}.features-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px;margin:50px auto;max-width:1024px;border-radius:12px}.features-section[_ngcontent-%COMP%]{flex:1 1 100%;border-radius:12px;padding:50px 20px;background:#f9f9f9;text-align:center;box-sizing:border-box;margin-bottom:20px}.features-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:30px;color:#333}.feature-list[_ngcontent-%COMP%]{max-width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.feature-item[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;padding:20px;flex:1 1 100%;box-sizing:border-box;transition:transform .3s;max-width:100%}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#007bff;margin:0}@media (min-width: 1024px){.feature-item[_ngcontent-%COMP%]{flex:1 1 calc(33.333% - 20px);max-width:calc(33.333% - 20px)}}@media (max-width: 768px){.feature-item[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}.features-section[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%;margin-bottom:20px}}@media (max-width: 480px){.feature-item[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}.features-section[_ngcontent-%COMP%]{min-width:100%}}"]})}return n})();function AX(n,e){if(1&n&&(P(0,"div",3),_e(1,"img",4),P(2,"h3"),N(3),w(),P(4,"h4"),N(5),w(),P(6,"p"),N(7),w()()),2&n){const t=e.$implicit;Ee(1),qf("alt",t.name),Le("src",t.photoURL,ji),Ee(2),Ur(t.name),Ee(2),Ur(t.role),Ee(2),Ur(t.bio)}}let SX=(()=>{class n{constructor(t,r){this.route=t,this.employeeService=r}ngOnInit(){this.employees$=this.route.queryParamMap.pipe(Oe(t=>t.get("id")||""),Ve(t=>{if(!t)throw new Error("Business ID is required");return this.employeeService.getEmployeesByBusinessId(t)}),bs(t=>(console.error("Error fetching employees:",t),V([]))))}static#e=this.\u0275fac=function(r){return new(r||n)(ae(jr),ae(vu))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-meet-the-team"]],inputs:{businessId:"businessId"},decls:6,vars:3,consts:[[1,"meet-the-team"],[1,"team-list"],["class","team-member",4,"ngFor","ngForOf"],[1,"team-member"],[1,"team-photo",3,"src","alt"]],template:function(r,i){1&r&&(P(0,"div",0)(1,"h2"),N(2,"Meet the Team"),w(),P(3,"div",1),At(4,AX,8,5,"div",2),zi(5,"async"),w()()),2&r&&(Ee(4),Le("ngForOf",Hi(5,1,i.employees$)))},dependencies:[Es,rc],styles:[".meet-the-team[_ngcontent-%COMP%]{padding:50px 20px;background:#f9f9f9;text-align:center}.meet-the-team[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:30px;color:#333}.team-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.team-member[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;margin:10px;padding:20px;flex:1 1 calc(33.333% - 20px);box-sizing:border-box;max-width:calc(33.333% - 20px);text-align:center;transition:transform .3s}.team-member[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.team-photo[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:50%;margin-bottom:15px}.team-member[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#007bff;margin:0}.team-member[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;color:#555;margin:0}.team-member[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666;margin:15px 0 0}@media (max-width: 768px){.team-member[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}}@media (max-width: 480px){.team-member[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}}"]})}return n})();function PX(n,e){if(1&n&&(P(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),N(4,"About Us"),w(),P(5,"div",3)(6,"p"),N(7,"Where Compassion Meets Care: Your Loved Ones, Our Family."),w()()()(),P(8,"div",4)(9,"section",5)(10,"div",6)(11,"h2",7),N(12,"Our Story"),w()(),_e(13,"div",8),w(),P(14,"section",9)(15,"div",10),_e(16,"img",11),P(17,"div",6)(18,"h2",7),N(19,"Our Mission"),w()(),_e(20,"div",8),w(),P(21,"div",12),_e(22,"img",11),P(23,"div",6)(24,"h2",7),N(25,"Our Vision"),w()(),_e(26,"div",8),w()(),P(27,"section",13),_e(28,"app-meet-the-team",14),w()()()),2&n){const t=ln();Ee(13),Le("innerHTML",t.business.businessStory,qa),Ee(3),Le("src",t.business.lifestyleImages,ji),Ee(4),Le("innerHTML",t.business.mission,qa),Ee(2),Le("src",t.business.facilityImages,ji),Ee(4),Le("innerHTML",t.business.vision,qa),Ee(2),Le("businessId",t.business.id)}}let RX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(vu),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-about-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-about"],[1,"hero-overlay"],[1,"hero-subtitle"],[1,"container"],[1,"business-story"],[1,"heading-container"],[1,"styled-heading"],[1,"services_txt","garamond",3,"innerHTML"],[1,"mission-vision"],[1,"mission"],[3,"src"],[1,"vision"],[1,"business-team"],[3,"businessId"]],template:function(r,i){1&r&&At(0,PX,29,6,"div",0),2&r&&Le("ngIf",i.business)},dependencies:[Zo,SX],styles:['.hero-about[_ngcontent-%COMP%]{background:url(istockphoto-1207318385-2048x2048.d8e6c744c314dbde.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:.3rem;text-transform:uppercase;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.hero-subtitle[_ngcontent-%COMP%]{font-size:2rem;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}section[_ngcontent-%COMP%]{margin-bottom:40px}.business-story[_ngcontent-%COMP%]{background:#f9f9f9;padding:50px 20px;border-radius:8px}.business-team[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:12px}.mission-vision[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:50px}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px;margin:10px;padding:50px 20px;box-shadow:0 2px 5px #0000001a;flex:1 1 calc(50% - 20px);box-sizing:border-box}.mission[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:30px;color:#333}.mission[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.team[_ngcontent-%COMP%]{text-align:center}.team-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.team-item[_ngcontent-%COMP%]{width:250px;margin:10px;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000001a;text-align:center}.team-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.team-info[_ngcontent-%COMP%]{margin-top:10px}.team-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 0 5px;font-size:1.2rem}.team-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#666}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.mission-vision[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{width:100%;padding:30px 20px;margin:20px 0}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;letter-spacing:.2rem}.mission-vision[_ngcontent-%COMP%]{margin-bottom:20px}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{padding:20px 10px}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.team-item[_ngcontent-%COMP%]{width:100%;margin:10px 0}.team-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.team-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.team-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}}.heading-container[_ngcontent-%COMP%]{text-align:center;margin:20px 0;padding:10px;position:relative;overflow:hidden}.styled-heading[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2rem;font-weight:700;color:#333;position:relative;z-index:1;display:inline-block;padding:10px 20px;width:400px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.styled-heading[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:0;right:0;height:2px;background-color:#e0e0e0;z-index:0;transform:translateY(-50%)}.styled-heading[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;width:100px;height:5px;background-color:#ff6f61;transform:translate(-50%);z-index:2}']})}return n})();function xX(n,e){if(1&n&&(P(0,"li")(1,"h3"),N(2),w()()),2&n){const t=e.$implicit;Ee(2),Ur(t)}}function MX(n,e){if(1&n&&(P(0,"li")(1,"h3"),N(2),w()()),2&n){const t=e.$implicit;Ee(2),Ur(t)}}function NX(n,e){if(1&n&&(P(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),N(4,"Our Services"),w(),P(5,"div",3)(6,"p"),N(7,"Providing exceptional care tailored to your needs"),w()()()(),P(8,"div",4)(9,"section",5),_e(10,"img",6),P(11,"h2"),N(12,"Our Comprehensive Services"),w(),P(13,"ul"),At(14,xX,3,1,"li",7),w()(),P(15,"section",5),_e(16,"img",6),P(17,"h2"),N(18,"Our Benefits"),w(),P(19,"ul"),At(20,MX,3,1,"li",7),w()(),P(21,"section",8)(22,"h2"),N(23,"Special Programs"),w(),P(24,"h3"),N(25),w()(),P(26,"section",9)(27,"div",10),_e(28,"img",11),P(29,"div",12)(30,"h2",13),N(31,"Tours"),w()(),_e(32,"div",14),w(),P(33,"div",15),_e(34,"img",16),P(35,"div",12)(36,"h2",13),N(37,"Free Consulting"),w()(),_e(38,"div",14),w()()()()),2&n){const t=ln();Ee(14),Le("ngForOf",t.business.services.split(",")),Ee(6),Le("ngForOf",t.business.serviceBenefits.split(",")),Ee(5),Ur(t.business.specialPrograms),Ee(7),Le("innerHTML",t.business.tours,qa),Ee(6),Le("innerHTML",t.business.freeConsulting,qa)}}let OX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(vu),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-services"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-services"],[1,"hero-overlay"],[1,"hero-subtitle"],[1,"container"],[1,"services-list"],["src","/assets/care.svg","alt","Service Icon"],[4,"ngFor","ngForOf"],[1,"special-programs"],[1,"tours-consulting"],[1,"tours"],["src","../../../assets/sharedAssets/image_fx_ (3).jpg",1,"service_image"],[1,"heading-container"],[1,"styled-heading"],[1,"services_txt","garamond",3,"innerHTML"],[1,"consulting"],["src","../../../assets/sharedAssets/image_fx_ (1).jpg",1,"service_image"]],template:function(r,i){1&r&&At(0,NX,39,5,"div",0),2&r&&Le("ngIf",i.business)},dependencies:[Es,Zo],styles:['.hero-services[_ngcontent-%COMP%]{background:url(istockphoto-1335866199-2048x2048.e588b8992a5787c5.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:.5rem;text-transform:uppercase;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.hero-subtitle[_ngcontent-%COMP%]{font-size:2rem;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.services-list[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:12px;margin-bottom:40px}.service-item[_ngcontent-%COMP%]{background:white;padding:20px;margin-bottom:20px;border-radius:8px;box-shadow:0 2px 5px #0000001a;display:flex;align-items:center}.service-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.special-programs[_ngcontent-%COMP%], .tours-consulting[_ngcontent-%COMP%]{background:#f9f9f9;padding:30px;border-radius:8px;margin-bottom:40px}.tours-consulting[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{flex:1;margin-right:40px}.tours[_ngcontent-%COMP%]:last-child, .consulting[_ngcontent-%COMP%]:last-child{margin-right:0}.service-icon[_ngcontent-%COMP%]{flex:0 0 50px;margin-right:20px}.service-content[_ngcontent-%COMP%]{flex:1}.service_heading[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:1rem}.body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}.services-page[_ngcontent-%COMP%]{text-align:center}.service_image[_ngcontent-%COMP%]{max-width:100%}.heading-container[_ngcontent-%COMP%]{text-align:center;margin:20px 0;padding:10px;position:relative;overflow:hidden}.styled-heading[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2rem;font-weight:700;color:#333;position:relative;z-index:1;display:inline-block;padding:10px 20px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.styled-heading[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:0;right:0;height:2px;background-color:#e0e0e0;z-index:0;transform:translateY(-50%)}.styled-heading[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;width:100px;height:5px;background-color:#ff6f61;transform:translate(-50%);z-index:2}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.special-programs[_ngcontent-%COMP%], .tours-consulting[_ngcontent-%COMP%]{padding:20px}.tours-consulting[_ngcontent-%COMP%]{flex-direction:column;margin-right:0}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{margin-right:0;min-width:100%}.service-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.service_heading[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:.5rem}.styled-heading[_ngcontent-%COMP%]{font-size:1.5rem;padding:8px 16px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.tours-consulting[_ngcontent-%COMP%], .special-programs[_ngcontent-%COMP%]{padding:10px}.service_heading[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.25rem}.styled-heading[_ngcontent-%COMP%]{font-size:1.25rem;padding:6px 12px}.service-item[_ngcontent-%COMP%]{padding:15px}}']})}return n})(),aL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Qs),ae(ro))};static#t=this.\u0275dir=Je({type:n})}return n})(),Rc=(()=>{class n extends aL{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=dr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,features:[Xt]})}return n})();const Fs=new Te("NgValueAccessor"),VX={provide:Fs,useExisting:Ht(()=>Cg),multi:!0},UX=new Te("CompositionEventMode");let Cg=(()=>{class n extends aL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function LX(){const n=Za()?Za().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Qs),ae(ro),ae(UX,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ft("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Mn([VX]),Xt]})}return n})();function Iu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function cL(n){return null!=n&&"number"==typeof n.length}const si=new Te("NgValidators"),Eu=new Te("NgAsyncValidators"),BX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class nn{static min(e){return function lL(n){return e=>{if(Iu(e.value)||Iu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function dL(n){return e=>{if(Iu(e.value)||Iu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return hL(e)}static requiredTrue(e){return function fL(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function pL(n){return Iu(n.value)||BX.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function gL(n){return e=>Iu(e.value)||!cL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function mL(n){return e=>cL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function _L(n){if(!n)return rI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Iu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return wL(e)}static composeAsync(e){return CL(e)}}function hL(n){return Iu(n.value)?{required:!0}:null}function rI(n){return null}function yL(n){return null!=n}function vL(n){return Hf(n)?C(n):n}function IL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function EL(n,e){return e.map(t=>t(n))}function bL(n){return n.map(e=>function jX(n){return!n.validate}(e)?e:t=>e.validate(t))}function wL(n){if(!n)return null;const e=n.filter(yL);return 0==e.length?null:function(t){return IL(EL(t,e))}}function dD(n){return null!=n?wL(bL(n)):null}function CL(n){if(!n)return null;const e=n.filter(yL);return 0==e.length?null:function(t){return function kX(...n){const e=Mo(n),{args:t,keys:r}=QM(n),i=new ct(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let f=0;f<s;f++){let m=!1;Vt(t[f]).subscribe(xe(o,y=>{m||(m=!0,l--),a[f]=y},()=>u--,void 0,()=>{(!u||!m)&&(l||o.next(r?JM(r,a):a),o.complete())}))}});return e?i.pipe(YM(e)):i}(EL(t,e).map(vL)).pipe(Oe(IL))}}function hD(n){return null!=n?CL(bL(n)):null}function TL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DL(n){return n._rawValidators}function AL(n){return n._rawAsyncValidators}function fD(n){return n?Array.isArray(n)?n:[n]:[]}function iI(n,e){return Array.isArray(n)?n.includes(e):n===e}function SL(n,e){const t=fD(e);return fD(n).forEach(i=>{iI(t,i)||t.push(i)}),t}function PL(n,e){return fD(e).filter(t=>!iI(n,t))}class RL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Si extends RL{get formDirective(){return null}get path(){return null}}class bu extends RL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pD=(()=>{class n extends xL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(bu,2))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&od("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Xt]})}return n})(),oI=(()=>{class n extends xL{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Si,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&od("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Xt]})}return n})();const Tg="VALID",aI="INVALID",hh="PENDING",Dg="DISABLED";function _D(n){return(uI(n)?n.validators:n)||null}function yD(n,e){return(uI(e)?e.asyncValidators:n)||null}function uI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function NL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new O(1e3,"");if(!r[t])throw new O(1001,"")}function OL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new O(1002,"")})}class cI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Tg}get invalid(){return this.status===aI}get pending(){return this.status==hh}get disabled(){return this.status===Dg}get enabled(){return this.status!==Dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(SL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(SL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PL(e,this._rawAsyncValidators))}hasValidator(e){return iI(this._rawValidators,e)}hasAsyncValidator(e){return iI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tg||this.status===hh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dg:Tg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hh,this._hasOwnPendingAsyncValidator=!0;const t=vL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new zn,this.statusChanges=new zn}_calculateStatus(){return this._allControlsDisabled()?Dg:this.errors?aI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hh)?hh:this._anyControlsHaveStatus(aI)?aI:Tg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function qX(n){return Array.isArray(n)?dD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function GX(n){return Array.isArray(n)?hD(n):n||null}(this._rawAsyncValidators)}}class Ag extends cI{constructor(e,t,r){super(_D(t),yD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){OL(this,0,e),Object.keys(e).forEach(r=>{NL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class kL extends Ag{}const xc=new Te("CallSetDisabledState",{providedIn:"root",factory:()=>Sg}),Sg="always";function lI(n,e){return[...e.path,n]}function Pg(n,e,t=Sg){vD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function ZX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FL(n,e)})}(n,e),function QX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function KX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function WX(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function dI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),fI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vD(n,e){const t=DL(n);null!==e.validator?n.setValidators(TL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=AL(n);null!==e.asyncValidator?n.setAsyncValidators(TL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hI(e._rawValidators,i),hI(e._rawAsyncValidators,i)}function fI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=DL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=AL(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return hI(e._rawValidators,r),hI(e._rawAsyncValidators,r),t}function FL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VL(n,e){vD(n,e)}function LL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const tee={provide:Si,useExisting:Ht(()=>pI)},Rg=(()=>Promise.resolve())();let pI=(()=>{class n extends Si{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new zn,this.form=new Ag({},dD(t),hD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Pg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rg.then(()=>{const r=this._findContainer(t.path),i=new Ag({});VL(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Rg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,LL(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ae(si,10),ae(Eu,10),ae(xc,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ft("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mn([tee]),Xt]})}return n})();function UL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function BL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xg=class extends cI{constructor(e=null,t,r){super(_D(t),yD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=BL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){BL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let jL=(()=>{class n extends Si{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return lI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=dr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,features:[Xt]})}return n})(),gI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),GL=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({})}return n})();const wD=new Te("NgModelWithFormControlWarning"),lee={provide:Si,useExisting:Ht(()=>Mg)};let Mg=(()=>{class n extends Si{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new zn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Pg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dI(t.control||null,t,!1),function eee(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,LL(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(dI(r||null,t),(n=>n instanceof xg)(i)&&(Pg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);VL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function YX(n,e){return fI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vD(this.form,this),this._oldForm&&fI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(ae(si,10),ae(Eu,10),ae(xc,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ft("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mn([lee]),Xt,Li]})}return n})();const dee={provide:Si,useExisting:Ht(()=>Ng)};let Ng=(()=>{class n extends jL{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){QL(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Si,13),ae(si,10),ae(Eu,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[Mn([dee]),Xt]})}return n})();const hee={provide:Si,useExisting:Ht(()=>Og)};let Og=(()=>{class n extends Si{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return lI(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){QL(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(ae(Si,13),ae(si,10),ae(Eu,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[Mn([hee]),Xt]})}return n})();function QL(n){return!(n instanceof Ng||n instanceof Mg||n instanceof Og)}const fee={provide:bu,useExisting:Ht(()=>mI)};let mI=(()=>{class n extends bu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new zn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function bD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Cg?t=o:function XX(n){return Object.getPrototypeOf(n.constructor)===Rc}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function ED(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return lI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(ae(Si,13),ae(si,10),ae(Eu,10),ae(Fs,10),ae(wD,8))};static#n=this.\u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mn([fee]),Xt,Li]})}return n})(),Mc=(()=>{class n{constructor(){this._validator=rI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,features:[Li]})}return n})();const bee={provide:si,useExisting:Ht(()=>kg),multi:!0};let kg=(()=>{class n extends Mc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=dd,this.createValidator=t=>hL}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=dr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Bo("required",i._enabled?"":null)},inputs:{required:"required"},features:[Mn([bee]),Xt]})}return n})(),uU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({imports:[GL]})}return n})();class cU extends cI{constructor(e,t,r){super(_D(t),yD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){OL(this,0,e),e.forEach((r,i)=>{NL(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function lU(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let dU=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return lU(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ag(i,o)}record(t,r=null){const i=this._reduceControls(t);return new kL(i,r)}control(t,r,i){let o={};return this.useNonNullable?(lU(r)?o=r:(o.validators=r,o.asyncValidators=i),new xg(t,{...o,nonNullable:!0})):new xg(t,r,i)}array(t,r,i){const o=t.map(s=>this._createControl(s));return new cU(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof xg||t instanceof cI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),See=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xc,useValue:t.callSetDisabledState??Sg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({imports:[uU]})}return n})(),Pee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xc,useValue:t.callSetDisabledState??Sg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({imports:[uU]})}return n})();function Ree(n,e){if(1&n&&(P(0,"div",7)(1,"h3"),N(2,"Email"),w(),P(3,"p")(4,"a",21),N(5),w()()()),2&n){const t=ln(2);Ee(4),oo("href","mailto:",t.business.email,"",ji),Ee(1),Ur(t.business.email)}}function xee(n,e){if(1&n&&(P(0,"div",7)(1,"h3"),N(2,"Fax"),w(),P(3,"p"),N(4),w()()),2&n){const t=ln(2);Ee(4),Ur(t.business.fax)}}function Mee(n,e){if(1&n&&(P(0,"div",7)(1,"h3"),N(2,"Social Media"),w(),P(3,"p")(4,"a",21),N(5),w()()()),2&n){const t=ln(2);Ee(4),qf("href",t.business.socialMedia,ji),Ee(1),Ur(t.business.socialMedia)}}function Nee(n,e){if(1&n&&(P(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),N(4,"Contact Us"),w(),P(5,"div",3)(6,"p"),N(7,"We're here to answer any questions you have"),w()()()(),P(8,"div",4)(9,"section",5)(10,"h2"),N(11,"Get in Touch"),w(),P(12,"div",6)(13,"div",7)(14,"h3"),N(15,"Address"),w(),P(16,"p"),N(17),w()(),P(18,"div",7)(19,"h3"),N(20,"Phone"),w(),P(21,"p"),N(22),w()(),At(23,Ree,6,2,"div",8),At(24,xee,5,1,"div",8),At(25,Mee,6,2,"div",8),P(26,"div")(27,"h3"),N(28,"Visitation Hours"),w(),P(29,"ul")(30,"li")(31,"strong"),N(32,"Monday:"),w(),N(33," 7.30am\u20135pm"),w(),P(34,"li")(35,"strong"),N(36,"Tuesday:"),w(),N(37," 7.30am\u20135pm"),w(),P(38,"li")(39,"strong"),N(40,"Wednesday:"),w(),N(41," 7.30am\u20135pm"),w(),P(42,"li")(43,"strong"),N(44,"Thursday:"),w(),N(45," 7.30am\u20135pm"),w(),P(46,"li")(47,"strong"),N(48,"Friday:"),w(),N(49," 7.30am\u20135pm"),w(),P(50,"li")(51,"strong"),N(52,"Saturday:"),w(),N(53,"Closed"),w(),P(54,"li")(55,"strong"),N(56,"Sunday:"),w(),N(57,"Closed"),w()()()()(),P(58,"section",9)(59,"h2"),N(60,"Send Us a Message"),w(),P(61,"form")(62,"div",10)(63,"label",11),N(64,"Name"),w(),_e(65,"input",12),w(),P(66,"div",10)(67,"label",13),N(68,"Email"),w(),_e(69,"input",14),w(),P(70,"div",10)(71,"label",15),N(72,"Message"),w(),_e(73,"textarea",16),w(),P(74,"button",17),N(75,"Submit"),w()()(),P(76,"section",18)(77,"h2"),N(78,"Find Us Here"),w(),P(79,"div",19),_e(80,"iframe",20),w()()()()),2&n){const t=ln();Ee(17),Ur(t.business.address),Ee(5),Ur(t.business.phone),Ee(1),Le("ngIf",t.business.email),Ee(1),Le("ngIf",t.business.fax),Ee(1),Le("ngIf",t.business.socialMedia)}}let Oee=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(vu),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-contact-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-contact"],[1,"hero-overlay"],[1,"hero-subtitle"],[1,"container"],[1,"contact-info"],[1,"contact-details"],[1,"contact-item"],["class","contact-item",4,"ngIf"],[1,"contact-form"],[1,"form-group"],["for","name"],["type","text","id","name","required",""],["for","email"],["type","email","id","email","required",""],["for","message"],["id","message","rows","5","required",""],["type","submit"],[1,"map-section"],[1,"map-container"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7460.530516506536!2d-122.18471088983462!3d47.54600478154801!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x549069117965856f%3A0xa36b023f16c07440!2s11805%20SE%2064th%20St%2C%20Bellevue%2C%20WA%2098006!5e0!3m2!1sen!2sus!4v1719851446084!5m2!1sen!2sus","width","600","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[3,"href"]],template:function(r,i){1&r&&At(0,Nee,81,5,"div",0),2&r&&Le("ngIf",i.business)},dependencies:[Zo,gI,oI,pI],styles:[".hero-contact[_ngcontent-%COMP%]{background-image:url(/assets/splash2.jpg);background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:.3rem;text-transform:uppercase;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.hero-subtitle[_ngcontent-%COMP%]{font-size:2rem;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.contact-info[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.contact-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.contact-item[_ngcontent-%COMP%]{flex:1 1 45%;margin-bottom:20px}.contact-form[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:1rem}.button[_ngcontent-%COMP%]:hover{background-color:#45a049}.map-section[_ngcontent-%COMP%]{margin-bottom:50px}.map-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#f9f9f9;border-radius:8px;box-shadow:0 2px 5px #0000001a}.map-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:0}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;letter-spacing:.2rem}.contact-details[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.contact-item[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.map-section[_ngcontent-%COMP%]{margin-bottom:30px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;letter-spacing:.1rem}.contact-item[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px}.button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem}}"]})}return n})(),DD=(()=>{class n{constructor(t,r){this.afs=t,this.storage=r,this.basePath="businesses"}createBusiness(t){console.log("Business Created");const r=this.afs.createId();return this.afs.doc(`${this.basePath}/${r}`).set({...t,id:r})}getBusinesses(){return this.afs.collection(this.basePath).snapshotChanges().pipe(Oe(t=>t.map(r=>{const i=r.payload.doc.data(),o=r.payload.doc.id,{id:s,...a}=i;return{id:o,...a}})))}getAllBusinesses(){return this.afs.collection(this.basePath).valueChanges({idField:"id"})}getBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).valueChanges()}updateBusiness(t,r){return this.afs.doc(`${this.basePath}/${t}`).update(r)}deleteBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).delete()}uploadFile(t,r){return this.storage.upload(t,r)}getDownloadURL(t){return this.storage.ref(t).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||n)(we(yg),we(wg))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AD=(()=>{class n{constructor(t,r){this.storage=t,this.firestore=r}uploadFile(t,r,i){let o;switch(i){case"employee":o=`businesses/${r}/employee/${t.name}`;break;case"business":o=`businesses/${r}/business/${t.name}`;break;default:o=`businesses/${r}/gallery/${t.name}`}const s=this.storage.ref(o),a=this.storage.upload(o,t);return{uploadProgress:a.percentageChanges().pipe(Oe(f=>f??0)),downloadUrl:new ct(f=>{a.snapshotChanges().pipe(Ya(()=>{s.getDownloadURL().subscribe(m=>{this.firestore.collection("businesses").doc(r).collection(i).add({url:m}),f.next(m),f.complete()})})).subscribe()})}}static#e=this.\u0275fac=function(r){return new(r||n)(we(wg),we(yg))};static#t=this.\u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kee(n,e){if(1&n&&(jo(0),P(1,"div",111)(2,"div",112),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Fee(n,e){if(1&n&&(jo(0),P(1,"div",111)(2,"div",112),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Vee(n,e){if(1&n&&(jo(0),P(1,"div",111)(2,"div",112),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Lee(n,e){if(1&n&&(jo(0),P(1,"div",111)(2,"div",112),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Uee(n,e){if(1&n){const t=rd();P(0,"div",113)(1,"div",19)(2,"label",114),N(3,"Employee Name"),w(),_e(4,"input",115),w(),P(5,"div",19)(6,"label",116),N(7,"Role"),w(),_e(8,"input",117),w(),P(9,"div",19)(10,"label",118),N(11,"Bio"),w(),_e(12,"textarea",119),w(),P(13,"div",19)(14,"label",120),N(15,"Photo"),w(),P(16,"input",121),ft("change",function(i){const s=Vo(t).index;return to(ln().onEmployeeFileChange(i,s))}),w(),At(17,Lee,4,3,"ng-container",56),zi(18,"async"),w(),P(19,"button",109),ft("click",function(){const o=Vo(t).index;return to(ln().removeEmployee(o))}),N(20,"Remove Employee"),w()()}if(2&n){const t=e.index,r=ln();Le("formGroupName",t),Ee(17),Le("ngIf",Hi(18,2,r.uploadProgress["employee_"+t]))}}let SD=(()=>{class n{constructor(t,r,i,o){this.fb=t,this.businessService=r,this.uploadService=i,this.route=o,this.uploadProgress={}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id}),this.businessForm=this.fb.group({businessName:["Careful Living AFH",nn.required],tagline:["Caring with compassion"],uniqueService:["Personalized 24/7 care"],whyChoose:["We provide personalized care tailored to each resident's needs."],businessStory:["Careful Living AFH was founded in 2005 by a group of healthcare professionals who wanted to provide a loving and caring environment for seniors.",nn.required],motivation:["The motivation behind starting this business was to create a home where seniors can live comfortably and with dignity."],mission:["Our mission is to work hard each day to meet and exceed the expectations of our residents and their families. We provide personalized extensive care plans based on the residents needs, preferences and interests while giving their families peace of mind knowing that all their needs are being met.",nn.required],vision:["Elderly Home Care is a perfect alternative for seniors who can no longer live on their own, but want to maintain their independence in a warm, friendly home-like atmosphere with 24-hour tender compassionate care. We are conveniently located 10 minutes away from Evergreen Hospital in Bellevue, bordering Kirkland",nn.required],certifications:["Licensed by the state, Certified Nursing Assistants (CNA) on staff.",nn.required],targetAudience:["Seniors in need of assisted living services, families looking for quality care for their loved ones."],services:["24-hour supervision and assistance , Medication management , Vital signs monitoring , Assistance with daily living activities such as dressing, bathing, grooming , Partial or full incontinence care support , Assistance with walking, transferring and eating , Three nutritious home-cooked meals and snacks daily , Special diets , Laundry and housekeeping , Personalized activities programs , Entertainment provided by outside vendors",nn.required],specialPrograms:["Holiday Celebrations \xb7 Birthday Parties \xb7 Outdoor activities \xb7 Exercise Program \xb7 Musical Program \xb7 Arts and Crafts \xb7 Games \xb7 Movie and Popcorn Nights \xb7 Newspaper \xb7 Gardening"],tours:["Yes, we provide tours of our facility."],freeConsulting:["Yes, we offer free consulting services."],websiteGoals:["To provide information, encourage visits, and offer consultation requests.",nn.required],logoImage:[""],ownerImagesBios:["John Doe, RN, Founder.",nn.required],staffImagesBios:["Jane Smith, CNA, Head Nurse; Bob Johnson, Physical Therapist.",nn.required],facilityImages:[""],lifestyleImages:[""],mediaFeatures:["Featured in Local News, Healthcare Magazine."],ratings:["Google: 4.8 stars, Yelp: 5 stars"],testimonials:['John Doe\'s family: "Amazing care!"'],address:["1234 Care St, Compassion City, ST 12345",nn.required],phone:["(123) 456-7890",nn.required],fax:["(123) 456-7891"],email:["info@carefullivingafh.com",nn.email],businessHours:["Mon-Fri: 9am-5pm, Sat-Sun: 10am-4pm",nn.required],socialMedia:["Facebook: facebook.com/carefullivingafh"],welcomeMessage:["Welcome to Careful Living AFH, where we care with compassion.",nn.required],keyServicesHighlights:["24/7 care, nutritious meals, engaging activities.",nn.required],teamValues:["Our team is trained and specialized in providing care for seniors in need of, or who are diagnosed with a wide range of illnesses such as: Dementia, Alzheimer\u2019s, Strokes, Diabetic Management, Cardiac Problems, Multiple Sclerosis, Rehabilitation and Hospice/Palliative Care",nn.required],serviceBenefits:["Private rooms with private or shared bathrooms , Each room is equipped with calling system, phone, cable TV, internet , Handicap accessible , Spacious open floor plan with high ceiling , Harwood floors , Smoke alarm system , Security system , Covered deck , Emergency call buttons , Generator",nn.required],pricingStructure:["Contact us for pricing details.",nn.required],contactFormDetails:["Name, Email, Phone, Message",nn.required],mapDirections:["Included map and directions to our facility."],photoGallery:["Gallery of our facility and events."],employees:this.fb.array([])})}employees(){return this.businessForm.get("employees")}addEmployee(){const t=this.fb.group({id:[""],name:[""],role:[""],bio:[""],photoURL:[""]});this.employees().push(t)}removeEmployee(t){this.employees().removeAt(t)}onEmployeeFileChange(t,r){const i=t.target.files[0];if(i){const{uploadProgress:o,downloadUrl:s}=this.uploadService.uploadFile(i,this.businessId,"employee");this.uploadProgress[`employee_${r}`]=o,s.pipe(Ya(()=>{s.subscribe(a=>{this.employees().at(r).patchValue({photoURL:a})})})).subscribe()}}onFileChange(t,r){const i=t.target.files[0];if(i){let o;o="photoGallery"===r?"gallery":"logoImage"===r||"ownerImagesBios"===r||"staffImagesBios"===r?"business":"employee";const{uploadProgress:s,downloadUrl:a}=this.uploadService.uploadFile(i,this.businessId,o);this.uploadProgress[r]=s,a.pipe(Ya(()=>{a.subscribe(u=>{const l=this.businessForm.get(r)?.value;Array.isArray(l)?this.businessForm.patchValue({[r]:[...l,u]}):this.businessForm.patchValue({[r]:u})})})).subscribe()}}onSubmit(){if(console.log("Submit Click",this.businessForm.valid),this.businessForm.valid){const t=this.businessForm.value;console.log(t),this.businessService.createBusiness(t).then(()=>alert("Business details saved successfully!")).catch(r=>console.error("Error saving business details",r))}}preventDefault(t){t.preventDefault()}static#e=this.\u0275fac=function(r){return new(r||n)(ae(dU),ae(DD),ae(AD),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-business-question-form"]],decls:246,vars:11,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["id","businessTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","basic-info-tab","data-bs-toggle","tab","data-bs-target","#basic-info","type","button","role","tab","aria-controls","basic-info","aria-selected","true",1,"nav-link","active"],["id","story-mission-tab","data-bs-toggle","tab","data-bs-target","#story-mission","type","button","role","tab","aria-controls","story-mission","aria-selected","false",1,"nav-link"],["id","certifications-tab","data-bs-toggle","tab","data-bs-target","#certifications","type","button","role","tab","aria-controls","certifications","aria-selected","false",1,"nav-link"],["id","services-offerings-tab","data-bs-toggle","tab","data-bs-target","#services-offerings","type","button","role","tab","aria-controls","services-offerings","aria-selected","false",1,"nav-link"],["id","content-photos-tab","data-bs-toggle","tab","data-bs-target","#content-photos","type","button","role","tab","aria-controls","content-photos","aria-selected","false",1,"nav-link"],["id","media-reviews-tab","data-bs-toggle","tab","data-bs-target","#media-reviews","type","button","role","tab","aria-controls","media-reviews","aria-selected","false",1,"nav-link"],["id","contact-info-tab","data-bs-toggle","tab","data-bs-target","#contact-info","type","button","role","tab","aria-controls","contact-info","aria-selected","false",1,"nav-link"],["id","home-page-tab","data-bs-toggle","tab","data-bs-target","#home-page","type","button","role","tab","aria-controls","home-page","aria-selected","false",1,"nav-link"],["id","about-us-tab","data-bs-toggle","tab","data-bs-target","#about-us","type","button","role","tab","aria-controls","about-us","aria-selected","false",1,"nav-link"],["id","services-page-tab","data-bs-toggle","tab","data-bs-target","#services-page","type","button","role","tab","aria-controls","services-page","aria-selected","false",1,"nav-link"],["id","contact-us-page-tab","data-bs-toggle","tab","data-bs-target","#contact-us-page","type","button","role","tab","aria-controls","contact-us-page","aria-selected","false",1,"nav-link"],["id","additional-content-tab","data-bs-toggle","tab","data-bs-target","#additional-content","type","button","role","tab","aria-controls","additional-content","aria-selected","false",1,"nav-link"],["id","employee-profiles-tab","data-bs-toggle","tab","data-bs-target","#employee-profiles","type","button","role","tab","aria-controls","employee-profiles","aria-selected","false",1,"nav-link"],["id","businessTabContent",1,"tab-content"],["id","basic-info","role","tabpanel","aria-labelledby","basic-info-tab",1,"tab-pane","fade","show","active"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required","",1,"form-control"],["for","tagline"],["id","tagline","formControlName","tagline",1,"form-control"],["for","uniqueService"],["id","uniqueService","formControlName","uniqueService",1,"form-control"],["for","whyChoose"],["id","whyChoose","formControlName","whyChoose",1,"form-control"],["id","story-mission","role","tabpanel","aria-labelledby","story-mission-tab",1,"tab-pane","fade"],["for","businessStory",1,"required"],["id","businessStory","formControlName","businessStory","required","",1,"form-control"],["for","motivation"],["id","motivation","formControlName","motivation",1,"form-control"],["for","mission",1,"required"],["id","mission","formControlName","mission","required","",1,"form-control"],["for","vision",1,"required"],["id","vision","formControlName","vision","required","",1,"form-control"],["id","certifications","role","tabpanel","aria-labelledby","certifications-tab",1,"tab-pane","fade"],["for","certifications",1,"required"],["id","certifications","formControlName","certifications","required","",1,"form-control"],["for","targetAudience"],["id","targetAudience","formControlName","targetAudience",1,"form-control"],["id","services-offerings","role","tabpanel","aria-labelledby","services-offerings-tab",1,"tab-pane","fade"],["for","services",1,"required"],["id","services","formControlName","services","required","",1,"form-control"],["for","specialPrograms"],["id","specialPrograms","formControlName","specialPrograms",1,"form-control"],["for","tours"],["id","tours","formControlName","tours",1,"form-control"],["for","freeConsulting"],["id","freeConsulting","formControlName","freeConsulting",1,"form-control"],["id","content-photos","role","tabpanel","aria-labelledby","content-photos-tab",1,"tab-pane","fade"],["for","websiteGoals",1,"required"],["id","websiteGoals","formControlName","websiteGoals","required","",1,"form-control"],["for","logoImage",1,"required"],["type","file","id","logoImage",1,"form-control",3,"change"],[4,"ngIf"],["for","ownerImagesBios",1,"required"],["id","ownerImagesBios","formControlName","ownerImagesBios","required","",1,"form-control"],["for","staffImagesBios",1,"required"],["id","staffImagesBios","formControlName","staffImagesBios","required","",1,"form-control"],["for","facilityImages",1,"required"],["type","file","id","facilityImages",1,"form-control",3,"change"],["for","lifestyleImages",1,"required"],["type","file","id","lifestyleImages",1,"form-control",3,"change"],["id","media-reviews","role","tabpanel","aria-labelledby","media-reviews-tab",1,"tab-pane","fade"],["for","mediaFeatures"],["id","mediaFeatures","formControlName","mediaFeatures",1,"form-control"],["for","ratings"],["id","ratings","formControlName","ratings",1,"form-control"],["for","testimonials"],["id","testimonials","formControlName","testimonials",1,"form-control"],["id","contact-info","role","tabpanel","aria-labelledby","contact-info-tab",1,"tab-pane","fade"],["for","address",1,"required"],["id","address","formControlName","address","required","",1,"form-control"],["for","phone",1,"required"],["id","phone","formControlName","phone","required","",1,"form-control"],["for","fax"],["id","fax","formControlName","fax",1,"form-control"],["for","email",1,"required"],["id","email","formControlName","email","required","",1,"form-control"],["for","businessHours",1,"required"],["id","businessHours","formControlName","businessHours","required","",1,"form-control"],["for","socialMedia"],["id","socialMedia","formControlName","socialMedia",1,"form-control"],["id","home-page","role","tabpanel","aria-labelledby","home-page-tab",1,"tab-pane","fade"],["for","welcomeMessage"],["id","welcomeMessage","formControlName","welcomeMessage","required","",1,"form-control"],["for","keyServicesHighlights",1,"required"],["id","keyServicesHighlights","formControlName","keyServicesHighlights","required","",1,"form-control"],["id","about-us","role","tabpanel","aria-labelledby","about-us-tab",1,"tab-pane","fade"],["for","teamValues",1,"required"],["id","teamValues","formControlName","teamValues","required","",1,"form-control"],["id","services-page","role","tabpanel","aria-labelledby","services-page-tab",1,"tab-pane","fade"],["for","serviceBenefits",1,"required"],["id","serviceBenefits","formControlName","serviceBenefits","required","",1,"form-control"],["for","pricingStructure",1,"required"],["id","pricingStructure","formControlName","pricingStructure","required","",1,"form-control"],["id","contact-us-page","role","tabpanel","aria-labelledby","contact-us-page-tab",1,"tab-pane","fade"],["for","contactFormDetails",1,"required"],["id","contactFormDetails","formControlName","contactFormDetails","required","",1,"form-control"],["for","mapDirections"],["id","mapDirections","formControlName","mapDirections",1,"form-control"],["id","additional-content","role","tabpanel","aria-labelledby","additional-content-tab",1,"tab-pane","fade"],["for","photoGallery"],["formControlName","photoGallery",1,"form-control"],["id","employee-profiles","role","tabpanel","aria-labelledby","employee-profiles-tab",1,"tab-pane","fade"],["formArrayName","employees"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],["type","submit"],[1,"progress"],[1,"progress-bar"],[3,"formGroupName"],["for","employeeName"],["id","employeeName","formControlName","name",1,"form-control"],["for","employeeRole"],["id","employeeRole","formControlName","role",1,"form-control"],["for","employeeBio"],["id","employeeBio","formControlName","bio",1,"form-control"],["for","employeePhoto"],["type","file","id","employeePhoto",1,"form-control",3,"change"]],template:function(r,i){1&r&&(P(0,"div",0)(1,"form",1),ft("ngSubmit",function(){return i.onSubmit()}),P(2,"ul",2)(3,"li",3)(4,"button",4),N(5,"Basic Information"),w()(),P(6,"li",3)(7,"button",5),N(8,"Story & Mission"),w()(),P(9,"li",3)(10,"button",6),N(11,"Certifications"),w()(),P(12,"li",3)(13,"button",7),N(14,"Services & Offerings"),w()(),P(15,"li",3)(16,"button",8),N(17,"Content & Photos"),w()(),P(18,"li",3)(19,"button",9),N(20,"Media & Reviews"),w()(),P(21,"li",3)(22,"button",10),N(23,"Contact Information"),w()(),P(24,"li",3)(25,"button",11),N(26,"Home Page"),w()(),P(27,"li",3)(28,"button",12),N(29,"About Us"),w()(),P(30,"li",3)(31,"button",13),N(32,"Services Page"),w()(),P(33,"li",3)(34,"button",14),N(35,"Contact Us Page"),w()(),P(36,"li",3)(37,"button",15),N(38,"Additional Content"),w()(),P(39,"li",3)(40,"button",16),N(41,"Employee Profiles"),w()()(),P(42,"div",17)(43,"div",18)(44,"h2"),N(45,"Basic Information"),w(),P(46,"div",19)(47,"label",20),N(48,"Business Name"),w(),_e(49,"input",21),w(),P(50,"div",19)(51,"label",22),N(52,"Tagline"),w(),_e(53,"input",23),w(),P(54,"div",19)(55,"label",24),N(56,"Unique Service"),w(),_e(57,"input",25),w(),P(58,"div",19)(59,"label",26),N(60,"Why Choose Us"),w(),_e(61,"input",27),w()(),P(62,"div",28)(63,"h2"),N(64,"Business Story and Mission"),w(),P(65,"div",19)(66,"label",29),N(67,"Business Story"),w(),_e(68,"textarea",30),w(),P(69,"div",19)(70,"label",31),N(71,"Motivation"),w(),_e(72,"textarea",32),w(),P(73,"div",19)(74,"label",33),N(75,"Mission"),w(),_e(76,"textarea",34),w(),P(77,"div",19)(78,"label",35),N(79,"Vision"),w(),_e(80,"textarea",36),w()(),P(81,"div",37)(82,"h2"),N(83,"Certifications and Target Audience"),w(),P(84,"div",19)(85,"label",38),N(86,"Certifications"),w(),_e(87,"textarea",39),w(),P(88,"div",19)(89,"label",40),N(90,"Target Audience"),w(),_e(91,"textarea",41),w()(),P(92,"div",42)(93,"h2"),N(94,"Services and Offerings"),w(),P(95,"div",19)(96,"label",43),N(97,"Services"),w(),_e(98,"textarea",44),w(),P(99,"div",19)(100,"label",45),N(101,"Special Programs"),w(),_e(102,"textarea",46),w(),P(103,"div",19)(104,"label",47),N(105,"Tours"),w(),_e(106,"textarea",48),w(),P(107,"div",19)(108,"label",49),N(109,"Free Consulting"),w(),_e(110,"textarea",50),w()(),P(111,"div",51)(112,"h2"),N(113,"Website Goals"),w(),P(114,"div",19)(115,"label",52),N(116,"Website Goals"),w(),_e(117,"textarea",53),w(),P(118,"h2"),N(119,"Content and Photos"),w(),P(120,"div",19)(121,"label",54),N(122,"Logo Image"),w(),P(123,"input",55),ft("change",function(s){return i.onFileChange(s,"logoImage")}),w(),At(124,kee,4,3,"ng-container",56),zi(125,"async"),w(),P(126,"div",19)(127,"label",57),N(128,"Owner Images and Bios"),w(),_e(129,"textarea",58),w(),P(130,"div",19)(131,"label",59),N(132,"Staff Images and Bios"),w(),_e(133,"textarea",60),w(),P(134,"h2"),N(135,"Facility and Lifestyle Images"),w(),P(136,"div",19)(137,"label",61),N(138,"Facility Images"),w(),P(139,"input",62),ft("change",function(s){return i.onFileChange(s,"facilityImages")}),w(),At(140,Fee,4,3,"ng-container",56),zi(141,"async"),w(),P(142,"div",19)(143,"label",63),N(144,"Lifestyle Images"),w(),P(145,"input",64),ft("change",function(s){return i.onFileChange(s,"lifestyleImages")}),w(),At(146,Vee,4,3,"ng-container",56),zi(147,"async"),w()(),P(148,"div",65)(149,"h2"),N(150,"Media and Reviews"),w(),P(151,"div",19)(152,"label",66),N(153,"Media Features"),w(),_e(154,"textarea",67),w(),P(155,"div",19)(156,"label",68),N(157,"Ratings"),w(),_e(158,"textarea",69),w(),P(159,"div",19)(160,"label",70),N(161,"Testimonials"),w(),_e(162,"textarea",71),w()(),P(163,"div",72)(164,"h2"),N(165,"Contact Information"),w(),P(166,"div",19)(167,"label",73),N(168,"Address"),w(),_e(169,"textarea",74),w(),P(170,"div",19)(171,"label",75),N(172,"Phone"),w(),_e(173,"input",76),w(),P(174,"div",19)(175,"label",77),N(176,"Fax"),w(),_e(177,"input",78),w(),P(178,"div",19)(179,"label",79),N(180,"Email"),w(),_e(181,"input",80),w(),P(182,"div",19)(183,"label",81),N(184,"Business Hours"),w(),_e(185,"textarea",82),w(),P(186,"div",19)(187,"label",83),N(188,"Social Media"),w(),_e(189,"textarea",84),w()(),P(190,"div",85)(191,"h2"),N(192,"Home Page"),w(),P(193,"div",19)(194,"label",86),N(195,"Welcome Message"),w(),_e(196,"textarea",87),w(),P(197,"div",19)(198,"label",88),N(199,"Key Services and Highlights"),w(),_e(200,"textarea",89),w()(),P(201,"div",90)(202,"h2"),N(203,"About Us Page"),w(),P(204,"div",19)(205,"label",91),N(206,"Team and Values"),w(),_e(207,"textarea",92),w()(),P(208,"div",93)(209,"h2"),N(210,"Services Page"),w(),P(211,"div",19)(212,"label",94),N(213,"Service Benefits"),w(),_e(214,"textarea",95),w(),P(215,"div",19)(216,"label",96),N(217,"Pricing Structure"),w(),_e(218,"textarea",97),w()(),P(219,"div",98)(220,"h2"),N(221,"Contact Us Page"),w(),P(222,"div",19)(223,"label",99),N(224,"Contact Form Details"),w(),_e(225,"textarea",100),w(),P(226,"div",19)(227,"label",101),N(228,"Map and Directions"),w(),_e(229,"textarea",102),w()(),P(230,"div",103)(231,"h2"),N(232,"Additional Content"),w(),P(233,"div",19)(234,"label",104),N(235,"Photo Gallery:"),w(),_e(236,"textarea",105),w()(),P(237,"div",106)(238,"h2"),N(239,"Employee Profiles"),w(),P(240,"div",107),At(241,Uee,21,4,"div",108),w(),P(242,"button",109),ft("click",function(){return i.addEmployee()}),N(243,"Add Employee"),w()()(),P(244,"button",110),N(245,"Submit"),w()()()),2&r&&(Ee(1),Le("formGroup",i.businessForm),Ee(123),Le("ngIf",Hi(125,5,i.uploadProgress.logoImage)),Ee(16),Le("ngIf",Hi(141,7,i.uploadProgress.facilityImages)),Ee(6),Le("ngIf",Hi(147,9,i.uploadProgress.lifestyleImages)),Ee(95),Le("ngForOf",i.employees().controls))},dependencies:[Es,Zo,gI,Cg,pD,oI,kg,Mg,mI,Ng,Og,rc],styles:['.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:3px}.form-group[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:10px}.progress-bar[_ngcontent-%COMP%]{height:20px;background-color:#4caf50;text-align:center;color:#fff;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#fff;color:#2f4f4f;border:solid 1px darkslategrey;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#f08080}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}textarea[_ngcontent-%COMP%]{height:15em;resize:vertical;padding:8px;font-size:1rem;line-height:1.5;border:1px solid #ced4da;border-radius:4px;box-sizing:border-box}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #aeaeae}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:-2px}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#e6e6e6;color:#282828;border:1px solid transparent;border-radius:.25rem .25rem 0 0;padding:10px 15px;transition:background-color .3s ease,color .3s ease,border-color .3s ease}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#6f6f6f;color:#fff;border-color:#dee2e6 #dee2e6 #fff}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#dee2e6 #dee2e6 #fff;color:#343a40}.tab-content[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-top:none;padding:15px;background-color:#fff}.tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:2px solid #343a40;color:#343a40;margin-bottom:20px;padding-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#495057}.form-control[_ngcontent-%COMP%]{border-radius:.25rem;border:1px solid #ced4da;padding:10px}label.required[_ngcontent-%COMP%]:after{content:" *";color:#d9534f}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:.25rem;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[type=button][_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:5px 10px;border-radius:.25rem;margin-top:10px}button[type=button][_ngcontent-%COMP%]:hover{background-color:#c82333}.progress-bar[_ngcontent-%COMP%]{background-color:#28a745}']})}return n})();const Bee=function(){return["/"]},jee=function(n){return{id:n}};function $ee(n,e){if(1&n){const t=rd();P(0,"tr")(1,"td")(2,"a",4),N(3),w()(),P(4,"td"),N(5),w(),P(6,"td")(7,"button",5),ft("click",function(){const o=Vo(t).$implicit;return to(ln().editBusiness(o.id))}),N(8,"Edit"),w(),P(9,"button",6),ft("click",function(){const o=Vo(t).$implicit;return to(ln().deleteBusiness(o.id))}),N(10,"Delete"),w()()()}if(2&n){const t=e.$implicit;Ee(2),Le("routerLink",Gb(4,Bee))("queryParams",ec(5,jee,t.id)),Ee(1),Ur(t.id),Ee(2),Ur(t.businessName)}}let hU=(()=>{class n{constructor(t,r){this.businessService=t,this.router=r,this.businesses=[]}ngOnInit(){this.loadBusinesses()}loadBusinesses(){this.businessService.getAllBusinesses().subscribe(t=>{this.businesses=t,console.log(t)})}editBusiness(t){this.router.navigate(["/edit-business",t])}deleteBusiness(t){confirm("Are you sure you want to delete this business?")&&this.businessService.updateBusiness(t,{isActive:!1}).then(()=>{alert("Business deleted successfully!"),this.loadBusinesses()}).catch(r=>console.error("Error deleting business",r))}addNewBusiness(){this.router.navigate(["/new-business"])}static#e=this.\u0275fac=function(r){return new(r||n)(ae(DD),ae(Gi))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-business-list"]],decls:16,vars:1,consts:[[1,"business-list-container"],[1,"add-business-button",3,"click"],[1,"business-table"],[4,"ngFor","ngForOf"],[1,"business-id-link",3,"routerLink","queryParams"],[1,"edit-button",3,"click"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(P(0,"div",0)(1,"h1"),N(2,"Business List"),w(),P(3,"button",1),ft("click",function(){return i.addNewBusiness()}),N(4,"Add New Business"),w(),P(5,"table",2)(6,"thead")(7,"tr")(8,"th"),N(9,"ID"),w(),P(10,"th"),N(11,"Name"),w(),P(12,"th"),N(13,"Actions"),w()()(),P(14,"tbody"),At(15,$ee,11,7,"tr",3),w()()()),2&r&&(Ee(15),Le("ngForOf",i.businesses))},dependencies:[Es,Cp],styles:[".business-list-container[_ngcontent-%COMP%]{width:80%;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;color:#333}.add-business-button[_ngcontent-%COMP%]{display:block;margin:20px auto;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}.add-business-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.business-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.business-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .business-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.business-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.business-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.business-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.business-id-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.business-id-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:5px;cursor:pointer;font-size:14px;margin:0 5px}.edit-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.edit-button[_ngcontent-%COMP%]:hover{background-color:#218838}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}return n})();function zee(n,e){if(1&n&&(jo(0),P(1,"div",112)(2,"div",113),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Hee(n,e){if(1&n&&(jo(0),P(1,"div",112)(2,"div",113),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function qee(n,e){if(1&n&&(jo(0),P(1,"div",112)(2,"div",113),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Gee(n,e){if(1&n&&(jo(0),P(1,"div",112)(2,"div",113),N(3),w()(),$o()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function Wee(n,e){if(1&n&&(P(0,"div"),_e(1,"img",121),w()),2&n){const t=ln().$implicit;let r;Ee(1),Le("src",null==(r=t.get("photoURL"))?null:r.value,ji)}}function Zee(n,e){if(1&n){const t=rd();P(0,"div",114)(1,"div",19)(2,"label",115),N(3,"Employee Name"),w(),_e(4,"input",116),w(),P(5,"div",19)(6,"label",115),N(7,"Role"),w(),_e(8,"input",117),w(),P(9,"div",19)(10,"label",115),N(11,"Bio"),w(),_e(12,"textarea",118),w(),P(13,"div",19)(14,"label",115),N(15,"Photo"),w(),P(16,"input",119),ft("change",function(i){const s=Vo(t).index;return to(ln().onEmployeeFileChange(i,s))}),w(),At(17,Gee,4,3,"ng-container",56),zi(18,"async"),w(),At(19,Wee,2,1,"div",56),P(20,"button",120),ft("click",function(){const o=Vo(t).index;return to(ln().removeEmployee(o))}),N(21,"Remove Employee"),w()()}if(2&n){const t=e.$implicit,r=e.index,i=ln();let o;Le("formGroupName",r),Ee(2),oo("for","employeeName-",r,""),Ee(2),oo("id","employeeName-",r,""),Ee(2),oo("for","employeeRole-",r,""),Ee(2),oo("id","employeeRole-",r,""),Ee(2),oo("for","employeeBio-",r,""),Ee(2),oo("id","employeeBio-",r,""),Ee(2),oo("for","employeePhoto-",r,""),Ee(2),oo("id","employeePhoto-",r,""),Ee(1),Le("ngIf",Hi(18,11,i.uploadProgress["employee_"+r])),Ee(2),Le("ngIf",null==(o=t.get("photoURL"))?null:o.value)}}const Kee=function(){return["/gallery-upload"]},Qee=function(n){return{id:n}};let fU=(()=>{class n{constructor(t,r,i,o){this.fb=t,this.businessService=r,this.uploadService=i,this.route=o,this.uploadProgress={}}ngOnInit(){this.initializeForm(),this.route.paramMap.subscribe(t=>{this.businessId=t.get("id"),console.log("Business ID:",this.businessId),this.businessId&&this.loadBusinessData()})}initializeForm(){this.businessForm=this.fb.group({tagline:[""],uniqueService:[""],whyChoose:[""],businessStory:[""],motivation:[""],mission:[""],vision:[""],certifications:[""],targetAudience:[""],services:[""],specialPrograms:[""],tours:[""],freeConsulting:[""],websiteGoals:[""],logoImage:[""],ownerImagesBios:[""],staffImagesBios:[""],mediaFeatures:[""],ratings:[""],testimonials:[""],businessName:["",nn.required],address:["",nn.required],phone:["",nn.required],fax:[""],email:["",nn.required],businessHours:["",nn.required],socialMedia:[""],welcomeMessage:[""],keyServicesHighlights:["",nn.required],teamValues:["",nn.required],serviceBenefits:["",nn.required],pricingStructure:["",nn.required],contactFormDetails:["",nn.required],mapDirections:[""],photoGallery:[""],employees:this.fb.array([])})}employees(){return this.businessForm.get("employees")}addEmployee(){const t=this.fb.group({id:[""],name:[""],role:[""],bio:[""],photoURL:[""]});this.employees().push(t)}removeEmployee(t){this.employees().removeAt(t)}onEmployeeFileChange(t,r){const i=t.target.files[0];if(i){const{uploadProgress:o,downloadUrl:s}=this.uploadService.uploadFile(i,this.businessId,"employee");this.uploadProgress[`employee_${r}`]=o,s.pipe(Ya(()=>{s.subscribe(a=>{this.employees().at(r).patchValue({photoURL:a})})})).subscribe()}}onFileChange(t,r){const i=t.target.files[0];if(i){let o;o="photoGallery"===r?"gallery":"logoImage"===r||"facilityImages"===r||"lifestyleImages"===r?"business":"employee";const{uploadProgress:s,downloadUrl:a}=this.uploadService.uploadFile(i,this.businessId,o);this.uploadProgress[r]=s,a.pipe(Ya(()=>{a.subscribe(u=>{this.businessForm.patchValue({[r]:u})})})).subscribe()}}loadBusinessData(){this.businessService.getBusiness(this.businessId).subscribe(t=>{t?(console.log("Business data:",t),this.populateForm(t)):console.error("Business not found")},t=>{console.error("Error loading business data:",t)})}populateForm(t){this.businessForm.patchValue(t),this.employees().clear(),(t.employees??[]).forEach(r=>{const i=this.fb.group({id:[r.id],name:[r.name],role:[r.role],bio:[r.bio],photoURL:[r.photoURL]});this.employees().push(i)})}onSubmit(){this.businessForm.valid&&this.businessId&&this.businessService.updateBusiness(this.businessId,this.businessForm.value).then(()=>alert("Business details updated successfully!")).catch(r=>console.error("Error updating business details",r))}static#e=this.\u0275fac=function(r){return new(r||n)(ae(dU),ae(DD),ae(AD),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-edit-business"]],decls:255,vars:16,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["id","businessTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","basic-info-tab","data-bs-toggle","tab","data-bs-target","#basic-info","type","button","role","tab","aria-controls","basic-info","aria-selected","true",1,"nav-link","active"],["id","story-mission-tab","data-bs-toggle","tab","data-bs-target","#story-mission","type","button","role","tab","aria-controls","story-mission","aria-selected","false",1,"nav-link"],["id","certifications-tab","data-bs-toggle","tab","data-bs-target","#certifications","type","button","role","tab","aria-controls","certifications","aria-selected","false",1,"nav-link"],["id","services-offerings-tab","data-bs-toggle","tab","data-bs-target","#services-offerings","type","button","role","tab","aria-controls","services-offerings","aria-selected","false",1,"nav-link"],["id","content-photos-tab","data-bs-toggle","tab","data-bs-target","#content-photos","type","button","role","tab","aria-controls","content-photos","aria-selected","false",1,"nav-link"],["id","media-reviews-tab","data-bs-toggle","tab","data-bs-target","#media-reviews","type","button","role","tab","aria-controls","media-reviews","aria-selected","false",1,"nav-link"],["id","contact-info-tab","data-bs-toggle","tab","data-bs-target","#contact-info","type","button","role","tab","aria-controls","contact-info","aria-selected","false",1,"nav-link"],["id","home-page-tab","data-bs-toggle","tab","data-bs-target","#home-page","type","button","role","tab","aria-controls","home-page","aria-selected","false",1,"nav-link"],["id","about-us-tab","data-bs-toggle","tab","data-bs-target","#about-us","type","button","role","tab","aria-controls","about-us","aria-selected","false",1,"nav-link"],["id","services-page-tab","data-bs-toggle","tab","data-bs-target","#services-page","type","button","role","tab","aria-controls","services-page","aria-selected","false",1,"nav-link"],["id","contact-us-page-tab","data-bs-toggle","tab","data-bs-target","#contact-us-page","type","button","role","tab","aria-controls","contact-us-page","aria-selected","false",1,"nav-link"],["id","additional-content-tab","data-bs-toggle","tab","data-bs-target","#additional-content","type","button","role","tab","aria-controls","additional-content","aria-selected","false",1,"nav-link"],["id","employee-profiles-tab","data-bs-toggle","tab","data-bs-target","#employee-profiles","type","button","role","tab","aria-controls","employee-profiles","aria-selected","false",1,"nav-link"],["id","businessTabContent",1,"tab-content"],["id","basic-info","role","tabpanel","aria-labelledby","basic-info-tab",1,"tab-pane","fade","show","active"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required","",1,"form-control"],["for","tagline"],["id","tagline","formControlName","tagline",1,"form-control"],["for","uniqueService"],["id","uniqueService","formControlName","uniqueService",1,"form-control"],["for","whyChoose"],["id","whyChoose","formControlName","whyChoose",1,"form-control"],["id","story-mission","role","tabpanel","aria-labelledby","story-mission-tab",1,"tab-pane","fade"],["for","businessStory",1,"required"],["id","businessStory","formControlName","businessStory","required","",1,"form-control"],["for","motivation"],["id","motivation","formControlName","motivation",1,"form-control"],["for","mission",1,"required"],["id","mission","formControlName","mission","required","",1,"form-control"],["for","vision",1,"required"],["id","vision","formControlName","vision","required","",1,"form-control"],["id","certifications","role","tabpanel","aria-labelledby","certifications-tab",1,"tab-pane","fade"],["for","certifications",1,"required"],["id","certifications","formControlName","certifications","required","",1,"form-control"],["for","targetAudience"],["id","targetAudience","formControlName","targetAudience",1,"form-control"],["id","services-offerings","role","tabpanel","aria-labelledby","services-offerings-tab",1,"tab-pane","fade"],["for","services",1,"required"],["id","services","formControlName","services","required","",1,"form-control"],["for","specialPrograms"],["id","specialPrograms","formControlName","specialPrograms",1,"form-control"],["for","tours"],["id","tours","formControlName","tours",1,"form-control"],["for","freeConsulting"],["id","freeConsulting","formControlName","freeConsulting",1,"form-control"],["id","content-photos","role","tabpanel","aria-labelledby","content-photos-tab",1,"tab-pane","fade"],["for","websiteGoals",1,"required"],["id","websiteGoals","formControlName","websiteGoals","required","",1,"form-control"],["for","logoImage",1,"required"],["type","file","id","logoImage",1,"form-control",3,"change"],[4,"ngIf"],["for","ownerImagesBios",1,"required"],["id","ownerImagesBios","formControlName","ownerImagesBios","required","",1,"form-control"],["for","staffImagesBios",1,"required"],["id","staffImagesBios","formControlName","staffImagesBios","required","",1,"form-control"],["for","facilityImages",1,"required"],["type","file","id","facilityImages",1,"form-control",3,"change"],["for","lifestyleImages",1,"required"],["type","file","id","lifestyleImages",1,"form-control",3,"change"],["id","media-reviews","role","tabpanel","aria-labelledby","media-reviews-tab",1,"tab-pane","fade"],["for","mediaFeatures"],["id","mediaFeatures","formControlName","mediaFeatures",1,"form-control"],["for","ratings"],["id","ratings","formControlName","ratings",1,"form-control"],["for","testimonials"],["id","testimonials","formControlName","testimonials",1,"form-control"],["id","contact-info","role","tabpanel","aria-labelledby","contact-info-tab",1,"tab-pane","fade"],["for","address",1,"required"],["id","address","formControlName","address","required","",1,"form-control"],["for","phone",1,"required"],["id","phone","formControlName","phone","required","",1,"form-control"],["for","fax"],["id","fax","formControlName","fax",1,"form-control"],["for","email",1,"required"],["id","email","formControlName","email","required","",1,"form-control"],["for","businessHours",1,"required"],["id","businessHours","formControlName","businessHours","required","",1,"form-control"],["for","socialMedia"],["id","socialMedia","formControlName","socialMedia",1,"form-control"],["id","home-page","role","tabpanel","aria-labelledby","home-page-tab",1,"tab-pane","fade"],["for","welcomeMessage"],["id","welcomeMessage","formControlName","welcomeMessage","required","",1,"form-control"],["for","keyServicesHighlights",1,"required"],["id","keyServicesHighlights","formControlName","keyServicesHighlights","required","",1,"form-control"],["id","about-us","role","tabpanel","aria-labelledby","about-us-tab",1,"tab-pane","fade"],["for","teamValues",1,"required"],["id","teamValues","formControlName","teamValues","required","",1,"form-control"],["id","services-page","role","tabpanel","aria-labelledby","services-page-tab",1,"tab-pane","fade"],["for","serviceBenefits",1,"required"],["id","serviceBenefits","formControlName","serviceBenefits","required","",1,"form-control"],["for","pricingStructure",1,"required"],["id","pricingStructure","formControlName","pricingStructure","required","",1,"form-control"],["id","contact-us-page","role","tabpanel","aria-labelledby","contact-us-page-tab",1,"tab-pane","fade"],["for","contactFormDetails",1,"required"],["id","contactFormDetails","formControlName","contactFormDetails","required","",1,"form-control"],["for","mapDirections"],["id","mapDirections","formControlName","mapDirections",1,"form-control"],["id","additional-content","role","tabpanel","aria-labelledby","additional-content-tab",1,"tab-pane","fade"],["for","photoGallery"],["id","photoGallery","formControlName","photoGallery",1,"form-control"],[1,"btn","btn-primary",3,"routerLink","queryParams"],["id","employee-profiles","role","tabpanel","aria-labelledby","employee-profiles-tab",1,"tab-pane","fade"],["formArrayName","employees"],["class","employee-card",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],["type","submit"],[1,"progress"],[1,"progress-bar"],[1,"employee-card",3,"formGroupName"],[3,"for"],["formControlName","name","placeholder","Enter employee name",1,"form-control",3,"id"],["formControlName","role","placeholder","Enter employee role",1,"form-control",3,"id"],["formControlName","bio","rows","3","placeholder","Enter employee bio",1,"form-control",3,"id"],["type","file",1,"form-control",3,"id","change"],["type","button",1,"remove-button",3,"click"],["alt","Employee Photo",1,"employee-photo",3,"src"]],template:function(r,i){1&r&&(P(0,"div",0)(1,"h1"),N(2,"Edit Business Information"),w(),P(3,"form",1),ft("ngSubmit",function(){return i.onSubmit()}),P(4,"ul",2)(5,"li",3)(6,"button",4),N(7,"Basic Information"),w()(),P(8,"li",3)(9,"button",5),N(10,"Story & Mission"),w()(),P(11,"li",3)(12,"button",6),N(13,"Certifications"),w()(),P(14,"li",3)(15,"button",7),N(16,"Services & Offerings"),w()(),P(17,"li",3)(18,"button",8),N(19,"Content & Photos"),w()(),P(20,"li",3)(21,"button",9),N(22,"Media & Reviews"),w()(),P(23,"li",3)(24,"button",10),N(25,"Contact Information"),w()(),P(26,"li",3)(27,"button",11),N(28,"Home Page"),w()(),P(29,"li",3)(30,"button",12),N(31,"About Us"),w()(),P(32,"li",3)(33,"button",13),N(34,"Services Page"),w()(),P(35,"li",3)(36,"button",14),N(37,"Contact Us Page"),w()(),P(38,"li",3)(39,"button",15),N(40,"Additional Content & Gallery Photos"),w()(),P(41,"li",3)(42,"button",16),N(43,"Employee Profiles"),w()()(),P(44,"div",17)(45,"div",18)(46,"h2"),N(47,"Basic Information"),w(),P(48,"div",19)(49,"label",20),N(50,"Business Name"),w(),_e(51,"input",21),w(),P(52,"div",19)(53,"label",22),N(54,"Tagline"),w(),_e(55,"input",23),w(),P(56,"div",19)(57,"label",24),N(58,"Unique Service"),w(),_e(59,"input",25),w(),P(60,"div",19)(61,"label",26),N(62,"Why Choose Us"),w(),_e(63,"input",27),w()(),P(64,"div",28)(65,"h2"),N(66,"Business Story and Mission"),w(),P(67,"div",19)(68,"label",29),N(69,"Business Story"),w(),_e(70,"textarea",30),w(),P(71,"div",19)(72,"label",31),N(73,"Motivation"),w(),_e(74,"textarea",32),w(),P(75,"div",19)(76,"label",33),N(77,"Mission"),w(),_e(78,"textarea",34),w(),P(79,"div",19)(80,"label",35),N(81,"Vision"),w(),_e(82,"textarea",36),w()(),P(83,"div",37)(84,"h2"),N(85,"Certifications and Target Audience"),w(),P(86,"div",19)(87,"label",38),N(88,"Certifications"),w(),_e(89,"textarea",39),w(),P(90,"div",19)(91,"label",40),N(92,"Target Audience"),w(),_e(93,"textarea",41),w()(),P(94,"div",42)(95,"h2"),N(96,"Services and Offerings"),w(),P(97,"div",19)(98,"label",43),N(99,"Services"),w(),_e(100,"textarea",44),w(),P(101,"div",19)(102,"label",45),N(103,"Special Programs"),w(),_e(104,"textarea",46),w(),P(105,"div",19)(106,"label",47),N(107,"Tours"),w(),_e(108,"textarea",48),w(),P(109,"div",19)(110,"label",49),N(111,"Free Consulting"),w(),_e(112,"textarea",50),w()(),P(113,"div",51)(114,"h2"),N(115,"Website Goals"),w(),P(116,"div",19)(117,"label",52),N(118,"Website Goals"),w(),_e(119,"textarea",53),w(),P(120,"h2"),N(121,"Content and Photos"),w(),P(122,"div",19)(123,"label",54),N(124,"Logo Image"),w(),P(125,"input",55),ft("change",function(s){return i.onFileChange(s,"logoImage")}),w(),At(126,zee,4,3,"ng-container",56),zi(127,"async"),w(),P(128,"div",19)(129,"label",57),N(130,"Owner Images and Bios"),w(),_e(131,"textarea",58),w(),P(132,"div",19)(133,"label",59),N(134,"Staff Images and Bios"),w(),_e(135,"textarea",60),w(),P(136,"h2"),N(137,"Facility and Lifestyle Images"),w(),P(138,"div",19)(139,"label",61),N(140,"Facility Images"),w(),P(141,"input",62),ft("change",function(s){return i.onFileChange(s,"facilityImages")}),w(),At(142,Hee,4,3,"ng-container",56),zi(143,"async"),w(),P(144,"div",19)(145,"label",63),N(146,"Lifestyle Images"),w(),P(147,"input",64),ft("change",function(s){return i.onFileChange(s,"lifestyleImages")}),w(),At(148,qee,4,3,"ng-container",56),zi(149,"async"),w()(),P(150,"div",65)(151,"h2"),N(152,"Media and Reviews"),w(),P(153,"div",19)(154,"label",66),N(155,"Media Features"),w(),_e(156,"textarea",67),w(),P(157,"div",19)(158,"label",68),N(159,"Ratings"),w(),_e(160,"textarea",69),w(),P(161,"div",19)(162,"label",70),N(163,"Testimonials"),w(),_e(164,"textarea",71),w()(),P(165,"div",72)(166,"h2"),N(167,"Contact Information"),w(),P(168,"div",19)(169,"label",73),N(170,"Address"),w(),_e(171,"textarea",74),w(),P(172,"div",19)(173,"label",75),N(174,"Phone"),w(),_e(175,"input",76),w(),P(176,"div",19)(177,"label",77),N(178,"Fax"),w(),_e(179,"input",78),w(),P(180,"div",19)(181,"label",79),N(182,"Email"),w(),_e(183,"input",80),w(),P(184,"div",19)(185,"label",81),N(186,"Business Hours"),w(),_e(187,"textarea",82),w(),P(188,"div",19)(189,"label",83),N(190,"Social Media"),w(),_e(191,"textarea",84),w()(),P(192,"div",85)(193,"h2"),N(194,"Home Page"),w(),P(195,"div",19)(196,"label",86),N(197,"Welcome Message"),w(),_e(198,"textarea",87),w(),P(199,"div",19)(200,"label",88),N(201,"Key Services and Highlights"),w(),_e(202,"textarea",89),w()(),P(203,"div",90)(204,"h2"),N(205,"About Us Page"),w(),P(206,"div",19)(207,"label",91),N(208,"Team and Values"),w(),_e(209,"textarea",92),w()(),P(210,"div",93)(211,"h2"),N(212,"Services Page"),w(),P(213,"div",19)(214,"label",94),N(215,"Service Benefits"),w(),_e(216,"textarea",95),w(),P(217,"div",19)(218,"label",96),N(219,"Pricing Structure"),w(),_e(220,"textarea",97),w()(),P(221,"div",98)(222,"h2"),N(223,"Contact Us Page"),w(),P(224,"div",19)(225,"label",99),N(226,"Contact Form Details"),w(),_e(227,"textarea",100),w(),P(228,"div",19)(229,"label",101),N(230,"Map and Directions"),w(),_e(231,"textarea",102),w()(),P(232,"div",103)(233,"h2"),N(234,"Additional Content"),w(),P(235,"div",19)(236,"label",104),N(237,"Photo Gallery:"),w(),_e(238,"textarea",105),w(),P(239,"h2"),N(240,"Gallery Photos"),w(),P(241,"div",19)(242,"label",104),N(243,"Photo Gallery:"),w(),P(244,"a",106),N(245," Upload Photos to Gallery "),w()()(),P(246,"div",107)(247,"h2"),N(248,"Employee Profiles"),w(),P(249,"div",108),At(250,Zee,22,13,"div",109),w(),P(251,"button",110),ft("click",function(){return i.addEmployee()}),N(252,"Add Employee"),w()()(),P(253,"button",111),N(254,"Submit"),w()()()),2&r&&(Ee(3),Le("formGroup",i.businessForm),Ee(123),Le("ngIf",Hi(127,7,i.uploadProgress.logoImage)),Ee(16),Le("ngIf",Hi(143,9,i.uploadProgress.facilityImages)),Ee(6),Le("ngIf",Hi(149,11,i.uploadProgress.lifestyleImages)),Ee(96),Le("routerLink",Gb(13,Kee))("queryParams",ec(14,Qee,i.businessId)),Ee(6),Le("ngForOf",i.employees().controls))},dependencies:[Es,Zo,Cp,gI,Cg,pD,oI,kg,Mg,mI,Ng,Og,rc],styles:['.container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;background:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.employee-card[_ngcontent-%COMP%]{padding:15px;margin-bottom:15px;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 0 5px #0000001a}.employee-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px}.employee-card[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer}.employee-card[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{background-color:#c0392b}.add-employee-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#3498db;color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer;margin-bottom:20px}.add-employee-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#2ecc71;color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer}.submit-button[_ngcontent-%COMP%]:hover{background-color:#27ae60}.progress[_ngcontent-%COMP%]{margin-top:5px;height:10px;background-color:#f3f3f3;border-radius:4px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#3498db;text-align:center;line-height:10px;color:#fff}.employee-photo[_ngcontent-%COMP%]{margin-top:10px;max-width:100px;border-radius:4px}.container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}h2[_ngcontent-%COMP%]{border-bottom:2px solid #007bff;padding-bottom:10px;margin-top:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.required[_ngcontent-%COMP%]:after{content:"*";color:red;margin-left:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}textarea.form-control[_ngcontent-%COMP%]{height:100px;resize:vertical}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.progress[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:5px;overflow:hidden;height:20px}.progress-bar[_ngcontent-%COMP%]{background-color:#28a745;height:100%;color:#fff;text-align:center;line-height:20px}.nav-tabs[_ngcontent-%COMP%]{border-bottom:2px solid #ddd}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-bottom:-2px}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#495057;border:1px solid transparent;border-radius:.25rem .25rem 0 0;padding:10px 15px;transition:background-color .3s ease,color .3s ease,border-color .3s ease}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#343a40;color:#fff;border-color:#dee2e6 #dee2e6 #fff}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#dee2e6 #dee2e6 #fff;color:#343a40}.tab-content[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-top:none;padding:15px;background-color:#fff}.tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:2px solid #343a40;color:#343a40;margin-bottom:20px;padding-bottom:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#495057}.form-control[_ngcontent-%COMP%]{border-radius:.25rem;border:1px solid #ced4da;padding:10px}label.required[_ngcontent-%COMP%]:after{content:" *";color:#d9534f}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:.25rem;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[type=button][_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:5px 10px;border-radius:.25rem;margin-top:10px}button[type=button][_ngcontent-%COMP%]:hover{background-color:#c82333}.progress-bar[_ngcontent-%COMP%]{background-color:#28a745}']})}return n})();function Yee(n,e){1&n&&(P(0,"p"),N(1,"Drag and drop images here, or click to select files"),w())}function Jee(n,e){if(1&n&&(P(0,"li"),N(1),w()),2&n){const t=e.$implicit;Ee(1),Ur(t.name)}}function Xee(n,e){if(1&n&&(P(0,"div")(1,"h3"),N(2,"Files to be uploaded:"),w(),P(3,"ul"),At(4,Jee,2,1,"li",4),w()()),2&n){const t=ln();Ee(4),Le("ngForOf",t.filesToUpload)}}function ete(n,e){if(1&n&&(P(0,"div")(1,"div",6)(2,"div",7),N(3),w()()()),2&n){const t=e.ngIf;Ee(2),zo("width",t+"%"),Ee(1),vi("",t,"%")}}function tte(n,e){if(1&n&&(P(0,"div",8),_e(1,"img",9),w()),2&n){const t=ln().$implicit,r=ln();Ee(1),qf("alt",t.key),Le("src",r.uploadedImages[t.key],ji)}}function nte(n,e){if(1&n&&(P(0,"div"),At(1,ete,4,3,"div",2),zi(2,"async"),At(3,tte,2,2,"div",5),w()),2&n){const t=e.$implicit,r=ln();Ee(1),Le("ngIf",Hi(2,2,r.uploadProgress[t.key])),Ee(2),Le("ngIf",r.uploadedImages[t.key])}}let rte=(()=>{class n{constructor(t,r,i,o){this.storage=t,this.firestore=r,this.uploadService=i,this.route=o,this.uploadProgress={},this.uploadedImages={},this.filesToUpload=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id})}uploadFiles(t){const r=t.target.files;for(let i of r){const{uploadProgress:o,downloadUrl:s}=this.uploadService.uploadFile(i,this.businessId,"gallery");this.uploadProgress[i.name]=o,s.subscribe(a=>{this.uploadedImages[i.name]=a})}}onDragOver(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect="copy"}onDragLeave(t){t.preventDefault(),t.stopPropagation()}onDrop(t){t.preventDefault(),t.stopPropagation();const r=Array.from(t.dataTransfer.files);this.filesToUpload=r,this.uploadFiles({target:{files:r}})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(wg),ae(yg),ae(AD),ae(jr))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-photo-gallery-upload"]],inputs:{businessId:"businessId"},decls:7,vars:5,consts:[[1,"upload-container"],[1,"drag-drop-area",3,"dragover","dragleave","drop"],[4,"ngIf"],["type","file","multiple","",3,"change"],[4,"ngFor","ngForOf"],["class","thumbnail",4,"ngIf"],[1,"progress-container"],[1,"progress-bar"],[1,"thumbnail"],[3,"src","alt"]],template:function(r,i){1&r&&(P(0,"div",0)(1,"div",1),ft("dragover",function(s){return i.onDragOver(s)})("dragleave",function(s){return i.onDragLeave(s)})("drop",function(s){return i.onDrop(s)}),At(2,Yee,2,0,"p",2),P(3,"input",3),ft("change",function(s){return i.uploadFiles(s)}),w()(),At(4,Xee,5,1,"div",2),At(5,nte,4,4,"div",4),zi(6,"keyvalue"),w()),2&r&&(Ee(2),Le("ngIf",!i.filesToUpload.length),Ee(2),Le("ngIf",i.filesToUpload.length>0),Ee(1),Le("ngForOf",Hi(6,3,i.uploadedImages)))},dependencies:[Es,Zo,rc,DM],styles:[".upload-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:auto}.drag-drop-area[_ngcontent-%COMP%]{margin-top:100px;border:2px dashed #ccc;padding:100px;text-align:center;cursor:pointer;margin-bottom:20px}.drag-drop-area[_ngcontent-%COMP%]:hover{background-color:#f7f7f7}.drag-drop-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}input[type=file][_ngcontent-%COMP%]{display:none}.progress-container[_ngcontent-%COMP%]{background-color:#f3f3f3;border:1px solid #ddd;margin-bottom:10px}.progress-bar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;text-align:center;padding:5px 0}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px;object-fit:cover;margin:10px 0}"]})}return n})(),ite=(()=>{class n{constructor(){this.closeModal=new zn}close(){this.closeModal.emit()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-image-viewer-modal"]],inputs:{imageUrl:"imageUrl"},outputs:{closeModal:"closeModal"},decls:5,vars:1,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"close-btn",3,"click"],["alt","Full Size Image",3,"src"]],template:function(r,i){1&r&&(P(0,"div",0),ft("click",function(){return i.close()}),P(1,"div",1),ft("click",function(s){return s.stopPropagation()}),P(2,"span",2),ft("click",function(){return i.close()}),N(3,"\xd7"),w(),_e(4,"img",3),w()()),2&r&&(Ee(4),Le("src",i.imageUrl,ji))},styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:10px;max-width:90%;max-height:90%;border-radius:5px;box-shadow:0 2px 10px #00000080}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:800px;object-fit:contain}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333}"]})}return n})();function ote(n,e){if(1&n){const t=rd();P(0,"div",8),ft("click",function(){const o=Vo(t).$implicit;return to(ln(2).onImageClick(o.url))}),_e(1,"img",9),w()}if(2&n){const t=e.$implicit;Ee(1),Le("src",t.url,ji)}}function ste(n,e){if(1&n){const t=rd();P(0,"app-image-viewer-modal",10),ft("closeModal",function(){return Vo(t),to(ln(2).onCloseModal())}),w()}2&n&&Le("imageUrl",ln(2).selectedImageUrl)}function ate(n,e){if(1&n&&(P(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),N(4,"Our Home"),w(),P(5,"div",3)(6,"p"),N(7,"Feel at Home: A Peek into Our Caring Environment"),w()()()(),P(8,"div",4)(9,"div",5),At(10,ote,2,1,"div",6),zi(11,"async"),w()(),At(12,ste,1,1,"app-image-viewer-modal",7),w()),2&n){const t=ln();Ee(10),Le("ngForOf",Hi(11,2,t.images$)),Ee(2),Le("ngIf",t.selectedImageUrl)}}const ute=[{path:"",component:lD},{path:"home",component:lD},{path:"about-us",component:RX},{path:"services",component:OX},{path:"contact-us",component:Oee},{path:"gallery",component:(()=>{class n{constructor(t,r){this.route=t,this.webContent=r,this.selectedImageUrl=null}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id,this.loadImages()}),this.webContent.getBusinessData(this.businessId).subscribe(t=>{t&&(this.business=t)})}loadImages(){this.businessId&&(this.images$=this.webContent.getBusinessGalleryImagesById(this.businessId))}onImageClick(t){this.selectedImageUrl=t}onCloseModal(){this.selectedImageUrl=null}static#e=this.\u0275fac=function(r){return new(r||n)(ae(jr),ae(vu))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-photo-gallery"]],inputs:{businessId:"businessId"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-contact"],[1,"hero-overlay"],[1,"hero-subtitle"],[1,"container"],[1,"gallery"],["class","gallery-item",3,"click",4,"ngFor","ngForOf"],[3,"imageUrl","closeModal",4,"ngIf"],[1,"gallery-item",3,"click"],["alt","Gallery Image",3,"src"],[3,"imageUrl","closeModal"]],template:function(r,i){1&r&&At(0,ate,13,4,"div",0),2&r&&Le("ngIf",i.business)},dependencies:[Es,Zo,ite,rc],styles:[".hero-contact[_ngcontent-%COMP%]{background-image:url(istockphoto-1022730404-2048x2048.31cbbafdcadfda2a.jpg);background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:.3rem;text-transform:uppercase;font-weight:700;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.hero-subtitle[_ngcontent-%COMP%]{font-size:2rem;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.gallery[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px;background:#f9f9f9;padding:20px;border-radius:8px}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px;transition:transform .2s}.gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.contact-info[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}"]})}return n})()},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"bqs",component:SD},{path:"bls",component:hU},{path:"business/new",component:SD},{path:"business/edit/:id",component:fU},{path:"businessList",component:hU},{path:"new-business",component:SD},{path:"edit-business/:id",component:fU},{path:"gallery-upload",component:rte},{path:":id",component:lD}];let cte=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n});static#n=this.\u0275inj=xn({imports:[I0.forRoot(ute),I0]})}return n})();function lte(n,e){if(1&n&&_e(0,"img",14),2&n){const t=ln();Le("src",null==t.business?null:t.business.logoImage,ji)}}const dte=function(n){return{"open-bar1":n}},hte=function(n){return{"open-bar2":n}},fte=function(n){return{"open-bar3":n}},pte=function(n){return{active:n}};let gte=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.content=i,this.businessId="",this.menuActive=!1,this.menuOpen=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id||"",this.content.getBusinessData(this.businessId).subscribe(r=>{this.business=r})})}navigateTo(t){const r=this.businessId?{id:this.businessId}:{};console.log("This Business id form query string",this.businessId),this.closeMenu(),this.router.navigate([`/${t}`],{queryParams:r}).then(i=>{i||console.error("Navigation failed!")})}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)(ae(jr),ae(Gi),ae(vu))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-navigation"]],decls:26,vars:13,consts:[[1,"navbar_"],[1,"navbar-container"],[1,"logo"],["class","logoImage","alt","Business Logo",3,"src",4,"ngIf"],[1,"number"],[1,"text"],[1,"top"],[1,"bottom"],[1,"menu-icon",3,"click"],[1,"bar1",3,"ngClass"],[1,"bar2",3,"ngClass"],[1,"bar3",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item",3,"click"],["alt","Business Logo",1,"logoImage",3,"src"]],template:function(r,i){1&r&&(P(0,"nav",0)(1,"div",1)(2,"div",2),At(3,lte,1,1,"img",3),P(4,"span",4),N(5,"#1"),w(),P(6,"div",5)(7,"div",6),N(8,"HELPING HAND"),w(),P(9,"div",7),N(10,"ADULT FAMILY HOME"),w()()(),P(11,"div",8),ft("click",function(){return i.toggleMenu()}),_e(12,"div",9)(13,"div",10)(14,"div",11),w(),P(15,"ul",12)(16,"li",13),ft("click",function(){return i.navigateTo("home")}),N(17,"Home"),w(),P(18,"li",13),ft("click",function(){return i.navigateTo("services")}),N(19,"Services"),w(),P(20,"li",13),ft("click",function(){return i.navigateTo("about-us")}),N(21,"About Us"),w(),P(22,"li",13),ft("click",function(){return i.navigateTo("gallery")}),N(23,"gallery"),w(),P(24,"li",13),ft("click",function(){return i.navigateTo("contact-us")}),N(25,"Contact"),w()()()()),2&r&&(Ee(3),Le("ngIf",null==i.business?null:i.business.logoImage),Ee(9),Le("ngClass",ec(5,dte,i.menuOpen)),Ee(1),Le("ngClass",ec(7,hte,i.menuOpen)),Ee(1),Le("ngClass",ec(9,fte,i.menuOpen)),Ee(1),Le("ngClass",ec(11,pte,i.menuOpen)))},dependencies:[EM,Zo],styles:[".navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:70px;max-width:1200px;margin:0 auto}.logo[_ngcontent-%COMP%]{display:flex;align-items:flex-start;max-height:70px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:70px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:34px;font-weight:700;text-decoration:none;color:var(--button-color)}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:700;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:700}.top[_ngcontent-%COMP%]{font-size:2rem}.bottom[_ngcontent-%COMP%]{margin-top:-10px;font-size:1rem;letter-spacing:.3rem;color:var(--accent-color)}.navbar_[_ngcontent-%COMP%]{background-color:var(--nav-background-color);width:100%;top:0;left:0;box-shadow:0 2px 4px #0000001a;z-index:1000}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;align-items:center}.nav-item[_ngcontent-%COMP%]{color:var(--nav-text-color);cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:1.2rem;font-family:Montserrat,sans-serif;font-weight:500}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:2rem;font-family:Montserrat,sans-serif;font-weight:500}.menu-icon[_ngcontent-%COMP%]{position:absolute;display:none;cursor:pointer;flex-direction:column;justify-content:space-around;width:30px;height:30px;z-index:1}.menu-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:4px;background-color:var(--nav-text-color);transition:all .3s}.menu-icon.open[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{background-color:var(--nav-active-text)}.menu-icon[_ngcontent-%COMP%]   .open-bar1[_ngcontent-%COMP%]{transform:rotate(-45deg) translate(-5px,5px);background-color:#fff}.menu-icon[_ngcontent-%COMP%]   .open-bar2[_ngcontent-%COMP%]{opacity:0}.menu-icon[_ngcontent-%COMP%]   .open-bar3[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-5px,-5px);background-color:#fff}.nav-menu.active[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:var(--nav-active-background);opacity:.9;flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu.active[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px;margin:20px 0}@media (max-width: 768px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between;width:100%}.logo[_ngcontent-%COMP%]{order:2;margin-left:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;margin-left:0}.menu-icon[_ngcontent-%COMP%]{display:flex;order:1;margin-right:auto;z-index:20001}.nav-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:var(--nav-active-background);flex-direction:column;justify-content:center;align-items:center;transition:left .3s;z-index:1999}.nav-item[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:1.2rem;font-family:Montserrat,sans-serif;font-weight:500;z-index:2000}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:500;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:400}.top[_ngcontent-%COMP%]{font-size:1.5rem}.bottom[_ngcontent-%COMP%]{font-size:.75rem;letter-spacing:.2rem;color:var(--accent-color)}}"]})}return n})();function mte(n,e){if(1&n&&(P(0,"p")(1,"span"),N(2),w(),N(3," | "),P(4,"span"),N(5,"Email: "),P(6,"a",4),N(7),w()()()),2&n){const t=e.ngIf;Ee(2),vi("Phone: ",t.phone,""),Ee(4),oo("href","mailto:",t.email,"",ji),Ee(1),vi(" ",t.email,"")}}let _te=(()=>{class n{constructor(t,r){this.route=t,this.webContentService=r}ngOnInit(){this.route.queryParams.subscribe(t=>{const r=t.id||this.webContentService.getDefaultBusinessData();console.log("footer param",r),this.business$=this.webContentService.getDefaultBusinessData(),console.log(this.business$)})}static#e=this.\u0275fac=function(r){return new(r||n)(ae(jr),ae(vu))};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-footer"]],decls:8,vars:3,consts:[[1,"footer"],[1,"footer-content"],["href","https://www.monkifoto.com","target","_blank"],[4,"ngIf"],[3,"href"]],template:function(r,i){1&r&&(P(0,"footer",0)(1,"div",1)(2,"p"),N(3,"\xa9 2024 #1 Helping Hand AFH. All Rights Reserved. Design by "),P(4,"a",2),N(5,"Monkifoto"),w()(),At(6,mte,8,3,"p",3),zi(7,"async"),w()()),2&r&&(Ee(6),Le("ngIf",Hi(7,1,i.business$)))},dependencies:[Zo,rc],styles:[".footer[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:0;background-color:#333;color:#fff;text-align:center;padding:10px 0}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.footer-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}a[_ngcontent-%COMP%]{color:#fff}"]})}return n})(),yte=(()=>{class n{constructor(){this.title="adult-family-home"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=ar({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&_e(0,"app-navigation")(1,"router-outlet")(2,"app-footer")},dependencies:[d0,gte,_te]})}return n})();const pU_firebase={apiKey:"AIzaSyDABajs8rbYwBKsW74SRQbGQKyJ_GdU1tY",authDomain:"afhdynamicwebsite.firebaseapp.com",projectId:"afhdynamicwebsite",storageBucket:"afhdynamicwebsite.appspot.com",messagingSenderId:"692885221546",appId:"1:692885221546:web:23317a318f6e277a0520d3",measurementId:"G-JREGNTXHB6"};class fh{constructor(e){return e}}class PD{constructor(){return(0,Gn.getApps)()}}const RD=new Te("angularfire2._apps"),Ite={provide:fh,useFactory:function vte(n){return n&&1===n.length?n[0]:new fh((0,Gn.getApp)())},deps:[[new Lr,RD]]},Ete={provide:PD,deps:[[new Lr,RD]]};function bte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fh(r)}}let wte=(()=>{class n{constructor(t){(0,Gn.registerVersion)("angularfire",aa.full,"core"),(0,Gn.registerVersion)("angularfire",aa.full,"app"),(0,Gn.registerVersion)("angular",ob.full,t.toString())}static \u0275fac=function(r){return new(r||n)(we(Uo))};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[Ite,Ete]})}return n})();function Cte(n,...e){return{ngModule:wte,providers:[{provide:RD,useFactory:bte(n),multi:!0,deps:[Ut,Xr,wd,...e]}]}}const Tte=C0(Gn.initializeApp,!0);Ke(35);class MD{constructor(){return Gy("auth")}}class OD{constructor(e){return e}}const mU="firestore",kD=new Te("angularfire2.firestore-instances");function xte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OD(r)}}const Mte={provide:class Pte{constructor(){return Gy(mU)}},deps:[[new Lr,kD]]},Nte={provide:OD,useFactory:function Rte(n,e){const t=w0(mU,n,e);return t&&new OD(t)},deps:[[new Lr,kD],fh]};let Ote=(()=>{class n{constructor(){(0,Gn.registerVersion)("angularfire",aa.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[Nte,Mte]})}return n})();function kte(n,...e){return{ngModule:Ote,providers:[{provide:kD,useFactory:xte(n),multi:!0,deps:[Ut,Xr,wd,PD,[new Lr,MD],[new Lr,Dp],...e]}]}}const Fte=C0(mQ,!0);class FD{constructor(e){return e}}const _U="storage",VD=new Te("angularfire2.storage-instances");function Ute(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new FD(r)}}const Bte={provide:class Vte{constructor(){return Gy(_U)}},deps:[[new Lr,VD]]},jte={provide:FD,useFactory:function Lte(n,e){const t=w0(_U,n,e);return t&&new FD(t)},deps:[[new Lr,VD],fh]};let $te=(()=>{class n{constructor(){(0,Gn.registerVersion)("angularfire",aa.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xn({type:n});static \u0275inj=xn({providers:[jte,Bte]})}return n})();function zte(n,...e){return{ngModule:$te,providers:[{provide:VD,useFactory:Ute(n),multi:!0,deps:[Ut,Xr,wd,PD,[new Lr,MD],[new Lr,Dp],...e]}]}}const Hte=C0(sX,!0);let qte=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Xn({type:n,bootstrap:[yte]});static#n=this.\u0275inj=xn({imports:[J6,I0,cte,RY,IX,i7,XW.initializeApp(pU_firebase),Cte(()=>Tte(pU_firebase)),kte(()=>Fte()),zte(()=>Hte()),Pee,See]})}return n})();Q6().bootstrapModule(qte).catch(n=>console.error(n))},106:(ho,Kn,Ke)=>{Ke.d(Kn,{Z:()=>Qn});var R=Ke(58),De=Ke(537),M=Ke(534),$e=Ke(879);class Ot{constructor(tt,nt){this._delegate=tt,this.firebase=nt,(0,M._addComponent)(tt,new De.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(tt,nt=M._DEFAULT_ENTRY_NAME){var ir;this._delegate.checkDestroyed();const In=this._delegate.container.getProvider(tt);return!In.isInitialized()&&"EXPLICIT"===(null===(ir=In.getComponent())||void 0===ir?void 0:ir.instantiationMode)&&In.initialize(),In.getImmediate({identifier:nt})}_removeServiceInstance(tt,nt=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(nt)}_addComponent(tt){(0,M._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,M._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Vn=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Rt(){const bt=function rn(bt){const tt={},nt={__esModule:!0,initializeApp:function yt(ut,Pn={}){const pe=M.initializeApp(ut,Pn);if((0,R.r3)(tt,pe.name))return tt[pe.name];const un=new bt(pe,nt);return tt[pe.name]=un,un},app:In,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function Gr(ut){const Pn=ut.name,pe=Pn.replace("-compat","");if(M._registerComponent(ut)&&"PUBLIC"===ut.type){const un=(Qt=In())=>{if("function"!=typeof Qt[pe])throw Vn.create("invalid-app-argument",{appName:Pn});return Qt[pe]()};void 0!==ut.serviceProps&&(0,R.ZB)(un,ut.serviceProps),nt[pe]=un,bt.prototype[pe]=function(...Qt){return this._getService.bind(this,Pn).apply(this,ut.multipleInstances?Qt:[])}}return"PUBLIC"===ut.type?nt[pe]:null},removeApp:function ir(ut){delete tt[ut]},useAsService:function Lt(ut,Pn){return"serverAuth"===Pn?null:Pn},modularAPIs:M}};function In(ut){if(!(0,R.r3)(tt,ut=ut||M._DEFAULT_ENTRY_NAME))throw Vn.create("no-app",{appName:ut});return tt[ut]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function jt(){return Object.keys(tt).map(ut=>tt[ut])}}),In.App=bt,nt}(Ot);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:Rt,extendNamespace:function tt(nt){(0,R.ZB)(bt,nt)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),bt}(),be=new $e.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){be.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&be.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qn=fe;!function kt(bt){(0,M.registerVersion)("@firebase/app-compat","0.2.35",bt)}()},534:(ho,Kn,Ke)=>{Ke.r(Kn),Ke.d(Kn,{FirebaseError:()=>$e.ZR,SDK_VERSION:()=>Tr,_DEFAULT_ENTRY_NAME:()=>pi,_addComponent:()=>Mr,_addOrOverwriteComponent:()=>on,_apps:()=>Rr,_clearComponents:()=>Ni,_components:()=>bn,_getProvider:()=>Ln,_isFirebaseApp:()=>xo,_isFirebaseServerApp:()=>Jt,_registerComponent:()=>Cr,_removeServiceInstance:()=>ns,_serverApps:()=>xr,deleteApp:()=>Oo,getApp:()=>is,getApps:()=>os,initializeApp:()=>No,initializeServerApp:()=>rs,onLog:()=>C,registerVersion:()=>F,setLogLevel:()=>A});var R=Ke(861),De=Ke(537),M=Ke(879),$e=Ke(58);const Ot=(O,G)=>G.some(K=>O instanceof K);let vn,Vn;const fe=new WeakMap,be=new WeakMap,ze=new WeakMap,at=new WeakMap,kt=new WeakMap;let tt={get(O,G,K){if(O instanceof IDBTransaction){if("done"===G)return be.get(O);if("objectStoreNames"===G)return O.objectStoreNames||ze.get(O);if("store"===G)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return yt(O[G])},set:(O,G,K)=>(O[G]=K,!0),has:(O,G)=>O instanceof IDBTransaction&&("done"===G||"store"===G)||G in O};function In(O){return"function"==typeof O?function ir(O){return O!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Rt(){return Vn||(Vn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(O)?function(...G){return O.apply(jt(this),G),yt(fe.get(this))}:function(...G){return yt(O.apply(jt(this),G))}:function(G,...K){const ve=O.call(jt(this),G,...K);return ze.set(ve,G.sort?G.sort():[G]),yt(ve)}}(O):(O instanceof IDBTransaction&&function bt(O){if(be.has(O))return;const G=new Promise((K,ve)=>{const rt=()=>{O.removeEventListener("complete",lt),O.removeEventListener("error",mt),O.removeEventListener("abort",mt)},lt=()=>{K(),rt()},mt=()=>{ve(O.error||new DOMException("AbortError","AbortError")),rt()};O.addEventListener("complete",lt),O.addEventListener("error",mt),O.addEventListener("abort",mt)});be.set(O,G)}(O),Ot(O,function rn(){return vn||(vn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(O,tt):O)}function yt(O){if(O instanceof IDBRequest)return function Qn(O){const G=new Promise((K,ve)=>{const rt=()=>{O.removeEventListener("success",lt),O.removeEventListener("error",mt)},lt=()=>{K(yt(O.result)),rt()},mt=()=>{ve(O.error),rt()};O.addEventListener("success",lt),O.addEventListener("error",mt)});return G.then(K=>{K instanceof IDBCursor&&fe.set(K,O)}).catch(()=>{}),kt.set(G,O),G}(O);if(at.has(O))return at.get(O);const G=In(O);return G!==O&&(at.set(O,G),kt.set(G,O)),G}const jt=O=>kt.get(O),ut=["get","getKey","getAll","getAllKeys","count"],Pn=["put","add","delete","clear"],pe=new Map;function un(O,G){if(!(O instanceof IDBDatabase)||G in O||"string"!=typeof G)return;if(pe.get(G))return pe.get(G);const K=G.replace(/FromIndex$/,""),ve=G!==K,rt=Pn.includes(K);if(!(K in(ve?IDBIndex:IDBObjectStore).prototype)||!rt&&!ut.includes(K))return;const lt=function(){var mt=(0,R.Z)(function*(Wt,...Ct){const Oi=this.transaction(Wt,rt?"readwrite":"readonly");let Us=Oi.store;return ve&&(Us=Us.index(Ct.shift())),(yield Promise.all([Us[K](...Ct),rt&&Oi.done]))[0]});return function(Ct){return mt.apply(this,arguments)}}();return pe.set(G,lt),lt}!function nt(O){tt=O(tt)}(O=>({...O,get:(G,K,ve)=>un(G,K)||O.get(G,K,ve),has:(G,K)=>!!un(G,K)||O.has(G,K)}));class Qt{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function En(O){const G=O.getComponent();return"VERSION"===G?.type}(K)){const ve=K.getImmediate();return`${ve.library}/${ve.version}`}return null}).filter(K=>K).join(" ")}}const di="@firebase/app",hi="0.10.5",ct=new M.Yd("@firebase/app"),pi="[DEFAULT]",Yi={[di]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Rr=new Map,xr=new Map,bn=new Map;function Mr(O,G){try{O.container.addComponent(G)}catch(K){ct.debug(`Component ${G.name} failed to register with FirebaseApp ${O.name}`,K)}}function on(O,G){O.container.addOrOverwriteComponent(G)}function Cr(O){const G=O.name;if(bn.has(G))return ct.debug(`There were multiple attempts to register component ${G}.`),!1;bn.set(G,O);for(const K of Rr.values())Mr(K,O);for(const K of xr.values())Mr(K,O);return!0}function Ln(O,G){const K=O.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),O.container.getProvider(G)}function ns(O,G,K=pi){Ln(O,G).clearInstance(K)}function xo(O){return void 0!==O.options}function Jt(O){return void 0!==O.settings}function Ni(){bn.clear()}const Un=new $e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class or{constructor(G,K,ve){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=ve,this.container.addComponent(new De.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}class wn extends or{constructor(G,K,ve,rt){const lt=void 0!==K.automaticDataCollectionEnabled&&K.automaticDataCollectionEnabled,mt={name:ve,automaticDataCollectionEnabled:lt};super(void 0!==G.apiKey?G:G.options,mt,rt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:lt},K),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,K.releaseOnDeref=void 0,F(di,hi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(G){this.isDeleted||(this._refCount++,void 0!==G&&this._finalizationRegistry.register(G,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Oo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Un.create("server-app-deleted")}}const Tr="10.12.2";function No(O,G={}){let K=O;"object"!=typeof G&&(G={name:G});const ve=Object.assign({name:pi,automaticDataCollectionEnabled:!1},G),rt=ve.name;if("string"!=typeof rt||!rt)throw Un.create("bad-app-name",{appName:String(rt)});if(K||(K=(0,$e.aH)()),!K)throw Un.create("no-options");const lt=Rr.get(rt);if(lt){if((0,$e.vZ)(K,lt.options)&&(0,$e.vZ)(ve,lt.config))return lt;throw Un.create("duplicate-app",{appName:rt})}const mt=new De.H0(rt);for(const Ct of bn.values())mt.addComponent(Ct);const Wt=new or(K,ve,mt);return Rr.set(rt,Wt),Wt}function rs(O,G){if((0,$e.jU)())throw Un.create("invalid-server-app-environment");let K;void 0===G.automaticDataCollectionEnabled&&(G.automaticDataCollectionEnabled=!1),K=xo(O)?O.options:O;const ve=Object.assign(Object.assign({},G),K);if(void 0!==ve.releaseOnDeref&&delete ve.releaseOnDeref,void 0!==G.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Un.create("finalization-registry-not-supported",{});const lt=""+(Oi=JSON.stringify(ve),[...Oi].reduce((Us,fn)=>Math.imul(31,Us)+fn.charCodeAt(0)|0,0)),mt=xr.get(lt);var Oi;if(mt)return mt.incRefCount(G.releaseOnDeref),mt;const Wt=new De.H0(lt);for(const Oi of bn.values())Wt.addComponent(Oi);const Ct=new wn(K,G,lt,Wt);return xr.set(lt,Ct),Ct}function is(O=pi){const G=Rr.get(O);if(!G&&O===pi&&(0,$e.aH)())return No();if(!G)throw Un.create("no-app",{appName:O});return G}function os(){return Array.from(Rr.values())}function Oo(O){return U.apply(this,arguments)}function U(){return(U=(0,R.Z)(function*(O){let G=!1;const K=O.name;Rr.has(K)?(G=!0,Rr.delete(K)):xr.has(K)&&O.decRefCount()<=0&&(xr.delete(K),G=!0),G&&(yield Promise.all(O.container.getProviders().map(ve=>ve.delete())),O.isDeleted=!0)})).apply(this,arguments)}function F(O,G,K){var ve;let rt=null!==(ve=Yi[O])&&void 0!==ve?ve:O;K&&(rt+=`-${K}`);const lt=rt.match(/\s|\//),mt=G.match(/\s|\//);if(lt||mt){const Wt=[`Unable to register library "${rt}" with version "${G}":`];return lt&&Wt.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),lt&&mt&&Wt.push("and"),mt&&Wt.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void ct.warn(Wt.join(" "))}Cr(new De.wA(`${rt}-version`,()=>({library:rt,version:G}),"VERSION"))}function C(O,G){if(null!==O&&"function"!=typeof O)throw Un.create("invalid-log-argument");(0,M.Am)(O,G)}function A(O){(0,M.Ub)(O)}const b="firebase-heartbeat-database",V=1,de="firebase-heartbeat-store";let Pe=null;function Ve(){return Pe||(Pe=function Gr(O,G,{blocked:K,upgrade:ve,blocking:rt,terminated:lt}={}){const mt=indexedDB.open(O,G),Wt=yt(mt);return ve&&mt.addEventListener("upgradeneeded",Ct=>{ve(yt(mt.result),Ct.oldVersion,Ct.newVersion,yt(mt.transaction),Ct)}),K&&mt.addEventListener("blocked",Ct=>K(Ct.oldVersion,Ct.newVersion,Ct)),Wt.then(Ct=>{lt&&Ct.addEventListener("close",()=>lt()),rt&&Ct.addEventListener("versionchange",Oi=>rt(Oi.oldVersion,Oi.newVersion,Oi))}).catch(()=>{}),Wt}(b,V,{upgrade:(O,G)=>{if(0===G)try{O.createObjectStore(de)}catch(K){console.warn(K)}}}).catch(O=>{throw Un.create("idb-open",{originalErrorMessage:O.message})})),Pe}function Pt(){return(Pt=(0,R.Z)(function*(O){try{const K=(yield Ve()).transaction(de),ve=yield K.objectStore(de).get(qe(O));return yield K.done,ve}catch(G){if(G instanceof $e.ZR)ct.warn(G.message);else{const K=Un.create("idb-get",{originalErrorMessage:G?.message});ct.warn(K.message)}}})).apply(this,arguments)}function Re(O,G){return $t.apply(this,arguments)}function $t(){return($t=(0,R.Z)(function*(O,G){try{const ve=(yield Ve()).transaction(de,"readwrite");yield ve.objectStore(de).put(G,qe(O)),yield ve.done}catch(K){if(K instanceof $e.ZR)ct.warn(K.message);else{const ve=Un.create("idb-set",{originalErrorMessage:K?.message});ct.warn(ve.message)}}})).apply(this,arguments)}function qe(O){return`${O.name}!${O.options.appId}`}class Ht{constructor(G){this.container=G,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Ca(K),this._heartbeatsCachePromise=this._storage.read().then(ve=>(this._heartbeatsCache=ve,ve))}triggerHeartbeat(){var G=this;return(0,R.Z)(function*(){var K,ve;const lt=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Qe();if((null!=(null===(K=G._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||(G._heartbeatsCache=yield G._heartbeatsCachePromise,null!=(null===(ve=G._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats)))&&G._heartbeatsCache.lastSentHeartbeatDate!==mt&&!G._heartbeatsCache.heartbeats.some(Wt=>Wt.date===mt))return G._heartbeatsCache.heartbeats.push({date:mt,agent:lt}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(Wt=>{const Ct=new Date(Wt.date).valueOf();return Date.now()-Ct<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,R.Z)(function*(){var K;if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null==(null===(K=G._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||0===G._heartbeatsCache.heartbeats.length)return"";const ve=Qe(),{heartbeatsToSend:rt,unsentEntries:lt}=function wa(O,G=1024){const K=[];let ve=O.slice();for(const rt of O){const lt=K.find(mt=>mt.agent===rt.agent);if(lt){if(lt.dates.push(rt.date),Ls(K)>G){lt.dates.pop();break}}else if(K.push({agent:rt.agent,dates:[rt.date]}),Ls(K)>G){K.pop();break}ve=ve.slice(1)}return{heartbeatsToSend:K,unsentEntries:ve}}(G._heartbeatsCache.heartbeats),mt=(0,$e.L)(JSON.stringify({version:2,heartbeats:rt}));return G._heartbeatsCache.lastSentHeartbeatDate=ve,lt.length>0?(G._heartbeatsCache.heartbeats=lt,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),mt})()}}function Qe(){return(new Date).toISOString().substring(0,10)}class Ca{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,$e.hl)()&&(0,$e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,R.Z)(function*(){if(yield G._canUseIndexedDBPromise){const ve=yield function et(O){return Pt.apply(this,arguments)}(G.app);return ve?.heartbeats?ve:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(G){var K=this;return(0,R.Z)(function*(){var ve;if(yield K._canUseIndexedDBPromise){const lt=yield K.read();return Re(K.app,{lastSentHeartbeatDate:null!==(ve=G.lastSentHeartbeatDate)&&void 0!==ve?ve:lt.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var K=this;return(0,R.Z)(function*(){var ve;if(yield K._canUseIndexedDBPromise){const lt=yield K.read();return Re(K.app,{lastSentHeartbeatDate:null!==(ve=G.lastSentHeartbeatDate)&&void 0!==ve?ve:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...G.heartbeats]})}})()}}function Ls(O){return(0,$e.L)(JSON.stringify({version:2,heartbeats:O})).length}!function Vc(O){Cr(new De.wA("platform-logger",G=>new Qt(G),"PRIVATE")),Cr(new De.wA("heartbeat",G=>new Ht(G),"PRIVATE")),F(di,hi,O),F(di,hi,"esm2017"),F("fire-js","")}("")},537:(ho,Kn,Ke)=>{Ke.d(Kn,{H0:()=>rn,wA:()=>M});var R=Ke(861),De=Ke(58);class M{constructor(fe,be,ze){this.name=fe,this.instanceFactory=be,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const $e="[DEFAULT]";class Ot{constructor(fe,be){this.name=fe,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const be=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(be)){const ze=new De.BH;if(this.instancesDeferred.set(be,ze),this.isInitialized(be)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:be});at&&ze.resolve(at)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(fe){var be;const ze=this.normalizeInstanceIdentifier(fe?.identifier),at=null!==(be=fe?.optional)&&void 0!==be&&be;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(kt){if(at)return null;throw kt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Vn(Rt){return"EAGER"===Rt.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:$e})}catch{}for(const[be,ze]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(be);try{const kt=this.getOrInitializeService({instanceIdentifier:at});ze.resolve(kt)}catch{}}}}clearInstance(fe=$e){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,R.Z)(function*(){const be=Array.from(fe.instances.values());yield Promise.all([...be.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),...be.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=$e){return this.instances.has(fe)}getOptions(fe=$e){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:be={}}=fe,ze=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:ze,options:be});for(const[kt,Qn]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(kt)&&Qn.resolve(at);return at}onInit(fe,be){var ze;const at=this.normalizeInstanceIdentifier(be),kt=null!==(ze=this.onInitCallbacks.get(at))&&void 0!==ze?ze:new Set;kt.add(fe),this.onInitCallbacks.set(at,kt);const Qn=this.instances.get(at);return Qn&&fe(Qn,at),()=>{kt.delete(fe)}}invokeOnInitCallbacks(fe,be){const ze=this.onInitCallbacks.get(be);if(ze)for(const at of ze)try{at(fe,be)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:be={}}){let ze=this.instances.get(fe);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(Rt=fe,Rt===$e?void 0:Rt),options:be}),this.instances.set(fe,ze),this.instancesOptions.set(fe,be),this.invokeOnInitCallbacks(ze,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,ze)}catch{}var Rt;return ze||null}normalizeInstanceIdentifier(fe=$e){return this.component?this.component.multipleInstances?fe:$e:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rn{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const be=this.getProvider(fe.name);if(be.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);be.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const be=new Ot(fe,this);return this.providers.set(fe,be),be}getProviders(){return Array.from(this.providers.values())}}},879:(ho,Kn,Ke)=>{Ke.d(Kn,{Am:()=>Rt,Ub:()=>rn,Yd:()=>Vn,in:()=>De});const R=[];var De=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(De||{});const M={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},$e=De.INFO,Ot={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},vn=(fe,be,...ze)=>{if(be<fe.logLevel)return;const at=(new Date).toISOString(),kt=Ot[be];if(!kt)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[kt](`[${at}]  ${fe.name}:`,...ze)};class Vn{constructor(be){this.name=be,this._logLevel=$e,this._logHandler=vn,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in De))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?M[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...be),this._logHandler(this,De.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...be),this._logHandler(this,De.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,De.INFO,...be),this._logHandler(this,De.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,De.WARN,...be),this._logHandler(this,De.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...be),this._logHandler(this,De.ERROR,...be)}}function rn(fe){R.forEach(be=>{be.setLogLevel(fe)})}function Rt(fe,be){for(const ze of R){let at=null;be&&be.level&&(at=M[be.level]),ze.userLogHandler=null===fe?null:(kt,Qn,...bt)=>{const tt=bt.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Qn>=(at??kt.logLevel)&&fe({level:De[Qn].toLowerCase(),message:tt,args:bt,type:kt.name})}}}},365:(ho,Kn,Ke)=>{Ke.r(Kn);var R=Ke(861),De=Ke(106),M=Ke(35),$e=Ke(58),Vn=(Ke(534),Ke(879),Ke(537));function rn(){return window}function be(){return be=(0,R.Z)(function*(C,A,b){var V;const{BuildInfo:de}=rn();(0,M.au)(A.sessionId,"AuthEvent did not contain a session ID");const Pe=yield function nt(C){return ir.apply(this,arguments)}(A.sessionId),Ve={};return(0,M.av)()?Ve.ibi=de.packageName:(0,M.aw)()?Ve.apn=de.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),de.displayName&&(Ve.appDisplayName=de.displayName),Ve.sessionId=Pe,(0,M.ay)(C,b,A.type,void 0,null!==(V=A.eventId)&&void 0!==V?V:void 0,Ve)}),be.apply(this,arguments)}function at(){return(at=(0,R.Z)(function*(C){const{BuildInfo:A}=rn(),b={};(0,M.av)()?b.iosBundleId=A.packageName:(0,M.aw)()?b.androidPackageName=A.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),yield(0,M.az)(C,b)})).apply(this,arguments)}function bt(){return(bt=(0,R.Z)(function*(C,A,b){const{cordova:V}=rn();let de=()=>{};try{yield new Promise((Pe,Ve)=>{let et=null;function Pt(){var qe;Pe();const sr=null===(qe=V.plugins.browsertab)||void 0===qe?void 0:qe.close;"function"==typeof sr&&sr(),"function"==typeof b?.close&&b.close()}function Re(){et||(et=window.setTimeout(()=>{Ve((0,M.aB)(C,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===document?.visibilityState&&Re()}A.addPassiveListener(Pt),document.addEventListener("resume",Re,!1),(0,M.aw)()&&document.addEventListener("visibilitychange",$t,!1),de=()=>{A.removePassiveListener(Pt),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",$t,!1),et&&window.clearTimeout(et)}})}finally{de()}})).apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(C){const A=function In(C){if((0,M.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const A=new ArrayBuffer(C.length),b=new Uint8Array(A);for(let V=0;V<C.length;V++)b[V]=C.charCodeAt(V);return b}(C),b=yield crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(b)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class jt extends M.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(A=>{this.resolveInialized=A})}addPassiveListener(A){this.passiveListeners.add(A)}removePassiveListener(A){this.passiveListeners.delete(A)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(A){return this.resolveInialized(),this.passiveListeners.forEach(b=>b(A)),super.onEvent(A)}initialized(){var A=this;return(0,R.Z)(function*(){yield A.initPromise})()}}function ut(C){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,R.Z)(function*(C){const A=yield Qt()._get(En(C));return A&&(yield Qt()._remove(En(C))),A})).apply(this,arguments)}function un(){const C=[];for(let b=0;b<20;b++){const V=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(V))}return C.join("")}function Qt(){return(0,M.aE)(M.b)}function En(C){return(0,M.aF)("authEvent",C.config.apiKey,C.name)}function ct(C){if(!C?.includes("?"))return{};const[A,...b]=C.split("?");return(0,$e.zd)(b.join("?"))}const te=class xi{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(A){var b=this;return(0,R.Z)(function*(){const V=A._key();let de=b.eventManagers.get(V);return de||(de=new jt(A),b.eventManagers.set(V,de),b.attachCallbackListeners(A,de)),de})()}_openPopup(A){(0,M.ax)(A,"operation-not-supported-in-this-environment")}_openRedirect(A,b,V,de){var Pe=this;return(0,R.Z)(function*(){!function tt(C){var A,b,V,de,Pe,Ve,et,Pt,Re,$t;const qe=rn();(0,M.aC)("function"==typeof(null===(A=qe?.universalLinks)||void 0===A?void 0:A.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aC)(typeof(null===(b=qe?.BuildInfo)||void 0===b?void 0:b.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aC)("function"==typeof(null===(Pe=null===(de=null===(V=qe?.cordova)||void 0===V?void 0:V.plugins)||void 0===de?void 0:de.browsertab)||void 0===Pe?void 0:Pe.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(Pt=null===(et=null===(Ve=qe?.cordova)||void 0===Ve?void 0:Ve.plugins)||void 0===et?void 0:et.browsertab)||void 0===Pt?void 0:Pt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===($t=null===(Re=qe?.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===$t?void 0:$t.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(A);const Ve=yield Pe._initialize(A);yield Ve.initialized(),Ve.resetRedirect(),(0,M.aI)(),yield Pe._originValidation(A);const et=function Gr(C,A,b=null){return{type:A,eventId:b,urlResponse:null,sessionId:un(),postBody:null,tenantId:C.tenantId,error:(0,M.aB)(C,"no-auth-event")}}(A,V,de);yield function Lt(C,A){return Qt()._set(En(C),A)}(A,et);const Pt=yield function fe(C,A,b){return be.apply(this,arguments)}(A,et,b),Re=yield function kt(C){const{cordova:A}=rn();return new Promise(b=>{A.plugins.browsertab.isAvailable(V=>{let de=null;V?A.plugins.browsertab.openUrl(C):de=A.InAppBrowser.open(C,(0,M.aA)()?"_blank":"_system","location=yes"),b(de)})})}(Pt);return function Qn(C,A,b){return bt.apply(this,arguments)}(A,Ve,Re)})()}_isIframeWebStorageSupported(A,b){throw new Error("Method not implemented.")}_originValidation(A){const b=A._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function ze(C){return at.apply(this,arguments)}(A)),this.originValidationPromises[b]}attachCallbackListeners(A,b){const{universalLinks:V,handleOpenURL:de,BuildInfo:Pe}=rn(),Ve=setTimeout((0,R.Z)(function*(){yield ut(A),b.onEvent(re())}),500),et=function(){var $t=(0,R.Z)(function*(qe){clearTimeout(Ve);const sr=yield ut(A);let Vs=null;sr&&qe?.url&&(Vs=function pe(C,A){var b,V;const de=function hi(C){const A=ct(C),b=A.link?decodeURIComponent(A.link):void 0,V=ct(b).link,de=A.deep_link_id?decodeURIComponent(A.deep_link_id):void 0;return ct(de).link||de||V||b||C}(A);if(de.includes("/__/auth/callback")){const Pe=ct(de),Ve=Pe.firebaseError?function di(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(Pe.firebaseError)):null,et=null===(V=null===(b=Ve?.code)||void 0===b?void 0:b.split("auth/"))||void 0===V?void 0:V[1],Pt=et?(0,M.aB)(et):null;return Pt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Pt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:de,postBody:null}}return null}(sr,qe.url)),b.onEvent(Vs||re())});return function(sr){return $t.apply(this,arguments)}}();typeof V<"u"&&"function"==typeof V.subscribe&&V.subscribe(null,et);const Pt=de,Re=`${Pe.packageName.toLowerCase()}://`;rn().handleOpenURL=function(){var $t=(0,R.Z)(function*(qe){if(qe.toLowerCase().startsWith(Re)&&et({url:qe}),"function"==typeof Pt)try{Pt(qe)}catch(sr){console.error(sr)}});return function(qe){return $t.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aB)("no-auth-event")}}function xe(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function Oe(C=(0,$e.z$)()){return!("file:"!==xe()&&"ionic:"!==xe()&&"capacitor:"!==xe()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ft(){try{const C=self.localStorage,A=M.aN();if(C)return C.setItem(A,"1"),C.removeItem(A),!function fi(C=(0,$e.z$)()){return function St(){return(0,$e.w1)()&&11===document?.documentMode}()||function cn(C=(0,$e.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,$e.hl)()}catch{return Yt()&&(0,$e.hl)()}return!1}function Yt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function wt(){return"http:"===xe()||"https:"===xe()}()||(0,$e.ru)()||Oe())&&!function Be(){return(0,$e.b$)()||(0,$e.UG)()}()&&Ft()&&!Yt()}function Yn(){return Oe()&&typeof document<"u"}function Po(){return(Po=(0,R.Z)(function*(){return!!Yn()&&new Promise(C=>{const A=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(A),C(!0)})})})).apply(this,arguments)}const Vt={LOCAL:"local",NONE:"none",SESSION:"session"},Mi=M.aC,ts="persistence";function pi(C){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,R.Z)(function*(C){yield C._initializationPromise;const A=xr(),b=M.aF(ts,C.config.apiKey,C.name);A&&A.setItem(b,C._getPersistence())})).apply(this,arguments)}function xr(){var C;try{return(null===(C=function Qi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const bn=M.aC;class Mr{constructor(){this.browserResolver=M.aE(M.k),this.cordovaResolver=M.aE(te),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(A){var b=this;return(0,R.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._initialize(A)})()}_openPopup(A,b,V,de){var Pe=this;return(0,R.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openPopup(A,b,V,de)})()}_openRedirect(A,b,V,de){var Pe=this;return(0,R.Z)(function*(){return yield Pe.selectUnderlyingResolver(),Pe.assertedUnderlyingResolver._openRedirect(A,b,V,de)})()}_isIframeWebStorageSupported(A,b){this.assertedUnderlyingResolver._isIframeWebStorageSupported(A,b)}_originValidation(A){return this.assertedUnderlyingResolver._originValidation(A)}get _shouldInitProactively(){return Yn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var A=this;return(0,R.Z)(function*(){if(A.underlyingResolver)return;const b=yield function pr(){return Po.apply(this,arguments)}();A.underlyingResolver=b?A.cordovaResolver:A.browserResolver})()}}function on(C){return C.unwrap()}function Ln(C){return xo(C)}function xo(C){const{_tokenResponse:A}=C instanceof $e.ZR?C.customData:C;if(!A)return null;if(!(C instanceof $e.ZR)&&"temporaryProof"in A&&"phoneNumber"in A)return M.P.credentialFromResult(C);const b=A.providerId;if(!b||b===M.p.PASSWORD)return null;let V;switch(b){case M.p.GOOGLE:V=M.X;break;case M.p.FACEBOOK:V=M.W;break;case M.p.GITHUB:V=M.Y;break;case M.p.TWITTER:V=M.$;break;default:const{oauthIdToken:de,oauthAccessToken:Pe,oauthTokenSecret:Ve,pendingToken:et,nonce:Pt}=A;return Pe||Ve||de||et?et?b.startsWith("saml.")?M.aQ._create(b,et):M.N._fromParams({providerId:b,signInMethod:b,pendingToken:et,idToken:de,accessToken:Pe}):new M.Z(b).credential({idToken:de,accessToken:Pe,rawNonce:Pt}):null}return C instanceof $e.ZR?V.credentialFromError(C):V.credentialFromResult(C)}function Jt(C,A){return A.catch(b=>{throw b instanceof $e.ZR&&function ns(C,A){var b;const V=null===(b=A.customData)||void 0===b?void 0:b._tokenResponse;if("auth/multi-factor-auth-required"===A?.code)A.resolver=new Un(C,M.as(C,A));else if(V){const de=xo(A),Pe=A;de&&(Pe.credential=de,Pe.tenantId=V.tenantId||void 0,Pe.email=V.email||void 0,Pe.phoneNumber=V.phoneNumber||void 0)}}(C,b),b}).then(b=>{const de=b.user;return{operationType:b.operationType,credential:Ln(b),additionalUserInfo:M.aq(b),user:or.getOrCreate(de)}})}function Ni(C,A){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,R.Z)(function*(C,A){const b=yield A;return{verificationId:b.verificationId,confirm:V=>Jt(C,b.confirm(V))}})).apply(this,arguments)}class Un{constructor(A,b){this.resolver=b,this.auth=function Cr(C){return C.wrapped()}(A)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(A){return Jt(on(this.auth),this.resolver.resolveSignIn(A))}}class or{constructor(A){this._delegate=A,this.multiFactor=M.at(A)}static getOrCreate(A){return or.USER_MAP.has(A)||or.USER_MAP.set(A,new or(A)),or.USER_MAP.get(A)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(A){return this._delegate.getIdTokenResult(A)}getIdToken(A){return this._delegate.getIdToken(A)}linkAndRetrieveDataWithCredential(A){return this.linkWithCredential(A)}linkWithCredential(A){var b=this;return(0,R.Z)(function*(){return Jt(b.auth,M.a2(b._delegate,A))})()}linkWithPhoneNumber(A,b){var V=this;return(0,R.Z)(function*(){return Ni(V.auth,M.l(V._delegate,A,b))})()}linkWithPopup(A){var b=this;return(0,R.Z)(function*(){return Jt(b.auth,M.d(b._delegate,A,Mr))})()}linkWithRedirect(A){var b=this;return(0,R.Z)(function*(){return yield pi(M.aJ(b.auth)),M.g(b._delegate,A,Mr)})()}reauthenticateAndRetrieveDataWithCredential(A){return this.reauthenticateWithCredential(A)}reauthenticateWithCredential(A){var b=this;return(0,R.Z)(function*(){return Jt(b.auth,M.a3(b._delegate,A))})()}reauthenticateWithPhoneNumber(A,b){return Ni(this.auth,M.r(this._delegate,A,b))}reauthenticateWithPopup(A){return Jt(this.auth,M.e(this._delegate,A,Mr))}reauthenticateWithRedirect(A){var b=this;return(0,R.Z)(function*(){return yield pi(M.aJ(b.auth)),M.h(b._delegate,A,Mr)})()}sendEmailVerification(A){return M.ag(this._delegate,A)}unlink(A){var b=this;return(0,R.Z)(function*(){return yield M.ap(b._delegate,A),b})()}updateEmail(A){return M.al(this._delegate,A)}updatePassword(A){return M.am(this._delegate,A)}updatePhoneNumber(A){return M.u(this._delegate,A)}updateProfile(A){return M.ak(this._delegate,A)}verifyBeforeUpdateEmail(A,b){return M.ah(this._delegate,A,b)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}or.USER_MAP=new WeakMap;const wn=M.aC;let Tr=(()=>{class C{constructor(b,V){if(this.app=b,V.isInitialized())return this._delegate=V.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=b.options;wn(de,"invalid-api-key",{appName:b.name}),wn(de,"invalid-api-key",{appName:b.name});const Pe=typeof window<"u"?Mr:void 0;this._delegate=V.initialize({options:{persistence:rs(de,b.name),popupRedirectResolver:Pe}}),this._delegate._updateErrorMap(M.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?or.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(b){this._delegate.languageCode=b}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(b){this._delegate.tenantId=b}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(b,V){M.K(this._delegate,b,V)}applyActionCode(b){return M.a7(this._delegate,b)}checkActionCode(b){return M.a8(this._delegate,b)}confirmPasswordReset(b,V){return M.a6(this._delegate,b,V)}createUserWithEmailAndPassword(b,V){var de=this;return(0,R.Z)(function*(){return Jt(de._delegate,M.aa(de._delegate,b,V))})()}fetchProvidersForEmail(b){return this.fetchSignInMethodsForEmail(b)}fetchSignInMethodsForEmail(b){return M.af(this._delegate,b)}isSignInWithEmailLink(b){return M.ad(this._delegate,b)}getRedirectResult(){var b=this;return(0,R.Z)(function*(){wn(Rn(),b._delegate,"operation-not-supported-in-this-environment");const V=yield M.j(b._delegate,Mr);return V?Jt(b._delegate,Promise.resolve(V)):{credential:null,user:null}})()}addFrameworkForLogging(b){!function se(C,A){(0,M.aJ)(C)._logFramework(A)}(this._delegate,b)}onAuthStateChanged(b,V,de){const{next:Pe,error:Ve,complete:et}=No(b,V,de);return this._delegate.onAuthStateChanged(Pe,Ve,et)}onIdTokenChanged(b,V,de){const{next:Pe,error:Ve,complete:et}=No(b,V,de);return this._delegate.onIdTokenChanged(Pe,Ve,et)}sendSignInLinkToEmail(b,V){return M.ac(this._delegate,b,V)}sendPasswordResetEmail(b,V){return M.a5(this._delegate,b,V||void 0)}setPersistence(b){var V=this;return(0,R.Z)(function*(){let de;switch(function Ro(C,A){Mi(Object.values(Vt).includes(A),C,"invalid-persistence-type"),(0,$e.b$)()?Mi(A!==Vt.SESSION,C,"unsupported-persistence-type"):(0,$e.UG)()?Mi(A===Vt.NONE,C,"unsupported-persistence-type"):Yt()?Mi(A===Vt.NONE||A===Vt.LOCAL&&(0,$e.hl)(),C,"unsupported-persistence-type"):Mi(A===Vt.NONE||Ft(),C,"unsupported-persistence-type")}(V._delegate,b),b){case Vt.SESSION:de=M.a;break;case Vt.LOCAL:de=(yield M.aE(M.i)._isAvailable())?M.i:M.b;break;case Vt.NONE:de=M.U;break;default:return M.ax("argument-error",{appName:V._delegate.name})}return V._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(b){return this.signInWithCredential(b)}signInAnonymously(){return Jt(this._delegate,M.a0(this._delegate))}signInWithCredential(b){return Jt(this._delegate,M.a1(this._delegate,b))}signInWithCustomToken(b){return Jt(this._delegate,M.a4(this._delegate,b))}signInWithEmailAndPassword(b,V){return Jt(this._delegate,M.ab(this._delegate,b,V))}signInWithEmailLink(b,V){return Jt(this._delegate,M.ae(this._delegate,b,V))}signInWithPhoneNumber(b,V){return Ni(this._delegate,M.s(this._delegate,b,V))}signInWithPopup(b){var V=this;return(0,R.Z)(function*(){return wn(Rn(),V._delegate,"operation-not-supported-in-this-environment"),Jt(V._delegate,M.c(V._delegate,b,Mr))})()}signInWithRedirect(b){var V=this;return(0,R.Z)(function*(){return wn(Rn(),V._delegate,"operation-not-supported-in-this-environment"),yield pi(V._delegate),M.f(V._delegate,b,Mr)})()}updateCurrentUser(b){return this._delegate.updateCurrentUser(b)}verifyPasswordResetCode(b){return M.a9(this._delegate,b)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Vt,C})();function No(C,A,b){let V=C;"function"!=typeof C&&({next:V,error:A,complete:b}=C);const de=V;return{next:Ve=>de(Ve&&or.getOrCreate(Ve)),error:A,complete:b}}function rs(C,A){const b=function Rr(C,A){const b=xr();if(!b)return[];const V=M.aF(ts,C,A);switch(b.getItem(V)){case Vt.NONE:return[M.U];case Vt.LOCAL:return[M.i,M.a];case Vt.SESSION:return[M.a];default:return[]}}(C,A);if(typeof self<"u"&&!b.includes(M.i)&&b.push(M.i),typeof window<"u")for(const V of[M.b,M.a])b.includes(V)||b.push(V);return b.includes(M.U)||b.push(M.U),b}class is{constructor(){this.providerId="phone",this._delegate=new M.P(on(De.Z.auth()))}static credential(A,b){return M.P.credential(A,b)}verifyPhoneNumber(A,b){return this._delegate.verifyPhoneNumber(A,b)}unwrap(){return this._delegate}}is.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,is.PROVIDER_ID=M.P.PROVIDER_ID;const os=M.aC;class Oo{constructor(A,b,V=De.Z.app()){var de;os(null===(de=V.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:V.name}),this._delegate=new M.R(V.auth(),A,b),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function F(C){C.INTERNAL.registerComponent(new Vn.wA("auth-compat",A=>{const b=A.getProvider("app-compat").getImmediate(),V=A.getProvider("auth");return new Tr(b,V)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.V,FacebookAuthProvider:M.W,GithubAuthProvider:M.Y,GoogleAuthProvider:M.X,OAuthProvider:M.Z,SAMLAuthProvider:M._,PhoneAuthProvider:is,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Oo,TwitterAuthProvider:M.$,Auth:Tr,AuthCredential:M.L,Error:$e.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.9")}(De.Z)},861:(ho,Kn,Ke)=>{function R(M,$e,Ot,vn,Vn,rn,Rt){try{var fe=M[rn](Rt),be=fe.value}catch(ze){return void Ot(ze)}fe.done?$e(be):Promise.resolve(be).then(vn,Vn)}function De(M){return function(){var $e=this,Ot=arguments;return new Promise(function(vn,Vn){var rn=M.apply($e,Ot);function Rt(be){R(rn,vn,Vn,Rt,fe,"next",be)}function fe(be){R(rn,vn,Vn,Rt,fe,"throw",be)}Rt(void 0)})}}Ke.d(Kn,{Z:()=>De})},582:(ho,Kn,Ke)=>{function $e(te,re){var se={};for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&re.indexOf(ue)<0&&(se[ue]=te[ue]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(ue=Object.getOwnPropertySymbols(te);he<ue.length;he++)re.indexOf(ue[he])<0&&Object.prototype.propertyIsEnumerable.call(te,ue[he])&&(se[ue[he]]=te[ue[he]])}return se}function ze(te,re,se,ue){return new(se||(se=Promise))(function(ie,xe){function wt(St){try{Be(ue.next(St))}catch(cn){xe(cn)}}function Oe(St){try{Be(ue.throw(St))}catch(cn){xe(cn)}}function Be(St){St.done?ie(St.value):function he(ie){return ie instanceof se?ie:new se(function(xe){xe(ie)})}(St.value).then(wt,Oe)}Be((ue=ue.apply(te,re||[])).next())})}function yt(te){return this instanceof yt?(this.v=te,this):new yt(te)}function jt(te,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,ue=se.apply(te,re||[]),ie=[];return he={},wt("next"),wt("throw"),wt("return",function xe(Ft){return function(Yt){return Promise.resolve(Yt).then(Ft,cn)}}),he[Symbol.asyncIterator]=function(){return this},he;function wt(Ft,Yt){ue[Ft]&&(he[Ft]=function(Rn){return new Promise(function(Yn,pr){ie.push([Ft,Rn,Yn,pr])>1||Oe(Ft,Rn)})},Yt&&(he[Ft]=Yt(he[Ft])))}function Oe(Ft,Yt){try{!function Be(Ft){Ft.value instanceof yt?Promise.resolve(Ft.value.v).then(St,cn):fi(ie[0][2],Ft)}(ue[Ft](Yt))}catch(Rn){fi(ie[0][3],Rn)}}function St(Ft){Oe("next",Ft)}function cn(Ft){Oe("throw",Ft)}function fi(Ft,Yt){Ft(Yt),ie.shift(),ie.length&&Oe(ie[0][0],ie[0][1])}}function Lt(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=te[Symbol.asyncIterator];return re?re.call(te):(te=function bt(te){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&te[re],ue=0;if(se)return se.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&ue>=te.length&&(te=void 0),{value:te&&te[ue++],done:!te}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),se={},ue("next"),ue("throw"),ue("return"),se[Symbol.asyncIterator]=function(){return this},se);function ue(ie){se[ie]=te[ie]&&function(xe){return new Promise(function(wt,Oe){!function he(ie,xe,wt,Oe){Promise.resolve(Oe).then(function(Be){ie({value:Be,done:wt})},xe)}(wt,Oe,(xe=te[ie](xe)).done,xe.value)})}}}Ke.d(Kn,{FC:()=>jt,KL:()=>Lt,_T:()=>$e,mG:()=>ze,qq:()=>yt}),"function"==typeof SuppressedError&&SuppressedError}},ho=>{ho(ho.s=191)}]);