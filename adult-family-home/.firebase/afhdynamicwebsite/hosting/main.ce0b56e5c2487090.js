"use strict";(self.webpackChunkadult_family_home=self.webpackChunkadult_family_home||[]).push([[179],{35:(so,Zn,Ze)=>{Ze.d(Zn,{$:()=>sm,A:()=>Ee,G:()=>Nt,K:()=>gh,L:()=>Vs,N:()=>Ki,P:()=>Om,R:()=>Mm,U:()=>et,V:()=>Ta,W:()=>qc,X:()=>Th,Y:()=>Dh,Z:()=>bt,_:()=>xu,a:()=>xa,a0:()=>am,a1:()=>Jc,a2:()=>Nr,a3:()=>lm,a4:()=>dm,a5:()=>hm,a6:()=>el,a7:()=>UI,a8:()=>Ne,a9:()=>pn,aA:()=>kc,aB:()=>Bt,aC:()=>pe,aD:()=>po,aE:()=>Re,aF:()=>At,aG:()=>fl,aH:()=>Um,aI:()=>rE,aJ:()=>hn,aN:()=>Na,aQ:()=>Gr,aa:()=>Nu,ab:()=>Aa,ac:()=>Un,ad:()=>Sa,ae:()=>ot,af:()=>Bn,ag:()=>Ra,ah:()=>Ou,ak:()=>ku,al:()=>yt,am:()=>mA,ap:()=>LI,aq:()=>kr,as:()=>EA,at:()=>ym,au:()=>Kt,av:()=>ks,aw:()=>Ke,ax:()=>_t,ay:()=>vl,az:()=>zm,b:()=>jI,c:()=>km,d:()=>Xe,e:()=>Fm,f:()=>Rt,g:()=>ho,h:()=>pr,i:()=>zI,j:()=>iE,k:()=>Ym,l:()=>co,m:()=>MA,p:()=>nn,r:()=>Nm,s:()=>Kh,u:()=>Zr});var R=Ze(861),De=Ze(534),M=Ze(58),$e=Ze(879),xt=Ze(582),yn=Ze(537);const nn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Nt=function je(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Kn=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new $e.Yd("@firebase/auth");function vn(p,...c){nt.logLevel<=$e.in.ERROR&&nt.error(`Auth (${De.SDK_VERSION}): ${p}`,...c)}function _t(p,...c){throw Sn(p,...c)}function Bt(p,...c){return Sn(p,...c)}function zr(p,c,d){const g=Object.assign(Object.assign({},Kn()),{[c]:d});return new M.LL("auth","Firebase",g).create(c,{appName:p.name})}function Ft(p){return zr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ut(p,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&_t(p,"argument-error"),zr(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sn(p,...c){if("string"!=typeof p){const d=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return Et.create(p,...c)}function pe(p,c,...d){if(!p)throw Sn(c,...d)}function un(p){const c="INTERNAL ASSERTION FAILED: "+p;throw vn(c),new Error(c)}function Kt(p,c){p||un(c)}function In(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function li(){return"http:"===di()||"https:"===di()}function di(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Ri{constructor(c,d){this.shortDelay=c,this.longDelay=d,Kt(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return function lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(li()||(0,M.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(p,c){Kt(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class re{static initialize(c,d,g){this.fetchImpl=c,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ae=new Ri(3e4,6e4);function de(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function ie(p,c,d,g){return Me.apply(this,arguments)}function Me(){return(Me=(0,R.Z)(function*(p,c,d,g,v={}){return wt(p,v,(0,R.Z)(function*(){let b={},j={};g&&("GET"===c?j=g:b={body:JSON.stringify(g)});const X=(0,M.xO)(Object.assign({key:p.config.apiKey},j)).slice(1),ge=yield p._getAdditionalHeaders();return ge["Content-Type"]="application/json",p.languageCode&&(ge["X-Firebase-Locale"]=p.languageCode),re.fetch()(cn(p,p.config.apiHost,d,X),Object.assign({method:c,headers:ge,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function wt(p,c,d){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,R.Z)(function*(p,c,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},se),c);try{const v=new Ot(p),b=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const j=yield b.json();if("needConfirmation"in j)throw Qt(p,"account-exists-with-different-credential",j);if(b.ok&&!("errorMessage"in j))return j;{const X=b.ok?j.errorMessage:j.error.message,[ge,ke]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ge)throw Qt(p,"credential-already-in-use",j);if("EMAIL_EXISTS"===ge)throw Qt(p,"email-already-in-use",j);if("USER_DISABLED"===ge)throw Qt(p,"user-disabled",j);const Ge=g[ge]||ge.toLowerCase().replace(/[_\s]+/g,"-");if(ke)throw zr(p,Ge,ke);_t(p,Ge)}}catch(v){if(v instanceof M.ZR)throw v;_t(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Ue(p,c,d,g){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,R.Z)(function*(p,c,d,g,v={}){const b=yield ie(p,c,d,g,v);return"mfaPendingCredential"in b&&_t(p,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function cn(p,c,d,g){const v=`${c}${d}?${g}`;return p.config.emulator?te(p.config,v):`${p.config.apiScheme}://${v}`}function hi(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ot{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Bt(this.auth,"network-request-failed")),ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qt(p,c,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Bt(p,c,g);return v.customData._tokenResponse=d,v}function Rn(p){return void 0!==p&&void 0!==p.getResponse}function Qn(p){return void 0!==p&&void 0!==p.enterprise}class hr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return hi(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Wi(){return(Wi=(0,R.Z)(function*(p){return(yield ie(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kt(p,c){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,R.Z)(function*(p,c){return ie(p,"GET","/v2/recaptchaConfig",de(p,c))})).apply(this,arguments)}function Do(){return(Do=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Zi(){return(Zi=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Rr(p,c){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function En(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Cr(){return(Cr=(0,R.Z)(function*(p,c=!1){const d=(0,M.m9)(p),g=yield d.getIdToken(c),v=Yo(g);pe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const b="object"==typeof v.firebase?v.firebase:void 0,j=b?.sign_in_provider;return{claims:v,token:g,authTime:En(Vn(v.auth_time)),issuedAtTime:En(Vn(v.iat)),expirationTime:En(Vn(v.exp)),signInProvider:j||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function Vn(p){return 1e3*Number(p)}function Yo(p){const[c,d,g]=p.split(".");if(void 0===c||void 0===d||void 0===g)return vn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,M.tV)(d);return v?JSON.parse(v):(vn("Failed to decode base64 JWT payload"),null)}catch(v){return vn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Ao(p){const c=Yo(p);return pe(c,"internal-error"),pe(typeof c.exp<"u","internal-error"),pe(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Yt(p,c){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,R.Z)(function*(p,c,d=!1){if(d)return c;try{return yield c}catch(g){throw g instanceof M.ZR&&function So({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Ln{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,R.Z)(function*(){yield d.iteration()}),g)}iteration(){var c=this;return(0,R.Z)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class ir{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wn(p){return br.apply(this,arguments)}function br(){return(br=(0,R.Z)(function*(p){var c;const d=p.auth,g=yield p.getIdToken(),v=yield Yt(p,Rr(d,{idToken:g}));pe(v?.users.length,d,"internal-error");const b=v.users[0];p._notifyReloadListener(b);const j=null!==(c=b.providerUserInfo)&&void 0!==c&&c.length?es(b.providerUserInfo):[],X=function Xo(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,j),Ge=!!p.isAnonymous&&!(p.email&&b.passwordHash||X?.length),vt={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:X,metadata:new ir(b.createdAt,b.lastLoginAt),isAnonymous:Ge};Object.assign(p,vt)})).apply(this,arguments)}function Jo(){return(Jo=(0,R.Z)(function*(p){const c=(0,M.m9)(p);yield wn(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function es(p){return p.map(c=>{var{providerId:d}=c,g=(0,xt._T)(c,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function L(){return(L=(0,R.Z)(function*(p,c){const d=yield wt(p,{},(0,R.Z)(function*(){const g=(0,M.xO)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:b}=p.config,j=cn(p,v,"/v1/token",`key=${b}`),X=yield p._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",re.fetch()(j,{method:"POST",headers:X,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,R.Z)(function*(p,c){return ie(p,"POST","/v2/accounts:revokeToken",de(p,c))})).apply(this,arguments)}class A{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){pe(c.idToken,"internal-error"),pe(typeof c.idToken<"u","internal-error"),pe(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Ao(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){pe(0!==c.length,"internal-error");const d=Ao(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var g=this;return(0,R.Z)(function*(){return d||!g.accessToken||g.isExpired?(pe(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var g=this;return(0,R.Z)(function*(){const{accessToken:v,refreshToken:b,expiresIn:j}=yield function Po(p,c){return L.apply(this,arguments)}(c,d);g.updateTokensAndExpiration(v,b,Number(j))})()}updateTokensAndExpiration(c,d,g){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,d){const{refreshToken:g,accessToken:v,expirationTime:b}=d,j=new A;return g&&(pe("string"==typeof g,"internal-error",{appName:c}),j.refreshToken=g),v&&(pe("string"==typeof v,"internal-error",{appName:c}),j.accessToken=v),b&&(pe("number"==typeof b,"internal-error",{appName:c}),j.expirationTime=b),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new A,this.toJSON())}_performRefresh(){return un("not implemented")}}function w(p,c){pe("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class k{constructor(c){var{uid:d,auth:g,stsTokenManager:v}=c,b=(0,xt._T)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new ir(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,R.Z)(function*(){const g=yield Yt(d,d.stsTokenManager.getToken(d.auth,c));return pe(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(c){return function rn(p){return Cr.apply(this,arguments)}(this,c)}reload(){return function Ro(p){return Jo.apply(this,arguments)}(this)}_assign(c){this!==c&&(pe(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new k(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var g=this;return(0,R.Z)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),d&&(yield wn(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,R.Z)(function*(){if((0,De._isFirebaseServerApp)(c.auth.app))return Promise.reject(Ft(c.auth));const d=yield c.getIdToken();return yield Yt(c,function Qo(p,c){return Do.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var g,v,b,j,X,ge,ke,Ge;const vt=null!==(g=d.displayName)&&void 0!==g?g:void 0,mr=null!==(v=d.email)&&void 0!==v?v:void 0,Kr=null!==(b=d.phoneNumber)&&void 0!==b?b:void 0,Cl=null!==(j=d.photoURL)&&void 0!==j?j:void 0,yf=null!==(X=d.tenantId)&&void 0!==X?X:void 0,bl=null!==(ge=d._redirectEventId)&&void 0!==ge?ge:void 0,Ua=null!==(ke=d.createdAt)&&void 0!==ke?ke:void 0,Xm=null!==(Ge=d.lastLoginAt)&&void 0!==Ge?Ge:void 0,{uid:_r,emailVerified:e_,isAnonymous:cr,providerData:qu,stsTokenManager:t_}=d;pe(_r&&t_,c,"internal-error");const n_=A.fromJSON(this.name,t_);pe("string"==typeof _r,c,"internal-error"),w(vt,c.name),w(mr,c.name),pe("boolean"==typeof e_,c,"internal-error"),pe("boolean"==typeof cr,c,"internal-error"),w(Kr,c.name),w(Cl,c.name),w(yf,c.name),w(bl,c.name),w(Ua,c.name),w(Xm,c.name);const Ba=new k({uid:_r,auth:c,email:mr,emailVerified:e_,displayName:vt,isAnonymous:cr,photoURL:Cl,phoneNumber:Kr,tenantId:yf,stsTokenManager:n_,createdAt:Ua,lastLoginAt:Xm});return qu&&Array.isArray(qu)&&(Ba.providerData=qu.map($a=>Object.assign({},$a))),bl&&(Ba._redirectEventId=bl),Ba}static _fromIdTokenResponse(c,d,g=!1){return(0,R.Z)(function*(){const v=new A;v.updateFromServerResponse(d);const b=new k({uid:d.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield wn(b),b})()}static _fromGetAccountInfoResponse(c,d,g){return(0,R.Z)(function*(){const v=d.users[0];pe(void 0!==v.localId,"internal-error");const b=void 0!==v.providerUserInfo?es(v.providerUserInfo):[],j=!(v.email&&v.passwordHash||b?.length),X=new A;X.updateFromIdToken(g);const ge=new k({uid:v.localId,auth:c,stsTokenManager:X,isAnonymous:j}),ke={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:b,metadata:new ir(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||b?.length)};return Object.assign(ge,ke),ge})()}}const le=new Map;function Re(p){Kt(p instanceof Function,"Expected a class definition");let c=le.get(p);return c?(Kt(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,le.set(p,c),c)}const et=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.Z)(function*(){return!0})()}_set(d,g){var v=this;return(0,R.Z)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,R.Z)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,R.Z)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function At(p,c,d){return`firebase:${p}:${c}:${d}`}class Pe{constructor(c,d,g){this.persistence=c,this.auth=d,this.userKey=g;const{config:v,name:b}=this.auth;this.fullUserKey=At(this.userKey,v.apiKey,b),this.fullPersistenceKey=At("persistence",v.apiKey,b),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,R.Z)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?k._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,R.Z)(function*(){if(d.persistence===c)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,g="authUser"){return(0,R.Z)(function*(){if(!d.length)return new Pe(Re(et),c,g);const v=(yield Promise.all(d.map(function(){var ke=(0,R.Z)(function*(Ge){if(yield Ge._isAvailable())return Ge});return function(Ge){return ke.apply(this,arguments)}}()))).filter(ke=>ke);let b=v[0]||Re(et);const j=At(g,c.config.apiKey,c.name);let X=null;for(const ke of d)try{const Ge=yield ke._get(j);if(Ge){const vt=k._fromJSON(c,Ge);ke!==b&&(X=vt),b=ke;break}}catch{}const ge=v.filter(ke=>ke._shouldAllowMigration);return b._shouldAllowMigration&&ge.length?(b=ge[0],X&&(yield b._set(j,X.toJSON())),yield Promise.all(d.map(function(){var ke=(0,R.Z)(function*(Ge){if(Ge!==b)try{yield Ge._remove(j)}catch{}});return function(Ge){return ke.apply(this,arguments)}}())),new Pe(b,c,g)):new Pe(b,c,g)})()}}function $t(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ht(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(He(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(wa(c))return"Blackberry";if(Ca(c))return"Webos";if(or(c))return"Safari";if((c.includes("chrome/")||Os(c))&&!c.includes("edge/"))return"Chrome";if(Ke(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function He(p=(0,M.z$)()){return/firefox\//i.test(p)}function or(p=(0,M.z$)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Os(p=(0,M.z$)()){return/crios\//i.test(p)}function Ht(p=(0,M.z$)()){return/iemobile/i.test(p)}function Ke(p=(0,M.z$)()){return/android/i.test(p)}function wa(p=(0,M.z$)()){return/blackberry/i.test(p)}function Ca(p=(0,M.z$)()){return/webos/i.test(p)}function ks(p=(0,M.z$)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function kc(p=(0,M.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}function K(p=(0,M.z$)()){return ks(p)||Ke(p)||Ca(p)||wa(p)||/windows phone/i.test(p)||Ht(p)}function rt(p,c=[]){let d;switch(p){case"Browser":d=$t((0,M.z$)());break;case"Worker":d=`${$t((0,M.z$)())}-${p}`;break;default:d=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${De.SDK_VERSION}/${g}`}class ct{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const g=b=>new Promise((j,X)=>{try{j(c(b))}catch(ge){X(ge)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,R.Z)(function*(){if(d.auth.currentUser===c)return;const g=[];try{for(const v of d.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const b of g)try{b()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function Gt(){return(Gt=(0,R.Z)(function*(p,c={}){return ie(p,"GET","/v2/passwordPolicy",de(p,c))})).apply(this,arguments)}class xi{constructor(c){var d,g,v,b;const j=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=j.minPasswordLength)&&void 0!==d?d:6,j.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=j.maxPasswordLength),void 0!==j.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=j.containsLowercaseCharacter),void 0!==j.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=j.containsUppercaseCharacter),void 0!==j.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=j.containsNumericCharacter),void 0!==j.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=j.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(b=c.forceUpgradeOnSignin)&&void 0!==b&&b,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,g,v,b,j,X;const ge={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,ge),this.validatePasswordCharacterOptions(c,ge),ge.isValid&&(ge.isValid=null===(d=ge.meetsMinPasswordLength)||void 0===d||d),ge.isValid&&(ge.isValid=null===(g=ge.meetsMaxPasswordLength)||void 0===g||g),ge.isValid&&(ge.isValid=null===(v=ge.containsLowercaseLetter)||void 0===v||v),ge.isValid&&(ge.isValid=null===(b=ge.containsUppercaseLetter)||void 0===b||b),ge.isValid&&(ge.isValid=null===(j=ge.containsNumericCharacter)||void 0===j||j),ge.isValid&&(ge.isValid=null===(X=ge.containsNonAlphanumericCharacter)||void 0===X||X),ge}validatePasswordLengthOptions(c,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=c.length>=g),v&&(d.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,d,g,v,b){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=b))}}class Fs{constructor(c,d,g,v){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ts(this),this.idTokenSubscription=new ts(this),this.beforeStateQueue=new ct(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,d){var g=this;return d&&(this._popupRedirectResolver=Re(d)),this._initializationPromise=this.queue((0,R.Z)(function*(){var v,b;if(!g._deleted&&(g.persistenceManager=yield Pe.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(b=g.currentUser)||void 0===b?void 0:b.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,R.Z)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,R.Z)(function*(){try{const g=yield Rr(d,{idToken:c}),v=yield k._fromGetAccountInfoResponse(d,g,c);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,R.Z)(function*(){var g;if((0,De._isFirebaseServerApp)(d.app)){const X=d.app.settings.authIdToken;return X?new Promise(ge=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(X).then(ge,ge))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let b=v,j=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const X=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,ge=b?._redirectEventId,ke=yield d.tryRedirectSignIn(c);(!X||X===ge)&&ke?.user&&(b=ke.user,j=!0)}if(!b)return d.directlySetCurrentUser(null);if(!b._redirectEventId){if(j)try{yield d.beforeStateQueue.runMiddleware(b)}catch(X){b=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(X))}return b?d.reloadAndSetCurrentUserOrClear(b):d.directlySetCurrentUser(null)}return pe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===b._redirectEventId?d.directlySetCurrentUser(b):d.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(c){var d=this;return(0,R.Z)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,R.Z)(function*(){try{yield wn(c)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function bo(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,R.Z)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,R.Z)(function*(){if((0,De._isFirebaseServerApp)(d.app))return Promise.reject(Ft(d));const g=c?(0,M.m9)(c):null;return g&&pe(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(c,d=!1){var g=this;return(0,R.Z)(function*(){if(!g._deleted)return c&&pe(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,R.Z)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,R.Z)(function*(){return(0,De._isFirebaseServerApp)(c.app)?Promise.reject(Ft(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,De._isFirebaseServerApp)(this.app)?Promise.reject(Ft(this)):this.queue((0,R.Z)(function*(){yield d.assertedPersistence.setPersistence(Re(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,R.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,R.Z)(function*(){const d=yield function gt(p){return Gt.apply(this,arguments)}(c),g=new xi(d);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new M.LL("auth","Firebase",c())}onAuthStateChanged(c,d,g){return this.registerStateListener(this.authStateSubscription,c,d,g)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,g){return this.registerStateListener(this.idTokenSubscription,c,d,g)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,R.Z)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function O(p,c){return C.apply(this,arguments)}(d,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var g=this;return(0,R.Z)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,R.Z)(function*(){if(!d.redirectPersistenceManager){const g=c&&Re(c)||d._popupRedirectResolver;pe(g,d,"argument-error"),d.redirectPersistenceManager=yield Pe.create(d,[Re(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,R.Z)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,R.Z)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===c?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,R.Z)(function*(){if(c===d.currentUser)return d.queue((0,R.Z)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,g,v){if(this._deleted)return()=>{};const b="function"==typeof d?d:d.next.bind(d);let j=!1;const X=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(X,this,"internal-error"),X.then(()=>{j||b(this.currentUser)}),"function"==typeof d){const ge=c.addObserver(d,g,v);return()=>{j=!0,ge()}}{const ge=c.addObserver(d);return()=>{j=!0,ge()}}}directlySetCurrentUser(c){var d=this;return(0,R.Z)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=rt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,R.Z)(function*(){var d;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const b=yield c._getAppCheckToken();return b&&(g["X-Firebase-AppCheck"]=b),g})()}_getAppCheckToken(){var c=this;return(0,R.Z)(function*(){var d;const g=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function rr(p,...c){nt.logLevel<=$e.in.WARN&&nt.warn(`Auth (${De.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function hn(p){return(0,M.m9)(p)}class ts{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,M.ne)(d=>this.observer=d)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fc={loadJS:()=>(0,R.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qg(p){return Fc.loadJS(p)}function Yg(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Ye{constructor(c){this.type="recaptcha-enterprise",this.auth=hn(c)}verify(c="verify",d=!1){var g=this;return(0,R.Z)(function*(){function b(){return b=(0,R.Z)(function*(X){if(!d){if(null==X.tenantId&&null!=X._agentRecaptchaConfig)return X._agentRecaptchaConfig.siteKey;if(null!=X.tenantId&&void 0!==X._tenantRecaptchaConfigs[X.tenantId])return X._tenantRecaptchaConfigs[X.tenantId].siteKey}return new Promise(function(){var ge=(0,R.Z)(function*(ke,Ge){kt(X,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vt=>{if(void 0!==vt.recaptchaKey){const mr=new hr(vt);return null==X.tenantId?X._agentRecaptchaConfig=mr:X._tenantRecaptchaConfigs[X.tenantId]=mr,ke(mr.siteKey)}Ge(new Error("recaptcha Enterprise site key undefined"))}).catch(vt=>{Ge(vt)})});return function(ke,Ge){return ge.apply(this,arguments)}}())}),b.apply(this,arguments)}function j(X,ge,ke){const Ge=window.grecaptcha;Qn(Ge)?Ge.enterprise.ready(()=>{Ge.enterprise.execute(X,{action:c}).then(vt=>{ge(vt)}).catch(()=>{ge("NO_RECAPTCHA")})}):ke(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((X,ge)=>{(function v(X){return b.apply(this,arguments)})(g.auth).then(ke=>{if(!d&&Qn(window.grecaptcha))j(ke,X,ge);else{if(typeof window>"u")return void ge(new Error("RecaptchaVerifier is only supported in browser"));let Ge=function xI(){return Fc.recaptchaEnterpriseScript}();0!==Ge.length&&(Ge+=ke),Qg(Ge).then(()=>{j(ke,X,ge)}).catch(vt=>{ge(vt)})}}).catch(ke=>{ge(ke)})})})()}}function NI(p,c,d){return Jg.apply(this,arguments)}function Jg(){return(Jg=(0,R.Z)(function*(p,c,d,g=!1){const v=new Ye(p);let b;try{b=yield v.verify(d)}catch{b=yield v.verify(d,!0)}const j=Object.assign({},c);return Object.assign(j,g?{captchaResp:b}:{captchaResponse:b}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}function Vc(p,c,d,g){return ze.apply(this,arguments)}function ze(){return ze=(0,R.Z)(function*(p,c,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const b=yield NI(p,c,d,"getOobCode"===d);return g(p,b)}return g(p,c).catch(function(){var b=(0,R.Z)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const X=yield NI(p,c,d,"getOobCode"===d);return g(p,X)}return Promise.reject(j)});return function(j){return b.apply(this,arguments)}}())}),ze.apply(this,arguments)}function gh(p,c,d){const g=hn(p);pe(g._canInitEmulator,g,"emulator-config-failed"),pe(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,b=Xg(c),{host:j,port:X}=function Uc(p){const c=Xg(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const b=v[1];return{host:b,port:Tu(g.substr(b.length+1))}}{const[b,j]=g.split(":");return{host:b,port:Tu(j)}}}(c);g.config.emulator={url:`${b}//${j}${null===X?"":`:${X}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:j,port:X,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function mh(){function p(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Xg(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function Tu(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class Vs{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return un("not implemented")}_getIdTokenResponse(c){return un("not implemented")}_linkToIdToken(c,d){return un("not implemented")}_getReauthenticationResolver(c){return un("not implemented")}}function em(p,c){return mt.apply(this,arguments)}function mt(){return(mt=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:resetPassword",de(p,c))})).apply(this,arguments)}function Bc(){return(Bc=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function qr(p,c){return $c.apply(this,arguments)}function $c(){return($c=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Wt(){return(Wt=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",de(p,c))})).apply(this,arguments)}function fA(p,c){return tm.apply(this,arguments)}function tm(){return(tm=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithPassword",de(p,c))})).apply(this,arguments)}function be(p,c){return Du.apply(this,arguments)}function Du(){return(Du=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:sendOobCode",de(p,c))})).apply(this,arguments)}function jc(){return(jc=(0,R.Z)(function*(p,c){return be(p,c)})).apply(this,arguments)}function vh(p,c){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,R.Z)(function*(p,c){return be(p,c)})).apply(this,arguments)}function Eh(p,c){return nm.apply(this,arguments)}function nm(){return(nm=(0,R.Z)(function*(p,c){return be(p,c)})).apply(this,arguments)}function rm(){return(rm=(0,R.Z)(function*(p,c){return be(p,c)})).apply(this,arguments)}function im(){return(im=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithEmailLink",de(p,c))})).apply(this,arguments)}function Su(){return(Su=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithEmailLink",de(p,c))})).apply(this,arguments)}class ns extends Vs{constructor(c,d,g,v=null){super("password",g),this._email=c,this._password=d,this._tenantId=v}static _fromEmailAndPassword(c,d){return new ns(c,d,"password")}static _fromEmailAndCode(c,d,g=null){return new ns(c,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,R.Z)(function*(){switch(d.signInMethod){case"password":return Vc(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",fA);case"emailLink":return function gA(p,c){return im.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:_t(c,"internal-error")}})()}_linkToIdToken(c,d){var g=this;return(0,R.Z)(function*(){switch(g.signInMethod){case"password":return Vc(c,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qr);case"emailLink":return function Au(p,c){return Su.apply(this,arguments)}(c,{idToken:d,email:g._email,oobCode:g._password});default:_t(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Mo(p,c){return wh.apply(this,arguments)}function wh(){return(wh=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithIdp",de(p,c))})).apply(this,arguments)}class Ki extends Vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new Ki(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):_t("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=d,b=(0,xt._T)(d,["providerId","signInMethod"]);if(!g||!v)return null;const j=new Ki(g,v);return j.idToken=b.idToken||void 0,j.accessToken=b.accessToken||void 0,j.secret=b.secret,j.nonce=b.nonce,j.pendingToken=b.pendingToken||null,j}_getIdTokenResponse(c){return Mo(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,Mo(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Mo(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,M.xO)(d)}return c}}function Ch(){return(Ch=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:sendVerificationCode",de(p,c))})).apply(this,arguments)}function bh(){return(bh=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,c))})).apply(this,arguments)}function Hc(){return(Hc=(0,R.Z)(function*(p,c){const d=yield Ue(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,c));if(d.temporaryProof)throw Qt(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Le={USER_NOT_FOUND:"user-not-found"};function Ru(){return(Ru=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithPhoneNumber",de(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Le)})).apply(this,arguments)}class Qi extends Vs{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Qi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Qi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function rs(p,c){return bh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function we(p,c){return Hc.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function zc(p,c){return Ru.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:b}=c;return g||d||v||b?new Qi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:b}):null}}class Pu{constructor(c){var d,g,v,b,j,X;const ge=(0,M.zd)((0,M.pd)(c)),ke=null!==(d=ge.apiKey)&&void 0!==d?d:null,Ge=null!==(g=ge.oobCode)&&void 0!==g?g:null,vt=function FI(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ge.mode)&&void 0!==v?v:null);pe(ke&&Ge&&vt,"argument-error"),this.apiKey=ke,this.operation=vt,this.code=Ge,this.continueUrl=null!==(b=ge.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(j=ge.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(X=ge.tenantId)&&void 0!==X?X:null}static parseLink(c){const d=function VI(p){const c=(0,M.zd)((0,M.pd)(p)).link,d=c?(0,M.zd)((0,M.pd)(c)).deep_link_id:null,g=(0,M.zd)((0,M.pd)(p)).deep_link_id;return(g?(0,M.zd)((0,M.pd)(g)).link:null)||g||d||c||p}(c);try{return new Pu(d)}catch{return null}}}let Ta=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return ns._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=Pu.parseLink(g);return pe(v,"argument-error"),ns._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Yn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class xr extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class bt extends xr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return pe("providerId"in d&&"signInMethod"in d,"argument-error"),Ki._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return pe(c.idToken||c.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return bt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return bt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:b,nonce:j,providerId:X}=c;if(!g&&!v&&!d&&!b||!X)return null;try{return new bt(X)._credential({idToken:d,accessToken:g,nonce:j,pendingToken:b})}catch{return null}}}let qc=(()=>{class p extends xr{constructor(){super("facebook.com")}static credential(d){return Ki._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Th=(()=>{class p extends xr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return Ki._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Dh=(()=>{class p extends xr{constructor(){super("github.com")}static credential(d){return Ki._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Gr extends Vs{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return Mo(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,Mo(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Mo(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:b}=d;return g&&v&&b&&g===v?new Gr(g,b):null}static _create(c,d){return new Gr(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xu extends Yn{constructor(c){pe(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return xu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return xu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Gr.fromJSON(c);return pe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:g}=c;if(!d||!g)return null;try{return Gr._create(g,d)}catch{return null}}}let sm=(()=>{class p extends xr{constructor(){super("twitter.com")}static credential(d,g){return Ki._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Gc(p,c){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signUp",de(p,c))})).apply(this,arguments)}class pi{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,g,v=!1){return(0,R.Z)(function*(){const b=yield k._fromIdTokenResponse(c,g,v),j=Da(g);return new pi({user:b,providerId:j,_tokenResponse:g,operationType:d})})()}static _forOperation(c,d,g){return(0,R.Z)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=Da(g);return new pi({user:c,providerId:v,_tokenResponse:g,operationType:d})})()}}function Da(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function am(p){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,R.Z)(function*(p){var c;if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=hn(p);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new pi({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Gc(d,{returnSecureToken:!0}),v=yield pi._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Kc extends M.ZR{constructor(c,d,g,v){var b;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:c.name,tenantId:null!==(b=c.tenantId)&&void 0!==b?b:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,d,g,v){return new Kc(c,d,g,v)}}function Ah(p,c,d,g){return("reauthenticate"===c?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?Kc._fromErrorAndOperation(p,b,c,g):b})}function um(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function LI(p,c){return gi.apply(this,arguments)}function gi(){return gi=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);yield Yc(!0,d,c);const{providerUserInfo:g}=yield function fi(p,c){return Zi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),v=um(g||[]);return d.providerData=d.providerData.filter(b=>v.has(b.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),gi.apply(this,arguments)}function Sh(p,c){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,R.Z)(function*(p,c,d=!1){const g=yield Yt(p,c._linkToIdToken(p.auth,yield p.getIdToken()),d);return pi._forOperation(p,"link",g)})).apply(this,arguments)}function Yc(p,c,d){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,R.Z)(function*(p,c,d){yield wn(c);const v=!1===p?"provider-already-linked":"no-such-provider";pe(um(c.providerData).has(d)===p,c.auth,v)})).apply(this,arguments)}function cm(p,c){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,R.Z)(function*(p,c,d=!1){const{auth:g}=p;if((0,De._isFirebaseServerApp)(g.app))return Promise.reject(Ft(g));const v="reauthenticate";try{const b=yield Yt(p,Ah(g,v,c,p),d);pe(b.idToken,g,"internal-error");const j=Yo(b.idToken);pe(j,g,"internal-error");const{sub:X}=j;return pe(p.uid===X,g,"user-mismatch"),pi._forOperation(p,v,b)}catch(b){throw"auth/user-not-found"===b?.code&&_t(g,"user-mismatch"),b}})).apply(this,arguments)}function Mh(p,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,R.Z)(function*(p,c,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g="signIn",v=yield Ah(p,g,c),b=yield pi._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(b.user)),b})).apply(this,arguments)}function Jc(p,c){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,R.Z)(function*(p,c){return Mh(hn(p),c)})).apply(this,arguments)}function Nr(p,c){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);return yield Yc(!1,d,c.providerId),Sh(d,c)})).apply(this,arguments)}function lm(p,c){return kh.apply(this,arguments)}function kh(){return(kh=(0,R.Z)(function*(p,c){return cm((0,M.m9)(p),c)})).apply(this,arguments)}function Fh(){return(Fh=(0,R.Z)(function*(p,c){return Ue(p,"POST","/v1/accounts:signInWithCustomToken",de(p,c))})).apply(this,arguments)}function dm(p,c){return Je.apply(this,arguments)}function Je(){return Je=(0,R.Z)(function*(p,c){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const d=hn(p),g=yield function Jn(p,c){return Fh.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),v=yield pi._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Je.apply(this,arguments)}class sr{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?Tt._fromServerResponse(c,d):"totpInfo"in d?Xn._fromServerResponse(c,d):_t(c,"internal-error")}}class Tt extends sr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new Tt(d)}}class Xn extends sr{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new Xn(d)}}function ar(p,c,d){var g;pe((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),pe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(pe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(pe(d.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function os(p){return Or.apply(this,arguments)}function Or(){return(Or=(0,R.Z)(function*(p){const c=hn(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function hm(p,c,d){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,R.Z)(function*(p,c,d){const g=hn(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&ar(g,v,d),yield Vc(g,v,"getOobCode",vh)})).apply(this,arguments)}function el(p,c,d){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,R.Z)(function*(p,c,d){yield em((0,M.m9)(p),{oobCode:c,newPassword:d}).catch(function(){var g=(0,R.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&os(p),v});return function(v){return g.apply(this,arguments)}}())}),Vh.apply(this,arguments)}function UI(p,c){return fn.apply(this,arguments)}function fn(){return fn=(0,R.Z)(function*(p,c){yield function hA(p,c){return Wt.apply(this,arguments)}((0,M.m9)(p),{oobCode:c})}),fn.apply(this,arguments)}function Ne(p,c){return it.apply(this,arguments)}function it(){return(it=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p),g=yield em(d,{oobCode:c}),v=g.requestType;switch(pe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(g.mfaInfo,d,"internal-error");default:pe(g.email,d,"internal-error")}let b=null;return g.mfaInfo&&(b=sr._fromServerResponse(hn(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:b},operation:v}})).apply(this,arguments)}function pn(p,c){return mi.apply(this,arguments)}function mi(){return(mi=(0,R.Z)(function*(p,c){const{data:d}=yield Ne((0,M.m9)(p),c);return d.email})).apply(this,arguments)}function Nu(p,c,d){return ur.apply(this,arguments)}function ur(){return(ur=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=hn(p),j=yield Vc(g,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gc).catch(ge=>{throw"auth/password-does-not-meet-requirements"===ge.code&&os(p),ge}),X=yield pi._fromIdTokenResponse(g,"signIn",j);return yield g._updateCurrentUser(X.user),X})).apply(this,arguments)}function Aa(p,c,d){return(0,De._isFirebaseServerApp)(p.app)?Promise.reject(Ft(p)):Jc((0,M.m9)(p),Ta.credential(c,d)).catch(function(){var g=(0,R.Z)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&os(p),v});return function(v){return g.apply(this,arguments)}}())}function Un(p,c,d){return ao.apply(this,arguments)}function ao(){return(ao=(0,R.Z)(function*(p,c,d){const g=hn(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function b(j,X){pe(X.handleCodeInApp,g,"argument-error"),X&&ar(g,j,X)})(v,d),yield Vc(g,v,"getOobCode",Eh)})).apply(this,arguments)}function Sa(p,c){const d=Pu.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}function ot(p,c,d){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=(0,M.m9)(p),v=Ta.credentialWithLink(c,d||In());return pe(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),Jc(g,v)})).apply(this,arguments)}function ss(){return(ss=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:createAuthUri",de(p,c))})).apply(this,arguments)}function Bn(p,c){return Us.apply(this,arguments)}function Us(){return Us=(0,R.Z)(function*(p,c){const g={identifier:c,continueUri:li()?In():"http://localhost"},{signinMethods:v}=yield function fm(p,c){return ss.apply(this,arguments)}((0,M.m9)(p),g);return v||[]}),Us.apply(this,arguments)}function Ra(p,c){return Oi.apply(this,arguments)}function Oi(){return Oi=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&ar(d.auth,v,c);const{email:b}=yield function yh(p,c){return jc.apply(this,arguments)}(d.auth,v);b!==p.email&&(yield p.reload())}),Oi.apply(this,arguments)}function Ou(p,c,d){return tl.apply(this,arguments)}function tl(){return tl=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p),b={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};d&&ar(g.auth,b,d);const{email:j}=yield function pA(p,c){return rm.apply(this,arguments)}(g.auth,b);j!==p.email&&(yield p.reload())}),tl.apply(this,arguments)}function Yi(){return(Yi=(0,R.Z)(function*(p,c){return ie(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ku(p,c){return Bs.apply(this,arguments)}function Bs(){return Bs=(0,R.Z)(function*(p,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const g=(0,M.m9)(p),b={idToken:yield g.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},j=yield Yt(g,function as(p,c){return Yi.apply(this,arguments)}(g.auth,b));g.displayName=j.displayName||null,g.photoURL=j.photoUrl||null;const X=g.providerData.find(({providerId:ge})=>"password"===ge);X&&(X.displayName=g.displayName,X.photoURL=g.photoURL),yield g._updateTokensIfNecessary(j)}),Bs.apply(this,arguments)}function yt(p,c){const d=(0,M.m9)(p);return(0,De._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ft(d.auth)):nl(d,c,null)}function mA(p,c){return nl((0,M.m9)(p),null,c)}function nl(p,c,d){return rl.apply(this,arguments)}function rl(){return rl=(0,R.Z)(function*(p,c,d){const{auth:g}=p,b={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(b.email=c),d&&(b.password=d);const j=yield Yt(p,function _h(p,c){return Bc.apply(this,arguments)}(g,b));yield p._updateTokensIfNecessary(j,!0)}),rl.apply(this,arguments)}class xo{constructor(c,d,g={}){this.isNewUser=c,this.providerId=d,this.profile=g}}class $s extends xo{constructor(c,d,g,v){super(c,d,g),this.username=v}}class Fu extends xo{constructor(c,d){super(c,"facebook.com",d)}}class fr extends $s{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class _A extends xo{constructor(c,d){super(c,"google.com",d)}}class Wr extends $s{constructor(c,d,g){super(c,"twitter.com",d,g)}}function kr(p){const{user:c,_tokenResponse:d}=p;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function uo(p){var c,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},b=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const j=null===(d=null===(c=Yo(p.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(j)return new xo(b,"anonymous"!==j&&"custom"!==j?j:null)}if(!g)return null;switch(g){case"facebook.com":return new Fu(b,v);case"github.com":return new fr(b,v);case"google.com":return new _A(b,v);case"twitter.com":return new Wr(b,v,p.screenName||null);case"custom":case"anonymous":return new xo(b,null);default:return new xo(b,g,v)}}(d)}class Ma{constructor(c,d,g){this.type=c,this.credential=d,this.user=g}static _fromIdtoken(c,d){return new Ma("enroll",c,d)}static _fromMfaPendingCredential(c){return new Ma("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,g;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ma._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Ma._fromIdtoken(c.multiFactorSession.idToken)}return null}}class mm{constructor(c,d,g){this.session=c,this.hints=d,this.signInResolver=g}static _fromError(c,d){const g=hn(c),v=d.customData._serverResponse,b=(v.mfaInfo||[]).map(X=>sr._fromServerResponse(g,X));pe(v.mfaPendingCredential,g,"internal-error");const j=Ma._fromMfaPendingCredential(v.mfaPendingCredential);return new mm(j,b,function(){var X=(0,R.Z)(function*(ge){const ke=yield ge._process(g,j);delete v.mfaInfo,delete v.mfaPendingCredential;const Ge=Object.assign(Object.assign({},v),{idToken:ke.idToken,refreshToken:ke.refreshToken});switch(d.operationType){case"signIn":const vt=yield pi._fromIdTokenResponse(g,d.operationType,Ge);return yield g._updateCurrentUser(vt.user),vt;case"reauthenticate":return pe(d.user,g,"internal-error"),pi._forOperation(d.user,d.operationType,Ge);default:_t(g,"internal-error")}});return function(ge){return X.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,R.Z)(function*(){return d.signInResolver(c)})()}}function EA(p,c){var d;const g=(0,M.m9)(p),v=c;return pe(c.customData.operationType,g,"argument-error"),pe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),mm._fromError(g,v)}class _m{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>sr._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new _m(c)}getSession(){var c=this;return(0,R.Z)(function*(){return Ma._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var g=this;return(0,R.Z)(function*(){const v=c,b=yield g.getSession(),j=yield Yt(g.user,v._process(g.user.auth,b,d));return yield g.user._updateTokensIfNecessary(j),g.user.reload()})()}unenroll(c){var d=this;return(0,R.Z)(function*(){const g="string"==typeof c?c:c.uid,v=yield d.user.getIdToken();try{const b=yield Yt(d.user,function TA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:withdraw",de(p,c))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:j})=>j!==g),yield d.user._updateTokensIfNecessary(b),yield d.user.reload()}catch(b){throw b}})()}}const il=new WeakMap;function ym(p){const c=(0,M.m9)(p);return il.has(c)||il.set(c,_m._fromUser(c)),il.get(c)}const Bh="__sak";class $I{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const jI=(()=>{class p extends $I{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function DA(){const p=(0,M.z$)();return or(p)||ks(p)}()&&function ve(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),b=this.localCache[g];v!==b&&d(g,b,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((X,ge,ke)=>{this.notifyListeners(X,ke)});const v=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(v);if(d.newValue!==X)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!g)return}const b=()=>{const X=this.storage.getItem(v);!g&&this.localCache[v]===X||this.notifyListeners(v,X)},j=this.storage.getItem(v);!function G(){return(0,M.w1)()&&10===document.documentMode}()||j===d.newValue||d.newValue===d.oldValue?b():setTimeout(b,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const b of Array.from(v))b(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,b=this;return(0,R.Z)(function*(){yield v().call(b,d,g),b.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,R.Z)(function*(){const b=yield g().call(v,d);return v.localCache[d]=JSON.stringify(b),b})()}_remove(d){var g=()=>super._remove,v=this;return(0,R.Z)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),xa=(()=>{class p extends $I{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let vm=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(b=>b.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,R.Z)(function*(){const v=d,{eventId:b,eventType:j,data:X}=v.data,ge=g.handlersMap[j];if(!ge?.size)return;v.ports[0].postMessage({status:"ack",eventId:b,eventType:j});const ke=Array.from(ge).map(function(){var vt=(0,R.Z)(function*(mr){return mr(v.origin,X)});return function(mr){return vt.apply(this,arguments)}}()),Ge=yield function ki(p){return Promise.all(p.map(function(){var c=(0,R.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return c.apply(this,arguments)}}()))}(ke);v.ports[0].postMessage({status:"done",eventId:b,eventType:j,response:Ge})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Na(p="",c=10){let d="";for(let g=0;g<c;g++)d+=Math.floor(10*Math.random());return p+d}class Im{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,g=50){var v=this;return(0,R.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let j,X;return new Promise((ge,ke)=>{const Ge=Na("",20);b.port1.start();const vt=setTimeout(()=>{ke(new Error("unsupported_event"))},g);X={messageChannel:b,onMessage(mr){const Kr=mr;if(Kr.data.eventId===Ge)switch(Kr.data.status){case"ack":clearTimeout(vt),j=setTimeout(()=>{ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),ge(Kr.data.response);break;default:clearTimeout(vt),clearTimeout(j),ke(new Error("invalid_response"))}}},v.handlers.add(X),b.port1.addEventListener("message",X.onMessage),v.target.postMessage({eventType:c,eventId:Ge,data:d},[b.port2])}).finally(()=>{X&&v.removeMessageHandler(X)})})()}}function $n(){return window}function ol(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function Vu(){return(Vu=(0,R.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hh="firebaseLocalStorageDb",cs="firebaseLocalStorage",Hs="fbase_key";class Oa{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function zh(p,c){return p.transaction([cs],c?"readwrite":"readonly").objectStore(cs)}function Cm(){const p=indexedDB.open(Hh,1);return new Promise((c,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(cs,{keyPath:Hs})}catch(v){d(v)}}),p.addEventListener("success",(0,R.Z)(function*(){const g=p.result;g.objectStoreNames.contains(cs)?c(g):(g.close(),yield function AA(){const p=indexedDB.deleteDatabase(Hh);return new Oa(p).toPromise()}(),c(yield Cm()))}))})}function bm(p,c,d){return qh.apply(this,arguments)}function qh(){return(qh=(0,R.Z)(function*(p,c,d){const g=zh(p,!0).put({[Hs]:c,value:d});return new Oa(g).toPromise()})).apply(this,arguments)}function al(){return(al=(0,R.Z)(function*(p,c){const d=zh(p,!1).get(c),g=yield new Oa(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function ul(p,c){const d=zh(p,!0).delete(c);return new Oa(d).toPromise()}const zI=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,R.Z)(function*(){return d.db||(d.db=yield Cm()),d.db})()}_withRetries(d){var g=this;return(0,R.Z)(function*(){let v=0;for(;;)try{const b=yield g._openDb();return yield d(b)}catch(b){if(v++>3)throw b;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,R.Z)(function*(){return ol()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,R.Z)(function*(){d.receiver=vm._getInstance(function wm(){return ol()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,R.Z)(function*(v,b){return{keyProcessed:(yield d._poll()).includes(b.key)}});return function(v,b){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,R.Z)(function*(v,b){return["keyChanged"]});return function(v,b){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,R.Z)(function*(){var g,v;if(d.activeServiceWorker=yield function jh(){return Vu.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Im(d.activeServiceWorker);const b=yield d.sender._send("ping",{},800);b&&null!==(g=b[0])&&void 0!==g&&g.fulfilled&&null!==(v=b[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,R.Z)(function*(){if(g.sender&&g.activeServiceWorker&&function Em(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,R.Z)(function*(){try{if(!indexedDB)return!1;const d=yield Cm();return yield bm(d,Bh,"1"),yield ul(d,Bh),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,R.Z)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,R.Z)(function*(){return v._withPendingWrite((0,R.Z)(function*(){return yield v._withRetries(b=>bm(b,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,R.Z)(function*(){const v=yield g._withRetries(b=>function SA(p,c){return al.apply(this,arguments)}(b,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,R.Z)(function*(){return g._withPendingWrite((0,R.Z)(function*(){return yield g._withRetries(v=>ul(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,R.Z)(function*(){const g=yield d._withRetries(j=>{const X=zh(j,!1).getAll();return new Oa(X).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],b=new Set;if(0!==g.length)for(const{fbase_key:j,value:X}of g)b.add(j),JSON.stringify(d.localCache[j])!==JSON.stringify(X)&&(d.notifyListeners(j,X),v.push(j));for(const j of Object.keys(d.localCache))d.localCache[j]&&!b.has(j)&&(d.notifyListeners(j,null),v.push(j));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const b of Array.from(v))b(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,R.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),cl=1e12;class Am{constructor(c){this.auth=c,this.counter=cl,this._widgets=new Map}render(c,d){const g=this.counter;return this._widgets.set(g,new ZI(c,this.auth.name,d||{})),this.counter++,g}reset(c){var d;const g=c||cl;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(c){var d;return(null===(d=this._widgets.get(c||cl))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,R.Z)(function*(){var g;return null===(g=d._widgets.get(c||cl))||void 0===g||g.execute(),""})()}}class ZI{constructor(c,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;pe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Sm(p){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wh=Yg("rcb"),RA=new Ri(3e4,6e4);class KI{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=$n().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return pe(function Fi(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Rn($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((g,v)=>{const b=$n().setTimeout(()=>{v(Bt(c,"network-request-failed"))},RA.get());$n()[Wh]=()=>{$n().clearTimeout(b),delete $n()[Wh];const X=$n().grecaptcha;if(!X||!Rn(X))return void v(Bt(c,"internal-error"));const ge=X.render;X.render=(ke,Ge)=>{const vt=ge(ke,Ge);return this.counter++,vt},this.hostLanguage=d,g(X)},Qg(`${function uA(){return Fc.recaptchaV2Script}()}?${(0,M.xO)({onload:Wh,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(b),v(Bt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=$n().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rm{load(c){return(0,R.Z)(function*(){return new Am(c)})()}clearedOneInstance(){}}const Pm="recaptcha",QI={theme:"light",type:"image"};class Mm{constructor(c,d,g=Object.assign({},QI)){this.parameters=g,this.type=Pm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(c),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;pe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rm:new KI,this.validateStartingState()}verify(){var c=this;return(0,R.Z)(function*(){c.assertNotDestroyed();const d=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(d)||new Promise(b=>{const j=X=>{X&&(c.tokenChangeListeners.delete(j),b(X))};c.tokenChangeListeners.add(j),c.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof c)c(d);else if("string"==typeof c){const g=$n()[c];"function"==typeof g&&g(d)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,R.Z)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,R.Z)(function*(){pe(li()&&!ol(),c.auth,"internal-error"),yield function xm(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function To(p){return Wi.apply(this,arguments)}(c.auth);pe(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zh{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Qi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function Kh(p,c,d){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=hn(p),v=yield ka(g,c,(0,M.m9)(d));return new Zh(v,b=>Jc(g,b))})).apply(this,arguments)}function co(p,c,d){return ll.apply(this,arguments)}function ll(){return(ll=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);yield Yc(!1,g,"phone");const v=yield ka(g.auth,c,(0,M.m9)(d));return new Zh(v,b=>Nr(g,b))})).apply(this,arguments)}function Nm(p,c,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));const v=yield ka(g.auth,c,(0,M.m9)(d));return new Zh(v,b=>lm(g,b))})).apply(this,arguments)}function ka(p,c,d){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,R.Z)(function*(p,c,d){var g;const v=yield d.verify();try{let b;if(pe("string"==typeof v,p,"argument-error"),pe(d.type===Pm,p,"argument-error"),b="string"==typeof c?{phoneNumber:c}:c,"session"in b){const j=b.session;if("phoneNumber"in b)return pe("enroll"===j.type,p,"internal-error"),(yield function wA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:start",de(p,c))}(p,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{pe("signin"===j.type,p,"internal-error");const X=(null===(g=b.multiFactorHint)||void 0===g?void 0:g.uid)||b.multiFactorUid;return pe(X,p,"missing-multi-factor-info"),(yield function qI(p,c){return ie(p,"POST","/v2/accounts/mfaSignIn:start",de(p,c))}(p,{mfaPendingCredential:j.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield function ba(p,c){return Ch.apply(this,arguments)}(p,{phoneNumber:b.phoneNumber,recaptchaToken:v});return j}}finally{d._reset()}}),Fa.apply(this,arguments)}function Zr(p,c){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,R.Z)(function*(p,c){const d=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ft(d.auth));yield Sh(d,c)})).apply(this,arguments)}let Om=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=hn(d)}verifyPhoneNumber(d,g){return ka(this.auth,d,(0,M.m9)(g))}static credential(d,g){return Qi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Qi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Vi(p,c){return c?Re(c):(pe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Fr extends Vs{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Mo(c,this._buildIdpRequest())}_linkToIdToken(c,d){return Mo(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return Mo(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function YI(p){return Mh(p.auth,new Fr(p),p.bypassAuthState)}function JI(p){const{auth:c,user:d}=p;return pe(d,c,"internal-error"),cm(d,new Fr(p),p.bypassAuthState)}function XI(p){return lo.apply(this,arguments)}function lo(){return(lo=(0,R.Z)(function*(p){const{auth:c,user:d}=p;return pe(d,c,"internal-error"),Sh(d,new Fr(p),p.bypassAuthState)})).apply(this,arguments)}class Jh{constructor(c,d,g,v,b=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,R.Z)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(b){c.reject(b)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,R.Z)(function*(){const{urlResponse:g,sessionId:v,postBody:b,tenantId:j,error:X,type:ge}=c;if(X)return void d.reject(X);const ke={auth:d.auth,requestUri:g,sessionId:v,tenantId:j||void 0,postBody:b||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(ge)(ke))}catch(Ge){d.reject(Ge)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return YI;case"linkViaPopup":case"linkViaRedirect":return XI;case"reauthViaPopup":case"reauthViaRedirect":return JI;default:_t(this.auth,"internal-error")}}resolve(c){Kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const eE=new Ri(2e3,1e4);function km(p,c,d){return dl.apply(this,arguments)}function dl(){return(dl=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Bt(p,"operation-not-supported-in-this-environment"));const g=hn(p);ut(p,c,Yn);const v=Vi(g,d);return new Vm(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function Fm(p,c,d){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if((0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(Bt(g.auth,"operation-not-supported-in-this-environment"));ut(g.auth,c,Yn);const v=Vi(g.auth,d);return new Vm(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function Xe(p,c,d){return hl.apply(this,arguments)}function hl(){return(hl=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);ut(g.auth,c,Yn);const v=Vi(g.auth,d);return new Vm(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let Vm=(()=>{class p extends Jh{constructor(d,g,v,b,j){super(d,g,b,j),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,R.Z)(function*(){const g=yield d.execute();return pe(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,R.Z)(function*(){Kt(1===d.filter.length,"Popup operations only handle one event");const g=Na();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Bt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,eE.get())};d()}}return p.currentPopupAction=null,p})();const tE="pendingRedirect",Lu=new Map;class nE extends Jh{constructor(c,d,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,R.Z)(function*(){let g=Lu.get(d.auth._key());if(!g){try{const b=(yield function Lm(p,c){return ls.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;g=()=>Promise.resolve(b)}catch(v){g=()=>Promise.reject(v)}Lu.set(d.auth._key(),g)}return d.bypassAuthState||Lu.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,g=this;return(0,R.Z)(function*(){if("signInViaRedirect"===c.type)return d().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,d().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,R.Z)(function*(){})()}cleanUp(){}}function ls(){return(ls=(0,R.Z)(function*(p,c){const d=me(c),g=Bm(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function ef(p,c){return tf.apply(this,arguments)}function tf(){return(tf=(0,R.Z)(function*(p,c){return Bm(p)._set(me(c),"true")})).apply(this,arguments)}function rE(){Lu.clear()}function Um(p,c){Lu.set(p._key(),c)}function Bm(p){return Re(p._redirectPersistence)}function me(p){return At(tE,p.config.apiKey,p.name)}function Rt(p,c,d){return function zs(p,c,d){return No.apply(this,arguments)}(p,c,d)}function No(){return(No=(0,R.Z)(function*(p,c,d){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=hn(p);ut(p,c,Yn),yield g._initializationPromise;const v=Vi(g,d);return yield ef(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function pr(p,c,d){return function $m(p,c,d){return qs.apply(this,arguments)}(p,c,d)}function qs(){return(qs=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);if(ut(g.auth,c,Yn),(0,De._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth));yield g.auth._initializationPromise;const v=Vi(g.auth,d);yield ef(v,g.auth);const b=yield fo(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",b)})).apply(this,arguments)}function ho(p,c,d){return function nf(p,c,d){return Uu.apply(this,arguments)}(p,c,d)}function Uu(){return(Uu=(0,R.Z)(function*(p,c,d){const g=(0,M.m9)(p);ut(g.auth,c,Yn),yield g.auth._initializationPromise;const v=Vi(g.auth,d);yield Yc(!1,g,c.providerId),yield ef(v,g.auth);const b=yield fo(g);return v._openRedirect(g.auth,c,"linkViaRedirect",b)})).apply(this,arguments)}function iE(p,c){return jm.apply(this,arguments)}function jm(){return(jm=(0,R.Z)(function*(p,c){return yield hn(p)._initializationPromise,fl(p,c,!1)})).apply(this,arguments)}function fl(p,c){return gr.apply(this,arguments)}function gr(){return(gr=(0,R.Z)(function*(p,c,d=!1){if((0,De._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p));const g=hn(p),v=Vi(g,c),j=yield new nE(g,v,d).execute();return j&&!d&&(delete j.user._redirectEventId,yield g._persistUserIfCurrent(j.user),yield g._setRedirectUser(null,c)),j})).apply(this,arguments)}function fo(p){return pl.apply(this,arguments)}function pl(){return(pl=(0,R.Z)(function*(p){const c=Na(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class po{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(d=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function oE(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rf(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var g;if(c.error&&!rf(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Bt(this.auth,v))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const g=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hm(c))}saveEventToCache(c){this.cachedEventUids.add(Hm(c)),this.lastProcessedEventTime=Date.now()}}function Hm(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function rf({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function zm(p){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,R.Z)(function*(p,c={}){return ie(p,"GET","/v1/projects",c)})).apply(this,arguments)}const sf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qm=/^https?/;function uf(){return(uf=(0,R.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield zm(p);for(const d of c)try{if(Gm(d))return}catch{}_t(p,"unauthorized-domain")})).apply(this,arguments)}function Gm(p){const c=In(),{protocol:d,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const j=new URL(p);return""===j.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&j.hostname===g}if(!qm.test(d))return!1;if(sf.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const cf=new Ri(3e4,6e4);function lf(){const p=$n().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let $u=null;const df=new Ri(5e3,15e3),sE="__/auth/iframe",aE="emulator/auth/iframe",Vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cn(p){const c=p.config;pe(c.authDomain,p,"auth-domain-config-required");const d=c.emulator?te(c,aE):`https://${p.config.authDomain}/${sE}`,g={apiKey:c.apiKey,appName:p.name,v:De.SDK_VERSION},v=Gs.get(p.config.apiHost);v&&(g.eid=v);const b=p._getFrameworks();return b.length&&(g.fw=b.join(",")),`${d}?${(0,M.xO)(g).slice(1)}`}function hf(){return hf=(0,R.Z)(function*(p){const c=yield function Zm(p){return $u=$u||function Wm(p){return new Promise((c,d)=>{var g,v,b;function j(){lf(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{lf(),d(Bt(p,"network-request-failed"))},timeout:cf.get()})}if(null!==(v=null===(g=$n().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(b=$n().gapi)||void 0===b||!b.load){const X=Yg("iframefcb");return $n()[X]=()=>{gapi.load?j():d(Bt(p,"network-request-failed"))},Qg(`${function cA(){return Fc.gapiScript}()}?onload=${X}`).catch(ge=>d(ge))}j()}}).catch(c=>{throw $u=null,c})}(p),$u}(p),d=$n().gapi;return pe(d,p,"internal-error"),c.open({where:document.body,url:Cn(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vr,dontclear:!0},g=>new Promise(function(){var v=(0,R.Z)(function*(b,j){yield g.restyle({setHideOnLeave:!1});const X=Bt(p,"network-request-failed"),ge=$n().setTimeout(()=>{j(X)},df.get());function ke(){$n().clearTimeout(ge),b(g)}g.ping(ke).then(ke,()=>{j(X)})});return function(b,j){return v.apply(this,arguments)}}()))}),hf.apply(this,arguments)}const cE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Oo{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _l="__/auth/handler",yl="emulator/auth/handler",ff=encodeURIComponent("fac");function vl(p,c,d,g,v,b){return Il.apply(this,arguments)}function Il(){return(Il=(0,R.Z)(function*(p,c,d,g,v,b){pe(p.config.authDomain,p,"auth-domain-config-required"),pe(p.config.apiKey,p,"invalid-api-key");const j={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:De.SDK_VERSION,eventId:v};if(c instanceof Yn){c.setDefaultLanguage(p.languageCode),j.providerId=c.providerId||"",(0,M.xb)(c.getCustomParameters())||(j.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Ge,vt]of Object.entries(b||{}))j[Ge]=vt}if(c instanceof xr){const Ge=c.getScopes().filter(vt=>""!==vt);Ge.length>0&&(j.scopes=Ge.join(","))}p.tenantId&&(j.tid=p.tenantId);const X=j;for(const Ge of Object.keys(X))void 0===X[Ge]&&delete X[Ge];const ge=yield p._getAppCheckToken(),ke=ge?`#${ff}=${encodeURIComponent(ge)}`:"";return`${function hE({config:p}){return p.emulator?te(p,yl):`https://${p.authDomain}/${_l}`}(p)}?${(0,M.xO)(X).slice(1)}${ke}`})).apply(this,arguments)}const ds="webStorageSupport",Ym=class ju{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xa,this._completeRedirectFn=fl,this._overrideRedirectResult=Um}_openPopup(c,d,g,v){var b=this;return(0,R.Z)(function*(){var j;Kt(null===(j=b.eventManagers[c._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const X=yield vl(c,d,g,In(),v);return function dE(p,c,d,g=500,v=600){const b=Math.max((window.screen.availHeight-v)/2,0).toString(),j=Math.max((window.screen.availWidth-g)/2,0).toString();let X="";const ge=Object.assign(Object.assign({},cE),{width:g.toString(),height:v.toString(),top:b,left:j}),ke=(0,M.z$)().toLowerCase();d&&(X=Os(ke)?"_blank":d),He(ke)&&(c=c||"http://localhost",ge.scrollbars="yes");const Ge=Object.entries(ge).reduce((mr,[Kr,Cl])=>`${mr}${Kr}=${Cl},`,"");if(function x(p=(0,M.z$)()){var c;return ks(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ke)&&"_self"!==X)return function ml(p,c){const d=document.createElement("a");d.href=p,d.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(c||"",X),new Oo(null);const vt=window.open(c||"",X,Ge);pe(vt,p,"popup-blocked");try{vt.focus()}catch{}return new Oo(vt)}(c,X,Na())})()}_openRedirect(c,d,g,v){var b=this;return(0,R.Z)(function*(){return yield b._originValidation(c),function $h(p){$n().location.href=p}(yield vl(c,d,g,In(),v)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:v,promise:b}=this.eventManagers[d];return v?Promise.resolve(v):(Kt(b,"If manager is not set, promise should be"),b)}const g=this.initAndGetManager(c);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(c){var d=this;return(0,R.Z)(function*(){const g=yield function uE(p){return hf.apply(this,arguments)}(c),v=new po(c);return g.register("authEvent",b=>(pe(b?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:v},d.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(ds,{type:ds},v=>{var b;const j=null===(b=v?.[0])||void 0===b?void 0:b[ds];void 0!==j&&d(!!j),_t(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function af(p){return uf.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return K()||or()||ks()}};class PA{constructor(c){this.factorId=c}_process(c,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,g);case"signin":return this._finalizeSignIn(c,d.credential);default:return un("unexpected MultiFactorSessionType")}}}class Hu extends PA{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Hu(c)}_finalizeEnroll(c,d,g){return function CA(p,c){return ie(p,"POST","/v2/accounts/mfaEnrollment:finalize",de(p,c))}(c,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function Tm(p,c){return ie(p,"POST","/v2/accounts/mfaSignIn:finalize",de(p,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let MA=(()=>{class p{constructor(){}static assertion(d){return Hu._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var El="@firebase/auth";class pE{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,R.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.Pz)("authIdTokenMaxAge"),function aA(p){Fc=p}({loadJS:p=>new Promise((c,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const b=Bt("internal-error");b.customData=v,d(b)},g.type="text/javascript",g.charset="UTF-8",function go(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function mf(p){(0,De._registerComponent)(new yn.wA("auth",(c,{options:d})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),b=c.getProvider("app-check-internal"),{apiKey:j,authDomain:X}=g.options;pe(j&&!j.includes(":"),"invalid-api-key",{appName:g.name});const ge={apiKey:j,authDomain:X,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rt(p)},ke=new Fs(g,v,b,ge);return function OI(p,c){const d=c?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Re);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(ke,d),ke},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,g)=>{c.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new yn.wA("auth-internal",c=>{const d=hn(c.getProvider("auth").getImmediate());return new pE(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(El,"1.7.4",function zu(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,De.registerVersion)(El,"1.7.4","esm2017")}("Browser")},58:(so,Zn,Ze)=>{Ze.d(Zn,{BH:()=>zr,G6:()=>Ri,L:()=>St,LL:()=>ie,P0:()=>vn,Pz:()=>Bt,Sg:()=>Ft,UG:()=>pe,ZB:()=>je,ZR:()=>de,aH:()=>_t,b$:()=>In,eu:()=>re,hl:()=>te,jU:()=>un,m9:()=>Po,ne:()=>Rr,pd:()=>fi,r3:()=>Rn,ru:()=>Kt,tV:()=>fe,uI:()=>Sn,vZ:()=>Wi,w1:()=>di,xO:()=>Qo,xb:()=>hr,z$:()=>ut,zd:()=>Do});const $e=function(L){const O=[];let C=0;for(let A=0;A<L.length;A++){let w=L.charCodeAt(A);w<128?O[C++]=w:w<2048?(O[C++]=w>>6|192,O[C++]=63&w|128):55296==(64512&w)&&A+1<L.length&&56320==(64512&L.charCodeAt(A+1))?(w=65536+((1023&w)<<10)+(1023&L.charCodeAt(++A)),O[C++]=w>>18|240,O[C++]=w>>12&63|128,O[C++]=w>>6&63|128,O[C++]=63&w|128):(O[C++]=w>>12|224,O[C++]=w>>6&63|128,O[C++]=63&w|128)}return O},yn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,O){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const C=O?this.byteToCharMapWebSafe_:this.byteToCharMap_,A=[];for(let w=0;w<L.length;w+=3){const k=L[w],le=w+1<L.length,Re=le?L[w+1]:0,Ve=w+2<L.length,et=Ve?L[w+2]:0;let $t=(15&Re)<<2|et>>6,He=63&et;Ve||(He=64,le||($t=64)),A.push(C[k>>2],C[(3&k)<<4|Re>>4],C[$t],C[He])}return A.join("")},encodeString(L,O){return this.HAS_NATIVE_SUPPORT&&!O?btoa(L):this.encodeByteArray($e(L),O)},decodeString(L,O){return this.HAS_NATIVE_SUPPORT&&!O?atob(L):function(L){const O=[];let C=0,A=0;for(;C<L.length;){const w=L[C++];if(w<128)O[A++]=String.fromCharCode(w);else if(w>191&&w<224){const k=L[C++];O[A++]=String.fromCharCode((31&w)<<6|63&k)}else if(w>239&&w<365){const Ve=((7&w)<<18|(63&L[C++])<<12|(63&L[C++])<<6|63&L[C++])-65536;O[A++]=String.fromCharCode(55296+(Ve>>10)),O[A++]=String.fromCharCode(56320+(1023&Ve))}else{const k=L[C++],le=L[C++];O[A++]=String.fromCharCode((15&w)<<12|(63&k)<<6|63&le)}}return O.join("")}(this.decodeStringToByteArray(L,O))},decodeStringToByteArray(L,O){this.init_();const C=O?this.charToByteMapWebSafe_:this.charToByteMap_,A=[];for(let w=0;w<L.length;){const k=C[L.charAt(w++)],Re=w<L.length?C[L.charAt(w)]:0;++w;const et=w<L.length?C[L.charAt(w)]:64;++w;const Pe=w<L.length?C[L.charAt(w)]:64;if(++w,null==k||null==Re||null==et||null==Pe)throw new Fn;A.push(k<<2|Re>>4),64!==et&&(A.push(Re<<4&240|et>>2),64!==Pe&&A.push(et<<6&192|Pe))}return A},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class Fn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(L){return function(L){const O=$e(L);return yn.encodeByteArray(O,!0)}(L).replace(/\./g,"")},fe=function(L){try{return yn.decodeString(L,!0)}catch(O){console.error("base64Decode failed: ",O)}return null};function je(L,O){if(!(O instanceof Object))return O;switch(O.constructor){case Date:return new Date(O.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return O}for(const C in O)!O.hasOwnProperty(C)||!at(C)||(L[C]=je(L[C],O[C]));return L}function at(L){return"__proto__"!==L}const nt=()=>{try{return function Nt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const L=process.env.__FIREBASE_DEFAULTS__;return L?JSON.parse(L):void 0})()||(()=>{if(typeof document>"u")return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const O=L&&fe(L[1]);return O&&JSON.parse(O)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},vn=L=>{const O=(L=>{var O,C;return null===(C=null===(O=nt())||void 0===O?void 0:O.emulatorHosts)||void 0===C?void 0:C[L]})(L);if(!O)return;const C=O.lastIndexOf(":");if(C<=0||C+1===O.length)throw new Error(`Invalid host ${O} with no separate hostname and port!`);const A=parseInt(O.substring(C+1),10);return"["===O[0]?[O.substring(1,C-1),A]:[O.substring(0,C),A]},_t=()=>{var L;return null===(L=nt())||void 0===L?void 0:L.config},Bt=L=>{var O;return null===(O=nt())||void 0===O?void 0:O[`_${L}`]};class zr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((O,C)=>{this.resolve=O,this.reject=C})}wrapCallback(O){return(C,A)=>{C?this.reject(C):this.resolve(A),"function"==typeof O&&(this.promise.catch(()=>{}),1===O.length?O(C):O(C,A))}}}function Ft(L,O){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const A=O||"demo-project",w=L.iat||0,k=L.sub||L.user_id;if(!k)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const le=Object.assign({iss:`https://securetoken.google.com/${A}`,aud:A,iat:w,exp:w+3600,auth_time:w,sub:k,user_id:k,firebase:{sign_in_provider:"custom",identities:{}}},L);return[St(JSON.stringify({alg:"none",type:"JWT"})),St(JSON.stringify(le)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Sn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function pe(){var L;const O=null===(L=nt())||void 0===L?void 0:L.forceEnvironment;if("node"===O)return!0;if("browser"===O)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function un(){return"object"==typeof self&&self.self===self}function Kt(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function In(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function di(){const L=ut();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ri(){return!pe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function re(){return new Promise((L,O)=>{try{let C=!0;const A="validate-browser-context-for-indexeddb-analytics-module",w=self.indexedDB.open(A);w.onsuccess=()=>{w.result.close(),C||self.indexedDB.deleteDatabase(A),L(!0)},w.onupgradeneeded=()=>{C=!1},w.onerror=()=>{var k;O((null===(k=w.error)||void 0===k?void 0:k.message)||"")}}catch(C){O(C)}})}class de extends Error{constructor(O,C,A){super(C),this.code=O,this.customData=A,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ie.prototype.create)}}class ie{constructor(O,C,A){this.service=O,this.serviceName=C,this.errors=A}create(O,...C){const A=C[0]||{},w=`${this.service}/${O}`,k=this.errors[O],le=k?function Me(L,O){return L.replace(wt,(C,A)=>{const w=O[A];return null!=w?String(w):`<${A}?>`})}(k,A):"Error";return new de(w,`${this.serviceName}: ${le} (${w}).`,A)}}const wt=/\{\$([^}]+)}/g;function Rn(L,O){return Object.prototype.hasOwnProperty.call(L,O)}function hr(L){for(const O in L)if(Object.prototype.hasOwnProperty.call(L,O))return!1;return!0}function Wi(L,O){if(L===O)return!0;const C=Object.keys(L),A=Object.keys(O);for(const w of C){if(!A.includes(w))return!1;const k=L[w],le=O[w];if(kt(k)&&kt(le)){if(!Wi(k,le))return!1}else if(k!==le)return!1}for(const w of A)if(!C.includes(w))return!1;return!0}function kt(L){return null!==L&&"object"==typeof L}function Qo(L){const O=[];for(const[C,A]of Object.entries(L))Array.isArray(A)?A.forEach(w=>{O.push(encodeURIComponent(C)+"="+encodeURIComponent(w))}):O.push(encodeURIComponent(C)+"="+encodeURIComponent(A));return O.length?"&"+O.join("&"):""}function Do(L){const O={};return L.replace(/^\?/,"").split("&").forEach(A=>{if(A){const[w,k]=A.split("=");O[decodeURIComponent(w)]=decodeURIComponent(k)}}),O}function fi(L){const O=L.indexOf("?");if(!O)return"";const C=L.indexOf("#",O);return L.substring(O,C>0?C:void 0)}function Rr(L,O){const C=new Pr(L,O);return C.subscribe.bind(C)}class Pr{constructor(O,C){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=C,this.task.then(()=>{O(this)}).catch(A=>{this.error(A)})}next(O){this.forEachObserver(C=>{C.next(O)})}error(O){this.forEachObserver(C=>{C.error(O)}),this.close(O)}complete(){this.forEachObserver(O=>{O.complete()}),this.close()}subscribe(O,C,A){let w;if(void 0===O&&void 0===C&&void 0===A)throw new Error("Missing Observer.");w=function Mr(L,O){if("object"!=typeof L||null===L)return!1;for(const C of O)if(C in L&&"function"==typeof L[C])return!0;return!1}(O,["next","error","complete"])?O:{next:O,error:C,complete:A},void 0===w.next&&(w.next=rn),void 0===w.error&&(w.error=rn),void 0===w.complete&&(w.complete=rn);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch{}}),this.observers.push(w),k}unsubscribeOne(O){void 0===this.observers||void 0===this.observers[O]||(delete this.observers[O],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(O){if(!this.finalized)for(let C=0;C<this.observers.length;C++)this.sendOne(C,O)}sendOne(O,C){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[O])try{C(this.observers[O])}catch(A){typeof console<"u"&&console.error&&console.error(A)}})}close(O){this.finalized||(this.finalized=!0,void 0!==O&&(this.finalError=O),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function Po(L){return L&&L._delegate?L._delegate:L}},62:(so,Zn,Ze)=>{function R(n){return"function"==typeof n}function De(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const M=De(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function $e(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class xt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(R(r))try{r()}catch(o){e=o instanceof M?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{nn(o)}catch(s){e=e??[],s instanceof M?e=[...e,...s.errors]:e.push(s)}}if(e)throw new M(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nn(e);else{if(e instanceof xt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&$e(t,e)}remove(e){const{_finalizers:t}=this;t&&$e(t,e),e instanceof xt&&e._removeParent(this)}}xt.EMPTY=(()=>{const n=new xt;return n.closed=!0,n})();const yn=xt.EMPTY;function Fn(n){return n instanceof xt||n&&"closed"in n&&R(n.remove)&&R(n.add)&&R(n.unsubscribe)}function nn(n){R(n)?n():n.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fe={setTimeout(n,e,...t){const{delegate:r}=fe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=fe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ee(n){fe.setTimeout(()=>{const{onUnhandledError:e}=St;if(!e)throw n;e(n)})}function je(){}const at=Et("C",void 0,void 0);function Et(n,e,t){return{kind:n,value:e,error:t}}let tt=null;function nt(n){if(St.useDeprecatedSynchronousErrorHandling){const e=!tt;if(e&&(tt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=tt;if(tt=null,t)throw r}}else n()}class vn extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Fn(e)&&e.add(this)):this.destination=un}static create(e,t,r){return new Ft(e,t,r)}next(e){this.isStopped?pe(function Kn(n){return Et("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?pe(function Nt(n){return Et("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pe(at,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _t=Function.prototype.bind;function Bt(n,e){return _t.call(n,e)}class zr{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ut(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ut(r)}else ut(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ut(t)}}}class Ft extends vn{constructor(e,t,r){let i;if(super(),R(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&St.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bt(e.next,o),error:e.error&&Bt(e.error,o),complete:e.complete&&Bt(e.complete,o)}):i=e}this.destination=new zr(i)}}function ut(n){St.useDeprecatedSynchronousErrorHandling?function rr(n){St.useDeprecatedSynchronousErrorHandling&&tt&&(tt.errorThrown=!0,tt.error=n)}(n):Ee(n)}function pe(n,e){const{onStoppedNotification:t}=St;t&&fe.setTimeout(()=>t(n,e))}const un={closed:!0,next:je,error:function Sn(n){throw n},complete:je},Kt="function"==typeof Symbol&&Symbol.observable||"@@observable";function In(n){return n}function di(n){return 0===n.length?In:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let lt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function te(n){return n&&n instanceof vn||function Ri(n){return n&&R(n.next)&&R(n.error)&&R(n.complete)}(n)&&Fn(n)}(t)?t:new Ft(t,r,i);return nt(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=bo(r))((i,o)=>{const s=new Ft({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Kt](){return this}pipe(...t){return di(t)(this)}toPromise(t){return new(t=bo(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function bo(n){var e;return null!==(e=n??St.Promise)&&void 0!==e?e:Promise}const re=De(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let se=(()=>{class n extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ae(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?yn:(this.currentObservers=null,o.push(t),new xt(()=>{this.currentObservers=null,$e(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new lt;return t.source=this,t}}return n.create=(e,t)=>new ae(e,t),n})();class ae extends se{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:yn}}function de(n){return R(n?.lift)}function ie(n){return e=>{if(de(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Me(n,e,t,r,i){return new wt(n,e,t,r,i)}class wt extends vn{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return ie((t,r)=>{let i=0;t.subscribe(Me(r,o=>{r.next(n.call(e,o,i++))}))})}var Ue=Ze(582);const Dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cn(n){return R(n?.then)}function hi(n){return R(n[Kt])}function Ot(n){return Symbol.asyncIterator&&R(n?.[Symbol.asyncIterator])}function Qt(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qn=function Rn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function hr(n){return R(n?.[Qn])}function To(n){return(0,Ue.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ue.qq)(t.read());if(i)return yield(0,Ue.qq)(void 0);yield yield(0,Ue.qq)(r)}}finally{t.releaseLock()}})}function Wi(n){return R(n?.getReader)}function kt(n){if(n instanceof lt)return n;if(null!=n){if(hi(n))return function Pi(n){return new lt(e=>{const t=n[Kt]();if(R(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Dt(n))return function Qo(n){return new lt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(cn(n))return function Do(n){return new lt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ee)})}(n);if(Ot(n))return Zi(n);if(hr(n))return function fi(n){return new lt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Wi(n))return function Rr(n){return Zi(To(n))}(n)}throw Qt(n)}function Zi(n){return new lt(e=>{(function Pr(n,e){var t,r,i,o;return(0,Ue.mG)(this,void 0,void 0,function*(){try{for(t=(0,Ue.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function En(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function rn(n,e,t=1/0){return R(e)?rn((r,i)=>Oe((o,s)=>e(r,o,i,s))(kt(n(r,i))),t):("number"==typeof e&&(t=e),ie((r,i)=>function Mr(n,e,t,r,i,o,s,a){const u=[];let l=0,f=0,m=!1;const y=()=>{m&&!u.length&&!l&&e.complete()},E=N=>l<r?S(N):u.push(N),S=N=>{o&&e.next(N),l++;let V=!1;kt(t(N,f++)).subscribe(Me(e,Q=>{i?.(Q),o?E(Q):e.next(Q)},()=>{V=!0},void 0,()=>{if(V)try{for(l--;u.length&&l<r;){const Q=u.shift();s?En(e,s,()=>S(Q)):S(Q)}y()}catch(Q){e.error(Q)}}))};return n.subscribe(Me(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,n,t)))}function Cr(n=1/0){return rn(In,n)}const Vn=new lt(n=>n.complete());function Mi(n){return n[n.length-1]}function So(n){return R(Mi(n))?n.pop():void 0}function Ln(n){return function Yt(n){return n&&R(n.schedule)}(Mi(n))?n.pop():void 0}function wn(n,e=0){return ie((t,r)=>{t.subscribe(Me(r,i=>En(r,n,()=>r.next(i),e),()=>En(r,n,()=>r.complete(),e),i=>En(r,n,()=>r.error(i),e)))})}function br(n,e=0){return ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Po(n,e){if(!n)throw new Error("Iterable cannot be null");return new lt(t=>{En(t,e,()=>{const r=n[Symbol.asyncIterator]();En(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function C(n,e){return e?function O(n,e){if(null!=n){if(hi(n))return function Ro(n,e){return kt(n).pipe(br(e),wn(e))}(n,e);if(Dt(n))return function Xo(n,e){return new lt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(cn(n))return function Jo(n,e){return kt(n).pipe(br(e),wn(e))}(n,e);if(Ot(n))return Po(n,e);if(hr(n))return function es(n,e){return new lt(t=>{let r;return En(t,e,()=>{r=n[Qn](),En(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}(n,e);if(Wi(n))return function L(n,e){return Po(To(n),e)}(n,e)}throw Qt(n)}(n,e):kt(n)}function A(...n){const e=Ln(n),t=function ir(n,e){return"number"==typeof Mi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?kt(r[0]):Cr(t)(C(r,e)):Vn}class w extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return C(n,Ln(n))}function le(n={}){const{connector:e=(()=>new se),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),s=u=void 0,f=m=!1},S=()=>{const N=s;E(),N?.unsubscribe()};return ie((N,V)=>{l++,!m&&!f&&y();const Q=u=u??e();V.add(()=>{l--,0===l&&!m&&!f&&(a=Re(S,i))}),Q.subscribe(V),!s&&l>0&&(s=new Ft({next:H=>Q.next(H),error:H=>{m=!0,y(),a=Re(E,t,H),Q.error(H)},complete:()=>{f=!0,y(),a=Re(E,r),Q.complete()}}),kt(N).subscribe(s))})(o)}}function Re(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Ft({next:()=>{r.unsubscribe(),n()}});return kt(e(...t)).subscribe(r)}function Ve(n,e){return ie((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Me(r,u=>{i?.unsubscribe();let l=0;const f=o++;kt(n(u,f)).subscribe(i=Me(r,m=>r.next(e?e(u,m,f,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function et(n,e=In){return n=n??At,ie((t,r)=>{let i,o=!0;t.subscribe(Me(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function At(n,e){return n===e}function Pe(n){for(let e in n)if(n[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function $t(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function or(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Os=Pe({__forward_ref__:Pe});function Ht(n){return n.__forward_ref__=Ht,n.toString=function(){return He(this())},n}function Ke(n){return wa(n)?n():n}function wa(n){return"function"==typeof n&&n.hasOwnProperty(Os)&&n.__forward_ref__===Ht}function Ca(n){return n&&!!n.\u0275providers}const kc="https://g.co/ng/security#xss";class x extends Error{constructor(e,t){super(function G(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function K(n){return"string"==typeof n?n:null==n?"":String(n)}function Gt(n,e){throw new x(-201,!1)}function Ni(n,e){null==n&&function Ye(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ze(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Pn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lc(n){return gh(n,Tu)||gh(n,Vs)}function gh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Uc(n){return n&&(n.hasOwnProperty(mh)||n.hasOwnProperty(em))?n[mh]:null}const Tu=Pe({\u0275prov:Pe}),mh=Pe({\u0275inj:Pe}),Vs=Pe({ngInjectableDef:Pe}),em=Pe({ngInjectorDef:Pe});var mt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mt||{});let _h;function qr(n){const e=_h;return _h=n,e}function $c(n,e,t){const r=Lc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&mt.Optional?null:void 0!==e?e:void Gt(He(n))}const Wt=globalThis;class be{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ze({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Au={},Su="__NG_DI_FLAG__",ns="ngTempTokenPath",wh=/\n/gm,Ki="__source";let ba;function rs(n){const e=ba;return ba=n,e}function bh(n,e=mt.Default){if(void 0===ba)throw new x(-203,!1);return null===ba?$c(n,void 0,e):ba.get(n,e&mt.Optional?null:void 0,e)}function we(n,e=mt.Default){return(function Bc(){return _h}()||bh)(Ke(n),e)}function Le(n,e=mt.Default){return we(n,zc(e))}function zc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ru(n){const e=[];for(let t=0;t<n.length;t++){const r=Ke(n[t]);if(Array.isArray(r)){if(0===r.length)throw new x(900,!1);let i,o=mt.Default;for(let s=0;s<r.length;s++){const a=r[s],u=FI(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(we(i,o))}else e.push(we(r))}return e}function Qi(n,e){return n[Su]=e,n.prototype[Su]=e,n}function FI(n){return n[Su]}function is(n){return{toString:n}.toString()}var Ta=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ta||{}),Yn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yn||{});const xr={},bt=[],qc=Pe({\u0275cmp:Pe}),Th=Pe({\u0275dir:Pe}),Dh=Pe({\u0275pipe:Pe}),om=Pe({\u0275mod:Pe}),Gr=Pe({\u0275fac:Pe}),Mu=Pe({__NG_ELEMENT_ID__:Pe}),xu=Pe({__NG_ENV_ID__:Pe});function sm(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Gc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];pi(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Wc(n){return 3===n||4===n||6===n}function pi(n){return 64===n.charCodeAt(0)}function Da(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||am(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function am(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const Zc="ng-template";function Kc(n,e,t){let r=0,i=!0;for(;r<n.length;){let o=n[r++];if("string"==typeof o&&i){const s=n[r++];if(t&&"class"===o&&-1!==sm(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;r<n.length&&"string"==typeof(o=n[r++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Ah(n){return 4===n.type&&n.value!==Zc}function um(n,e,t){return e===(4!==n.type||t?n.value:Zc)}function LI(n,e,t){let r=4;const i=n.attrs||[],o=function Rh(n){for(let e=0;e<n.length;e++)if(Wc(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!um(n,u,t)||""===u&&1===e.length){if(gi(r))return!1;s=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Kc(n.attrs,l,t)){if(gi(r))return!1;s=!0}continue}const m=Sh(8&r?"class":u,i,Ah(n),t);if(-1===m){if(gi(r))return!1;s=!0;continue}if(""!==l){let y;y=m>o?"":i[m+1].toLowerCase();const E=8&r?y:null;if(E&&-1!==sm(E,l,0)||2&r&&l!==y){if(gi(r))return!1;s=!0}}}}else{if(!s&&!gi(r)&&!gi(u))return!1;if(s&&gi(u))continue;s=!1,r=u|1&r}}return gi(r)||s}function gi(n){return 0==(1&n)}function Sh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function cm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Qc(n,e,t=!1){for(let r=0;r<e.length;r++)if(LI(n,e[r],t))return!0;return!1}function Mh(n,e){return n?":not("+e.trim()+")":e}function xh(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!gi(s)&&(e+=Mh(o,i),i=""),r=s,o=o||!gi(r);t++}return""!==i&&(e+=Mh(o,i)),e}function Nr(n){return is(()=>{const e=hm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ta.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yn.Emulated,styles:n.styles||bt,_:null,schemas:n.schemas||null,tView:null,id:""};Xc(t);const r=n.dependencies;return t.directiveDefs=el(r,!1),t.pipeDefs=el(r,!0),t.id=function UI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function lm(n){return Tt(n)||Xn(n)}function kh(n){return null!==n}function Jn(n){return is(()=>({type:n.type,bootstrap:n.bootstrap||bt,declarations:n.declarations||bt,imports:n.imports||bt,exports:n.exports||bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dm(n,e){if(null==n)return xr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}function Je(n){return is(()=>{const e=hm(n);return Xc(e),e})}function sr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Tt(n){return n[qc]||null}function Xn(n){return n[Th]||null}function ar(n){return n[Dh]||null}function Or(n,e){const t=n[om]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function hm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||xr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dm(n.inputs,e),outputs:dm(n.outputs)}}function Xc(n){n.features?.forEach(e=>e(n))}function el(n,e){if(!n)return null;const t=e?ar:lm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(kh)}const fn=0,Ne=1,it=2,pn=3,mi=4,Nu=5,ur=6,Aa=7,Un=8,ao=9,Sa=10,ot=11,Ls=12,fm=13,ss=14,Bn=15,Us=16,Ra=17,Oi=18,Ou=19,tl=20,as=21,Yi=22,ku=23,Bs=24,yt=25,nl=1,rl=2,uo=7,$s=9,fr=11;function Wr(n){return Array.isArray(n)&&"object"==typeof n[nl]}function kr(n){return Array.isArray(n)&&!0===n[nl]}function pm(n){return 0!=(4&n.flags)}function Pa(n){return n.componentOffset>-1}function Lh(n){return 1==(1&n.flags)}function _i(n){return!!n.template}function Uh(n){return 0!=(512&n[it])}function js(n,e){return n.hasOwnProperty(Gr)?n[Gr]:null}let Tr=null,xa=!1;function ki(n){const e=Tr;return Tr=n,e}const vm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Im(n){if(!cs(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Em(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ol(n){n.dirty=!0,function $n(n){if(void 0===n.liveConsumerNode)return;const e=xa;xa=!0;try{for(const t of n.liveConsumerNode)t.dirty||ol(t)}finally{xa=e}}(n),n.consumerMarkedDirty?.(n)}function jh(n){return n&&(n.nextProducerIndex=0),ki(n)}function Vu(n,e){if(ki(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(cs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Em(n){Hs(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Im(t),r!==t.version))return!0}return!1}function wm(n){if(Hs(n),cs(n))for(let e=0;e<n.producerNode.length;e++)sl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sl(n,e){if(function Oa(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Hs(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)sl(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Hs(i),i.producerIndexOfThis[r]=e}}function cs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Hs(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let al=null;function Am(n){const e=ki(null);try{return n()}finally{ki(e)}}const Sm=()=>{},Wh=(()=>({...vm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Sm}))();class KI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fi(){return Rm}function Rm(n){return n.type.prototype.ngOnChanges&&(n.setInput=QI),Pm}function Pm(){const n=xm(this),e=n?.current;if(e){const t=n.previous;if(t===xr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function QI(n,e,t,r){const i=this.declaredInputs[t],o=xm(n)||function Zh(n,e){return n[Mm]=e}(n,{previous:xr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new KI(u&&u.currentValue,e,a===xr),n[r]=e}Fi.ngInherit=!0;const Mm="__ngSimpleChanges__";function xm(n){return n[Mm]||null}const co=function(n,e,t){};function Zt(n){for(;Array.isArray(n);)n=n[fn];return n}function Fa(n,e){return Zt(e[n])}function Zr(n,e){return Zt(e[n.index])}function Om(n,e){return n.data[e]}function Fr(n,e){const t=e[n];return Wr(t)?t:t[fn]}function lo(n,e){return null==e?null:n[e]}function Jh(n){n[Ra]=0}function eE(n){1024&n[it]||(n[it]|=1024,dl(n,1))}function km(n){1024&n[it]&&(n[it]&=-1025,dl(n,-1))}function dl(n,e){let t=n[pn];if(null===t)return;t[Nu]+=e;let r=t;for(t=t[pn];null!==t&&(1===e&&1===r[Nu]||-1===e&&0===r[Nu]);)t[Nu]+=e,r=t,t=t[pn]}const Xe={lFrame:Wm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lm(){return Xe.bindingsEnabled}function me(){return Xe.lFrame.lView}function Rt(){return Xe.lFrame.tView}function zs(n){return Xe.lFrame.contextLView=n,n[Un]}function No(n){return Xe.lFrame.contextLView=null,n}function pr(){let n=$m();for(;null!==n&&64===n.type;)n=n.parent;return n}function $m(){return Xe.lFrame.currentTNode}function ho(n,e){const t=Xe.lFrame;t.currentTNode=n,t.isParent=e}function nf(){return Xe.lFrame.isParent}function Uu(){Xe.lFrame.isParent=!1}function gr(){const n=Xe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Va(){return Xe.lFrame.bindingIndex++}function oE(n,e){const t=Xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bu(e)}function Bu(n){Xe.lFrame.currentDirectiveIndex=n}function af(n){Xe.lFrame.currentQueryIndex=n}function uf(n){const e=n[Ne];return 2===e.type?e.declTNode:1===e.type?n[ur]:null}function Gm(n,e,t){if(t&mt.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&mt.Host||(i=uf(o),null===i||(o=o[ss],10&i.type))););if(null===i)return!1;e=i,n=o}const r=Xe.lFrame=lf();return r.currentTNode=e,r.lView=n,!0}function cf(n){const e=lf(),t=n[Ne];Xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lf(){const n=Xe.lFrame,e=null===n?null:n.child;return null===e?Wm(n):e}function Wm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function $u(){const n=Xe.lFrame;return Xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zm=$u;function df(){const n=$u();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vr(){return Xe.lFrame.selectedIndex}function Gs(n){Xe.lFrame.selectedIndex=n}function Cn(){const n=Xe.lFrame;return Om(n.tView,n.selectedIndex)}let Qm=!0;function gl(){return Qm}function Oo(n){Qm=n}function ml(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function _l(n,e,t){vl(n,e,3,t)}function yl(n,e,t,r){(3&n[it])===t&&vl(n,e,t,r)}function ff(n,e){let t=n[it];(3&t)===e&&(t&=8191,t+=1,n[it]=t)}function vl(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ra]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ra]+=65536),(a<o||-1==o)&&(hE(n,t,e,u),n[Ra]=(4294901760&n[Ra])+u+2),u++}function Il(n,e){co(4,n,e);const t=ki(null);try{e.call(n)}finally{ki(t),co(5,n,e)}}function hE(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[it]>>13<n[Ra]>>16&&(3&n[it])===e&&(n[it]+=8192,Il(a,o)):Il(a,o)}const ds=-1;class ju{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function El(n){return n!==ds}function La(n){return 32767&n}function zu(n,e){let t=function pE(n){return n>>16}(n),r=e;for(;t>0;)r=r[ss],t--;return r}let mf=!0;function wl(n){const e=mf;return mf=n,e}const _f=255,Jm=5;let OA=0;const go={};function c(n,e){const t=g(n,e);if(-1!==t)return t;const r=e[Ne];r.firstCreatePass&&(n.injectorIndex=e.length,d(r.data,n),d(e,null),d(r.blueprint,null));const i=v(n,e),o=n.injectorIndex;if(El(i)){const s=La(i),a=zu(i,e),u=a[Ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function d(n,e){n.push(0,0,0,0,0,0,0,0,e)}function g(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function v(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=n_(i),null===r)return ds;if(t++,i=i[ss],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ds}function b(n,e,t){!function p(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Mu)&&(r=t[Mu]),null==r&&(r=t[Mu]=OA++);const i=r&_f;e.data[n+(i>>Jm)]|=1<<i}(n,e,t)}function X(n,e,t){if(t&mt.Optional||void 0!==n)return n;Gt()}function ge(n,e,t,r){if(t&mt.Optional&&void 0===r&&(r=null),!(t&(mt.Self|mt.Host))){const i=n[ao],o=qr(void 0);try{return i?i.get(e,r,t&mt.Optional):$c(e,r,t&mt.Optional)}finally{qr(o)}}return X(r,0,t)}function ke(n,e,t,r=mt.Default,i){if(null!==n){if(2048&e[it]&&!(r&mt.Self)){const s=function t_(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[it]&&!(512&s[it]);){const a=Ge(o,s,t,r|mt.Self,go);if(a!==go)return a;let u=o.parent;if(!u){const l=s[tl];if(l){const f=l.get(t,go,r);if(f!==go)return f}u=n_(s),s=s[ss]}o=u}return i}(n,e,t,r,go);if(s!==go)return s}const o=Ge(n,e,t,r,go);if(o!==go)return o}return ge(e,t,r,i)}function Ge(n,e,t,r,i){const o=function Cl(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Mu)?n[Mu]:void 0;return"number"==typeof e?e>=0?e&_f:e_:e}(t);if("function"==typeof o){if(!Gm(e,n,r))return r&mt.Host?X(i,0,r):ge(e,t,r,i);try{let s;if(s=o(r),null!=s||r&mt.Optional)return s;Gt()}finally{Zm()}}else if("number"==typeof o){let s=null,a=g(n,e),u=ds,l=r&mt.Host?e[Bn][ur]:null;for((-1===a||r&mt.SkipSelf)&&(u=-1===a?v(n,e):e[a+8],u!==ds&&bl(r,!1)?(s=e[Ne],a=La(u),e=zu(u,e)):a=-1);-1!==a;){const f=e[Ne];if(yf(o,a,f.data)){const m=vt(a,e,t,s,r,l);if(m!==go)return m}u=e[a+8],u!==ds&&bl(r,e[Ne].data[a+8]===l)&&yf(o,a,e)?(s=f,a=La(u),e=zu(u,e)):a=-1}}return i}function vt(n,e,t,r,i,o){const s=e[Ne],a=s.data[n+8],f=function mr(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,f=o>>20,y=i?a+f:n.directiveEnd;for(let E=r?a:a+f;E<y;E++){const S=s[E];if(E<u&&t===S||E>=u&&S.type===t)return E}if(i){const E=s[u];if(E&&_i(E)&&E.type===t)return u}return null}(a,s,t,null==r?Pa(a)&&mf:r!=s&&0!=(3&a.type),i&mt.Host&&o===a);return null!==f?Kr(e,s,f,a):go}function Kr(n,e,t,r){let i=n[t];const o=e.data;if(function Ym(n){return n instanceof ju}(i)){const s=i;s.resolving&&function rt(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,`Circular dependency in DI detected for ${n}${t}`)}(function ve(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():K(n)}(o[t]));const a=wl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?qr(s.injectImpl):null;Gm(n,r,mt.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function dE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Rm(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&qr(l),wl(a),s.resolving=!1,Zm()}}return i}function yf(n,e,t){return!!(t[e+(n>>Jm)]&1<<n)}function bl(n,e){return!(n&mt.Self||n&mt.Host&&e)}class _r{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ke(this._tNode,this._lView,e,zc(r),t)}}function e_(){return new _r(pr(),me())}function cr(n){return is(()=>{const e=n.prototype.constructor,t=e[Gr]||qu(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Gr]||qu(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qu(n){return wa(n)?()=>{const e=qu(Ke(n));return e&&e()}:js(n)}function n_(n){const e=n[Ne],t=e.type;return 2===t?e.declTNode:1===t?n[ur]:null}const Tl="__parameters__";function Al(n,e,t){return is(()=>{const r=function gE(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,l,f){const m=u.hasOwnProperty(Tl)?u[Tl]:Object.defineProperty(u,Tl,{value:[]})[Tl];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Rl(n,e){n.forEach(t=>Array.isArray(t)?Rl(t,e):e(t))}function FA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function r_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ji(n,e,t){let r=Pl(n,e);return r>=0?n[1|r]=t:(r=~r,function RB(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function mE(n,e){const t=Pl(n,e);if(t>=0)return n[1|t]}function Pl(n,e){return function VA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Lr=Qi(Al("Optional"),8),o_=Qi(Al("SkipSelf"),4);function l_(n){return 128==(128&n.flags)}var ja=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ja||{});const QB=/^>|^->|<!--|-->|--!>|<!-$/g,YB=/(<|>)/g,JB="\u200b$1\u200b";const EE=new Map;let XB=0;const CE="__ngContext__";function Qr(n,e){Wr(e)?(n[CE]=e[Ou],function t$(n){EE.set(n[Ou],n)}(e)):n[CE]=e}let bE;function TE(n,e){return bE(n,e)}function Cf(n){const e=n[pn];return kr(e)?e[pn]:e}function rS(n){return oS(n[Ls])}function iS(n){return oS(n[mi])}function oS(n){for(;null!==n&&!kr(n);)n=n[mi];return n}function Nl(n,e,t,r,i){if(null!=r){let o,s=!1;kr(r)?o=r:Wr(r)&&(s=!0,r=r[fn]);const a=Zt(r);0===n&&null!==t?null==i?cS(e,t,a):Gu(e,t,a,i||null,!0):1===n&&null!==t?Gu(e,t,a,i||null,!0):2===n?function __(n,e,t){const r=g_(n,e);r&&function I$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function C$(n,e,t,r,i){const o=t[uo];o!==Zt(t)&&Nl(e,n,r,o,i);for(let a=fr;a<t.length;a++){const u=t[a];Tf(u[Ne],u,n,e,r,o)}}(e,n,o,t,i)}}function DE(n,e){return n.createComment(function KA(n){return n.replace(QB,e=>e.replace(YB,JB))}(e))}function f_(n,e,t){return n.createElement(e,t)}function aS(n,e){const t=n[$s],r=t.indexOf(e);km(e),t.splice(r,1)}function p_(n,e){if(n.length<=fr)return;const t=fr+e,r=n[t];if(r){const i=r[Us];null!==i&&i!==n&&aS(i,r),e>0&&(n[t-1][mi]=r[mi]);const o=r_(n,fr+e);!function h$(n,e){Tf(n,e,e[ot],2,null,null),e[fn]=null,e[ur]=null}(r[Ne],r);const s=o[Oi];null!==s&&s.detachView(o[Ne]),r[pn]=null,r[mi]=null,r[it]&=-129}return r}function AE(n,e){if(!(256&e[it])){const t=e[ot];e[ku]&&wm(e[ku]),e[Bs]&&wm(e[Bs]),t.destroyNode&&Tf(n,e,t,3,null,null),function g$(n){let e=n[Ls];if(!e)return SE(n[Ne],n);for(;e;){let t=null;if(Wr(e))t=e[Ls];else{const r=e[fr];r&&(t=r)}if(!t){for(;e&&!e[mi]&&e!==n;)Wr(e)&&SE(e[Ne],e),e=e[pn];null===e&&(e=n),Wr(e)&&SE(e[Ne],e),t=e&&e[mi]}e=t}}(e)}}function SE(n,e){if(!(256&e[it])){e[it]&=-129,e[it]|=256,function v$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ju)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];co(4,a,u);try{u.call(a)}finally{co(5,a,u)}}else{co(4,i,o);try{o.call(i)}finally{co(5,i,o)}}}}}(n,e),function y$(n,e){const t=n.cleanup,r=e[Aa];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[Aa]=null);const i=e[as];if(null!==i){e[as]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Ne].type&&e[ot].destroy();const t=e[Us];if(null!==t&&kr(e[pn])){t!==e[pn]&&aS(t,e);const r=e[Oi];null!==r&&r.detachView(n)}!function n$(n){EE.delete(n[Ou])}(e)}}function RE(n,e,t){return function uS(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[fn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Yn.None||o===Yn.Emulated)return null}return Zr(r,t)}}(n,e.parent,t)}function Gu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function cS(n,e,t){n.appendChild(e,t)}function lS(n,e,t,r,i){null!==r?Gu(n,e,t,r,i):cS(n,e,t)}function g_(n,e){return n.parentNode(e)}let PE,y_,OE,v_,fS=function hS(n,e,t){return 40&n.type?Zr(n,t):null};function m_(n,e,t,r){const i=RE(n,r,e),o=e[ot],a=function dS(n,e,t){return fS(n,e,t)}(r.parent||e[ur],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)lS(o,i,t[u],a,!1);else lS(o,i,t,a,!1);void 0!==PE&&PE(o,r,e,t,i)}function bf(n,e){if(null!==e){const t=e.type;if(3&t)return Zr(e,n);if(4&t)return ME(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return bf(n,r);{const i=n[e.index];return kr(i)?ME(-1,i):Zt(i)}}if(32&t)return TE(e,n)()||Zt(n[e.index]);{const r=gS(n,e);return null!==r?Array.isArray(r)?r[0]:bf(Cf(n[Bn]),r):bf(n,e.next)}}return null}function gS(n,e){return null!==e?n[Bn][ur].projection[e.projection]:null}function ME(n,e){const t=fr+n+1;if(t<e.length){const r=e[t],i=r[Ne].firstChild;if(null!==i)return bf(r,i)}return e[uo]}function xE(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Qr(Zt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)xE(n,e,t.child,r,i,o,!1),Nl(e,n,i,a,o);else if(32&u){const l=TE(t,r);let f;for(;f=l();)Nl(e,n,i,f,o);Nl(e,n,i,a,o)}else 16&u?_S(n,e,r,t,i,o):Nl(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Tf(n,e,t,r,i,o){xE(t,r,n.firstChild,e,i,o,!1)}function _S(n,e,t,r,i,o){const s=t[Bn],u=s[ur].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Nl(e,n,i,u[l],o);else{let l=u;const f=s[pn];l_(r)&&(l.flags|=128),xE(n,e,l,f,i,o,!0)}}function yS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function vS(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Gc(n,e,r),null!==i&&yS(n,e,i),null!==o&&function T$(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function Ol(n){return function NE(){if(void 0===y_&&(y_=null,Wt.trustedTypes))try{y_=Wt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return y_}()?.createHTML(n)||n}function kl(){if(void 0!==OE)return OE;if(typeof document<"u")return document;throw new x(210,!1)}function kE(){if(void 0===v_&&(v_=null,Wt.trustedTypes))try{v_=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return v_}function IS(n){return kE()?.createHTML(n)||n}function wS(n){return kE()?.createScriptURL(n)||n}class CS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kc})`}}function Ha(n){return n instanceof CS?n.changingThisBreaksApplicationSecurity:n}function Df(n,e){const t=function k$(n){return n instanceof CS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kc})`)}return t===e}class F${constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ol(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class V${constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ol(e),t}}const U$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function FE(n){return(n=String(n)).match(U$)?n:"unsafe:"+n}function Ws(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Af(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const TS=Ws("area,br,col,hr,img,wbr"),DS=Ws("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),AS=Ws("rp,rt"),VE=Af(TS,Af(DS,Ws("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Af(AS,Ws("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Af(AS,DS)),LE=Ws("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SS=Af(LE,Ws("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ws("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),B$=Ws("script,style,template");class $${constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!VE.hasOwnProperty(t))return this.sanitizedSomething=!0,!B$.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!SS.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;LE[a]&&(u=FE(u)),this.buf.push(" ",s,'="',RS(u),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();VE.hasOwnProperty(t)&&!TS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(RS(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const j$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,H$=/([^\#-~ |!])/g;function RS(n){return n.replace(/&/g,"&amp;").replace(j$,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(H$,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let I_;function UE(n){return"content"in n&&function q$(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Fl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fl||{});function za(n){const e=Sf();return e?IS(e.sanitize(Fl.HTML,n)||""):Df(n,"HTML")?IS(Ha(n)):function z$(n,e){let t=null;try{I_=I_||function bS(n){const e=new V$(n);return function L$(){try{return!!(new window.DOMParser).parseFromString(Ol(""),"text/html")}catch{return!1}}()?new F$(e):e}(n);let r=e?String(e):"";t=I_.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=I_.getInertBodyElement(r)}while(r!==o);return Ol((new $$).sanitizeChildren(UE(t)||t))}finally{if(t){const r=UE(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(kl(),K(n))}function hs(n){const e=Sf();return e?e.sanitize(Fl.URL,n)||"":Df(n,"URL")?Ha(n):FE(K(n))}function PS(n){const e=Sf();if(e)return wS(e.sanitize(Fl.RESOURCE_URL,n)||"");if(Df(n,"ResourceURL"))return wS(Ha(n));throw new x(904,!1)}function Sf(){const n=me();return n&&n[Sa].sanitizer}const Rf=new be("ENVIRONMENT_INITIALIZER"),xS=new be("INJECTOR",-1),NS=new be("INJECTOR_DEF_TYPES");class BE{get(e,t=Au){if(t===Au){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}function Y$(...n){return{\u0275providers:kS(0,n),\u0275fromNgModule:!0}}function kS(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return Rl(e,s=>{const a=s;E_(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&FS(i,o),t}function FS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];$E(i,o=>{e(o,r)})}}function E_(n,e,t,r){if(!(n=Ke(n)))return!1;let i=null,o=Uc(n);const s=!o&&Tt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=Uc(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of u)E_(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{Rl(o.imports,f=>{E_(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&FS(l,e)}if(!a){const l=js(i)||(()=>new i);e({provide:i,useFactory:l,deps:bt},i),e({provide:NS,useValue:i,multi:!0},i),e({provide:Rf,useValue:()=>we(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const l=n;$E(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function $E(n,e){for(let t of n)Ca(t)&&(t=t.\u0275providers),Array.isArray(t)?$E(t,e):e(t)}const J$=Pe({provide:String,useValue:Pe});function jE(n){return null!==n&&"object"==typeof n&&J$ in n}function Wu(n){return"function"==typeof n}const HE=new be("Set Injector scope."),w_={},ej={};let zE;function C_(){return void 0===zE&&(zE=new BE),zE}class _o{}class Vl extends _o{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,GE(e,s=>this.processProvider(s)),this.records.set(xS,Ll(void 0,this)),i.has("environment")&&this.records.set(_o,Ll(void 0,this));const o=this.records.get(HE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(NS.multi,bt,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=rs(this),r=qr(void 0);try{return e()}finally{rs(t),qr(r)}}get(e,t=Au,r=mt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xu))return e[xu](this);r=zc(r);const o=rs(this),s=qr(void 0);try{if(!(r&mt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function oj(n){return"function"==typeof n||"object"==typeof n&&n instanceof be}(e)&&Lc(e);u=l&&this.injectableDefInScope(l)?Ll(qE(e),w_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&mt.Self?C_():this.parent).get(e,t=r&mt.Optional&&t===Au?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ns]=a[ns]||[]).unshift(He(e)),o)throw a;return function VI(n,e,t,r){const i=n[ns];throw e[Ki]&&i.unshift(e[Ki]),n.message=function Pu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):He(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[ns]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{qr(s),rs(o)}}resolveInjectorInitializers(){const e=rs(this),t=qr(void 0);try{const i=this.get(Rf.multi,bt,mt.Self);for(const o of i)o()}finally{rs(e),qr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(He(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){let t=Wu(e=Ke(e))?e:Ke(e&&e.provide);const r=function nj(n){return jE(n)?Ll(void 0,n.useValue):Ll(US(n),w_)}(e);if(Wu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ll(void 0,w_,!0),i.factory=()=>Ru(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===w_&&(t.value=ej,t.value=t.factory()),"object"==typeof t.value&&t.value&&function ij(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ke(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function qE(n){const e=Lc(n),t=null!==e?e.factory:js(n);if(null!==t)return t;if(n instanceof be)throw new x(204,!1);if(n instanceof Function)return function tj(n){const e=n.length;if(e>0)throw function If(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new x(204,!1);const t=function Xg(n){return n&&(n[Tu]||n[Vs])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new x(204,!1)}function US(n,e,t){let r;if(Wu(n)){const i=Ke(n);return js(i)||qE(i)}if(jE(n))r=()=>Ke(n.useValue);else if(function LS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ru(n.deps||[]));else if(function VS(n){return!(!n||!n.useExisting)}(n))r=()=>we(Ke(n.useExisting));else{const i=Ke(n&&(n.useClass||n.provide));if(!function rj(n){return!!n.deps}(n))return js(i)||qE(i);r=()=>new i(...Ru(n.deps))}return r}function Ll(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function GE(n,e){for(const t of n)Array.isArray(t)?GE(t,e):t&&Ca(t)?GE(t.\u0275providers,e):e(t)}const b_=new be("AppId",{providedIn:"root",factory:()=>sj}),sj="ng",BS=new be("Platform Initializer"),ko=new be("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$S=new be("CSP nonce",{providedIn:"root",factory:()=>kl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let jS=(n,e,t)=>null;function ew(n,e,t=!1){return jS(n,e,t)}class mj{}class qS{}class yj{resolveComponentFactory(e){throw function _j(n){const e=Error(`No component factory found for ${He(n)}.`);return e.ngComponent=n,e}(e)}}let P_=(()=>{class n{static#e=this.NULL=new yj}return n})();function vj(){return $l(pr(),me())}function $l(n,e){return new Xi(Zr(n,e))}let Xi=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=vj}return n})();class WS{}let Zs=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ej(){const n=me(),t=Fr(pr().index,n);return(Wr(t)?t:n)[ot]}()}return n})(),wj=(()=>{class n{static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:()=>null})}return n})();class jl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rw=new jl("16.2.12"),iw={};function YS(n,e=null,t=null,r){const i=JS(n,e,t,r);return i.resolveInjectorInitializers(),i}function JS(n,e=null,t=null,r,i=new Set){const o=[t||bt,Y$(n)];return r=r||("object"==typeof n?void 0:He(n)),new Vl(o,e||C_(),r||null,i)}let Yr=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Au;static#t=this.NULL=new BE;static create(t,r){if(Array.isArray(t))return YS({name:""},r,t,"");{const i=t.name??"";return YS({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=ze({token:n,providedIn:"any",factory:()=>we(xS)});static#r=this.__NG_ELEMENT_ID__=-1}return n})();function sw(n){return n.ngOriginalError}class Ks{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&sw(e);for(;t&&sw(t);)t=sw(t);return t||null}}function uw(n){return e=>{setTimeout(n,void 0,e)}}const Hn=class Rj extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=uw(o),i&&(i=uw(i)),s&&(s=uw(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof xt&&e.add(a),a}};function eR(...n){}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hn(!1),this.onMicrotaskEmpty=new Hn(!1),this.onStable=new Hn(!1),this.onError=new Hn(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Pj(){const n="function"==typeof Wt.requestAnimationFrame;let e=Wt[n?"requestAnimationFrame":"setTimeout"],t=Wt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Nj(n){const e=()=>{!function xj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,lw(n),n.isCheckStableRunning=!0,cw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),lw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function kj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,o,s,a);try{return tR(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),nR(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return tR(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),nR(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,lw(n),cw(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Mj,eR,eR);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Mj={};function cw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function lw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function tR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function nR(n){n._nesting--,cw(n)}class Oj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hn,this.onMicrotaskEmpty=new Hn,this.onStable=new Hn,this.onError=new Hn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const rR=new be("",{providedIn:"root",factory:iR});function iR(){const n=Le(Vt);let e=!0;return A(new lt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new lt(i=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(le()))}function Qs(n){return n instanceof Function?n():n}let dw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:()=>new n})}return n})();function xf(n){for(;n;){n[it]|=64;const e=Cf(n);if(Uh(n)&&!e)return n;n=e}return null}const cR=new be("",{providedIn:"root",factory:()=>!1});let x_=null;function fR(n,e){return n[e]??mR()}function pR(n,e){const t=mR();t.producerNode?.length&&(n[e]=x_,t.lView=n,x_=gR())}const qj={...vm,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{xf(n.lView)},lView:null};function gR(){return Object.create(qj)}function mR(){return x_??=gR(),x_}const dt={};function Te(n){_R(Rt(),me(),Vr()+n,!1)}function _R(n,e,t,r){if(!r)if(3==(3&e[it])){const o=n.preOrderCheckHooks;null!==o&&_l(e,o,t)}else{const o=n.preOrderHooks;null!==o&&yl(e,o,0,t)}Gs(t)}function he(n,e=mt.Default){const t=me();return null===t?we(n,e):ke(pr(),t,Ke(n),e)}function N_(n,e,t,r,i,o,s,a,u,l,f){const m=e.blueprint.slice();return m[fn]=i,m[it]=140|r,(null!==l||n&&2048&n[it])&&(m[it]|=2048),Jh(m),m[pn]=m[ss]=n,m[Un]=t,m[Sa]=s||n&&n[Sa],m[ot]=a||n&&n[ot],m[ao]=u||n&&n[ao]||null,m[ur]=o,m[Ou]=function e$(){return XB++}(),m[Yi]=f,m[tl]=l,m[Bn]=2==e.type?n[Bn]:m,m}function ql(n,e,t,r,i){let o=n.data[e];if(null===o)o=function hw(n,e,t,r,i){const o=$m(),s=nf(),u=n.data[e]=function Xj(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function ls(){return null!==Xe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(n,e,t,r,i),function Hm(){return Xe.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function qs(){const n=Xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return ho(o,!0),o}function Nf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function vR(n,e,t,r,i){const o=fR(e,ku),s=Vr(),a=2&r;try{Gs(-1),a&&e.length>yt&&_R(n,e,yt,!1),co(a?2:0,i);const l=a?o:null,f=jh(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{Vu(l,f)}}finally{a&&null===e[ku]&&pR(e,ku),Gs(s),co(a?3:1,i)}}function fw(n,e,t){if(pm(e)){const r=ki(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{ki(r)}}}function pw(n,e,t){Lm()&&(function s4(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Pa(t)&&function f4(n,e,t){const r=Zr(e,n),i=IR(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=O_(n,N_(n,i,null,s,r,e,null,n[Sa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||c(t,e),Qr(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],l=Kr(e,n,a,t);Qr(l,e),null!==s&&p4(0,a-i,l,u,0,s),_i(u)&&(Fr(t.index,e)[Un]=Kr(e,n,a,t))}}(n,e,t,Zr(t,e)),64==(64&t.flags)&&TR(n,e,t))}function gw(n,e,t=Zr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function IR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=mw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mw(n,e,t,r,i,o,s,a,u,l,f){const m=yt+r,y=m+i,E=function Wj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:dt);return t}(m,y),S="function"==typeof l?l():l;return E[Ne]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}let ER=n=>null;function wR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?CR(t,e,i,o):r.hasOwnProperty(i)&&CR(t,e,r[i],o)}return t}function CR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function eo(n,e,t,r,i,o,s,a){const u=Zr(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(Ew(n,t,f,r,i),Pa(e)&&function n4(n,e){const t=Fr(e,n);16&t[it]||(t[it]|=64)}(t,e.index)):3&e.type&&(r=function t4(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function _w(n,e,t,r){if(Lm()){const i=null===r?null:{"":-1},o=function u4(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(Qc(e,s.selectors,!1))if(r||(r=[]),_i(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),yw(n,e,a.length)}else r.unshift(s),yw(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&bR(n,e,t,s,i,a),i&&function c4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new x(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Da(t.mergedAttrs,t.attrs)}function bR(n,e,t,r,i,o){for(let l=0;l<r.length;l++)b(c(t,e),n,r[l].type);!function d4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=Nf(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=Da(t.mergedAttrs,f.hostAttrs),h4(n,t,e,u,f),l4(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function e4(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=o[f],y=t?t.get(m):null,S=y?y.outputs:null;u=wR(m.inputs,f,u,y?y.inputs:null),l=wR(m.outputs,f,l,S);const N=null===u||null===s||Ah(e)?null:g4(u,f,s);a.push(N)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,o)}function TR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function zm(){return Xe.lFrame.currentDirectiveIndex}();try{Gs(o);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Bu(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&a4(u,l)}}finally{Gs(-1),Bu(s)}}function a4(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function yw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function l4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_i(e)&&(t[""]=n)}}function h4(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=js(i.type)),s=new ju(o,_i(i),he);n.blueprint[r]=s,t[r]=s,function i4(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function o4(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Nf(n,t,i.hostVars,dt),i)}function fs(n,e,t,r,i,o){const s=Zr(n,e);!function vw(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?K(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[ot],s,o,n.value,t,r,i)}function p4(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)DR(r,t,s[a++],s[a++],s[a++])}function DR(n,e,t,r,i){const o=ki(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ki(o)}}function g4(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function AR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function SR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const s=n.data[o];af(t[r]),s.contentQueries(2,e[o],o)}}}function O_(n,e){return n[Ls]?n[fm][mi]=e:n[Ls]=e,n[fm]=e,e}function Iw(n,e,t){af(0);const r=ki(null);try{e(n,t)}finally{ki(r)}}function xR(n,e){const t=n[ao],r=t?t.get(Ks,null):null;r&&r.handleError(e)}function Ew(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];DR(n.data[s],e[s],r,a,i)}}function m4(n,e){const t=Fr(e,n),r=t[Ne];!function _4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[fn];null!==i&&null===t[Yi]&&(t[Yi]=ew(i,t[ao])),ww(r,t,t[Un])}function ww(n,e,t){cf(e);try{const r=n.viewQuery;null!==r&&Iw(1,r,t);const i=n.template;null!==i&&vR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SR(n,e),n.staticViewQueries&&Iw(2,n.viewQuery,t);const o=n.components;null!==o&&function y4(n,e){for(let t=0;t<e.length;t++)m4(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[it]&=-5,df()}}let NR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function ZI(n,e,t){const r=Object.create(Wh);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>ol(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Em(r))return;r.hasRun=!0;const s=jh(r);try{r.cleanupFn(),r.cleanupFn=Sm,r.fn(i)}finally{Vu(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:()=>new n})}return n})();function k_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=or(i,a):2==o&&(r=or(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Of(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(Zt(o)),kr(o)&&OR(o,r);const s=t.type;if(8&s)Of(n,e,t.child,r);else if(32&s){const a=TE(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=gS(e,t);if(Array.isArray(a))r.push(...a);else{const u=Cf(e[Bn]);Of(u[Ne],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function OR(n,e){for(let t=fr;t<n.length;t++){const r=n[t],i=r[Ne].firstChild;null!==i&&Of(r[Ne],r,i,e)}n[uo]!==n[fn]&&e.push(n[uo])}function F_(n,e,t,r=!0){const i=e[Sa],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{kR(n,e,n.template,t)}catch(u){throw r&&xR(e,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function kR(n,e,t,r){const i=e[it];if(256!=(256&i)){e[Sa].effectManager?.flush(),cf(e);try{Jh(e),function pl(n){return Xe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&vR(n,e,t,2,r);const s=3==(3&i);if(s){const l=n.preOrderCheckHooks;null!==l&&_l(e,l,null)}else{const l=n.preOrderHooks;null!==l&&yl(e,l,0,null),ff(e,0)}if(function E4(n){for(let e=rS(n);null!==e;e=iS(e)){if(!e[rl])continue;const t=e[$s];for(let r=0;r<t.length;r++){eE(t[r])}}}(e),FR(e,2),null!==n.contentQueries&&SR(n,e),s){const l=n.contentCheckHooks;null!==l&&_l(e,l)}else{const l=n.contentHooks;null!==l&&yl(e,l,1),ff(e,1)}!function Gj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=fR(e,Bs);try{for(let i=0;i<t.length;i++){const o=t[i];if(o<0)Gs(~o);else{const s=o,a=t[++i],u=t[++i];oE(a,s),r.dirty=!1;const l=jh(r);try{u(2,e[s])}finally{Vu(r,l)}}}}finally{null===e[Bs]&&pR(e,Bs),Gs(-1)}}(n,e);const a=n.components;null!==a&&LR(e,a,0);const u=n.viewQuery;if(null!==u&&Iw(2,u,r),s){const l=n.viewCheckHooks;null!==l&&_l(e,l)}else{const l=n.viewHooks;null!==l&&yl(e,l,2),ff(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[it]&=-73,km(e)}finally{df()}}}function FR(n,e){for(let t=rS(n);null!==t;t=iS(t))for(let r=fr;r<t.length;r++)VR(t[r],e)}function w4(n,e,t){VR(Fr(e,n),t)}function VR(n,e){if(!function JI(n){return 128==(128&n[it])}(n))return;const t=n[Ne],r=n[it];if(80&r&&0===e||1024&r||2===e)kR(t,n,t.template,n[Un]);else if(n[Nu]>0){FR(n,1);const i=t.components;null!==i&&LR(n,i,1)}}function LR(n,e,t){for(let r=0;r<e.length;r++)w4(n,e[r],t)}class kf{get rootNodes(){const e=this._lView,t=e[Ne];return Of(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(e){this._lView[Un]=e}get destroyed(){return 256==(256&this._lView[it])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[pn];if(kr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(p_(e,r),r_(t,r))}this._attachedToViewContainer=!1}AE(this._lView[Ne],this._lView)}onDestroy(e){!function Fm(n,e){if(256==(256&n[it]))throw new x(911,!1);null===n[as]&&(n[as]=[]),n[as].push(e)}(this._lView,e)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[it]&=-129}reattach(){this._lView[it]|=128}detectChanges(){F_(this._lView[Ne],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function p$(n,e){Tf(n,e,e[ot],2,null,null)}(this._lView[Ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}}class C4 extends kf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;F_(e[Ne],e,e[Un],!1)}checkNoChanges(){}get context(){return null}}class UR extends P_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Tt(e);return new Ff(t,this.ngModule)}}function BR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class T4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zc(r);const i=this.injector.get(e,iw,r);return i!==iw||t===iw?i:this.parentInjector.get(e,t,r)}}class Ff extends qS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=BR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return BR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Jc(n){return n.map(xh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof _o?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new T4(e,o):e,a=s.get(WS,null);if(null===a)throw new x(407,!1);const m={rendererFactory:a,sanitizer:s.get(wj,null),effectManager:s.get(NR,null),afterRenderEventManager:s.get(dw,null)},y=a.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",S=r?function Zj(n,e,t,r){const o=r.get(cR,!1)||t===Yn.ShadowDom,s=n.selectRootElement(e,o);return function Kj(n){ER(n)}(s),s}(y,r,this.componentDef.encapsulation,s):f_(y,E,function b4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E)),Q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let H=null;null!==S&&(H=ew(S,s,!0));const J=mw(0,null,null,1,0,null,null,null,null,null,null),ce=N_(null,J,null,Q,null,null,m,y,s,null,H);let Ce,Be;cf(ce);try{const z=this.componentDef;let P,U=null;z.findHostDirectiveDefs?(P=[],U=new Map,z.findHostDirectiveDefs(z,P,U),P.push(z)):P=[z];const q=function A4(n,e){const t=n[Ne],r=yt;return n[r]=e,ql(t,r,2,"#host",null)}(ce,S),W=function S4(n,e,t,r,i,o,s){const a=i[Ne];!function R4(n,e,t,r){for(const i of n)e.mergedAttrs=Da(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(k_(e,e.mergedAttrs,!0),null!==t&&vS(r,t,e))}(r,n,e,s);let u=null;null!==e&&(u=ew(e,i[ao]));const l=o.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=N_(i,IR(t),null,f,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&yw(a,n,r.length-1),O_(i,m),i[n.index]=m}(q,S,z,P,ce,m,y);Be=Om(J,yt),S&&function M4(n,e,t,r){if(r)Gc(n,t,["ng-version",rw.full]);else{const{attrs:i,classes:o}=function Nh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!gi(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Gc(n,t,i),o&&o.length>0&&yS(n,t,o.join(" "))}}(y,z,S,r),void 0!==t&&function x4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(Be,this.ngContentSelectors,t),Ce=function P4(n,e,t,r,i,o){const s=pr(),a=i[Ne],u=Zr(s,i);bR(a,i,s,t,null,r);for(let f=0;f<t.length;f++)Qr(Kr(i,a,s.directiveStart+f,s),i);TR(a,i,s),u&&Qr(u,i);const l=Kr(i,a,s.directiveStart+s.componentOffset,s);if(n[Un]=i[Un]=l,null!==o)for(const f of o)f(l,e);return fw(a,s,n),l}(W,z,P,U,ce,[N4]),ww(J,ce,null)}finally{df()}return new D4(this.componentType,Ce,$l(Be,ce),ce,Be)}}class D4 extends mj{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new C4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;Ew(o[Ne],o,i,e,t),this.previousInputValues.set(e,t),xf(Fr(this._tNode.index,o))}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function N4(){const n=pr();ml(me()[Ne],n)}function Jt(n){let e=function $R(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(_i(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=V_(n.inputs),s.inputTransforms=V_(n.inputTransforms),s.declaredInputs=V_(n.declaredInputs),s.outputs=V_(n.outputs);const a=i.hostBindings;a&&V4(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&k4(n,u),l&&F4(n,l),$t(n.inputs,i.inputs),$t(n.declaredInputs,i.declaredInputs),$t(n.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),$t(s.inputTransforms,i.inputTransforms)),_i(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Jt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function O4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Da(i.hostAttrs,t=Da(t,i.hostAttrs))}}(r)}function V_(n){return n===xr?{}:n===bt?[]:n}function k4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function F4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function V4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function qR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function L_(n){return!!Cw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Cw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ps(n,e,t){return n[e]=t}function Jr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function gs(n,e,t,r){const i=me();return Jr(i,Va(),e)&&(Rt(),fs(Cn(),i,n,e,t,r)),gs}function Wl(n,e,t,r){return Jr(n,Va(),t)?e+K(t)+r:dt}function on(n,e,t,r,i,o,s,a){const u=me(),l=Rt(),f=n+yt,m=l.firstCreatePass?function u3(n,e,t,r,i,o,s,a,u){const l=e.consts,f=ql(e,n,4,s||null,lo(l,a));_w(e,t,f,lo(l,u)),ml(e,f);const m=f.tView=mw(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,o,s):l.data[f];ho(m,!1);const y=iP(l,u,m,n);gl()&&m_(l,u,y,m),Qr(y,u),O_(u,u[f]=AR(y,u,y,m)),Lh(m)&&pw(l,u,m),null!=s&&gw(u,m,a)}let iP=function oP(n,e,t,r){return Oo(!0),e[ot].createComment("")};function Qe(n,e,t){const r=me();return Jr(r,Va(),e)&&eo(Rt(),Cn(),r,n,e,r[ot],t,!1),Qe}function Rw(n,e,t,r,i){const s=i?"class":"style";Ew(n,t,e.inputs[s],s,r)}function F(n,e,t,r){const i=me(),o=Rt(),s=yt+n,a=i[ot],u=o.firstCreatePass?function f3(n,e,t,r,i,o){const s=e.consts,u=ql(e,n,2,r,lo(s,i));return _w(e,t,u,lo(s,o)),null!==u.attrs&&k_(u,u.attrs,!1),null!==u.mergedAttrs&&k_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,t,r):o.data[s],l=sP(o,i,u,a,e,n);i[s]=l;const f=Lh(u);return ho(u,!0),vS(a,l,u),32!=(32&u.flags)&&gl()&&m_(o,i,l,u),0===function tE(){return Xe.lFrame.elementDepthCount}()&&Qr(l,i),function Lu(){Xe.lFrame.elementDepthCount++}(),f&&(pw(o,i,u),fw(o,u,i)),null!==r&&gw(i,u),F}function D(){let n=pr();nf()?Uu():(n=n.parent,ho(n,!1));const e=n;(function ef(n){return Xe.skipHydrationRootTNode===n})(e)&&function Bm(){Xe.skipHydrationRootTNode=null}(),function nE(){Xe.lFrame.elementDepthCount--}();const t=Rt();return t.firstCreatePass&&(ml(t,n),pm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function xA(n){return 0!=(8&n.flags)}(e)&&Rw(t,e,me(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function pf(n){return 0!=(16&n.flags)}(e)&&Rw(t,e,me(),e.stylesWithoutHost,!1),D}function ye(n,e,t,r){return F(n,e,t,r),D(),ye}let sP=(n,e,t,r,i,o)=>(Oo(!0),f_(r,i,function Km(){return Xe.lFrame.currentNamespace}()));function Fo(n,e,t){const r=me(),i=Rt(),o=n+yt,s=i.firstCreatePass?function m3(n,e,t,r,i){const o=e.consts,s=lo(o,r),a=ql(e,n,8,"ng-container",s);return null!==s&&k_(a,s,!0),_w(e,t,a,lo(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];ho(s,!0);const a=uP(i,r,s,n);return r[o]=a,gl()&&m_(i,r,a,s),Qr(a,r),Lh(s)&&(pw(i,r,s),fw(i,s,r)),null!=t&&gw(r,s),Fo}function Vo(){let n=pr();const e=Rt();return nf()?Uu():(n=n.parent,ho(n,!1)),e.firstCreatePass&&(ml(e,n),pm(n)&&e.queries.elementEnd(n)),Vo}let uP=(n,e,t,r)=>(Oo(!0),DE(e[ot],""));function H_(){return me()}function $f(n){return!!n&&"function"==typeof n.then}function cP(n){return!!n&&"function"==typeof n.subscribe}function Lt(n,e,t,r){const i=me(),o=Rt(),s=pr();return function dP(n,e,t,r,i,o,s){const a=Lh(r),l=n.firstCreatePass&&function PR(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Un],m=function RR(n){return n[Aa]||(n[Aa]=[])}(e);let y=!0;if(3&r.type||s){const N=Zr(r,e),V=s?s(N):N,Q=m.length,H=s?ce=>s(Zt(ce[r.index])):r.index;let J=null;if(!s&&a&&(J=function v3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[Aa],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==J)(J.__ngLastListenerFn__||J).__ngNextListenerFn__=o,J.__ngLastListenerFn__=o,y=!1;else{o=fP(r,e,f,o,!1);const ce=t.listen(V,i,o);m.push(o,ce),l&&l.push(i,H,Q,Q+1)}}else o=fP(r,e,f,o,!1);const E=r.outputs;let S;if(y&&null!==E&&(S=E[i])){const N=S.length;if(N)for(let V=0;V<N;V+=2){const Ce=e[S[V]][S[V+1]].subscribe(o),Be=m.length;m.push(o,Ce),l&&l.push(i,r.index,Be,-(Be+1))}}}(o,i,i[ot],s,n,e,r),Lt}function hP(n,e,t,r){try{return co(6,e,t),!1!==t(r)}catch(i){return xR(n,i),!1}finally{co(7,e,t)}}function fP(n,e,t,r,i){return function o(s){if(s===Function)return r;xf(n.componentOffset>-1?Fr(n.index,e):e);let u=hP(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=hP(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function vr(n=1){return function sE(n){return(Xe.lFrame.contextLView=function aE(n,e){for(;n>0;)e=e[ss],n--;return e}(n,Xe.lFrame.contextLView))[Un]}(n)}function z_(n,e,t){return vo(n,"",e,"",t),z_}function vo(n,e,t,r,i){const o=me(),s=Wl(o,e,t,r);return s!==dt&&eo(Rt(),Cn(),o,n,s,o[ot],i,!1),vo}function q_(n,e){return n<<17|e<<2}function qa(n){return n>>17&32767}function Pw(n){return 2|n}function Ku(n){return(131068&n)>>2}function Mw(n,e){return-131069&n|e<<2}function xw(n){return 1|n}function wP(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?qa(o):Ku(o),u=!1;for(;0!==a&&(!1===u||s);){const f=n[a+1];S3(n[a],e)&&(u=!0,n[a+1]=r?xw(f):Pw(f)),a=r?qa(f):Ku(f)}u&&(n[t+1]=r?Pw(o):xw(o))}function S3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Pl(n,e)>=0}function ms(n,e,t){return Lo(n,e,t,!1),ms}function jf(n,e){return Lo(n,e,null,!0),jf}function Lo(n,e,t,r){const i=me(),o=Rt(),s=function po(n){const e=Xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function PP(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Vr()],s=function RP(n,e){return e>=n.expandoStartIndex}(n,t);(function OP(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function V3(n,e,t,r){const i=function sf(n){const e=Xe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Hf(t=Nw(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=Nw(i,n,e,t,r),null===o){let u=function L3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ku(r))return n[qa(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Nw(null,n,e,u[1],r),u=Hf(u,e.attrs,r),function U3(n,e,t,r){n[qa(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function B3(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Hf(r,n[o].hostAttrs,t);return Hf(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function D3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qa(s),u=Ku(s);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Pl(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const y=qa(n[a+1]);n[r+1]=q_(y,a),0!==y&&(n[y+1]=Mw(n[y+1],r)),n[a+1]=function b3(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=q_(a,0),0!==a&&(n[a+1]=Mw(n[a+1],r)),a=r;else n[r+1]=q_(u,0),0===a?a=r:n[u+1]=Mw(n[u+1],r),u=r;l&&(n[r+1]=Pw(n[r+1])),wP(n,f,r,!0),wP(n,f,r,!1),function A3(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Pl(o,e)>=0&&(t[r+1]=xw(t[r+1]))}(e,f,n,r,o),s=q_(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==dt&&Jr(i,s,e)&&function xP(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function T3(n){return 1==(1&n)}(l)?NP(u,e,t,i,Ku(l),s):void 0;G_(f)||(G_(o)||function C3(n){return 2==(2&n)}(l)&&(o=NP(u,null,t,i,a,s)),function b$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ja.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ja.Important),n.setStyle(t,r,i,o))}}(r,s,Fa(Vr(),t),i,o))}(o,o.data[Vr()],i,i[ot],n,i[s+1]=function z3(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(Ha(n)))),n}(e,t),r,s)}function Nw(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=Hf(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Hf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ji(n,s,!!t||e[++o]))}return void 0===n?null:n}function NP(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,m=null===f;let y=t[i+1];y===dt&&(y=m?bt:void 0);let E=m?mE(y,r):f===r?y:void 0;if(l&&!G_(E)&&(E=mE(u,r)),G_(E)&&(a=E,s))return a;const S=n[i+1];i=s?qa(S):Ku(S)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=mE(u,r))}return a}function G_(n){return void 0!==n}function $(n,e=""){const t=me(),r=Rt(),i=n+yt,o=r.firstCreatePass?ql(r,i,1,e,null):r.data[i],s=kP(r,t,o,e,n);t[i]=s,gl()&&m_(r,t,s,o),ho(o,!1)}let kP=(n,e,t,r,i)=>(Oo(!0),function h_(n,e){return n.createText(e)}(e[ot],r));function Xr(n){return Ui("",n,""),Xr}function Ui(n,e,t){const r=me(),i=Wl(r,n,e,t);return i!==dt&&function Ys(n,e,t){const r=Fa(e,n);!function sS(n,e,t){n.setValue(e,t)}(n[ot],r,t)}(r,Vr(),i),Ui}const rd="en-US";let r1=rd;function Fw(n,e,t,r,i){if(n=Ke(n),Array.isArray(n))for(let o=0;o<n.length;o++)Fw(n[o],e,t,r,i);else{const o=Rt(),s=me(),a=pr();let u=Wu(n)?n:Ke(n.provide);const l=US(n),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Wu(n)||!n.multi){const E=new ju(l,i,he),S=Lw(u,e,i?f:f+y,m);-1===S?(b(c(a,s),o,u),Vw(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[S]=E,s[S]=E)}else{const E=Lw(u,e,f+y,m),S=Lw(u,e,f,f+y),V=S>=0&&t[S];if(i&&!V||!i&&!(E>=0&&t[E])){b(c(a,s),o,u);const Q=function dz(n,e,t,r,i){const o=new ju(n,t,he);return o.multi=[],o.index=e,o.componentProviders=0,S1(o,i,r&&!t),o}(i?lz:cz,t.length,i,r,l);!i&&V&&(t[S].providerFactory=Q),Vw(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(Q),s.push(Q)}else Vw(o,n,E>-1?E:S,S1(t[i?S:E],l,!i&&r));!i&&r&&V&&t[S].componentProviders++}}}function Vw(n,e,t,r){const i=Wu(e),o=function X$(n){return!!n.useClass}(e);if(i||o){const u=(o?Ke(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function S1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Lw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function cz(n,e,t,r){return Uw(this.multi,[])}function lz(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Kr(t,t[Ne],this.providerFactory.index,r);o=a.slice(0,s),Uw(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Uw(i,o);return o}function Uw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Mn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function uz(n,e,t){const r=Rt();if(r.firstCreatePass){const i=_i(n);Fw(t,r.data,r.blueprint,i,!0),Fw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Yu{}class R1{}class Bw extends Yu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UR(this);const i=Or(e);this._bootstrapComponents=Qs(i.bootstrap),this._r3Injector=JS(e,t,[{provide:Yu,useValue:this},{provide:P_,useValue:this.componentFactoryResolver},...r],He(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $w extends R1{constructor(e){super(),this.moduleType=e}create(e){return new Bw(this.moduleType,e,[])}}class P1 extends Yu{constructor(e){super(),this.componentFactoryResolver=new UR(this),this.instance=null;const t=new Vl([...e.providers,{provide:Yu,useValue:this},{provide:P_,useValue:this.componentFactoryResolver}],e.parent||C_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function jw(n,e,t=null){return new P1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let pz=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=kS(0,t.type),i=r.length>0?jw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ze({token:n,providedIn:"environment",factory:()=>new n(we(_o))})}return n})();function M1(n){n.getStandaloneInjector=e=>e.get(pz).getOrCreateStandaloneInjector(n)}function id(n,e,t,r){return U1(me(),gr(),n,e,t,r)}function U1(n,e,t,r,i,o){const s=e+t;return Jr(n,s,i)?ps(n,s+1,o?r.call(o,i):r(i)):function Kf(n,e){const t=n[e];return t===dt?void 0:t}(n,s+1)}function Bo(n,e){const t=Rt();let r;const i=n+yt;t.firstCreatePass?(r=function Mz(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=js(r.type)),a=qr(he);try{const u=wl(!1),l=o();return wl(u),function d3(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,me(),i,l),l}finally{qr(a)}}function $o(n,e,t){const r=n+yt,i=me(),o=function Vi(n,e){return n[e]}(i,r);return function Qf(n,e){return n[Ne].data[e].pure}(i,r)?U1(i,gr(),e,o.transform,t,o):o.transform(t)}function Lz(n,e,t,r=!0){const i=e[Ne];if(function m$(n,e,t,r){const i=fr+r,o=t.length;r>0&&(t[i-1][mi]=e),r<o-fr?(e[mi]=t[i],FA(t,fr+r,e)):(t.push(e),e[mi]=null),e[pn]=t;const s=e[Us];null!==s&&t!==s&&function _$(n,e){const t=n[$s];e[Bn]!==e[pn][pn][Bn]&&(n[rl]=!0),null===t?n[$s]=[e]:t.push(e)}(s,e);const a=e[Oi];null!==a&&a.insertView(n),e[it]|=128}(i,e,n,t),r){const o=ME(t,n),s=e[ot],a=g_(s,n[uo]);null!==a&&function f$(n,e,t,r,i,o){r[fn]=i,r[ur]=e,Tf(n,r,t,1,i,o)}(i,n[ur],s,e,a,o)}}Symbol;let Js=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=$z}return n})();const Uz=Js,Bz=class extends Uz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Vz(n,e,t,r){const i=e.tView,a=N_(n,i,t,4096&n[it]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Us]=n[e.index];const l=n[Oi];return null!==l&&(a[Oi]=l.createEmbeddedView(i)),ww(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new kf(i)}};function $z(){return function Y_(n,e){return 4&n.type?new Bz(e,n,$l(n,e)):null}(pr(),me())}let jo=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Wz}return n})();function Wz(){return function Q1(n,e){let t;const r=e[n.index];return kr(r)?t=r:(t=AR(r,e,null,n),e[n.index]=t,O_(e,t)),Y1(t,e,n,r),new Z1(t,n,e)}(pr(),me())}const Zz=jo,Z1=class extends Zz{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){const e=v(this._hostTNode,this._hostLView);if(El(e)){const t=zu(e,this._hostLView),r=La(e);return new _r(t[Ne].data[r+8],t)}return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=K1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,o){const s=e&&!function vf(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef}const u=s?e:new Ff(Tt(e)),l=r||this.parentInjector;if(!o&&null==u.ngModule){const V=(s?l:this.parentInjector).get(_o,null);V&&(o=V)}Tt(u.componentType??{});const E=u.create(l,i,null,o);return this.insertImpl(E.hostView,a,false),E}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function XI(n){return kr(n[pn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[pn],f=new Z1(l,l[ur],l[pn]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return Lz(a,i,s,!r),e.attachToViewContainerRef(),FA(qw(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=K1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);r&&(r_(qw(this._lContainer),t),AE(r[Ne],r))}detach(e){const t=this._adjustIndex(e,-1),r=p_(this._lContainer,t);return r&&null!=r_(qw(this._lContainer),t)?new kf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function K1(n){return n[8]}function qw(n){return n[8]||(n[8]=[])}let Y1=function J1(n,e,t,r){if(n[uo])return;let i;i=8&t.type?Zt(r):function Kz(n,e){const t=n[ot],r=t.createComment(""),i=Zr(e,n);return Gu(t,g_(t,i),r,function E$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[uo]=i};const nC=new be("Application Initializer");let rC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Le(nC,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if($f(o))t.push(o);else if(cP(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CM=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Xs=new be("LocaleId",{providedIn:"root",factory:()=>Le(Xs,mt.Optional|mt.SkipSelf)||function Dq(){return typeof $localize<"u"&&$localize.locale||rd}()});let bM=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new w(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Rq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let TM=(()=>{class n{compileModuleSync(t){return new $w(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Qs(Or(t).declarations).reduce((s,a)=>{const u=Tt(a);return u&&s.push(new Ff(u)),s},[]);return new Rq(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const RM=new be(""),ty=new be("");let uC,sC=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,uC||(function Yq(n){uC=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(we(Vt),we(aC),we(ty))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})(),aC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return uC?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Ga=null;const PM=new be("AllowMultipleToken"),cC=new be("PlatformDestroyListeners"),lC=new be("appBootstrapListener");class xM{constructor(e,t){this.name=e,this.token=t}}function OM(n,e,t=[]){const r=`Platform: ${e}`,i=new be(r);return(o=[])=>{let s=dC();if(!s||s.injector.get(PM,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function e5(n){if(Ga&&!Ga.get(PM,!1))throw new x(400,!1);(function MM(){!function HI(n){al=n}(()=>{throw new x(600,!1)})})(),Ga=n;const e=n.get(FM);(function NM(n){n.get(BS,null)?.forEach(t=>t())})(n)}(function kM(n=[],e){return Yr.create({name:e,providers:[{provide:HE,useValue:"platform"},{provide:cC,useValue:new Set([()=>Ga=null])},...n]})}(a,r))}return function n5(n){const e=dC();if(!e)throw new x(401,!1);return e}()}}function dC(){return Ga?.get(FM)??null}let FM=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function r5(n="zone.js",e){return"noop"===n?new Oj:"zone.js"===n?new Vt(e):n}(r?.ngZone,function VM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function fz(n,e,t){return new Bw(n,e,t)}(t.moduleType,this.injector,function jM(n){return[{provide:Vt,useFactory:n},{provide:Rf,multi:!0,useFactory:()=>{const e=Le(o5,{optional:!0});return()=>e.initialize()}},{provide:$M,useFactory:i5},{provide:rR,useFactory:iR}]}(()=>i)),s=o.injector.get(Ks,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{ny(this._modules,o),a.unsubscribe()})}),function LM(n,e,t){try{const r=t();return $f(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(rC);return a.runInitializers(),a.donePromise.then(()=>(function i1(n){Ni(n,"Expected localeId to be defined"),"string"==typeof n&&(r1=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Xs,rd)||rd),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=UM({},r);return function Jq(n,e,t){const r=new $w(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(ad);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new x(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(cC,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(we(Yr))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function UM(n,e){return Array.isArray(e)?e.reduce(UM,n):{...n,...e}}let ad=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Le($M),this.zoneIsStable=Le(rR),this.componentTypes=[],this.components=[],this.isStable=Le(bM).hasPendingTasks.pipe(Ve(t=>t?k(!1):this.zoneIsStable),et(),le()),this._injector=Le(_o)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof qS;if(!this._injector.get(rC).done)throw!i&&function os(n){const e=Tt(n)||Xn(n)||ar(n);return null!==e&&e.standalone}(t),new x(405,!1);let s;s=i?t:this._injector.get(P_).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Xq(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Yu),l=s.create(Yr.NULL,[],r||s.selector,a),f=l.location.nativeElement,m=l.injector.get(RM,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),ny(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ny(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(lC,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ny(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ny(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const $M=new be("",{providedIn:"root",factory:()=>Le(Ks).handleError.bind(void 0)});function i5(){const n=Le(Vt),e=Le(Ks);return t=>n.runOutsideAngular(()=>e.handleError(t))}let o5=(()=>{class n{constructor(){this.zone=Le(Vt),this.applicationRef=Le(ad)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let ry=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=a5}return n})();function a5(n){return function u5(n,e,t){if(Pa(n)&&!t){const r=Fr(n.index,e);return new kf(r,r)}return 47&n.type?new kf(e[Bn],e):null}(pr(),me(),16==(16&n))}class WM{constructor(){}supports(e){return L_(e)}create(e){return new p5(e)}}const f5=(n,e)=>e;class p5{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||f5}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<KM(r,i,o)?t:r,a=KM(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,f=u-i;if(l!=f){for(let y=0;y<l;y++){const E=y<o.length?o[y]:o[y]=0,S=E+y;f<=S&&S<l&&(o[y]=E+1)}o[s.previousIndex]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!L_(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function z4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new g5(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ZM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class g5{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class m5{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class ZM{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new m5,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KM(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class QM{constructor(){}supports(e){return e instanceof Map||Cw(e)}create(){return new _5}}class _5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Cw(e)))throw new x(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new y5(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class y5{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YM(){return new sy([new WM])}let sy=(()=>{class n{static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:YM});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||YM()),deps:[[n,new o_,new Lr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new x(901,!1)}}return n})();function JM(){return new Xf([new QM])}let Xf=(()=>{class n{static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:JM});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JM()),deps:[[n,new o_,new Lr]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new x(901,!1)}}return n})();const E5=OM(null,"core",[]);let w5=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(we(ad))};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({})}return n})();function ud(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let _C=null;function Wa(){return _C}class F5{}const Io=new be("DocumentToken");let yC=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return Le(L5)},providedIn:"platform"})}return n})();const V5=new be("Location Initialized");let L5=(()=>{class n extends yC{constructor(){super(),this._doc=Le(Io),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wa().getBaseHref(this._doc)}onPopState(t){const r=Wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function vC(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ax(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ea(n){return n&&"?"!==n[0]?"?"+n:n}let Xu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return Le(cx)},providedIn:"root"})}return n})();const ux=new be("appBaseHref");let cx=(()=>{class n extends Xu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Le(Io).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vC(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ea(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+ea(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+ea(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(we(yC),we(ux,8))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),U5=(()=>{class n extends Xu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=vC(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ea(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ea(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(we(yC),we(ux,8))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})(),IC=(()=>{class n{constructor(t){this._subject=new Hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function j5(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ax(lx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ea(r))}normalize(t){return n.stripTrailingSlash(function $5(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,lx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=ea;static#t=this.joinWithSlash=vC;static#n=this.stripTrailingSlash=ax;static#r=this.\u0275fac=function(r){return new(r||n)(we(Xu))};static#i=this.\u0275prov=ze({token:n,factory:function(){return function B5(){return new IC(we(Xu))}()},providedIn:"root"})}return n})();function lx(n){return n.replace(/\/index.html$/,"")}const PC=/\s+/,vx=[];let Ix=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=vx,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(PC):vx}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(PC):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(PC).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(he(sy),he(Xf),he(Xi),he(Zs))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class S6{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Za=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new S6(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),wx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{wx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(he(jo),he(Js),he(sy))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function wx(n,e){n.context.$implicit=e.item}let ra=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new R6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(he(jo),he(Js))};static#t=this.\u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class R6{constructor(){this.$implicit=null,this.ngIf=null}}function Cx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}class x6{createSubscription(e,t){return Am(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Am(()=>e.unsubscribe())}}class N6{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const O6=new N6,k6=new x6;let np=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if($f(t))return O6;if(cP(t))return k6;throw function zo(n,e){return new x(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(he(ry,16))};static#t=this.\u0275pipe=sr({name:"async",type:n,pure:!1,standalone:!0})}return n})(),X6=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({})}return n})();function yy(n){return"server"===n}let r9=(()=>{class n{static#e=this.\u0275prov=ze({token:n,providedIn:"root",factory:()=>new i9(we(Io),window)})}return n})();class i9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function o9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class R9 extends F5{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class VC extends R9{static makeCurrent(){!function k5(n){_C||(_C=n)}(new VC)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function P9(){return ip=ip||document.querySelector("base"),ip?ip.getAttribute("href"):null}();return null==t?null:function M9(n){Ey=Ey||document.createElement("a"),Ey.setAttribute("href",n);const e=Ey.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ip=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function D6(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Ey,ip=null,N9=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();const LC=new be("EventManagerPlugins");let Mx=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(we(LC),we(Vt))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();class xx{constructor(e){this._doc=e}}const UC="ng-app-id";let Nx=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yy(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${UC}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(UC),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(UC,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Io),we(b_),we($S,8),we(ko))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();const BC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$C=/%COMP%/g,V9=new be("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function kx(n,e){return e.map(t=>t.replace($C,n))}let Fx=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=yy(a),this.defaultRenderer=new jC(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r={...r,encapsulation:Yn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Lx?i.applyToHost(t):i instanceof HC&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:o=new Lx(u,l,r,this.appId,f,s,a,m);break;case Yn.ShadowDom:return new $9(u,l,t,r,s,a,this.nonce,m);default:o=new HC(u,l,r,f,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(we(Mx),we(Nx),we(b_),we(V9),we(Io),we(ko),we(Vt),we($S))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();class jC{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(BC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Vx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Vx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=BC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=BC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ja.DashCase|ja.Important)?e.style.setProperty(t,r,i&ja.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ja.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Wa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Vx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class $9 extends jC{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=kx(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class HC extends jC{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?kx(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Lx extends HC{constructor(e,t,r,i,o,s,a,u){const l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=function L9(n){return"_ngcontent-%COMP%".replace($C,n)}(l),this.hostAttr=function U9(n){return"_nghost-%COMP%".replace($C,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let j9=(()=>{class n extends xx{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(we(Io))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();const Ux=["alt","control","meta","shift"],H9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let q9=(()=>{class n extends xx{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wa().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ux.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=H9[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ux.forEach(s=>{s!==i&&(0,z9[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(we(Io))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();const K9=OM(E5,"browser",[{provide:ko,useValue:"browser"},{provide:BS,useValue:function G9(){VC.makeCurrent()},multi:!0},{provide:Io,useFactory:function Z9(){return function R$(n){OE=n}(document),document},deps:[]}]),Q9=new be(""),jx=[{provide:ty,useClass:class x9{addToWindow(e){Wt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new x(5103,!1);return o},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements(),Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(r=>{const i=Wt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Wa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:RM,useClass:sC,deps:[Vt,aC,ty]},{provide:sC,useClass:sC,deps:[Vt,aC,ty]}],Hx=[{provide:HE,useValue:"root"},{provide:Ks,useFactory:function W9(){return new Ks},deps:[]},{provide:LC,useClass:j9,multi:!0,deps:[Io,Vt,ko]},{provide:LC,useClass:q9,multi:!0,deps:[Io]},Fx,Nx,Mx,{provide:WS,useExisting:Fx},{provide:class s9{},useClass:N9,deps:[]},[]];let Y9=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:b_,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(we(Q9,12))};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({providers:[...Hx,...jx],imports:[X6,w5]})}return n})(),zx=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(we(Io))};static#t=this.\u0275prov=ze({token:n,factory:function(r){let i=null;return i=r?new r:function X9(){return new zx(we(Io))}(),i},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:o8}=Array,{getPrototypeOf:s8,prototype:a8,keys:u8}=Object;function Zx(n){if(1===n.length){const e=n[0];if(o8(e))return{args:e,keys:null};if(function c8(n){return n&&"object"==typeof n&&s8(n)===a8}(e)){const t=u8(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:l8}=Array;function Kx(n){return Oe(e=>function d8(n,e){return l8(e)?n(...e):n(e)}(n,e))}function Qx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qC(...n){const e=Ln(n),t=So(n),{args:r,keys:i}=Zx(n);if(0===r.length)return C([],e);const o=new lt(function h8(n,e,t=In){return r=>{Yx(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)Yx(e,()=>{const l=C(n[u],e);let f=!1;l.subscribe(Me(r,m=>{o[u]=m,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>Qx(i,s):In));return t?o.pipe(Kx(t)):o}function Yx(n,e,t){n?En(t,n,e):e()}const wy=De(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function GC(...n){return function f8(){return Cr(1)}()(C(n,Ln(n)))}function Jx(n){return new lt(e=>{kt(n()).subscribe(e)})}function op(n,e){const t=R(n)?n:()=>n,r=i=>i.error(t());return new lt(e?i=>e.schedule(r,0,i):r)}function WC(){return ie((n,e)=>{let t=null;n._refCount++;const r=Me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xx extends lt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,de(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;const t=this.getSubject();e.add(this.source.subscribe(Me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return WC()(this)}}function ld(n){return n<=0?()=>Vn:ie((e,t)=>{let r=0;e.subscribe(Me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cy(...n){const e=Ln(n);return ie((t,r)=>{(e?GC(n,t,e):GC(n,t)).subscribe(r)})}function qo(n,e){return ie((t,r)=>{let i=0;t.subscribe(Me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function by(n){return ie((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function eN(n=p8){return ie((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function p8(){return new wy}function Qa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qo((i,o)=>n(i,o,r)):In,ld(1),t?by(e):eN(()=>new wy))}function sp(n,e){return R(e)?rn(n,e,1):rn(n,1)}function Ur(n,e,t){const r=R(n)||e||t?{next:n,error:e,complete:t}:n;return r?ie((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Me(o,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),o.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):In}function vs(n){return ie((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Me(t,void 0,void 0,s=>{o=kt(n(s,vs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ty(n,e){return ie(function g8(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(Me(s,f=>{const m=l++;u=a?n(u,f,m):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(n,e,arguments.length>=2,!0))}function ZC(n){return n<=0?()=>Vn:ie((e,t)=>{let r=[];e.subscribe(Me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ec(n){return ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ft="primary",ap=Symbol("RouteTitle");class v8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function dd(n){return new v8(n)}function I8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Is(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tN(n[i],e[i]))return!1;return!0}function tN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function nN(n){return n.length>0?n[n.length-1]:null}function Ya(n){return function i8(n){return!!n&&(n instanceof lt||R(n.lift)&&R(n.subscribe))}(n)?n:$f(n)?C(Promise.resolve(n)):k(n)}const w8={exact:function oN(n,e,t){if(!tc(n.segments,e.segments)||!Dy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!oN(n.children[r],e.children[r],t))return!1;return!0},subset:sN},rN={exact:function C8(n,e){return Is(n,e)},subset:function b8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tN(n[t],e[t]))},ignored:()=>!0};function iN(n,e,t){return w8[t.paths](n.root,e.root,t.matrixParams)&&rN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sN(n,e,t){return aN(n,e,e.segments,t)}function aN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!tc(i,t)||e.hasChildren()||!Dy(i,t,r))}if(n.segments.length===t.length){if(!tc(n.segments,t)||!Dy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(tc(n.segments,i)&&Dy(n.segments,i,r)&&n.children[ft])&&aN(n.children[ft],e,o,r)}}function Dy(n,e,t){return e.every((r,i)=>rN[t](n[i].parameters,r.parameters))}class hd{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dd(this.queryParams)),this._queryParamMap}toString(){return A8.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ay(this)}}class up{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=dd(this.parameters)),this._parameterMap}toString(){return lN(this)}}function tc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let cp=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return new KC},providedIn:"root"})}return n})();class KC{parse(e){const t=new L8(e);return new hd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lp(e.root,!0)}`,r=function P8(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Sy(t)}=${Sy(i)}`).join("&"):`${Sy(t)}=${Sy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function S8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const A8=new KC;function Ay(n){return n.segments.map(e=>lN(e)).join("/")}function lp(n,e){if(!n.hasChildren())return Ay(n);if(e){const t=n.children[ft]?lp(n.children[ft],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ft&&r.push(`${i}:${lp(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function D8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ft&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ft&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ft?[lp(n.children[ft],!1)]:[`${i}:${lp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ft]?`${Ay(n)}/${t[0]}`:`${Ay(n)}/(${t.join("//")})`}}function uN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sy(n){return uN(n).replace(/%3B/gi,";")}function QC(n){return uN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ry(n){return decodeURIComponent(n)}function cN(n){return Ry(n.replace(/\+/g,"%20"))}function lN(n){return`${QC(n.path)}${function R8(n){return Object.keys(n).map(e=>`;${QC(e)}=${QC(n[e])}`).join("")}(n.parameters)}`}const M8=/^[^\/()?;#]+/;function YC(n){const e=n.match(M8);return e?e[0]:""}const x8=/^[^\/()?;=#]+/,O8=/^[^=?&#]+/,F8=/^[^&#]+/;class L8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ft]=new Xt(e,t)),r}parseSegment(){const e=YC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new up(Ry(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function N8(n){const e=n.match(x8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=YC(this.remaining);i&&(r=i,this.capture(r))}e[Ry(t)]=Ry(r)}parseQueryParam(e){const t=function k8(n){const e=n.match(O8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function V8(n){const e=n.match(F8);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=cN(t),o=cN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=YC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new x(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ft);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ft]:new Xt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}}function dN(n){return n.segments.length>0?new Xt([],{[ft]:n}):n}function hN(n){const e={};for(const r of Object.keys(n.children)){const o=hN(n.children[r]);if(r===ft&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function U8(n){if(1===n.numberOfChildren&&n.children[ft]){const e=n.children[ft];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function nc(n){return n instanceof hd}function fN(n){let e;const i=dN(function t(o){const s={};for(const u of o.children){const l=t(u);s[u.outlet]=l}const a=new Xt(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function pN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return JC(i,i,i,t,r);const o=function $8(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new mN(t,e,r)}(e);if(o.toRoot())return JC(i,i,new Xt([],{}),t,r);const s=function j8(n,e,t){if(n.isAbsolute)return new My(e,!0,0);if(!t)return new My(e,!1,NaN);if(null===t.parent)return new My(t,!0,0);const r=Py(n.commands[0])?0:1;return function H8(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new My(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?hp(s.segmentGroup,s.index,o.commands):_N(s.segmentGroup,s.index,o.commands);return JC(i,s.segmentGroup,a,t,r)}function Py(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function dp(n){return"object"==typeof n&&null!=n&&n.outlets}function JC(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),s=n===e?t:gN(n,e,t);const a=dN(hN(s));return new hd(a,o,i)}function gN(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:gN(o,e,t)}),new Xt(n.segments,r)}class mN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Py(r[0]))throw new x(4003,!1);const i=r.find(dp);if(i&&i!==nN(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class My{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function _N(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return hp(n,e,t);const r=function q8(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(dp(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!vN(u,l,s))return o;r+=2}else{if(!vN(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Xt(n.segments.slice(0,r.pathIndex),{});return o.children[ft]=new Xt(n.segments.slice(r.pathIndex),n.children),hp(o,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?XC(n,e,t):r.match?hp(n,0,i):XC(n,e,t)}function hp(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function z8(n){return dp(n[0])?n[0].outlets:{[ft]:n}}(t),i={};if(Object.keys(r).some(o=>o!==ft)&&n.children[ft]&&1===n.numberOfChildren&&0===n.children[ft].segments.length){const o=hp(n.children[ft],e,t);return new Xt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=_N(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Xt(n.segments,i)}}function XC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(dp(o)){const u=G8(o.outlets);return new Xt(r,u)}if(0===i&&Py(t[0])){r.push(new up(n.segments[e].path,yN(t[0]))),i++;continue}const s=dp(o)?o.outlets[ft]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Py(a)?(r.push(new up(s,yN(a))),i+=2):(r.push(new up(s,{})),i++)}return new Xt(r,{})}function G8(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=XC(new Xt([],{}),0,r))}),e}function yN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vN(n,e,t){return n==t.path&&Is(e,t.parameters)}const fp="imperative";class Es{constructor(e,t){this.id=e,this.url=t}}class xy extends Es{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ja extends Es{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pp extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fd extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ny extends Es{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class IN extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W8 extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z8 extends Es{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class K8 extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q8 extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class J8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class X8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eG{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tG{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nG{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class eb{}class tb{constructor(e){this.url=e}}class rG{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gp,this.attachRef=null}}let gp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new rG,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class wN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rb(e,this._root).map(t=>t.value)}}function nb(n,e){if(n===e.value)return e;for(const t of e.children){const r=nb(n,t);if(r)return r}return null}function rb(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rb(n,t);if(r.length)return r.unshift(e),r}return[]}class ia{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class CN extends wN{constructor(e,t){super(e),this.snapshot=t,ib(this,e)}toString(){return this.snapshot.toString()}}function bN(n,e){const t=function iG(n,e){const s=new Oy([],{},{},"",{},ft,e,null,{});return new DN("",new ia(s,[]))}(0,e),r=new w([new up("",{})]),i=new w({}),o=new w({}),s=new w({}),a=new w(""),u=new ji(r,i,s,a,o,ft,e,t.root);return u.snapshot=t.root,new CN(new ia(u,[]),t)}class ji{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(l=>l[ap]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>dd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>dd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function TN(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function oG(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Oy{get title(){return this.data?.[ap]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class DN extends wN{constructor(e,t){super(t),this.url=e,ib(this,t)}toString(){return AN(this._root)}}function ib(n,e){e.value._routerState=n,e.children.forEach(t=>ib(n,t))}function AN(n){const e=n.children.length>0?` { ${n.children.map(AN).join(", ")} } `:"";return`${n.value}${e}`}function ob(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Is(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Is(e.params,t.params)||n.paramsSubject.next(t.params),function E8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Is(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Is(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sb(n,e){const t=Is(n.params,e.params)&&function T8(n,e){return tc(n,e)&&n.every((t,r)=>Is(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sb(n.parent,e.parent))}let ab=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ft,this.activateEvents=new Hn,this.deactivateEvents=new Hn,this.attachEvents=new Hn,this.detachEvents=new Hn,this.parentContexts=Le(gp),this.location=Le(jo),this.changeDetector=Le(ry),this.environmentInjector=Le(_o),this.inputBinder=Le(ky,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new sG(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fi]})}return n})();class sG{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ji?this.route:e===gp?this.childContexts:this.parent.get(e,t)}}const ky=new be("");let SN=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=qC([r.queryParams,r.params,r.data]).pipe(Ve(([o,s,a],u)=>(a={...o,...s,...a},0===u?k(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function O5(n){const e=Tt(n);if(!e)return null;const t=new Ff(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();function mp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function uG(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return mp(n,r,i);return mp(n,r)})}(n,e,t);return new ia(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>mp(n,a)),s}}const r=function cG(n){return new ji(new w(n.url),new w(n.params),new w(n.queryParams),new w(n.fragment),new w(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>mp(n,o));return new ia(r,i)}}const ub="ngNavigationCancelingError";function RN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function PN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ub]=!0,r.cancellationCode=e,t&&(r.url=t),r}function MN(n){return n&&n[ub]}let xN=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["ng-component"]],standalone:!0,features:[M1],decls:1,vars:0,template:function(r,i){1&r&&ye(0,"router-outlet")},dependencies:[ab],encapsulation:2})}return n})();function cb(n){const e=n.children&&n.children.map(cb),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ft&&(t.component=xN),t}function Go(n){return n.outlet||ft}function _p(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _G{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ob(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=pd(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pd(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=pd(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new nG(o.value.snapshot))}),e.children.length&&this.forwardEvent(new eG(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(ob(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ob(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=_p(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class NN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Fy{constructor(e,t){this.component=e,this.route=t}}function yG(n,e,t){const r=n._root;return yp(r,e?e._root:null,t,[r.value])}function gd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function OI(n){return null!==Lc(n)}(n)?e.get(n):n:r}function yp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=pd(e);return n.children.forEach(s=>{(function IG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function EG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tc(n.url,e.url)||!Is(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sb(n,e)||!Is(n.queryParams,e.queryParams);default:return!sb(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new NN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),yp(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fy(a.outlet.component,s))}else s&&vp(e,a,i),i.canActivateChecks.push(new NN(r)),yp(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vp(a,t.getContext(s),i)),i}function vp(n,e,t){const r=pd(n),i=n.value;Object.entries(r).forEach(([o,s])=>{vp(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Fy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ip(n){return"function"==typeof n}function ON(n){return n instanceof wy||"EmptyError"===n?.name}const Vy=Symbol("INITIAL_VALUE");function md(){return Ve(n=>qC(n.map(e=>e.pipe(ld(1),Cy(Vy)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===Vy)return Vy;if(!1===t||t instanceof hd)return t}return!0}),qo(e=>e!==Vy),ld(1)))}function kN(n){return function li(...n){return di(n)}(Ur(e=>{if(nc(e))throw RN(0,e)}),Oe(e=>!0===e))}class Ly{constructor(e){this.segmentGroup=e||null}}class FN{constructor(e){this.urlTree=e}}function _d(n){return op(new Ly(n))}function VN(n){return op(new FN(n))}class $G{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new x(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[ft])return op(new x(4e3,!1));i=i.children[ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new hd(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Xt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const lb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jG(n,e,t,r,i){const o=db(n,e,t);return o.matched?(r=function dG(n,e){return n.providers&&!n._injector&&(n._injector=jw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function LG(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(s=>{const a=gd(s,n);return Ya(function AG(n){return n&&Ip(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(md(),kN()):k(!0)}(r,e,t).pipe(Oe(s=>!0===s?o:{...lb}))):k(o)}function db(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||I8)(t,n,e);if(!i)return{...lb};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function LN(n,e,t,r){return t.length>0&&function qG(n,e,t){return t.some(r=>Uy(n,e,r)&&Go(r)!==ft)}(n,t,r)?{segmentGroup:new Xt(e,zG(r,new Xt(t,n.children))),slicedSegments:[]}:0===t.length&&function GG(n,e,t){return t.some(r=>Uy(n,e,r))}(n,t,r)?{segmentGroup:new Xt(n.segments,HG(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xt(n.segments,n.children),slicedSegments:t}}function HG(n,e,t,r,i){const o={};for(const s of r)if(Uy(n,t,s)&&!i[Go(s)]){const a=new Xt([],{});o[Go(s)]=a}return{...i,...o}}function zG(n,e){const t={};t[ft]=e;for(const r of n)if(""===r.path&&Go(r)!==ft){const i=new Xt([],{});t[Go(r)]=i}return t}function Uy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class QG{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new $G(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,!1)}recognize(){const e=LN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ft).pipe(vs(t=>{if(t instanceof FN)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Ly?this.noMatchError(t):t}),Oe(t=>{const r=new Oy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ft,this.rootComponentType,null,{}),i=new ia(r,t),o=new DN("",i),s=function B8(n,e,t=null,r=null){return pN(fN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ft).pipe(vs(r=>{throw r instanceof Ly?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=TN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return C(i).pipe(sp(o=>{const s=r.children[o],a=function gG(n,e){const t=n.filter(r=>Go(r)===e);return t.push(...n.filter(r=>Go(r)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),Ty((o,s)=>(o.push(...s),o)),by(null),function m8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qo((i,o)=>n(i,o,r)):In,ZC(1),t?by(e):eN(()=>new wy))}(),rn(o=>{if(null===o)return _d(r);const s=UN(o);return function YG(n){n.sort((e,t)=>e.value.outlet===ft?-1:t.value.outlet===ft?1:e.value.outlet.localeCompare(t.value.outlet))}(s),k(s)}))}processSegment(e,t,r,i,o,s){return C(t).pipe(sp(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(vs(u=>{if(u instanceof Ly)return k(null);throw u}))),Qa(a=>!!a),vs(a=>{if(ON(a))return function ZG(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?k([]):_d(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return function WG(n,e,t,r){return!!(Go(n)===r||r!==ft&&Uy(e,t,n))&&("**"===n.path||db(e,n,t).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):_d(i):_d(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?VN(o):this.applyRedirects.lineralizeSegments(r,o).pipe(rn(s=>{const a=new Xt(s,{});return this.processSegment(e,t,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=db(t,i,o);if(!a)return _d(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?VN(m):this.applyRedirects.lineralizeSegments(i,m).pipe(rn(y=>this.processSegment(e,r,t,y.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a;if("**"===r.path){const u=i.length>0?nN(i).parameters:{};a=k({snapshot:new Oy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BN(r),Go(r),r.component??r._loadedComponent??null,r,$N(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=jG(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:l,remainingSegments:f,parameters:m})=>u?{snapshot:new Oy(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,BN(r),Go(r),r.component??r._loadedComponent??null,r,$N(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(Ve(u=>null===u?_d(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ve(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:y,remainingSegments:E}=u,{segmentGroup:S,slicedSegments:N}=LN(t,y,E,l);if(0===N.length&&S.hasChildren())return this.processChildren(f,l,S).pipe(Oe(Q=>null===Q?null:[new ia(m,Q)]));if(0===l.length&&0===N.length)return k([new ia(m,[])]);const V=Go(r)===o;return this.processSegment(f,l,S,N,V?ft:o,!0).pipe(Oe(Q=>[new ia(m,Q)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function VG(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(s=>{const a=gd(s,n);return Ya(function CG(n){return n&&Ip(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(md(),kN())}(e,t,r).pipe(rn(i=>i?this.configLoader.loadChildren(e,t).pipe(Ur(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function BG(n){return op(PN(!1,3))}())):k({routes:[],injector:e})}}function JG(n){const e=n.value.routeConfig;return e&&""===e.path}function UN(n){const e=[],t=new Set;for(const r of n){if(!JG(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=UN(r.children);e.push(new ia(r.value,i))}return e.filter(r=>!t.has(r))}function BN(n){return n.data||{}}function $N(n){return n.resolve||{}}function jN(n){return"string"==typeof n.title||null===n.title}function hb(n){return Ve(e=>{const t=n(e);return t?C(t).pipe(Oe(()=>e)):k(e)})}const yd=new be("ROUTES");let fb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Le(TM)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ya(t.loadComponent()).pipe(Oe(HN),Ur(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ec(()=>{this.componentLoaders.delete(t)})),i=new Xx(r,()=>new se).pipe(WC());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function oW(n,e,t,r){return Ya(n.loadChildren()).pipe(Oe(HN),rn(i=>i instanceof R1||Array.isArray(i)?k(i):C(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(yd,[],{optional:!0,self:!0}).flat()),{routes:s.map(cb),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(ec(()=>{this.childrenLoaders.delete(r)})),s=new Xx(o,()=>new se).pipe(WC());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HN(n){return function sW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let By=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new se,this.transitionAbortSubject=new se,this.configLoader=Le(fb),this.environmentInjector=Le(_o),this.urlSerializer=Le(cp),this.rootContexts=Le(gp),this.inputBindingEnabled=null!==Le(ky,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new J8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Y8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new w({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qo(o=>0!==o.id),Oe(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),Ve(o=>{this.currentTransition=o;let s=!1,a=!1;return k(o).pipe(Ur(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ve(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new fd(u.id,this.urlSerializer.serialize(u.rawUrl),y,0)),u.resolve(null),Vn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return k(u).pipe(Ve(y=>{const E=this.transitions?.getValue();return this.events.next(new xy(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),E!==this.transitions?.getValue()?Vn:Promise.resolve(y)}),function XG(n,e,t,r,i,o){return rn(s=>function KG(n,e,t,r,i,o,s="emptyOnly"){return new QG(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Oe(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ur(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects};const E=new IN(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(E)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:y,extractedUrl:E,source:S,restoredState:N,extras:V}=u,Q=new xy(y,this.urlSerializer.serialize(E),S,N);this.events.next(Q);const H=bN(0,this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:H,urlAfterRedirects:E,extras:{...V,skipLocationChange:!1,replaceUrl:!1}},k(o)}{const y="";return this.events.next(new fd(u.id,this.urlSerializer.serialize(u.extractedUrl),y,1)),u.resolve(null),Vn}}),Ur(u=>{const l=new W8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Oe(u=>(this.currentTransition=o={...u,guards:yG(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function RG(n,e){return rn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?k({...t,guardsResult:!0}):function PG(n,e,t,r){return C(n).pipe(rn(i=>function FG(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?k(o.map(a=>{const u=_p(e)??i,l=gd(a,u);return Ya(function DG(n){return n&&Ip(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(Qa())})).pipe(md()):k(!0)}(i.component,i.route,t,e,r)),Qa(i=>!0!==i,!0))}(s,r,i,n).pipe(rn(a=>a&&function wG(n){return"boolean"==typeof n}(a)?function MG(n,e,t,r){return C(e).pipe(sp(i=>GC(function NG(n,e){return null!==n&&e&&e(new X8(n)),k(!0)}(i.route.parent,r),function xG(n,e){return null!==n&&e&&e(new tG(n)),k(!0)}(i.route,r),function kG(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function vG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Jx(()=>k(s.guards.map(u=>{const l=_p(s.node)??t,f=gd(u,l);return Ya(function TG(n){return n&&Ip(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(Qa())})).pipe(md())));return k(o).pipe(md())}(n,i.path,t),function OG(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(o=>Jx(()=>{const s=_p(e)??t,a=gd(o,s);return Ya(function bG(n){return n&&Ip(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Qa())}));return k(i).pipe(md())}(n,i.route,t))),Qa(i=>!0!==i,!0))}(r,o,n,e):k(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Ur(u=>{if(o.guardsResult=u.guardsResult,nc(u.guardsResult))throw RN(0,u.guardsResult);const l=new Z8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),qo(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),hb(u=>{if(u.guards.canActivateChecks.length)return k(u).pipe(Ur(l=>{const f=new K8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),Ve(l=>{let f=!1;return k(l).pipe(function eW(n,e){return rn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let o=0;return C(i).pipe(sp(s=>function tW(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!jN(i)&&(o[ap]=i.title),function nW(n,e,t,r){const i=function rW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const o={};return C(i).pipe(rn(s=>function iW(n,e,t,r){const i=_p(e)??r,o=gd(n,i);return Ya(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Qa(),Ur(a=>{o[s]=a}))),ZC(1),function _8(n){return Oe(()=>n)}(o),vs(s=>ON(s)?Vn:op(s)))}(o,n,e,r).pipe(Oe(s=>(n._resolvedData=s,n.data=TN(n,t).resolve,i&&jN(i)&&(n.data[ap]=i.title),null)))}(s.route,r,n,e)),Ur(()=>o++),ZC(1),rn(s=>o===i.length?k(t):Vn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ur({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),Ur(l=>{const f=new Q8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),hb(u=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ur(y=>{f.component=y}),Oe(()=>{})));for(const y of f.children)m.push(...l(y));return m};return qC(l(u.targetSnapshot.root)).pipe(by(),ld(1))}),hb(()=>this.afterPreactivation()),Oe(u=>{const l=function aG(n,e,t){const r=mp(n,e._root,t?t._root:void 0);return new CN(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:l},o}),Ur(()=>{this.events.next(new eb)}),((n,e,t,r)=>Oe(i=>(new _G(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),ld(1),Ur({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ja(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function y8(n){return ie((e,t)=>{kt(n).subscribe(Me(t,()=>t.complete(),je)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ur(u=>{throw u}))),ec(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),vs(u=>{if(a=!0,MN(u))this.events.next(new pp(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function lG(n){return MN(n)&&nc(n.url)}(u)?this.events.next(new tb(u.url)):o.resolve(!1);else{this.events.next(new Ny(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(l){o.reject(l)}}return Vn}))}))}cancelNavigationTransition(t,r,i){const o=new pp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zN(n){return n!==fp}let qN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ft);return r}getResolvedTitleForRoute(t){return t.data[ap]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return Le(aW)},providedIn:"root"})}return n})(),aW=(()=>{class n extends qN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(we(zx))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return Le(lW)},providedIn:"root"})}return n})();class cW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let lW=(()=>{class n extends cW{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=cr(n)))(i||n)}}();static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $y=new be("",{providedIn:"root",factory:()=>({})});let dW=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:function(){return Le(hW)},providedIn:"root"})}return n})(),hW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ep=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ep||{});function GN(n,e){n.events.pipe(qo(t=>t instanceof Ja||t instanceof pp||t instanceof Ny||t instanceof fd),Oe(t=>t instanceof Ja||t instanceof fd?Ep.COMPLETE:t instanceof pp&&(0===t.code||1===t.code)?Ep.REDIRECTING:Ep.FAILED),qo(t=>t!==Ep.REDIRECTING),ld(1)).subscribe(()=>{e()})}function fW(n){throw n}function pW(n,e,t){return e.parse("/")}const gW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Le(CM),this.isNgZoneEnabled=!1,this._events=new se,this.options=Le($y,{optional:!0})||{},this.pendingTasks=Le(bM),this.errorHandler=this.options.errorHandler||fW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||pW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Le(dW),this.routeReuseStrategy=Le(uW),this.titleStrategy=Le(qN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Le(yd,{optional:!0})?.flat()??[],this.navigationTransitions=Le(By),this.urlSerializer=Le(cp),this.location=Le(IC),this.componentInputBindingEnabled=!!Le(ky,{optional:!0}),this.eventsSubscription=new xt,this.isNgZoneEnabled=Le(Vt)instanceof Vt&&Vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(WN(r)&&this._events.next(r));if(r instanceof xy)zN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof fd)this.rawUrlTree=i.rawUrl;else if(r instanceof IN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof eb)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof pp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof tb){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zN(i.source)};this.scheduleNavigation(o,fp,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Ny&&this.restoreHistory(i,!0),r instanceof Ja&&(this.navigated=!0),WN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),fp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...o};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}null!==f&&(f=this.removeEmptyProps(f));try{m=fN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return pN(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=nc(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fp,null,r)}navigate(t,r={skipLocationChange:!1}){return function _W(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new x(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...gW}:!1===r?{...mW}:r,nc(t))return iN(this.currentUrlTree,t,i);const o=this.parseUrl(t);return iN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return GN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WN(n){return!(n instanceof eb||n instanceof tb)}let jy=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new se,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ja&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function MS(n,e,t){return function Q$(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?PS:hs}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Hi),he(ji),function Ba(n){return function j(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Wc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(pr(),n)}("tabindex"),he(Zs),he(Xi),he(Xu))};static#t=this.\u0275dir=Je({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Lt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&gs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ud],skipLocationChange:["skipLocationChange","skipLocationChange",ud],replaceUrl:["replaceUrl","replaceUrl",ud],routerLink:"routerLink"},standalone:!0,features:[qR,Fi]})}return n})();class ZN{}let IW=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(qo(t=>t instanceof Ja),sp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=jw(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return C(i).pipe(Cr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const o=i.pipe(rn(s=>null===s?k(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?C([o,this.loader.loadComponent(r)]).pipe(Cr()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(we(Hi),we(TM),we(_o),we(ZN),we(fb))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pb=new be("");let KN=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ja?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof EN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new EN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function yR(){throw new Error("invalid")}()};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac})}return n})();function oa(n,e){return{\u0275kind:n,\u0275providers:e}}function YN(){const n=Le(Yr);return e=>{const t=n.get(ad);if(e!==t.components[0])return;const r=n.get(Hi),i=n.get(JN);1===n.get(gb)&&r.initialNavigation(),n.get(XN,null,mt.Optional)?.setUpPreloading(),n.get(pb,null,mt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const JN=new be("",{factory:()=>new se}),gb=new be("",{providedIn:"root",factory:()=>1}),XN=new be("");function bW(n){return oa(0,[{provide:XN,useExisting:IW},{provide:ZN,useExisting:n}])}const eO=new be("ROUTER_FORROOT_GUARD"),DW=[IC,{provide:cp,useClass:KC},Hi,gp,{provide:ji,useFactory:function QN(n){return n.routerState.root},deps:[Hi]},fb,[]];function AW(){return new xM("Router",Hi)}let mb=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[DW,[],{provide:yd,multi:!0,useValue:t},{provide:eO,useFactory:MW,deps:[[Hi,new Lr,new o_]]},{provide:$y,useValue:r||{}},r?.useHash?{provide:Xu,useClass:U5}:{provide:Xu,useClass:cx},{provide:pb,useFactory:()=>{const n=Le(r9),e=Le(Vt),t=Le($y),r=Le(By),i=Le(cp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new KN(i,r,n,e,t)}},r?.preloadingStrategy?bW(r.preloadingStrategy).\u0275providers:[],{provide:xM,multi:!0,useFactory:AW},r?.initialNavigation?xW(r):[],r?.bindToComponentInputs?oa(8,[SN,{provide:ky,useExisting:SN}]).\u0275providers:[],[{provide:tO,useFactory:YN},{provide:lC,multi:!0,useExisting:tO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:yd,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(we(eO,8))};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({})}return n})();function MW(n){return"guarded"}function xW(n){return["disabled"===n.initialNavigation?oa(3,[{provide:nC,multi:!0,useFactory:()=>{const e=Le(Hi);return()=>{e.setUpLocationChangeListener()}}},{provide:gb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?oa(2,[{provide:gb,useValue:0},{provide:nC,multi:!0,deps:[Yr],useFactory:e=>{const t=e.get(V5,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Hi),o=e.get(JN);GN(i,()=>{r(!0)}),e.get(By).afterPreactivation=()=>(r(!0),o.closed?k(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const tO=new be("");var qn=Ze(534);(0,qn.registerVersion)("firebase","10.12.2","app");class FW extends xt{constructor(e,t){super()}schedule(e,t=0){return this}}const Hy={setInterval(n,e,...t){const{delegate:r}=Hy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Hy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class nO extends FW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Hy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Hy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,$e(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const _b={now:()=>(_b.delegate||Date).now(),delegate:void 0};class wp{constructor(e,t=wp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}wp.now=_b.now;class rO extends wp{constructor(e,t=wp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const UW=new class LW extends rO{}(class VW extends nO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),yb=new rO(nO),sa=new jl("ANGULARFIRE2_VERSION");function vb(n,e,t){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===t);if(1===o.length)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}const zy=(n,e)=>{const t=e?[e]:(0,qn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class Cp{constructor(){return zy(BW)}}const BW="app-check";function vd(){}class iO{zone;delegate;constructor(e,t=UW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class $W{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vd,{},vd,vd)),t.pipe(Ur({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Id=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new iO(Zone.current)),this.insideAngular=t.run(()=>new iO(Zone.current,yb)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(we(Vt))};static \u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ed(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function rc(n){return Ed().ngZone.run(()=>n())}function oO(n){return n.pipe(wn(Ed().outsideAngular))}function Ei(n){return function HW(n){return function(t){return(t=t.lift(new $W(n.ngZone))).pipe(br(n.outsideAngular),wn(n.insideAngular))}}(Ed())(n)}const zW=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),rc(()=>n.apply(void 0,r))},Ib=(n,e)=>function(){let t;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(t||=rc(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vd,{},vd,vd))),r[o]=zW(r[o],t));const i=function jW(n){return Ed().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof lt){const o=Ed();return i.pipe(br(o.outsideAngular),wn(o.insideAngular))}return rc(()=>i)}return i instanceof lt?i.pipe(Ei):i instanceof Promise?rc(()=>new Promise((o,s)=>i.then(a=>rc(()=>o(a)),a=>rc(()=>s(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:rc(()=>i)};var Wo=Ze(106);Wo.Z.registerVersion("firebase","10.12.2","app-compat");const WW=["ngOnDestroy"];class sO{constructor(e){return e}}const bp=new be("angularfire2.app.options"),Tp=new be("angularfire2.app.name");function qy(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Wo.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Wo.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;QW("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sO(s)}const QW=(n,...e)=>{},YW={provide:sO,useFactory:qy,deps:[bp,Vt,[new Lr,Tp]]};let JW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:bp,useValue:t},{provide:Tp,useValue:r}]}}constructor(t){Wo.Z.registerVersion("angularfire",sa.full,"core"),Wo.Z.registerVersion("angularfire",sa.full,"app-compat"),Wo.Z.registerVersion("angular",rw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(we(ko))};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[YW]})}return n})();function Eb(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function XW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(aO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${e7?" You may need to reload as Firebase is not HMR aware.":""}`),aO("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const e7=typeof module<"u"&&!!module.hot,aO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ze(365);class t7 extends se{constructor(e=1/0,t=1/0,r=_b){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function uO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,le({connector:()=>new t7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function cO(n,e){return R(e)?Ve(()=>n,e):Ve(()=>n)}const lO=new be("angularfire2.auth.use-emulator"),dO=new be("angularfire2.auth.settings"),hO=new be("angularfire2.auth.tenant-id"),fO=new be("angularfire2.auth.langugage-code"),pO=new be("angularfire2.auth.use-device-language"),gO=new be("angularfire.auth.persistence"),mO=(n,e,t,r,i,o,s,a)=>Eb(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(const[l,f]of Object.entries(s))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]);let wb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,f,m,y,E){const S=new se,N=k(void 0).pipe(wn(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>Promise.resolve().then(Ze.bind(Ze,365)))),Oe(()=>qy(t,o,r)),Oe(V=>mO(V,o,a,l,f,m,u,y)),uO({bufferSize:1,refCount:!1}));if(yy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{N.pipe(Qa()).subscribe();const V=N.pipe(Ve(J=>J.getRedirectResult().then(ce=>ce,()=>null)),Ei,uO({bufferSize:1,refCount:!1})),Q=N.pipe(Ve(J=>new lt(ce=>({unsubscribe:o.runOutsideAngular(()=>J.onAuthStateChanged(Ce=>ce.next(Ce),Ce=>ce.error(Ce),()=>ce.complete()))})))),H=N.pipe(Ve(J=>new lt(ce=>({unsubscribe:o.runOutsideAngular(()=>J.onIdTokenChanged(Ce=>ce.next(Ce),Ce=>ce.error(Ce),()=>ce.complete()))}))));this.authState=V.pipe(cO(Q),br(s.outsideAngular),wn(s.insideAngular)),this.user=V.pipe(cO(H),br(s.outsideAngular),wn(s.insideAngular)),this.idToken=this.user.pipe(Ve(J=>J?C(J.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Ve(J=>J?C(J.getIdTokenResult()):k(null))),this.credential=A(V,S,this.authState.pipe(qo(J=>!J))).pipe(Oe(J=>J?.user?J:null),br(s.outsideAngular),wn(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(WW.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const u=a?.[o];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,m),m})})})}))(this,N,o,{spy:{apply:(V,Q,H)=>{(V.startsWith("signIn")||V.startsWith("createUser"))&&H.then(J=>S.next(J))}}})}static \u0275fac=function(r){return new(r||n)(we(bp),we(Tp,8),we(ko),we(Vt),we(Id),we(lO,8),we(dO,8),we(hO,8),we(fO,8),we(pO,8),we(gO,8),we(Cp,8))};static \u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),r7=(()=>{class n{constructor(){Wo.Z.registerVersion("angularfire",sa.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[wb]})}return n})();function Cb(){return ie((n,e)=>{let t,r=!1;n.subscribe(Me(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var ic,vO,ue=Ze(861),Gy=Ze(537),ws=Ze(879),ht=Ze(58),_O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yO={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(z,P,U){U||(U=0);var q=Array(16);if("string"==typeof P)for(var W=0;16>W;++W)q[W]=P.charCodeAt(U++)|P.charCodeAt(U++)<<8|P.charCodeAt(U++)<<16|P.charCodeAt(U++)<<24;else for(W=0;16>W;++W)q[W]=P[U++]|P[U++]<<8|P[U++]<<16|P[U++]<<24;var ee=z.g[3],B=(P=z.g[0])+(ee^(U=z.g[1])&((W=z.g[2])^ee))+q[0]+3614090360&4294967295;B=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=(U=(W=(ee=(P=U+(B<<7&4294967295|B>>>25))+((B=ee+(W^P&(U^W))+q[1]+3905402710&4294967295)<<12&4294967295|B>>>20))+((B=W+(U^ee&(P^U))+q[2]+606105819&4294967295)<<17&4294967295|B>>>15))+((B=U+(P^W&(ee^P))+q[3]+3250441966&4294967295)<<22&4294967295|B>>>10))+((B=P+(ee^U&(W^ee))+q[4]+4118548399&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^P&(U^W))+q[5]+1200080426&4294967295)<<12&4294967295|B>>>20))+((B=W+(U^ee&(P^U))+q[6]+2821735955&4294967295)<<17&4294967295|B>>>15))+((B=U+(P^W&(ee^P))+q[7]+4249261313&4294967295)<<22&4294967295|B>>>10))+((B=P+(ee^U&(W^ee))+q[8]+1770035416&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^P&(U^W))+q[9]+2336552879&4294967295)<<12&4294967295|B>>>20))+((B=W+(U^ee&(P^U))+q[10]+4294925233&4294967295)<<17&4294967295|B>>>15))+((B=U+(P^W&(ee^P))+q[11]+2304563134&4294967295)<<22&4294967295|B>>>10))+((B=P+(ee^U&(W^ee))+q[12]+1804603682&4294967295)<<7&4294967295|B>>>25))+((B=ee+(W^P&(U^W))+q[13]+4254626195&4294967295)<<12&4294967295|B>>>20))+((B=W+(U^ee&(P^U))+q[14]+2792965006&4294967295)<<17&4294967295|B>>>15))+((B=U+(P^W&(ee^P))+q[15]+1236535329&4294967295)<<22&4294967295|B>>>10))+((B=P+(W^ee&(U^W))+q[1]+4129170786&4294967295)<<5&4294967295|B>>>27))+((B=ee+(U^W&(P^U))+q[6]+3225465664&4294967295)<<9&4294967295|B>>>23))+((B=W+(P^U&(ee^P))+q[11]+643717713&4294967295)<<14&4294967295|B>>>18))+((B=U+(ee^P&(W^ee))+q[0]+3921069994&4294967295)<<20&4294967295|B>>>12))+((B=P+(W^ee&(U^W))+q[5]+3593408605&4294967295)<<5&4294967295|B>>>27))+((B=ee+(U^W&(P^U))+q[10]+38016083&4294967295)<<9&4294967295|B>>>23))+((B=W+(P^U&(ee^P))+q[15]+3634488961&4294967295)<<14&4294967295|B>>>18))+((B=U+(ee^P&(W^ee))+q[4]+3889429448&4294967295)<<20&4294967295|B>>>12))+((B=P+(W^ee&(U^W))+q[9]+568446438&4294967295)<<5&4294967295|B>>>27))+((B=ee+(U^W&(P^U))+q[14]+3275163606&4294967295)<<9&4294967295|B>>>23))+((B=W+(P^U&(ee^P))+q[3]+4107603335&4294967295)<<14&4294967295|B>>>18))+((B=U+(ee^P&(W^ee))+q[8]+1163531501&4294967295)<<20&4294967295|B>>>12))+((B=P+(W^ee&(U^W))+q[13]+2850285829&4294967295)<<5&4294967295|B>>>27))+((B=ee+(U^W&(P^U))+q[2]+4243563512&4294967295)<<9&4294967295|B>>>23))+((B=W+(P^U&(ee^P))+q[7]+1735328473&4294967295)<<14&4294967295|B>>>18))+((B=U+(ee^P&(W^ee))+q[12]+2368359562&4294967295)<<20&4294967295|B>>>12))+((B=P+(U^W^ee)+q[5]+4294588738&4294967295)<<4&4294967295|B>>>28))+((B=ee+(P^U^W)+q[8]+2272392833&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^P^U)+q[11]+1839030562&4294967295)<<16&4294967295|B>>>16))+((B=U+(W^ee^P)+q[14]+4259657740&4294967295)<<23&4294967295|B>>>9))+((B=P+(U^W^ee)+q[1]+2763975236&4294967295)<<4&4294967295|B>>>28))+((B=ee+(P^U^W)+q[4]+1272893353&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^P^U)+q[7]+4139469664&4294967295)<<16&4294967295|B>>>16))+((B=U+(W^ee^P)+q[10]+3200236656&4294967295)<<23&4294967295|B>>>9))+((B=P+(U^W^ee)+q[13]+681279174&4294967295)<<4&4294967295|B>>>28))+((B=ee+(P^U^W)+q[0]+3936430074&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^P^U)+q[3]+3572445317&4294967295)<<16&4294967295|B>>>16))+((B=U+(W^ee^P)+q[6]+76029189&4294967295)<<23&4294967295|B>>>9))+((B=P+(U^W^ee)+q[9]+3654602809&4294967295)<<4&4294967295|B>>>28))+((B=ee+(P^U^W)+q[12]+3873151461&4294967295)<<11&4294967295|B>>>21))+((B=W+(ee^P^U)+q[15]+530742520&4294967295)<<16&4294967295|B>>>16))+((B=U+(W^ee^P)+q[2]+3299628645&4294967295)<<23&4294967295|B>>>9))+((B=P+(W^(U|~ee))+q[0]+4096336452&4294967295)<<6&4294967295|B>>>26))+((B=ee+(U^(P|~W))+q[7]+1126891415&4294967295)<<10&4294967295|B>>>22))+((B=W+(P^(ee|~U))+q[14]+2878612391&4294967295)<<15&4294967295|B>>>17))+((B=U+(ee^(W|~P))+q[5]+4237533241&4294967295)<<21&4294967295|B>>>11))+((B=P+(W^(U|~ee))+q[12]+1700485571&4294967295)<<6&4294967295|B>>>26))+((B=ee+(U^(P|~W))+q[3]+2399980690&4294967295)<<10&4294967295|B>>>22))+((B=W+(P^(ee|~U))+q[10]+4293915773&4294967295)<<15&4294967295|B>>>17))+((B=U+(ee^(W|~P))+q[1]+2240044497&4294967295)<<21&4294967295|B>>>11))+((B=P+(W^(U|~ee))+q[8]+1873313359&4294967295)<<6&4294967295|B>>>26))+((B=ee+(U^(P|~W))+q[15]+4264355552&4294967295)<<10&4294967295|B>>>22))+((B=W+(P^(ee|~U))+q[6]+2734768916&4294967295)<<15&4294967295|B>>>17))+((B=U+(ee^(W|~P))+q[13]+1309151649&4294967295)<<21&4294967295|B>>>11))+((ee=(P=U+((B=P+(W^(U|~ee))+q[4]+4149444226&4294967295)<<6&4294967295|B>>>26))+((B=ee+(U^(P|~W))+q[11]+3174756917&4294967295)<<10&4294967295|B>>>22))^((W=ee+((B=W+(P^(ee|~U))+q[2]+718787259&4294967295)<<15&4294967295|B>>>17))|~P))+q[9]+3951481745&4294967295,z.g[0]=z.g[0]+P&4294967295,z.g[1]=z.g[1]+(W+(B<<21&4294967295|B>>>11))&4294967295,z.g[2]=z.g[2]+W&4294967295,z.g[3]=z.g[3]+ee&4294967295}function s(z,P){this.h=P;for(var U=[],q=!0,W=z.length-1;0<=W;W--){var ee=0|z[W];q&&ee==P||(U[W]=ee,q=!1)}this.g=U}(function e(z,P){function U(){}U.prototype=P.prototype,z.D=P.prototype,z.prototype=new U,z.prototype.constructor=z,z.C=function(q,W,ee){for(var B=Array(arguments.length-2),va=2;va<arguments.length;va++)B[va-2]=arguments[va];return P.prototype[W].apply(q,B)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(z,P){void 0===P&&(P=z.length);for(var U=P-this.blockSize,q=this.B,W=this.h,ee=0;ee<P;){if(0==W)for(;ee<=U;)i(this,z,ee),ee+=this.blockSize;if("string"==typeof z){for(;ee<P;)if(q[W++]=z.charCodeAt(ee++),W==this.blockSize){i(this,q),W=0;break}}else for(;ee<P;)if(q[W++]=z[ee++],W==this.blockSize){i(this,q),W=0;break}}this.h=W,this.o+=P},r.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var P=1;P<z.length-8;++P)z[P]=0;var U=8*this.o;for(P=z.length-8;P<z.length;++P)z[P]=255&U,U/=256;for(this.u(z),z=Array(16),P=U=0;4>P;++P)for(var q=0;32>q;q+=8)z[U++]=this.g[P]>>>q&255;return z};var a={};function u(z){return-128<=z&&128>z?function o(z,P){var U=a;return Object.prototype.hasOwnProperty.call(U,z)?U[z]:U[z]=P(z)}(z,function(P){return new s([0|P],0>P?-1:0)}):new s([0|z],0>z?-1:0)}function l(z){if(isNaN(z)||!isFinite(z))return m;if(0>z)return V(l(-z));for(var P=[],U=1,q=0;z>=U;q++)P[q]=z/U|0,U*=4294967296;return new s(P,0)}var m=u(0),y=u(1),E=u(16777216);function S(z){if(0!=z.h)return!1;for(var P=0;P<z.g.length;P++)if(0!=z.g[P])return!1;return!0}function N(z){return-1==z.h}function V(z){for(var P=z.g.length,U=[],q=0;q<P;q++)U[q]=~z.g[q];return new s(U,~z.h).add(y)}function Q(z,P){return z.add(V(P))}function H(z,P){for(;(65535&z[P])!=z[P];)z[P+1]+=z[P]>>>16,z[P]&=65535,P++}function J(z,P){this.g=z,this.h=P}function ce(z,P){if(S(P))throw Error("division by zero");if(S(z))return new J(m,m);if(N(z))return P=ce(V(z),P),new J(V(P.g),V(P.h));if(N(P))return P=ce(z,V(P)),new J(V(P.g),P.h);if(30<z.g.length){if(N(z)||N(P))throw Error("slowDivide_ only works with positive integers.");for(var U=y,q=P;0>=q.l(z);)U=Ce(U),q=Ce(q);var W=Be(U,1),ee=Be(q,1);for(q=Be(q,2),U=Be(U,2);!S(q);){var B=ee.add(q);0>=B.l(z)&&(W=W.add(U),ee=B),q=Be(q,1),U=Be(U,1)}return P=Q(z,W.j(P)),new J(W,P)}for(W=m;0<=z.l(P);){for(U=Math.max(1,Math.floor(z.m()/P.m())),q=48>=(q=Math.ceil(Math.log(U)/Math.LN2))?1:Math.pow(2,q-48),B=(ee=l(U)).j(P);N(B)||0<B.l(z);)B=(ee=l(U-=q)).j(P);S(ee)&&(ee=y),W=W.add(ee),z=Q(z,B)}return new J(W,z)}function Ce(z){for(var P=z.g.length+1,U=[],q=0;q<P;q++)U[q]=z.i(q)<<1|z.i(q-1)>>>31;return new s(U,z.h)}function Be(z,P){var U=P>>5;P%=32;for(var q=z.g.length-U,W=[],ee=0;ee<q;ee++)W[ee]=0<P?z.i(ee+U)>>>P|z.i(ee+U+1)<<32-P:z.i(ee+U);return new s(W,z.h)}(n=s.prototype).m=function(){if(N(this))return-V(this).m();for(var z=0,P=1,U=0;U<this.g.length;U++){var q=this.i(U);z+=(0<=q?q:4294967296+q)*P,P*=4294967296}return z},n.toString=function(z){if(2>(z=z||10)||36<z)throw Error("radix out of range: "+z);if(S(this))return"0";if(N(this))return"-"+V(this).toString(z);for(var P=l(Math.pow(z,6)),U=this,q="";;){var W=ce(U,P).g,ee=((0<(U=Q(U,W.j(P))).g.length?U.g[0]:U.h)>>>0).toString(z);if(S(U=W))return ee+q;for(;6>ee.length;)ee="0"+ee;q=ee+q}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h},n.l=function(z){return N(z=Q(this,z))?-1:S(z)?0:1},n.abs=function(){return N(this)?V(this):this},n.add=function(z){for(var P=Math.max(this.g.length,z.g.length),U=[],q=0,W=0;W<=P;W++){var ee=q+(65535&this.i(W))+(65535&z.i(W)),B=(ee>>>16)+(this.i(W)>>>16)+(z.i(W)>>>16);q=B>>>16,U[W]=(B&=65535)<<16|(ee&=65535)}return new s(U,-2147483648&U[U.length-1]?-1:0)},n.j=function(z){if(S(this)||S(z))return m;if(N(this))return N(z)?V(this).j(V(z)):V(V(this).j(z));if(N(z))return V(this.j(V(z)));if(0>this.l(E)&&0>z.l(E))return l(this.m()*z.m());for(var P=this.g.length+z.g.length,U=[],q=0;q<2*P;q++)U[q]=0;for(q=0;q<this.g.length;q++)for(var W=0;W<z.g.length;W++){var ee=this.i(q)>>>16,B=65535&this.i(q),va=z.i(W)>>>16,Mg=65535&z.i(W);U[2*q+2*W]+=B*Mg,H(U,2*q+2*W),U[2*q+2*W+1]+=ee*Mg,H(U,2*q+2*W+1),U[2*q+2*W+1]+=B*va,H(U,2*q+2*W+1),U[2*q+2*W+2]+=ee*va,H(U,2*q+2*W+2)}for(q=0;q<P;q++)U[q]=U[2*q+1]<<16|U[2*q];for(q=P;q<2*P;q++)U[q]=0;return new s(U,0)},n.A=function(z){return ce(this,z).h},n.and=function(z){for(var P=Math.max(this.g.length,z.g.length),U=[],q=0;q<P;q++)U[q]=this.i(q)&z.i(q);return new s(U,this.h&z.h)},n.or=function(z){for(var P=Math.max(this.g.length,z.g.length),U=[],q=0;q<P;q++)U[q]=this.i(q)|z.i(q);return new s(U,this.h|z.h)},n.xor=function(z){for(var P=Math.max(this.g.length,z.g.length),U=[],q=0;q<P;q++)U[q]=this.i(q)^z.i(q);return new s(U,this.h^z.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vO=yO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function f(z,P){if(0==z.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==z.charAt(0))return V(f(z.substring(1),P));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=l(Math.pow(P,8)),q=m,W=0;W<z.length;W+=8){var ee=Math.min(8,z.length-W),B=parseInt(z.substring(W,W+ee),P);8>ee?(ee=l(Math.pow(P,ee)),q=q.j(ee).add(l(B))):q=(q=q.j(U)).add(l(B))}return q},ic=yO.Integer=s}).apply(typeof _O<"u"?_O:typeof self<"u"?self:typeof window<"u"?window:{});var IO,EO,Dp,wO,Zy,bb,CO,bO,TO,Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Wy&&Wy];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var T=0;T<h.length-1;T++){var Z=h[T];if(!(Z in I))break e;I=I[Z]}(_=_(T=I[h=h[h.length-1]]))!=T&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function o(h,_){h instanceof String&&(h+="");var I=0,T=!1,Z={next:function(){if(!T&&I<h.length){var oe=I++;return{value:_(oe,h[oe]),done:!1}}return T=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}(this,function(_,I){return I})}});var s=s||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function l(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,T),h.apply(_,Z)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var T=I.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function S(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(T,Z,oe){for(var Se=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)Se[dn-2]=arguments[dn];return _.prototype[Z].apply(T,Se)}}function N(h){const _=h.length;if(0<_){const I=Array(_);for(let T=0;T<_;T++)I[T]=h[T];return I}return[]}function V(h,_){for(let I=1;I<arguments.length;I++){const T=arguments[I];if(u(T)){const Z=h.length||0,oe=T.length||0;h.length=Z+oe;for(let Se=0;Se<oe;Se++)h[Z+Se]=T[Se]}else h.push(T)}}function H(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ce(h){return ce[" "](h),h}ce[" "]=function(){};var Ce=!(-1==J().indexOf("Gecko")||-1!=J().toLowerCase().indexOf("webkit")&&-1==J().indexOf("Edge")||-1!=J().indexOf("Trident")||-1!=J().indexOf("MSIE")||-1!=J().indexOf("Edge"));function Be(h,_,I){for(const T in h)_.call(I,h[T],T,h)}function P(h){const _={};for(const I in h)_[I]=h[I];return _}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(h,_){let I,T;for(let Z=1;Z<arguments.length;Z++){for(I in T=arguments[Z],T)h[I]=T[I];for(let oe=0;oe<U.length;oe++)I=U[oe],Object.prototype.hasOwnProperty.call(T,I)&&(h[I]=T[I])}}function W(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function ee(h){a.setTimeout(()=>{throw h},0)}function B(){var h=FD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Mg=new class Q{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Mte,h=>h.reset());class Mte{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let xg,Ng=!1,FD=new class va{constructor(){this.h=this.g=null}add(_,I){const T=Mg.get();T.set(_,I),this.h?this.h.next=T:this.g=T,this.h=T}},mU=()=>{const h=a.Promise.resolve(void 0);xg=()=>{h.then(xte)}};var xte=()=>{for(var h;h=B();){try{h.h.call(h.g)}catch(I){ee(I)}var _=Mg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Ng=!1};function Eu(){this.s=this.s,this.C=this.C}function si(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Eu.prototype.s=!1,Eu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Eu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},si.prototype.h=function(){this.defaultPrevented=!0};var Nte=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function Og(h,_){if(si.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ce){e:{try{ce(_.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:Ote[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Og.aa.h.call(this)}}S(Og,si);var Ote={2:"touch",3:"pen",4:"mouse"};Og.prototype.h=function(){Og.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var kg="closure_listenable_"+(1e6*Math.random()|0),kte=0;function Fte(h,_,I,T,Z){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!T,this.ha=Z,this.key=++kte,this.da=this.fa=!1}function gI(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function mI(h){this.src=h,this.g={},this.h=0}function VD(h,_){var I=_.type;if(I in h.g){var oe,T=h.g[I],Z=Array.prototype.indexOf.call(T,_,void 0);(oe=0<=Z)&&Array.prototype.splice.call(T,Z,1),oe&&(gI(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function LD(h,_,I,T){for(var Z=0;Z<h.length;++Z){var oe=h[Z];if(!oe.da&&oe.listener==_&&oe.capture==!!I&&oe.ha==T)return Z}return-1}mI.prototype.add=function(h,_,I,T,Z){var oe=h.toString();(h=this.g[oe])||(h=this.g[oe]=[],this.h++);var Se=LD(h,_,T,Z);return-1<Se?(_=h[Se],I||(_.fa=!1)):((_=new Fte(_,this.src,oe,!!T,Z)).fa=I,h.push(_)),_};var UD="closure_lm_"+(1e6*Math.random()|0),BD={};function _U(h,_,I,T,Z){if(T&&T.once)return vU(h,_,I,T,Z);if(Array.isArray(_)){for(var oe=0;oe<_.length;oe++)_U(h,_[oe],I,T,Z);return null}return I=zD(I),h&&h[kg]?h.K(_,I,l(T)?!!T.capture:!!T,Z):yU(h,_,I,!1,T,Z)}function yU(h,_,I,T,Z,oe){if(!_)throw Error("Invalid event type");var Se=l(Z)?!!Z.capture:!!Z,dn=jD(h);if(dn||(h[UD]=dn=new mI(h)),(I=dn.add(_,I,T,Se,oe)).proxy)return I;if(T=function Vte(){const _=Lte;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=T,T.src=h,T.listener=I,h.addEventListener)Nte||(Z=Se),void 0===Z&&(Z=!1),h.addEventListener(_.toString(),T,Z);else if(h.attachEvent)h.attachEvent(EU(_.toString()),T);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(T)}return I}function vU(h,_,I,T,Z){if(Array.isArray(_)){for(var oe=0;oe<_.length;oe++)vU(h,_[oe],I,T,Z);return null}return I=zD(I),h&&h[kg]?h.L(_,I,l(T)?!!T.capture:!!T,Z):yU(h,_,I,!0,T,Z)}function IU(h,_,I,T,Z){if(Array.isArray(_))for(var oe=0;oe<_.length;oe++)IU(h,_[oe],I,T,Z);else T=l(T)?!!T.capture:!!T,I=zD(I),h&&h[kg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=LD(oe=h.g[_],I,T,Z))&&(gI(oe[I]),Array.prototype.splice.call(oe,I,1),0==oe.length&&(delete h.g[_],h.h--))):h&&(h=jD(h))&&(_=h.g[_.toString()],h=-1,_&&(h=LD(_,I,T,Z)),(I=-1<h?_[h]:null)&&$D(I))}function $D(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[kg])VD(_.i,h);else{var I=h.type,T=h.proxy;_.removeEventListener?_.removeEventListener(I,T,h.capture):_.detachEvent?_.detachEvent(EU(I),T):_.addListener&&_.removeListener&&_.removeListener(T),(I=jD(_))?(VD(I,h),0==I.h&&(I.src=null,_[UD]=null)):gI(h)}}}function EU(h){return h in BD?BD[h]:BD[h]="on"+h}function Lte(h,_){if(h.da)h=!0;else{_=new Og(_,this);var I=h.listener,T=h.ha||h.src;h.fa&&$D(h),h=I.call(T,_)}return h}function jD(h){return(h=h[UD])instanceof mI?h:null}var HD="__closure_events_fn_"+(1e9*Math.random()>>>0);function zD(h){return"function"==typeof h?h:(h[HD]||(h[HD]=function(_){return h.handleEvent(_)}),h[HD])}function ai(){Eu.call(this),this.i=new mI(this),this.M=this,this.F=null}function Ai(h,_){var I,T=h.F;if(T)for(I=[];T;T=T.F)I.push(T);if(h=h.M,T=_.type||_,"string"==typeof _)_=new si(_,h);else if(_ instanceof si)_.target=_.target||h;else{var Z=_;q(_=new si(T,h),Z)}if(Z=!0,I)for(var oe=I.length-1;0<=oe;oe--){var Se=_.g=I[oe];Z=_I(Se,T,!0,_)&&Z}if(Z=_I(Se=_.g=h,T,!0,_)&&Z,Z=_I(Se,T,!1,_)&&Z,I)for(oe=0;oe<I.length;oe++)Z=_I(Se=_.g=I[oe],T,!1,_)&&Z}function _I(h,_,I,T){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var Z=!0,oe=0;oe<_.length;++oe){var Se=_[oe];if(Se&&!Se.da&&Se.capture==I){var dn=Se.listener,Hr=Se.ha||Se.src;Se.fa&&VD(h.i,Se),Z=!1!==dn.call(Hr,T)&&Z}}return Z&&!T.defaultPrevented}function wU(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function CU(h){h.g=wU(()=>{h.g=null,h.i&&(h.i=!1,CU(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}S(ai,Eu),ai.prototype[kg]=!0,ai.prototype.removeEventListener=function(h,_,I,T){IU(this,h,_,I,T)},ai.prototype.N=function(){if(ai.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],T=0;T<I.length;T++)gI(I[T]);delete h.g[_],h.h--}}this.F=null},ai.prototype.K=function(h,_,I,T){return this.i.add(String(h),_,!1,I,T)},ai.prototype.L=function(h,_,I,T){return this.i.add(String(h),_,!0,I,T)};class Ute extends Eu{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:CU(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fg(h){Eu.call(this),this.h=h,this.g={}}S(Fg,Eu);var bU=[];function TU(h){Be(h.g,function(_,I){this.g.hasOwnProperty(I)&&$D(_)},h),h.g={}}Fg.prototype.N=function(){Fg.aa.N.call(this),TU(this)},Fg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qD=a.JSON.stringify,Bte=a.JSON.parse,$te=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function GD(){}function AU(){}GD.prototype.h=null;var Vg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function WD(){si.call(this,"d")}function ZD(){si.call(this,"c")}S(WD,si),S(ZD,si);var Mc={},SU=null;function yI(){return SU=SU||new ai}function RU(h){si.call(this,Mc.La,h)}function Lg(h){const _=yI();Ai(_,new RU(_))}function PU(h,_){si.call(this,Mc.STAT_EVENT,h),this.stat=_}function Si(h){const _=yI();Ai(_,new PU(_,h))}function MU(h,_){si.call(this,Mc.Ma,h),this.size=_}function Ug(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Bg(){this.g=!0}function dh(h,_,I,T){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function qte(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var T=I[h];if(!(2>T.length)){var Z=T[1];if(Array.isArray(Z)&&!(1>Z.length)){var oe=Z[0];if("noop"!=oe&&"stop"!=oe&&"close"!=oe)for(var Se=1;Se<Z.length;Se++)Z[Se]=""}}}return qD(I)}catch{return _}}(h,I)+(T?" "+T:"")})}Mc.La="serverreachability",S(RU,si),Mc.STAT_EVENT="statevent",S(PU,si),Mc.Ma="timingevent",S(MU,si),Bg.prototype.xa=function(){this.g=!1},Bg.prototype.info=function(){};var KD,vI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function II(){}function wu(h,_,I,T){this.j=h,this.i=_,this.l=I,this.R=T||1,this.U=new Fg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new NU}function NU(){this.i=null,this.g="",this.h=!1}S(II,GD),II.prototype.g=function(){return new XMLHttpRequest},II.prototype.i=function(){return{}},KD=new II;var OU={},QD={};function YD(h,_,I){h.L=1,h.v=bI(Ia(_)),h.m=I,h.P=!0,kU(h,null)}function kU(h,_){h.F=Date.now(),EI(h),h.A=Ia(h.v);var I=h.A,T=h.R;Array.isArray(T)||(T=[String(T)]),KU(I.i,"t",T),h.C=0,I=h.j.J,h.h=new NU,h.g=fB(h.j,I?_:null,!h.m),0<h.O&&(h.M=new Ute(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,T=h.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(bU[0]=Z.toString()),Z=bU);for(var oe=0;oe<Z.length;oe++){var Se=_U(I,Z[oe],T||_.handleEvent,!1,_.h||_);if(!Se)break;_.g[Se.key]=Se}_=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Lg(),function jte(h,_,I,T,Z,oe){h.info(function(){if(h.g)if(oe)for(var Se="",dn=oe.split("&"),Hr=0;Hr<dn.length;Hr++){var jt=dn[Hr].split("=");if(1<jt.length){var ui=jt[0];jt=jt[1];var ci=ui.split("_");Se=2<=ci.length&&"type"==ci[1]?Se+(ui+"=")+jt+"&":Se+(ui+"=redacted&")}}else Se=null;else Se=oe;return"XMLHTTP REQ ("+T+") [attempt "+Z+"]: "+_+"\n"+I+"\n"+Se})}(h.i,h.u,h.A,h.l,h.R,h.m)}function FU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Gte(h,_){var I=h.C,T=_.indexOf("\n",I);return-1==T?QD:(I=Number(_.substring(I,T)),isNaN(I)?OU:(T+=1)+I>_.length?QD:(_=_.slice(T,T+I),h.C=T+I,_))}function EI(h){h.S=Date.now()+h.I,VU(h,h.I)}function VU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Ug(y(h.ba,h),_)}function JD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function $g(h){0==h.j.G||h.J||cB(h.j,h)}function xc(h){JD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,TU(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function XD(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||eA(I.h,h)))if(!h.K&&eA(I.h,h)&&3==I.G){try{var T=I.Da.g.parse(_)}catch{T=null}if(Array.isArray(T)&&3==T.length){var Z=T;if(0==Z[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;RI(I),AI(I)}iA(I),Si(18)}}else I.za=Z[1],0<I.za-I.T&&37500>Z[2]&&I.F&&0==I.v&&!I.C&&(I.C=Ug(y(I.Za,I),6e3));if(1>=BU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Oc(I,11)}else if((h.K||I.g==h)&&RI(I),!H(_))for(Z=I.Da.g.parse(_),_=0;_<Z.length;_++){let jt=Z[_];if(I.T=jt[0],jt=jt[1],2==I.G)if("c"==jt[0]){I.K=jt[1],I.ia=jt[2];const ui=jt[3];null!=ui&&(I.la=ui,I.j.info("VER="+I.la));const ci=jt[4];null!=ci&&(I.Aa=ci,I.j.info("SVER="+I.Aa));const ph=jt[5];null!=ph&&"number"==typeof ph&&0<ph&&(I.L=T=1.5*ph,I.j.info("backChannelRequestTimeoutMs_="+T)),T=I;const Ko=h.g;if(Ko){const MI=Ko.g?Ko.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(MI){var oe=T.h;oe.g||-1==MI.indexOf("spdy")&&-1==MI.indexOf("quic")&&-1==MI.indexOf("h2")||(oe.j=oe.l,oe.g=new Set,oe.h&&(tA(oe,oe.h),oe.h=null))}if(T.D){const sA=Ko.g?Ko.g.getResponseHeader("X-HTTP-Session-Id"):null;sA&&(T.ya=sA,An(T.I,T.D,sA))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Se=h;if((T=I).qa=hB(T,T.J?T.ia:null,T.W),Se.K){$U(T.h,Se);var dn=Se,Hr=T.L;Hr&&(dn.I=Hr),dn.B&&(JD(dn),EI(dn)),T.g=Se}else aB(T);0<I.i.length&&SI(I)}else"stop"!=jt[0]&&"close"!=jt[0]||Oc(I,7);else 3==I.G&&("stop"==jt[0]||"close"==jt[0]?"stop"==jt[0]?Oc(I,7):rA(I):"noop"!=jt[0]&&I.l&&I.l.ta(jt),I.v=0)}Lg()}catch{}}function LU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function UU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function BU(h){return h.h?1:h.g?h.g.size:0}function eA(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function tA(h,_){h.g?h.g.add(_):h.h=_}function $U(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function jU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return N(h.i)}function HU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function Kte(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const T in h)_[I++]=T;return _}}}(h),T=function Zte(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,T=0;T<I;T++)_.push(h[T]);return _}for(T in _=[],I=0,h)_[I++]=h[T];return _}(h),Z=T.length,oe=0;oe<Z;oe++)_.call(void 0,T[oe],I&&I[oe],h)}wu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Ea(h)?_.j():this.Y(h)},wu.prototype.Y=function(h){try{if(h==this.g)e:{const ci=Ea(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>ci)&&(3!=ci||this.g&&(this.h.h||this.g.oa()||nB(this.g)))){this.J||4!=ci||7==_||Lg(),JD(this);var I=this.g.Z();this.X=I;t:if(FU(this)){var T=nB(this.g);h="";var Z=T.length,oe=4==Ea(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xc(this),$g(this);var Se="";break t}this.h.i=new a.TextDecoder}for(_=0;_<Z;_++)this.h.h=!0,h+=this.h.i.decode(T[_],{stream:!(oe&&_==Z-1)});T.length=0,this.h.g+=h,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=200==I,function Hte(h,_,I,T,Z,oe,Se){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+Z+"]: "+_+"\n"+I+"\n"+oe+" "+Se})}(this.i,this.u,this.A,this.l,this.R,ci,I),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Hr=this.g;if((dn=Hr.g?Hr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(dn)){var jt=dn;break t}}jt=null}if(!(I=jt)){this.o=!1,this.s=3,Si(12),xc(this),$g(this);break e}dh(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,XD(this,I)}if(this.P){let Ko;for(I=!0;!this.J&&this.C<Se.length;){if(Ko=Gte(this,Se),Ko==QD){4==ci&&(this.s=4,Si(14),I=!1),dh(this.i,this.l,null,"[Incomplete Response]");break}if(Ko==OU){this.s=4,Si(15),dh(this.i,this.l,Se,"[Invalid Chunk]"),I=!1;break}dh(this.i,this.l,Ko,null),XD(this,Ko)}if(FU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ci||0!=Se.length||this.h.h||(this.s=1,Si(16),I=!1),this.o=this.o&&I,I){if(0<Se.length&&!this.W){this.W=!0;var ui=this.j;ui.g==this&&ui.ba&&!ui.M&&(ui.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),oA(ui),ui.M=!0,Si(11))}}else dh(this.i,this.l,Se,"[Invalid Chunked Response]"),xc(this),$g(this)}else dh(this.i,this.l,Se,null),XD(this,Se);4==ci&&xc(this),this.o&&!this.J&&(4==ci?cB(this.j,this):(this.o=!1,EI(this)))}else(function cne(h){const _={};h=(h.g&&2<=Ea(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<h.length;T++){if(H(h[T]))continue;var I=W(h[T]);const Z=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const oe=_[Z]||[];_[Z]=oe,oe.push(I)}!function z(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(T){return T.join(", ")})})(this.g),400==I&&0<Se.indexOf("Unknown SID")?(this.s=3,Si(12)):(this.s=0,Si(13)),xc(this),$g(this)}}}catch{}},wu.prototype.cancel=function(){this.J=!0,xc(this)},wu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function zte(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Lg(),Si(17)),xc(this),this.s=2,$g(this)):VU(this,this.S-h)},LU.prototype.cancel=function(){if(this.i=jU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var zU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Nc){this.h=h.h,wI(this,h.j),this.o=h.o,this.g=h.g,CI(this,h.s),this.l=h.l;var _=h.i,I=new zg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),qU(this,I),this.m=h.m}else h&&(_=String(h).match(zU))?(this.h=!1,wI(this,_[1]||"",!0),this.o=jg(_[2]||""),this.g=jg(_[3]||"",!0),CI(this,_[4]),this.l=jg(_[5]||"",!0),qU(this,_[6]||"",!0),this.m=jg(_[7]||"")):(this.h=!1,this.i=new zg(null,this.h))}function Ia(h){return new Nc(h)}function wI(h,_,I){h.j=I?jg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function CI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function qU(h,_,I){_ instanceof zg?(h.i=_,function nne(h,_){_&&!h.j&&(Cu(h),h.i=null,h.g.forEach(function(I,T){var Z=T.toLowerCase();T!=Z&&(WU(this,T),KU(this,Z,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Hg(_,ene)),h.i=new zg(_,h.h))}function An(h,_,I){h.i.set(_,I)}function bI(h){return An(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function jg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,Yte),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yte(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Nc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Hg(_,GU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Hg(_,GU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Hg(I,"/"==I.charAt(0)?Xte:Jte,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Hg(I,tne)),h.join("")};var h,GU=/[#\/\?@]/g,Jte=/[#\?:]/g,Xte=/[#\?]/g,ene=/[#\?@]/g,tne=/#/g;function zg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Cu(h){h.g||(h.g=new Map,h.h=0,h.i&&function Qte(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var T=h[I].indexOf("="),Z=null;if(0<=T){var oe=h[I].substring(0,T);Z=h[I].substring(T+1)}else oe=h[I];_(oe,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function WU(h,_){Cu(h),_=hh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ZU(h,_){return Cu(h),_=hh(h,_),h.g.has(_)}function KU(h,_,I){WU(h,_),0<I.length&&(h.i=null,h.g.set(hh(h,_),N(I)),h.h+=I.length)}function hh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function bu(h,_,I,T,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),T(I)}catch{}}function one(){this.g=new $te}function sne(h,_,I){const T=I||"";try{HU(h,function(Z,oe){let Se=Z;l(Z)&&(Se=qD(Z)),_.push(T+oe+"="+encodeURIComponent(Se))})}catch(Z){throw _.push(T+"type="+encodeURIComponent("_badmap")),Z}}function qg(h){this.l=h.Ub||null,this.j=h.eb||!1}function TI(h,_){ai.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function QU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Gg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Wg(h)}function Wg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function YU(h){let _="";return Be(h,function(I,T){_+=T,_+=":",_+=I,_+="\r\n"}),_}function nA(h,_,I){e:{for(T in I){var T=!1;break e}T=!0}T||(I=YU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):An(h,_,I))}function Wn(h){ai.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=zg.prototype).add=function(h,_){Cu(this),this.i=null,h=hh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){Cu(this),this.g.forEach(function(I,T){I.forEach(function(Z){h.call(_,Z,T,this)},this)},this)},n.na=function(){Cu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let T=0;T<_.length;T++){const Z=h[T];for(let oe=0;oe<Z.length;oe++)I.push(_[T])}return I},n.V=function(h){Cu(this);let _=[];if("string"==typeof h)ZU(this,h)&&(_=_.concat(this.g.get(hh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return Cu(this),this.i=null,ZU(this,h=hh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var T=_[I];const oe=encodeURIComponent(String(T)),Se=this.V(T);for(T=0;T<Se.length;T++){var Z=oe;""!==Se[T]&&(Z+="="+encodeURIComponent(String(Se[T]))),h.push(Z)}}return this.i=h.join("&")},S(qg,GD),qg.prototype.g=function(){return new TI(this.l,this.j)},qg.prototype.i=(h={},function(){return h}),S(TI,ai),(n=TI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Wg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wg(this)),this.g&&(this.readyState=3,Wg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gg(this):Wg(this),3==this.readyState&&QU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Gg(this))},n.Qa=function(h){this.g&&(this.response=h,Gg(this))},n.ga=function(){this.g&&Gg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(TI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),S(Wn,ai);var ane=/^https?$/i,une=["POST","PUT"];function JU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,XU(h),DI(h)}function XU(h){h.A||(h.A=!0,Ai(h,"complete"),Ai(h,"error"))}function eB(h){if(h.h&&typeof s<"u"&&(!h.v[1]||4!=Ea(h)||2!=h.Z()))if(h.u&&4==Ea(h))wU(h.Ea,0,h);else if(Ai(h,"readystatechange"),4==Ea(h)){h.h=!1;try{const Se=h.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var T;if(T=0===Se){var Z=String(h.D).match(zU)[1]||null;!Z&&a.self&&a.self.location&&(Z=a.self.location.protocol.slice(0,-1)),T=!ane.test(Z?Z.toLowerCase():"")}I=T}if(I)Ai(h,"complete"),Ai(h,"success");else{h.m=6;try{var oe=2<Ea(h)?h.g.statusText:""}catch{oe=""}h.l=oe+" ["+h.Z()+"]",XU(h)}}finally{DI(h)}}}function DI(h,_){if(h.g){tB(h);const I=h.g,T=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Ai(h,"ready");try{I.onreadystatechange=T}catch{}}}function tB(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Ea(h){return h.g?h.g.readyState:0}function nB(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Zg(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function rB(h){this.Aa=0,this.i=[],this.j=new Bg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zg("baseRetryDelayMs",5e3,h),this.cb=Zg("retryDelaySeedMs",1e4,h),this.Wa=Zg("forwardChannelMaxRetries",2,h),this.wa=Zg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new LU(h&&h.concurrentRequestLimit),this.Da=new one,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function rA(h){if(iB(h),3==h.G){var _=h.U++,I=Ia(h.I);if(An(I,"SID",h.K),An(I,"RID",_),An(I,"TYPE","terminate"),Kg(h,I),(_=new wu(h,h.j,_)).L=2,_.v=bI(Ia(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=fB(_.j,null),_.g.ea(_.v)),_.F=Date.now(),EI(_)}dB(h)}function AI(h){h.g&&(oA(h),h.g.cancel(),h.g=null)}function iB(h){AI(h),h.u&&(a.clearTimeout(h.u),h.u=null),RI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function SI(h){if(!UU(h.h)&&!h.s){h.s=!0;var _=h.Ga;xg||mU(),Ng||(xg(),Ng=!0),FD.add(_,h),h.B=0}}function oB(h,_){var I;I=_?_.l:h.U++;const T=Ia(h.I);An(T,"SID",h.K),An(T,"RID",I),An(T,"AID",h.T),Kg(h,T),h.m&&h.o&&nA(T,h.m,h.o),I=new wu(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=sB(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),tA(h.h,I),YD(I,T,_)}function Kg(h,_){h.H&&Be(h.H,function(I,T){An(_,T,I)}),h.l&&HU({},function(I,T){An(_,T,I)})}function sB(h,_,I){I=Math.min(h.i.length,I);var T=h.l?y(h.l.Na,h.l,h):null;e:{var Z=h.i;let oe=-1;for(;;){const Se=["count="+I];-1==oe?0<I?(oe=Z[0].g,Se.push("ofs="+oe)):oe=0:Se.push("ofs="+oe);let dn=!0;for(let Hr=0;Hr<I;Hr++){let jt=Z[Hr].g;const ui=Z[Hr].map;if(jt-=oe,0>jt)oe=Math.max(0,Z[Hr].g-100),dn=!1;else try{sne(ui,Se,"req"+jt+"_")}catch{T&&T(ui)}}if(dn){T=Se.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,T}function aB(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;xg||mU(),Ng||(xg(),Ng=!0),FD.add(_,h),h.v=0}}function iA(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Ug(y(h.Fa,h),lB(h,h.v)),h.v++,0))}function oA(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function uB(h){h.g=new wu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Ia(h.qa);An(_,"RID","rpc"),An(_,"SID",h.K),An(_,"AID",h.T),An(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&An(_,"TO",h.ja),An(_,"TYPE","xmlhttp"),Kg(h,_),h.m&&h.o&&nA(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=bI(Ia(_)),I.m=null,I.P=!0,kU(I,h)}function RI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function cB(h,_){var I=null;if(h.g==_){RI(h),oA(h),h.g=null;var T=2}else{if(!eA(h.h,_))return;I=_.D,$U(h.h,_),T=1}if(0!=h.G)if(_.o)if(1==T){I=_.m?_.m.length:0,_=Date.now()-_.F;var Z=h.B;Ai(T=yI(),new MU(T,I)),SI(h)}else aB(h);else if(3==(Z=_.s)||0==Z&&0<_.X||!(1==T&&function lne(h,_){return!(BU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Ug(y(h.Ga,h,_),lB(h,h.B)),h.B++,0)))}(h,_)||2==T&&iA(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),Z){case 1:Oc(h,5);break;case 4:Oc(h,10);break;case 3:Oc(h,6);break;default:Oc(h,2)}}function lB(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function Oc(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),T=h.Xa;const Z=!T;T=new Nc(T||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||wI(T,"https"),bI(T),Z?function rne(h,_){const I=new Bg;if(a.Image){const T=new Image;T.onload=E(bu,I,"TestLoadImage: loaded",!0,_,T),T.onerror=E(bu,I,"TestLoadImage: error",!1,_,T),T.onabort=E(bu,I,"TestLoadImage: abort",!1,_,T),T.ontimeout=E(bu,I,"TestLoadImage: timeout",!1,_,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else _(!1)}(T.toString(),I):function ine(h,_){new Bg;const T=new AbortController,Z=setTimeout(()=>{T.abort(),bu(0,0,!1,_)},1e4);fetch(h,{signal:T.signal}).then(oe=>{clearTimeout(Z),bu(0,0,!!oe.ok,_)}).catch(()=>{clearTimeout(Z),bu(0,0,!1,_)})}(T.toString(),I)}else Si(2);h.G=0,h.l&&h.l.sa(_),dB(h),iB(h)}function dB(h){if(h.G=0,h.ka=[],h.l){const _=jU(h.h);(0!=_.length||0!=h.i.length)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.ra()}}function hB(h,_,I){var T=I instanceof Nc?Ia(I):new Nc(I);if(""!=T.g)_&&(T.g=_+"."+T.g),CI(T,T.s);else{var Z=a.location;T=Z.protocol,_=_?_+"."+Z.hostname:Z.hostname,Z=+Z.port;var oe=new Nc(null);T&&wI(oe,T),_&&(oe.g=_),Z&&CI(oe,Z),I&&(oe.l=I),T=oe}return _=h.ya,(I=h.D)&&_&&An(T,I,_),An(T,"VER",h.la),Kg(h,T),T}function fB(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Wn(h.Ca&&!h.pa?new qg({eb:I}):h.pa)).Ha(h.J),_}function pB(){}function PI(){}function oo(h,_){ai.call(this),this.g=new rB(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new fh(this)}function gB(h){WD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function mB(){ZD.call(this),this.status=1}function fh(h){this.g=h}(n=Wn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():KD.g(),this.v=function DU(h){return h.h||(h.h=h.i())}(this.o?this.o:KD),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(oe){return void JU(this,oe)}if(h=I||"",I=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var Z in T)I.set(Z,T[Z]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const oe of T.keys())I.set(oe,T.get(oe))}T=Array.from(I.keys()).find(oe=>"content-type"==oe.toLowerCase()),Z=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(une,_,void 0))||T||Z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Se]of I)this.g.setRequestHeader(oe,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tB(this),this.u=!0,this.g.send(h),this.u=!1}catch(oe){JU(this,oe)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ai(this,"complete"),Ai(this,"abort"),DI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),DI(this,!0)),Wn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eB(this):this.bb())},n.bb=function(){eB(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ea(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),Bte(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=rB.prototype).la=8,n.G=1,n.connect=function(h,_,I,T){Si(0),this.W=h,this.H=_||{},I&&void 0!==T&&(this.H.OSID=I,this.H.OAID=T),this.F=this.X,this.I=hB(this,null,this.W),SI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Z=new wu(this,this.j,h);let oe=this.o;if(this.S&&(oe?(oe=P(oe),q(oe,this.S)):oe=this.S),null!==this.m||this.O||(Z.H=oe,oe=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var T=this.i[I];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(_+=T)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=sB(this,Z,_),An(I=Ia(this.I),"RID",h),An(I,"CVER",22),this.D&&An(I,"X-HTTP-Session-Id",this.D),Kg(this,I),oe&&(this.O?_="headers="+encodeURIComponent(String(YU(oe)))+"&"+_:this.m&&nA(I,this.m,oe)),tA(this.h,Z),this.Ua&&An(I,"TYPE","init"),this.P?(An(I,"$req",_),An(I,"SID","null"),Z.T=!0,YD(Z,I,null)):YD(Z,I,_),this.G=2}}else 3==this.G&&(h?oB(this,h):0==this.i.length||UU(this.h)||oB(this))},n.Fa=function(){if(this.u=null,uB(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ug(y(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Si(10),AI(this),uB(this))},n.Za=function(){null!=this.C&&(this.C=null,AI(this),iA(this),Si(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Si(2)):(this.j.info("Failed to ping google.com"),Si(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=pB.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},PI.prototype.g=function(h,_){return new oo(h,_)},S(oo,ai),oo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},oo.prototype.close=function(){rA(this.g)},oo.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=qD(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&SI(_)},oo.prototype.N=function(){this.g.l=null,delete this.j,rA(this.g),delete this.g,oo.aa.N.call(this)},S(gB,WD),S(mB,ZD),S(fh,pB),fh.prototype.ua=function(){Ai(this.g,"a")},fh.prototype.ta=function(h){Ai(this.g,new gB(h))},fh.prototype.sa=function(h){Ai(this.g,new mB)},fh.prototype.ra=function(){Ai(this.g,"b")},PI.prototype.createWebChannel=PI.prototype.g,oo.prototype.send=oo.prototype.o,oo.prototype.open=oo.prototype.m,oo.prototype.close=oo.prototype.close,TO=aa.createWebChannelTransport=function(){return new PI},bO=aa.getStatEventTarget=function(){return yI()},CO=aa.Event=Mc,bb=aa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vI.NO_ERROR=0,vI.TIMEOUT=8,vI.HTTP_ERROR=6,Zy=aa.ErrorCode=vI,xU.COMPLETE="complete",wO=aa.EventType=xU,AU.EventType=Vg,Vg.OPEN="a",Vg.CLOSE="b",Vg.ERROR="c",Vg.MESSAGE="d",ai.prototype.listen=ai.prototype.K,Dp=aa.WebChannel=AU,EO=aa.FetchXmlHttpFactory=qg,Wn.prototype.listenOnce=Wn.prototype.L,Wn.prototype.getLastError=Wn.prototype.Ka,Wn.prototype.getLastErrorCode=Wn.prototype.Ba,Wn.prototype.getStatus=Wn.prototype.Z,Wn.prototype.getResponseJson=Wn.prototype.Oa,Wn.prototype.getResponseText=Wn.prototype.oa,Wn.prototype.send=Wn.prototype.ea,Wn.prototype.setWithCredentials=Wn.prototype.Ha,IO=aa.XhrIo=Wn}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});const DO="@firebase/firestore";class Dr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");let wd="10.12.1";const Xa=new ws.Yd("@firebase/firestore");function Cd(){return Xa.logLevel}function Ie(n,...e){if(Xa.logLevel<=ws.in.DEBUG){const t=e.map(Tb);Xa.debug(`Firestore (${wd}): ${n}`,...t)}}function tr(n,...e){if(Xa.logLevel<=ws.in.ERROR){const t=e.map(Tb);Xa.error(`Firestore (${wd}): ${n}`,...t)}}function zi(n,...e){if(Xa.logLevel<=ws.in.WARN){const t=e.map(Tb);Xa.warn(`Firestore (${wd}): ${n}`,...t)}}function Tb(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Fe(n="Unexpected state"){const e=`FIRESTORE (${wd}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function qe(n,e){n||Fe()}function Ae(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dr.UNAUTHENTICATED))}shutdown(){}}class a7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class u7{constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Er,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,ue.Z)(function*(){yield l.promise,yield o(r.currentUser)}))},u=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Er)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe("string"==typeof r.accessToken),new AO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(null===e||"string"==typeof e),new Dr(e)}}class c7{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class l7{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new c7(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe("string"==typeof t.token),this.R=t.token,new SO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function h7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class RO{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=h7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function st(n,e){return n<e?-1:n>e?1:0}function bd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function PO(n){return n+"\0"}class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new xn(0,0))}static max(){return new We(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ap{constructor(e,t,r){void 0===t?t=0:t>e.length&&Fe(),void 0===r?r=e.length-t:r>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ap.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ap?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pt extends Ap{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const f7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends Ap{construct(e,t,r){return new bn(e,t,r)}static isValidIdentifier(e){return f7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new _e(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new _e(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new _e(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new _e(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(t)}static emptyPath(){return new bn([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Pt.fromString(e))}static fromName(e){return new xe(Pt.fromString(e).popFirst(5))}static empty(){return new xe(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Pt(e.slice()))}}class Td{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Db(n){return n.fields.find(e=>2===e.kind)}function oc(n){return n.fields.filter(e=>2!==e.kind)}Td.UNKNOWN_ID=-1;class sc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Dd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Dd(0,no.min())}}function MO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new xn(t+1,0):new xn(t,r));return new no(i,xe.empty(),e)}function xO(n){return new no(n.readTime,n.key,-1)}class no{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new no(We.min(),xe.empty(),-1)}static max(){return new no(We.max(),xe.empty(),-1)}}function Ab(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=xe.comparator(n.documentKey,e.documentKey),0!==t?t:st(n.largestBatchId,e.largestBatchId))}const NO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function eu(n){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,ue.Z)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==NO)throw n;Ie("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,r)=>{t(e)})}static reject(e){return new Y((t,r)=>{r(e)})}static waitFor(e){return new Y((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=Y.resolve(!1);for(const r of e)t=t.next(i=>i?Y.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new Y((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new Y((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class Ky{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Er,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Sp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Rb(r.target.error);this.V.reject(new Sp(e,i))}}static open(e,t,r,i){try{return new Ky(t,e.transaction(i,r))}catch(o){throw new Sp(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _7(t)}}class Cs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Cs.S((0,ht.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ie("SimpleDb","Removing database:",e),ac(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ht.hl)())return!1;if(Cs.C())return!0;const e=(0,ht.z$)(),t=Cs.S(e),r=0<t&&t<10,i=kO(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ue.Z)(function*(){return t.db||(Ie("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new Sp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new _e(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new _e(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Sp(e,a))},o.onupgradeneeded=s=>{Ie("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{Ie("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ue.Z)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const u=Ky.open(o.db,e,s?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),Y.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(Ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),o.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function kO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class m7{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ac(this.B.delete())}}class Sp extends _e{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tu(n){return"IndexedDbTransactionError"===n.name}class _7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ie("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ac(r)}add(e){return Ie("SimpleDb","ADD",this.store.name,e,e),ac(this.store.add(e))}get(e){return ac(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ie("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ie("SimpleDb","DELETE",this.store.name,e),ac(this.store.delete(e))}count(){return Ie("SimpleDb","COUNT",this.store.name),ac(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new Y((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Y((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){Ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Y((r,i)=>{t.onerror=o=>{const s=Rb(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new Y((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new m7(a),l=t(a.primaryKey,a.value,u);if(l instanceof Y){const f=l.catch(m=>(u.done(),Y.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>Y.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ac(n){return new Y((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Rb(r.target.error);t(i)}})}let FO=!1;function Rb(n){const e=Cs.S((0,ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FO||(FO=!0,setTimeout(()=>{throw r},0)),r}}return n}class y7{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{Ie("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){tu(r)?Ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield eu(r)}yield t.X(6e4)}))}}class v7{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return Y.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return Ie("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(Ie("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=xO(o);Ab(s,r)>0&&(r=s)}),new no(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Rp(n){return null==n}function Pp(n){return 0===n&&1/n==-1/0}function VO(n){return"number"==typeof n&&Number.isInteger(n)&&!Pp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LO(e)),e=I7(n.get(t),e);return LO(e)}function I7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function LO(n){return n+"\x01\x01"}function bs(n){const e=n.length;if(qe(e>=2),2===e)return qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Fe(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Fe()}o=s+2}return new Pt(r)}const UO=["userId","batchId"];function Qy(n,e){return[n,ei(e)]}function BO(n,e,t){return[n,ei(e),t]}const E7={},w7=["prefixPath","collectionGroup","readTime","documentId"],C7=["prefixPath","collectionGroup","documentId"],b7=["collectionGroup","readTime","prefixPath","documentId"],T7=["canonicalId","targetId"],D7=["targetId","path"],A7=["path","targetId"],S7=["collectionId","parent"],R7=["indexId","uid"],P7=["uid","sequenceNumber"],M7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x7=["indexId","uid","orderedDocumentKey"],N7=["userId","collectionPath","documentId"],O7=["userId","collectionPath","largestBatchId"],k7=["userId","collectionGroup","largestBatchId"],$O=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F7=[...$O,"documentOverlays"],jO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HO=jO,zO=[...HO,"indexConfiguration","indexState","indexEntries"],V7=zO;class Pb extends OO{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ar(n,e){const t=Ae(n);return Cs.F(t._e,e)}function qO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _n{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new _n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new _n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yy(this.root,e,this.comparator,!0)}}class Yy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Br.RED,this.left=i??Br.EMPTY,this.right=o??Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Br(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Br.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new _n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ZO(this.data.getIterator())}getIteratorFrom(e){return new ZO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class ZO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ad(n){return n.hasNext()?n.getNext():void 0}class qi{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new qi([])}unionWith(e){let t=new sn(bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class KO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new KO("Invalid base64 string: "+o):o}}(e);return new wr(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const U7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(n){if(qe(!!n),"string"==typeof n){let e=0;const t=U7.exec(n);if(qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ca(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function Jy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Xy(n){const e=n.mapValue.fields.__previous_value__;return Jy(e)?Xy(e):e}function Mp(n){const e=ua(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class B7{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class ru{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ru("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}const iu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ev={nullValue:"NULL_VALUE"};function ou(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jy(n)?4:XO(n)?9007199254740991:10:Fe()}function Ts(n,e){if(n===e)return!0;const t=ou(n);if(t!==ou(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mp(n).isEqual(Mp(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ua(i.timestampValue),a=ua(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ca(n.bytesValue).isEqual(ca(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Gn(i.geoPointValue.latitude)===Gn(o.geoPointValue.latitude)&&Gn(i.geoPointValue.longitude)===Gn(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Gn(i.integerValue)===Gn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Gn(i.doubleValue),a=Gn(o.doubleValue);return s===a?Pp(s)===Pp(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return bd(n.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qO(s)!==qO(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!Ts(s[u],a[u])))return!1;return!0}(n,e);default:return Fe()}var o}function xp(n,e){return void 0!==(n.values||[]).find(t=>Ts(t,e))}function su(n,e){if(n===e)return 0;const t=ou(n),r=ou(e);if(t!==r)return st(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Gn(o.integerValue||o.doubleValue),u=Gn(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return QO(n.timestampValue,e.timestampValue);case 4:return QO(Mp(n),Mp(e));case 5:return st(n.stringValue,e.stringValue);case 6:return function(o,s){const a=ca(o),u=ca(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=st(a[l],u[l]);if(0!==f)return f}return st(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=st(Gn(o.latitude),Gn(s.latitude));return 0!==a?a:st(Gn(o.longitude),Gn(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const f=su(a[l],u[l]);if(f)return f}return st(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===iu.mapValue&&s===iu.mapValue)return 0;if(o===iu.mapValue)return 1;if(s===iu.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=st(u[m],f[m]);if(0!==y)return y;const E=su(a[u[m]],l[f[m]]);if(0!==E)return E}return st(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Fe()}}function QO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return st(n,e);const t=ua(n),r=ua(e),i=st(t.seconds,r.seconds);return 0!==i?i:st(t.nanos,r.nanos)}function Sd(n){return Mb(n)}function Mb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ua(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ca(n.bytesValue).toBase64():"referenceValue"in n?xe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Mb(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Mb(t.fields[s])}`;return i+"}"}(n.mapValue):Fe()}function uc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xb(n){return!!n&&"integerValue"in n}function Np(n){return!!n&&"arrayValue"in n}function YO(n){return!!n&&"nullValue"in n}function JO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nv(n){return!!n&&"mapValue"in n}function Op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Op(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function XO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $7(n){return"nullValue"in n?ev:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uc(ru.empty(),xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Fe()}function j7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uc(ru.empty(),xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?iu:Fe()}function ek(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function tk(n,e){const t=su(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Op(t)}setAll(e){let t=bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Op(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());nv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nu(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new $r(Op(this.value))}}function nk(n){const e=[];return nu(n.fields,(t,r)=>{const i=new bn([t]);if(nv(r)){const o=nk(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new qi(e)}class Tn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Tn(e,0,We.min(),We.min(),We.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new Tn(e,1,t,We.min(),r,i,0)}static newNoDocument(e,t){return new Tn(e,2,t,We.min(),We.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,We.min(),We.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class au{constructor(e,t){this.position=e,this.inclusive=t}}function rk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?xe.comparator(xe.fromName(s.referenceValue),t.key):su(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function ik(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ts(n.position[t],e.position[t]))return!1;return!0}class kp{constructor(e,t="asc"){this.field=e,this.dir=t}}function H7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ok{}class Mt extends ok{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new z7(e,t,r):"array-contains"===t?new W7(e,r):"in"===t?new dk(e,r):"not-in"===t?new Z7(e,r):"array-contains-any"===t?new K7(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new q7(e,r):new G7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(su(t,this.value)):null!==t&&ou(this.value)===ou(t)&&this.matchesComparison(su(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends ok{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new en(e,t)}matches(e){return Rd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rd(n){return"and"===n.op}function Nb(n){return"or"===n.op}function Ob(n){return sk(n)&&Rd(n)}function sk(n){for(const e of n.filters)if(e instanceof en)return!1;return!0}function kb(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Sd(n.value);if(Ob(n))return n.filters.map(e=>kb(e)).join(",");{const e=n.filters.map(t=>kb(t)).join(",");return`${n.op}(${e})`}}function ak(n,e){return n instanceof Mt?(r=n,(i=e)instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&Ts(r.value,i.value)):n instanceof en?function(r,i){return i instanceof en&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&ak(s,i.filters[a]),!0)}(n,e):void Fe();var r,i}function uk(n,e){const t=n.filters.concat(e);return en.create(t,n.op)}function ck(n){return n instanceof Mt?`${(t=n).field.canonicalString()} ${t.op} ${Sd(t.value)}`:n instanceof en?function(t){return t.op.toString()+" {"+t.getFilters().map(ck).join(" ,")+"}"}(n):"Filter";var t}class z7 extends Mt{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class q7 extends Mt{constructor(e,t){super(e,"in",t),this.keys=lk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class G7 extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=lk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>xe.fromName(r.referenceValue))}class W7 extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&xp(t.arrayValue,this.value)}}class dk extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xp(this.value.arrayValue,t)}}class Z7 extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xp(this.value.arrayValue,t)}}class K7 extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xp(this.value.arrayValue,r))}}class Q7{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Fb(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Q7(n,e,t,r,i,o,s)}function cc(n){const e=Ae(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sd(r)).join(",")),e.ue=t}return e.ue}function Fp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!H7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ak(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ik(n.startAt,e.startAt)&&ik(n.endAt,e.endAt)}function rv(n){return xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function iv(n,e){return n.filters.filter(t=>t instanceof Mt&&t.field.isEqual(e))}function hk(n,e,t){let r=ev,i=!0;for(const o of iv(n,e)){let s=ev,a=!0;switch(o.op){case"<":case"<=":s=$7(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ev}ek({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];ek({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function fk(n,e,t){let r=iu,i=!0;for(const o of iv(n,e)){let s=iu,a=!0;switch(o.op){case">=":case">":s=j7(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=iu}tk({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];tk({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class la{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function pk(n,e,t,r,i,o,s,a){return new la(n,e,t,r,i,o,s,a)}function Pd(n){return new la(n)}function gk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Vb(n){return null!==n.collectionGroup}function Md(n){const e=Ae(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new sn(bn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new kp(o,r))}),t.has(bn.keyField().canonicalString())||e.ce.push(new kp(bn.keyField(),r))}return e.ce}function ti(n){const e=Ae(n);return e.le||(e.le=function _k(n,e){if("F"===n.limitType)return Fb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new kp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new au(n.startAt.position,n.startAt.inclusive):null;return Fb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Md(n))),e.le}function Lb(n,e){const t=n.filters.concat([e]);return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ov(n,e,t){return new la(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vp(n,e){return Fp(ti(n),ti(e))&&n.limitType===e.limitType}function yk(n){return`${cc(ti(n))}|lt:${n.limitType}`}function xd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ck(i)).join(", ")}]`),Rp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sd(i)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function Lp(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Md(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const l=rk(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Md(r),i)||r.endAt&&!function(s,a,u){const l=rk(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Md(r),i)));var r,i}function vk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ik(n){return(e,t)=>{let r=!1;for(const i of Md(n)){const o=Y7(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Y7(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return null!==u&&null!==l?su(u,l):Fe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}class da{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return WO(this.inner)}size(){return this.innerSize}}const J7=new _n(xe.comparator);function Gi(){return J7}const Ek=new _n(xe.comparator);function Up(...n){let e=Ek;for(const t of n)e=e.insert(t.key,t);return e}function wk(n){let e=Ek;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ds(){return Bp()}function Ck(){return Bp()}function Bp(){return new da(n=>n.toString(),(n,e)=>n.isEqual(e))}const X7=new _n(xe.comparator),eZ=new sn(xe.comparator);function pt(...n){let e=eZ;for(const t of n)e=e.add(t);return e}const tZ=new sn(st);function Ub(){return tZ}function bk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pp(e)?"-0":e}}function Tk(n){return{integerValue:""+n}}function Dk(n,e){return VO(e)?Tk(e):bk(n,e)}class sv{constructor(){this._=void 0}}function nZ(n,e,t){return n instanceof Nd?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Jy(o)&&(o=Xy(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof lc?Sk(n,e):n instanceof dc?Rk(n,e):function(i,o){const s=Ak(i,o),a=Pk(s)+Pk(i.Pe);return xb(s)&&xb(i.Pe)?Tk(a):bk(i.serializer,a)}(n,e)}function rZ(n,e,t){return n instanceof lc?Sk(n,e):n instanceof dc?Rk(n,e):t}function Ak(n,e){return n instanceof Od?xb(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Nd extends sv{}class lc extends sv{constructor(e){super(),this.elements=e}}function Sk(n,e){const t=Mk(e);for(const r of n.elements)t.some(i=>Ts(i,r))||t.push(r);return{arrayValue:{values:t}}}class dc extends sv{constructor(e){super(),this.elements=e}}function Rk(n,e){let t=Mk(e);for(const r of n.elements)t=t.filter(i=>!Ts(i,r));return{arrayValue:{values:t}}}class Od extends sv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Pk(n){return Gn(n.integerValue||n.doubleValue)}function Mk(n){return Np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $p{constructor(e,t){this.field=e,this.transform=t}}class oZ{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function av(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class uv{}function xk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fd(n.key,Nn.none()):new kd(n.key,n.data,Nn.none());{const t=n.data,r=$r.empty();let i=new sn(bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ha(n.key,r,new qi(i.toArray()),Nn.none())}}function sZ(n,e,t){n instanceof kd?function(i,o,s){const a=i.value.clone(),u=kk(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ha?function(i,o,s){if(!av(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=kk(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Ok(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jp(n,e,t,r){return n instanceof kd?function(o,s,a,u){if(!av(o.precondition,s))return a;const l=o.value.clone(),f=Fk(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof ha?function(o,s,a,u){if(!av(o.precondition,s))return a;const l=Fk(o.fieldTransforms,u,s),f=s.data;return f.setAll(Ok(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,av(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function aZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Ak(r.transform,i||null);null!=o&&(null===t&&(t=$r.empty()),t.set(r.field,o))}return t||null}function Nk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&bd(r,i,(o,s)=>function iZ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof lc&&i instanceof lc||r instanceof dc&&i instanceof dc?bd(r.elements,i.elements,Ts):r instanceof Od&&i instanceof Od?Ts(r.Pe,i.Pe):r instanceof Nd&&i instanceof Nd);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class kd extends uv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ha extends uv{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ok(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kk(n,e,t){const r=new Map;qe(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,rZ(s,a,t[i]))}return r}function Fk(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,nZ(o,s,e))}return r}class Fd extends uv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bb extends uv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class $b{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&sZ(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=jp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=jp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ck();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=xk(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pt())}isEqual(e){return this.batchId===e.batchId&&bd(this.mutations,e.mutations,(t,r)=>Nk(t,r))&&bd(this.baseMutations,e.baseMutations,(t,r)=>Nk(t,r))}}class jb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length);let i=X7;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new jb(e,t,r,i)}}class Hb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uZ{constructor(e,t){this.count=e,this.unchangedNames=t}}var dr,Ut;function Lk(n){switch(n){default:return Fe();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function Uk(n){if(void 0===n)return tr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case dr.OK:return ne.OK;case dr.CANCELLED:return ne.CANCELLED;case dr.UNKNOWN:return ne.UNKNOWN;case dr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case dr.INTERNAL:return ne.INTERNAL;case dr.UNAVAILABLE:return ne.UNAVAILABLE;case dr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case dr.NOT_FOUND:return ne.NOT_FOUND;case dr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case dr.ABORTED:return ne.ABORTED;case dr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case dr.DATA_LOSS:return ne.DATA_LOSS;default:return Fe()}}(Ut=dr||(dr={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";function Bk(){return new TextEncoder}const cZ=new ic([4294967295,4294967295],0);function $k(n){const e=Bk().encode(n),t=new vO;return t.update(e),new Uint8Array(t.digest())}function jk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ic([t,r],0),new ic([i,o],0)]}class zb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hp(`Invalid padding: ${t}`);if(r<0)throw new Hp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Hp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Hp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ic.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ic.fromNumber(r)));return 1===i.compare(cZ)&&(i=new ic([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=$k(e),[r,i]=jk(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new zb(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=$k(e),[r,i]=jk(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Hp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zp{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zp(We.min(),i,new _n(st),Gi(),pt())}}class qp{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qp(r,t,pt(),pt(),pt())}}class lv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Hk{constructor(e,t){this.targetId=e,this.me=t}}class zk{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qk{constructor(){this.fe=0,this.ge=Wk(),this.pe=wr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=pt(),t=pt(),r=pt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe()}}),new qp(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=Wk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gi(),this.qe=Gk(),this.Qe=new _n(st)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Fe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(rv(o))if(0===r){const s=new xe(o.path);this.Ue(t,s,Tn.newNoDocument(s,We.min()))}else qe(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=ca(r).toUint8Array()}catch(u){if(u instanceof KO)return zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new zb(s,i,o)}catch(u){return zi(u instanceof Hp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&rv(a.target)){const u=new xe(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,Tn.newNoDocument(u,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=pt();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new zp(e,t,this.Qe,this.ke,r);return this.ke=Gi(),this.qe=Gk(),this.Qe=new _n(st),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new qk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new sn(st),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Gk(){return new _n(xe.comparator)}function Wk(){return new _n(xe.comparator)}const dZ={asc:"ASCENDING",desc:"DESCENDING"},hZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fZ={and:"AND",or:"OR"};class pZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qb(n,e){return n.useProto3Json||Rp(e)?e:{value:e}}function Vd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gZ(n,e){return Vd(n,e.toTimestamp())}function nr(n){return qe(!!n),We.fromTimestamp(function(t){const r=ua(t);return new xn(r.seconds,r.nanos)}(n))}function Gb(n,e){return Wb(n,e).canonicalString()}function Wb(n,e){const t=(i=n,new Pt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Kk(n){const e=Pt.fromString(n);return qe(sF(e)),e}function Gp(n,e){return Gb(n.databaseId,e.path)}function As(n,e){const t=Kk(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(Jk(t))}function Qk(n,e){return Gb(n.databaseId,e)}function Yk(n){const e=Kk(n);return 4===e.length?Pt.emptyPath():Jk(e)}function Zb(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jk(n){return qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Xk(n,e,t){return{name:Gp(n,e),fields:t.value.mapValue.fields}}function eF(n,e,t){const r=As(n,e.name),i=nr(e.updateTime),o=e.createTime?nr(e.createTime):We.min(),s=new $r({mapValue:{fields:e.fields}}),a=Tn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Wp(n,e){let t;if(e instanceof kd)t={update:Xk(n,e.key,e.value)};else if(e instanceof Fd)t={delete:Gp(n,e.key)};else if(e instanceof ha)t={update:Xk(n,e.key,e.data),updateMask:CZ(e.fieldMask)};else{if(!(e instanceof Bb))return Fe();t={verify:Gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Nd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Od)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Fe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gZ(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Fe()),t;var o}function Kb(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Nn.updateTime(nr(o.updateTime)):void 0!==o.exists?Nn.exists(o.exists):Nn.none():Nn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;"setToServerValue"in a?(qe("REQUEST_TIME"===a.setToServerValue),u=new Nd):"appendMissingElements"in a?u=new lc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new dc(a.removeAllFromArray.values||[]):"increment"in a?u=new Od(s,a.increment):Fe();const l=bn.fromServerFormat(a.fieldPath);return new $p(l,u)}(n,i)):[];var o;if(e.update){const i=As(n,e.update.name),o=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new qi((e.updateMask.fieldPaths||[]).map(f=>bn.fromServerFormat(f)));return new ha(i,o,s,t,r)}return new kd(i,o,t,r)}if(e.delete){const i=As(n,e.delete);return new Fd(i,t)}if(e.verify){const i=As(n,e.verify);return new Bb(i,t)}return Fe()}function tF(n,e){return{documents:[Qk(n,e.path)]}}function dv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Qk(n,i);const o=function(l){if(0!==l.length)return oF(en.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(f=>{return{field:uu((y=f).field),direction:IZ(y.dir)};var y})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=qb(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function rF(n){let e=Yk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){qe(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(m){const y=iF(m);return y instanceof en&&Ob(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(y=>{return new kp(Ld((S=y).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let a=null;t.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,Rp(y)?null:y}(t.limit));let u=null;var m;t.startAt&&(u=new au((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new au(m.values||[],!m.before)}(t.endAt)),pk(e,i,s,o,a,"F",u,l)}function iF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ld(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ld(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ld(t.unaryFilter.field);return Mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ld(t.unaryFilter.field);return Mt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(n):void 0!==n.fieldFilter?Mt.create(Ld((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return en.create(t.compositeFilter.filters.map(r=>iF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe()}}(t.compositeFilter.op))}(n):Fe();var t}function IZ(n){return dZ[n]}function EZ(n){return hZ[n]}function wZ(n){return fZ[n]}function uu(n){return{fieldPath:n.canonicalString()}}function Ld(n){return bn.fromServerFormat(n.fieldPath)}function oF(n){return n instanceof Mt?function(t){if("=="===t.op){if(JO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NAN"}};if(YO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(JO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NAN"}};if(YO(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uu(t.field),op:EZ(t.op),value:t.value}}}(n):n instanceof en?function(t){const r=t.getFilters().map(i=>oF(i));return 1===r.length?r[0]:{compositeFilter:{op:wZ(t.op),filters:r}}}(n):Fe()}function CZ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class fa{constructor(e,t,r,i,o=We.min(),s=We.min(),a=wr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aF{constructor(e){this.ct=e}}function uF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Gp(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Vd(o,s.version.toTimestamp()),createTime:Vd(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hc(e.version)};else{if(!e.isUnknownDocument())return Fe();r.unknownDocument={path:t.path.toArray(),version:hc(e.version)}}var o,s;return r}function hv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fc(n){const e=new xn(n.seconds,n.nanoseconds);return We.fromTimestamp(e)}function pc(n,e){const t=(e.baseMutations||[]).map(o=>Kb(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>Kb(n.ct,o)),i=xn.fromMillis(e.localWriteTimeMs);return new $b(e.batchId,i,t,r)}function Zp(n){const e=fc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fc(n.lastLimboFreeSnapshotVersion):We.min();let r;return r=void 0!==n.query.documents?(qe(1===(o=n.query).documents.length),ti(Pd(Yk(o.documents[0])))):function(o){return ti(rF(o))}(n.query),new fa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken));var o}function cF(n,e){const t=hc(e.snapshotVersion),r=hc(e.lastLimboFreeSnapshotVersion);let i;i=rv(e.target)?tF(n.ct,e.target):dv(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Qb(n){const e=rF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ov(e,e.limit,"L"):e}function Yb(n,e){return new Hb(e.largestBatchId,Kb(n.ct,e.overlayMutation))}function lF(n,e){const t=e.path.lastSegment();return[n,ei(e.path.popLast()),t]}function dF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:hc(r.readTime),documentKey:ei(r.documentKey.path),largestBatchId:r.largestBatchId}}class TZ{getBundleMetadata(e,t){return hF(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:fc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return hF(e).put({bundleId:(i=t).id,createTime:hc(nr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return fF(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Qb(o.bundledQuery),readTime:fc(o.readTime)};var o})}saveNamedQuery(e,t){return fF(e).put({name:(i=t).name,readTime:hc(nr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function hF(n){return Ar(n,"bundles")}function fF(n){return Ar(n,"namedQueries")}class fv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new fv(e,t.uid||"")}getOverlay(e,t){return Kp(e).get(lF(this.userId,t)).next(r=>r?Yb(this.serializer,r):null)}getOverlays(e,t){const r=Ds();return Y.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new Hb(t,s);i.push(this.ht(e,a))}),Y.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(ei(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Kp(e).j("collectionPathOverlayIndex",a))}),Y.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ds(),o=ei(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Kp(e).U("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=Yb(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ds();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const m=Yb(this.serializer,l);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):f.done()}).next(()=>o)}ht(e,t){return Kp(e).put(function(i,o,s){const[a,u,l]=lF(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Wp(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function Kp(n){return Ar(n,"documentOverlays")}class gc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Pp(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=ua(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ca(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?XO(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Fe()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),xe.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function DZ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function pF(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=DZ(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}gc.bt=new gc;class AZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const t=this.Bt(e),r=pF(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),r=pF(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class SZ{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class RZ{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Qp{constructor(){this.Gt=new AZ,this.zt=new SZ(this.Gt),this.jt=new RZ(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class mc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,r)}}function cu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=gF(n.arrayValue,e.arrayValue),0!==t?t:(t=gF(n.directionalValue,e.directionalValue),0!==t?t:xe.comparator(n.documentKey,e.documentKey)))}function gF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mF{constructor(e){this.Yt=new sn((t,r)=>bn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(qe(e.collectionGroup===this.collectionId),this.en)return!1;const t=Db(e);if(void 0!==t&&!this.nn(t))return!1;const r=oc(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o)if(s>=this.Zt.length||!this.sn(this.Zt[s++],r[o]))return!1;return!0}on(){if(this.en)return null;let e=new sn(bn.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new sc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new sc(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new sc(r.field,"asc"===r.dir?0:1)));return new Td(Td.UNKNOWN_ID,this.collectionId,t,Dd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function _F(n){var e,t;if(qe(n instanceof Mt||n instanceof en),n instanceof Mt){if(n instanceof dk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Mt.create(n.field,"==",o)))||[];return en.create(i,"or")}return n}const r=n.filters.map(i=>_F(i));return en.create(r,n.op)}function PZ(n){if(0===n.getFilters().length)return[];const e=e0(_F(n));return qe(yF(e)),Jb(e)||Xb(e)?[e]:e.getFilters()}function Jb(n){return n instanceof Mt}function Xb(n){return n instanceof en&&Ob(n)}function yF(n){return Jb(n)||Xb(n)||function(t){if(t instanceof en&&Nb(t)){for(const r of t.getFilters())if(!Jb(r)&&!Xb(r))return!1;return!0}return!1}(n)}function e0(n){if(qe(n instanceof Mt||n instanceof en),n instanceof Mt)return n;if(1===n.filters.length)return e0(n.filters[0]);const e=n.filters.map(r=>e0(r));let t=en.create(e,n.op);return t=pv(t),yF(t)?t:(qe(t instanceof en),qe(Rd(t)),qe(t.filters.length>1),t.filters.reduce((r,i)=>t0(r,i)))}function t0(n,e){let t;return qe(n instanceof Mt||n instanceof en),qe(e instanceof Mt||e instanceof en),t=n instanceof Mt?e instanceof Mt?en.create([n,e],"and"):vF(n,e):e instanceof Mt?vF(e,n):function(i,o){if(qe(i.filters.length>0&&o.filters.length>0),Rd(i)&&Rd(o))return uk(i,o.getFilters());const s=Nb(i)?i:o,a=Nb(i)?o:i,u=s.filters.map(l=>t0(l,a));return en.create(u,"or")}(n,e),pv(t)}function vF(n,e){if(Rd(e))return uk(e,n.getFilters());{const t=e.filters.map(r=>t0(n,r));return en.create(t,"or")}}function pv(n){if(qe(n instanceof Mt||n instanceof en),n instanceof Mt)return n;const e=n.getFilters();if(1===e.length)return pv(e[0]);if(sk(n))return n;const t=e.map(i=>pv(i)),r=[];return t.forEach(i=>{i instanceof Mt?r.push(i):i instanceof en&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:en.create(r,n.op)}class MZ{constructor(){this._n=new n0}addToCollectionParentIndex(e,t){return this._n.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(no.min())}updateCollectionGroup(e,t,r){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class n0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new sn(Pt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new sn(Pt.comparator)).toArray()}}const gv=new Uint8Array(0);class xZ{constructor(e,t){this.databaseId=t,this.an=new n0,this.un=new da(r=>cc(r),(r,i)=>Fp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const o={collectionId:r,parent:ei(i)};return IF(e).put(o)}return Y.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[PO(t),""],!1,!0);return IF(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(bs(s.parent))}return r})}addFieldIndex(e,t){const r=Yp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=Bd(e);return o.next(a=>{s.put(dF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Yp(e),i=Bd(e),o=Ud(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Yp(e),r=Ud(e),i=Bd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Y.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new mF(r).on();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ud(e);let i=!0;const o=new Map;return Y.forEach(this.cn(t),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=pt();const a=[];return Y.forEach(o,(u,l)=>{var J;Ie("IndexedDbIndexManager",`Using index ${J=u,`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map(ce=>`${ce.fieldPath}:${ce.kind}`).join(",")}`} to execute ${cc(t)}`);const f=function(J,ce){const Ce=Db(ce);if(void 0===Ce)return null;for(const Be of iv(J,Ce.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(l,u),m=function(J,ce){const Ce=new Map;for(const Be of oc(ce))for(const z of iv(J,Be.fieldPath))switch(z.op){case"==":case"in":Ce.set(Be.fieldPath.canonicalString(),z.value);break;case"not-in":case"!=":return Ce.set(Be.fieldPath.canonicalString(),z.value),Array.from(Ce.values())}return null}(l,u),y=function(J,ce){const Ce=[];let Be=!0;for(const z of oc(ce)){const P=0===z.kind?hk(J,z.fieldPath,J.startAt):fk(J,z.fieldPath,J.startAt);Ce.push(P.value),Be&&(Be=P.inclusive)}return new au(Ce,Be)}(l,u),E=function(J,ce){const Ce=[];let Be=!0;for(const z of oc(ce)){const P=0===z.kind?fk(J,z.fieldPath,J.endAt):hk(J,z.fieldPath,J.endAt);Ce.push(P.value),Be&&(Be=P.inclusive)}return new au(Ce,Be)}(l,u),S=this.hn(u,l,y),N=this.hn(u,l,E),V=this.Pn(u,l,m),Q=this.In(u.indexId,f,S,y.inclusive,N,E.inclusive,V);return Y.forEach(Q,H=>r.G(H,t.limit).next(J=>{J.forEach(ce=>{const Ce=xe.fromSegments(ce.documentKey);s.has(Ce)||(s=s.add(Ce),a.push(Ce))})}))}).next(()=>a)}return Y.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:PZ(en.create(e.filters,"and")).map(r=>Fb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,o,s,a){const u=(null!=t?t.length:1)*Math.max(r.length,o.length),l=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const y=t?this.Tn(t[m/l]):gv,E=this.En(e,y,r[m%l],i),S=this.dn(e,y,o[m%l],s),N=a.map(V=>this.En(e,y,V,!0));f.push(...this.createRange(E,S,N))}return f}En(e,t,r,i){const o=new mc(e,xe.empty(),t,r);return i?o:o.Jt()}dn(e,t,r,i){const o=new mc(e,xe.empty(),t,r);return i?o.Jt():o}ln(e,t){const r=new mF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.cn(t);return Y.forEach(i,o=>this.ln(e,o).next(s=>{s?0!==r&&s.fields.length<function(u){let l=new sn(bn.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:l=l.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Qp;for(const i of oc(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Ht(i.kind);gc.bt.Pt(o,s)}return r.Wt()}Tn(e){const t=new Qp;return gc.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Qp;return gc.bt.Pt(uc(this.databaseId,t),r.Ht(function(o){const s=oc(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Qp);let o=0;for(const s of oc(e)){const a=r[o++];for(const u of i)if(this.Vn(t,s.fieldPath)&&Np(a))i=this.mn(i,s,a);else{const l=u.Ht(s.kind);gc.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new Qp;u.seed(a.Wt()),gc.bt.Pt(s,u.Ht(t.kind)),o.push(u)}return o}Vn(e,t){return!!e.filters.find(r=>r instanceof Mt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Yp(e),i=Bd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return Y.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,m){const y=m?new Dd(m.sequenceNumber,new no(fc(m.readTime),new xe(bs(m.documentKey)),m.largestBatchId)):Dd.empty(),E=f.fields.map(([S,N])=>new sc(bn.fromServerFormat(S),N));return new Td(f.indexId,f.collectionGroup,E,y)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:st(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Yp(e),o=Bd(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>Y.forEach(a,u=>o.put(dF(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return Y.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?Y.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),Y.forEach(a,u=>this.pn(e,i,u).next(l=>{const f=this.yn(o,u);return l.isEqual(f)?Y.resolve():this.wn(e,o,u,l,f)}))))})}Sn(e,t,r,i){return Ud(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Ud(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Ud(e);let o=new sn(cu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(s,a)=>{o=o.add(new mc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,t){let r=new sn(cu);const i=this.An(t,e);if(null==i)return r;const o=Db(t);if(null!=o){const s=e.data.field(o.fieldPath);if(Np(s))for(const a of s.arrayValue.values||[])r=r.add(new mc(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new mc(t.indexId,e.key,gv,i));return r}wn(e,t,r,i,o){Ie("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(u,l,f,m,y){const E=u.getIterator(),S=l.getIterator();let N=Ad(E),V=Ad(S);for(;N||V;){let Q=!1,H=!1;if(N&&V){const J=f(N,V);J<0?H=!0:J>0&&(Q=!0)}else null!=N?H=!0:Q=!0;Q?(m(V),V=Ad(S)):H?(y(N),N=Ad(E)):(N=Ad(E),V=Ad(S))}}(i,o,cu,a=>{s.push(this.Sn(e,t,r,a))},a=>{s.push(this.bn(e,t,r,a))}),Y.waitFor(s)}gn(e){let t=1;return Bd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>cu(s,a)).filter((s,a,u)=>!a||0!==cu(s,u[a-1]));const i=[];i.push(e);for(const s of r){const a=cu(s,e),u=cu(s,t);if(0===a)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,gv,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,gv,[]]))}return o}Dn(e,t){return cu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(EF)}getMinOffset(e,t){return Y.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||Fe())).next(EF)}}function IF(n){return Ar(n,"collectionParents")}function Ud(n){return Ar(n,"indexEntries")}function Yp(n){return Ar(n,"indexConfiguration")}function Bd(n){return Ar(n,"indexState")}function EF(n){qe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ab(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new no(e.readTime,e.documentKey,t)}const wF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ni{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ni(e,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:s},(f,m,y)=>(a++,y.delete()));o.push(u.next(()=>{qe(1===a)}));const l=[];for(const f of t.mutations){const m=BO(e,f.key.path,t.batchId);o.push(i.delete(m)),l.push(f.key)}return Y.waitFor(o).next(()=>l)}function mv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Fe();e=n.noDocument}return JSON.stringify(e).length}ni.DEFAULT_COLLECTION_PERCENTILE=10,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ni.DEFAULT=new ni(41943040,ni.DEFAULT_COLLECTION_PERCENTILE,ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ni.DISABLED=new ni(-1,0,0);class _v{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){qe(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new _v(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=$d(e),s=lu(e);return s.add({}).next(a=>{qe("number"==typeof a);const u=new $b(a,t,r,i),l=function(E,S,N){const V=N.baseMutations.map(H=>Wp(E.ct,H)),Q=N.mutations.map(H=>Wp(E.ct,H));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:V,mutations:Q}}(this.serializer,this.userId,u),f=[];let m=new sn((y,E)=>st(y.canonicalString(),E.canonicalString()));for(const y of i){const E=BO(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(s.put(l)),f.push(o.put(E,E7))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),Y.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return lu(e).get(t).next(r=>r?(qe(r.userId===this.userId),pc(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?Y.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return lu(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(qe(a.batchId>=r),o=pc(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).U("userMutationsIndex",t).next(r=>r.map(i=>pc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Qy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return $d(e).J({range:i},(s,a,u)=>{const[l,f,m]=s,y=bs(f);if(l===this.userId&&t.path.isEqual(y))return lu(e).get(m).next(E=>{if(!E)throw Fe();qe(E.userId===this.userId),o.push(pc(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(st);const i=[];return t.forEach(o=>{const s=Qy(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=$d(e).J({range:a},(l,f,m)=>{const[y,E,S]=l,N=bs(E);y===this.userId&&o.path.isEqual(N)?r=r.add(S):m.done()});i.push(u)}),Y.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Qy(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new sn(st);return $d(e).J({range:s},(u,l,f)=>{const[m,y,E]=u,S=bs(y);m===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(lu(e).get(o).next(s=>{if(null===s)throw Fe();qe(s.userId===this.userId),r.push(pc(this.serializer,s))}))}),Y.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return CF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),Y.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Y.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $d(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=bs(o[1]);i.push(u)}else a.done()}).next(()=>{qe(0===i.length)})})}containsKey(e,t){return bF(e,this.userId,t)}xn(e){return TF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bF(n,e,t){const r=Qy(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return $d(n).J({range:o,H:!0},(a,u,l)=>{const[f,m,y]=a;f===e&&m===i&&(s=!0),l.done()}).next(()=>s)}function lu(n){return Ar(n,"mutations")}function $d(n){return Ar(n,"documentMutations")}function TF(n){return Ar(n,"mutationQueues")}class _c{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new _c(0)}static Ln(){return new _c(-1)}}class NZ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{const r=new _c(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>We.fromTimestamp(new xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jd(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(qe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return jd(e).J((s,a)=>{const u=Zp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>Y.waitFor(o)).next(()=>i)}forEachTarget(e,t){return jd(e).J((r,i)=>{const o=Zp(i);t(o)})}Bn(e){return DF(e).get("targetGlobalKey").next(t=>(qe(null!==t),t))}kn(e,t){return DF(e).put("targetGlobalKey",t)}qn(e,t){return jd(e).put(cF(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=cc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return jd(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=Zp(a);Fp(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=du(e);return t.forEach(s=>{const a=ei(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),Y.waitFor(i)}removeMatchingKeys(e,t,r){const i=du(e);return Y.forEach(t,o=>{const s=ei(o.path);return Y.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=du(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=du(e);let o=pt();return i.J({range:r,H:!0},(s,a,u)=>{const l=bs(s[1]),f=new xe(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){const r=ei(t.path),i=IDBKeyRange.bound([r],[PO(r)],!1,!0);let o=0;return du(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return jd(e).get(t).next(r=>r?Zp(r):null)}}function jd(n){return Ar(n,"targets")}function DF(n){return Ar(n,"targetGlobal")}function du(n){return Ar(n,"targetDocuments")}function AF([n,e],[t,r]){const i=st(n,t);return 0===i?st(e,r):i}class OZ{constructor(e){this.Kn=e,this.buffer=new sn(AF),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;Ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){tu(r)?Ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eu(r)}yield t.zn(3e5)}))}}class kZ{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Y.resolve(ro.oe);const r=new OZ(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(wF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wF):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,o,s,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Cd()<=ws.in.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-f}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class FZ{constructor(e,t){this.db=e,this.garbageCollector=function RF(n,e){return new kZ(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return yv(e,r)}removeReference(e,t,r){return yv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yv(e,t)}er(e,t){return function(i,o){let s=!1;return TF(i).Y(a=>bF(i,a,o).next(u=>(u&&(s=!0),Y.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=t){const u=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,We.min()),du(e).delete([0,ei(s.path)])))});i.push(u)}}).next(()=>Y.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yv(e,t)}Xn(e,t){const r=du(e);let i,o=ro.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{0===s?(o!==ro.oe&&t(new xe(bs(i)),o),o=l,i=u):o=ro.oe}).next(()=>{o!==ro.oe&&t(new xe(bs(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yv(n,e){return du(n).put((i=n.currentSequenceNumber,{targetId:0,path:ei(e.path),sequenceNumber:i}));var i}class PF{constructor(){this.changes=new da(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Y.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yc(e).put(r)}removeEntry(e,t,r){return yc(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],hv(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Tn.newInvalidDocument(t);return yc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(t))},(i,o)=>{r=this.nr(t,o)}).next(()=>r)}rr(e,t){let r={size:0,document:Tn.newInvalidDocument(t)};return yc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Jp(t))},(i,o)=>{r={document:this.nr(t,o),size:mv(o)}}).next(()=>r)}getEntries(e,t){let r=Gi();return this.ir(e,t,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,t){let r=Gi(),i=new _n(xe.comparator);return this.ir(e,t,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,mv(s))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return Y.resolve();let i=new sn(OF);t.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(Jp(i.first()),Jp(i.last())),s=i.getIterator();let a=s.getNext();return yc(e).J({index:"documentKeyIndex",range:o},(u,l,f)=>{const m=xe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&OF(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.$(Jp(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),hv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yc(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Gi();for(const m of l){const y=this.nr(xe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Lp(t,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=Gi();const s=NF(t,r),a=NF(t,no.max());return yc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{const m=this.nr(xe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(m.key,m),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new LZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xF(e).get("remoteDocumentGlobalKey").next(t=>(qe(!!t),t))}tr(e,t){return xF(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function bZ(n,e){let t;if(e.document)t=eF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=xe.fromSegments(e.noDocument.path),i=fc(e.noDocument.readTime);t=Tn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe();{const r=xe.fromSegments(e.unknownDocument.path),i=fc(e.unknownDocument.version);t=Tn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new xn(i[0],i[1]);return We.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return Tn.newInvalidDocument(e)}}function MF(n){return new VZ(n)}class LZ extends PF{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new da(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new sn((o,s)=>st(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(t.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=uF(this.ar.serializer,s);i=i.add(o.path.popLast());const l=mv(u);r+=l-a.size,t.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=uF(this.ar.serializer,s.convertToNoDocument(We.min()));t.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ar.updateMetadata(e,r)),Y.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function xF(n){return Ar(n,"remoteDocumentGlobal")}function yc(n){return Ar(n,"remoteDocumentsV14")}function Jp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NF(n,e){const t=e.documentKey.path.toArray();return[n,hv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=st(t[o],r[o]),i)return i;return i=st(t.length,r.length),i||(i=st(t[t.length-2],r[r.length-2]),i||st(t[t.length-1],r[r.length-1]))}class UZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&jp(r.mutation,i,qi.empty(),xn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pt()){const i=Ds();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Up();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Ds();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Gi();const s=Bp(),a=Bp();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof ha)?o=o.insert(l.key,l):void 0!==f?(s.set(l.key,f.mutation.getFieldMask()),jp(f.mutation,l,f.mutation.getFieldMask(),xn.now())):s.set(l.key,qi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new UZ(f,null!==(m=s.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Bp();let i=new _n((s,a)=>s-a),o=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||qi.empty();f=a.applyToLocalView(l,f),r.set(u,f);const m=(i.get(a.batchId)||pt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,m=Ck();f.forEach(y=>{if(!o.has(y)){const E=xk(t.get(y),r.get(y));null!==E&&m.set(y,E),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return Y.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return xe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Vb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Y.resolve(Ds());let a=-1,u=o;return s.next(l=>Y.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?Y.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,pt())).next(f=>({batchId:a,changes:wk(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(r=>{let i=Up();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Up();return this.indexManager.getCollectionParents(e,o).next(a=>Y.forEach(a,u=>{const l=(m=t,y=u.child(o),new la(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,y)=>{s=s.insert(m,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{const f=l.getKey();null===s.get(f)&&(s=s.insert(f,Tn.newInvalidDocument(f)))});let a=Up();return s.forEach((u,l)=>{const f=o.get(u);void 0!==f&&jp(f.mutation,l,qi.empty(),xn.now()),Lp(t,l)&&(a=a.insert(u,l))}),a})}}class BZ{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Y.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:nr(i.createTime)}),Y.resolve();var i}getNamedQuery(e,t){return Y.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:Qb(i.bundledQuery),readTime:nr(i.readTime)}),Y.resolve();var i}}class $Z{constructor(){this.overlays=new _n(xe.comparator),this.hr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ds();return Y.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),Y.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),Y.resolve()}getOverlaysForCollection(e,t,r){const i=Ds(),o=t.length+1,s=new xe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new _n((l,f)=>l-f);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);null===f&&(f=Ds(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=Ds(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return Y.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Hb(t,r));let o=this.hr.get(t);void 0===o&&(o=pt(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class r0{constructor(){this.Pr=new sn(Sr.Ir),this.Tr=new sn(Sr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Sr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Sr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new xe(new Pt([])),r=new Sr(t,e),i=new Sr(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new xe(new Pt([])),r=new Sr(t,e),i=new Sr(t,e+1);let o=pt();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Sr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Sr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return xe.comparator(e.key,t.key)||st(e.pr,t.pr)}static Er(e,t){return st(e.pr,t.pr)||xe.comparator(e.key,t.key)}}class jZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new sn(Sr.Ir)}checkEmpty(e){return Y.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new $b(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new Sr(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Y.resolve(s)}lookupMutationBatch(e,t){return Y.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sr(t,0),i=new Sr(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new sn(st);return t.forEach(i=>{const o=new Sr(i,0),s=new Sr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),Y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const s=new Sr(new xe(o),0);let a=new sn(st);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),Y.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){qe(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return Y.forEach(t.mutations,i=>{const o=new Sr(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Sr(t,0),i=this.wr.firstAfterOrEqual(r);return Y.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Y.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HZ{constructor(e){this.vr=e,this.docs=new _n(xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Y.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tn.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Gi();const s=t.path,a=new xe(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Ab(xO(f),r)<=0||(i.has(f.key)||Lp(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Fe()}Fr(e,t){return Y.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zZ(this)}getSize(e){return Y.resolve(this.size)}}class zZ extends PF{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),Y.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class qZ{constructor(e){this.persistence=e,this.Mr=new da(t=>cc(t),Fp),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Or=0,this.Nr=new r0,this.targetCount=0,this.Lr=_c.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),Y.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new _c(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.qn(t),Y.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Y.waitFor(o).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return Y.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),Y.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return Y.resolve(r)}containsKey(e,t){return Y.resolve(this.Nr.containsKey(t))}}class o0{constructor(e,t){this.Br={},this.overlays={},this.kr=new ro(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qZ(this),this.indexManager=new MZ,this.remoteDocumentCache=new HZ(r=>this.referenceDelegate.Kr(r)),this.serializer=new aF(t),this.$r=new BZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $Z,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new jZ(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ie("MemoryPersistence","Starting transaction:",e);const i=new GZ(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return Y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class GZ extends OO{constructor(e){super(),this.currentSequenceNumber=e}}class vv{constructor(e){this.persistence=e,this.zr=new r0,this.jr=null}static Hr(e){return new vv(e)}get Jr(){if(this.jr)return this.jr;throw Fe()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),Y.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Y.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Jr,r=>{const i=xe.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,We.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return Y.or([()=>Y.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class WZ{constructor(e){this.serializer=e}O(e,t,r,i){const o=new Ky("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UO,{unique:!0}),u.createObjectStore("documentMutations"),FF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=Y.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),FF(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UO,{unique:!0});const m=l.store("mutations"),y=f.map(E=>m.put(E));return Y.waitFor(y)})}(e,o))),s=s.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:N7});l.createIndex("collectionPathOverlayIndex",O7,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",k7,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:w7});l.createIndex("documentKeyIndex",C7),l.createIndex("collectionGroupIndex",b7)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:R7}).createIndex("sequenceNumberIndex",P7,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:M7}).createIndex("documentKeyIndex",x7,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=mv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Y.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>Y.forEach(a,u=>{qe(u.userId===o.userId);const l=pc(this.serializer,u);return CF(e,o.userId,l).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const u=new Pt(s),l=[0,ei(u)];o.push(t.get(l).next(f=>f?Y.resolve():t.put({targetId:0,path:ei(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Y.waitFor(o))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:S7});const r=t.store("collectionParents"),i=new n0,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ei(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const u=new Pt(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{const f=bs(a);return o(f.popLast())}))}ri(e){const t=e.store("targets");return t.J((r,i)=>{const o=Zp(i),s=cF(this.serializer,o);return t.put(s)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),u=(m=s,m.document?new xe(Pt.fromString(m.document.name).popFirst(5)):m.noDocument?xe.fromSegments(m.noDocument.path):m.unknownDocument?xe.fromSegments(m.unknownDocument.path):Fe()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>Y.waitFor(i))}si(e,t){const r=t.store("mutations"),i=MF(this.serializer),o=new o0(vv.Hr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:pt();pc(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),Y.forEach(a,(u,l)=>{const f=new Dr(l),m=fv.lt(this.serializer,f),y=o.getIndexManager(f),E=_v.lt(f,this.serializer,y,o.referenceDelegate);return new kF(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new Pb(t,ro.oe),u).next()})})}}function FF(n){n.createObjectStore("targetDocuments",{keyPath:D7}).createIndex("documentTargetsIndex",A7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T7,{unique:!0}),n.createObjectStore("targetGlobal")}const s0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class a0{constructor(e,t,r,i,o,s,a,u,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=y=>Promise.resolve(),!a0.D())throw new _e(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FZ(this,i),this.Ti=t+"main",this.serializer=new aF(u),this.Ei=new Cs(this.Ti,this.ui,new WZ(this.serializer)),this.Qr=new NZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=MF(this.serializer),this.$r=new TZ,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===f&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _e(ne.FAILED_PRECONDITION,s0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ro(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,ue.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,ue.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ev(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(tu(e))return Ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Xp(e).get("owner").next(t=>Y.resolve(this.Si(t)))}bi(e){return Ev(e).delete(this.clientId)}Di(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ar(r,"clientMetadata");return i.U().next(o=>{const s=e.vi(o,18e5),a=o.filter(u=>-1===s.indexOf(u));return Y.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Y.resolve(!0):Xp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new _e(ne.FAILED_PRECONDITION,s0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ev(e).U().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ie("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Pb(t,ro.oe);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Li()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Ev(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return _v.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xZ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return fv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){Ie("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=16===(u=this.ui)?V7:15===u?zO:14===u?HO:13===u?jO:12===u?F7:11===u?$O:void Fe();var u;let s;return this.Ei.runTransaction(e,i,o,a=>(s=new Pb(a,this.kr?this.kr.next():ro.oe),"readwrite-primary"===t?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new _e(ne.FAILED_PRECONDITION,NO);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Xp(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new _e(ne.FAILED_PRECONDITION,s0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xp(e).put("owner",t)}static D(){return Cs.D()}yi(e){const t=Xp(e);return t.get("owner").next(r=>this.Si(r)?(Ie("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Y.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ht.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xp(n){return Ar(n,"owner")}function Ev(n){return Ar(n,"clientMetadata")}function u0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class c0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=pt(),i=pt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new c0(e,t.fromCache,r,i)}}class ZZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class VF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ht.G6)()?8:kO((0,ht.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new ZZ;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Cd()<=ws.in.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",xd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Y.resolve()):(Cd()<=ws.in.DEBUG&&Ie("QueryEngine","Query:",xd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Cd()<=ws.in.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",xd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):Y.resolve())}ji(e,t){if(gk(t))return Y.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=ov(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=pt(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(t,a);return this.Xi(t,l,s,u.readTime)?this.ji(e,ov(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return gk(t)||i.isEqual(We.min())?Y.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?Y.resolve(null):(Cd()<=ws.in.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xd(t)),this.es(e,s,t,MO(i,-1)).next(a=>a))})}Zi(e,t){let r=new sn(Ik(e));return t.forEach((i,o)=>{Lp(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Cd()<=ws.in.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",xd(t)),this.zi.getDocumentsMatchingQuery(e,t,no.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class KZ{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new _n(st),this.rs=new da(o=>cc(o),Fp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function LF(n,e,t,r){return new KZ(n,e,t,r)}function UF(n,e){return l0.apply(this,arguments)}function l0(){return(l0=(0,ue.Z)(function*(n,e){const t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=pt();for(const l of i){s.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of o){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function BF(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function $F(n,e,t){let r=pt(),i=pt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Gi();return t.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(We.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function JZ(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hd(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,Y.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new fa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function zd(n,e,t){return d0.apply(this,arguments)}function d0(){return(d0=(0,ue.Z)(function*(n,e,t){const r=Ae(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!tu(s))throw s;Ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})).apply(this,arguments)}function wv(n,e,t){const r=Ae(n);let i=We.min(),o=pt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){const m=Ae(u),y=m.rs.get(f);return void 0!==y?Y.resolve(m.ns.get(y)):m.Qr.getTargetData(l,f)}(r,s,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:We.min(),t?o:pt())).next(a=>(zF(r,vk(e),a),{documents:a,hs:o})))}function jF(n,e){const t=Ae(n),r=Ae(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function HF(n,e){const t=Ae(n),r=t.ss.get(e)||We.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,MO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zF(t,e,i),i))}function zF(n,e,t){let r=n.ss.get(e)||We.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}function h0(){return(h0=(0,ue.Z)(function*(n,e,t,r){const i=Ae(n);let o=pt(),s=Gi();for(const l of t){const f=e.Ps(l.metadata.name);l.document&&(o=o.add(f));const m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(f,m)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Hd(i,(f=r,ti(Pd(Pt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>$F(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})).apply(this,arguments)}function eK(n,e){return f0.apply(this,arguments)}function f0(){return(f0=(0,ue.Z)(function*(n,e,t=pt()){const r=yield Hd(n,ti(Qb(e.bundledQuery))),i=Ae(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=nr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(wr.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,t,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})})).apply(this,arguments)}function qF(n,e){return`firestore_clients_${n}_${e}`}function GF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function p0(n,e){return`firestore_targets_${n}_${e}`}class Cv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new _e(i.error.code,i.error.message))),s?new Cv(e,t,i.state,o):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new _e(r.error.code,r.error.message))),o?new eg(e,r.state,i):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ub();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=VO(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new bv(e,o):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class g0{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new g0(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class m0{constructor(){this.activeTargetIds=Ub()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _0{constructor(e,t,r,i,o){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new _n(st),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=qF(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new m0),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.Bi();for(const i of t){if(i===e.Vs)continue;const o=e.getItem(qF(e.persistenceKey,i));if(o){const s=bv.Es(i,o);s&&(e.ps=e.ps.insert(s.clientId,s))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(p0(this.persistenceKey,e));if(r){const i=eg.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(p0(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ie("SharedClientState","READ",e,t),t}setItem(e,t){Ie("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ie("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(s){let a=ro.oe;if(null!=s)try{const u=JSON.parse(s);qe("number"==typeof u),a=u}catch(u){tr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==ro.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Ys(o)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){const i=new Cv(this.currentUser,e,t,r),o=GF(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){const t=GF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=p0(this.persistenceKey,e),o=new eg(e,t,r);this.setItem(i,o.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return bv.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return Cv.Es(new Dr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return eg.Es(i,t)}xs(e){return g0.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);Ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Ub();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class WF{constructor(){this.no=new m0,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new m0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tK{io(e){}shutdown(){}}class ZF{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tv=null;function y0(){return null===Tv?Tv=268435456+Math.round(2147483648*Math.random()):Tv++,"0x"+Tv.toString(16)}const nK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rK{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ri="WebChannelConnection";class iK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${o}`,this.bo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(t,r,i,o,s){const a=y0(),u=this.vo(t,r.toUriEncodedString());Ie("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(t,u,l,i).then(f=>(Ie("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw zi("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}xo(t,r,i,o,s,a){return this.Co(t,r,i,o,s)}Fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+wd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}vo(t,r){return`${this.wo}/v1/${r}:${nK[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){const o=y0();return new Promise((s,a)=>{const u=new IO;u.setWithCredentials(!0),u.listenOnce(wO.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zy.NO_ERROR:const f=u.getResponseJson();Ie(ri,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Zy.TIMEOUT:Ie(ri,`RPC '${e}' ${o} timed out`),a(new _e(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Zy.HTTP_ERROR:const m=u.getStatus();if(Ie(ri,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const S=function(V){const Q=V.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Q)>=0?Q:ne.UNKNOWN}(E.status);a(new _e(S,E.message))}else a(new _e(ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _e(ne.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Ie(ri,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);Ie(ri,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Oo(e,t,r){const i=y0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=TO(),a=bO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new EO({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=o.join("");Ie(ri,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=s.createWebChannel(f,u);let y=!1,E=!1;const S=new rK({lo:V=>{E?Ie(ri,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(y||(Ie(ri,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ie(ri,`RPC '${e}' stream ${i} sending:`,V),m.send(V))},ho:()=>m.close()}),N=(V,Q,H)=>{V.listen(Q,J=>{try{H(J)}catch(ce){setTimeout(()=>{throw ce},0)}})};return N(m,Dp.EventType.OPEN,()=>{E||(Ie(ri,`RPC '${e}' stream ${i} transport opened.`),S.mo())}),N(m,Dp.EventType.CLOSE,()=>{E||(E=!0,Ie(ri,`RPC '${e}' stream ${i} transport closed`),S.po())}),N(m,Dp.EventType.ERROR,V=>{E||(E=!0,zi(ri,`RPC '${e}' stream ${i} transport errored:`,V),S.po(new _e(ne.UNAVAILABLE,"The operation could not be completed")))}),N(m,Dp.EventType.MESSAGE,V=>{var Q;if(!E){const H=V.data[0];qe(!!H);const ce=H.error||(null===(Q=H[0])||void 0===Q?void 0:Q.error);if(ce){Ie(ri,`RPC '${e}' stream ${i} received error:`,ce);const Ce=ce.status;let Be=function(U){const q=dr[U];if(void 0!==q)return Uk(q)}(Ce),z=ce.message;void 0===Be&&(Be=ne.INTERNAL,z="Unknown error status: "+Ce+" with message "+ce.message),E=!0,S.po(new _e(Be,z)),m.close()}else Ie(ri,`RPC '${e}' stream ${i} received:`,H),S.yo(H)}}),N(a,CO.STAT_EVENT,V=>{V.stat===bb.PROXY?Ie(ri,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===bb.NOPROXY&&Ie(ri,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}}function KF(){return typeof window<"u"?window:null}function Dv(){return typeof document<"u"?document:null}function tg(n){return new pZ(n,!0)}class v0{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&Ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class QF{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new v0(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ue.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ue.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,ue.Z)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{const i=new _e(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ue.Z)(function*(){e.state=0,e.start()}))}c_(e){return Ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oK extends QF{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function _Z(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Fe(),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(qe(void 0===f||"string"==typeof f),wr.fromBase64String(f||"")):(qe(void 0===f||f instanceof Buffer||f instanceof Uint8Array),wr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const f=void 0===l.code?ne.UNKNOWN:Uk(l.code);return new _e(f,l.message||"")}(s);t=new zk(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=As(n,r.document.name),o=nr(r.document.updateTime),s=r.document.createTime?nr(r.document.createTime):We.min(),a=new $r({mapValue:{fields:r.document.fields}}),u=Tn.newFoundDocument(i,o,s,a);t=new lv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=As(n,r.document),o=r.readTime?nr(r.readTime):We.min(),s=Tn.newNoDocument(i,o);t=new lv([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=As(n,r.document);t=new lv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Fe();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new uZ(i,o);t=new Hk(r.targetId,s)}}var l;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return We.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?nr(s.readTime):We.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=Zb(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=rv(u)?{documents:tF(o,u)}:{query:dv(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Zk(o,s.resumeToken);const l=qb(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(We.min())>0){a.readTime=Vd(o,s.snapshotVersion.toTimestamp());const l=qb(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function vZ(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=Zb(this.serializer),t.removeTarget=e,this.i_(t)}}class sK extends QF{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function yZ(n,e){return n&&n.length>0?(qe(void 0!==e),n.map(t=>function(i,o){let s=nr(i.updateTime?i.updateTime:o);return s.isEqual(We.min())&&(s=nr(o)),new oZ(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.A_(r,t)}return qe(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Zb(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Wp(this.serializer,r))};this.i_(t)}}class aK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _e(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Wb(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ne.UNKNOWN,o.toString())})}xo(e,t,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Wb(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(ne.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class uK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(tr(t),this.y_=!1):Ie("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class cK{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{r.enqueueAndForget((0,ue.Z)(function*(){var u;hu(s)&&(Ie("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ue.Z)(function*(f){const m=Ae(f);m.M_.add(4),yield qd(m),m.N_.set("Unknown"),m.M_.delete(4),yield ng(m)}),function l(f){return u.apply(this,arguments)})(s))}))}),this.N_=new uK(r,i)}}function ng(n){return I0.apply(this,arguments)}function I0(){return(I0=(0,ue.Z)(function*(n){if(hu(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function qd(n){return E0.apply(this,arguments)}function E0(){return(E0=(0,ue.Z)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Av(n,e){const t=Ae(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),b0(t)?C0(t):Zd(t).Xo()&&w0(t,e))}function Gd(n,e){const t=Ae(n),r=Zd(t);t.F_.delete(e),r.Xo()&&YF(t,e),0===t.F_.size&&(r.Xo()?r.n_():hu(t)&&t.N_.set("Unknown"))}function w0(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zd(n).P_(e)}function YF(n,e){n.L_.xe(e),Zd(n).I_(e)}function C0(n){n.L_=new lZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Zd(n).start(),n.N_.w_()}function b0(n){return hu(n)&&!Zd(n).Zo()&&n.F_.size>0}function hu(n){return 0===Ae(n).M_.size}function JF(n){n.L_=void 0}function lK(n){return T0.apply(this,arguments)}function T0(){return(T0=(0,ue.Z)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function dK(n){return D0.apply(this,arguments)}function D0(){return(D0=(0,ue.Z)(function*(n){n.F_.forEach((e,t)=>{w0(n,e)})})).apply(this,arguments)}function hK(n,e){return A0.apply(this,arguments)}function A0(){return(A0=(0,ue.Z)(function*(n,e){JF(n),b0(n)?(n.N_.D_(e),C0(n)):n.N_.set("Unknown")})).apply(this,arguments)}function fK(n,e,t){return S0.apply(this,arguments)}function S0(){return S0=(0,ue.Z)(function*(n,e,t){if(n.N_.set("Online"),e instanceof zk&&2===e.state&&e.cause)try{yield(r=(0,ue.Z)(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.F_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.F_.delete(u),o.L_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){Ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sv(n,r)}else if(e instanceof lv?n.L_.Ke(e):e instanceof Hk?n.L_.He(e):n.L_.We(e),!t.isEqual(We.min()))try{const r=yield BF(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.L_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.F_.get(l);f&&o.F_.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const f=o.F_.get(u);if(!f)return;o.F_.set(u,f.withResumeToken(wr.EMPTY_BYTE_STRING,f.snapshotVersion)),YF(o,u);const m=new fa(f.target,u,l,f.sequenceNumber);w0(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Ie("RemoteStore","Failed to raise snapshot:",r),yield Sv(n,r)}var r}),S0.apply(this,arguments)}function Sv(n,e,t){return R0.apply(this,arguments)}function R0(){return(R0=(0,ue.Z)(function*(n,e,t){if(!tu(e))throw e;n.M_.add(1),yield qd(n),n.N_.set("Offline"),t||(t=()=>BF(n.localStore)),n.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){Ie("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield ng(n)}))})).apply(this,arguments)}function XF(n,e){return e().catch(t=>Sv(n,t,e))}function Wd(n){return P0.apply(this,arguments)}function P0(){return(P0=(0,ue.Z)(function*(n){const e=Ae(n),t=fu(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;pK(e);)try{const i=yield JZ(e.localStore,r);if(null===i){0===e.v_.length&&t.n_();break}r=i.batchId,gK(e,i)}catch(i){yield Sv(e,i)}eV(e)&&tV(e)})).apply(this,arguments)}function pK(n){return hu(n)&&n.v_.length<10}function gK(n,e){n.v_.push(e);const t=fu(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function eV(n){return hu(n)&&!fu(n).Zo()&&n.v_.length>0}function tV(n){fu(n).start()}function mK(n){return M0.apply(this,arguments)}function M0(){return(M0=(0,ue.Z)(function*(n){fu(n).V_()})).apply(this,arguments)}function _K(n){return x0.apply(this,arguments)}function x0(){return(x0=(0,ue.Z)(function*(n){const e=fu(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function yK(n,e,t){return N0.apply(this,arguments)}function N0(){return(N0=(0,ue.Z)(function*(n,e,t){const r=n.v_.shift(),i=jb.from(r,e,t);yield XF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wd(n)})).apply(this,arguments)}function vK(n,e){return O0.apply(this,arguments)}function O0(){return O0=(0,ue.Z)(function*(n,e){var t;e&&fu(n).E_&&(yield(t=(0,ue.Z)(function*(i,o){if(Lk(a=o.code)&&a!==ne.ABORTED){const s=i.v_.shift();fu(i).t_(),yield XF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Wd(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),eV(n)&&tV(n)}),O0.apply(this,arguments)}function nV(n,e){return k0.apply(this,arguments)}function k0(){return(k0=(0,ue.Z)(function*(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),Ie("RemoteStore","RemoteStore received new credentials");const r=hu(t);t.M_.add(3),yield qd(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield ng(t)})).apply(this,arguments)}function F0(n,e){return V0.apply(this,arguments)}function V0(){return(V0=(0,ue.Z)(function*(n,e){const t=Ae(n);e?(t.M_.delete(2),yield ng(t)):e||(t.M_.add(2),yield qd(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Zd(n){return n.B_||(n.B_=function(t,r,i){const o=Ae(t);return o.f_(),new oK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:lK.bind(null,n),To:dK.bind(null,n),Ao:hK.bind(null,n),h_:fK.bind(null,n)}),n.x_.push(function(){var e=(0,ue.Z)(function*(t){t?(n.B_.t_(),b0(n)?C0(n):n.N_.set("Unknown")):(yield n.B_.stop(),JF(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function fu(n){return n.k_||(n.k_=function(t,r,i){const o=Ae(t);return o.f_(),new sK(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:mK.bind(null,n),Ao:vK.bind(null,n),R_:_K.bind(null,n),A_:yK.bind(null,n)}),n.x_.push(function(){var e=(0,ue.Z)(function*(t){t?(n.k_.t_(),yield Wd(n)):(yield n.k_.stop(),n.v_.length>0&&(Ie("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class L0{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new L0(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _e(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kd(n,e){if(tr("AsyncQueue",`${e}: ${n}`),tu(n))return new _e(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class Qd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=Up(),this.sortedSet=new _n(this.comparator)}static emptySet(e){return new Qd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class rV{constructor(){this.q_=new _n(xe.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Fe():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Yd{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new Yd(e,t,Qd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class IK{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class EK{constructor(){this.queries=new da(e=>yk(e),Vp),this.onlineState="Unknown",this.z_=new Set}}function U0(n,e){return B0.apply(this,arguments)}function B0(){return(B0=(0,ue.Z)(function*(n,e){const t=Ae(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new IK,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield t.onListen(i,!0);break;case 1:o.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=Kd(s,`Initialization of query '${xd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.U_.push(e),e.j_(t.onlineState),o.K_&&e.H_(o.K_)&&H0(t)})).apply(this,arguments)}function $0(n,e){return j0.apply(this,arguments)}function j0(){return(j0=(0,ue.Z)(function*(n,e){const t=Ae(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),0===o.U_.length?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function wK(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&H0(t)}function CK(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const o of i.U_)o.onError(t);r.queries.delete(e)}function H0(n){n.z_.forEach(e=>{e.next()})}var z0,iV;(iV=z0||(z0={})).J_="default",iV.Cache="cache";class q0{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Yd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Yd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==z0.Cache}}class bK{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class oV{constructor(e){this.serializer=e}Ps(e){return As(this.serializer,e)}Is(e){return e.metadata.exists?eF(this.serializer,e.document,!1):Tn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return nr(e)}}class TK{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sV(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const r=Pt.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,r=new oV(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||pt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function XZ(n,e,t,r){return h0.apply(this,arguments)}(e.localStore,new oV(e.serializer),e.documents,e.oa.id),r=e.aa(e.documents);for(const i of e.queries)yield eK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:t}})()}}function sV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class aV{constructor(e){this.key=e}}class uV{constructor(e){this.key=e}}class cV{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pt(),this.mutatedKeys=pt(),this.Ia=Ik(e),this.Ta=new Qd(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new rV,i=t?t.Ta:this.Ta;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),E=Lp(this.query,m)?m:null,S=!!y&&this.mutatedKeys.has(y.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let V=!1;y&&E?y.data.isEqual(E.data)?S!==N&&(r.track({type:3,doc:E}),V=!0):this.Ra(y,E)||(r.track({type:2,doc:E}),V=!0,(u&&this.Ia(E,u)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),V=!0):y&&!E&&(r.track({type:1,doc:y}),V=!0,(u||l)&&(a=!0)),V&&(E?(s=s.add(E),o=N?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const f="F"===this.query.limitType?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort((f,m)=>function(E,S){const N=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return N(E)-N(S)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=null!=i&&i;const a=t&&!i?this.ma():[],u=0===this.Pa.size&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,0!==s.length||l?{snapshot:new Yd(this.query,e.Ta,o,s,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new rV,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=pt(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new uV(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new aV(r))}),t}pa(e){this.la=e.hs,this.Pa=pt();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Yd.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class DK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AK{constructor(e){this.key=e,this.wa=!1}}class SK{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new da(a=>yk(a),Vp),this.Da=new Map,this.Ca=new Set,this.va=new _n(xe.comparator),this.Fa=new Map,this.Ma=new r0,this.xa={},this.Oa=new Map,this.Na=_c.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function RK(n,e){return G0.apply(this,arguments)}function G0(){return(G0=(0,ue.Z)(function*(n,e,t=!0){const r=Rv(n);let i;const o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield lV(r,e,t,!0),i})).apply(this,arguments)}function PK(n,e){return W0.apply(this,arguments)}function W0(){return(W0=(0,ue.Z)(function*(n,e){const t=Rv(n);yield lV(t,e,!0,!1)})).apply(this,arguments)}function lV(n,e,t,r){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,ue.Z)(function*(n,e,t,r){const i=yield Hd(n.localStore,ti(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield K0(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&Av(n.remoteStore,i),a})).apply(this,arguments)}function K0(n,e,t,r,i){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,ue.Z)(function*(n,e,t,r,i){n.Ba=(m,y,E)=>{return(S=(0,ue.Z)(function*(V,Q,H,J){let ce=Q.view.da(H);ce.Xi&&(ce=yield wv(V.localStore,Q.query,!1).then(({documents:P})=>Q.view.da(P,ce)));const Ce=J&&J.targetChanges.get(Q.targetId),Be=J&&null!=J.targetMismatches.get(Q.targetId),z=Q.view.applyChanges(ce,V.isPrimaryClient,Ce,Be);return aT(V,Q.targetId,z.fa),z.snapshot}),function N(V,Q,H,J){return S.apply(this,arguments)})(n,m,y,E);var S};const o=yield wv(n.localStore,e,!0),s=new cV(e,o.hs),a=s.da(o.documents),u=qp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=s.applyChanges(a,n.isPrimaryClient,u);aT(n,t,l.fa);const f=new DK(e,t,s);return n.ba.set(e,f),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot}),Q0.apply(this,arguments)}function MK(n,e,t){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,ue.Z)(function*(n,e,t){const r=Ae(n),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!Vp(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gd(r.remoteStore,i.targetId),Jd(r,i.targetId)}).catch(eu))):(Jd(r,i.targetId),yield zd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function xK(n,e){return J0.apply(this,arguments)}function J0(){return(J0=(0,ue.Z)(function*(n,e){const t=Ae(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gd(t.remoteStore,r.targetId))})).apply(this,arguments)}function X0(){return(X0=(0,ue.Z)(function*(n,e,t){const r=yT(n);try{const i=yield function(s,a){const u=Ae(s),l=xn.now(),f=a.reduce((E,S)=>E.add(S.key),pt());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Gi(),N=pt();return u.os.getEntries(E,f).next(V=>{S=V,S.forEach((Q,H)=>{H.isValidDocument()||(N=N.add(Q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,S)).next(V=>{m=V;const Q=[];for(const H of a){const J=aZ(H,m.get(H.key).overlayedDocument);null!=J&&Q.push(new ha(H.key,J,nk(J.value.mapValue),Nn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,l,Q,a)}).next(V=>{y=V;const Q=V.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(E,V.batchId,Q)})}).then(()=>({batchId:y.batchId,changes:wk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.xa[s.currentUser.toKey()];l||(l=new _n(st)),l=l.insert(a,u),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield pa(r,i.changes),yield Wd(r.remoteStore)}catch(i){const o=Kd(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function dV(n,e){return eT.apply(this,arguments)}function eT(){return(eT=(0,ue.Z)(function*(n,e){const t=Ae(n);try{const r=yield function YZ(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(t.Qr.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.Qr.addMatchingKeys(o,f.addedDocuments,m)));let E=y.withSequenceNumber(o.currentSequenceNumber);var N,V,Q;null!==e.targetMismatches.get(m)?E=E.withResumeToken(wr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),V=E,Q=f,(0===(N=y).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,E))});let u=Gi(),l=pt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push($F(o,s,e.documentUpdates).next(f=>{u=f.cs,l=f.ls})),!r.isEqual(We.min())){const f=t.Qr.getLastRemoteSnapshotVersion(o).next(m=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return Y.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.ns=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Fa.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?qe(s.wa):i.removedDocuments.size>0&&(qe(s.wa),s.wa=!1))}),yield pa(t,r,e)}catch(r){yield eu(r)}})).apply(this,arguments)}function hV(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ba.forEach((o,s)=>{const a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Ae(s);u.onlineState=a;let l=!1;u.queries.forEach((f,m)=>{for(const y of m.U_)y.j_(a)&&(l=!0)}),l&&H0(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OK(n,e,t){return tT.apply(this,arguments)}function tT(){return(tT=(0,ue.Z)(function*(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Fa.get(e),o=i&&i.key;if(o){let s=new _n(xe.comparator);s=s.insert(o,Tn.newNoDocument(o,We.min()));const a=pt().add(o),u=new zp(We.min(),new Map,new _n(st),s,a);yield dV(r,u),r.va=r.va.remove(o),r.Fa.delete(e),uT(r)}else yield zd(r.localStore,e,!1).then(()=>Jd(r,e,t)).catch(eu)})).apply(this,arguments)}function kK(n,e){return nT.apply(this,arguments)}function nT(){return(nT=(0,ue.Z)(function*(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=yield function QZ(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const m=l.batch,y=m.keys();let E=Y.resolve();return y.forEach(S=>{E=E.next(()=>f.getEntry(u,S)).next(N=>{const V=l.docVersions.get(S);qe(null!==V),N.version.compareTo(V)<0&&(m.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);sT(t,r,null),oT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield pa(t,i)}catch(i){yield eu(i)}})).apply(this,arguments)}function FK(n,e,t){return rT.apply(this,arguments)}function rT(){return(rT=(0,ue.Z)(function*(n,e,t){const r=Ae(n);try{const i=yield function(s,a){const u=Ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(m=>(qe(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(l,m))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);sT(r,e,t),oT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield pa(r,i)}catch(i){yield eu(i)}})).apply(this,arguments)}function iT(){return(iT=(0,ue.Z)(function*(n,e){const t=Ae(n);hu(t.remoteStore)||Ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){const i=Kd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function oT(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function sT(n,e,t){const r=Ae(n);let i=r.xa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Jd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||fV(n,r)})}function fV(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(Gd(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),uT(n))}function aT(n,e,t){for(const r of t)r instanceof aV?(n.Ma.addReference(r.key,e),LK(n,r)):r instanceof uV?(Ie("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||fV(n,r.key)):Fe()}function LK(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ie("SyncEngine","New document in limbo: "+t),n.Ca.add(r),uT(n))}function uT(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new xe(Pt.fromString(e)),r=n.Na.next();n.Fa.set(r,new AK(t)),n.va=n.va.insert(t,r),Av(n.remoteStore,new fa(ti(Pd(t.path)),r,"TargetPurposeLimboResolution",ro.oe))}}function pa(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,ue.Z)(function*(n,e,t){const r=Ae(n),i=[],o=[],s=[];var a;r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l&&!l.fromCache?"current":"not-current"),l){i.push(l);const f=c0.Ki(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Sa.h_(i),yield(a=(0,ue.Z)(function*(l,f){const m=Ae(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Y.forEach(f,E=>Y.forEach(E.qi,S=>m.persistence.referenceDelegate.addReference(y,E.targetId,S)).next(()=>Y.forEach(E.Qi,S=>m.persistence.referenceDelegate.removeReference(y,E.targetId,S)))))}catch(y){if(!tu(y))throw y;Ie("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const S=m.ns.get(E),V=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);m.ns=m.ns.insert(E,V)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,o))}),cT.apply(this,arguments)}function UK(n,e){return lT.apply(this,arguments)}function lT(){return(lT=(0,ue.Z)(function*(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){Ie("SyncEngine","User change. New user:",e.toKey());const r=yield UF(t.localStore,e);t.currentUser=e,(o=t).Oa.forEach(a=>{a.forEach(u=>{u.reject(new _e(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield pa(t,r.us)}var o})).apply(this,arguments)}function BK(n,e){const t=Ae(n),r=t.Fa.get(e);if(r&&r.wa)return pt().add(r.key);{let i=pt();const o=t.Da.get(e);if(!o)return i;for(const s of o){const a=t.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function $K(n,e){return dT.apply(this,arguments)}function dT(){return(dT=(0,ue.Z)(function*(n,e){const t=Ae(n),r=yield wv(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&aT(t,e.targetId,i.fa),i})).apply(this,arguments)}function jK(n,e){return hT.apply(this,arguments)}function hT(){return(hT=(0,ue.Z)(function*(n,e){const t=Ae(n);return HF(t.localStore,e).then(r=>pa(t,r))})).apply(this,arguments)}function HK(n,e,t,r){return fT.apply(this,arguments)}function fT(){return(fT=(0,ue.Z)(function*(n,e,t,r){const i=Ae(n),o=yield function(a,u){const l=Ae(a),f=Ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,u).next(y=>y?l.localDocuments.getDocuments(m,y):Y.resolve(null)))}(i.localStore,e);var u;null!==o?("pending"===t?yield Wd(i.remoteStore):"acknowledged"===t||"rejected"===t?(sT(i,e,r||null),oT(i,e),u=e,Ae(Ae(i.localStore).mutationQueue).Mn(u)):Fe(),yield pa(i,o)):Ie("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function pT(){return(pT=(0,ue.Z)(function*(n,e){const t=Ae(n);if(Rv(t),yT(t),!0===e&&!0!==t.La){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pV(t,r.toArray());t.La=!0,yield F0(t.remoteStore,!0);for(const o of i)Av(t.remoteStore,o)}else if(!1===e&&!1!==t.La){const r=[];let i=Promise.resolve();t.Da.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Jd(t,s),zd(t.localStore,s,!0))),Gd(t.remoteStore,s)}),yield i,yield pV(t,r),function(s){const a=Ae(s);a.Fa.forEach((u,l)=>{Gd(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new _n(xe.comparator)}(t),t.La=!1,yield F0(t.remoteStore,!1)}})).apply(this,arguments)}function pV(n,e,t){return gT.apply(this,arguments)}function gT(){return(gT=(0,ue.Z)(function*(n,e,t){const r=Ae(n),i=[],o=[];for(const s of e){let a;const u=r.Da.get(s);if(u&&0!==u.length){a=yield Hd(r.localStore,ti(u[0]));for(const l of u){const f=r.ba.get(l),m=yield $K(r,f);m.snapshot&&o.push(m.snapshot)}}else{const l=yield jF(r.localStore,s);a=yield Hd(r.localStore,l),yield K0(r,gV(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})).apply(this,arguments)}function gV(n){return pk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function qK(n){return t=Ae(n).localStore,Ae(Ae(t).persistence).Bi();var t}function GK(n,e,t,r){return mT.apply(this,arguments)}function mT(){return(mT=(0,ue.Z)(function*(n,e,t,r){const i=Ae(n);if(i.La)return void Ie("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield HF(i.localStore,vk(o[0])),a=zp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,wr.EMPTY_BYTE_STRING);yield pa(i,s,a);break}case"rejected":yield zd(i.localStore,e,!0),Jd(i,e,r);break;default:Fe()}})).apply(this,arguments)}function WK(n,e,t){return _T.apply(this,arguments)}function _T(){return(_T=(0,ue.Z)(function*(n,e,t){const r=Rv(n);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ie("SyncEngine","Adding an already active target "+i);continue}const o=yield jF(r.localStore,i),s=yield Hd(r.localStore,o);yield K0(r,gV(o),s.targetId,!1,s.resumeToken),Av(r.remoteStore,s)}for(const i of t)r.Da.has(i)&&(yield zd(r.localStore,i,!1).then(()=>{Gd(r.remoteStore,i),Jd(r,i)}).catch(eu))}})).apply(this,arguments)}function Rv(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OK.bind(null,e),e.Sa.h_=wK.bind(null,e.eventManager),e.Sa.ka=CK.bind(null,e.eventManager),e}function yT(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FK.bind(null,e),e}class rg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=tg(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return LF(this.persistence,new VF,e.initialUser,this.serializer)}createPersistence(e){return new o0(vv.Hr,this.serializer)}createSharedClientState(e){return new WF}terminate(){var e=this;return(0,ue.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class vT extends rg{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e),yield r.Qa.initialize(r,e),yield yT(r.Qa.syncEngine),yield Wd(r.Qa.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return LF(this.persistence,new VF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new SF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new v7(t,this.persistence);return new y7(e.asyncQueue,r)}createPersistence(e){const t=u0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ni.withCacheSize(this.cacheSizeBytes):ni.DEFAULT;return new a0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KF(),Dv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new WF}}class mV extends vT{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ue.Z)(function*(){yield t().call(r,e);const i=r.Qa.syncEngine;r.sharedClientState instanceof _0&&(r.sharedClientState.syncEngine={Zs:HK.bind(null,i),Xs:GK.bind(null,i),eo:WK.bind(null,i),Bi:qK.bind(null,i),Ys:jK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var o=(0,ue.Z)(function*(s){yield function zK(n,e){return pT.apply(this,arguments)}(r.Qa.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=KF();if(!_0.D(t))throw new _e(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=u0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Xd{initialize(e,t){var r=this;return(0,ue.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=UK.bind(null,r.syncEngine),yield F0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new EK}createDatastore(e){const t=tg(e.databaseInfo.databaseId),r=new iK(e.databaseInfo);return new aK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>hV(this.syncEngine,t,0),a=ZF.D()?new ZF:new tK,new cK(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,l,f){const m=new SK(i,o,s,a,u,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ue.Z)(function*(){var t,r;yield(r=(0,ue.Z)(function*(o){const s=Ae(o);Ie("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield qd(s),s.O_.shutdown(),s.N_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function _V(n,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Pv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QK{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Er,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ue.Z)(function*(){const t=yield e.za();if(null===t)return null;const r=e.Wa.decode(t),i=Number(r);isNaN(i)&&e.ja(`length string (${r}) is not valid number`);const o=yield e.Ha(i);return new bK(JSON.parse(o),t.length+i)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ue.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const t=e.Ja();t<0&&e.ja("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ha(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ya())&&t.ja("Reached the end of bundle when more is expected.");const r=t.Wa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ua.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class YK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new _e(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ue.Z)(function*(s,a){const u=Ae(s),l={documents:a.map(E=>Gp(u.serializer,E))},f=yield u.xo("BatchGetDocuments",u.serializer.databaseId,Pt.emptyPath(),l,a.length),m=new Map;f.forEach(E=>{const S=function mZ(n,e){return"found"in e?function(r,i){qe(!!i.found);const o=As(r,i.found.name),s=nr(i.found.updateTime),a=i.found.createTime?nr(i.found.createTime):We.min(),u=new $r({mapValue:{fields:i.found.fields}});return Tn.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){qe(!!i.missing),qe(!!i.readTime);const o=As(r,i.missing),s=nr(i.readTime);return Tn.newNoDocument(o,s)}(n,e):Fe()}(u.serializer,E);m.set(S.key.toString(),S)});const y=[];return a.forEach(E=>{const S=m.get(E.toString());qe(!!S),y.push(S)}),y}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=xe.fromPath(i);e.mutations.push(new Bb(o,e.precondition(o)))}),yield(r=(0,ue.Z)(function*(o,s){const a=Ae(o),u={writes:s.map(l=>Wp(a.serializer,l))};yield a.Co("Commit",a.serializer.databaseId,Pt.emptyPath(),u)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fe();t=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new _e(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(We.min())?Nn.exists(!1):Nn.updateTime(t):Nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new _e(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nn.updateTime(t)}return Nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JK{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new v0(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ue.Z)(function*(){const t=new YK(e.datastore),r=e.tu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.nu(o)}))}).catch(i=>{e.nu(i)})}))}tu(e){try{const t=this.updateFunction(e);return!Rp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Lk(t)}return!1}}class XK{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dr.UNAUTHENTICATED,this.clientId=RO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,ue.Z)(function*(a){Ie("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(Ie("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _e(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Kd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Mv(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ue.Z)(function*(o){r.isEqual(o)||(yield UF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),IT.apply(this,arguments)}function ET(n,e){return wT.apply(this,arguments)}function wT(){return(wT=(0,ue.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CT(n);Ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function yV(n){return"FirebaseError"===n.name?n.code===ne.FAILED_PRECONDITION||n.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function CT(n){return bT.apply(this,arguments)}function bT(){return(bT=(0,ue.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!yV(t))throw t;zi("Error using user provided cache. Falling back to memory cache: "+t),yield Mv(n,new rg)}}else Ie("FirestoreClient","Using default OfflineComponentProvider"),yield Mv(n,new rg);return n._offlineComponents})).apply(this,arguments)}function xv(n){return TT.apply(this,arguments)}function TT(){return(TT=(0,ue.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield ET(n,n._uninitializedComponentsProvider._online)):(Ie("FirestoreClient","Using default OnlineComponentProvider"),yield ET(n,new Xd))),n._onlineComponents})).apply(this,arguments)}function vV(n){return CT(n).then(e=>e.persistence)}function eh(n){return CT(n).then(e=>e.localStore)}function IV(n){return xv(n).then(e=>e.remoteStore)}function DT(n){return xv(n).then(e=>e.syncEngine)}function th(n){return AT.apply(this,arguments)}function AT(){return(AT=(0,ue.Z)(function*(n){const e=yield xv(n),t=e.eventManager;return t.onListen=RK.bind(null,e.syncEngine),t.onUnlisten=MK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xK.bind(null,e.syncEngine),t})).apply(this,arguments)}function wV(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(o,s,a,u,l){const f=new Pv({next:y=>{s.enqueueAndForget(()=>$0(o,m));const E=y.docs.has(a);!E&&y.fromCache?l.reject(new _e(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?l.reject(new _e(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new q0(Pd(a.path),f,{includeMetadataChanges:!0,ra:!0});return U0(o,m)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}function CV(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(o,s,a,u,l){const f=new Pv({next:y=>{s.enqueueAndForget(()=>$0(o,m)),y.fromCache&&"server"===u.source?l.reject(new _e(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),m=new q0(a,f,{includeMetadataChanges:!0,ra:!0});return U0(o,m)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}function bV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const TV=new Map;function ST(n,e,t){if(!t)throw new _e(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DV(n,e,t,r){if(!0===e&&!0===r)throw new _e(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AV(n){if(!xe.isDocumentKey(n))throw new _e(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SV(n){if(xe.isDocumentKey(n))throw new _e(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Fe()}function It(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nv(n);throw new _e(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RV(n,e){if(e<=0)throw new _e(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class PV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _e(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _e(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=bV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ig{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _e(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _e(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PV(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new s7;switch(r.type){case"firstParty":return new l7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=TV.get(t);r&&(Ie("ComponentProvider","Removing Datastore"),TV.delete(t),r.terminate())}(this),Promise.resolve()}}function MV(n,e,t,r={}){var i;const o=(n=It(n,ig))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Dr.MOCK_USER;else{a=(0,ht.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new _e(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Dr(l)}n._authCredentials=new a7(new AO(a,u))}}class jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class Ss extends jr{constructor(e,t,r){super(e,t,Pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new xe(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function xV(n,e,...t){if(n=(0,ht.m9)(n),ST("collection","path",e),n instanceof ig){const r=Pt.fromString(e,...t);return SV(r),new Ss(n,null,r)}{if(!(n instanceof Dn||n instanceof Ss))throw new _e(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return SV(r),new Ss(n.firestore,null,r)}}function Ov(n,e,...t){if(n=(0,ht.m9)(n),1===arguments.length&&(e=RO.newId()),ST("doc","path",e),n instanceof ig){const r=Pt.fromString(e,...t);return AV(r),new Dn(n,null,new xe(r))}{if(!(n instanceof Dn||n instanceof Ss))throw new _e(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return AV(r),new Dn(n.firestore,n instanceof Ss?n.converter:null,new xe(r))}}function NV(n,e){return n=(0,ht.m9)(n),e=(0,ht.m9)(e),(n instanceof Dn||n instanceof Ss)&&(e instanceof Dn||e instanceof Ss)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RT(n,e){return n=(0,ht.m9)(n),e=(0,ht.m9)(e),n instanceof jr&&e instanceof jr&&n.firestore===e.firestore&&Vp(n._query,e._query)&&n.converter===e.converter}class hQ{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new v0(this,"async_queue_retry"),this.hu=()=>{const t=Dv();t&&Ie("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=Dv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Dv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Er;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ue.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!tu(t))throw t;Ie("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,tr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const i=L0.createAndSchedule(this,e,t,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&Fe()}verifyOperationInProgress(){}du(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function PT(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class fQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class an extends ig{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hQ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OV(this),this._firestoreClient.terminate()}}function gQ(n,e){const t="object"==typeof n?n:(0,qn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,qn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(0,ht.P0)("firestore");o&&MV(i,...o)}return i}function On(n){return n._firestoreClient||OV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OV(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new B7(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bV(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._firestoreClient=new XK(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function kV(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield Mv(n,t),yield ET(n,e),r.resolve()}catch(i){const o=i;if(!yV(o))throw o;zi("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function FV(n){if(n._initialized||n._terminated)throw new _e(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(wr.fromBase64String(e))}catch(t){throw new _e(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rs(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ga{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _e(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vc{constructor(e){this._methodName=e}}class kv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}const TQ=/^__.*__$/;class DQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new kd(e,this.data,t,this.fieldTransforms)}}class VV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class Fv{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Uv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(LV(this.fu)&&TQ.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class AQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tg(e)}Fu(e,t,r,i=!1){return new Fv({fu:e,methodName:t,vu:r,path:bn.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ic(n){const e=n._freezeSettings(),t=tg(n._databaseId);return new AQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vv(n,e,t,r,i,o={}){const s=n.Fu(o.merge||o.mergeFields?2:0,e,t,i);VT("Data must be an object, but it was:",s,r);const a=$V(r,s);let u,l;if(o.merge)u=new qi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const m of o.mergeFields){const y=ag(e,m,t);if(!s.contains(y))throw new _e(ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);HV(f,y)||f.push(y)}u=new qi(f),l=s.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,l=s.fieldTransforms;return new DQ(new $r(a),u,l)}class sg extends vc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sg}}function UV(n,e,t){return new Fv({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class MT extends vc{_toFieldTransform(e){return new $p(e.path,new Nd)}isEqual(e){return e instanceof MT}}class xT extends vc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=UV(this,e,!0),r=this.Mu.map(o=>Ec(o,t)),i=new lc(r);return new $p(e.path,i)}isEqual(e){return e instanceof xT&&(0,ht.vZ)(this.Mu,e.Mu)}}class NT extends vc{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=UV(this,e,!0),r=this.Mu.map(o=>Ec(o,t)),i=new dc(r);return new $p(e.path,i)}isEqual(e){return e instanceof NT&&(0,ht.vZ)(this.Mu,e.Mu)}}class OT extends vc{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Od(e.serializer,Dk(e.serializer,this.xu));return new $p(e.path,t)}isEqual(e){return e instanceof OT&&this.xu===e.xu}}function kT(n,e,t,r){const i=n.Fu(1,e,t);VT("Data must be an object, but it was:",i,r);const o=[],s=$r.empty();nu(r,(u,l)=>{const f=Lv(e,u,t);l=(0,ht.m9)(l);const m=i.Su(f);if(l instanceof sg)o.push(f);else{const y=Ec(l,m);null!=y&&(o.push(f),s.set(f,y))}});const a=new qi(o);return new VV(s,a,i.fieldTransforms)}function FT(n,e,t,r,i,o){const s=n.Fu(1,e,t),a=[ag(e,r,t)],u=[i];if(o.length%2!=0)throw new _e(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)a.push(ag(e,o[y])),u.push(o[y+1]);const l=[],f=$r.empty();for(let y=a.length-1;y>=0;--y)if(!HV(l,a[y])){const E=a[y];let S=u[y];S=(0,ht.m9)(S);const N=s.Su(E);if(S instanceof sg)l.push(E);else{const V=Ec(S,N);null!=V&&(l.push(E),f.set(E,V))}}const m=new qi(l);return new VV(f,m,s.fieldTransforms)}function BV(n,e,t,r=!1){return Ec(t,n.Fu(r?4:3,e))}function Ec(n,e){if(jV(n=(0,ht.m9)(n)))return VT("Unsupported field value:",e,n),$V(n,e);if(n instanceof vc)return function(r,i){if(!LV(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Ec(a,i.bu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,ht.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Dk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=xn.fromDate(r);return{timestampValue:Vd(i.serializer,o)}}if(r instanceof xn){const o=new xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vd(i.serializer,o)}}if(r instanceof kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:Zk(i.serializer,r._byteString)};if(r instanceof Dn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Nv(r)}`)}(n,e)}function $V(n,e){const t={};return WO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nu(n,(r,i)=>{const o=Ec(i,e.pu(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function jV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof kv||n instanceof Rs||n instanceof Dn||n instanceof vc)}function VT(n,e,t){if(!jV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Nv(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var i}function ag(n,e,t){if((e=(0,ht.m9)(e))instanceof ga)return e._internalPath;if("string"==typeof e)return Lv(n,e);throw Uv("Field path arguments must be of type string or ",n,!1,void 0,t)}const SQ=new RegExp("[~\\*/\\[\\]]");function Lv(n,e,t){if(e.search(SQ)>=0)throw Uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ga(...e.split("."))._internalPath}catch{throw Uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Uv(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new _e(ne.INVALID_ARGUMENT,a+n+u)}function HV(n,e){return n.some(t=>t.isEqual(e))}class ug{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RQ extends ug{data(){return super.data()}}function Bv(n,e){return"string"==typeof e?Lv(n,e):e instanceof ga?e._internalPath:e._delegate._internalPath}function zV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new _e(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LT{}class cg extends LT{}function pu(n,e,...t){let r=[];e instanceof LT&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof nh).length,a=o.filter(u=>u instanceof lg).length;if(s>1||s>0&&a>0)throw new _e(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class lg extends cg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lg(e,t,r)}_apply(e){const t=this._parse(e);return ZV(e._query,t),new jr(e.firestore,e.converter,Lb(e._query,t))}_parse(e){const t=Ic(e.firestore);return function(o,s,a,u,l,f,m){let y;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new _e(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){WV(m,f);const E=[];for(const S of m)E.push(GV(u,o,S));y={arrayValue:{values:E}}}else y=GV(u,o,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||WV(m,f),y=BV(a,"where",m,"in"===f||"not-in"===f);return Mt.create(l,f,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nh extends LT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:en.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)ZV(s,u),s=Lb(s,u)}(e._query,t),new jr(e.firestore,e.converter,Lb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class UT extends cg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new UT(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kp(o,s)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new la(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class $v extends cg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $v(e,t,r)}_apply(e){return new jr(e.firestore,e.converter,ov(e._query,this._limit,this._limitType))}}class jv extends cg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jv(e,t,r)}_apply(e){const t=qV(e,this.type,this._docOrFields,this._inclusive);return new jr(e.firestore,e.converter,(o=t,new la((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class Hv extends cg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Hv(e,t,r)}_apply(e){const t=qV(e,this.type,this._docOrFields,this._inclusive);return new jr(e.firestore,e.converter,(o=t,new la((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function qV(n,e,t,r){if(t[0]=(0,ht.m9)(t[0]),t[0]instanceof ug)return function(o,s,a,u,l){if(!u)throw new _e(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Md(o))if(m.field.isKeyField())f.push(uc(s,u.key));else{const y=u.data.field(m.field);if(Jy(y))throw new _e(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new _e(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(y)}return new au(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Ic(n.firestore);return function(s,a,u,l,f,m){const y=s.explicitOrderBy;if(f.length>y.length)throw new _e(ne.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let S=0;S<f.length;S++){const N=f[S];if(y[S].field.isKeyField()){if("string"!=typeof N)throw new _e(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!Vb(s)&&-1!==N.indexOf("/"))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);const V=s.path.child(Pt.fromString(N));if(!xe.isDocumentKey(V))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const Q=new xe(V);E.push(uc(a,Q))}else{const V=BV(u,l,N);E.push(V)}}return new au(E,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function GV(n,e,t){if("string"==typeof(t=(0,ht.m9)(t))){if(""===t)throw new _e(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vb(e)&&-1!==t.indexOf("/"))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!xe.isDocumentKey(r))throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uc(n,new xe(r))}if(t instanceof Dn)return uc(n,t._key);throw new _e(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nv(t)}.`)}function WV(n,e){if(!Array.isArray(n)||0===n.length)throw new _e(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZV(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new _e(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BT{convertValue(e,t="none"){switch(ou(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nu(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new kv(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Xy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mp(e));default:return null}}convertTimestamp(e){const t=ua(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);qe(sF(r));const i=new ru(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return i.isEqual(t)||tr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function zv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LQ extends BT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}class wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ma extends ug{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Bv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dg extends ma{data(e={}){return super.data(e)}}class gu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new dg(this._firestore,this._userDataWriter,r.key,r,new wc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new dg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new dg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:BQ(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}function QV(n,e){return n instanceof ma&&e instanceof ma?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gu&&e instanceof gu&&n._firestore===e._firestore&&RT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class mu extends BT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,t)}}function YV(n,e,t){n=It(n,Dn);const r=It(n.firestore,an),i=zv(n.converter,e,t);return rh(r,[Vv(Ic(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nn.none())])}function JV(n,e,t,...r){n=It(n,Dn);const i=It(n.firestore,an),o=Ic(i);let s;return s="string"==typeof(e=(0,ht.m9)(e))||e instanceof ga?FT(o,"updateDoc",n._key,e,t,r):kT(o,"updateDoc",n._key,e),rh(i,[s.toMutation(n._key,Nn.exists(!0))])}function XV(n,...e){var t,r,i;n=(0,ht.m9)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||PT(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(PT(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,l,f;if(n instanceof Dn)l=It(n.firestore,an),f=Pd(n._key.path),u={next:m=>{e[s]&&e[s]($T(l,n,m))},error:e[s+1],complete:e[s+2]};else{const m=It(n,jr);l=It(m.firestore,an),f=m._query;const y=new mu(l);u={next:E=>{e[s]&&e[s](new gu(l,y,m,E))},error:e[s+1],complete:e[s+2]},zV(n._query)}return function(y,E,S,N){const V=new Pv(N),Q=new q0(E,V,S);return y.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return U0(yield th(y),Q)})),()=>{V.$a(),y.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return $0(yield th(y),Q)}))}}(On(l),f,a,u)}function rh(n,e){return function(r,i){const o=new Er;return r.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function NK(n,e,t){return X0.apply(this,arguments)}(yield DT(r),i,o)})),o.promise}(On(n),e)}function $T(n,e,t){const r=t.docs.get(e._key),i=new mu(n);return new ma(n,i,e._key,r,new wc(t.hasPendingWrites,t.fromCache),e.converter)}const iY={maxAttempts:5};class eL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ic(e)}set(e,t,r){this._verifyNotCommitted();const i=_u(e,this._firestore),o=zv(i.converter,t,r),s=Vv(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Nn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=_u(e,this._firestore);let s;return s="string"==typeof(t=(0,ht.m9)(t))||t instanceof ga?FT(this._dataReader,"WriteBatch.update",o._key,t,r,i):kT(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Nn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_u(e,this._firestore);return this._mutations=this._mutations.concat(new Fd(t._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _u(n,e){if((n=(0,ht.m9)(n)).firestore!==e)throw new _e(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ic(t)}get(t){const r=_u(t,this._firestore),i=new LQ(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Fe();const s=o[0];if(s.isFoundDocument())return new ug(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ug(this._firestore,i,r._key,null,r.converter);throw Fe()})}set(t,r,i){const o=_u(t,this._firestore),s=zv(o.converter,r,i),a=Vv(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=_u(t,this._firestore);let a;return a="string"==typeof(r=(0,ht.m9)(r))||r instanceof ga?FT(this._dataReader,"Transaction.update",s._key,r,i,o):kT(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=_u(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_u(e,this._firestore),r=new mu(this._firestore);return super.get(e).then(i=>new ma(this._firestore,r,t._key,i._document,new wc(!1,!1),t.converter))}}function HT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function iL(){if(typeof Uint8Array>"u")throw new _e("unimplemented","Uint8Arrays are not available in this environment.")}function oL(){if(!function L7(){return typeof atob<"u"}())throw new _e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){wd=qn.SDK_VERSION,(0,qn._registerComponent)(new Gy.wA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new an(new u7(r.getProvider("auth-internal")),new d7(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _e(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,qn.registerVersion)(DO,"4.6.3",e),(0,qn.registerVersion)(DO,"4.6.3","esm2017")}();class hg{constructor(e){this._delegate=e}static fromBase64String(e){return oL(),new hg(Rs.fromBase64String(e))}static fromUint8Array(e){return iL(),new hg(Rs.fromUint8Array(e))}toBase64(){return oL(),this._delegate.toBase64()}toUint8Array(){return iL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zT(n){return function gY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class mY{enableIndexedDbPersistence(e,t){return function mQ(n,e){FV(n=It(n,an));const t=On(n);if(t._uninitializedComponentsProvider)throw new _e(ne.FAILED_PRECONDITION,"SDK cache is already specified.");zi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Xd;return kV(t,i,new vT(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _Q(n){FV(n=It(n,an));const e=On(n);if(e._uninitializedComponentsProvider)throw new _e(ne.FAILED_PRECONDITION,"SDK cache is already specified.");zi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Xd;return kV(e,r,new mV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yQ(n){if(n._initialized&&!n._terminated)throw new _e(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(i){if(!Cs.D())return Promise.resolve();const o=i+"main";yield Cs.delete(o)}),function r(i){return t.apply(this,arguments)})(u0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ru||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){MV(this._delegate,e,t,r)}enableNetwork(){return function IQ(n){return function eQ(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield vV(n),t=yield IV(n);return e.setNetworkEnabled(!0),function(i){const o=Ae(i);return o.M_.delete(0),ng(o)}(t)}))}(On(n=It(n,an)))}(this._delegate)}disableNetwork(){return function EQ(n){return function tQ(n){return n.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield vV(n),t=yield IV(n);return e.setNetworkEnabled(!1),(r=(0,ue.Z)(function*(o){const s=Ae(o);s.M_.add(0),yield qd(s),s.N_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(On(n=It(n,an)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vQ(n){return function(t){const r=new Er;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function VK(n,e){return iT.apply(this,arguments)}(yield DT(t),r)})),r.promise}(On(n=It(n,an)))}(this._delegate)}onSnapshotsInSync(e){return function KQ(n,e){return function oQ(n,e){const t=new Pv(e);return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return i=yield th(n),o=t,Ae(i).z_.add(o),void o.next();var i,o})),()=>{t.$a(),n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return i=yield th(n),o=t,void Ae(i).z_.delete(o);var i,o}))}}(On(n=It(n,an)),PT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new _e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ih(this,xV(this._delegate,e))}catch(t){throw wi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Co(this,Ov(this._delegate,e))}catch(t){throw wi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ci(this,function dQ(n,e){if(n=It(n,ig),ST("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jr(n,null,(r=e,new la(Pt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw wi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sY(n,e,t){n=It(n,an);const r=Object.assign(Object.assign({},iY),t);return function(o){if(o.maxAttempts<1)throw new _e(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new Er;return o.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const l=yield function EV(n){return xv(n).then(e=>e.datastore)}(o);new JK(o.asyncQueue,l,a,s,u).Xa()})),u.promise}(On(n),i=>e(new oY(n,i)),r)}(this._delegate,t=>e(new aL(this,t)))}batch(){return On(this._delegate),new uL(new eL(this._delegate,e=>rh(this._delegate,e)))}loadBundle(e){return function wQ(n,e){const t=On(n=It(n,an)),r=new fQ;return function sQ(n,e,t,r){const i=function(s,a){let u;return u="string"==typeof s?Bk().encode(s):s,f=function(f,m){if(f instanceof Uint8Array)return _V(f,m);if(f instanceof ArrayBuffer)return _V(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new QK(f,a);var f}(t,tg(e));n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function ZK(n,e,t){const r=Ae(n);var i;(i=(0,ue.Z)(function*(s,a,u){try{const l=yield a.getMetadata();if(yield function(S,N){const V=Ae(S),Q=nr(N.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",H=>V.$r.getBundleMetadata(H,N.id)).then(H=>!!H&&H.createTime.compareTo(Q)>=0)}(s.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(S=l).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);u._updateProgress(sV(l));const f=new TK(l,s.localStore,a.serializer);let m=yield a.qa();for(;m;){const E=yield f._a(m);E&&u._updateProgress(E),m=yield a.qa()}const y=yield f.complete();return yield pa(s,y.ca,void 0),yield function(S,N){const V=Ae(S);return V.persistence.runTransaction("Save bundle","readwrite",Q=>V.$r.saveBundleMetadata(Q,N))}(s.localStore,l),u._completeWith(y.progress),Promise.resolve(y.ua)}catch(l){return zi("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var S}),function o(s,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield DT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function CQ(n,e){return function aQ(n,e){return n.asyncQueue.enqueue((0,ue.Z)(function*(){return function(r,i){const o=Ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield eh(n),e)}))}(On(n=It(n,an)),e).then(t=>t?new jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ci(this,t):null)}}class Gv extends BT{constructor(e){super(),this.firestore=e}convertBytes(e){return new hg(new Rs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Co.forKey(t,this.firestore,null)}}class aL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gv(e)}get(e){const t=bc(e);return this._delegate.get(t).then(r=>new fg(this._firestore,new ma(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bc(e);return r?(HT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=bc(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}}class uL{constructor(e){this._delegate=e}set(e,t,r){const i=bc(e);return r?(HT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=bc(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=bc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new dg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Cc(e,new Gv(e),t),i.set(t,o)),o}}Cc.INSTANCES=new WeakMap;class Co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new _e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Co(t,new Dn(t._delegate,r,new xe(e)))}static forKey(e,t,r){return new Co(t,new Dn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ih(this.firestore,xV(this._delegate,e))}catch(t){throw wi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ht.m9)(e))instanceof Dn&&NV(this._delegate,e)}set(e,t){t=HT("DocumentReference.set",t);try{return t?YV(this._delegate,e,t):YV(this._delegate,e)}catch(r){throw wi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?JV(this._delegate,e):JV(this._delegate,e,t,...r)}catch(i){throw wi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function WQ(n){return rh(It(n.firestore,an),[new Fd(n._key,Nn.none())])}(this._delegate)}onSnapshot(...e){const t=cL(e),r=lL(e,i=>new fg(this.firestore,new ma(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return XV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function jQ(n){n=It(n,Dn);const e=It(n.firestore,an),t=On(e),r=new mu(e);return function nQ(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(o,s,a){try{const u=yield function(f,m){const y=Ae(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(o,s);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new _e(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=Kd(u,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield eh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ma(e,r,n._key,i,new wc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HQ(n){n=It(n,Dn);const e=It(n.firestore,an);return wV(On(e),n._key,{source:"server"}).then(t=>$T(e,n,t))}(this._delegate):function $Q(n){n=It(n,Dn);const e=It(n.firestore,an);return wV(On(e),n._key).then(t=>$T(e,n,t))}(this._delegate),t.then(r=>new fg(this.firestore,new ma(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Co(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}function wi(n,e,t){return n.message=n.message.replace(e,t),n}function cL(n){for(const e of n)if("object"==typeof e&&!zT(e))return e;return{}}function lL(n,e){var t,r;let i;return i=zT(n[0])?n[0]:zT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Co(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return QV(this._delegate,e._delegate)}}class pg extends fg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function o7(n,e){n||Fe()}(void 0!==t),t}}class Ci{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gv(e)}where(e,t,r){try{return new Ci(this.firestore,pu(this._delegate,function PQ(n,e,t){const r=e,i=Bv("where",n);return lg._create(i,r,t)}(e,t,r)))}catch(i){throw wi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ci(this.firestore,pu(this._delegate,function MQ(n,e="asc"){const t=e,r=Bv("orderBy",n);return UT._create(r,t)}(e,t)))}catch(r){throw wi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ci(this.firestore,pu(this._delegate,function xQ(n){return RV("limit",n),$v._create("limit",n,"F")}(e)))}catch(t){throw wi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ci(this.firestore,pu(this._delegate,function NQ(n){return RV("limitToLast",n),$v._create("limitToLast",n,"L")}(e)))}catch(t){throw wi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ci(this.firestore,pu(this._delegate,function OQ(...n){return jv._create("startAt",n,!0)}(...e)))}catch(t){throw wi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ci(this.firestore,pu(this._delegate,function kQ(...n){return jv._create("startAfter",n,!1)}(...e)))}catch(t){throw wi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ci(this.firestore,pu(this._delegate,function FQ(...n){return Hv._create("endBefore",n,!1)}(...e)))}catch(t){throw wi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ci(this.firestore,pu(this._delegate,function VQ(...n){return Hv._create("endAt",n,!0)}(...e)))}catch(t){throw wi(t,"endAt()","Query.endAt()")}}isEqual(e){return RT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function qQ(n){n=It(n,jr);const e=It(n.firestore,an),t=On(e),r=new mu(e);return function rQ(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(r=(0,ue.Z)(function*(o,s,a){try{const u=yield wv(o,s,!0),l=new cV(s,u.hs),f=l.da(u.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const l=Kd(u,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield eh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gu(e,r,n,i))}(this._delegate):"server"===e?.source?function GQ(n){n=It(n,jr);const e=It(n.firestore,an),t=On(e),r=new mu(e);return CV(t,n._query,{source:"server"}).then(i=>new gu(e,r,n,i))}(this._delegate):function zQ(n){n=It(n,jr);const e=It(n.firestore,an),t=On(e),r=new mu(e);return zV(n._query),CV(t,n._query).then(i=>new gu(e,r,n,i))}(this._delegate),t.then(r=>new qT(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cL(e),r=lL(e,i=>new qT(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return XV(this._delegate,t,r)}withConverter(e){return new Ci(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}class yY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ci(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new pg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new pg(this._firestore,r))})}isEqual(e){return QV(this._delegate,e._delegate)}}class ih extends Ci{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Co(this.firestore,e):null}doc(e){try{return new Co(this.firestore,void 0===e?Ov(this._delegate):Ov(this._delegate,e))}catch(t){throw wi(t,"doc()","CollectionReference.doc()")}}add(e){return function ZQ(n,e){const t=It(n.firestore,an),r=Ov(n),i=zv(n.converter,e);return rh(t,[Vv(Ic(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Co(this.firestore,t))}isEqual(e){return NV(this._delegate,e._delegate)}withConverter(e){return new ih(this.firestore,this._delegate.withConverter(e?Cc.getInstance(this.firestore,e):null))}}function bc(n){return It(n,Dn)}class GT{constructor(...e){this._delegate=new ga(...e)}static documentId(){return new GT(bn.keyField().canonicalString())}isEqual(e){return(e=(0,ht.m9)(e))instanceof ga&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uY(){return new MT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tc(e)}static delete(){const e=function aY(){return new sg("deleteField")}();return e._methodName="FieldValue.delete",new Tc(e)}static arrayUnion(...e){const t=function cY(...n){return new xT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tc(t)}static arrayRemove(...e){const t=function lY(...n){return new NT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tc(t)}static increment(e){const t=function dY(n){return new OT("increment",n)}(e);return t._methodName="FieldValue.increment",new Tc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const vY={Firestore:sL,GeoPoint:kv,Timestamp:xn,Blob:hg,Transaction:aL,WriteBatch:uL,DocumentReference:Co,DocumentSnapshot:fg,Query:Ci,QueryDocumentSnapshot:pg,QuerySnapshot:qT,CollectionReference:ih,FieldPath:GT,FieldValue:Tc,setLogLevel:function _Y(n){!function i7(n){Xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dL(n,e){return function wY(n,e=yb){return new lt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function WT(n,e){return dL(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function EY(n){(function IY(n,e){n.INTERNAL.registerComponent(new Gy.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vY)))})(n,(e,t)=>new sL(e,t,new mY)),n.registerVersion("@firebase/firestore-compat","0.3.32")}(Wo.Z);class hL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=yL(r,t);return new gL(i,o,this.afs)}snapshotChanges(){return function CY(n,e){return dL(n,e).pipe(Cy(void 0),Cb(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return C(this.ref.get(e)).pipe(Ei)}}function Wv(n,e){return WT(n,e).pipe(Cy(void 0),Cb(),Oe(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=o.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function fL(n,e,t){return Wv(n,t).pipe(Ty((r,i)=>function bY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),et(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function ZT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Wv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Cy(void 0),Cb(),qo(([r,i])=>i.length>0||!r),Oe(([,r])=>r),Ei)}auditTrail(e){return this.stateChanges(e).pipe(Ty((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pL(e);return fL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return WT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ei)}get(e){return C(this.query.get(e)).pipe(Ei)}add(e){return this.ref.add(e)}doc(e){return new hL(this.ref.doc(e),this.afs)}}class DY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Wv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),qo(t=>t.length>0),Ei):Wv(this.query,this.afs.schedulers.outsideAngular).pipe(Ei)}auditTrail(e){return this.stateChanges(e).pipe(Ty((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pL(e);return fL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ei)}valueChanges(e={}){return WT(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ei)}get(e){return C(this.query.get(e)).pipe(Ei)}}const mL=new be("angularfire2.enableFirestorePersistence"),_L=new be("angularfire2.firestore.persistenceSettings"),AY=new be("angularfire2.firestore.settings"),SY=new be("angularfire2.firestore.use-emulator");function yL(n,e=(t=>t)){return{query:e(n),ref:n}}let KT=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,f,m,y,E,S,N,V,Q,H){this.schedulers=u;const J=qy(t,a,r),ce=f;m&&mO(J,a,y,S,N,V,E,Q),[this.firestore,this.persistenceEnabled$]=Eb(`${J.name}.firestore`,"AngularFirestore",J.name,()=>{const Ce=a.runOutsideAngular(()=>J.firestore());if(o&&Ce.settings(o),ce&&Ce.useEmulator(...ce),i&&!yy(s)){const Be=()=>{try{return C(Ce.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(z){return typeof console<"u"&&console.warn(z),k(!1)}};return[Ce,a.runOutsideAngular(Be)]}return[Ce,k(!1)]},[o,ce,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=yL(i,r),a=this.schedulers.ngZone.run(()=>o);return new gL(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new DY(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new hL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(we(bp),we(Tp,8),we(mL,8),we(AY,8),we(ko),we(Vt),we(Id),we(_L,8),we(SY,8),we(wb,8),we(lO,8),we(dO,8),we(hO,8),we(fO,8),we(pO,8),we(gO,8),we(Cp,8))};static \u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),RY=(()=>{class n{constructor(){Wo.Z.registerVersion("angularfire",sa.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:mL,useValue:!0},{provide:_L,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[KT]})}return n})();const vL="firebasestorage.googleapis.com",IL="storageBucket";class jn extends ht.ZR{constructor(e,t,r=0){super(QT(e),`Firebase Storage: ${t} (${QT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return QT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var kn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(kn||{});function QT(n){return"storage/"+n}function YT(){return new jn(kn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function EL(){return new jn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wL(){return new jn(kn.CANCELED,"User canceled the upload/download.")}function CL(){return new jn(kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oh(n){return new jn(kn.INVALID_ARGUMENT,n)}function bL(){return new jn(kn.APP_DELETED,"The Firebase app was deleted.")}function TL(n){return new jn(kn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gg(n,e){return new jn(kn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mg(n){throw new jn(kn.INTERNAL_ERROR,"Internal error: "+n)}class ii{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ii.makeFromUrl(e,t)}catch{return new ii(e,"")}if(""===r.path)return r;throw function BY(n){return new jn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(ce){ce.path_=decodeURIComponent(ce.path)}const m=t.replace(/[.]/g,"\\."),J=[{regex:a,indices:{bucket:1,path:3},postModify:function o(ce){"/"===ce.path.charAt(ce.path.length-1)&&(ce.path_=ce.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===vL?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let ce=0;ce<J.length;ce++){const Ce=J[ce],Be=Ce.regex.exec(e);if(Be){let P=Be[Ce.indices.path];P||(P=""),r=new ii(Be[Ce.indices.bucket],P),Ce.postModify(r);break}}if(null==r)throw function UY(n){return new jn(kn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class qY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Zv(n){return"string"==typeof n||n instanceof String}function DL(n){return JT()&&n instanceof Blob}function JT(){return typeof Blob<"u"}function XT(n,e,t,r){if(r<e)throw oh(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw oh(`Invalid value for '${n}'. Expected ${t} or less.`)}function _a(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function AL(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var sh=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(sh||{});function SL(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class YY{constructor(e,t,r,i,o,s,a,u,l,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function ZY(n){return void 0!==n}(u)?o():o(u)}catch(u){s(u)}else if(null!==a){const u=YT();u.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,u):u)}else s(i.canceled?this.appDelete_?bL():wL():EL())};this.canceled_?t(0,new Kv(!1,null,!0)):this.backoffId_=function GY(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function u(){return 2===a}let l=!1;function f(...V){l||(l=!0,e.apply(null,V))}function m(V){i=setTimeout(()=>{i=null,n(E,u())},V)}function y(){o&&clearTimeout(o)}function E(V,...Q){if(l)return void y();if(V)return y(),void f.call(null,V,...Q);if(u()||s)return y(),void f.call(null,V,...Q);let J;r<64&&(r*=2),1===a?(a=2,J=0):J=1e3*(r+Math.random()),m(J)}let S=!1;function N(V){S||(S=!0,y(),!l&&(null!==i?(V||(a=2),clearTimeout(i),m(0)):V||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,N(!0)},t),N}((r,i)=>{if(i)return void r(!1,new Kv(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===sh.NO_ERROR,u=o.getStatus();if(!a||SL(u,this.additionalRetryCodes_)&&this.retry){const f=o.getErrorCode()===sh.ABORT;return void r(!1,new Kv(!1,null,f))}const l=-1!==this.successCodes_.indexOf(u);r(!0,new Kv(l,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function WY(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Kv{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function iJ(...n){const e=function rJ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(JT())return new Blob(n);throw new jn(kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eD{constructor(e,t){this.data=e,this.contentType=t||null}}function tD(n,e){switch(n){case io.RAW:return new eD(RL(e));case io.BASE64:case io.BASE64URL:return new eD(PL(n,e));case io.DATA_URL:return new eD(function uJ(n){const e=new ML(n);return e.base64?PL(io.BASE64,e.rest):function aJ(n){let e;try{e=decodeURIComponent(n)}catch{throw gg(io.DATA_URL,"Malformed data URL.")}return RL(e)}(e.rest)}(e),function cJ(n){return new ML(n).contentType}(e))}throw YT()}function RL(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function PL(n,e){switch(n){case io.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw gg(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case io.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw gg(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sJ(n){if(typeof atob>"u")throw function zY(n){return new jn(kn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:gg(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ML{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gg(io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function lJ(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ps{constructor(e,t){let r=0,i="";DL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(DL(this.data_)){const i=function oJ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ps(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ps(r,!0)}}static getBlob(...e){if(JT()){const t=e.map(r=>r instanceof Ps?r.data_:r);return new Ps(iJ.apply(null,t))}{const t=e.map(s=>Zv(s)?tD(io.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Ps(i,!0)}}uploadData(){return this.data_}}function nD(n){let e;try{e=JSON.parse(n)}catch{return null}return function QY(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function xL(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function fJ(n,e){return e}class bi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||fJ}}let Qv=null;function _g(){if(Qv)return Qv;const n=[];n.push(new bi("bucket")),n.push(new bi("generation")),n.push(new bi("metageneration")),n.push(new bi("name","fullPath",!0));const t=new bi("name");t.xform=function e(o,s){return function pJ(n){return!Zv(n)||n.length<2?n:xL(n)}(s)},n.push(t);const i=new bi("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},n.push(i),n.push(new bi("timeCreated")),n.push(new bi("updated")),n.push(new bi("md5Hash",null,!0)),n.push(new bi("cacheControl",null,!0)),n.push(new bi("contentDisposition",null,!0)),n.push(new bi("contentEncoding",null,!0)),n.push(new bi("contentLanguage",null,!0)),n.push(new bi("contentType",null,!0)),n.push(new bi("metadata","customMetadata",!0)),Qv=n,Qv}function NL(n,e,t){const r=nD(e);return null===r?null:function mJ(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const s=t[o];r[s.local]=s.xform(r,e[s.server])}return function gJ(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new ii(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function rD(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const OL="prefixes",kL="items";class Ms{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xs(n){if(!n)throw YT()}function Yv(n,e){return function t(r,i){const o=NL(n,i,e);return xs(null!==o),o}}function ah(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function VY(){return new jn(kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function FY(){return new jn(kn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function kY(n){return new jn(kn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function LY(n){return new jn(kn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function yg(n){const e=ah(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function OY(n){return new jn(kn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function FL(n,e,t){const i=_a(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ms(i,"GET",Yv(n,t),s);return a.errorHandler=yg(e),a}function wJ(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=_a(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Ms(a,"GET",function IJ(n,e){return function t(r,i){const o=function vJ(n,e,t){const r=nD(t);return null===r?null:function yJ(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[OL])for(const i of t[OL]){const o=i.replace(/\/$/,""),s=n._makeStorageReference(new ii(e,o));r.prefixes.push(s)}if(t[kL])for(const i of t[kL]){const o=n._makeStorageReference(new ii(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return xs(null!==o),o}}(n,e.bucket),l);return f.urlParams=o,f.errorHandler=ah(e),f}function LL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function DJ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Jv{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function iD(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xs(!1)}return xs(!!t&&-1!==(e||["active"]).indexOf(t)),t}const PJ={STATE_CHANGED:"state_changed"},Ti={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oD(n){switch(n){case"running":case"pausing":case"canceling":return Ti.RUNNING;case"paused":return Ti.PAUSED;case"success":return Ti.SUCCESS;case"canceled":return Ti.CANCELED;default:return Ti.ERROR}}class MJ{constructor(e,t,r){if(function KY(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function uh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let $L=null;class xJ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw mg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class NJ extends xJ{initXhr(){this.xhr_.responseType="text"}}function Zo(){return $L?$L():new NJ}class jL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=_g(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(kn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(SL(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=EL()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(kn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function AJ(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s=LL(e,r,i),a={name:s.fullPath},u=_a(o,n.host,n._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=rD(s,t),S=new Ms(u,"POST",function E(N){let V;iD(N);try{V=N.getResponseHeader("X-Goog-Upload-URL")}catch{xs(!1)}return xs(Zv(V)),V},n.maxUploadRetryTime);return S.urlParams=a,S.headers=f,S.body=m,S.errorHandler=ah(e),S}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function SJ(n,e,t,r){const u=new Ms(t,"POST",function o(l){const f=iD(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xs(!1)}m||xs(!1);const y=Number(m);return xs(!isNaN(y)),new Jv(y,r.size(),"final"===f)},n.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=ah(e),u}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Zo,t,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Jv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function RJ(n,e,t,r,i,o,s,a){const u=new Jv(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function jY(){return new jn(kn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=u.total-u.current;let f=l;i>0&&(f=Math.min(f,i));const m=u.current;let E="";E=0===f?"finalize":l===f?"upload, finalize":"upload";const S={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${u.current}`},N=r.slice(m,m+f);if(null===N)throw CL();const J=new Ms(t,"POST",function V(ce,Ce){const Be=iD(ce,["active","final"]),z=u.current+f,P=r.size();let U;return U="final"===Be?Yv(e,o)(ce,Ce):null,new Jv(z,P,"final"===Be,U)},e.maxUploadRetryTime);return J.headers=S,J.body=N.uploadData(),J.progressCallback=a||null,J.errorHandler=ah(n),J}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Zo,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=FL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function UL(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let J="";for(let ce=0;ce<2;ce++)J+=Math.random().toString().slice(2);return J}();s["Content-Type"]="multipart/related; boundary="+u;const l=LL(e,r,i),f=rD(l,t),E=Ps.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===E)throw CL();const S={name:l.fullPath},N=_a(o,n.host,n._protocol),Q=n.maxUploadRetryTime,H=new Ms(N,"POST",Yv(n,t),Q);return H.urlParams=S,H.headers=s,H.body=E.uploadData(),H.errorHandler=ah(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zo,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wL(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=oD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new MJ(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(oD(this._state)){case Ti.SUCCESS:uh(this._resolve.bind(null,this.snapshot))();break;case Ti.CANCELED:case Ti.ERROR:uh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(oD(this._state)){case Ti.RUNNING:case Ti.PAUSED:e.next&&uh(e.next.bind(e,this.snapshot))();break;case Ti.SUCCESS:e.complete&&uh(e.complete.bind(e))();break;default:e.error&&uh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Dc{constructor(e,t){this._service=e,this._location=t instanceof ii?t:ii.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Dc(e,t)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xL(this._location.path)}get storage(){return this._service}get parent(){const e=function dJ(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ii(this._location.bucket,e);return new Dc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw TL(e)}}function zL(n,e,t){return sD.apply(this,arguments)}function sD(){return(sD=(0,ue.Z)(function*(n,e,t){const i=yield qL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield zL(n,e,i.nextPageToken))})).apply(this,arguments)}function qL(n,e){null!=e&&"number"==typeof e.maxResults&&XT("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=wJ(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zo)}function qJ(n){n._throwIfRoot("getDownloadURL");const e=function CJ(n,e,t){const i=_a(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ms(i,"GET",function EJ(n,e){return function t(r,i){const o=NL(n,i,e);return xs(null!==o),function _J(n,e,t,r){const i=nD(e);if(null===i||!Zv(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const m=n.fullPath;return _a("/b/"+s(n.bucket)+"/o/"+s(m),t,r)+AL({alt:"media",token:l})})[0]}(o,i,n.host,n._protocol)}}(n,t),s);return a.errorHandler=yg(e),a}(n.storage,n._location,_g());return n.storage.makeRequestWithTokens(e,Zo).then(t=>{if(null===t)throw function HY(){return new jn(kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function GL(n,e){const t=function hJ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ii(n._location.bucket,t);return new Dc(n.storage,r)}function WL(n,e){if(n instanceof aD){const t=n;if(null==t._bucket)throw function $Y(){return new jn(kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IL+"' property when initializing the app?")}();const r=new Dc(t,t._bucket);return null!=e?WL(r,e):r}return void 0!==e?GL(n,e):n}function KJ(n,e){if(e&&function WJ(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof aD)return function ZJ(n,e){return new Dc(n,e)}(n,e);throw oh("To use ref(service, url), the first argument must be a Storage instance.")}return WL(n,e)}function ZL(n,e){const t=e?.[IL];return null==t?null:ii.makeFromBucketSpec(t,n)}class aD{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=vL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ii.makeFromBucketSpec(i,this._host):ZL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ii.makeFromBucketSpec(this._url,e):ZL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ue.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ue.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new qY(bL());{const s=function nJ(n,e,t,r,i,o,s=!0){const a=AL(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return function eJ(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function JY(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function XY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,o),function tJ(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new YY(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,ue.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const KL="@firebase/storage",YL="storage";function JL(n,e){return KJ(n=(0,ht.m9)(n),e)}function oX(n=(0,qn.getApp)(),e){n=(0,ht.m9)(n);const r=(0,qn._getProvider)(n,YL).getImmediate({identifier:e}),i=(0,ht.P0)("storage");return i&&XL(r,...i),r}function XL(n,e,t,r={}){!function QJ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,ht.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function sX(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new aD(t,r,i,e,qn.SDK_VERSION)}!function aX(){(0,qn._registerComponent)(new Gy.wA(YL,sX,"PUBLIC").setMultipleInstances(!0)),(0,qn.registerVersion)(KL,"0.12.5",""),(0,qn.registerVersion)(KL,"0.12.5","esm2017")}();class Xv{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class e2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xv(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Xv(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?s=>t(new Xv(s,this,this._ref)):{next:t.next?s=>t.next(new Xv(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class t2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ya(e,this._service))}get items(){return this._delegate.items.map(e=>new ya(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ya{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function iX(n,e){return GL(n,e)}(this._delegate,e);return new ya(t,this.storage)}get root(){return new ya(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ya(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new e2(function YJ(n,e,t){return function BJ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new jL(n,new Ps(e),t)}(n=(0,ht.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=io.RAW,r){this._throwIfRoot("putString");const i=tD(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new e2(new jL(this._delegate,new Ps(i.data,!0),o),this)}listAll(){return function tX(n){return function jJ(n){const e={prefixes:[],items:[]};return zL(n,e).then(()=>e)}(n=(0,ht.m9)(n))}(this._delegate).then(e=>new t2(e,this.storage))}list(e){return function eX(n,e){return qL(n=(0,ht.m9)(n),e)}(this._delegate,e||void 0).then(t=>new t2(t,this.storage))}getMetadata(){return function JJ(n){return function HJ(n){n._throwIfRoot("getMetadata");const e=FL(n.storage,n._location,_g());return n.storage.makeRequestWithTokens(e,Zo)}(n=(0,ht.m9)(n))}(this._delegate)}updateMetadata(e){return function XJ(n,e){return function zJ(n,e){n._throwIfRoot("updateMetadata");const t=function bJ(n,e,t,r){const o=_a(e.fullServerUrl(),n.host,n._protocol),a=rD(t,r),l=n.maxOperationRetryTime,f=new Ms(o,"PATCH",Yv(n,r),l);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=yg(e),f}(n.storage,n._location,e,_g());return n.storage.makeRequestWithTokens(t,Zo)}(n=(0,ht.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function nX(n){return qJ(n=(0,ht.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function rX(n){return function GJ(n){n._throwIfRoot("deleteObject");const e=function TJ(n,e){const r=_a(e.fullServerUrl(),n.host,n._protocol),a=new Ms(r,"DELETE",function s(u,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=yg(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zo)}(n=(0,ht.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw TL(e)}}class n2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(r2(e))throw oh("ref() expected a child path but got a URL, use refFromURL instead.");return new ya(JL(this._delegate,e),this)}refFromURL(e){if(!r2(e))throw oh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ii.makeFromUrl(e,this._delegate.host)}catch{throw oh("refFromUrl() expected a valid full URL but got an invalid one.")}return new ya(JL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){XL(this._delegate,e,t,r)}}function r2(n){return/^[A-Za-z]+:\/\//.test(n)}function dX(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new n2(t,r)}function i2(n){const e=function fX(n){return new lt(e=>{const t=s=>e.next(s);t(n.snapshot);const o=n.on("state_changed",t);return n.then(s=>{t(s),e.complete()},s=>{t(n.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(function PY(n,e=yb){return ie((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=o;o=null,r.next(l)}};function u(){const l=s+n,f=e.now();if(f<l)return i=this.schedule(void 0,l-f),void r.add(i);a()}t.subscribe(Me(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Oe(t=>t.bytesTransferred/t.totalBytes*100))}}function eI(n){return{getDownloadURL:()=>k(void 0).pipe(oO,Ve(()=>n.getDownloadURL()),Ei),getMetadata:()=>k(void 0).pipe(oO,Ve(()=>n.getMetadata()),Ei),delete:()=>C(n.delete()),child:e=>eI(n.child(e)),updateMetadata:e=>C(n.updateMetadata(e)),put:(e,t)=>i2(n.put(e,t)),putString:(e,t,r)=>i2(n.putString(e,t,r)),list:e=>C(n.list(e)),listAll:()=>C(n.listAll())}}!function hX(n){const e={TaskState:Ti,TaskEvent:PJ,StringFormat:io,Storage:n2,Reference:ya};n.INTERNAL.registerComponent(new Gy.wA("storage-compat",dX,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.8")}(Wo.Z);const pX=new be("angularfire2.storageBucket"),gX=new be("angularfire2.storage.maxUploadRetryTime"),mX=new be("angularfire2.storage.maxOperationRetryTime"),_X=new be("angularfire2.storage.use-emulator");let uD=(()=>{class n{storage;constructor(t,r,i,o,s,a,u,l,f,m){const y=qy(t,s,r);this.storage=Eb(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const E=s.runOutsideAngular(()=>y.storage(i||void 0)),S=f;return S&&E.useEmulator(...S),u&&E.setMaxUploadRetryTime(u),l&&E.setMaxOperationRetryTime(l),E},[u,l])}ref(t){return eI(this.storage.ref(t))}refFromURL(t){return eI(this.storage.refFromURL(t))}upload(t,r,i){return eI(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(we(bp),we(Tp,8),we(pX,8),we(ko),we(Vt),we(Id),we(gX,8),we(mX,8),we(_X,8),we(Cp,8))};static \u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),yX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({})}return n})(),vX=(()=>{class n{constructor(){Wo.Z.registerVersion("angularfire",sa.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[uD],imports:[yX]})}return n})(),Ac=(()=>{class n{constructor(t,r){this.firestore=t,this.storage=r,this.defaultBusinessId="vfCMoPjAu2ROVBbKvk0D"}getBusinessData(t){return t||(t=this.defaultBusinessId),this.firestore.collection("businesses").doc(t).snapshotChanges().pipe(Oe(r=>{const i=r.payload.data(),o=r.payload.id;if(i){const{id:s,...a}=i;return{id:o,...a}}}))}getDefaultBusinessData(){return this.getBusinessData(this.defaultBusinessId)}getEmployees(){return this.firestore.collection("employees").valueChanges({idField:"id"})}getEmployeePhoto(t){return this.storage.ref(t).getDownloadURL().pipe(vs(r=>(console.error("Error fetching photo URL:",r),k(""))))}getEmployeesByBusinessId(t){return console.log("Fetching employees for business ID:",t),this.firestore.collection("businesses").doc(t).get().pipe(Oe(r=>{if(r.exists){const i=r.data();return i&&i.employees?(console.log("Fetched employees:",i.employees),i.employees):(console.warn("No employees found in the document."),[])}return console.warn("Business document does not exist."),[]}),vs(r=>(console.error("Error fetching employees:",r),k([]))))}static#e=this.\u0275fac=function(r){return new(r||n)(we(KT),we(uD))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IX(n,e){if(1&n&&(F(0,"div",13),ye(1,"img",14),F(2,"div",15)(3,"h1"),$(4,"Welcome to "),ye(5,"br"),$(6),D(),ye(7,"br"),F(8,"p"),$(9),D()()()),2&n){const t=e.$implicit,r=e.index,i=vr(2);jf("active",0===r),Te(1),Qe("src",t,hs),Te(5),Ui(" ",i.business.businessName,""),Te(3),Xr(i.business.tagline)}}function EX(n,e){if(1&n&&(F(0,"div",1)(1,"div",2),ye(2,"button",3)(3,"button",4)(4,"button",5),D(),F(5,"div",6),on(6,IX,10,5,"div",7),D(),F(7,"button",8),ye(8,"span",9),F(9,"span",10),$(10,"Previous"),D()(),F(11,"button",11),ye(12,"span",12),F(13,"span",10),$(14,"Next"),D()()()),2&n){const t=vr();Te(6),Qe("ngForOf",t.business.heroImages)}}let wX=(()=>{class n{ngOnInit(){this.fetchBusinessData()}fetchBusinessData(){this.business={businessName:"#1 Helping Hand AFH",tagline:"We\u2019re Family, Not Just Care.",heroImages:["../../../assets/sharedAssets/istockphoto-613308420-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-804432288-2048x2048.jpg","../../../assets/sharedAssets/istockphoto-1315315044-2048x2048.jpg"]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-hero-carousel"]],inputs:{businessID:"businessID"},decls:1,vars:1,consts:[["id","heroCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],["id","heroCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#heroCarousel","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#heroCarousel","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#heroCarousel","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["type","button","data-bs-target","#heroCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#heroCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item"],["alt","Hero Image",1,"d-block","w-100",3,"src"],[1,"carousel-caption","d-none","d-md-block","hero-overlay"]],template:function(r,i){1&r&&on(0,EX,15,1,"div",0),2&r&&Qe("ngIf",i.business)},dependencies:[Za,ra],styles:[".carousel-item[_ngcontent-%COMP%]{display:none;position:relative;width:100%;transition:transform .6s ease-in-out}.carousel-item.active[_ngcontent-%COMP%]{display:block}#heroCarousel[_ngcontent-%COMP%]{position:relative}.carousel-item[_ngcontent-%COMP%]{position:relative;height:800px}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:200px;left:0;width:100%;height:50%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.3);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:5rem;letter-spacing:.5rem;text-transform:uppercase;font-weight:700;margin:0}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:10%}.carousel-control-prev[_ngcontent-%COMP%]:hover, .carousel-control-next[_ngcontent-%COMP%]:hover{background-color:#00000080}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{display:inline-block;width:30px;height:30px;background:none;border:solid white;border-width:0 6px 6px 0}.carousel-control-prev-icon[_ngcontent-%COMP%]{transform:rotate(135deg)}.carousel-control-next-icon[_ngcontent-%COMP%]{transform:rotate(-45deg)}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.carousel-item[_ngcontent-%COMP%]{height:300px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]{padding:10px}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.hero-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.carousel-item[_ngcontent-%COMP%]{height:200px}}.carousel[_ngcontent-%COMP%]{position:relative}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:5%;top:50%;transform:translateY(-50%)}.carousel-control-prev-icon[_ngcontent-%COMP%], .carousel-control-next-icon[_ngcontent-%COMP%]{background-size:100%,100%}.carousel-indicators[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:50%;transform:translate(-50%);z-index:15;display:flex;justify-content:center;padding-left:0;margin-right:0;margin-left:0;list-style:none}.carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{box-sizing:content-box;flex:0 1 auto;width:50px;height:5px;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#ffffff80;background-clip:padding-box;border:0;border-radius:0}.carousel-indicators[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#fff}"]})}return n})();function CX(n,e){if(1&n&&(F(0,"div",5),ye(1,"div",6),D()),2&n){const t=e.$implicit;Te(1),Qe("innerHTML",t,za)}}function bX(n,e){if(1&n&&(F(0,"div",5),ye(1,"div",6),D()),2&n){const t=e.$implicit;Te(1),Qe("innerHTML",t,za)}}let cD=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r,this.business={businessName:"",tagline:"",uniqueService:"",whyChoose:"",businessStory:"",motivation:"",mission:"",vision:"",certifications:"",targetAudience:"",services:"",specialPrograms:"",tours:"",freeConsulting:"",websiteGoals:"",logoImage:"",ownerImagesBios:"",staffImagesBios:"",facilityImages:[],lifestyleImages:[],mediaFeatures:"",ratings:"",testimonials:"",address:"",phone:"",fax:"",email:"",businessHours:"",socialMedia:"",welcomeMessage:"",keyServicesHighlights:"",teamValues:"",serviceBenefits:"",pricingStructure:"",contactFormDetails:"",mapDirections:"",photoGallery:"",employees:[],id:"",faqs:"",blogNews:"",mapIframe:"",isActive:!1}}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ac),he(ji))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-home"]],decls:12,vars:3,consts:[[3,"businessID"],[1,"features-container"],[1,"features-section"],[1,"feature-list"],["class","feature-item",4,"ngFor","ngForOf"],[1,"feature-item"],[1,"container",3,"innerHTML"]],template:function(r,i){1&r&&(ye(0,"app-hero-carousel",0),F(1,"div",1)(2,"div",2)(3,"h2"),$(4,"Our Unique Features"),D(),F(5,"div",3),on(6,CX,2,1,"div",4),D()(),F(7,"div",2)(8,"h2"),$(9,"Why Choose Us"),D(),F(10,"div",3),on(11,bX,2,1,"div",4),D()()()),2&r&&(Qe("businessID",i.business.id),Te(6),Qe("ngForOf",i.business.uniqueService.split("|")),Te(5),Qe("ngForOf",i.business.whyChoose.split("|")))},dependencies:[Za,wX],styles:[".container[_ngcontent-%COMP%]{padding:40px 20px}.features-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px;margin:50px auto;max-width:1024px;border-radius:12px}.features-section[_ngcontent-%COMP%]{flex:1 1 100%;border-radius:12px;padding:50px 20px;background:#f9f9f9;text-align:center;box-sizing:border-box;margin-bottom:20px}.features-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:30px;color:#333}.feature-list[_ngcontent-%COMP%]{max-width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.feature-item[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;padding:20px;flex:1 1 100%;box-sizing:border-box;transition:transform .3s;max-width:100%}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#007bff;margin:0}@media (min-width: 1024px){.feature-item[_ngcontent-%COMP%]{flex:1 1 calc(33.333% - 20px);max-width:calc(33.333% - 20px)}}@media (max-width: 768px){.feature-item[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}.features-section[_ngcontent-%COMP%]{flex:1 1 100%;min-width:100%;margin-bottom:20px}}@media (max-width: 480px){.feature-item[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}.features-section[_ngcontent-%COMP%]{min-width:100%}}"]})}return n})();function TX(n,e){if(1&n&&(F(0,"div",3),ye(1,"img",4),F(2,"h3"),$(3),D(),F(4,"h4"),$(5),D(),F(6,"p"),$(7),D()()),2&n){const t=e.$implicit;Te(1),z_("alt",t.name),Qe("src",t.photoURL,hs),Te(2),Xr(t.name),Te(2),Xr(t.role),Te(2),Xr(t.bio)}}let DX=(()=>{class n{constructor(t,r){this.route=t,this.employeeService=r}ngOnInit(){this.employees$=this.route.queryParamMap.pipe(Oe(t=>t.get("id")||""),Ve(t=>{if(!t)throw new Error("Business ID is required");return this.employeeService.getEmployeesByBusinessId(t)}),vs(t=>(console.error("Error fetching employees:",t),k([]))))}static#e=this.\u0275fac=function(r){return new(r||n)(he(ji),he(Ac))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-meet-the-team"]],inputs:{businessId:"businessId"},decls:6,vars:3,consts:[[1,"meet-the-team"],[1,"team-list"],["class","team-member",4,"ngFor","ngForOf"],[1,"team-member"],[1,"team-photo",3,"src","alt"]],template:function(r,i){1&r&&(F(0,"div",0)(1,"h2"),$(2,"Meet the Team"),D(),F(3,"div",1),on(4,TX,8,5,"div",2),Bo(5,"async"),D()()),2&r&&(Te(4),Qe("ngForOf",$o(5,1,i.employees$)))},dependencies:[Za,np],styles:[".meet-the-team[_ngcontent-%COMP%]{padding:50px 20px;background:#f9f9f9;text-align:center}.meet-the-team[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:30px;color:#333}.team-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.team-member[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;margin:10px;padding:20px;flex:1 1 calc(33.333% - 20px);box-sizing:border-box;max-width:calc(33.333% - 20px);text-align:center;transition:transform .3s}.team-member[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.team-photo[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:50%;margin-bottom:15px}.team-member[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#007bff;margin:0}.team-member[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em;color:#555;margin:0}.team-member[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666;margin:15px 0 0}@media (max-width: 768px){.team-member[_ngcontent-%COMP%]{flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}}@media (max-width: 480px){.team-member[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}}"]})}return n})();function AX(n,e){if(1&n&&(F(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"About Us"),D(),F(5,"p"),$(6,"Where Compassion Meets Care: Your Loved Ones, Our Family."),D()()(),F(7,"div",3)(8,"section",4)(9,"div",5)(10,"h2",6),$(11,"Our Story"),D()(),ye(12,"div",7),D(),F(13,"section",8)(14,"div",9),ye(15,"img",10),F(16,"div",5)(17,"h2",6),$(18,"Our Mission"),D()(),ye(19,"div",7),D(),F(20,"div",11),ye(21,"img",10),F(22,"div",5)(23,"h2",6),$(24,"Our Vision"),D()(),ye(25,"div",7),D()(),F(26,"section",12),ye(27,"app-meet-the-team",13),D()()()),2&n){const t=vr();Te(12),Qe("innerHTML",t.business.businessStory,za),Te(3),Qe("src",t.business.lifestyleImages,hs),Te(4),Qe("innerHTML",t.business.mission,za),Te(2),Qe("src",t.business.facilityImages,hs),Te(4),Qe("innerHTML",t.business.vision,za),Te(2),Qe("businessId",t.business.id)}}let SX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ac),he(ji))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-about-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-about"],[1,"hero-overlay"],[1,"container"],[1,"business-story"],[1,"heading-container"],[1,"styled-heading"],[1,"services_txt","garamond",3,"innerHTML"],[1,"mission-vision"],[1,"mission"],[3,"src"],[1,"vision"],[1,"business-team"],[3,"businessId"]],template:function(r,i){1&r&&on(0,AX,28,6,"div",0),2&r&&Qe("ngIf",i.business)},dependencies:[ra,DX],styles:['.hero-about[_ngcontent-%COMP%]{background:url(istockphoto-1207318385-2048x2048.d8e6c744c314dbde.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;letter-spacing:.3rem;text-transform:uppercase;font-weight:700;margin:0}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}section[_ngcontent-%COMP%]{margin-bottom:40px}.business-story[_ngcontent-%COMP%]{background:#f9f9f9;padding:50px 20px;border-radius:8px}.business-team[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:12px}.mission-vision[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:50px}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{background:#f9f9f9;border-radius:8px;margin:10px;padding:50px 20px;box-shadow:0 2px 5px #0000001a;flex:1 1 calc(50% - 20px);box-sizing:border-box}.mission[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:30px;color:#333}.mission[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666}.team[_ngcontent-%COMP%]{text-align:center}.team-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.team-item[_ngcontent-%COMP%]{width:250px;margin:10px;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px #0000001a;text-align:center}.team-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;object-fit:cover}.team-info[_ngcontent-%COMP%]{margin-top:10px}.team-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:10px 0 5px;font-size:1.2rem}.team-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#666}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.mission-vision[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{width:100%;padding:30px 20px;margin:20px 0}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;letter-spacing:.2rem}.mission-vision[_ngcontent-%COMP%]{margin-bottom:20px}.mission[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]{padding:20px 10px}.business-story[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .vision[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.team-item[_ngcontent-%COMP%]{width:100%;margin:10px 0}.team-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.team-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.team-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}}.heading-container[_ngcontent-%COMP%]{text-align:center;margin:20px 0;padding:10px;position:relative;overflow:hidden}.styled-heading[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2rem;font-weight:700;color:#333;position:relative;z-index:1;display:inline-block;padding:10px 20px;width:400px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.styled-heading[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:0;right:0;height:2px;background-color:#e0e0e0;z-index:0;transform:translateY(-50%)}.styled-heading[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;width:100px;height:5px;background-color:#ff6f61;transform:translate(-50%);z-index:2}']})}return n})();function RX(n,e){if(1&n&&(F(0,"li")(1,"h3"),$(2),D()()),2&n){const t=e.$implicit;Te(2),Xr(t)}}function PX(n,e){if(1&n&&(F(0,"li")(1,"h3"),$(2),D()()),2&n){const t=e.$implicit;Te(2),Xr(t)}}function MX(n,e){if(1&n&&(F(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"Our Services"),D(),F(5,"p"),$(6,"Providing exceptional care tailored to your needs"),D()()(),F(7,"div",3)(8,"section",4),ye(9,"img",5),F(10,"h2"),$(11,"Our Comprehensive Services"),D(),F(12,"ul"),on(13,RX,3,1,"li",6),D()(),F(14,"section",4),ye(15,"img",5),F(16,"h2"),$(17,"Our Benefits"),D(),F(18,"ul"),on(19,PX,3,1,"li",6),D()(),F(20,"section",7)(21,"h2"),$(22,"Special Programs"),D(),F(23,"h3"),$(24),D()(),F(25,"section",8)(26,"div",9),ye(27,"img",10),F(28,"div",11)(29,"h2",12),$(30,"Tours"),D()(),ye(31,"div",13),D(),F(32,"div",14),ye(33,"img",15),F(34,"div",11)(35,"h2",12),$(36,"Free Consulting"),D()(),ye(37,"div",13),D()()()()),2&n){const t=vr();Te(13),Qe("ngForOf",t.business.services.split(",")),Te(6),Qe("ngForOf",t.business.serviceBenefits.split(",")),Te(5),Xr(t.business.specialPrograms),Te(7),Qe("innerHTML",t.business.tours,za),Te(6),Qe("innerHTML",t.business.freeConsulting,za)}}let xX=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ac),he(ji))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-services"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-services"],[1,"hero-overlay"],[1,"container"],[1,"services-list"],["src","/assets/care.svg","alt","Service Icon"],[4,"ngFor","ngForOf"],[1,"special-programs"],[1,"tours-consulting"],[1,"tours"],["src","../../../assets/sharedAssets/image_fx_ (3).jpg",1,"service_image"],[1,"heading-container"],[1,"styled-heading"],[1,"services_txt","garamond",3,"innerHTML"],[1,"consulting"],["src","../../../assets/sharedAssets/image_fx_ (1).jpg",1,"service_image"]],template:function(r,i){1&r&&on(0,MX,38,5,"div",0),2&r&&Qe("ngIf",i.business)},dependencies:[Za,ra],styles:['.hero-services[_ngcontent-%COMP%]{background:url(istockphoto-1335866199-2048x2048.e588b8992a5787c5.jpg) no-repeat center center/cover;background-size:cover;background-position:center;position:relative;height:400px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;letter-spacing:.5rem;text-transform:uppercase;font-weight:700;margin:0}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.services-list[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:12px;margin-bottom:40px}.service-item[_ngcontent-%COMP%]{background:white;padding:20px;margin-bottom:20px;border-radius:8px;box-shadow:0 2px 5px #0000001a;display:flex;align-items:center}.service-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.special-programs[_ngcontent-%COMP%], .tours-consulting[_ngcontent-%COMP%]{background:#f9f9f9;padding:30px;border-radius:8px;margin-bottom:40px}.tours-consulting[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{flex:1;margin-right:40px}.tours[_ngcontent-%COMP%]:last-child, .consulting[_ngcontent-%COMP%]:last-child{margin-right:0}.service-icon[_ngcontent-%COMP%]{flex:0 0 50px;margin-right:20px}.service-content[_ngcontent-%COMP%]{flex:1}.service_heading[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:1rem}.body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}.services-page[_ngcontent-%COMP%]{text-align:center}.service_image[_ngcontent-%COMP%]{max-width:100%}.heading-container[_ngcontent-%COMP%]{text-align:center;margin:20px 0;padding:10px;position:relative;overflow:hidden}.styled-heading[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2rem;font-weight:700;color:#333;position:relative;z-index:1;display:inline-block;padding:10px 20px;background-color:#fff;box-shadow:0 4px 6px #0000001a}.styled-heading[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:0;right:0;height:2px;background-color:#e0e0e0;z-index:0;transform:translateY(-50%)}.styled-heading[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;width:100px;height:5px;background-color:#ff6f61;transform:translate(-50%);z-index:2}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.special-programs[_ngcontent-%COMP%], .tours-consulting[_ngcontent-%COMP%]{padding:20px}.tours-consulting[_ngcontent-%COMP%]{flex-direction:column;margin-right:0}.tours[_ngcontent-%COMP%], .consulting[_ngcontent-%COMP%]{margin-right:0;min-width:100%}.service-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.service_heading[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:.5rem}.styled-heading[_ngcontent-%COMP%]{font-size:1.5rem;padding:8px 16px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.tours-consulting[_ngcontent-%COMP%], .special-programs[_ngcontent-%COMP%]{padding:10px}.service_heading[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.25rem}.styled-heading[_ngcontent-%COMP%]{font-size:1.25rem;padding:6px 12px}.service-item[_ngcontent-%COMP%]{padding:15px}}']})}return n})(),o2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Zs),he(Xi))};static#t=this.\u0275dir=Je({type:n})}return n})(),Sc=(()=>{class n extends o2{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=cr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,features:[Jt]})}return n})();const Ns=new be("NgValueAccessor"),kX={provide:Ns,useExisting:Ht(()=>vg),multi:!0},VX=new be("CompositionEventMode");let vg=(()=>{class n extends o2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FX(){const n=Wa()?Wa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Zs),he(Xi),he(VX,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Lt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Mn([kX]),Jt]})}return n})();function yu(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function a2(n){return null!=n&&"number"==typeof n.length}const oi=new be("NgValidators"),vu=new be("NgAsyncValidators"),LX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class tn{static min(e){return function u2(n){return e=>{if(yu(e.value)||yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function c2(n){return e=>{if(yu(e.value)||yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return l2(e)}static requiredTrue(e){return function d2(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function h2(n){return yu(n.value)||LX.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function f2(n){return e=>yu(e.value)||!a2(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function p2(n){return e=>a2(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function g2(n){if(!n)return tI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return E2(e)}static composeAsync(e){return w2(e)}}function l2(n){return yu(n.value)?{required:!0}:null}function tI(n){return null}function m2(n){return null!=n}function _2(n){return $f(n)?C(n):n}function y2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function v2(n,e){return e.map(t=>t(n))}function I2(n){return n.map(e=>function UX(n){return!n.validate}(e)?e:t=>e.validate(t))}function E2(n){if(!n)return null;const e=n.filter(m2);return 0==e.length?null:function(t){return y2(v2(t,e))}}function lD(n){return null!=n?E2(I2(n)):null}function w2(n){if(!n)return null;const e=n.filter(m2);return 0==e.length?null:function(t){return function NX(...n){const e=So(n),{args:t,keys:r}=Zx(n),i=new lt(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,l=s;for(let f=0;f<s;f++){let m=!1;kt(t[f]).subscribe(Me(o,y=>{m||(m=!0,l--),a[f]=y},()=>u--,void 0,()=>{(!u||!m)&&(l||o.next(r?Qx(r,a):a),o.complete())}))}});return e?i.pipe(Kx(e)):i}(v2(t,e).map(_2)).pipe(Oe(y2))}}function dD(n){return null!=n?w2(I2(n)):null}function C2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function b2(n){return n._rawValidators}function T2(n){return n._rawAsyncValidators}function hD(n){return n?Array.isArray(n)?n:[n]:[]}function nI(n,e){return Array.isArray(n)?n.includes(e):n===e}function D2(n,e){const t=hD(e);return hD(n).forEach(i=>{nI(t,i)||t.push(i)}),t}function A2(n,e){return hD(e).filter(t=>!nI(n,t))}class S2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Di extends S2{get formDirective(){return null}get path(){return null}}class Iu extends S2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class R2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let fD=(()=>{class n extends R2{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Iu,2))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&jf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Jt]})}return n})(),rI=(()=>{class n extends R2{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Di,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&jf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Jt]})}return n})();const Ig="VALID",oI="INVALID",ch="PENDING",Eg="DISABLED";function mD(n){return(sI(n)?n.validators:n)||null}function _D(n,e){return(sI(e)?e.asyncValidators:n)||null}function sI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function M2(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[t])throw new x(1001,"")}function x2(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new x(1002,"")})}class aI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ig}get invalid(){return this.status===oI}get pending(){return this.status==ch}get disabled(){return this.status===Eg}get enabled(){return this.status!==Eg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(D2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(D2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(A2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(A2(e,this._rawAsyncValidators))}hasValidator(e){return nI(this._rawValidators,e)}hasAsyncValidator(e){return nI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ch,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Eg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ig,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ig||this.status===ch)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Eg:Ig}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ch,this._hasOwnPendingAsyncValidator=!0;const t=_2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Hn,this.statusChanges=new Hn}_calculateStatus(){return this._allControlsDisabled()?Eg:this.errors?oI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ch)?ch:this._anyControlsHaveStatus(oI)?oI:Ig}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function HX(n){return Array.isArray(n)?lD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zX(n){return Array.isArray(n)?dD(n):n||null}(this._rawAsyncValidators)}}class wg extends aI{constructor(e,t,r){super(mD(t),_D(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){x2(this,0,e),Object.keys(e).forEach(r=>{M2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class N2 extends wg{}const Rc=new be("CallSetDisabledState",{providedIn:"root",factory:()=>Cg}),Cg="always";function uI(n,e){return[...e.path,n]}function bg(n,e,t=Cg){yD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function GX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&O2(n,e)})}(n,e),function ZX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function WX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&O2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qX(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),dI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yD(n,e){const t=b2(n);null!==e.validator?n.setValidators(C2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=T2(n);null!==e.asyncValidator?n.setAsyncValidators(C2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();lI(e._rawValidators,i),lI(e._rawAsyncValidators,i)}function dI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=b2(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=T2(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return lI(e._rawValidators,r),lI(e._rawAsyncValidators,r),t}function O2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function k2(n,e){yD(n,e)}function F2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const XX={provide:Di,useExisting:Ht(()=>hI)},Tg=(()=>Promise.resolve())();let hI=(()=>{class n extends Di{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Hn,this.form=new wg({},lD(t),dD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tg.then(()=>{const r=this._findContainer(t.path),i=new wg({});k2(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,F2(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(he(oi,10),he(vu,10),he(Rc,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Lt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mn([XX]),Jt]})}return n})();function V2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function L2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Dg=class extends aI{constructor(e=null,t,r){super(mD(t),_D(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=L2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){V2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){V2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){L2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let U2=(()=>{class n extends Di{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return uI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=cr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,features:[Jt]})}return n})(),fI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})(),z2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({})}return n})();const wD=new be("NgModelWithFormControlWarning"),uee={provide:Di,useExisting:Ht(()=>Ag)};let Ag=(()=>{class n extends Di{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Hn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return bg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){cI(t.control||null,t,!1),function JX(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,F2(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(cI(r||null,t),(n=>n instanceof Dg)(i)&&(bg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);k2(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function KX(n,e){return dI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yD(this.form,this),this._oldForm&&dI(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(he(oi,10),he(vu,10),he(Rc,8))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Lt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mn([uee]),Jt,Fi]})}return n})();const cee={provide:Di,useExisting:Ht(()=>Sg)};let Sg=(()=>{class n extends U2{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){Z2(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Di,13),he(oi,10),he(vu,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[Mn([cee]),Jt]})}return n})();const lee={provide:Di,useExisting:Ht(()=>Rg)};let Rg=(()=>{class n extends Di{constructor(t,r,i){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return uI(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Z2(this._parent)}static#e=this.\u0275fac=function(r){return new(r||n)(he(Di,13),he(oi,10),he(vu,10))};static#t=this.\u0275dir=Je({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[Mn([lee]),Jt]})}return n})();function Z2(n){return!(n instanceof Sg||n instanceof Ag||n instanceof Rg)}const dee={provide:Iu,useExisting:Ht(()=>pI)};let pI=(()=>{class n extends Iu{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Hn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ED(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===vg?t=o:function YX(n){return Object.getPrototypeOf(n.constructor)===Sc}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function ID(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return uI(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(he(Di,13),he(oi,10),he(vu,10),he(Ns,10),he(wD,8))};static#n=this.\u0275dir=Je({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mn([dee]),Jt,Fi]})}return n})(),Pc=(()=>{class n{constructor(){this._validator=tI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):tI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Je({type:n,features:[Fi]})}return n})();const Iee={provide:oi,useExisting:Ht(()=>Pg),multi:!0};let Pg=(()=>{class n extends Pc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ud,this.createValidator=t=>l2}enabled(t){return t}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=cr(n)))(i||n)}}();static#t=this.\u0275dir=Je({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&gs("required",i._enabled?"":null)},inputs:{required:"required"},features:[Mn([Iee]),Jt]})}return n})(),sU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({imports:[z2]})}return n})();class aU extends aI{constructor(e,t,r){super(mD(t),_D(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){x2(this,0,e),e.forEach((r,i)=>{M2(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function uU(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let cU=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return uU(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new wg(i,o)}record(t,r=null){const i=this._reduceControls(t);return new N2(i,r)}control(t,r,i){let o={};return this.useNonNullable?(uU(r)?o=r:(o.validators=r,o.asyncValidators=i),new Dg(t,{...o,nonNullable:!0})):new Dg(t,r,i)}array(t,r,i){const o=t.map(s=>this._createControl(s));return new aU(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Dg||t instanceof aI?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rc,useValue:t.callSetDisabledState??Cg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({imports:[sU]})}return n})(),Aee=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rc,useValue:t.callSetDisabledState??Cg}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({imports:[sU]})}return n})();function See(n,e){if(1&n&&(F(0,"div",6)(1,"h3"),$(2,"Email"),D(),F(3,"p")(4,"a",20),$(5),D()()()),2&n){const t=vr(2);Te(4),vo("href","mailto:",t.business.email,"",hs),Te(1),Xr(t.business.email)}}function Ree(n,e){if(1&n&&(F(0,"div",6)(1,"h3"),$(2,"Fax"),D(),F(3,"p"),$(4),D()()),2&n){const t=vr(2);Te(4),Xr(t.business.fax)}}function Pee(n,e){if(1&n&&(F(0,"div",6)(1,"h3"),$(2,"Social Media"),D(),F(3,"p")(4,"a",20),$(5),D()()()),2&n){const t=vr(2);Te(4),z_("href",t.business.socialMedia,hs),Te(1),Xr(t.business.socialMedia)}}function Mee(n,e){if(1&n&&(F(0,"div")(1,"div",1)(2,"div",2)(3,"h1"),$(4,"Contact Us"),D(),F(5,"p"),$(6,"We're here to answer any questions you have"),D()()(),F(7,"div",3)(8,"section",4)(9,"h2"),$(10,"Get in Touch"),D(),F(11,"div",5)(12,"div",6)(13,"h3"),$(14,"Address"),D(),F(15,"p"),$(16),D()(),F(17,"div",6)(18,"h3"),$(19,"Phone"),D(),F(20,"p"),$(21),D()(),on(22,See,6,2,"div",7),on(23,Ree,5,1,"div",7),on(24,Pee,6,2,"div",7),F(25,"div")(26,"h3"),$(27,"Visitation Hours"),D(),F(28,"ul")(29,"li")(30,"strong"),$(31,"Monday:"),D(),$(32," 7.30am\u20135pm"),D(),F(33,"li")(34,"strong"),$(35,"Tuesday:"),D(),$(36," 7.30am\u20135pm"),D(),F(37,"li")(38,"strong"),$(39,"Wednesday:"),D(),$(40," 7.30am\u20135pm"),D(),F(41,"li")(42,"strong"),$(43,"Thursday:"),D(),$(44," 7.30am\u20135pm"),D(),F(45,"li")(46,"strong"),$(47,"Friday:"),D(),$(48," 7.30am\u20135pm"),D(),F(49,"li")(50,"strong"),$(51,"Saturday:"),D(),$(52,"Closed"),D(),F(53,"li")(54,"strong"),$(55,"Sunday:"),D(),$(56,"Closed"),D()()()()(),F(57,"section",8)(58,"h2"),$(59,"Send Us a Message"),D(),F(60,"form")(61,"div",9)(62,"label",10),$(63,"Name"),D(),ye(64,"input",11),D(),F(65,"div",9)(66,"label",12),$(67,"Email"),D(),ye(68,"input",13),D(),F(69,"div",9)(70,"label",14),$(71,"Message"),D(),ye(72,"textarea",15),D(),F(73,"button",16),$(74,"Submit"),D()()(),F(75,"section",17)(76,"h2"),$(77,"Find Us Here"),D(),F(78,"div",18),ye(79,"iframe",19),D()()()()),2&n){const t=vr();Te(16),Xr(t.business.address),Te(5),Xr(t.business.phone),Te(1),Qe("ngIf",t.business.email),Te(1),Qe("ngIf",t.business.fax),Te(1),Qe("ngIf",t.business.socialMedia)}}let xee=(()=>{class n{constructor(t,r){this.webContent=t,this.route=r}ngOnInit(){this.route.queryParams.subscribe(t=>{this.webContent.getBusinessData(t.id).subscribe(i=>{i&&(this.business=i)})})}static#e=this.\u0275fac=function(r){return new(r||n)(he(Ac),he(ji))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-contact-us"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"hero-contact"],[1,"hero-overlay"],[1,"container"],[1,"contact-info"],[1,"contact-details"],[1,"contact-item"],["class","contact-item",4,"ngIf"],[1,"contact-form"],[1,"form-group"],["for","name"],["type","text","id","name","required",""],["for","email"],["type","email","id","email","required",""],["for","message"],["id","message","rows","5","required",""],["type","submit"],[1,"map-section"],[1,"map-container"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7460.530516506536!2d-122.18471088983462!3d47.54600478154801!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x549069117965856f%3A0xa36b023f16c07440!2s11805%20SE%2064th%20St%2C%20Bellevue%2C%20WA%2098006!5e0!3m2!1sen!2sus!4v1719851446084!5m2!1sen!2sus","width","600","height","450","allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"border","0"],[3,"href"]],template:function(r,i){1&r&&on(0,Mee,80,5,"div",0),2&r&&Qe("ngIf",i.business)},dependencies:[ra,fI,rI,hI],styles:[".hero-contact[_ngcontent-%COMP%]{background-image:url(/assets/splash2.jpg);background-size:cover;background-position:center;position:relative;height:300px;display:flex;align-items:center;justify-content:center;color:#fff;text-align:center}.hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,.5);color:#fff;font-family:Playfair Display,serif}.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:4rem;letter-spacing:.3rem;text-transform:uppercase;font-weight:700;margin:0}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.contact-info[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.contact-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.contact-item[_ngcontent-%COMP%]{flex:1 1 45%;margin-bottom:20px}.contact-form[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:40px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:1rem}.button[_ngcontent-%COMP%]:hover{background-color:#45a049}.map-section[_ngcontent-%COMP%]{margin-bottom:50px}.map-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%;background:#f9f9f9;border-radius:8px;box-shadow:0 2px 5px #0000001a}.map-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:0}@media (max-width: 768px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;letter-spacing:.2rem}.contact-details[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.contact-item[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.map-section[_ngcontent-%COMP%]{margin-bottom:30px}}@media (max-width: 480px){.hero-overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;letter-spacing:.1rem}.contact-item[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:8px}.button[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem}}"]})}return n})(),TD=(()=>{class n{constructor(t,r){this.afs=t,this.storage=r,this.basePath="businesses"}createBusiness(t){console.log("Business Created");const r=this.afs.createId();return this.afs.doc(`${this.basePath}/${r}`).set({...t,id:r})}getBusinesses(){return this.afs.collection(this.basePath).snapshotChanges().pipe(Oe(t=>t.map(r=>{const i=r.payload.doc.data(),o=r.payload.doc.id,{id:s,...a}=i;return{id:o,...a}})))}getAllBusinesses(){return this.afs.collection(this.basePath).valueChanges({idField:"id"})}getBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).valueChanges()}updateBusiness(t,r){return this.afs.doc(`${this.basePath}/${t}`).update(r)}deleteBusiness(t){return this.afs.doc(`${this.basePath}/${t}`).delete()}uploadFile(t,r){return this.storage.upload(t,r)}getDownloadURL(t){return this.storage.ref(t).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||n)(we(KT),we(uD))};static#t=this.\u0275prov=ze({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Nee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function Oee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function kee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function Fee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function Vee(n,e){if(1&n){const t=H_();F(0,"div",84)(1,"div",2)(2,"label",85),$(3,"Employee Name"),D(),ye(4,"input",86),D(),F(5,"div",2)(6,"label",87),$(7,"Role"),D(),ye(8,"input",88),D(),F(9,"div",2)(10,"label",89),$(11,"Bio"),D(),ye(12,"textarea",90),D(),F(13,"div",2)(14,"label",91),$(15,"Photo"),D(),F(16,"input",92),Lt("change",function(i){const s=zs(t).index;return No(vr().onEmployeeFileChange(i,s))}),D(),on(17,Fee,4,3,"ng-container",35),Bo(18,"async"),D(),F(19,"button",80),Lt("click",function(){const o=zs(t).index;return No(vr().removeEmployee(o))}),$(20,"Remove Employee"),D()()}if(2&n){const t=e.index,r=vr();Qe("formGroupName",t),Te(17),Qe("ngIf",$o(18,2,r.uploadProgress["employee_"+t]))}}let DD=(()=>{class n{constructor(t,r){this.fb=t,this.businessService=r,this.uploadProgress={}}ngOnInit(){this.businessForm=this.fb.group({businessName:["Careful Living AFH",tn.required],tagline:["Caring with compassion"],uniqueService:["Personalized 24/7 care"],whyChoose:["We provide personalized care tailored to each resident's needs."],businessStory:["Careful Living AFH was founded in 2005 by a group of healthcare professionals who wanted to provide a loving and caring environment for seniors.",tn.required],motivation:["The motivation behind starting this business was to create a home where seniors can live comfortably and with dignity."],mission:["Our mission is to work hard each day to meet and exceed the expectations of our residents and their families. We provide personalized extensive care plans based on the residents needs, preferences and interests while giving their families peace of mind knowing that all their needs are being met.",tn.required],vision:["Elderly Home Care is a perfect alternative for seniors who can no longer live on their own, but want to maintain their independence in a warm, friendly home-like atmosphere with 24-hour tender compassionate care. We are conveniently located 10 minutes away from Evergreen Hospital in Bellevue, bordering Kirkland",tn.required],certifications:["Licensed by the state, Certified Nursing Assistants (CNA) on staff.",tn.required],targetAudience:["Seniors in need of assisted living services, families looking for quality care for their loved ones."],services:["24-hour supervision and assistancer , Medication management , Vital signs monitoring , Assistance with daily living activities such as dressing, bathing, grooming , Partial or full incontinence care support , Assistance with walking, transferring and eating , Three nutritious home-cooked meals and snacks daily , Special diets , Laundry and housekeeping , Personalized activities programs , Entertainment provided by outside vendors",tn.required],specialPrograms:["Holiday Celebrations \xb7 Birthday Parties \xb7 Outdoor activities \xb7 Exercise Program \xb7 Musical Program \xb7 Arts and Crafts \xb7 Games \xb7 Movie and Popcorn Nights \xb7 Newspaper \xb7 Gardening"],tours:["Yes, we provide tours of our facility."],freeConsulting:["Yes, we offer free consulting services."],websiteGoals:["To provide information, encourage visits, and offer consultation requests.",tn.required],logoImage:[""],ownerImagesBios:["John Doe, RN, Founder.",tn.required],staffImagesBios:["Jane Smith, CNA, Head Nurse; Bob Johnson, Physical Therapist.",tn.required],facilityImages:[""],lifestyleImages:[""],mediaFeatures:["Featured in Local News, Healthcare Magazine."],ratings:["Google: 4.8 stars, Yelp: 5 stars"],testimonials:['John Doe\'s family: "Amazing care!"'],address:["1234 Care St, Compassion City, ST 12345",tn.required],phone:["(123) 456-7890",tn.required],fax:["(123) 456-7891"],email:["info@carefullivingafh.com",tn.email],businessHours:["Mon-Fri: 9am-5pm, Sat-Sun: 10am-4pm",tn.required],socialMedia:["Facebook: facebook.com/carefullivingafh"],welcomeMessage:["Welcome to Careful Living AFH, where we care with compassion.",tn.required],keyServicesHighlights:["24/7 care, nutritious meals, engaging activities.",tn.required],teamValues:["Our team is trained and specialized in providing care for seniors in need of, or who are diagnosed with a wide range of illnesses such as: Dementia, Alzheimer\u2019s, Strokes, Diabetic Management, Cardiac Problems, Multiple Sclerosis, Rehabilitation and Hospice/Palliative Care",tn.required],serviceBenefits:["Private rooms with private or shared bathrooms , Each room is equipped with calling system, phone, cable TV, internet , Handicap accessible , Spacious open floor plan with high ceiling , Harwood floors , Smoke alarm system , Security system , Covered deck , Emergency call buttons , Generator",tn.required],pricingStructure:["Contact us for pricing details.",tn.required],contactFormDetails:["Name, Email, Phone, Message",tn.required],mapDirections:["Included map and directions to our facility."],photoGallery:["Gallery of our facility and events."],employees:this.fb.array([])})}employees(){return this.businessForm.get("employees")}addEmployee(){const t=this.fb.group({id:[""],name:[""],role:[""],bio:[""],photoURL:[""]});this.employees().push(t)}removeEmployee(t){this.employees().removeAt(t)}onEmployeeFileChange(t,r){const i=t.target.files[0];if(i){const o=`employees/${i.name}`,s=this.businessService.uploadFile(o,i);this.uploadProgress[`employee_${r}`]=s.percentageChanges(),s.snapshotChanges().pipe(ec(()=>{this.businessService.getDownloadURL(o).subscribe(a=>{this.employees().at(r).patchValue({photoURL:a})})})).subscribe()}}onFileChange(t,r){const i=t.target.files[0];if(i){const o=`uploads/${i.name}`,s=this.businessService.uploadFile(o,i);this.uploadProgress[r]=s.percentageChanges(),s.snapshotChanges().pipe(ec(()=>{this.businessService.getDownloadURL(o).subscribe(a=>{const u=this.businessForm.get("controlName")?.value;Array.isArray(u)?this.businessForm.patchValue({[r]:[...u,a]}):this.businessForm.patchValue({[r]:a})})})).subscribe()}}onSubmit(){if(console.log("Submit Click",this.businessForm.valid),this.businessForm.valid){const t=this.businessForm.value;console.log(t),this.businessService.createBusiness(t).then(()=>alert("Business details saved successfully!")).catch(r=>console.error("Error saving business details",r))}}static#e=this.\u0275fac=function(r){return new(r||n)(he(cU),he(TD))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-business-question-form"]],decls:192,vars:11,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required","",1,"form-control"],["for","tagline"],["id","tagline","formControlName","tagline",1,"form-control"],["for","uniqueService"],["id","uniqueService","formControlName","uniqueService",1,"form-control"],["for","whyChoose"],["id","whyChoose","formControlName","whyChoose",1,"form-control"],["for","businessStory",1,"required"],["id","businessStory","formControlName","businessStory","required","",1,"form-control"],["for","motivation"],["id","motivation","formControlName","motivation",1,"form-control"],["for","mission",1,"required"],["id","mission","formControlName","mission","required","",1,"form-control"],["for","vision",1,"required"],["id","vision","formControlName","vision","required","",1,"form-control"],["for","certifications",1,"required"],["id","certifications","formControlName","certifications","required","",1,"form-control"],["for","targetAudience"],["id","targetAudience","formControlName","targetAudience",1,"form-control"],["for","services",1,"required"],["id","services","formControlName","services","required","",1,"form-control"],["for","specialPrograms"],["id","specialPrograms","formControlName","specialPrograms",1,"form-control"],["for","tours"],["id","tours","formControlName","tours",1,"form-control"],["for","freeConsulting"],["id","freeConsulting","formControlName","freeConsulting",1,"form-control"],["for","websiteGoals",1,"required"],["id","websiteGoals","formControlName","websiteGoals","required","",1,"form-control"],["for","logoImage",1,"required"],["type","file","id","logoImage",1,"form-control",3,"change"],[4,"ngIf"],["for","ownerImagesBios",1,"required"],["id","ownerImagesBios","formControlName","ownerImagesBios","required","",1,"form-control"],["for","staffImagesBios",1,"required"],["id","staffImagesBios","formControlName","staffImagesBios","required","",1,"form-control"],["for","facilityImages",1,"required"],["type","file","id","facilityImages",1,"form-control",3,"change"],["for","lifestyleImages",1,"required"],["type","file","id","lifestyleImages",1,"form-control",3,"change"],["for","mediaFeatures"],["id","mediaFeatures","formControlName","mediaFeatures",1,"form-control"],["for","ratings"],["id","ratings","formControlName","ratings",1,"form-control"],["for","testimonials"],["id","testimonials","formControlName","testimonials",1,"form-control"],["for","address",1,"required"],["id","address","formControlName","address","required","",1,"form-control"],["for","phone",1,"required"],["id","phone","formControlName","phone","required","",1,"form-control"],["for","fax"],["id","fax","formControlName","fax",1,"form-control"],["for","email",1,"required"],["id","email","formControlName","email","required","",1,"form-control"],["for","businessHours",1,"required"],["id","businessHours","formControlName","businessHours","required","",1,"form-control"],["for","socialMedia"],["id","socialMedia","formControlName","socialMedia",1,"form-control"],["for","welcomeMessage"],["id","welcomeMessage","formControlName","welcomeMessage","required","",1,"form-control"],["for","keyServicesHighlights",1,"required"],["id","keyServicesHighlights","formControlName","keyServicesHighlights","required","",1,"form-control"],["for","teamValues",1,"required"],["id","teamValues","formControlName","teamValues","required","",1,"form-control"],["for","serviceBenefits",1,"required"],["id","serviceBenefits","formControlName","serviceBenefits","required","",1,"form-control"],["for","pricingStructure",1,"required"],["id","pricingStructure","formControlName","pricingStructure","required","",1,"form-control"],["for","contactFormDetails",1,"required"],["id","contactFormDetails","formControlName","contactFormDetails","required","",1,"form-control"],["for","mapDirections"],["id","mapDirections","formControlName","mapDirections",1,"form-control"],["for","photoGallery"],["formControlName","photoGallery",1,"form-control"],["formArrayName","employees"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],["type","submit"],[1,"progress"],[1,"progress-bar"],[3,"formGroupName"],["for","employeeName"],["id","employeeName","formControlName","name",1,"form-control"],["for","employeeRole"],["id","employeeRole","formControlName","role",1,"form-control"],["for","employeeBio"],["id","employeeBio","formControlName","bio",1,"form-control"],["for","employeePhoto"],["type","file","id","employeePhoto",1,"form-control",3,"change"]],template:function(r,i){1&r&&(F(0,"div",0)(1,"form",1),Lt("ngSubmit",function(){return i.onSubmit()}),F(2,"h2"),$(3,"Basic Information"),D(),F(4,"div",2)(5,"label",3),$(6,"Business Name"),D(),ye(7,"input",4),D(),F(8,"div",2)(9,"label",5),$(10,"Tagline"),D(),ye(11,"input",6),D(),F(12,"div",2)(13,"label",7),$(14,"Unique Service"),D(),ye(15,"input",8),D(),F(16,"div",2)(17,"label",9),$(18,"Why Choose Us"),D(),ye(19,"input",10),D(),F(20,"h2"),$(21,"Business Story and Mission"),D(),F(22,"div",2)(23,"label",11),$(24,"Business Story"),D(),ye(25,"textarea",12),D(),F(26,"div",2)(27,"label",13),$(28,"Motivation"),D(),ye(29,"textarea",14),D(),F(30,"div",2)(31,"label",15),$(32,"Mission"),D(),ye(33,"textarea",16),D(),F(34,"div",2)(35,"label",17),$(36,"Vision"),D(),ye(37,"textarea",18),D(),F(38,"h2"),$(39,"Certifications and Target Audience"),D(),F(40,"div",2)(41,"label",19),$(42,"Certifications"),D(),ye(43,"textarea",20),D(),F(44,"div",2)(45,"label",21),$(46,"Target Audience"),D(),ye(47,"textarea",22),D(),F(48,"h2"),$(49,"Services and Offerings"),D(),F(50,"div",2)(51,"label",23),$(52,"Services"),D(),ye(53,"textarea",24),D(),F(54,"div",2)(55,"label",25),$(56,"Special Programs"),D(),ye(57,"textarea",26),D(),F(58,"div",2)(59,"label",27),$(60,"Tours"),D(),ye(61,"textarea",28),D(),F(62,"div",2)(63,"label",29),$(64,"Free Consulting"),D(),ye(65,"textarea",30),D(),F(66,"h2"),$(67,"Website Goals"),D(),F(68,"div",2)(69,"label",31),$(70,"Website Goals"),D(),ye(71,"textarea",32),D(),F(72,"h2"),$(73,"Content and Photos"),D(),F(74,"div",2)(75,"label",33),$(76,"Logo Image"),D(),F(77,"input",34),Lt("change",function(s){return i.onFileChange(s,"logoImage")}),D(),on(78,Nee,4,3,"ng-container",35),Bo(79,"async"),D(),F(80,"div",2)(81,"label",36),$(82,"Owner Images and Bios"),D(),ye(83,"textarea",37),D(),F(84,"div",2)(85,"label",38),$(86,"Staff Images and Bios"),D(),ye(87,"textarea",39),D(),F(88,"h2"),$(89,"Facility and Lifestyle Images"),D(),F(90,"div",2)(91,"label",40),$(92,"Facility Images"),D(),F(93,"input",41),Lt("change",function(s){return i.onFileChange(s,"facilityImages")}),D(),on(94,Oee,4,3,"ng-container",35),Bo(95,"async"),D(),F(96,"div",2)(97,"label",42),$(98,"Lifestyle Images"),D(),F(99,"input",43),Lt("change",function(s){return i.onFileChange(s,"lifestyleImages")}),D(),on(100,kee,4,3,"ng-container",35),Bo(101,"async"),D(),F(102,"h2"),$(103,"Media and Reviews"),D(),F(104,"div",2)(105,"label",44),$(106,"Media Features"),D(),ye(107,"textarea",45),D(),F(108,"div",2)(109,"label",46),$(110,"Ratings"),D(),ye(111,"textarea",47),D(),F(112,"div",2)(113,"label",48),$(114,"Testimonials"),D(),ye(115,"textarea",49),D(),F(116,"h2"),$(117,"Contact Information"),D(),F(118,"div",2)(119,"label",50),$(120,"Address"),D(),ye(121,"textarea",51),D(),F(122,"div",2)(123,"label",52),$(124,"Phone"),D(),ye(125,"input",53),D(),F(126,"div",2)(127,"label",54),$(128,"Fax"),D(),ye(129,"input",55),D(),F(130,"div",2)(131,"label",56),$(132,"Email"),D(),ye(133,"input",57),D(),F(134,"div",2)(135,"label",58),$(136,"Business Hours"),D(),ye(137,"textarea",59),D(),F(138,"div",2)(139,"label",60),$(140,"Social Media"),D(),ye(141,"textarea",61),D(),F(142,"h2"),$(143,"Home Page"),D(),F(144,"div",2)(145,"label",62),$(146,"Welcome Message"),D(),ye(147,"textarea",63),D(),F(148,"div",2)(149,"label",64),$(150,"Key Services and Highlights"),D(),ye(151,"textarea",65),D(),F(152,"h2"),$(153,"About Us Page"),D(),F(154,"div",2)(155,"label",66),$(156,"Team and Values"),D(),ye(157,"textarea",67),D(),F(158,"h2"),$(159,"Services Page"),D(),F(160,"div",2)(161,"label",68),$(162,"Service Benefits"),D(),ye(163,"textarea",69),D(),F(164,"div",2)(165,"label",70),$(166,"Pricing Structure"),D(),ye(167,"textarea",71),D(),F(168,"h2"),$(169,"Contact Us Page"),D(),F(170,"div",2)(171,"label",72),$(172,"Contact Form Details"),D(),ye(173,"textarea",73),D(),F(174,"div",2)(175,"label",74),$(176,"Map and Directions"),D(),ye(177,"textarea",75),D(),F(178,"h2"),$(179,"Additional Content"),D(),F(180,"div",2)(181,"label",76),$(182,"Photo Gallery:"),D(),ye(183,"textarea",77),D(),F(184,"h2"),$(185,"Employee Profiles"),D(),F(186,"div",78),on(187,Vee,21,4,"div",79),D(),F(188,"button",80),Lt("click",function(){return i.addEmployee()}),$(189,"Add Employee"),D(),F(190,"button",81),$(191,"Submit"),D()()()),2&r&&(Te(1),Qe("formGroup",i.businessForm),Te(77),Qe("ngIf",$o(79,5,i.uploadProgress.logoImage)),Te(16),Qe("ngIf",$o(95,7,i.uploadProgress.facilityImages)),Te(6),Qe("ngIf",$o(101,9,i.uploadProgress.lifestyleImages)),Te(87),Qe("ngForOf",i.employees().controls))},dependencies:[Za,ra,fI,vg,fD,rI,Pg,Ag,pI,Sg,Rg,np],styles:['.container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{padding:3px}.form-group[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:10px}.progress-bar[_ngcontent-%COMP%]{height:20px;background-color:#4caf50;text-align:center;color:#fff;border-radius:4px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.form-group[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:red;margin-left:5px}']})}return n})();const Lee=function(){return["/"]},Uee=function(n){return{id:n}};function Bee(n,e){if(1&n){const t=H_();F(0,"tr")(1,"td")(2,"a",4),$(3),D()(),F(4,"td"),$(5),D(),F(6,"td")(7,"button",5),Lt("click",function(){const o=zs(t).$implicit;return No(vr().editBusiness(o.id))}),$(8,"Edit"),D(),F(9,"button",6),Lt("click",function(){const o=zs(t).$implicit;return No(vr().deleteBusiness(o.id))}),$(10,"Delete"),D()()()}if(2&n){const t=e.$implicit;Te(2),Qe("routerLink",function L1(n,e,t){const r=gr()+n,i=me();return i[r]===dt?ps(i,r,t?e.call(t):e()):function Vf(n,e){return n[e]}(i,r)}(4,Lee))("queryParams",id(5,Uee,t.id)),Te(1),Xr(t.id),Te(2),Xr(t.businessName)}}let lU=(()=>{class n{constructor(t,r){this.businessService=t,this.router=r,this.businesses=[]}ngOnInit(){this.loadBusinesses()}loadBusinesses(){this.businessService.getAllBusinesses().subscribe(t=>{this.businesses=t,console.log(t)})}editBusiness(t){this.router.navigate(["/edit-business",t])}deleteBusiness(t){confirm("Are you sure you want to delete this business?")&&this.businessService.updateBusiness(t,{isActive:!1}).then(()=>{alert("Business deleted successfully!"),this.loadBusinesses()}).catch(r=>console.error("Error deleting business",r))}addNewBusiness(){this.router.navigate(["/new-business"])}static#e=this.\u0275fac=function(r){return new(r||n)(he(TD),he(Hi))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-business-list"]],decls:16,vars:1,consts:[[1,"business-list-container"],[1,"add-business-button",3,"click"],[1,"business-table"],[4,"ngFor","ngForOf"],[1,"business-id-link",3,"routerLink","queryParams"],[1,"edit-button",3,"click"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(F(0,"div",0)(1,"h1"),$(2,"Business List"),D(),F(3,"button",1),Lt("click",function(){return i.addNewBusiness()}),$(4,"Add New Business"),D(),F(5,"table",2)(6,"thead")(7,"tr")(8,"th"),$(9,"ID"),D(),F(10,"th"),$(11,"Name"),D(),F(12,"th"),$(13,"Actions"),D()()(),F(14,"tbody"),on(15,Bee,11,7,"tr",3),D()()()),2&r&&(Te(15),Qe("ngForOf",i.businesses))},dependencies:[Za,jy],styles:[".business-list-container[_ngcontent-%COMP%]{width:80%;margin:0 auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;color:#333}.add-business-button[_ngcontent-%COMP%]{display:block;margin:20px auto;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}.add-business-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.business-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.business-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .business-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.business-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.business-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700}.business-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.business-id-link[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.business-id-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:5px;cursor:pointer;font-size:14px;margin:0 5px}.edit-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.edit-button[_ngcontent-%COMP%]:hover{background-color:#218838}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})}return n})();function $ee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function jee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function Hee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function zee(n,e){if(1&n&&(Fo(0),F(1,"div",82)(2,"div",83),$(3),D()(),Vo()),2&n){const t=e.ngIf;Te(2),ms("width",t+"%"),Te(1),Ui("",t,"%")}}function qee(n,e){if(1&n&&(F(0,"div"),ye(1,"img",91),D()),2&n){const t=vr().$implicit;let r;Te(1),Qe("src",null==(r=t.get("photoURL"))?null:r.value,hs)}}function Gee(n,e){if(1&n){const t=H_();F(0,"div",84)(1,"div",2)(2,"label",85),$(3,"Employee Name"),D(),ye(4,"input",86),D(),F(5,"div",2)(6,"label",85),$(7,"Role"),D(),ye(8,"input",87),D(),F(9,"div",2)(10,"label",85),$(11,"Bio"),D(),ye(12,"textarea",88),D(),F(13,"div",2)(14,"label",85),$(15,"Photo"),D(),F(16,"input",89),Lt("change",function(i){const s=zs(t).index;return No(vr().onEmployeeFileChange(i,s))}),D(),on(17,zee,4,3,"ng-container",35),Bo(18,"async"),D(),on(19,qee,2,1,"div",35),F(20,"button",90),Lt("click",function(){const o=zs(t).index;return No(vr().removeEmployee(o))}),$(21,"Remove Employee"),D()()}if(2&n){const t=e.$implicit,r=e.index,i=vr();let o;Qe("formGroupName",r),Te(2),vo("for","employeeName-",r,""),Te(2),vo("id","employeeName-",r,""),Te(2),vo("for","employeeRole-",r,""),Te(2),vo("id","employeeRole-",r,""),Te(2),vo("for","employeeBio-",r,""),Te(2),vo("id","employeeBio-",r,""),Te(2),vo("for","employeePhoto-",r,""),Te(2),vo("id","employeePhoto-",r,""),Te(1),Qe("ngIf",$o(18,11,i.uploadProgress["employee_"+r])),Te(2),Qe("ngIf",null==(o=t.get("photoURL"))?null:o.value)}}let dU=(()=>{class n{constructor(t,r,i){this.fb=t,this.businessService=r,this.route=i,this.uploadProgress={}}ngOnInit(){this.initializeForm(),this.route.paramMap.subscribe(t=>{this.businessId=t.get("id"),console.log("Business ID:",this.businessId),this.businessId&&this.loadBusinessData()})}initializeForm(){this.businessForm=this.fb.group({tagline:[""],uniqueService:[""],whyChoose:[""],businessStory:[""],motivation:[""],mission:[""],vision:[""],certifications:[""],targetAudience:[""],services:[""],specialPrograms:[""],tours:[""],freeConsulting:[""],websiteGoals:[""],logoImage:[""],ownerImagesBios:[""],staffImagesBios:[""],mediaFeatures:[""],ratings:[""],testimonials:[""],businessName:["",tn.required],address:["",tn.required],phone:["",tn.required],fax:[""],email:["",tn.required],businessHours:["",tn.required],socialMedia:[""],welcomeMessage:[""],keyServicesHighlights:["",tn.required],teamValues:["",tn.required],serviceBenefits:["",tn.required],pricingStructure:["",tn.required],contactFormDetails:["",tn.required],mapDirections:[""],photoGallery:[""],employees:this.fb.array([])})}employees(){return this.businessForm.get("employees")}addEmployee(){const t=this.fb.group({id:[""],name:[""],role:[""],bio:[""],photoURL:[""]});this.employees().push(t)}removeEmployee(t){this.employees().removeAt(t)}onEmployeeFileChange(t,r){const i=t.target.files[0];if(i){const o=`employees/${this.businessId}/${i.name}`,s=this.businessService.uploadFile(o,i);this.uploadProgress[`employee_${r}`]=s.percentageChanges(),s.snapshotChanges().pipe(ec(()=>{this.businessService.getDownloadURL(o).subscribe(a=>{this.employees().at(r).patchValue({photoURL:a})})})).subscribe()}}onFileChange(t,r){const i=t.target.files[0];if(i){const o=`${r}/${this.businessId}/${i.name}`,s=this.businessService.uploadFile(o,i);this.uploadProgress[r]=s.percentageChanges(),s.snapshotChanges().pipe(ec(()=>{this.businessService.getDownloadURL(o).subscribe(a=>{this.businessForm.patchValue({[r]:a})})})).subscribe()}}loadBusinessData(){this.businessService.getBusiness(this.businessId).subscribe(t=>{t?(console.log("Business data:",t),this.populateForm(t)):console.error("Business not found")},t=>{console.error("Error loading business data:",t)})}populateForm(t){this.businessForm.patchValue(t),this.employees().clear(),(t.employees??[]).forEach(r=>{const i=this.fb.group({id:[r.id],name:[r.name],role:[r.role],bio:[r.bio],photoURL:[r.photoURL]});this.employees().push(i)})}onSubmit(){this.businessForm.valid&&this.businessId&&this.businessService.updateBusiness(this.businessId,this.businessForm.value).then(()=>alert("Business details updated successfully!")).catch(r=>console.error("Error updating business details",r))}static#e=this.\u0275fac=function(r){return new(r||n)(he(cU),he(TD),he(ji))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-edit-business"]],decls:194,vars:11,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","businessName",1,"required"],["id","businessName","formControlName","businessName","required","",1,"form-control"],["for","tagline"],["id","tagline","formControlName","tagline",1,"form-control"],["for","uniqueService"],["id","uniqueService","formControlName","uniqueService",1,"form-control"],["for","whyChoose"],["id","whyChoose","formControlName","whyChoose",1,"form-control"],["for","businessStory",1,"required"],["id","businessStory","formControlName","businessStory","required","",1,"form-control"],["for","motivation"],["id","motivation","formControlName","motivation",1,"form-control"],["for","mission",1,"required"],["id","mission","formControlName","mission","required","",1,"form-control"],["for","vision",1,"required"],["id","vision","formControlName","vision","required","",1,"form-control"],["for","certifications",1,"required"],["id","certifications","formControlName","certifications","required","",1,"form-control"],["for","targetAudience"],["id","targetAudience","formControlName","targetAudience",1,"form-control"],["for","services",1,"required"],["id","services","formControlName","services","required","",1,"form-control"],["for","specialPrograms"],["id","specialPrograms","formControlName","specialPrograms",1,"form-control"],["for","tours"],["id","tours","formControlName","tours",1,"form-control"],["for","freeConsulting"],["id","freeConsulting","formControlName","freeConsulting",1,"form-control"],["for","websiteGoals",1,"required"],["id","websiteGoals","formControlName","websiteGoals","required","",1,"form-control"],["for","logoImage",1,"required"],["type","file","id","logoImage",1,"form-control",3,"change"],[4,"ngIf"],["for","ownerImagesBios",1,"required"],["id","ownerImagesBios","formControlName","ownerImagesBios","required","",1,"form-control"],["for","staffImagesBios",1,"required"],["id","staffImagesBios","formControlName","staffImagesBios","required","",1,"form-control"],["for","facilityImages",1,"required"],["type","file","id","facilityImages",1,"form-control",3,"change"],["for","lifestyleImages",1,"required"],["type","file","id","lifestyleImages",1,"form-control",3,"change"],["for","mediaFeatures"],["id","mediaFeatures","formControlName","mediaFeatures",1,"form-control"],["for","ratings"],["id","ratings","formControlName","ratings",1,"form-control"],["for","testimonials"],["id","testimonials","formControlName","testimonials",1,"form-control"],["for","address",1,"required"],["id","address","formControlName","address","required","",1,"form-control"],["for","phone",1,"required"],["id","phone","formControlName","phone","required","",1,"form-control"],["for","fax"],["id","fax","formControlName","fax",1,"form-control"],["for","email",1,"required"],["id","email","formControlName","email","required","",1,"form-control"],["for","businessHours",1,"required"],["id","businessHours","formControlName","businessHours","required","",1,"form-control"],["for","socialMedia"],["id","socialMedia","formControlName","socialMedia",1,"form-control"],["for","welcomeMessage"],["id","welcomeMessage","formControlName","welcomeMessage","required","",1,"form-control"],["for","keyServicesHighlights",1,"required"],["id","keyServicesHighlights","formControlName","keyServicesHighlights","required","",1,"form-control"],["for","teamValues",1,"required"],["id","teamValues","formControlName","teamValues","required","",1,"form-control"],["for","serviceBenefits",1,"required"],["id","serviceBenefits","formControlName","serviceBenefits","required","",1,"form-control"],["for","pricingStructure",1,"required"],["id","pricingStructure","formControlName","pricingStructure","required","",1,"form-control"],["for","contactFormDetails",1,"required"],["id","contactFormDetails","formControlName","contactFormDetails","required","",1,"form-control"],["for","mapDirections"],["id","mapDirections","formControlName","mapDirections",1,"form-control"],["for","photoGallery"],["id","photoGallery","formControlName","photoGallery",1,"form-control"],["formArrayName","employees"],["class","employee-card",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],["type","submit"],[1,"progress"],[1,"progress-bar"],[1,"employee-card",3,"formGroupName"],[3,"for"],["formControlName","name","placeholder","Enter employee name",1,"form-control",3,"id"],["formControlName","role","placeholder","Enter employee role",1,"form-control",3,"id"],["formControlName","bio","rows","3","placeholder","Enter employee bio",1,"form-control",3,"id"],["type","file",1,"form-control",3,"id","change"],["type","button",1,"remove-button",3,"click"],["alt","Employee Photo",1,"employee-photo",3,"src"]],template:function(r,i){1&r&&(F(0,"div",0)(1,"h1"),$(2,"Edit Business Information"),D(),F(3,"form",1),Lt("ngSubmit",function(){return i.onSubmit()}),F(4,"h2"),$(5,"Basic Information"),D(),F(6,"div",2)(7,"label",3),$(8,"Business Name"),D(),ye(9,"input",4),D(),F(10,"div",2)(11,"label",5),$(12,"Tagline"),D(),ye(13,"input",6),D(),F(14,"div",2)(15,"label",7),$(16,"Unique Service"),D(),ye(17,"input",8),D(),F(18,"div",2)(19,"label",9),$(20,"Why Choose Us"),D(),ye(21,"input",10),D(),F(22,"h2"),$(23,"Business Story and Mission"),D(),F(24,"div",2)(25,"label",11),$(26,"Business Story"),D(),ye(27,"textarea",12),D(),F(28,"div",2)(29,"label",13),$(30,"Motivation"),D(),ye(31,"textarea",14),D(),F(32,"div",2)(33,"label",15),$(34,"Mission"),D(),ye(35,"textarea",16),D(),F(36,"div",2)(37,"label",17),$(38,"Vision"),D(),ye(39,"textarea",18),D(),F(40,"h2"),$(41,"Certifications and Target Audience"),D(),F(42,"div",2)(43,"label",19),$(44,"Certifications"),D(),ye(45,"textarea",20),D(),F(46,"div",2)(47,"label",21),$(48,"Target Audience"),D(),ye(49,"textarea",22),D(),F(50,"h2"),$(51,"Services and Offerings"),D(),F(52,"div",2)(53,"label",23),$(54,"Services"),D(),ye(55,"textarea",24),D(),F(56,"div",2)(57,"label",25),$(58,"Special Programs"),D(),ye(59,"textarea",26),D(),F(60,"div",2)(61,"label",27),$(62,"Tours"),D(),ye(63,"textarea",28),D(),F(64,"div",2)(65,"label",29),$(66,"Free Consulting"),D(),ye(67,"textarea",30),D(),F(68,"h2"),$(69,"Website Goals"),D(),F(70,"div",2)(71,"label",31),$(72,"Website Goals"),D(),ye(73,"textarea",32),D(),F(74,"h2"),$(75,"Content and Photos"),D(),F(76,"div",2)(77,"label",33),$(78,"Logo Image"),D(),F(79,"input",34),Lt("change",function(s){return i.onFileChange(s,"logoImage")}),D(),on(80,$ee,4,3,"ng-container",35),Bo(81,"async"),D(),F(82,"div",2)(83,"label",36),$(84,"Owner Images and Bios"),D(),ye(85,"textarea",37),D(),F(86,"div",2)(87,"label",38),$(88,"Staff Images and Bios"),D(),ye(89,"textarea",39),D(),F(90,"h2"),$(91,"Facility and Lifestyle Images"),D(),F(92,"div",2)(93,"label",40),$(94,"Facility Images"),D(),F(95,"input",41),Lt("change",function(s){return i.onFileChange(s,"facilityImages")}),D(),on(96,jee,4,3,"ng-container",35),Bo(97,"async"),D(),F(98,"div",2)(99,"label",42),$(100,"Lifestyle Images"),D(),F(101,"input",43),Lt("change",function(s){return i.onFileChange(s,"lifestyleImages")}),D(),on(102,Hee,4,3,"ng-container",35),Bo(103,"async"),D(),F(104,"h2"),$(105,"Media and Reviews"),D(),F(106,"div",2)(107,"label",44),$(108,"Media Features"),D(),ye(109,"textarea",45),D(),F(110,"div",2)(111,"label",46),$(112,"Ratings"),D(),ye(113,"textarea",47),D(),F(114,"div",2)(115,"label",48),$(116,"Testimonials"),D(),ye(117,"textarea",49),D(),F(118,"h2"),$(119,"Contact Information"),D(),F(120,"div",2)(121,"label",50),$(122,"Address"),D(),ye(123,"textarea",51),D(),F(124,"div",2)(125,"label",52),$(126,"Phone"),D(),ye(127,"input",53),D(),F(128,"div",2)(129,"label",54),$(130,"Fax"),D(),ye(131,"input",55),D(),F(132,"div",2)(133,"label",56),$(134,"Email"),D(),ye(135,"input",57),D(),F(136,"div",2)(137,"label",58),$(138,"Business Hours"),D(),ye(139,"textarea",59),D(),F(140,"div",2)(141,"label",60),$(142,"Social Media"),D(),ye(143,"textarea",61),D(),F(144,"h2"),$(145,"Home Page"),D(),F(146,"div",2)(147,"label",62),$(148,"Welcome Message"),D(),ye(149,"textarea",63),D(),F(150,"div",2)(151,"label",64),$(152,"Key Services and Highlights"),D(),ye(153,"textarea",65),D(),F(154,"h2"),$(155,"About Us Page"),D(),F(156,"div",2)(157,"label",66),$(158,"Team and Values"),D(),ye(159,"textarea",67),D(),F(160,"h2"),$(161,"Services Page"),D(),F(162,"div",2)(163,"label",68),$(164,"Service Benefits"),D(),ye(165,"textarea",69),D(),F(166,"div",2)(167,"label",70),$(168,"Pricing Structure"),D(),ye(169,"textarea",71),D(),F(170,"h2"),$(171,"Contact Us Page"),D(),F(172,"div",2)(173,"label",72),$(174,"Contact Form Details"),D(),ye(175,"textarea",73),D(),F(176,"div",2)(177,"label",74),$(178,"Map and Directions"),D(),ye(179,"textarea",75),D(),F(180,"h2"),$(181,"Additional Content"),D(),F(182,"div",2)(183,"label",76),$(184,"Photo Gallery:"),D(),ye(185,"textarea",77),D(),F(186,"h2"),$(187,"Employee Profiles"),D(),F(188,"div",78),on(189,Gee,22,13,"div",79),D(),F(190,"button",80),Lt("click",function(){return i.addEmployee()}),$(191,"Add Employee"),D(),F(192,"button",81),$(193,"Submit"),D()()()),2&r&&(Te(3),Qe("formGroup",i.businessForm),Te(77),Qe("ngIf",$o(81,5,i.uploadProgress.logoImage)),Te(16),Qe("ngIf",$o(97,7,i.uploadProgress.facilityImages)),Te(6),Qe("ngIf",$o(103,9,i.uploadProgress.lifestyleImages)),Te(87),Qe("ngForOf",i.employees().controls))},dependencies:[Za,ra,fI,vg,fD,rI,Pg,Ag,pI,Sg,Rg,np],styles:['.container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;background:#f9f9f9;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.employee-card[_ngcontent-%COMP%]{padding:15px;margin-bottom:15px;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 0 5px #0000001a}.employee-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px}.employee-card[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer}.employee-card[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{background-color:#c0392b}.add-employee-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#3498db;color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer;margin-bottom:20px}.add-employee-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;background-color:#2ecc71;color:#fff;border:none;padding:10px;border-radius:4px;cursor:pointer}.submit-button[_ngcontent-%COMP%]:hover{background-color:#27ae60}.progress[_ngcontent-%COMP%]{margin-top:5px;height:10px;background-color:#f3f3f3;border-radius:4px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#3498db;text-align:center;line-height:10px;color:#fff}.employee-photo[_ngcontent-%COMP%]{margin-top:10px;max-width:100px;border-radius:4px}.container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}h2[_ngcontent-%COMP%]{border-bottom:2px solid #007bff;padding-bottom:10px;margin-top:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.required[_ngcontent-%COMP%]:after{content:"*";color:red;margin-left:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box}textarea.form-control[_ngcontent-%COMP%]{height:100px;resize:vertical}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.progress[_ngcontent-%COMP%]{background-color:#f3f3f3;border-radius:5px;overflow:hidden;height:20px}.progress-bar[_ngcontent-%COMP%]{background-color:#28a745;height:100%;color:#fff;text-align:center;line-height:20px}']})}return n})();const Wee=[{path:"",component:cD},{path:"home",component:cD},{path:"about-us",component:SX},{path:"services",component:xX},{path:"contact-us",component:xee},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"bqs",component:DD},{path:"bls",component:lU},{path:"business/new",component:DD},{path:"business/edit/:id",component:dU},{path:"businessList",component:lU},{path:"new-business",component:DD},{path:"edit-business/:id",component:dU},{path:":id",component:cD}];let Zee=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n});static#n=this.\u0275inj=Pn({imports:[mb.forRoot(Wee),mb]})}return n})();function Kee(n,e){if(1&n&&ye(0,"img",14),2&n){const t=vr();Qe("src",null==t.business?null:t.business.logoImage,hs)}}const Qee=function(n){return{"open-bar1":n}},Yee=function(n){return{"open-bar2":n}},Jee=function(n){return{"open-bar3":n}},Xee=function(n){return{active:n}};let ete=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.content=i,this.businessId="",this.menuActive=!1,this.menuOpen=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.businessId=t.id||"",this.content.getBusinessData(this.businessId).subscribe(r=>{this.business=r})})}navigateTo(t){const r=this.businessId?{id:this.businessId}:{};console.log("This Business id form query string",this.businessId),this.closeMenu(),this.router.navigate([`/${t}`],{queryParams:r}).then(i=>{i||console.error("Navigation failed!")})}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)(he(ji),he(Hi),he(Ac))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-navigation"]],decls:24,vars:13,consts:[[1,"navbar_"],[1,"navbar-container"],[1,"logo"],["class","logoImage","alt","Business Logo",3,"src",4,"ngIf"],[1,"number"],[1,"text"],[1,"top"],[1,"bottom"],[1,"menu-icon",3,"click"],[1,"bar1",3,"ngClass"],[1,"bar2",3,"ngClass"],[1,"bar3",3,"ngClass"],[1,"nav-menu",3,"ngClass"],[1,"nav-item",3,"click"],["alt","Business Logo",1,"logoImage",3,"src"]],template:function(r,i){1&r&&(F(0,"nav",0)(1,"div",1)(2,"div",2),on(3,Kee,1,1,"img",3),F(4,"span",4),$(5,"#1"),D(),F(6,"div",5)(7,"div",6),$(8,"HELPING HAND"),D(),F(9,"div",7),$(10,"ADULT FAMILY HOME"),D()()(),F(11,"div",8),Lt("click",function(){return i.toggleMenu()}),ye(12,"div",9)(13,"div",10)(14,"div",11),D(),F(15,"ul",12)(16,"li",13),Lt("click",function(){return i.navigateTo("home")}),$(17,"Home"),D(),F(18,"li",13),Lt("click",function(){return i.navigateTo("services")}),$(19,"Services"),D(),F(20,"li",13),Lt("click",function(){return i.navigateTo("about-us")}),$(21,"About Us"),D(),F(22,"li",13),Lt("click",function(){return i.navigateTo("contact-us")}),$(23,"Contact"),D()()()()),2&r&&(Te(3),Qe("ngIf",null==i.business?null:i.business.logoImage),Te(9),Qe("ngClass",id(5,Qee,i.menuOpen)),Te(1),Qe("ngClass",id(7,Yee,i.menuOpen)),Te(1),Qe("ngClass",id(9,Jee,i.menuOpen)),Te(1),Qe("ngClass",id(11,Xee,i.menuOpen)))},dependencies:[Ix,ra],styles:[".navbar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:70px;max-width:1200px;margin:0 auto}.logo[_ngcontent-%COMP%]{display:flex;align-items:flex-start;max-height:70px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:70px}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:34px;font-weight:700;text-decoration:none;color:var(--button-color)}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:700;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:700}.top[_ngcontent-%COMP%]{font-size:2rem}.bottom[_ngcontent-%COMP%]{margin-top:-10px;font-size:1rem;letter-spacing:.3rem;color:var(--accent-color)}.navbar_[_ngcontent-%COMP%]{background-color:var(--nav-background-color);width:100%;top:0;left:0;box-shadow:0 2px 4px #0000001a;z-index:1000}.nav-menu[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;align-items:center}.nav-item[_ngcontent-%COMP%]{color:var(--nav-text-color);cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:1.2rem;font-family:Montserrat,sans-serif;font-weight:500}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-text-color);cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:2rem;font-family:Montserrat,sans-serif;font-weight:500}.menu-icon[_ngcontent-%COMP%]{position:absolute;display:none;cursor:pointer;flex-direction:column;justify-content:space-around;width:30px;height:30px;z-index:1}.menu-icon[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:4px;background-color:var(--nav-text-color);transition:all .3s}.menu-icon.open[_ngcontent-%COMP%]   .bar1[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar2[_ngcontent-%COMP%], .menu-icon.open[_ngcontent-%COMP%]   .bar3[_ngcontent-%COMP%]{background-color:var(--nav-active-text)}.menu-icon[_ngcontent-%COMP%]   .open-bar1[_ngcontent-%COMP%]{transform:rotate(-45deg) translate(-5px,5px);background-color:#fff}.menu-icon[_ngcontent-%COMP%]   .open-bar2[_ngcontent-%COMP%]{opacity:0}.menu-icon[_ngcontent-%COMP%]   .open-bar3[_ngcontent-%COMP%]{transform:rotate(45deg) translate(-5px,-5px);background-color:#fff}.nav-menu.active[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:var(--nav-active-background);opacity:.9;flex-direction:column;justify-content:center;align-items:center;transition:left .3s}.nav-menu.active[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px;margin:20px 0}@media (max-width: 768px){.navbar-container[_ngcontent-%COMP%]{justify-content:space-between;width:100%}.logo[_ngcontent-%COMP%]{order:2;margin-left:auto}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px;margin-left:0}.menu-icon[_ngcontent-%COMP%]{display:flex;order:1;margin-right:auto;z-index:20001}.nav-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;width:100%;height:100vh;background-color:var(--nav-active-background);flex-direction:column;justify-content:center;align-items:center;transition:left .3s;z-index:1999}.nav-item[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:none;text-transform:uppercase;font-size:1.2rem;font-family:Montserrat,sans-serif;font-weight:500;z-index:2000}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--nav-active-text);font-size:24px}.number[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:4rem;font-weight:500;color:var(--text-color);margin-right:.5rem;line-height:1}.text[_ngcontent-%COMP%]{font-family:Raleway,sans-serif;display:flex;flex-direction:column;align-items:flex-start;color:var(--text-color)}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{font-weight:400}.top[_ngcontent-%COMP%]{font-size:1.5rem}.bottom[_ngcontent-%COMP%]{font-size:.75rem;letter-spacing:.2rem;color:var(--accent-color)}}"]})}return n})();function tte(n,e){if(1&n&&(F(0,"p")(1,"span"),$(2),D(),$(3," | "),F(4,"span"),$(5),D()()),2&n){const t=e.ngIf;Te(2),Ui("Phone: ",t.phone,""),Te(3),Ui("Email: ",t.email,"")}}let nte=(()=>{class n{constructor(t,r){this.route=t,this.webContentService=r}ngOnInit(){this.route.queryParams.subscribe(t=>{const r=t.id||this.webContentService.getDefaultBusinessData();console.log("footer param",r),this.business$=this.webContentService.getDefaultBusinessData(),console.log(this.business$)})}static#e=this.\u0275fac=function(r){return new(r||n)(he(ji),he(Ac))};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-footer"]],decls:8,vars:3,consts:[[1,"footer"],[1,"footer-content"],["href","www.monkifoto.com"],[4,"ngIf"]],template:function(r,i){1&r&&(F(0,"footer",0)(1,"div",1)(2,"p"),$(3,"\xa9 2024 #1 Helping Hand AFH. All Rights Reserved. Design by "),F(4,"a",2),$(5,"Monkifoto"),D()(),on(6,tte,6,2,"p",3),Bo(7,"async"),D()()),2&r&&(Te(6),Qe("ngIf",$o(7,1,i.business$)))},dependencies:[ra,np],styles:[".footer[_ngcontent-%COMP%]{width:100%;position:fixed;bottom:0;background-color:#333;color:#fff;text-align:center;padding:10px 0}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.footer-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}"]})}return n})(),rte=(()=>{class n{constructor(){this.title="adult-family-home"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Nr({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(r,i){1&r&&ye(0,"app-navigation")(1,"router-outlet")(2,"app-footer")},dependencies:[ab,ete,nte]})}return n})();const hU_firebase={apiKey:"AIzaSyDABajs8rbYwBKsW74SRQbGQKyJ_GdU1tY",authDomain:"afhdynamicwebsite.firebaseapp.com",projectId:"afhdynamicwebsite",storageBucket:"afhdynamicwebsite.appspot.com",messagingSenderId:"692885221546",appId:"1:692885221546:web:23317a318f6e277a0520d3",measurementId:"G-JREGNTXHB6"};class lh{constructor(e){return e}}class AD{constructor(){return(0,qn.getApps)()}}const SD=new be("angularfire2._apps"),ote={provide:lh,useFactory:function ite(n){return n&&1===n.length?n[0]:new lh((0,qn.getApp)())},deps:[[new Lr,SD]]},ste={provide:AD,deps:[[new Lr,SD]]};function ate(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new lh(r)}}let ute=(()=>{class n{constructor(t){(0,qn.registerVersion)("angularfire",sa.full,"core"),(0,qn.registerVersion)("angularfire",sa.full,"app"),(0,qn.registerVersion)("angular",rw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(we(ko))};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[ote,ste]})}return n})();function cte(n,...e){return{ngModule:ute,providers:[{provide:SD,useFactory:ate(n),multi:!0,deps:[Vt,Yr,Id,...e]}]}}const lte=Ib(qn.initializeApp,!0);Ze(35);class PD{constructor(){return zy("auth")}}class xD{constructor(e){return e}}const pU="firestore",ND=new be("angularfire2.firestore-instances");function mte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new xD(r)}}const _te={provide:class pte{constructor(){return zy(pU)}},deps:[[new Lr,ND]]},yte={provide:xD,useFactory:function gte(n,e){const t=vb(pU,n,e);return t&&new xD(t)},deps:[[new Lr,ND],lh]};let vte=(()=>{class n{constructor(){(0,qn.registerVersion)("angularfire",sa.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[yte,_te]})}return n})();function Ite(n,...e){return{ngModule:vte,providers:[{provide:ND,useFactory:mte(n),multi:!0,deps:[Vt,Yr,Id,AD,[new Lr,PD],[new Lr,Cp],...e]}]}}const Ete=Ib(gQ,!0);class OD{constructor(e){return e}}const gU="storage",kD=new be("angularfire2.storage-instances");function bte(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OD(r)}}const Tte={provide:class wte{constructor(){return zy(gU)}},deps:[[new Lr,kD]]},Dte={provide:OD,useFactory:function Cte(n,e){const t=vb(gU,n,e);return t&&new OD(t)},deps:[[new Lr,kD],lh]};let Ate=(()=>{class n{constructor(){(0,qn.registerVersion)("angularfire",sa.full,"gcs")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jn({type:n});static \u0275inj=Pn({providers:[Dte,Tte]})}return n})();function Ste(n,...e){return{ngModule:Ate,providers:[{provide:kD,useFactory:bte(n),multi:!0,deps:[Vt,Yr,Id,AD,[new Lr,PD],[new Lr,Cp],...e]}]}}const Rte=Ib(oX,!0);let Pte=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Jn({type:n,bootstrap:[rte]});static#n=this.\u0275inj=Pn({imports:[Y9,mb,Zee,RY,vX,r7,JW.initializeApp(hU_firebase),cte(()=>lte(hU_firebase)),Ite(()=>Ete()),Ste(()=>Rte()),Aee,Dee]})}return n})();K9().bootstrapModule(Pte).catch(n=>console.error(n))},106:(so,Zn,Ze)=>{Ze.d(Zn,{Z:()=>Kn});var R=Ze(58),De=Ze(537),M=Ze(534),$e=Ze(879);class xt{constructor(tt,nt){this._delegate=tt,this.firebase=nt,(0,M._addComponent)(tt,new De.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(tt,nt=M._DEFAULT_ENTRY_NAME){var rr;this._delegate.checkDestroyed();const vn=this._delegate.container.getProvider(tt);return!vn.isInitialized()&&"EXPLICIT"===(null===(rr=vn.getComponent())||void 0===rr?void 0:rr.instantiationMode)&&vn.initialize(),vn.getImmediate({identifier:nt})}_removeServiceInstance(tt,nt=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(nt)}_addComponent(tt){(0,M._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,M._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fn=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function St(){const Et=function nn(Et){const tt={},nt={__esModule:!0,initializeApp:function _t(ut,Sn={}){const pe=M.initializeApp(ut,Sn);if((0,R.r3)(tt,pe.name))return tt[pe.name];const un=new Et(pe,nt);return tt[pe.name]=un,un},app:vn,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function zr(ut){const Sn=ut.name,pe=Sn.replace("-compat","");if(M._registerComponent(ut)&&"PUBLIC"===ut.type){const un=(Kt=vn())=>{if("function"!=typeof Kt[pe])throw Fn.create("invalid-app-argument",{appName:Sn});return Kt[pe]()};void 0!==ut.serviceProps&&(0,R.ZB)(un,ut.serviceProps),nt[pe]=un,Et.prototype[pe]=function(...Kt){return this._getService.bind(this,Sn).apply(this,ut.multipleInstances?Kt:[])}}return"PUBLIC"===ut.type?nt[pe]:null},removeApp:function rr(ut){delete tt[ut]},useAsService:function Ft(ut,Sn){return"serverAuth"===Sn?null:Sn},modularAPIs:M}};function vn(ut){if(!(0,R.r3)(tt,ut=ut||M._DEFAULT_ENTRY_NAME))throw Fn.create("no-app",{appName:ut});return tt[ut]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Bt(){return Object.keys(tt).map(ut=>tt[ut])}}),vn.App=Et,nt}(xt);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:St,extendNamespace:function tt(nt){(0,R.ZB)(Et,nt)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),Et}(),Ee=new $e.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Kn=fe;!function Nt(Et){(0,M.registerVersion)("@firebase/app-compat","0.2.35",Et)}()},534:(so,Zn,Ze)=>{Ze.r(Zn),Ze.d(Zn,{FirebaseError:()=>$e.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>fi,_addComponent:()=>Mr,_addOrOverwriteComponent:()=>rn,_apps:()=>Rr,_clearComponents:()=>Mi,_components:()=>En,_getProvider:()=>Vn,_isFirebaseApp:()=>Ao,_isFirebaseServerApp:()=>Yt,_registerComponent:()=>Cr,_removeServiceInstance:()=>Yo,_serverApps:()=>Pr,deleteApp:()=>Po,getApp:()=>Xo,getApps:()=>es,initializeApp:()=>Ro,initializeServerApp:()=>Jo,onLog:()=>C,registerVersion:()=>O,setLogLevel:()=>A});var R=Ze(861),De=Ze(537),M=Ze(879),$e=Ze(58);const xt=(x,G)=>G.some(K=>x instanceof K);let yn,Fn;const fe=new WeakMap,Ee=new WeakMap,je=new WeakMap,at=new WeakMap,Nt=new WeakMap;let tt={get(x,G,K){if(x instanceof IDBTransaction){if("done"===G)return Ee.get(x);if("objectStoreNames"===G)return x.objectStoreNames||je.get(x);if("store"===G)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return _t(x[G])},set:(x,G,K)=>(x[G]=K,!0),has:(x,G)=>x instanceof IDBTransaction&&("done"===G||"store"===G)||G in x};function vn(x){return"function"==typeof x?function rr(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function St(){return Fn||(Fn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...G){return x.apply(Bt(this),G),_t(fe.get(this))}:function(...G){return _t(x.apply(Bt(this),G))}:function(G,...K){const ve=x.call(Bt(this),G,...K);return je.set(ve,G.sort?G.sort():[G]),_t(ve)}}(x):(x instanceof IDBTransaction&&function Et(x){if(Ee.has(x))return;const G=new Promise((K,ve)=>{const rt=()=>{x.removeEventListener("complete",ct),x.removeEventListener("error",gt),x.removeEventListener("abort",gt)},ct=()=>{K(),rt()},gt=()=>{ve(x.error||new DOMException("AbortError","AbortError")),rt()};x.addEventListener("complete",ct),x.addEventListener("error",gt),x.addEventListener("abort",gt)});Ee.set(x,G)}(x),xt(x,function nn(){return yn||(yn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,tt):x)}function _t(x){if(x instanceof IDBRequest)return function Kn(x){const G=new Promise((K,ve)=>{const rt=()=>{x.removeEventListener("success",ct),x.removeEventListener("error",gt)},ct=()=>{K(_t(x.result)),rt()},gt=()=>{ve(x.error),rt()};x.addEventListener("success",ct),x.addEventListener("error",gt)});return G.then(K=>{K instanceof IDBCursor&&fe.set(K,x)}).catch(()=>{}),Nt.set(G,x),G}(x);if(at.has(x))return at.get(x);const G=vn(x);return G!==x&&(at.set(x,G),Nt.set(G,x)),G}const Bt=x=>Nt.get(x),ut=["get","getKey","getAll","getAllKeys","count"],Sn=["put","add","delete","clear"],pe=new Map;function un(x,G){if(!(x instanceof IDBDatabase)||G in x||"string"!=typeof G)return;if(pe.get(G))return pe.get(G);const K=G.replace(/FromIndex$/,""),ve=G!==K,rt=Sn.includes(K);if(!(K in(ve?IDBIndex:IDBObjectStore).prototype)||!rt&&!ut.includes(K))return;const ct=function(){var gt=(0,R.Z)(function*(Gt,...Ct){const xi=this.transaction(Gt,rt?"readwrite":"readonly");let Fs=xi.store;return ve&&(Fs=Fs.index(Ct.shift())),(yield Promise.all([Fs[K](...Ct),rt&&xi.done]))[0]});return function(Ct){return gt.apply(this,arguments)}}();return pe.set(G,ct),ct}!function nt(x){tt=x(tt)}(x=>({...x,get:(G,K,ve)=>un(G,K)||x.get(G,K,ve),has:(G,K)=>!!un(G,K)||x.has(G,K)}));class Kt{constructor(G){this.container=G}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function In(x){const G=x.getComponent();return"VERSION"===G?.type}(K)){const ve=K.getImmediate();return`${ve.library}/${ve.version}`}return null}).filter(K=>K).join(" ")}}const li="@firebase/app",di="0.10.5",lt=new M.Yd("@firebase/app"),fi="[DEFAULT]",Zi={[li]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Rr=new Map,Pr=new Map,En=new Map;function Mr(x,G){try{x.container.addComponent(G)}catch(K){lt.debug(`Component ${G.name} failed to register with FirebaseApp ${x.name}`,K)}}function rn(x,G){x.container.addOrOverwriteComponent(G)}function Cr(x){const G=x.name;if(En.has(G))return lt.debug(`There were multiple attempts to register component ${G}.`),!1;En.set(G,x);for(const K of Rr.values())Mr(K,x);for(const K of Pr.values())Mr(K,x);return!0}function Vn(x,G){const K=x.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),x.container.getProvider(G)}function Yo(x,G,K=fi){Vn(x,G).clearInstance(K)}function Ao(x){return void 0!==x.options}function Yt(x){return void 0!==x.settings}function Mi(){En.clear()}const Ln=new $e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ir{constructor(G,K,ve){this._isDeleted=!1,this._options=Object.assign({},G),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=ve,this.container.addComponent(new De.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(G){this.checkDestroyed(),this._automaticDataCollectionEnabled=G}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(G){this._isDeleted=G}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}class wn extends ir{constructor(G,K,ve,rt){const ct=void 0!==K.automaticDataCollectionEnabled&&K.automaticDataCollectionEnabled,gt={name:ve,automaticDataCollectionEnabled:ct};super(void 0!==G.apiKey?G:G.options,gt,rt),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ct},K),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,K.releaseOnDeref=void 0,O(li,di,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(G){this.isDeleted||(this._refCount++,void 0!==G&&this._finalizationRegistry.register(G,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Po(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ln.create("server-app-deleted")}}const br="10.12.2";function Ro(x,G={}){let K=x;"object"!=typeof G&&(G={name:G});const ve=Object.assign({name:fi,automaticDataCollectionEnabled:!1},G),rt=ve.name;if("string"!=typeof rt||!rt)throw Ln.create("bad-app-name",{appName:String(rt)});if(K||(K=(0,$e.aH)()),!K)throw Ln.create("no-options");const ct=Rr.get(rt);if(ct){if((0,$e.vZ)(K,ct.options)&&(0,$e.vZ)(ve,ct.config))return ct;throw Ln.create("duplicate-app",{appName:rt})}const gt=new De.H0(rt);for(const Ct of En.values())gt.addComponent(Ct);const Gt=new ir(K,ve,gt);return Rr.set(rt,Gt),Gt}function Jo(x,G){if((0,$e.jU)())throw Ln.create("invalid-server-app-environment");let K;void 0===G.automaticDataCollectionEnabled&&(G.automaticDataCollectionEnabled=!1),K=Ao(x)?x.options:x;const ve=Object.assign(Object.assign({},G),K);if(void 0!==ve.releaseOnDeref&&delete ve.releaseOnDeref,void 0!==G.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ln.create("finalization-registry-not-supported",{});const ct=""+(xi=JSON.stringify(ve),[...xi].reduce((Fs,hn)=>Math.imul(31,Fs)+hn.charCodeAt(0)|0,0)),gt=Pr.get(ct);var xi;if(gt)return gt.incRefCount(G.releaseOnDeref),gt;const Gt=new De.H0(ct);for(const xi of En.values())Gt.addComponent(xi);const Ct=new wn(K,G,ct,Gt);return Pr.set(ct,Ct),Ct}function Xo(x=fi){const G=Rr.get(x);if(!G&&x===fi&&(0,$e.aH)())return Ro();if(!G)throw Ln.create("no-app",{appName:x});return G}function es(){return Array.from(Rr.values())}function Po(x){return L.apply(this,arguments)}function L(){return(L=(0,R.Z)(function*(x){let G=!1;const K=x.name;Rr.has(K)?(G=!0,Rr.delete(K)):Pr.has(K)&&x.decRefCount()<=0&&(Pr.delete(K),G=!0),G&&(yield Promise.all(x.container.getProviders().map(ve=>ve.delete())),x.isDeleted=!0)})).apply(this,arguments)}function O(x,G,K){var ve;let rt=null!==(ve=Zi[x])&&void 0!==ve?ve:x;K&&(rt+=`-${K}`);const ct=rt.match(/\s|\//),gt=G.match(/\s|\//);if(ct||gt){const Gt=[`Unable to register library "${rt}" with version "${G}":`];return ct&&Gt.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),ct&&gt&&Gt.push("and"),gt&&Gt.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void lt.warn(Gt.join(" "))}Cr(new De.wA(`${rt}-version`,()=>({library:rt,version:G}),"VERSION"))}function C(x,G){if(null!==x&&"function"!=typeof x)throw Ln.create("invalid-log-argument");(0,M.Am)(x,G)}function A(x){(0,M.Ub)(x)}const w="firebase-heartbeat-database",k=1,le="firebase-heartbeat-store";let Re=null;function Ve(){return Re||(Re=function zr(x,G,{blocked:K,upgrade:ve,blocking:rt,terminated:ct}={}){const gt=indexedDB.open(x,G),Gt=_t(gt);return ve&&gt.addEventListener("upgradeneeded",Ct=>{ve(_t(gt.result),Ct.oldVersion,Ct.newVersion,_t(gt.transaction),Ct)}),K&&gt.addEventListener("blocked",Ct=>K(Ct.oldVersion,Ct.newVersion,Ct)),Gt.then(Ct=>{ct&&Ct.addEventListener("close",()=>ct()),rt&&Ct.addEventListener("versionchange",xi=>rt(xi.oldVersion,xi.newVersion,xi))}).catch(()=>{}),Gt}(w,k,{upgrade:(x,G)=>{if(0===G)try{x.createObjectStore(le)}catch(K){console.warn(K)}}}).catch(x=>{throw Ln.create("idb-open",{originalErrorMessage:x.message})})),Re}function At(){return(At=(0,R.Z)(function*(x){try{const K=(yield Ve()).transaction(le),ve=yield K.objectStore(le).get(He(x));return yield K.done,ve}catch(G){if(G instanceof $e.ZR)lt.warn(G.message);else{const K=Ln.create("idb-get",{originalErrorMessage:G?.message});lt.warn(K.message)}}})).apply(this,arguments)}function Pe(x,G){return $t.apply(this,arguments)}function $t(){return($t=(0,R.Z)(function*(x,G){try{const ve=(yield Ve()).transaction(le,"readwrite");yield ve.objectStore(le).put(G,He(x)),yield ve.done}catch(K){if(K instanceof $e.ZR)lt.warn(K.message);else{const ve=Ln.create("idb-set",{originalErrorMessage:K?.message});lt.warn(ve.message)}}})).apply(this,arguments)}function He(x){return`${x.name}!${x.options.appId}`}class Ht{constructor(G){this.container=G,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Ca(K),this._heartbeatsCachePromise=this._storage.read().then(ve=>(this._heartbeatsCache=ve,ve))}triggerHeartbeat(){var G=this;return(0,R.Z)(function*(){var K,ve;const ct=G.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Ke();if((null!=(null===(K=G._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||(G._heartbeatsCache=yield G._heartbeatsCachePromise,null!=(null===(ve=G._heartbeatsCache)||void 0===ve?void 0:ve.heartbeats)))&&G._heartbeatsCache.lastSentHeartbeatDate!==gt&&!G._heartbeatsCache.heartbeats.some(Gt=>Gt.date===gt))return G._heartbeatsCache.heartbeats.push({date:gt,agent:ct}),G._heartbeatsCache.heartbeats=G._heartbeatsCache.heartbeats.filter(Gt=>{const Ct=new Date(Gt.date).valueOf();return Date.now()-Ct<=2592e6}),G._storage.overwrite(G._heartbeatsCache)})()}getHeartbeatsHeader(){var G=this;return(0,R.Z)(function*(){var K;if(null===G._heartbeatsCache&&(yield G._heartbeatsCachePromise),null==(null===(K=G._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||0===G._heartbeatsCache.heartbeats.length)return"";const ve=Ke(),{heartbeatsToSend:rt,unsentEntries:ct}=function wa(x,G=1024){const K=[];let ve=x.slice();for(const rt of x){const ct=K.find(gt=>gt.agent===rt.agent);if(ct){if(ct.dates.push(rt.date),ks(K)>G){ct.dates.pop();break}}else if(K.push({agent:rt.agent,dates:[rt.date]}),ks(K)>G){K.pop();break}ve=ve.slice(1)}return{heartbeatsToSend:K,unsentEntries:ve}}(G._heartbeatsCache.heartbeats),gt=(0,$e.L)(JSON.stringify({version:2,heartbeats:rt}));return G._heartbeatsCache.lastSentHeartbeatDate=ve,ct.length>0?(G._heartbeatsCache.heartbeats=ct,yield G._storage.overwrite(G._heartbeatsCache)):(G._heartbeatsCache.heartbeats=[],G._storage.overwrite(G._heartbeatsCache)),gt})()}}function Ke(){return(new Date).toISOString().substring(0,10)}class Ca{constructor(G){this.app=G,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,$e.hl)()&&(0,$e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var G=this;return(0,R.Z)(function*(){if(yield G._canUseIndexedDBPromise){const ve=yield function et(x){return At.apply(this,arguments)}(G.app);return ve?.heartbeats?ve:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(G){var K=this;return(0,R.Z)(function*(){var ve;if(yield K._canUseIndexedDBPromise){const ct=yield K.read();return Pe(K.app,{lastSentHeartbeatDate:null!==(ve=G.lastSentHeartbeatDate)&&void 0!==ve?ve:ct.lastSentHeartbeatDate,heartbeats:G.heartbeats})}})()}add(G){var K=this;return(0,R.Z)(function*(){var ve;if(yield K._canUseIndexedDBPromise){const ct=yield K.read();return Pe(K.app,{lastSentHeartbeatDate:null!==(ve=G.lastSentHeartbeatDate)&&void 0!==ve?ve:ct.lastSentHeartbeatDate,heartbeats:[...ct.heartbeats,...G.heartbeats]})}})()}}function ks(x){return(0,$e.L)(JSON.stringify({version:2,heartbeats:x})).length}!function kc(x){Cr(new De.wA("platform-logger",G=>new Kt(G),"PRIVATE")),Cr(new De.wA("heartbeat",G=>new Ht(G),"PRIVATE")),O(li,di,x),O(li,di,"esm2017"),O("fire-js","")}("")},537:(so,Zn,Ze)=>{Ze.d(Zn,{H0:()=>nn,wA:()=>M});var R=Ze(861),De=Ze(58);class M{constructor(fe,Ee,je){this.name=fe,this.instanceFactory=Ee,this.type=je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const $e="[DEFAULT]";class xt{constructor(fe,Ee){this.name=fe,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const Ee=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(Ee)){const je=new De.BH;if(this.instancesDeferred.set(Ee,je),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:Ee});at&&je.resolve(at)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(fe){var Ee;const je=this.normalizeInstanceIdentifier(fe?.identifier),at=null!==(Ee=fe?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(je)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:je})}catch(Nt){if(at)return null;throw Nt}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Fn(St){return"EAGER"===St.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:$e})}catch{}for(const[Ee,je]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(Ee);try{const Nt=this.getOrInitializeService({instanceIdentifier:at});je.resolve(Nt)}catch{}}}}clearInstance(fe=$e){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,R.Z)(function*(){const Ee=Array.from(fe.instances.values());yield Promise.all([...Ee.filter(je=>"INTERNAL"in je).map(je=>je.INTERNAL.delete()),...Ee.filter(je=>"_delete"in je).map(je=>je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=$e){return this.instances.has(fe)}getOptions(fe=$e){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:Ee={}}=fe,je=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(je))throw Error(`${this.name}(${je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:je,options:Ee});for(const[Nt,Kn]of this.instancesDeferred.entries())je===this.normalizeInstanceIdentifier(Nt)&&Kn.resolve(at);return at}onInit(fe,Ee){var je;const at=this.normalizeInstanceIdentifier(Ee),Nt=null!==(je=this.onInitCallbacks.get(at))&&void 0!==je?je:new Set;Nt.add(fe),this.onInitCallbacks.set(at,Nt);const Kn=this.instances.get(at);return Kn&&fe(Kn,at),()=>{Nt.delete(fe)}}invokeOnInitCallbacks(fe,Ee){const je=this.onInitCallbacks.get(Ee);if(je)for(const at of je)try{at(fe,Ee)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:Ee={}}){let je=this.instances.get(fe);if(!je&&this.component&&(je=this.component.instanceFactory(this.container,{instanceIdentifier:(St=fe,St===$e?void 0:St),options:Ee}),this.instances.set(fe,je),this.instancesOptions.set(fe,Ee),this.invokeOnInitCallbacks(je,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,je)}catch{}var St;return je||null}normalizeInstanceIdentifier(fe=$e){return this.component?this.component.multipleInstances?fe:$e:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class nn{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const Ee=this.getProvider(fe.name);if(Ee.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);Ee.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const Ee=new xt(fe,this);return this.providers.set(fe,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},879:(so,Zn,Ze)=>{Ze.d(Zn,{Am:()=>St,Ub:()=>nn,Yd:()=>Fn,in:()=>De});const R=[];var De=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}(De||{});const M={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},$e=De.INFO,xt={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},yn=(fe,Ee,...je)=>{if(Ee<fe.logLevel)return;const at=(new Date).toISOString(),Nt=xt[Ee];if(!Nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[Nt](`[${at}]  ${fe.name}:`,...je)};class Fn{constructor(Ee){this.name=Ee,this._logLevel=$e,this._logHandler=yn,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in De))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?M[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...Ee),this._logHandler(this,De.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...Ee),this._logHandler(this,De.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,De.INFO,...Ee),this._logHandler(this,De.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,De.WARN,...Ee),this._logHandler(this,De.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...Ee),this._logHandler(this,De.ERROR,...Ee)}}function nn(fe){R.forEach(Ee=>{Ee.setLogLevel(fe)})}function St(fe,Ee){for(const je of R){let at=null;Ee&&Ee.level&&(at=M[Ee.level]),je.userLogHandler=null===fe?null:(Nt,Kn,...Et)=>{const tt=Et.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Kn>=(at??Nt.logLevel)&&fe({level:De[Kn].toLowerCase(),message:tt,args:Et,type:Nt.name})}}}},365:(so,Zn,Ze)=>{Ze.r(Zn);var R=Ze(861),De=Ze(106),M=Ze(35),$e=Ze(58),Fn=(Ze(534),Ze(879),Ze(537));function nn(){return window}function Ee(){return Ee=(0,R.Z)(function*(C,A,w){var k;const{BuildInfo:le}=nn();(0,M.au)(A.sessionId,"AuthEvent did not contain a session ID");const Re=yield function nt(C){return rr.apply(this,arguments)}(A.sessionId),Ve={};return(0,M.av)()?Ve.ibi=le.packageName:(0,M.aw)()?Ve.apn=le.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),le.displayName&&(Ve.appDisplayName=le.displayName),Ve.sessionId=Re,(0,M.ay)(C,w,A.type,void 0,null!==(k=A.eventId)&&void 0!==k?k:void 0,Ve)}),Ee.apply(this,arguments)}function at(){return(at=(0,R.Z)(function*(C){const{BuildInfo:A}=nn(),w={};(0,M.av)()?w.iosBundleId=A.packageName:(0,M.aw)()?w.androidPackageName=A.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),yield(0,M.az)(C,w)})).apply(this,arguments)}function Et(){return(Et=(0,R.Z)(function*(C,A,w){const{cordova:k}=nn();let le=()=>{};try{yield new Promise((Re,Ve)=>{let et=null;function At(){var He;Re();const or=null===(He=k.plugins.browsertab)||void 0===He?void 0:He.close;"function"==typeof or&&or(),"function"==typeof w?.close&&w.close()}function Pe(){et||(et=window.setTimeout(()=>{Ve((0,M.aB)(C,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===document?.visibilityState&&Pe()}A.addPassiveListener(At),document.addEventListener("resume",Pe,!1),(0,M.aw)()&&document.addEventListener("visibilitychange",$t,!1),le=()=>{A.removePassiveListener(At),document.removeEventListener("resume",Pe,!1),document.removeEventListener("visibilitychange",$t,!1),et&&window.clearTimeout(et)}})}finally{le()}})).apply(this,arguments)}function rr(){return(rr=(0,R.Z)(function*(C){const A=function vn(C){if((0,M.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const A=new ArrayBuffer(C.length),w=new Uint8Array(A);for(let k=0;k<C.length;k++)w[k]=C.charCodeAt(k);return w}(C),w=yield crypto.subtle.digest("SHA-256",A);return Array.from(new Uint8Array(w)).map(le=>le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Bt extends M.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(A=>{this.resolveInialized=A})}addPassiveListener(A){this.passiveListeners.add(A)}removePassiveListener(A){this.passiveListeners.delete(A)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(A){return this.resolveInialized(),this.passiveListeners.forEach(w=>w(A)),super.onEvent(A)}initialized(){var A=this;return(0,R.Z)(function*(){yield A.initPromise})()}}function ut(C){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,R.Z)(function*(C){const A=yield Kt()._get(In(C));return A&&(yield Kt()._remove(In(C))),A})).apply(this,arguments)}function un(){const C=[];for(let w=0;w<20;w++){const k=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(k))}return C.join("")}function Kt(){return(0,M.aE)(M.b)}function In(C){return(0,M.aF)("authEvent",C.config.apiKey,C.name)}function lt(C){if(!C?.includes("?"))return{};const[A,...w]=C.split("?");return(0,$e.zd)(w.join("?"))}const te=class Ri{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(A){var w=this;return(0,R.Z)(function*(){const k=A._key();let le=w.eventManagers.get(k);return le||(le=new Bt(A),w.eventManagers.set(k,le),w.attachCallbackListeners(A,le)),le})()}_openPopup(A){(0,M.ax)(A,"operation-not-supported-in-this-environment")}_openRedirect(A,w,k,le){var Re=this;return(0,R.Z)(function*(){!function tt(C){var A,w,k,le,Re,Ve,et,At,Pe,$t;const He=nn();(0,M.aC)("function"==typeof(null===(A=He?.universalLinks)||void 0===A?void 0:A.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aC)(typeof(null===(w=He?.BuildInfo)||void 0===w?void 0:w.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aC)("function"==typeof(null===(Re=null===(le=null===(k=He?.cordova)||void 0===k?void 0:k.plugins)||void 0===le?void 0:le.browsertab)||void 0===Re?void 0:Re.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(At=null===(et=null===(Ve=He?.cordova)||void 0===Ve?void 0:Ve.plugins)||void 0===et?void 0:et.browsertab)||void 0===At?void 0:At.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===($t=null===(Pe=He?.cordova)||void 0===Pe?void 0:Pe.InAppBrowser)||void 0===$t?void 0:$t.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(A);const Ve=yield Re._initialize(A);yield Ve.initialized(),Ve.resetRedirect(),(0,M.aI)(),yield Re._originValidation(A);const et=function zr(C,A,w=null){return{type:A,eventId:w,urlResponse:null,sessionId:un(),postBody:null,tenantId:C.tenantId,error:(0,M.aB)(C,"no-auth-event")}}(A,k,le);yield function Ft(C,A){return Kt()._set(In(C),A)}(A,et);const At=yield function fe(C,A,w){return Ee.apply(this,arguments)}(A,et,w),Pe=yield function Nt(C){const{cordova:A}=nn();return new Promise(w=>{A.plugins.browsertab.isAvailable(k=>{let le=null;k?A.plugins.browsertab.openUrl(C):le=A.InAppBrowser.open(C,(0,M.aA)()?"_blank":"_system","location=yes"),w(le)})})}(At);return function Kn(C,A,w){return Et.apply(this,arguments)}(A,Ve,Pe)})()}_isIframeWebStorageSupported(A,w){throw new Error("Method not implemented.")}_originValidation(A){const w=A._key();return this.originValidationPromises[w]||(this.originValidationPromises[w]=function je(C){return at.apply(this,arguments)}(A)),this.originValidationPromises[w]}attachCallbackListeners(A,w){const{universalLinks:k,handleOpenURL:le,BuildInfo:Re}=nn(),Ve=setTimeout((0,R.Z)(function*(){yield ut(A),w.onEvent(re())}),500),et=function(){var $t=(0,R.Z)(function*(He){clearTimeout(Ve);const or=yield ut(A);let Os=null;or&&He?.url&&(Os=function pe(C,A){var w,k;const le=function di(C){const A=lt(C),w=A.link?decodeURIComponent(A.link):void 0,k=lt(w).link,le=A.deep_link_id?decodeURIComponent(A.deep_link_id):void 0;return lt(le).link||le||k||w||C}(A);if(le.includes("/__/auth/callback")){const Re=lt(le),Ve=Re.firebaseError?function li(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(Re.firebaseError)):null,et=null===(k=null===(w=Ve?.code)||void 0===w?void 0:w.split("auth/"))||void 0===k?void 0:k[1],At=et?(0,M.aB)(et):null;return At?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:At,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:le,postBody:null}}return null}(or,He.url)),w.onEvent(Os||re())});return function(or){return $t.apply(this,arguments)}}();typeof k<"u"&&"function"==typeof k.subscribe&&k.subscribe(null,et);const At=le,Pe=`${Re.packageName.toLowerCase()}://`;nn().handleOpenURL=function(){var $t=(0,R.Z)(function*(He){if(He.toLowerCase().startsWith(Pe)&&et({url:He}),"function"==typeof At)try{At(He)}catch(or){console.error(or)}});return function(He){return $t.apply(this,arguments)}}()}};function re(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aB)("no-auth-event")}}function Me(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function Oe(C=(0,$e.z$)()){return!("file:"!==Me()&&"ionic:"!==Me()&&"capacitor:"!==Me()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ot(){try{const C=self.localStorage,A=M.aN();if(C)return C.setItem(A,"1"),C.removeItem(A),!function hi(C=(0,$e.z$)()){return function Dt(){return(0,$e.w1)()&&11===document?.documentMode}()||function cn(C=(0,$e.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,$e.hl)()}catch{return Qt()&&(0,$e.hl)()}return!1}function Qt(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function wt(){return"http:"===Me()||"https:"===Me()}()||(0,$e.ru)()||Oe())&&!function Ue(){return(0,$e.b$)()||(0,$e.UG)()}()&&Ot()&&!Qt()}function Qn(){return Oe()&&typeof document<"u"}function To(){return(To=(0,R.Z)(function*(){return!!Qn()&&new Promise(C=>{const A=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(A),C(!0)})})})).apply(this,arguments)}const kt={LOCAL:"local",NONE:"none",SESSION:"session"},Pi=M.aC,Qo="persistence";function fi(C){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,R.Z)(function*(C){yield C._initializationPromise;const A=Pr(),w=M.aF(Qo,C.config.apiKey,C.name);A&&A.setItem(w,C._getPersistence())})).apply(this,arguments)}function Pr(){var C;try{return(null===(C=function Wi(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const En=M.aC;class Mr{constructor(){this.browserResolver=M.aE(M.k),this.cordovaResolver=M.aE(te),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(A){var w=this;return(0,R.Z)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._initialize(A)})()}_openPopup(A,w,k,le){var Re=this;return(0,R.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openPopup(A,w,k,le)})()}_openRedirect(A,w,k,le){var Re=this;return(0,R.Z)(function*(){return yield Re.selectUnderlyingResolver(),Re.assertedUnderlyingResolver._openRedirect(A,w,k,le)})()}_isIframeWebStorageSupported(A,w){this.assertedUnderlyingResolver._isIframeWebStorageSupported(A,w)}_originValidation(A){return this.assertedUnderlyingResolver._originValidation(A)}get _shouldInitProactively(){return Qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return En(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var A=this;return(0,R.Z)(function*(){if(A.underlyingResolver)return;const w=yield function hr(){return To.apply(this,arguments)}();A.underlyingResolver=w?A.cordovaResolver:A.browserResolver})()}}function rn(C){return C.unwrap()}function Vn(C){return Ao(C)}function Ao(C){const{_tokenResponse:A}=C instanceof $e.ZR?C.customData:C;if(!A)return null;if(!(C instanceof $e.ZR)&&"temporaryProof"in A&&"phoneNumber"in A)return M.P.credentialFromResult(C);const w=A.providerId;if(!w||w===M.p.PASSWORD)return null;let k;switch(w){case M.p.GOOGLE:k=M.X;break;case M.p.FACEBOOK:k=M.W;break;case M.p.GITHUB:k=M.Y;break;case M.p.TWITTER:k=M.$;break;default:const{oauthIdToken:le,oauthAccessToken:Re,oauthTokenSecret:Ve,pendingToken:et,nonce:At}=A;return Re||Ve||le||et?et?w.startsWith("saml.")?M.aQ._create(w,et):M.N._fromParams({providerId:w,signInMethod:w,pendingToken:et,idToken:le,accessToken:Re}):new M.Z(w).credential({idToken:le,accessToken:Re,rawNonce:At}):null}return C instanceof $e.ZR?k.credentialFromError(C):k.credentialFromResult(C)}function Yt(C,A){return A.catch(w=>{throw w instanceof $e.ZR&&function Yo(C,A){var w;const k=null===(w=A.customData)||void 0===w?void 0:w._tokenResponse;if("auth/multi-factor-auth-required"===A?.code)A.resolver=new Ln(C,M.as(C,A));else if(k){const le=Ao(A),Re=A;le&&(Re.credential=le,Re.tenantId=k.tenantId||void 0,Re.email=k.email||void 0,Re.phoneNumber=k.phoneNumber||void 0)}}(C,w),w}).then(w=>{const le=w.user;return{operationType:w.operationType,credential:Vn(w),additionalUserInfo:M.aq(w),user:ir.getOrCreate(le)}})}function Mi(C,A){return So.apply(this,arguments)}function So(){return(So=(0,R.Z)(function*(C,A){const w=yield A;return{verificationId:w.verificationId,confirm:k=>Yt(C,w.confirm(k))}})).apply(this,arguments)}class Ln{constructor(A,w){this.resolver=w,this.auth=function Cr(C){return C.wrapped()}(A)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(A){return Yt(rn(this.auth),this.resolver.resolveSignIn(A))}}class ir{constructor(A){this._delegate=A,this.multiFactor=M.at(A)}static getOrCreate(A){return ir.USER_MAP.has(A)||ir.USER_MAP.set(A,new ir(A)),ir.USER_MAP.get(A)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(A){return this._delegate.getIdTokenResult(A)}getIdToken(A){return this._delegate.getIdToken(A)}linkAndRetrieveDataWithCredential(A){return this.linkWithCredential(A)}linkWithCredential(A){var w=this;return(0,R.Z)(function*(){return Yt(w.auth,M.a2(w._delegate,A))})()}linkWithPhoneNumber(A,w){var k=this;return(0,R.Z)(function*(){return Mi(k.auth,M.l(k._delegate,A,w))})()}linkWithPopup(A){var w=this;return(0,R.Z)(function*(){return Yt(w.auth,M.d(w._delegate,A,Mr))})()}linkWithRedirect(A){var w=this;return(0,R.Z)(function*(){return yield fi(M.aJ(w.auth)),M.g(w._delegate,A,Mr)})()}reauthenticateAndRetrieveDataWithCredential(A){return this.reauthenticateWithCredential(A)}reauthenticateWithCredential(A){var w=this;return(0,R.Z)(function*(){return Yt(w.auth,M.a3(w._delegate,A))})()}reauthenticateWithPhoneNumber(A,w){return Mi(this.auth,M.r(this._delegate,A,w))}reauthenticateWithPopup(A){return Yt(this.auth,M.e(this._delegate,A,Mr))}reauthenticateWithRedirect(A){var w=this;return(0,R.Z)(function*(){return yield fi(M.aJ(w.auth)),M.h(w._delegate,A,Mr)})()}sendEmailVerification(A){return M.ag(this._delegate,A)}unlink(A){var w=this;return(0,R.Z)(function*(){return yield M.ap(w._delegate,A),w})()}updateEmail(A){return M.al(this._delegate,A)}updatePassword(A){return M.am(this._delegate,A)}updatePhoneNumber(A){return M.u(this._delegate,A)}updateProfile(A){return M.ak(this._delegate,A)}verifyBeforeUpdateEmail(A,w){return M.ah(this._delegate,A,w)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ir.USER_MAP=new WeakMap;const wn=M.aC;let br=(()=>{class C{constructor(w,k){if(this.app=w,k.isInitialized())return this._delegate=k.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:le}=w.options;wn(le,"invalid-api-key",{appName:w.name}),wn(le,"invalid-api-key",{appName:w.name});const Re=typeof window<"u"?Mr:void 0;this._delegate=k.initialize({options:{persistence:Jo(le,w.name),popupRedirectResolver:Re}}),this._delegate._updateErrorMap(M.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ir.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(w){this._delegate.languageCode=w}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(w){this._delegate.tenantId=w}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(w,k){M.K(this._delegate,w,k)}applyActionCode(w){return M.a7(this._delegate,w)}checkActionCode(w){return M.a8(this._delegate,w)}confirmPasswordReset(w,k){return M.a6(this._delegate,w,k)}createUserWithEmailAndPassword(w,k){var le=this;return(0,R.Z)(function*(){return Yt(le._delegate,M.aa(le._delegate,w,k))})()}fetchProvidersForEmail(w){return this.fetchSignInMethodsForEmail(w)}fetchSignInMethodsForEmail(w){return M.af(this._delegate,w)}isSignInWithEmailLink(w){return M.ad(this._delegate,w)}getRedirectResult(){var w=this;return(0,R.Z)(function*(){wn(Rn(),w._delegate,"operation-not-supported-in-this-environment");const k=yield M.j(w._delegate,Mr);return k?Yt(w._delegate,Promise.resolve(k)):{credential:null,user:null}})()}addFrameworkForLogging(w){!function se(C,A){(0,M.aJ)(C)._logFramework(A)}(this._delegate,w)}onAuthStateChanged(w,k,le){const{next:Re,error:Ve,complete:et}=Ro(w,k,le);return this._delegate.onAuthStateChanged(Re,Ve,et)}onIdTokenChanged(w,k,le){const{next:Re,error:Ve,complete:et}=Ro(w,k,le);return this._delegate.onIdTokenChanged(Re,Ve,et)}sendSignInLinkToEmail(w,k){return M.ac(this._delegate,w,k)}sendPasswordResetEmail(w,k){return M.a5(this._delegate,w,k||void 0)}setPersistence(w){var k=this;return(0,R.Z)(function*(){let le;switch(function Do(C,A){Pi(Object.values(kt).includes(A),C,"invalid-persistence-type"),(0,$e.b$)()?Pi(A!==kt.SESSION,C,"unsupported-persistence-type"):(0,$e.UG)()?Pi(A===kt.NONE,C,"unsupported-persistence-type"):Qt()?Pi(A===kt.NONE||A===kt.LOCAL&&(0,$e.hl)(),C,"unsupported-persistence-type"):Pi(A===kt.NONE||Ot(),C,"unsupported-persistence-type")}(k._delegate,w),w){case kt.SESSION:le=M.a;break;case kt.LOCAL:le=(yield M.aE(M.i)._isAvailable())?M.i:M.b;break;case kt.NONE:le=M.U;break;default:return M.ax("argument-error",{appName:k._delegate.name})}return k._delegate.setPersistence(le)})()}signInAndRetrieveDataWithCredential(w){return this.signInWithCredential(w)}signInAnonymously(){return Yt(this._delegate,M.a0(this._delegate))}signInWithCredential(w){return Yt(this._delegate,M.a1(this._delegate,w))}signInWithCustomToken(w){return Yt(this._delegate,M.a4(this._delegate,w))}signInWithEmailAndPassword(w,k){return Yt(this._delegate,M.ab(this._delegate,w,k))}signInWithEmailLink(w,k){return Yt(this._delegate,M.ae(this._delegate,w,k))}signInWithPhoneNumber(w,k){return Mi(this._delegate,M.s(this._delegate,w,k))}signInWithPopup(w){var k=this;return(0,R.Z)(function*(){return wn(Rn(),k._delegate,"operation-not-supported-in-this-environment"),Yt(k._delegate,M.c(k._delegate,w,Mr))})()}signInWithRedirect(w){var k=this;return(0,R.Z)(function*(){return wn(Rn(),k._delegate,"operation-not-supported-in-this-environment"),yield fi(k._delegate),M.f(k._delegate,w,Mr)})()}updateCurrentUser(w){return this._delegate.updateCurrentUser(w)}verifyPasswordResetCode(w){return M.a9(this._delegate,w)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=kt,C})();function Ro(C,A,w){let k=C;"function"!=typeof C&&({next:k,error:A,complete:w}=C);const le=k;return{next:Ve=>le(Ve&&ir.getOrCreate(Ve)),error:A,complete:w}}function Jo(C,A){const w=function Rr(C,A){const w=Pr();if(!w)return[];const k=M.aF(Qo,C,A);switch(w.getItem(k)){case kt.NONE:return[M.U];case kt.LOCAL:return[M.i,M.a];case kt.SESSION:return[M.a];default:return[]}}(C,A);if(typeof self<"u"&&!w.includes(M.i)&&w.push(M.i),typeof window<"u")for(const k of[M.b,M.a])w.includes(k)||w.push(k);return w.includes(M.U)||w.push(M.U),w}class Xo{constructor(){this.providerId="phone",this._delegate=new M.P(rn(De.Z.auth()))}static credential(A,w){return M.P.credential(A,w)}verifyPhoneNumber(A,w){return this._delegate.verifyPhoneNumber(A,w)}unwrap(){return this._delegate}}Xo.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,Xo.PROVIDER_ID=M.P.PROVIDER_ID;const es=M.aC;class Po{constructor(A,w,k=De.Z.app()){var le;es(null===(le=k.options)||void 0===le?void 0:le.apiKey,"invalid-api-key",{appName:k.name}),this._delegate=new M.R(k.auth(),A,w),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function O(C){C.INTERNAL.registerComponent(new Fn.wA("auth-compat",A=>{const w=A.getProvider("app-compat").getImmediate(),k=A.getProvider("auth");return new br(w,k)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.V,FacebookAuthProvider:M.W,GithubAuthProvider:M.Y,GoogleAuthProvider:M.X,OAuthProvider:M.Z,SAMLAuthProvider:M._,PhoneAuthProvider:Xo,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Po,TwitterAuthProvider:M.$,Auth:br,AuthCredential:M.L,Error:$e.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.9")}(De.Z)},861:(so,Zn,Ze)=>{function R(M,$e,xt,yn,Fn,nn,St){try{var fe=M[nn](St),Ee=fe.value}catch(je){return void xt(je)}fe.done?$e(Ee):Promise.resolve(Ee).then(yn,Fn)}function De(M){return function(){var $e=this,xt=arguments;return new Promise(function(yn,Fn){var nn=M.apply($e,xt);function St(Ee){R(nn,yn,Fn,St,fe,"next",Ee)}function fe(Ee){R(nn,yn,Fn,St,fe,"throw",Ee)}St(void 0)})}}Ze.d(Zn,{Z:()=>De})},582:(so,Zn,Ze)=>{function $e(te,re){var se={};for(var ae in te)Object.prototype.hasOwnProperty.call(te,ae)&&re.indexOf(ae)<0&&(se[ae]=te[ae]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(ae=Object.getOwnPropertySymbols(te);de<ae.length;de++)re.indexOf(ae[de])<0&&Object.prototype.propertyIsEnumerable.call(te,ae[de])&&(se[ae[de]]=te[ae[de]])}return se}function je(te,re,se,ae){return new(se||(se=Promise))(function(ie,Me){function wt(Dt){try{Ue(ae.next(Dt))}catch(cn){Me(cn)}}function Oe(Dt){try{Ue(ae.throw(Dt))}catch(cn){Me(cn)}}function Ue(Dt){Dt.done?ie(Dt.value):function de(ie){return ie instanceof se?ie:new se(function(Me){Me(ie)})}(Dt.value).then(wt,Oe)}Ue((ae=ae.apply(te,re||[])).next())})}function _t(te){return this instanceof _t?(this.v=te,this):new _t(te)}function Bt(te,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ae=se.apply(te,re||[]),ie=[];return de={},wt("next"),wt("throw"),wt("return",function Me(Ot){return function(Qt){return Promise.resolve(Qt).then(Ot,cn)}}),de[Symbol.asyncIterator]=function(){return this},de;function wt(Ot,Qt){ae[Ot]&&(de[Ot]=function(Rn){return new Promise(function(Qn,hr){ie.push([Ot,Rn,Qn,hr])>1||Oe(Ot,Rn)})},Qt&&(de[Ot]=Qt(de[Ot])))}function Oe(Ot,Qt){try{!function Ue(Ot){Ot.value instanceof _t?Promise.resolve(Ot.value.v).then(Dt,cn):hi(ie[0][2],Ot)}(ae[Ot](Qt))}catch(Rn){hi(ie[0][3],Rn)}}function Dt(Ot){Oe("next",Ot)}function cn(Ot){Oe("throw",Ot)}function hi(Ot,Qt){Ot(Qt),ie.shift(),ie.length&&Oe(ie[0][0],ie[0][1])}}function Ft(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=te[Symbol.asyncIterator];return re?re.call(te):(te=function Et(te){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&te[re],ae=0;if(se)return se.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&ae>=te.length&&(te=void 0),{value:te&&te[ae++],done:!te}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),se={},ae("next"),ae("throw"),ae("return"),se[Symbol.asyncIterator]=function(){return this},se);function ae(ie){se[ie]=te[ie]&&function(Me){return new Promise(function(wt,Oe){!function de(ie,Me,wt,Oe){Promise.resolve(Oe).then(function(Ue){ie({value:Ue,done:wt})},Me)}(wt,Oe,(Me=te[ie](Me)).done,Me.value)})}}}Ze.d(Zn,{FC:()=>Bt,KL:()=>Ft,_T:()=>$e,mG:()=>je,qq:()=>_t}),"function"==typeof SuppressedError&&SuppressedError}},so=>{so(so.s=62)}]);